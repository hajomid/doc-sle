<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Docker Installation | Docker Guide | SUSE Linux Enterprise Server 12 SP3</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="12 SP3" /><meta name="book-title" content="Docker Guide" /><meta name="chapter-title" content="Chapter 2. Docker Installation" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP3" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="book.sles.docker.html" title="Docker Guide" /><link rel="prev" href="cha.docker.overview.html" title="Chapter 1. Docker Overview" /><link rel="next" href="cha.sle2docker.installation.html" title="Chapter 3. Installing sle2docker" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.sles.docker.html">Docker Guide</a><span> › </span><a class="crumb" href="cha.docker.installation.html">Docker Installation</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Docker Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="cha.docker.overview.html"><span class="number">1 </span><span class="name">Docker Overview</span></a></li><li class="inactive"><a href="cha.docker.installation.html"><span class="number">2 </span><span class="name">Docker Installation</span></a></li><li class="inactive"><a href="cha.sle2docker.installation.html"><span class="number">3 </span><span class="name">Installing <code class="literal">sle2docker</code></span></a></li><li class="inactive"><a href="cha.registry.installation.html"><span class="number">4 </span><span class="name">Storing Images</span></a></li><li class="inactive"><a href="docker.building.images.html"><span class="number">5 </span><span class="name">Creating Custom Images</span></a></li><li class="inactive"><a href="docker.dockerizing.application.html"><span class="number">6 </span><span class="name">Dockerizing Applications</span></a></li><li class="inactive"><a href="cha.working.with.containers.html"><span class="number">7 </span><span class="name">Working with Containers</span></a></li><li class="inactive"><a href="app.docker.docupdates.html"><span class="number">A </span><span class="name">Documentation Updates</span></a></li><li class="inactive"><a href="bk11apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 1. Docker Overview" href="cha.docker.overview.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 3. Installing sle2docker" href="cha.sle2docker.installation.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.sles.docker.html">Docker Guide</a><span> › </span><a class="crumb" href="cha.docker.installation.html">Docker Installation</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 1. Docker Overview" href="cha.docker.overview.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 3. Installing sle2docker" href="cha.sle2docker.installation.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div xml:lang="en" class="chapter " id="cha.docker.installation" lang="en"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP3</span></span></span></div><div><h1 class="title"><span class="number">2 </span><span class="name">Docker Installation</span> </h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>docker_installation.xml</li><li><span class="ds-label">ID: </span>cha.docker.installation</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.docker.installation.html#Preparation"><span class="number">2.1 </span><span class="name">General Preparation</span></a></span></dt><dt><span class="sect1"><a href="cha.docker.installation.html#sec.docker.setup.net"><span class="number">2.2 </span><span class="name">Networking</span></a></span></dt></dl></div></div><div class="sect1 " id="Preparation"><div class="titlepage"><div><div><h2 class="title" id="Preparation"><span class="number">2.1 </span><span class="name">General Preparation</span> <a title="Permalink" class="permalink" href="cha.docker.installation.html#Preparation">#</a></h2></div></div></div><p>
    Prepare the host as described below. Before installing any
    Docker-related packages, you need to enable the container module:
   </p><div id="idm139669003336224" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Built-in Docker Orchestration Support</h6><p>
         Starting with Docker 1.12 the container orchestration is now an
         integral part of the Docker engine. Even though this feature is
         available in SLESSP1 and in SLESSP2, it is not supported and is
         only a technical preview. Use Kubernetes for Docker container
         orchestration, for details refer to the <a class="link" href="http://kubernetes.io/docs/getting-started-guides/kubeadm/" target="_blank">Kubernetes
         documentation</a>.
        </p></div><div class="procedure " id="idm139668999412848"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 2.1: </span><span class="name">Enabling the Container Module Using YaST </span><a title="Permalink" class="permalink" href="cha.docker.installation.html#idm139668999412848">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start YaST, and select <span class="guimenu">Software</span> › <span class="guimenu"> Software Repositories</span>.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Add</span> to open the add-on dialog.
     </p></li><li class="step "><p>
      Select <span class="guimenu">Extensions and Modules from Registration
      Server</span> and click <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      From the list of available extensions and modules, select
      <span class="guimenu">Container Module 12 x86_64</span> and click
      <span class="guimenu">Next</span>.
     </p><p>
      The containers module and its repositories will be added to your
      system.
     </p></li><li class="step "><p> If you use Subscription Management Tool, update the list of repositories on the
            SMT server. </p></li></ol></div></div><div class="procedure " id="idm139669005848608"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 2.2: </span><span class="name">Enabling the Container Module Using SUSEConnect </span><a title="Permalink" class="permalink" href="cha.docker.installation.html#idm139669005848608">#</a></h6></div><div class="procedure-contents"><ul class="procedure"><li class="step "><p>
      The Container Module can be added also with the following command:
     </p><div class="verbatim-wrap"><pre class="screen">$ sudo SUSEConnect -p sle-module-containers/12/x86_64 -r ''</pre></div><div id="idm139668975985280" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Note about the SUSEConnect syntax</h6><p>
       The <code class="option">-r ''</code> flag is required to avoid a known
       limitation of SUSEConnect.
      </p></div></li></ul></div></div><div class="procedure " id="idm139668975916480"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 2.3: </span><span class="name">Installing and Setting Up Docker </span><a title="Permalink" class="permalink" href="cha.docker.installation.html#idm139668975916480">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the <code class="systemitem">docker</code> package:
     </p><div class="verbatim-wrap"><pre class="screen">sudo zypper install docker</pre></div></li><li class="step "><p>
      To automatically start the Docker service at boot time:
     </p><div class="verbatim-wrap"><pre class="screen">sudo systemctl enable docker.service</pre></div><p>
      This will automatically enable docker.socket in consequence.
     </p></li><li class="step "><p>
    In case you will use Portus and an SSL secured registry, open the <code class="filename">/etc/sysconfig/docker</code> file. Search for the parameter
     <em class="parameter ">DOCKER_OPTS</em> and add
     <code class="literal">--insecure-registry <em class="replaceable ">ADDRESS_OF_YOUR_REGISTRY</em></code>.
    </p></li><li class="step "><p>
    In the production environment when using the SSL secured registry with Portus, add CA certificates to the directory <code class="filename">/etc/docker/certs.d/&lt;registry address&gt;</code> and copy the CA certificates to your system:
    </p><div class="verbatim-wrap"><pre class="screen">    sudo cp CA /etc/pki/trust/anchors/ &amp;&amp; update-ca-certificates</pre></div></li><li class="step "><p>
      Start the Docker service:
     </p><div class="verbatim-wrap"><pre class="screen">sudo systemctl start docker.service</pre></div><p>
      This will automatically start docker.socket in consequence.
     </p></li></ol></div></div><p>
    The Docker daemon listens on a local socket which is accessible only by
    the <code class="systemitem">root</code> user and by the
    members of the <code class="systemitem">docker</code> group.
    The <code class="systemitem">docker</code> group is
    automatically created at package installation time. To allow a certain
    user to connect to the local Docker daemon, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen">sudo /usr/sbin/usermod -aG docker <em class="replaceable ">USERNAME</em></pre></div><p>
    The user can communicate with the local Docker daemon upon his next
    login.
   </p></div><div class="sect1 " id="sec.docker.setup.net"><div class="titlepage"><div><div><h2 class="title" id="sec.docker.setup.net"><span class="number">2.2 </span><span class="name">Networking</span> <a title="Permalink" class="permalink" href="cha.docker.installation.html#sec.docker.setup.net">#</a></h2></div></div></div><p>
      If you want your containers to be able to access the external
      network, you must enable the <code class="option">ipv4 ip_forward</code>
      rule. This can be done using YaST by browsing to <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> › <span class="guimenu">Routing</span> menu and ensuring
      <code class="option">Enable IPv4 Forwarding</code> is checked.
    </p><p> This option cannot be changed when networking is handled by
        the Network Manager. In such cases the
          <code class="filename">/etc/sysconfig/SuSEfirewall2</code> file needs
        to be edited manually to ensure the <code class="option">FW_ROUTE</code>
        flag is set to <code class="option">yes</code>:
    </p><div class="verbatim-wrap"><pre class="screen">FW_ROUTE="yes"</pre></div><div class="sect2 " id="sec.docker.setup.net.power"><div class="titlepage"><div><div><h3 class="title" id="sec.docker.setup.net.power"><span class="number">2.2.1 </span><span class="name">Networking Limitations on Power Architecture</span> <a title="Permalink" class="permalink" href="cha.docker.installation.html#sec.docker.setup.net.power">#</a></h3></div></div></div><p>
        Currently Docker networking has two limitations on the Power architecture.
      </p><p>
        The first limitation is about iptables. SLE 12 machines cannot
        run Docker with the iptables support enabled. An update of the kernel
        is going to solve this issue. In the meantime the Docker
        package for Power has iptables support disabled via a dedicated
        directive inside of <code class="filename">/etc/sysconfig/docker</code>.
      </p><p>
        As a result of this limitation Docker containers will not have
        access to the outer network. A possible workaround is to share the same
        network namespace between the host and the containers.
        This however reduces the isolation of the containers.
      </p><p>
        The network namespace of the host can be shared on a per-container basis
        by adding <code class="option">--net=host</code> to the
        <code class="option">docker run</code> command.
      </p><div id="idm139668958136352" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: iptables support on SLE 12 SP1 </h6><p>
          SLE 12 SP1 hosts are not affected by this limitation but, given they
          use the same SLE 12 package, they will have iptables
          support disabled. This can be changed by removing the
          <code class="option">-iptables=false</code> setting inside of
          <code class="filename">/etc/sysconfig/docker</code>.
        </p></div><p>
        The second limitation is about network isolation between the containers
        and the host. Currently it is not possible to prevent containers from
        probing or accessing arbitrary ports of each other.
      </p></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.sle2docker.installation.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 3 </span>Installing <code class="literal">sle2docker</code></span></a><a class="nav-link" href="cha.docker.overview.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 1 </span>Docker Overview</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>