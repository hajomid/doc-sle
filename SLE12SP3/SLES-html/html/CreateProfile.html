<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creating A Control File | AutoYaST | SUSE Linux Enterprise Server 12 SP3</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="12 SP3" /><meta name="book-title" content="AutoYaST" /><meta name="chapter-title" content="Chapter 3. Creating A Control File" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP3" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="book.autoyast.html" title="AutoYaST" /><link rel="prev" href="Profile.html" title="Chapter 2. The Control File" /><link rel="next" href="configuration.html" title="Chapter 4. Configuration and Installation Options" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.autoyast.html">AutoYaST</a><span> › </span><a class="crumb" href="CreateProfile.html">Creating A Control File</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>AutoYaST</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="introduction.html"><span class="number">1 </span><span class="name">Introduction</span></a></li><li class="inactive"><a href="Profile.html"><span class="number">2 </span><span class="name">The Control File</span></a></li><li class="inactive"><a href="CreateProfile.html"><span class="number">3 </span><span class="name">Creating A Control File</span></a></li><li class="inactive"><a href="configuration.html"><span class="number">4 </span><span class="name">Configuration and Installation Options</span></a></li><li class="inactive"><a href="rulesandclass.html"><span class="number">5 </span><span class="name">Rules and Classes</span></a></li><li class="inactive"><a href="Invoking.html"><span class="number">6 </span><span class="name">The Auto-Installation Process</span></a></li><li class="inactive"><a href="InstalledSystem.html"><span class="number">7 </span><span class="name">Running AutoYaST in an Installed System</span></a></li><li class="inactive"><a href="handlingrules.html"><span class="number">A </span><span class="name">Handling Rules</span></a></li><li class="inactive"><a href="app.ay.faq.html"><span class="number">B </span><span class="name">AutoYaST FAQ - Frequently Asked Questions</span></a></li><li class="inactive"><a href="appendix.linuxrc.html"><span class="number">C </span><span class="name">Advanced Linuxrc Options</span></a></li><li class="inactive"><a href="app.ay.docupdates.html"><span class="number">D </span><span class="name">Documentation Updates</span></a></li><li class="inactive"><a href="bk04ape.html"><span class="number">E </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 2. The Control File" href="Profile.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 4. Configuration and Installation Options" href="configuration.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.autoyast.html">AutoYaST</a><span> › </span><a class="crumb" href="CreateProfile.html">Creating A Control File</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 2. The Control File" href="Profile.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 4. Configuration and Installation Options" href="configuration.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="CreateProfile"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP3</span></span></span></div><div><h1 class="title"><span class="number">3 </span><span class="name">Creating A Control File</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="CreateProfile.html#Autoinstallation.collectInfo"><span class="number">3.1 </span><span class="name">Collecting Information</span></a></span></dt><dt><span class="sect1"><a href="CreateProfile.html#CreateProfile.CMS"><span class="number">3.2 </span><span class="name">Using the Configuration Management System (CMS)</span></a></span></dt><dt><span class="sect1"><a href="CreateProfile.html#CreateProfile.Manual"><span class="number">3.3 </span><span class="name">Creating/Editing a Control File Manually</span></a></span></dt><dt><span class="sect1"><a href="CreateProfile.html#CreateProfile.XSLT"><span class="number">3.4 </span><span class="name">Creating a Control File via Script with XSLT</span></a></span></dt></dl></div></div><div class="sect1 " id="Autoinstallation.collectInfo"><div class="titlepage"><div><div><h2 class="title" id="Autoinstallation.collectInfo"><span class="number">3.1 </span><span class="name">Collecting Information</span> <a title="Permalink" class="permalink" href="CreateProfile.html#Autoinstallation.collectInfo">#</a></h2></div></div></div><p>
    To create the control file, you need to collect information about the
    systems you are going to install. This includes hardware data and
    network information among other things. Make sure you have the following
    information about the machines you want to install:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Hard disk types and sizes
     </p></li><li class="listitem "><p>
      Graphical interface and attached monitor, if any
     </p></li><li class="listitem "><p>
      Network interface and MAC address if known (for example, when using
      DHCP)
     </p></li></ul></div></div><div class="sect1 " id="CreateProfile.CMS"><div class="titlepage"><div><div><h2 class="title" id="CreateProfile.CMS"><span class="number">3.2 </span><span class="name">Using the Configuration Management System (CMS)</span> <a title="Permalink" class="permalink" href="CreateProfile.html#CreateProfile.CMS">#</a></h2></div></div></div><p>
    To create the control file for one or more computers, a configuration
    interface based on YaST is provided. This system depends on
    existing modules which are usually used to configure a computer in
    regular operation mode, for example, after <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is
    installed.
   </p><p>
    The configuration management system lets you easily create control files and
    manage a repository of configurations for the use in a
    networked environment with multiple clients.
   </p><div class="figure" id="idm139906818281552"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/autoyast2-maindialog.png"><img src="images/autoyast2-maindialog.png" width="" alt="Configuration System" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 3.1: </span><span class="name">Configuration System </span><a title="Permalink" class="permalink" href="CreateProfile.html#idm139906818281552">#</a></h6></div></div><div class="sect2 " id="CreateProfile.CMS.new"><div class="titlepage"><div><div><h3 class="title" id="CreateProfile.CMS.new"><span class="number">3.2.1 </span><span class="name">Creating a New Control File</span> <a title="Permalink" class="permalink" href="CreateProfile.html#CreateProfile.CMS.new">#</a></h3></div></div></div><p>
     With some exceptions, almost all resources of the control file can be
     configured using the configuration management system. The system offers
     flexibility and the configuration of some resources is identical to the
     one available in the YaST control center. In addition to the
     existing and familiar modules new interfaces were created for special
     and complex configurations, for example for partitioning, general
     options and software.
    </p><p>
     Furthermore, using a CMS guarantees the validity of the resulting
     control file and its direct use for starting automated installation.
    </p><p>
     Make sure the configuration system is installed (package
     <code class="systemitem">autoyast2</code>) and call it using
     the YaST control center or as root with the following command
     (make sure the <code class="envar">DISPLAY</code> variable is set correctly to
     start the graphical user interface instead of the text-based one):
    </p><div class="verbatim-wrap"><pre class="screen">/sbin/yast2 autoyast</pre></div></div></div><div class="sect1 " id="CreateProfile.Manual"><div class="titlepage"><div><div><h2 class="title" id="CreateProfile.Manual"><span class="number">3.3 </span><span class="name">Creating/Editing a Control File Manually</span> <a title="Permalink" class="permalink" href="CreateProfile.html#CreateProfile.Manual">#</a></h2></div></div></div><p>
    If editing the control file manually, make sure it has a valid syntax.  To
    check the syntax, use the tools already available on the distribution. For
    example, to verify that the file is well-formed (has a valid XML
    structure), use the utility <code class="command">xmllint</code> available with the
    <code class="systemitem">libxml2</code> package:
   </p><div class="verbatim-wrap"><pre class="screen">xmllint &lt;control file&gt;</pre></div><p>
    If the control file is not well formed, for example, if a tag is not
    closed, <code class="command">xmllint</code> will report the errors.
   </p><p>
    To validate the control file, use the tool <code class="command">jing</code> from the
    package with the same name. During
    validation misplaced or missing tags and attributes and wrong attribute
    values are detected. <span class="phrase">the package <span class="package">jing</span>
    is provided with the SUSE Software Development Kit.</span>
   </p><div class="verbatim-wrap"><pre class="screen">jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;control file&gt;</pre></div><p>
    <code class="literal">/usr/share/YaST2/schema/autoyast/rng/profile.rng</code> is
    provided by the package <code class="literal">yast2-schema</code>. This file
    describes the syntax and classes of an AutoYaST profile.
   </p><p>
    Before going on with the autoinstallation, fix any errors resulting from
    such checks. The autoinstallation process cannot be started with an
    invalid and not well-formed control file.
   </p><p>
    You can use any XML editor available on your system or any text editor
    with XML support (for example, Emacs, Vim). However, it is not optimal
    to create the control file manually for many machines and it should only
    be seen as an interface between the autoinstallation engine and the
    Configuration Management System (CMS).
   </p><div id="idm139906821366720" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Using Emacs as an XML Editor</h6><p>
     The built-in nxml-mode turns Emacs into a fully-fledged XML editor with
     automatic tag completion and validation. Refer to the Emacs help for
     instructions on how to set up nxml-mode.
    </p></div></div><div class="sect1 " id="CreateProfile.XSLT"><div class="titlepage"><div><div><h2 class="title" id="CreateProfile.XSLT"><span class="number">3.4 </span><span class="name">Creating a Control File via Script with XSLT</span> <a title="Permalink" class="permalink" href="CreateProfile.html#CreateProfile.XSLT">#</a></h2></div></div></div><p>
    If you have a template and want to change a few things via script or
    command line, use an XSLT processor like <code class="literal">xsltproc</code>.
    For example, if you have an AutoYaST control file and want to fill out
    the host name via script for any reason (if doing this so often, you
    want to script it)
   </p><p>
    First, create an XSL file
   </p><div class="example" id="idm139906821362256"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 3.1: </span><span class="name">Example File for Replacing the Host Name/Domain by Script </span><a title="Permalink" class="permalink" href="CreateProfile.html#idm139906821362256">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- the parameter names --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</pre></div></div></div><p>
    This file expects the host name and the domain name as parameters from
    the user.
   </p><div class="verbatim-wrap"><pre class="screen">&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</pre></div><p>
    There will be a copy of those parameters in the dns section of the
    control file. That means, if there already is a domain element in the
    dns section, you will get a second one which is not good.
   </p><p>
    For more information about XSLT, go to the official Web page
    <a class="link" href="http://www.w3.org/TR/xslt" target="_blank">www.w3.org/TR/xslt</a>
   </p></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="configuration.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 4 </span>Configuration and Installation Options</span></a><a class="nav-link" href="Profile.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 2 </span>The Control File</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>