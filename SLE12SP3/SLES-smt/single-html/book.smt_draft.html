<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Subscription Management Tool for SLES 12 SP3 | SUSE Linux Enterprise Server 12 SP3</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1)" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="12 SP3" /><meta name="book-title" content="Subscription Management Tool for SLES 12 SP3" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP3" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft single offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs inactive"><a class="single-crumb" href="#book.smt" accesskey="c"><span class="single-contents-icon"></span>SMT Guide</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#book.smt" accesskey="c"><span class="single-contents-icon"></span>Show Contents: SMT Guide</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#pre_smt"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="#smt.installation"><span class="number">1 </span><span class="name">SMT Installation</span></a></li><li class="inactive"><a href="#smt.server"><span class="number">2 </span><span class="name">SMT Server Configuration</span></a></li><li class="inactive"><a href="#smt.mirroring"><span class="number">3 </span><span class="name">Mirroring Repositories on the SMT Server</span></a></li><li class="inactive"><a href="#smt.management"><span class="number">4 </span><span class="name">Managing Repositories with YaST SMT Server Management</span></a></li><li class="inactive"><a href="#smt.registration"><span class="number">5 </span><span class="name">Managing Client Machines with SMT</span></a></li><li class="inactive"><a href="#smt.reporting"><span class="number">6 </span><span class="name">SMT Reports</span></a></li><li class="inactive"><a href="#smt.tools"><span class="number">7 </span><span class="name">SMT Tools and Configuration Files</span></a></li><li class="inactive"><a href="#smt.client"><span class="number">8 </span><span class="name">Configuring Clients to Use SMT</span></a></li><li class="inactive"><a href="#smt.advanced"><span class="number">9 </span><span class="name">Advanced Topics</span></a></li><li class="inactive"><a href="#smt.app.api"><span class="number">A </span><span class="name">SMT REST API</span></a></li><li class="inactive"><a href="#app.smt.docupdates"><span class="number">B </span><span class="name">Documentation Updates</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class="draft "><div class="documentation"><div xml:lang="en" class="book" id="book.smt" lang="en"><div class="titlepage"><div><h6 class="version-info"><span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP3</span></span></span></h6><div><h1 class="title">Subscription Management Tool for SLES <span class="productnumber"><span class="phrase">12 SP3</span></span></h1></div><div class="authorgroup"><div><span class="imprint-label">Authors: </span><span class="firstname">Tomáš</span> <span class="surname">Bažant</span>, <span class="firstname">Jakub</span> <span class="surname">Friedl</span>, and <span class="firstname">Florian</span> <span class="surname">Nadge</span></div></div><div class="date"><span class="imprint-label">Publication Date: </span>March 20, 2018
</div></div></div><div class="toc"><dl><dt><span class="preface"><a href="#pre_smt"><span class="name">About This Guide</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#idm139994746337072"><span class="name">Overview</span></a></span></dt><dt><span class="sect1"><a href="#idm139994746963600"><span class="name">Additional Documentation and Resources</span></a></span></dt><dt><span class="sect1"><a href="#idm139994738389952"><span class="name">Feedback</span></a></span></dt><dt><span class="sect1"><a href="#idm139994743113280"><span class="name">Documentation Conventions</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.installation"><span class="number">1 </span><span class="name">SMT Installation</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.installation.wizard"><span class="number">1.1 </span><span class="name">SMT Configuration Wizard</span></a></span></dt><dt><span class="sect1"><a href="#smt.installation.upgrade"><span class="number">1.2 </span><span class="name">Upgrading from Previous Versions of SMT</span></a></span></dt><dt><span class="sect1"><a href="#idm139994743085456"><span class="number">1.3 </span><span class="name">Enabling SLP Announcements</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.server"><span class="number">2 </span><span class="name">SMT Server Configuration</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.yast.activation"><span class="number">2.1 </span><span class="name">Activating and Deactivating SMT with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.credentials"><span class="number">2.2 </span><span class="name">Setting the Update Server Credentials with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.database"><span class="number">2.3 </span><span class="name">Setting SMT Database Password with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.reports"><span class="number">2.4 </span><span class="name">Setting E-mail Addresses to Receive Reports with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.scheduling"><span class="number">2.5 </span><span class="name">Setting the SMT Job Schedule with YaST</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.mirroring"><span class="number">3 </span><span class="name">Mirroring Repositories on the SMT Server</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.mirroring.getcredentials"><span class="number">3.1 </span><span class="name">Mirroring Credentials</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirroring.manage"><span class="number">3.2 </span><span class="name">Managing Software Repositories with SMT Command Line Tools</span></a></span></dt><dt><span class="sect1"><a href="#idm139994744484816"><span class="number">3.3 </span><span class="name">The Structure of /srv/www/htdocs for SLE 11</span></a></span></dt><dt><span class="sect1"><a href="#idm139994736443312"><span class="number">3.4 </span><span class="name">The Structure of /srv/www/htdocs for SLE 12</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirroring.testenv"><span class="number">3.5 </span><span class="name">Using the Test Environment</span></a></span></dt><dt><span class="sect1"><a href="#smt.staging"><span class="number">3.6 </span><span class="name">Testing and Filtering Update Repositories with Staging</span></a></span></dt><dt><span class="sect1"><a href="#smt.repo.preload"><span class="number">3.7 </span><span class="name">Repository Preloading</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.management"><span class="number">4 </span><span class="name">Managing Repositories with YaST SMT Server Management</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.yast.staging.starting"><span class="number">4.1 </span><span class="name">Starting SMT Management Module</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.viewing"><span class="number">4.2 </span><span class="name">Viewing and Managing Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.stage"><span class="number">4.3 </span><span class="name">Staging Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.client"><span class="number">4.4 </span><span class="name">Jobs and Client Status Monitoring</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.registration"><span class="number">5 </span><span class="name">Managing Client Machines with SMT</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.registration.clients"><span class="number">5.1 </span><span class="name">Listing Registered Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.delete"><span class="number">5.2 </span><span class="name">Deleting Registrations</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.smtregister"><span class="number">5.3 </span><span class="name">Manual Registration of Clients at SUSE Customer Center</span></a></span></dt><dt><span class="sect1"><a href="#smt.registrations.schedule"><span class="number">5.4 </span><span class="name">Scheduling Periodic Registrations of Clients at SUSE Customer Center</span></a></span></dt><dt><span class="sect1"><a href="#smt.registrations.compliance"><span class="number">5.5 </span><span class="name">Compliance Monitoring</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.reporting"><span class="number">6 </span><span class="name">SMT Reports</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#idm139994743157664"><span class="number">6.1 </span><span class="name">Report Schedule and Recipients</span></a></span></dt><dt><span class="sect1"><a href="#idm139994740379920"><span class="number">6.2 </span><span class="name">Report Output Formats and Targets</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.tools"><span class="number">7 </span><span class="name">SMT Tools and Configuration Files</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.scripts"><span class="number">7.1 </span><span class="name">Important Scripts and Tools</span></a></span></dt><dt><span class="sect1"><a href="#idm139994738491808"><span class="number">7.2 </span><span class="name">SMT Configuration Files</span></a></span></dt><dt><span class="sect1"><a href="#smt.tools.cert"><span class="number">7.3 </span><span class="name">Server Certificates</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.client"><span class="number">8 </span><span class="name">Configuring Clients to Use SMT</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.client.parameters"><span class="number">8.1 </span><span class="name">Using Kernel Parameters to Access an SMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.autoyast"><span class="number">8.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.clientsetupscript"><span class="number">8.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.yast"><span class="number">8.4 </span><span class="name">Configuring Clients with YaST</span></a></span></dt><dt><span class="sect1"><a href="#idm139994740418800"><span class="number">8.5 </span><span class="name">Registering SLE11 Clients against SMT Test Environment</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirror.testenv.sle12client"><span class="number">8.6 </span><span class="name">Registering SLE12 Clients against SMT Test Environment</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.repolist"><span class="number">8.7 </span><span class="name">Listing Accessible Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.onlinemigration"><span class="number">8.8 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.rhel"><span class="number">8.9 </span><span class="name">How to Update Red Hat Enterprise Linux with SMT</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.advanced"><span class="number">9 </span><span class="name">Advanced Topics</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.backup"><span class="number">9.1 </span><span class="name">Backup of the SMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.disconnected"><span class="number">9.2 </span><span class="name">Disconnected SMT Servers</span></a></span></dt></dl></dd><dt><span class="appendix"><a href="#smt.app.api"><span class="number">A </span><span class="name">SMT REST API</span></a></span></dt><dt><span class="appendix"><a href="#app.smt.docupdates"><span class="number">B </span><span class="name">Documentation Updates</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp3"><span class="number">B.1 </span><span class="name">September 2017 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP3)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp2_maint1"><span class="number">B.2 </span><span class="name">April 2017 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp2"><span class="number">B.3 </span><span class="name">November 2016 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp1_maint1"><span class="number">B.4 </span><span class="name">March 2016 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp1"><span class="number">B.5 </span><span class="name">December 2015 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)</span></a></span></dt></dl></dd></dl></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><dl><dt><span class="figure"><a href="#idm139994743147952"><span class="number">1 </span><span class="name">SMT</span></a></span></dt><dt><span class="figure"><a href="#idm139994746825984"><span class="number">1.1 </span><span class="name">SMT Pattern</span></a></span></dt><dt><span class="figure"><a href="#idm139994744525568"><span class="number">1.2 </span><span class="name">SMT Wizard</span></a></span></dt><dt><span class="figure"><a href="#idm139994744613408"><span class="number">1.3 </span><span class="name">Missing Server Certificate</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.credentials"><span class="number">2.1 </span><span class="name">Setting the Update Server Credentials with YaST</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.credtest"><span class="number">2.2 </span><span class="name">Successful Test of the Update Server Credentials</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.jobconf"><span class="number">2.3 </span><span class="name">SMT Job Schedule Configuration</span></a></span></dt><dt><span class="figure"><a href="#idm139994735582176"><span class="number">2.4 </span><span class="name">Setting Scheduled Job with YaST</span></a></span></dt><dt><span class="figure"><a href="#idm139994714424960"><span class="number">3.1 </span><span class="name">SMT Staging Schema</span></a></span></dt><dt><span class="figure"><a href="#idm139994744474880"><span class="number">4.1 </span><span class="name">List of Repositories</span></a></span></dt><dt><span class="figure"><a href="#idm139994738260720"><span class="number">4.2 </span><span class="name">Repository Filter</span></a></span></dt><dt><span class="figure"><a href="#idm139994716699600"><span class="number">4.3 </span><span class="name">Status of Mirroring Process</span></a></span></dt><dt><span class="figure"><a href="#idm139994747452496"><span class="number">4.4 </span><span class="name">Testing Created Snapshot</span></a></span></dt><dt><span class="figure"><a href="#idm139994714674480"><span class="number">4.5 </span><span class="name">Clients Status</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.ca_cert"><span class="number">7.1 </span><span class="name">Certificates of a CA</span></a></span></dt><dt><span class="figure"><a href="#idm139994713672320"><span class="number">9.1 </span><span class="name">SMT Disconnected Setup</span></a></span></dt></dl></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><dl><dt><span class="example"><a href="#ex.smt.mirroring.repos.o"><span class="number">3.1 </span><span class="name">Listing All Enabled Repositories</span></a></span></dt><dt><span class="example"><a href="#smt.mirroring.smtconf.ex"><span class="number">7.1 </span><span class="name">smt.conf</span></a></span></dt></dl></div><div><div class="legalnotice" id="idm139994742885360"><p>
  Copyright © 2006–
2018

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document under
  the terms of the GNU Free Documentation License, Version 1.2 or (at your
  option) version 1.3; with the Invariant Section being this copyright notice
  and license. A copy of the license version 1.2 is included in the section
  entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="http://www.suse.com/company/legal/" target="_blank">http://www.suse.com/company/legal/</a>. All other
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention to
  detail. However, this does not guarantee complete accuracy. Neither SUSE LLC,
  its affiliates, the authors nor the translators shall be held liable for
  possible errors or the consequences thereof.
 </p></div></div><div class="preface " id="pre_smt"><div class="titlepage"><div><div><h1 class="title"><span class="number"> </span><span class="name">About This Guide</span> <a title="Permalink" class="permalink" href="#pre_smt">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_overview.xml</li><li><span class="ds-label">ID: </span>pre_smt</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#idm139994746337072"><span class="name">Overview</span></a></span></dt><dt><span class="sect1"><a href="#idm139994746963600"><span class="name">Additional Documentation and Resources</span></a></span></dt><dt><span class="sect1"><a href="#idm139994738389952"><span class="name">Feedback</span></a></span></dt><dt><span class="sect1"><a href="#idm139994743113280"><span class="name">Documentation Conventions</span></a></span></dt></dl></div></div><p>
  Subscription Management Tool (SMT) for SUSE Linux Enterprise <span class="productnumber"><span class="phrase">12 SP3</span></span> allows enterprise customers to
  optimize the management of SUSE Linux Enterprise software updates and subscription
  entitlements. It establishes a proxy system for SUSE® Customer Center with repository
  (formerly known as catalog) and registration targets. This helps you
  centrally manage software updates within the firewall on a per-system basis,
  while maintaining your corporate security policies and regulatory compliance.
 </p><p>
  SMT allows you to provision updates for all of your devices running a
  product based on SUSE Linux Enterprise. By downloading these updates once and
  distributing them throughout the enterprise, you can set more restrictive
  firewall policies. This also reduces bandwidth usage, as there is no need to
  download the same updates for each device. SMT is fully supported and available as a download for customers with an active
  SUSE Linux Enterprise product subscription.
 </p><p>
  Subscription Management Tool provides functionality that can be useful in many situations,
  including the following:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    You want to update both SUSE Linux Enterprise and RedHat Enterprise Linux servers.
   </p></li><li class="listitem "><p>
    You want to get a detailed overview of your company's license compliance.
   </p></li><li class="listitem "><p>
    Not all machines in your environment can be connected to SUSE Customer Center to register and retrieve
    updates for bandwidth or security reasons.
   </p></li><li class="listitem "><p>
    There are SUSE Linux Enterprise hosts that are restricted and difficult to update without
    putting in place a custom update management solution.
   </p></li><li class="listitem "><p>
    You need to integrate additional software update external
    or internal repositories into your update solution.
   </p></li><li class="listitem "><p>
    You are looking for a turnkey box staging solution for testing updates
    before releasing them to the clients.
   </p></li><li class="listitem "><p>
    You want to have a quick overview of the patch status of your SUSE Linux Enterprise servers and
    desktops.
   </p></li></ul></div><div class="figure" id="idm139994743147952"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_schema.png"><img src="images/smt_schema.png" width="" alt="SMT" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1: </span><span class="name">SMT </span><a title="Permalink" class="permalink" href="#idm139994743147952">#</a></h6></div></div><div class="sect1 " id="idm139994746337072"><div class="titlepage"><div><div><h2 class="title" id="idm139994746337072"><span class="number">1 </span><span class="name">Overview</span> <a title="Permalink" class="permalink" href="#idm139994746337072">#</a></h2></div></div></div><p>
   The <em class="citetitle ">Subscription Management Tool Guide</em> is divided into the following chapters:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994739460704"><span class="term "><a class="xref" href="#smt.installation" title="Chapter 1. SMT Installation"><em>SMT Installation</em></a>
    </span></dt><dd><p>
      Introduction to the SMT installation process and the SMT
      Configuration Wizard. You will learn how to install the SMT add-on on your
      base system during the installation process or on an already
      installed base system.
     </p></dd><dt id="idm139994743129872"><span class="term "><a class="xref" href="#smt.server" title="Chapter 2. SMT Server Configuration"><em>SMT Server Configuration</em></a>
    </span></dt><dd><p>
      Description of the YaST configuration module SMT Server. This chapter
      explains how to set and configure organization credentials, SMT
      database passwords, and e-mail addresses to send SMT reports, or set
      the SMT job schedule, and activate or deactivate the SMT service.
     </p></dd><dt id="idm139994743131184"><span class="term "><a class="xref" href="#smt.mirroring" title="Chapter 3. Mirroring Repositories on the SMT Server"><em>Mirroring Repositories on the SMT Server</em></a>
    </span></dt><dd><p>
      Explanation of how to mirror the installation and update
      sources with YaST.
     </p></dd><dt id="idm139994747832656"><span class="term "><a class="xref" href="#smt.management" title="Chapter 4. Managing Repositories with YaST SMT Server Management"><em>Managing Repositories with YaST SMT Server Management</em></a>
    </span></dt><dd><p>
      Description of how to register client machines on SUSE Customer Center.
      The client machines must be configured to use SMT.
     </p></dd><dt id="idm139994742178496"><span class="term "><a class="xref" href="#smt.reporting" title="Chapter 6. SMT Reports"><em>SMT Reports</em></a>
    </span></dt><dd><p>
      In-depth look at generated reports based on SMT data. Generated
      reports contain statistics of all registered machines and products used
      and of all active, expiring, or missing subscriptions.
     </p></dd><dt id="idm139994747489344"><span class="term "><a class="xref" href="#smt.tools" title="Chapter 7. SMT Tools and Configuration Files"><em>SMT Tools and Configuration Files</em></a>
    </span></dt><dd><p>
      Description of the most important scripts, configuration files
      and certificates supplied with SMT.
     </p></dd><dt id="idm139994746960768"><span class="term "><a class="xref" href="#smt.client" title="Chapter 8. Configuring Clients to Use SMT"><em>Configuring Clients to Use SMT</em></a>
    </span></dt><dd><p>
      Introduction to configuring any client machine to
      register against SMT and download software updates from there instead
      of communicating directly with the SUSE Customer Center.
     </p></dd></dl></div></div><div class="sect1 " id="idm139994746963600"><div class="titlepage"><div><div><h2 class="title" id="idm139994746963600"><span class="number">2 </span><span class="name">Additional Documentation and Resources</span> <a title="Permalink" class="permalink" href="#idm139994746963600">#</a></h2></div></div></div><p>
   Chapters in this manual contain links to additional documentation resources
   that are available either on the system or on the Internet.
  </p><p>
   For an overview of the documentation available for your product and the
   latest documentation updates, refer to
   <a class="link" href="http://www.suse.com/documentation" target="_blank">http://www.suse.com/documentation</a>.
  </p></div><div class="sect1 " id="idm139994738389952"><div class="titlepage"><div><div><h2 class="title" id="idm139994738389952"><span class="number">3 </span><span class="name">Feedback</span> <a title="Permalink" class="permalink" href="#idm139994738389952">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_feedback_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  Several feedback channels are available:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994746459600"><span class="term ">Bugs and Enhancement Requests</span></dt><dd><p>
     For services and support options available for your product, refer to
     <a class="link" href="http://www.suse.com/support/" target="_blank">http://www.suse.com/support/</a>.
    </p><p>
     Help for openSUSE is provided by the community. Refer to <a class="link" href="https://en.opensuse.org/Portal:Support" target="_blank">https://en.opensuse.org/Portal:Support</a> for more information.
    </p><p>

     To report bugs for a product component, go to
     <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log in, and
     click <span class="guimenu">Create New</span>.
    </p></dd><dt id="idm139994738405760"><span class="term ">User Comments</span></dt><dd><p>
     We want to hear your comments about and suggestions for this manual and
     the other documentation included with this product. Use the User Comments
     feature at the bottom of each page in the online documentation or go to
     <a class="link" href="http://www.suse.com/documentation/feedback.html" target="_blank">http://www.suse.com/documentation/feedback.html</a> and
     enter your comments there.
    </p></dd><dt id="idm139994742309968"><span class="term ">Mail</span></dt><dd><p>
     For feedback on the documentation of this product, you can also send a
     mail to <code class="literal">doc-team@suse.com</code>. Make sure to include the
     document title, the product version and the publication date of the
     documentation. To report errors or suggest enhancements, provide a concise
     description of the problem and refer to the respective section number and
     page (or URL).
    </p></dd></dl></div></div><div class="sect1 " id="idm139994743113280"><div class="titlepage"><div><div><h2 class="title" id="idm139994743113280"><span class="number">4 </span><span class="name">Documentation Conventions</span> <a title="Permalink" class="permalink" href="#idm139994743113280">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_typografie_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  The following notices and typographical conventions are used in this
  documentation:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    <code class="filename">/etc/passwd</code>: directory names and file names
   </p></li><li class="listitem "><p>
    <em class="replaceable ">PLACEHOLDER</em>: replace
    <em class="replaceable ">PLACEHOLDER</em> with the actual value
   </p></li><li class="listitem "><p>
    <code class="envar">PATH</code>: the environment variable PATH
   </p></li><li class="listitem "><p>
    <code class="command">ls</code>, <code class="option">--help</code>: commands, options, and
    parameters
   </p></li><li class="listitem "><p>
    <code class="systemitem">user</code>: users or groups
   </p></li><li class="listitem "><p>
    <span class="package">package name</span>
    : name of a package
   </p></li><li class="listitem "><p>
    <span class="keycap">Alt</span>, <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>: a key to press or a key combination; keys
    are shown in uppercase as on a keyboard
   </p></li><li class="listitem "><p>
    <span class="guimenu">File</span>, <span class="guimenu">File</span> › <span class="guimenu">Save
    As</span>: menu items, buttons
   </p></li><li class="listitem "><p><strong class="arch-arrow-start">x86_64</strong>
    This paragraph is only relevant for the AMD64/Intel 64 architecture. The
    arrows mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"></strong></p><p><strong class="arch-arrow-start">System z, POWER</strong>
    This paragraph is only relevant for the architectures
    <code class="literal">z Systems</code> and <code class="literal">POWER</code>. The arrows
    mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"></strong></p></li><li class="listitem "><p>
    <span class="emphasis"><em>Dancing Penguins</em></span> (Chapter
    <span class="emphasis"><em>Penguins</em></span>, ↑Another Manual): This is a reference
    to a chapter in another manual.
   </p></li><li class="listitem "><p>
    Commands that must be run with <code class="systemitem">root</code> privileges. Often you can also
    prefix these commands with the <code class="command">sudo</code> command to run them
    as non-privileged user.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">command</code>
<code class="prompt user">tux &gt; </code><code class="command">sudo command</code></pre></div></li><li class="listitem "><p>
    Commands that can be run by non-privileged users.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">command</code></pre></div></li><li class="listitem "><p>
    Notices
   </p><div id="idm139994738981200" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Warning Notice</h6><p>
     Vital information you must be aware of before proceeding. Warns you about
     security issues, potential loss of data, damage to hardware, or physical
     hazards.
    </p></div><div id="idm139994738982928" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Important Notice</h6><p>
     Important information you should be aware of before proceeding.
    </p></div><div id="idm139994746701760" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Note Notice</h6><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="idm139994738423248" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Tip Notice</h6><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li></ul></div></div></div><div class="chapter " id="smt.installation"><div class="titlepage"><div><div><h1 class="title"><span class="number">1 </span><span class="name">SMT Installation</span> <a title="Permalink" class="permalink" href="#smt.installation">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_install.xml</li><li><span class="ds-label">ID: </span>smt.installation</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.installation.wizard"><span class="number">1.1 </span><span class="name">SMT Configuration Wizard</span></a></span></dt><dt><span class="sect1"><a href="#smt.installation.upgrade"><span class="number">1.2 </span><span class="name">Upgrading from Previous Versions of SMT</span></a></span></dt><dt><span class="sect1"><a href="#idm139994743085456"><span class="number">1.3 </span><span class="name">Enabling SLP Announcements</span></a></span></dt></dl></div></div><p>
     SMT is included in SUSE Linux Enterprise Server starting with version 12 SP1. To install
    it, start SUSE Linux Enterprise Server installation, and click
      <span class="guimenu">Software</span> on the <span class="guimenu">Installation
      Settings</span> screen. Select the <span class="guimenu">Subscription
      Management Tool</span> pattern on the <span class="guimenu">Software
      Selection and System Tasks</span> screen, then click
      <span class="guimenu">OK</span>. </p><div class="figure" id="idm139994746825984"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_install_pattern.png"><img src="images/smt_install_pattern.png" width="" alt="SMT Pattern" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.1: </span><span class="name">SMT Pattern </span><a title="Permalink" class="permalink" href="#idm139994746825984">#</a></h6></div></div><div id="idm139994716722800" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Installing SMT on an Existing System</h6><p>
   To install SMT on the existing SUSE Linux Enterprise Server system, run
   <span class="guimenu">YaST</span> › <span class="guimenu">Software</span> › <span class="guimenu">Software
   Management</span>, select
   <span class="guimenu">View</span> › <span class="guimenu">Patterns</span>
   and select the <span class="guimenu">SMT</span> pattern there.
  </p></div><p>
  It is recommended to check for available SMT updates immediately after
  installing SUSE Linux Enterprise Server using the <code class="command">zypper patch</code> command. SUSE
  continuously releases maintenance updates for SMT, and newer packages are
  likely to be available.
 </p><p>
  After the system is installed and updated, perform an initial SMT
  configuration using <span class="guimenu">YaST</span> › <span class="guimenu">Network
  Services</span> › <span class="guimenu">SMT Configuration
  Wizard</span>.
 </p><div id="idm139994735415680" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Install smt-client</h6><p>
     The <code class="literal">smt-client</code> package needs to be installed on clients
     connected to the SMT server. The package requires no configuration, and
     it can be installed using the <code class="command">sudo zypper in smt-client</code>
     command.
    </p></div><div class="sect1 " id="smt.installation.wizard"><div class="titlepage"><div><div><h2 class="title" id="smt.installation.wizard"><span class="number">1.1 </span><span class="name">SMT Configuration Wizard</span> <a title="Permalink" class="permalink" href="#smt.installation.wizard">#</a></h2></div></div></div><p>
   The two-step <span class="guimenu">SMT Configuration Wizard</span> helps you
   configure SMT after SUSE Linux Enterprise Server installation is finished. You can change
   the configuration later using the YaST SMT Server Configuration
   module—see <a class="xref" href="#smt.server" title="Chapter 2. SMT Server Configuration">Chapter 2, <em>SMT Server Configuration</em></a>.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     The <span class="guimenu">Enable Subscription Management Tool service
     (SMT)</span> option is enabled by default. Toggle it only if you
     want to disable the SMT product.
    </p><p>
     If the firewall is enabled, enable <span class="guimenu">Open Port in
     Firewall</span> to allow access to the SMT service from remote
     computers.
    </p><p>
     Enter your SUSE Customer Center organization credentials in <span class="guimenu">User</span>
     and <span class="guimenu">Password</span>. If you do not know your SUSE Customer Center
     credentials, refer to <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>.
     Test the entered credentials using the <span class="guimenu">Test</span>
     button. SMT will connect to the Customer Center server using the
     provided credentials and download testing data.
    </p><p> Enter the e-mail address you used for the SUSE Customer Center registration
          into <span class="guimenu">SCC E-mail Used for Registration</span>. </p><p>
     <span class="guimenu">Your SMT Server URL</span> should contain the URL of the
     SMT server being configured. It is populated automatically.
    </p><p>
     Click <span class="guimenu">Next</span> to continue to the second configuration
     step.
    </p><div class="figure" id="idm139994744525568"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_wizard1.png"><img src="images/smt_wizard1.png" width="" alt="SMT Wizard" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.2: </span><span class="name">SMT Wizard </span><a title="Permalink" class="permalink" href="#idm139994744525568">#</a></h6></div></div></li><li class="step "><p>
     For security reasons, SMT requires a separate user to connect to the
     database. In the <span class="guimenu">Database Password for smt User</span>
     screen, set the database password for this user.
    </p><p>
     Enter all e-mail addresses for receiving SMT reports using the
     <span class="guimenu">Add</span> button. Use the
     <span class="guimenu">Edit</span> and <span class="guimenu">Delete</span> buttons to modify
     and delete the existing addresses. When you have done that, click <span class="guimenu">Next</span>.
    </p></li><li class="step "><p>
     If the current database root password is empty, you will be prompted to specify it.
    </p></li><li class="step "><p>
     By default, SMT is set to communicate with the client hosts via a secure
     protocol. For this, the server needs to have a server SSL certificate. The
     wizard displays a warning if the certificate does not exist. You can create
     a certificate using the
     <span class="guimenu">Run CA Management</span> button. Refer to
     <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 17 “Managing X.509 Certification”, Section 17.2 “YaST Modules for CA Management”</span> for detailed information
     on managing certificates with YaST.
    </p><div class="figure" id="idm139994744613408"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_missing_cert.png"><img src="images/smt_missing_cert.png" width="" alt="Missing Server Certificate" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.3: </span><span class="name">Missing Server Certificate </span><a title="Permalink" class="permalink" href="#idm139994744613408">#</a></h6></div></div></li></ol></div></div></div><div class="sect1 " id="smt.installation.upgrade"><div class="titlepage"><div><div><h2 class="title" id="smt.installation.upgrade"><span class="number">1.2 </span><span class="name">Upgrading from Previous Versions of SMT</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade">#</a></h2></div></div></div><p> This section provides information on upgrading SMT from the
      previous versions. </p><div id="idm139994742533184" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Upgrade from Versions Prior to 11 SP3</h6><p>A direct upgrade path from SMT prior to version 11 SP3 is not
   supported. You need to do the following:</p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>Upgrade the operating system to SUSE Linux Enterprise Server 11
      SP3 or SP4 as described in <a class="link" href="https://www.suse.com/documentation/sles11/book_sle_deployment/data/cha_update_sle.html" target="_blank">https://www.suse.com/documentation/sles11/book_sle_deployment/data/cha_update_sle.html</a></p></li><li class="listitem "><p>At the same time upgrade SMT to version 11 SP3 as
      described in <a class="link" href="https://www.suse.com/documentation/smt11/book_yep/data/smt_installation_upgrade.html" target="_blank">https://www.suse.com/documentation/smt11/book_yep/data/smt_installation_upgrade.html</a>.</p></li><li class="listitem "><p>Follow the steps described in <a class="xref" href="#smt.installation.upgrade.latest" title="1.2.2. Upgrade from SMT 11 SP3">Section 1.2.2, “Upgrade from SMT 11 SP3”</a>.</p></li></ol></div></div><div class="sect2 " id="smt.installation.upgrade.from12sp1"><div class="titlepage"><div><div><h3 class="title" id="smt.installation.upgrade.from12sp1"><span class="number">1.2.1 </span><span class="name">Upgrade from SMT 12 SP1</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade.from12sp1">#</a></h3></div></div></div><p>
    Upgrade from SMT 12 SP1 is performed automatically during the SUSE Linux Enterprise Server
    upgrade and requires no additional manual steps. For more information on SUSE Linux Enterprise Server upgrade, see <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 19 “Upgrading SUSE Linux Enterprise”</span>.
   </p></div><div class="sect2 " id="smt.installation.upgrade.latest"><div class="titlepage"><div><div><h3 class="title" id="smt.installation.upgrade.latest"><span class="number">1.2.2 </span><span class="name">Upgrade from SMT 11 SP3</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade.latest">#</a></h3></div></div></div><p>
    To upgrade SMT from version 11 SP3 to 12 SP2, follow the steps below.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      If you have not already done so, migrate from Novell Customer Center
      to SUSE Customer Center as described in
      <a class="xref" href="#smt.installation.upgrade.scc" title="1.2.2.1. Migration to SUSE Customer Center on SMT 11 SP3">Section 1.2.2.1, “Migration to SUSE Customer Center on SMT 11 SP3”</a>.
     </p></li><li class="step "><p> Back up and migrate the database. See the general procedure
            in <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 19 “Upgrading SUSE Linux Enterprise”, Section 19.3.4 “Migrate your MySQL Database”</span>. </p></li><li class="step "><p>
      Upgrade to SUSE Linux Enterprise Server 12 SP2 as described in
      <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 19 “Upgrading SUSE Linux Enterprise”</span>.
     </p></li><li class="step "><p> Look if the new <code class="filename">/etc/my.cnf.rpmnew</code>
            exists and update it with any custom changes you need. Then
            copy it over the existing <code class="filename">/etc/my.cnf</code>: </p><div class="verbatim-wrap"><pre class="screen">cp /etc/my.cnf.rpmnew /etc/my.cnf</pre></div></li><li class="step "><p> Enable the <code class="systemitem">smt</code> target to start at
            the system boot:</p><div class="verbatim-wrap"><pre class="screen">systemctl enable smt.target</pre></div><p>
      Start it immediately, if necessary:
     </p><div class="verbatim-wrap"><pre class="screen">systemctl start smt.target</pre></div></li></ol></div></div><div class="sect3 " id="smt.installation.upgrade.scc"><div class="titlepage"><div><div><h4 class="title" id="smt.installation.upgrade.scc"><span class="number">1.2.2.1 </span><span class="name">Migration to SUSE Customer Center on SMT 11 SP3</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade.scc">#</a></h4></div></div></div><p>
     Before upgrading to SUSE Linux Enterprise Server 12, you need to switch the registration center
     on SUSE Linux Enterprise Server 11. SMT now registers with SUSE Customer Center instead of Novell Customer
     Center. You can do this either via a YaST
     module or command line tools.
    </p><p>
     Before performing the switch between customer centers, make sure that
     the target customer center serves all products that are registered
     with SMT. Both YaST and the command line tools perform a check
     to find out whether all products can be served with the new
     registration server.
    </p><p>
     To perform the migration to SUSE Customer Center via command line, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen">smt ncc-scc-migration</pre></div><p>
     The migration itself takes time, and during the migration process
     the SMT server may not be able to serve clients that are already
     registered.
    </p><p>
     The migration process itself changes the registration server and the
     proper type of API in the configuration files. No further
     (configuration) changes are needed on the SMT.
    </p><p>
     To migrate from Novell Customer Center to SUSE Customer Center via YaST, use the YaST smt-server
     module.
    </p><p> When migration has been completed, it is necessary to synchronize
          SMT with the customer center. It is recommended to ensure
          that the repositories are up to date. This can be done using
          the following commands: </p><div class="verbatim-wrap"><pre class="screen">   smt sync
   smt mirror</pre></div></div></div></div><div class="sect1 " id="idm139994743085456"><div class="titlepage"><div><div><h2 class="title" id="idm139994743085456"><span class="number">1.3 </span><span class="name">Enabling SLP Announcements</span> <a title="Permalink" class="permalink" href="#idm139994743085456">#</a></h2></div></div></div><p>
   SMT includes the SLP service description file
   (<code class="filename">/etc/slp.reg.d/smt.reg</code>). To enable SLP
   announcements of the SMT service, open respective ports in your
   firewall and enable the SLP service:
  </p><div class="verbatim-wrap"><pre class="screen">sysconf_addword /etc/sysconfig/SuSEfirewall2 FW_SERVICES_EXT_TCP "427"
sysconf_addword /etc/sysconfig/SuSEfirewall2 FW_SERVICES_EXT_UDP "427"
insserv slpd
rcslpd start</pre></div></div></div><div class="chapter " id="smt.server"><div class="titlepage"><div><div><h1 class="title"><span class="number">2 </span><span class="name">SMT Server Configuration</span> <a title="Permalink" class="permalink" href="#smt.server">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_server.xml</li><li><span class="ds-label">ID: </span>smt.server</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.yast.activation"><span class="number">2.1 </span><span class="name">Activating and Deactivating SMT with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.credentials"><span class="number">2.2 </span><span class="name">Setting the Update Server Credentials with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.database"><span class="number">2.3 </span><span class="name">Setting SMT Database Password with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.reports"><span class="number">2.4 </span><span class="name">Setting E-mail Addresses to Receive Reports with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.scheduling"><span class="number">2.5 </span><span class="name">Setting the SMT Job Schedule with YaST</span></a></span></dt></dl></div></div><p>
  This chapter introduces the YaST configuration module for the SMT
  server. This module can be used to set and configure mirroring credentials, SMT database
  passwords, and e-mail addresses for receiving SMT reports. The module also lets you
  set the SMT job schedule, and activate or deactivate the SMT service.
 </p><p>
  To configure SMT with SMT Server Configuration, follow the steps below.
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Start the YaST module <span class="guimenu">SMT Server Configuration</span> from
    the YaST control center or by running <code class="command">yast
    smt-server</code> from the command line.
   </p></li><li class="step "><p>
    To activate SMT, toggle the <span class="guimenu">Enable Subscription Management
    Tool Service (SMT)</span> option in the <span class="guimenu">Customer Center
    Access</span> section. For more information about activating SMT with YaST, see
    <a class="xref" href="#smt.yast.activation" title="2.1. Activating and Deactivating SMT with YaST">Section 2.1, “Activating and Deactivating SMT with YaST”</a>.
   </p></li><li class="step "><p>
    If the firewall is enabled, activate <span class="guimenu">Open Port in
    Firewall</span>.
   </p></li><li class="step "><p> In the <span class="guimenu">Customer Center Configuration</span>
        section of <span class="guimenu">Customer Center Access</span>,
        you can set the custom server URLs. Set and test credentials for
        the SUSE Update service. Correct credentials are necessary to
        enable mirroring from the download server and determine the
        products that should be mirrored. Also set the e-mail address
        used for the registration and the URL of your SMT server. For
        more information, see <a class="xref" href="#smt.yast.credentials" title="2.2. Setting the Update Server Credentials with YaST">Section 2.2, “Setting the Update Server Credentials with YaST”</a>. </p></li><li class="step "><p>
    In the <span class="guimenu">Database and Reporting</span> section, set the password
    for the SMT user in the Maria DB database and specify e-mail addresses
    for receiving reports. For more information, see
    <a class="xref" href="#smt.yast.database" title="2.3. Setting SMT Database Password with YaST">Section 2.3, “Setting SMT Database Password with YaST”</a> and
    <a class="xref" href="#smt.yast.reports" title="2.4. Setting E-mail Addresses to Receive Reports with YaST">Section 2.4, “Setting E-mail Addresses to Receive Reports with YaST”</a>.
   </p></li><li class="step "><p>
    In the <span class="guimenu">Scheduled SMT Jobs</span> section, set a schedule for  SMT
    jobs, such as synchronization of updates, SUSE Customer Center registration, and SMT report generation. For more information, see
    <a class="xref" href="#smt.yast.scheduling" title="2.5. Setting the SMT Job Schedule with YaST">Section 2.5, “Setting the SMT Job Schedule with YaST”</a>.
   </p></li><li class="step "><p>
    When you are satisfied with the configuration, click <span class="guimenu">OK</span>. YaST
    updates the SMT configuration and starts or restarts necessary
    services.
   </p><p>
    If you want to abort the configuration and cancel any changes, click
    <span class="guimenu">Cancel</span>.
   </p><div id="idm139994737280160" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Check for Certificate</h6><p>
     When the SMT Configuration applies changes, it checks whether the common
     server certificate exists. If the certificate
     does not exist, you will be asked whether the certificate should be created.
    </p></div></li></ol></div></div><div class="sect1 " id="smt.yast.activation"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.activation"><span class="number">2.1 </span><span class="name">Activating and Deactivating SMT with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.activation">#</a></h2></div></div></div><p>
   YaST provides an easy way to activate or deactivate the SMT service.
   To activate SMT using YaST, follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p> Switch to the <span class="guimenu">Customer Center Access</span> section in the
          SMT Configuration. </p></li><li class="step "><p>
     Activate the <span class="guimenu">Enable Subscription Management Tool service
     (SMT)</span> option.
    </p><div id="idm139994742066064" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Organization Credentials</h6><p>
      Specify organization credentials before activating SMT. For more
      information on how to
      set organization credentials with YaST, see
      <a class="xref" href="#smt.yast.credentials" title="2.2. Setting the Update Server Credentials with YaST">Section 2.2, “Setting the Update Server Credentials with YaST”</a>.
     </p></div></li><li class="step "><p>
     Click <span class="guimenu">Finish</span> to apply the changes and leave the
     SMT Configuration.
    </p></li></ol></div></div><p>
   To deactivate SMT with YaST, proceed as follows.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Customer Center Access</span> section in the SMT
     Configuration.
    </p></li><li class="step "><p>
     Disable the <span class="guimenu">Enable Subscription Management Tool service
     (SMT)</span> option.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Finish</span> to apply the changes and leave the
     SMT Configuration.
    </p></li></ol></div></div><p>
   When activating SMT, YaST performs the following actions.
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     The Apache configuration is changed by creating symbolic links in the
     <code class="filename">/etc/apache2/conf.d/</code> directory. Links to the
     <code class="filename">/etc/smt.d/nu_server.conf</code> and
     <code class="filename">/etc/smt.d/smt_mod_perl.conf</code> files are created
     there.
    </p></li><li class="listitem "><p>
     The Apache Web server is started (or reloaded if already running).
    </p></li><li class="listitem "><p>
     The Maria DB server is started or restarted. The smt
     user and all necessary tables in the database are created, if needed.
    </p></li><li class="listitem "><p>
     The schema of the SMT database is checked. If the database schema is
     outdated, the SMT database is upgraded to the current
     schema.
    </p></li><li class="listitem "><p>
     Cron is updated by creating a symbolic link in the
     <code class="filename">/etc/cron.d/</code> directory. A link to the
     <code class="filename">/etc/smt.d/novell.com-smt</code> file is created there.
    </p></li></ul></div><p>
   When deactivating SMT, YaST performs the following actions.
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Symbolic links that were created upon SMT activation in the
     /etc/apache2/conf.d/ and /etc/cron.d/ directories are deleted.
    </p></li><li class="listitem "><p>
     The Cron daemon, the Apache server, and the Maria DB database daemon are
     restarted. Neither Apache nor Maria DB are stopped, as they may be
     used for other purposes than the SMT service.
    </p></li></ul></div></div><div class="sect1 " id="smt.yast.credentials"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.credentials"><span class="number">2.2 </span><span class="name">Setting the Update Server Credentials with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.credentials">#</a></h2></div></div></div><p>
   The following procedure describes how to set and test the download server
   credentials and the URL of the download server service using YaST.
  </p><div class="figure" id="fig.yast.credentials"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt-yast-credentials.png"><img src="images/smt-yast-credentials.png" width="" alt="Setting the Update Server Credentials with YaST" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 2.1: </span><span class="name">Setting the Update Server Credentials with YaST </span><a title="Permalink" class="permalink" href="#fig.yast.credentials">#</a></h6></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Customer Center Access</span> section in the SMT
     Configuration. If the credentials have been already set with YaST or
     via the <code class="filename">/etc/smt.conf</code> configuration file, they will
     be displayed in the <span class="guimenu">User</span> and
     <span class="guimenu">Password</span> fields.
    </p></li><li class="step "><p>
     If you do not have credentials, visit SUSE Customer Center to obtain them. For
     more details, see <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>.
    </p></li><li class="step "><p>
     Enter your user name and password in the appropriate fields.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Test</span> to check the credentials. YaST will try
     to download a list of available repositories with the provided

     credentials. If the test succeeds, the last line of the test results
     will read <code class="literal">Test result: success</code>. If the test fails,
     check the provided

     credentials and try again.
    </p><div class="figure" id="fig.yast.credtest"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt-yast-credtest.png"><img src="images/smt-yast-credtest.png" width="" alt="Successful Test of the Update Server Credentials" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 2.2: </span><span class="name">Successful Test of the Update Server Credentials </span><a title="Permalink" class="permalink" href="#fig.yast.credtest">#</a></h6></div></div></li><li class="step "><p>
     Enter the <span class="guimenu">SCC E-mail Used for Registration</span>. This
     should be the address you used to register to SUSE Customer Center.
    </p><p>
     Enter <span class="guimenu">Your SMT Server URL</span> if it has not been
     detected automatically.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span>.
    </p></li></ol></div></div></div><div class="sect1 " id="smt.yast.database"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.database"><span class="number">2.3 </span><span class="name">Setting SMT Database Password with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.database">#</a></h2></div></div></div><p>
   For security reasons, SMT uses its own user in the database. YaST
   provides an interface for setting up or changing the SMT database
   password. To set or change the SMT database password with YaST,
   follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Database and Reporting</span> section in the SMT
     Configuration module.
    </p></li><li class="step "><p> Enter the <span class="guimenu">Database Password for SMT
          User</span>. Confirm the password by re-entering it, then
          click <span class="guimenu">OK</span>. </p></li></ol></div></div></div><div class="sect1 " id="smt.yast.reports"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.reports"><span class="number">2.4 </span><span class="name">Setting E-mail Addresses to Receive Reports with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.reports">#</a></h2></div></div></div><p>
   YaST SMT provides an interface for setting up a list of e-mail
   addresses for receiving reports from  SMT. To edit this list of
   addresses, proceed as follows.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Database and Reporting</span> section in the SMT
     Configuration.
    </p></li><li class="step "><p>
     The list of e-mail addresses is shown in the table. Use the appropriate
     buttons to add, edit, and delete existing address entries.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span>.
    </p></li></ol></div></div><p>
   The comma-separated list of addresses for SMT reports is written to the
   <code class="option">reportEmail</code> section of the
   <code class="filename">/etc/smt.conf</code> configuration file.
  </p></div><div class="sect1 " id="smt.yast.scheduling"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.scheduling"><span class="number">2.5 </span><span class="name">Setting the SMT Job Schedule with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.scheduling">#</a></h2></div></div></div><p> The SMT Configuration module provides an interface to
      schedule recurring SMT jobs. YaST uses <code class="literal">cron</code>
      to schedule configured jobs. If needed, <code class="literal">cron</code>
      can be used directly. There are five types of recurring jobs that can be set: </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994744395248"><span class="term ">Synchronization of Updates</span></dt><dd><p>
      Synchronizes with SUSE Customer Center, updates repositories, and downloads new
      updates.
     </p></dd><dt id="idm139994743202752"><span class="term ">Generation of Reports</span></dt><dd><p>
      Generates and sends SMT Subscription Reports to addresses defined in
      <a class="xref" href="#smt.yast.reports" title="2.4. Setting E-mail Addresses to Receive Reports with YaST">Section 2.4, “Setting E-mail Addresses to Receive Reports with YaST”</a>.
     </p></dd><dt id="idm139994743200544"><span class="term ">SCC Registration</span></dt><dd><p>
      Registers with SUSE Customer Center all clients that are not already registered or that
      changed their data since the last registration.
     </p></dd><dt id="idm139994743198608"><span class="term ">Job Queue Cleanup</span></dt><dd><p>
      Cleans up queued jobs. It removes finished or failed jobs from the
      job queue that are older than eight days. It also removes job artifacts that
      are left in the database as result of an error.
     </p></dd></dl></div><div class="figure" id="fig.yast.jobconf"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt-yast-jobs-conf.png"><img src="images/smt-yast-jobs-conf.png" width="" alt="SMT Job Schedule Configuration" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 2.3: </span><span class="name">SMT Job Schedule Configuration </span><a title="Permalink" class="permalink" href="#fig.yast.jobconf">#</a></h6></div></div><p>
   Use the following procedure to configure the schedule of SMT jobs with YaST.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Scheduled SMT Jobs</span> section in the SMT
     Configuration. The table contains a list of all scheduled jobs, their
     type, frequency, date, and time to run. You can add, delete, and edit
     the existing scheduled tasks.
    </p></li><li class="step "><p>
     To add a scheduled SMT job, click <span class="guimenu">Add</span>.
     This opens the <span class="guimenu">Adding New SMT Scheduled Job</span> dialog.
    </p><p>
     Choose the synchronization job to schedule. You can choose between
     <span class="guimenu">Synchronization of Updates</span>, <span class="guimenu">Report
     Generation</span>, <span class="guimenu">SCC Registration</span>, and
     <span class="guimenu">Job Queue Cleanup</span>.
    </p><p>
     Choose the <span class="guimenu">Frequency</span> of the new scheduled SMT job.
     Jobs can be performed <span class="guimenu">Daily</span>,
     <span class="guimenu">Weekly</span>, <span class="guimenu">Monthly</span>, or
     <span class="guimenu">Periodically</span> (every n-th hour or every m-th minute).
    </p><p>
     Set the <span class="guimenu">Job Start Time</span> by entering
     <span class="guimenu">Hour</span> and <span class="guimenu">Minute</span>. In case of a
     recurring job, enter the relevant intervals. For weekly and monthly
     schedules, select <span class="guimenu">Day of the Week</span> or <span class="guimenu">Day of
     the Month</span>.
    </p><p> Click <span class="guimenu">Add</span>. </p></li><li class="step "><p>
     To edit a scheduled SMT job (for example, change its
     frequency, time, or date), select the job in the table and click
     <span class="guimenu">Edit</span>. Then change the desired parameters and click
     <span class="guimenu">OK</span>.
    </p><div class="figure" id="idm139994735582176"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt-yast-schedule.png"><img src="images/smt-yast-schedule.png" width="" alt="Setting Scheduled Job with YaST" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 2.4: </span><span class="name">Setting Scheduled Job with YaST </span><a title="Permalink" class="permalink" href="#idm139994735582176">#</a></h6></div></div></li><li class="step "><p>
     To cancel a scheduled job and delete it from the table,
     select the job in the table and click <span class="guimenu">Delete</span>.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span> to apply the settings and quit the SMT
     Configuration.
    </p></li></ol></div></div></div></div><div class="chapter " id="smt.mirroring"><div class="titlepage"><div><div><h1 class="title"><span class="number">3 </span><span class="name">Mirroring Repositories on the SMT Server</span> <a title="Permalink" class="permalink" href="#smt.mirroring">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_mirroring.xml</li><li><span class="ds-label">ID: </span>smt.mirroring</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.mirroring.getcredentials"><span class="number">3.1 </span><span class="name">Mirroring Credentials</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirroring.manage"><span class="number">3.2 </span><span class="name">Managing Software Repositories with SMT Command Line Tools</span></a></span></dt><dt><span class="sect1"><a href="#idm139994744484816"><span class="number">3.3 </span><span class="name">The Structure of /srv/www/htdocs for SLE 11</span></a></span></dt><dt><span class="sect1"><a href="#idm139994736443312"><span class="number">3.4 </span><span class="name">The Structure of /srv/www/htdocs for SLE 12</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirroring.testenv"><span class="number">3.5 </span><span class="name">Using the Test Environment</span></a></span></dt><dt><span class="sect1"><a href="#smt.staging"><span class="number">3.6 </span><span class="name">Testing and Filtering Update Repositories with Staging</span></a></span></dt><dt><span class="sect1"><a href="#smt.repo.preload"><span class="number">3.7 </span><span class="name">Repository Preloading</span></a></span></dt></dl></div></div><p>
  You can mirror the installation and update repositories on the SMT
  server. This way, you do not need to download updates on each machine, which saves time and bandwidth.
 </p><div id="idm139994714728512" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: SUSE Linux Enterprise Server 9 Repositories</h6><p>
   As SUSE Linux Enterprise Server 9 is no longer supported, SMT does not mirror SUSE Linux Enterprise Server 9
   repositories.
  </p></div><div class="sect1 " id="smt.mirroring.getcredentials"><div class="titlepage"><div><div><h2 class="title" id="smt.mirroring.getcredentials"><span class="number">3.1 </span><span class="name">Mirroring Credentials</span> <a title="Permalink" class="permalink" href="#smt.mirroring.getcredentials">#</a></h2></div></div></div><p>
   Before you create a local mirror of the repositories, you need appropriate
   organization credentials. You can obtain the credentials from SUSE Customer Center.
  </p><p>
   To get the credentials from SUSE Customer Center, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Visit SUSE Customer Center at <a class="link" href="http://scc.suse.com" target="_blank">http://scc.suse.com</a> and log in.
    </p></li><li class="step "><p>
     If you are member of multiple organizations, chose the organization you
     want to work with from the drop-down box in the top-right corner.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Organization</span> in the top menu.
    </p></li><li class="step "><p>
     Switch to the <span class="guimenu">Organizational credentials</span> section.
    </p></li><li class="step "><p>
     To see the password, click <span class="guimenu">Show password</span>.
    </p></li></ol></div></div><p>
   The obtained credentials should be set with the YaST SMT Server
   Configuration module or added directly to the
   <code class="filename">/etc/smt.conf</code> file. For more information about the
   <code class="filename">/etc/smt.conf</code> file, see
   <a class="xref" href="#smt.config.smtconf" title="7.2.1. /etc/smt.conf">Section 7.2.1, “/etc/smt.conf”</a>.
  </p><div id="smt.mirror.credential.merge" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Merging Multiple Organization Site Credentials</h6><p>
    SMT can only work with one mirror credential at a time. Multiple
    credentials are not supported. When a customer creates a new company, this
    generates a new mirror credential. This is not always convenient, as some products
    are available via the first set and other products via the second set. To
    request a merge of credentials, the EMEA-based customers (Europe, the Middle
    East and Africa) are advised to send an e-mail to
    &lt;<a class="email" href="mailto:Customer_CenterEMEA@novell.com">Customer_CenterEMEA@novell.com</a>&gt; with the applicable customer
    and site IDs. The EMEA PIC team will verify the records. The contact for
    NALAAP (North America, Latin America, and Asia Pacific) is &lt;<a class="email" href="mailto:CustomerResolution@novell.com">CustomerResolution@novell.com</a>&gt;.
   </p></div></div><div class="sect1 " id="smt.mirroring.manage"><div class="titlepage"><div><div><h2 class="title" id="smt.mirroring.manage"><span class="number">3.2 </span><span class="name">Managing Software Repositories with SMT Command Line Tools</span> <a title="Permalink" class="permalink" href="#smt.mirroring.manage">#</a></h2></div></div></div><p>
   This section describes tools and procedures for viewing information about
   software repositories available through SMT, configuring these
   repositories, and setting up custom repositories on the command line. For
   details on the YaST SMT Server Management module, see
   <a class="xref" href="#smt.management" title="Chapter 4. Managing Repositories with YaST SMT Server Management">Chapter 4, <em>Managing Repositories with YaST SMT Server Management</em></a>.
  </p><div class="sect2 " id="idm139994747878000"><div class="titlepage"><div><div><h3 class="title" id="idm139994747878000"><span class="number">3.2.1 </span><span class="name">Updating the Local SMT Database</span> <a title="Permalink" class="permalink" href="#idm139994747878000">#</a></h3></div></div></div><p>
    The local SMT database needs to be updated periodically with the information
    downloaded from SUSE Customer Center. These periodic updates can be configured with the
    SMT Management module, as described in
    <a class="xref" href="#smt.yast.scheduling" title="2.5. Setting the SMT Job Schedule with YaST">Section 2.5, “Setting the SMT Job Schedule with YaST”</a>.
   </p><p>
    To update the SMT database manually, use the <code class="command">smt-sync</code>
    command. For more information about the <code class="command">smt-sync</code>
    command, see <a class="xref" href="#smt.scripts.smtsync" title="7.1.2.7. smt-sync">Section 7.1.2.7, “smt-sync”</a>.
   </p></div><div class="sect2 " id="idm139994742226736"><div class="titlepage"><div><div><h3 class="title" id="idm139994742226736"><span class="number">3.2.2 </span><span class="name">Enabled Repositories and Repositories That Can Be Mirrored</span> <a title="Permalink" class="permalink" href="#idm139994742226736">#</a></h3></div></div></div><p>
    The database installed with SMT contains information about all software
    repositories available on SUSE Customer Center. However, the used mirror credentials
    determine which repositories can really be mirrored. For more information
    about getting and setting organization credentials, see
    <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>.
   </p><p>
    Repositories that can be mirrored have the <code class="literal">MIRRORABLE</code>
    flag set in the repositories table in the SMT database. That a
    repository can be mirrored does not mean that it needs to be mirrored. Only
    repositories with the <code class="literal">DOMIRROR</code> flag set in the SMT
    database will be mirrored. For more information about configuring which
    repositories should be mirrored,
    see <a class="xref" href="#smt.mirroring.manage.domirror" title="3.2.4. Selecting Repositories to Be Mirrored">Section 3.2.4, “Selecting Repositories to Be Mirrored”</a>.
   </p></div><div class="sect2 " id="idm139994742222240"><div class="titlepage"><div><div><h3 class="title" id="idm139994742222240"><span class="number">3.2.3 </span><span class="name">Getting Information about Repositories</span> <a title="Permalink" class="permalink" href="#idm139994742222240">#</a></h3></div></div></div><p>
    Use the <code class="command">smt-repos</code> command to list available software
    repositories and additional information. Using this command without any
    options lists all available repositories, including repositories that
    cannot be mirrored. In the first column, the enabled repositories
    (repositories set to be mirrored) are marked with <code class="literal">Yes</code>.
    Disabled repositories are marked with <code class="literal">No</code>. The other
    columns show ID, type, name, target, and description of the listed
    repositories. The last columns show whether the repository can be mirrored
    and whether staging is enabled.
   </p><p>
    Use the <code class="option">--verbose</code> option, to get additional information
    about the URL of the repository and the path it will be mirrored to.

   </p><p>
    The repository listing can be limited to the repositories that can be
    mirrored or to the repositories that are enabled. To list the repositories that can be
    mirrored, use the <code class="option">-m</code> or <code class="option">--only-mirrorable</code>
    option: <code class="command">smt-repos -m</code>.
   </p><p>
    To list only enabled repositories, use the <code class="option">-o</code> or
    <code class="option">--only-enabled</code> option: <code class="command">smt-repos -o</code>
    (see <a class="xref" href="#ex.smt.mirroring.repos.o" title="Listing All Enabled Repositories">Example 3.1, “Listing All Enabled Repositories”</a>).
   </p><div class="example" id="ex.smt.mirroring.repos.o"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 3.1: </span><span class="name">Listing All Enabled Repositories </span><a title="Permalink" class="permalink" href="#ex.smt.mirroring.repos.o">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">tux:~ # smt-repos -o
.---------------------------------------------------------------------------------------------------------------------.
| Mirr| ID | Type | Name                    | Target        | Description                             | Can be M| Stag|
+-----+----+------+-------------------------+---------------+-----------------------------------------+---------+-----+
| Yes |  1 | zypp | ATI-Driver-SLE11-SP2    | --            | ATI-Driver-SLE11-SP2                    | Yes     | Yes |
| Yes |  2 | zypp | nVidia-Driver-SLE11-SP2 | --            | nVidia-Driver-SLE11-SP2                 | Yes     | No  |
| Yes |  3 | nu   | SLED11-SP2-Updates      | sle-11-x86_64 | SLED11-SP2-Updates for sle-11-x86_64    | Yes     | No  |
| Yes |  4 | nu   | SLES11-SP1-Updates      | sle-11-x86_64 | SLES11-SP1-Updates for sle-11-x86_64    | Yes     | Yes |
| Yes |  5 | nu   | SLES11-SP2-Core         | sle-11-x86_64 | SLES11-SP2-Core for sle-11-x86_64       | Yes     | No  |
| Yes |  6 | nu   | SLES11-SP2-Updates      | sle-11-i586   | SLES11-SP2-Updates for sle-11-i586      | Yes     | No  |
| Yes |  7 | nu   | WebYaST-Testing-Updates | sle-11-i586   | WebYaST-Testing-Updates for sle-11-i586 | Yes     | No  |
'-----+----+------+-------------------------+---------------+-----------------------------------------+---------+-----'</pre></div></div></div><p>
    You can also list only repositories with a specific name or show
    information about a repository with a specific name and target. To list
    repositories with a particular name, use the <code class="command">smt-repos</code>

    <em class="replaceable ">REPOSITORY_NAME</em> command. To show information
    about a repository with a specific name and target, use the
    <code class="command">smt-repos</code> <em class="replaceable ">repository_name</em>
    <em class="replaceable ">TARGET</em> command.
   </p><p>
    To get a list of installation repositories from remote, see
    <a class="xref" href="#smt.clients.repolist" title="8.7. Listing Accessible Repositories">Section 8.7, “Listing Accessible Repositories”</a>.
   </p></div><div class="sect2 " id="smt.mirroring.manage.domirror"><div class="titlepage"><div><div><h3 class="title" id="smt.mirroring.manage.domirror"><span class="number">3.2.4 </span><span class="name">Selecting Repositories to Be Mirrored</span> <a title="Permalink" class="permalink" href="#smt.mirroring.manage.domirror">#</a></h3></div></div></div><p>
    Only enabled repositories can be mirrored. In the database, the enabled
    repositories have the <code class="literal">DOMIRROR</code> flag set. Repositories
    can be enabled or disabled using the <code class="command">smt-repos</code> command.
   </p><p>
    To enable one or more repositories, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To enable all repositories that can be mirrored or to
      choose one repository from the list of all repositories, run the
      <code class="command">smt-repos -e</code> command.
     </p><p>
      You can limit the list of repositories by using the relevant options. To
      limit the list to the repositories that can be mirrored, use the
      <code class="option">-m</code> option: <code class="command">smt-repos -m -e</code>. To limit
      the list to the repositories with a specific name, use the
      <code class="command">smt-repos -e</code>
      <em class="replaceable ">REPOSITORY_NAME</em> command. To list a repository
      with a specific name and target, use the <code class="command">smt-repos -e
      <em class="replaceable ">REPOSITORY_NAME</em>
      <em class="replaceable ">TARGET</em></code> command.
     </p><p>
      To enable all repositories belonging to a specific product,
      use the <code class="option">--enable-by-prod</code> or <code class="option">-p</code> option,
      followed by the name of the product and optionally version,
      architecture, and release:
     </p><div class="verbatim-wrap"><pre class="screen">smt-repos -p <em class="replaceable ">product</em>[,<em class="replaceable ">version</em>[,<em class="replaceable ">architecture</em>[,<em class="replaceable ">release</em>]]]</pre></div><p>
      For example, to enable all repositories belonging to SUSE Linux Enterprise Server 10 SP3 for
      PowerPC architecture, use the <code class="command">smt-repos -p
      SUSE-Linux-Enterprise-Server-SP3,10,ppc</code> command. The list of
      known products can be obtained with the
      <code class="command">smt-list-products</code> command.
     </p><div id="idm139994742343904" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Installer Self-Update Repository</h6><p>
       SMT supports mirroring the installer self-update repository (find more
       information in <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 6 “Installation with YaST”, Section 6.4.1 “Self-Update Process”</span>). If
       you need to provide the self-update repository, identify and enable it,
       for example:
      </p><div class="verbatim-wrap"><pre class="screen">$ smt-repos -m | grep Installer
$ smt-repos -e SLES12-SP2-Installer-Updates sle-12-x86_64</pre></div></div></li><li class="step "><p>
      If more than one repository is listed, choose the one you want to enable:
      specify its ID listed in the repository table and press
      <span class="keycap">Enter</span>. If you want to enable all the listed
      repositories, use <code class="literal">a</code> and press
      <span class="keycap">Enter</span>.
     </p></li></ol></div></div><p>
    To disable one or more repositories, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To disable all enabled repositories or just choose one
      repository from the list of all repositories, run the <code class="command">smt-repos
      -d</code> command.
     </p><p>
      To choose the repository to be disabled from a shorter list,
      or to disable all repositories from a limited group, use any of the
      available options to limit the list of repositories. To limit the list to
      the enabled repositories, use the <code class="option">-o</code>
      option: <code class="command">smt-repos -o -d</code>. To limit the list to
      repositories with a particular name, use the <code class="command">smt-repos

      -d</code> <em class="replaceable ">REPOSITORY_NAME</em> command. To show a repository with a specific name and target, use the
      <code class="command">smt-repos -d
      <em class="replaceable ">REPOSITORY_NAME</em>
      <em class="replaceable ">TARGET</em></code> command.
     </p></li><li class="step "><p>
      If more than one repository is listed, choose which one you want to
      disable: specify its ID listed in the repository table and
      press <span class="keycap">Enter</span>. If you want to disable all the
      listed repositories, use <code class="literal">a</code> and press
      <span class="keycap">Enter</span>.
     </p></li></ol></div></div></div><div class="sect2 " id="idm139994716768528"><div class="titlepage"><div><div><h3 class="title" id="idm139994716768528"><span class="number">3.2.5 </span><span class="name">Deleting Mirrored Repositories</span> <a title="Permalink" class="permalink" href="#idm139994716768528">#</a></h3></div></div></div><p>
    You can delete mirrored repositories that are no longer used. If you delete
    a repository, it will be physically removed from the SMT storage area.
   </p><p>
    Use the <code class="command">smt-repos
    --delete</code> command to delete a repository with a specific name. To
    delete the repository in a namespace, specify the <code class="option">--namespace <em class="replaceable ">DIRNAME</em></code>
    option.
   </p><p>
    The <code class="option">--delete</code> option lists all repositories. You can delete the specified
    repositories by entering the ID number or the name and target. To delete all repositories, enter
    <span class="guimenu">a</span>.
   </p><div id="idm139994716764016" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Detecting Repository IDs</h6><p>
     Every repository has an SHA-1 hash that you can use as an ID. You can get the
     repository's hash by calling <code class="command">smt-repos -v</code>.
    </p></div></div><div class="sect2 " id="idm139994716761952"><div class="titlepage"><div><div><h3 class="title" id="idm139994716761952"><span class="number">3.2.6 </span><span class="name">Mirroring Custom Repositories</span> <a title="Permalink" class="permalink" href="#idm139994716761952">#</a></h3></div></div></div><p>
    SMT also makes it possible to mirror repositories that are not available
    at the SUSE Customer Center. These repositories are called <span class="quote">“<span class="quote">custom
    repositories</span>”</span>, and they can be mirrored using the
    <code class="command">smt-setup-custom-repos</code> command.  It is also possible to
    delete custom repositories.
   </p><p>
    When adding a new custom repository, the
    <code class="command">smt-setup-custom-repos</code> command inserts a new record in the
    database and sets the <span class="emphasis"><em>mirror</em></span> flag to
    <em class="replaceable ">true</em>. You can disable
    mirroring later, if necessary.
   </p><p>
    To set up a custom repository to be available through SMT, follow these
    steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      If you do not know the ID of the product the new repositories should
      belong to, use <code class="command">smt-list-products</code> to get the ID. For
      the description of the <code class="command">smt-list-products</code>, see
      <a class="xref" href="#smt.scripts.listproducts" title="7.1.2.4. smt-list-products">Section 7.1.2.4, “smt-list-products”</a>.
     </p></li><li class="step "><p>
      Run
     </p><div class="verbatim-wrap"><pre class="screen">smt-setup-custom-repos --productid <em class="replaceable ">PRODUCT_ID</em> \
--name <em class="replaceable ">REPOSITORY_NAME</em> --exturl <em class="replaceable ">REPOSITORY_URL</em></pre></div><p>
      <em class="replaceable ">PRODUCT_ID</em> is the ID of the
      product the repository belongs to,
      <em class="replaceable ">REPOSITORY_NAME</em> is the name of the
      repository, and <em class="replaceable ">REPOSITORY_URL</em> is the URL of the
      repository. If the added repository needs to be
      available for more than one product, specify the IDs of all products that
      should use the added repository.
     </p><p>
      For example, the following command sets <code class="literal">My repository</code> available at
      <code class="literal">http://example.com/My_repository</code> to the products with
      the IDs <code class="literal">423</code>, <code class="literal">424</code>, and
      <code class="literal">425</code>:
     </p><div class="verbatim-wrap"><pre class="screen">smt-setup-custom-repositories --productid 423 --productid 424 \
--productid 425 --name 'My_repository' \
--exturl 'http://example.com/My_repository'</pre></div></li></ol></div></div><div id="idm139994744489136" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Mirroring Unsigned Repositories</h6><p>
     By default, SUSE Linux Enterprise 10 does not allow the use of unsigned
     repositories. So if you want to mirror unsigned repositories and
     use them on client machines, be aware that the package installation
     tool—YaST or <code class="command">zypper</code>—will ask you whether
     to use repositories that are not signed.
    </p></div><p>
    To remove an existing custom repository from the SMT database, use
    <code class="command">smt-setup-custom-repositories --delete</code>
    <em class="replaceable ">ID</em>, where <em class="replaceable ">ID</em>
    is the ID of the repository to be removed.
   </p></div></div><div class="sect1 " id="idm139994744484816"><div class="titlepage"><div><div><h2 class="title" id="idm139994744484816"><span class="number">3.3 </span><span class="name">The Structure of /srv/www/htdocs for SLE 11</span> <a title="Permalink" class="permalink" href="#idm139994744484816">#</a></h2></div></div></div><p>
   The path to the directory containing the mirror is set by the
   <code class="option">MirrorTo</code> option in the <code class="filename">/etc/smt.conf</code>
   configuration file. For more information about
   <code class="filename">/etc/smt.conf</code>, see
   <a class="xref" href="#smt.config.smtconf" title="7.2.1. /etc/smt.conf">Section 7.2.1, “/etc/smt.conf”</a>. If the
   <code class="option">MirrorTo</code> option is not set to the Apache <code class="filename">htdocs</code> directory
   <code class="filename">/srv/www/htdocs/</code>, the following links need to be
   created. If the directories already exist, they need to be removed
   prior to creating the link (the data in these directories will be lost). In
   the following examples, <em class="replaceable ">MIRRORTO</em> needs to be
   replaced by the path the option <code class="option">MirrorTo</code> is set to.
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <code class="filename">/srv/www/htdocs/repo/$RCE</code> must point to
     <code class="filename"><em class="replaceable ">MIRRORTO</em>/repo/$RCE/</code>
    </p></li><li class="listitem "><p>
     <code class="filename">/srv/www/htdocs/repo/RPMMD</code> must point to
     <code class="filename"><em class="replaceable ">MIRRORTO</em>/repo/RPMMD/</code>
    </p></li><li class="listitem "><p>
     <code class="filename">/srv/www/htdocs/repo/testing</code> must point to
     <code class="filename"><em class="replaceable ">MIRRORTO</em>/repo/testing/</code>
    </p></li><li class="listitem "><p>
     <code class="filename">/srv/www/htdocs/repo/full</code> must point to
     <code class="filename"><em class="replaceable ">MIRRORTO</em>/repo/full/</code>
    </p></li></ul></div><p>
   The directory specified using the <code class="option">MirrorTo</code> option and the
   subdirectories listed above must exist. Files, directories, and links in
   <em class="replaceable ">/MIRRORTO</em> must belong to the
   <code class="systemitem">smt</code> user and the
   <code class="systemitem">www</code> group.
  </p><p>
   Here is an example where the <code class="option">MirrorTo</code> is set to
   <code class="literal">/mirror/data</code>:
  </p><div class="verbatim-wrap"><pre class="screen">l /srv/www/htdocs/repo/
total 16
lrwxrwxrwx 1 smt  www    22 Feb  9 14:23 $RCE -&gt; /mirror/data/repo/$RCE/
drwxr-xr-x 4 smt  www  4096 Feb  9 14:23 ./
drwxr-xr-x 4 root root 4096 Feb  8 15:44 ../
lrwxrwxrwx 1 smt  www    23 Feb  9 14:23 RPMMD -&gt; /mirror/data/repo/RPMMD/
lrwxrwxrwx 1 smt  www    22 Feb  9 14:23 full -&gt; /mirror/data/repo/full/
drwxr-xr-x 2 smt  www  4096 Feb  8 11:12 keys/
lrwxrwxrwx 1 smt  www    25 Feb  9 14:23 testing -&gt; /mirror/data/repo/testing/
drwxr-xr-x 2 smt  www  4096 Feb  8 14:14 tools/</pre></div><p>
   The links can be created using the <code class="command">ln -s</code> commands. For
   example:
  </p><div class="verbatim-wrap"><pre class="screen">cd /srv/www/htdocs/repo
for LINK in \$RCE RPMMD full testing; do
 ln -s /mirror/data/repo/${LINK}/ &amp;&amp; chown -h smt.www ${LINK}
done</pre></div><div id="idm139994736450784" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: The <code class="filename">/srv/www/htdocs/repo</code> Directory</h6><p>
    The <code class="filename">/srv/www/htdocs/repo</code> directory must not be a
    symbolic link.
   </p></div><div id="idm139994736448512" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Apache and Symbolic Links</h6><p>
    By default Apache on <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> is configured to not follow symbolic
    links. To enable symblic links for
    <code class="filename">/srv/www/htdocs/repo/</code> add the following snippet to
    <code class="filename">/etc/apache2/default-server.conf</code> (or the respetive
    virtual host configurtion in case you are running SMT on a virtual host):
   </p><div class="verbatim-wrap"><pre class="screen">&lt;Directory "/srv/www/htdocs/repo"&gt;
 Options FollowSymLinks
&lt;/Directory&gt;</pre></div><p>
    After having made the change, test the syntax and reload the Apache
    configuration files to activate the change:
   </p><div class="verbatim-wrap"><pre class="screen">rcapache2 configtest &amp;&amp; rcapache2 reload</pre></div></div></div><div class="sect1 " id="idm139994736443312"><div class="titlepage"><div><div><h2 class="title" id="idm139994736443312"><span class="number">3.4 </span><span class="name">The Structure of /srv/www/htdocs for SLE 12</span> <a title="Permalink" class="permalink" href="#idm139994736443312">#</a></h2></div></div></div><p>
   The repository structure in the <code class="filename">/srv/www/htdocs</code>
   directory matches the structure specified in SUSE Customer Center. There are the
   following directories in the structure (selected examples, similar for other
   products and architectures):
  </p><div class="verbatim-wrap"><pre class="screen">repo/SUSE/Products/SLE-SDK/12/x86_64/product/</pre></div><p>
   Contains the -POOL repository of SDK (the GA version of all packages).
  </p><div class="verbatim-wrap"><pre class="screen">repo/SUSE/Products/SLE-SDK/12/x86_64/product.license/</pre></div><p>
   Contains EULA associated with the product.
  </p><div class="verbatim-wrap"><pre class="screen">repo/SUSE/Updates/SLE-SDK/12/x86_64/update/
repo/SUSE/Updates/SLE-SDK/12/s390x/update/
repo/SUSE/Updates/SLE-SERVER/12/x86_64/update/</pre></div><p>
   Contain update repositories for respective products.
  </p><div class="verbatim-wrap"><pre class="screen">repo/full/SUSE/Updates/SLE-SERVER/12/x86_64/update/
repo/testing/SUSE/Updates/SLE-SERVER/12/x86_64/update/</pre></div><p>
   Contain repositories created for staging of respective
   repositories.
  </p></div><div class="sect1 " id="smt.mirroring.testenv"><div class="titlepage"><div><div><h2 class="title" id="smt.mirroring.testenv"><span class="number">3.5 </span><span class="name">Using the Test Environment</span> <a title="Permalink" class="permalink" href="#smt.mirroring.testenv">#</a></h2></div></div></div><p>
   You can mirror repositories to a test environment instead of the production
   environment. The test environment can be used with a limited number of
   client machines before the tested repositories are moved to the production
   environment. The test environment can be run on the main SMT server.
  </p><p>
   The testing environment uses the same structure as the production
   environment, but it is located in the
   <code class="filename">/srv/www/htdocs/repos/testing/</code> subdirectory.
  </p><p>
   To mirror a repository to the testing environment, you can use the
   <span class="guimenu">Staging</span> tab in the YaST SMT Management module, or the
   command <code class="command">smt-staging</code>.
  </p><p>
   To register a client in the testing environment, modify
   <code class="filename">/etc/SUSEConnect</code> on the client machine as follows:
  </p><div class="verbatim-wrap"><pre class="screen">namespace: testing</pre></div><p>
   To move the testing environment to the production environment, manually copy
   or move it using the <code class="command">cp -a</code> or <code class="command">mv</code>
   command.
  </p><p>
   You can enable <span class="quote">“<span class="quote">staging</span>”</span> for a repository in the
   <span class="guimenu">Repositories</span> tab of the SMT Management module or with
   the <code class="command">smt-repos</code> command. The mirroring happens
   automatically to <code class="filename">repo/full/</code>.
  </p><p>
   If you have an SLE11-based update repository with patches, SMT tools can
   be used to manage them. Using these tools, you can select patches and
   create a snapshot and copy it into <code class="filename">repo/testing/</code>. After
   tests are finished, you can copy the contents of
   <code class="filename">repo/testing</code> into the production area
   <code class="filename">/repo</code>.
  </p><p>
   SLE10-based update repositories are not supported by SMT tools. Not all of
   these repositories support selective staging. In this case, you must mirror
   the complete package.
  </p><p>
   Recommended workflow:
  </p><div class="verbatim-wrap"><pre class="screen">customer center =&gt; repo/full =&gt; repo/testing, =&gt; repo/production</pre></div></div><div class="sect1 " id="smt.staging"><div class="titlepage"><div><div><h2 class="title" id="smt.staging"><span class="number">3.6 </span><span class="name">Testing and Filtering Update Repositories with Staging</span> <a title="Permalink" class="permalink" href="#smt.staging">#</a></h2></div></div></div><p>
   You can test repositories on any clients using the
   <code class="command">smt-staging</code> command
   before moving them to the production environment. You can select new update
   repositories to be installed on clients.
  </p><p>
   You can either use the <code class="command">smt-staging</code> command or the YaST SMT Management module for staging. For more details, see
   <a class="xref" href="#smt.yast.staging.stage" title="4.3. Staging Repositories">Section 4.3, “Staging Repositories”</a>.
  </p><div class="figure" id="idm139994714424960"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_staging.png"><img src="images/smt_staging.png" width="" alt="SMT Staging Schema" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 3.1: </span><span class="name">SMT Staging Schema </span><a title="Permalink" class="permalink" href="#idm139994714424960">#</a></h6></div></div><p>
   Repositories with staging enabled are mirrored to the
   <code class="filename">/<em class="replaceable ">MIRRORTO</em>/repo/full</code>
   subdirectory. This subdirectory is usually not used by your clients.
   Incoming new updates are not automatically visible to the clients before you
   get a chance to test them. Later, you can generate a testing environment of
   this repository, which goes to the
   <code class="filename">/<em class="replaceable ">MIRRORTO</em>/repo</code> directory.
  </p><p>
   If you have an SLE 11-based update repository with patches, you can use
   SMT tools to manage them. Using these tools, you can select patches and
   create a snapshot and put it into <code class="filename">repo/testing/</code>. After
   tests are finished, you can put the content of
   <code class="filename">repo/testing</code> into the <code class="filename">/repo</code>
   production area called the <code class="literal">default</code> staging
   group. You can create additional staging groups as needed using the
   <code class="command">smt-staging creategroup</code> command.
  </p><div id="idm139994746607424" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: SLE 10-based Update Repositories</h6><p>
    SLE 10-based update repositories are not supported by SMT tools. Not all
    of these repositories support selective staging. In this case, you need to
    mirror the complete package.
   </p></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994746605648"><span class="term ">Enabling Staging</span></dt><dd><p>
      To enable or disable staging, use the <code class="command">smt-repos</code>
      command with the <code class="option">--enable-staging</code> or <code class="option">-s</code>
      options:
     </p><div class="verbatim-wrap"><pre class="screen">smt-repos --enable-staging</pre></div><p>
      You can enable the required repositories by entering the ID number or by
      entering the name and target. If you want to enable all repositories,
      enter <span class="guimenu">a</span>.
     </p></dd><dt id="idm139994746601008"><span class="term ">Generating Testing and Production Snapshots</span></dt><dd><p>
      To create the testing repository in the <code class="literal">default</code> staging
      group, run the following command:
     </p><div class="verbatim-wrap"><pre class="screen">smt-staging createrepo <em class="replaceable ">REPOSITORY_ID</em> -–testing</pre></div><p>
      You can then test the installation and functionality of the patches in
      testing clients. If testing was successful, create the
      production repository:
     </p><div class="verbatim-wrap"><pre class="screen">smt-staging createrepo <em class="replaceable ">REPOSITORY_ID</em> --production</pre></div><p>
      To create testing and production repositories in a named staging group,
      create the group and the repositories in this group:
     </p><div class="verbatim-wrap"><pre class="screen">smt-staging creategroup <em class="replaceable ">GROUPNAME</em> <em class="replaceable ">TESTINGDIR</em> <em class="replaceable ">PRODUCTIONDIR</em>
smt-staging createrepo --group <em class="replaceable ">GROUPNAME</em> <em class="replaceable ">REPOSITORY_ID</em> -–testing
SMT-STAGING createrepo --group <em class="replaceable ">GROUPNAME</em> <em class="replaceable ">REPOSITORY_ID</em> -–production</pre></div><p>
      This can be useful when you want to combine SLES11-SP1-Updates
      and SLES11-SP2-Updates of the <code class="literal">sle-11-x86_64</code>
      architecture into one repository of a group:
     </p><div class="verbatim-wrap"><pre class="screen">smt-staging creategroup SLES11SP1-SP2-Up test-sp1-sp2 prod-sp1-sp2
smt-staging createrepo --group SLES11SP1-SP2-Up \
  SLES11-SP1-Updates sle-11-x86_64 --testing
smt-staging createrepo --group SLES11SP1-SP2-Up \
  SLES11-SP2-Updates sle-11-x86_64 --testing
smt-staging createrepo --group SLES11SP1-SP2-Up \
  SLES11-SP1-Updates sle-11-x86_64 --production
smt-staging createrepo --group SLES11SP1-SP2-Up \
  SLES11-SP2-Updates sle-11-x86_64 --production</pre></div><p>
      Group names can contain the following characters: <code class="literal">-_</code>,
      <code class="literal">a-z A-Z</code>, and <code class="literal">0-9</code>.
     </p></dd></dl></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994742364160"><span class="term ">Filtering Patches</span></dt><dd><p>
      You can allow or forbid all or selected patches using the
      <code class="command">allow</code> or <code class="command">forbid</code> commands:
     </p><div class="verbatim-wrap"><pre class="screen">smt-staging forbid --patch <em class="replaceable ">ID</em>
smt-staging forbid --category <em class="replaceable ">CATEGORYNAME</em></pre></div></dd><dt id="idm139994717687840"><span class="term ">Signing Changed Repositories</span></dt><dd><p>
      Filtering one or more patches from a repository invalidates the original
      signature, and the repository needs to be signed again. The
      <code class="command">smt-staging createrepo</code> command does that
      automatically, provided you configure the SMT server.
     </p><p>
      To enable signing of changed metadata, the admin needs to generate a new
      signing key. This can be done with GPG like this:
     </p><div class="verbatim-wrap"><pre class="screen">mkdir <em class="replaceable ">DIR</em>
gpg --gen-key --homedir <em class="replaceable ">DIR</em>
sudo mv <em class="replaceable ">DIR</em> /var/lib/smt/.gnupg
sudo chown smt:users -R /var/lib/smt/.gnupg
sudo chmod go-rwx -R /var/lib/smt/.gnupg</pre></div><p>
      The ID of the newly generated key can be obtained using the <code class="command">gpg
      --gen-key</code> command. The ID must be added to the
      <code class="option">signingKeyID</code> option in the
      <code class="filename">/etc/smt.conf</code> file.
     </p><p>
      At this point, the clients are not aware of the new key. Import the
      new key to clients during their registration as follows:
     </p><div class="verbatim-wrap"><pre class="screen">sudo -u smt gpg --homedir /var/lib/smt/.gnupg \
  --export -a <em class="replaceable ">SIGNING_KEYID</em> \
  &gt; /<em class="replaceable ">MIRRORTO</em>/repo/keys/smt-signing-key.key</pre></div><p>
      In this example, <em class="replaceable ">MIRRORTO</em> is the base
      directory where repositories will be mirrored. After that, clients can
      import this key during the registration process.
     </p></dd><dt id="idm139994716758400"><span class="term ">Registering Clients in the Testing Environment</span></dt><dd><p>
      To register a client in the testing environment, modify the
      <code class="filename">/etc/SUSEConnect</code> file on the client machine:
     </p><div class="verbatim-wrap"><pre class="screen">namespace: testing</pre></div></dd></dl></div></div><div class="sect1 " id="smt.repo.preload"><div class="titlepage"><div><div><h2 class="title" id="smt.repo.preload"><span class="number">3.7 </span><span class="name">Repository Preloading</span> <a title="Permalink" class="permalink" href="#smt.repo.preload">#</a></h2></div></div></div><p>
   Deploying multiple SMT servers can take time if each new SMT server
   must mirror the same repositories.
  </p><p>
   To save time when deploying new SMT servers, the repositories can be preloaded
   from another server or disk instead. To do this, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Enable the repositories to be mirrored with the SMT, for example:
    </p><div class="verbatim-wrap"><pre class="screen">smt-repos -e SLES12-Updates sle-12_x86_64</pre></div></li><li class="step "><p>
     Perform a dry run of <code class="command">smt-mirror</code> to create the required repository
     directories:
    </p><div class="verbatim-wrap"><pre class="screen">smt-mirror -d --dryrun -L /var/log/smt/smt-mirror.log</pre></div><p>
     The following directories are created based on the repository above and the default <code class="option">MirrorTo</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/srv/www/htdocs/repo/repoindex.xml
/srv/www/htdocs/repo/$RCE/SLES12-Updates/sle-12-x86_64/*</pre></div></li><li class="step "><p>
     Then copy the repositories from another SMT server, for
     example:
    </p><div class="verbatim-wrap"><pre class="screen">rsync -av 'smt12:/srv/www/htdocs/repo/\$RCE/SLES12-Updates/sle-12-x86_64/' \
 '/srv/www/htdocs/repo/$RCE/SLES12-Updates/sle-12-x86_64/'</pre></div></li><li class="step "><p>
     To get the repository data fixed, run the following command:
    </p><div class="verbatim-wrap"><pre class="screen">smt-mirror -d -L /var/log/smt/smt-mirror.log</pre></div></li></ol></div></div><div id="idm139994715941680" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Possible Error Messages</h6><p>
    Errors, such as <code class="literal">repomd.xml is the same, but repo is
    not valid. Start mirroring.</code>, are considered normal.
 They occur because the metadata of the preloaded repositories in
 the server's database remains incorrect until the initial mirror of the repositories has completed.
   </p></div></div></div><div class="chapter " id="smt.management"><div class="titlepage"><div><div><h1 class="title"><span class="number">4 </span><span class="name">Managing Repositories with YaST SMT Server Management</span> <a title="Permalink" class="permalink" href="#smt.management">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_management.xml</li><li><span class="ds-label">ID: </span>smt.management</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.yast.staging.starting"><span class="number">4.1 </span><span class="name">Starting SMT Management Module</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.viewing"><span class="number">4.2 </span><span class="name">Viewing and Managing Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.stage"><span class="number">4.3 </span><span class="name">Staging Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.client"><span class="number">4.4 </span><span class="name">Jobs and Client Status Monitoring</span></a></span></dt></dl></div></div><p>
  The YaST SMT Server Management module is designed to perform daily
  management tasks. It can be used to enable and disable the mirroring of
  repositories, the staging flag for repositories, and perform the
  mirroring and staging.
 </p><div class="sect1 " id="smt.yast.staging.starting"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.staging.starting"><span class="number">4.1 </span><span class="name">Starting SMT Management Module</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.starting">#</a></h2></div></div></div><p>
   SMT Management is a YaST module. There are two ways to start the module:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Start YaST and select <span class="guimenu">Network Services</span>, then
     <span class="guimenu">SMT Server Management</span>
    </p></li><li class="listitem "><p>
     Run the  <code class="command">yast2 smt</code> command in the terminal as <code class="systemitem">root</code>
    </p></li></ul></div><p>
   This opens the SMT Management application window and switches to the
   <span class="guimenu">Repositories</span> section.
  </p><div class="figure" id="idm139994744474880"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_repos.png"><img src="images/smt_repos.png" width="" alt="List of Repositories" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.1: </span><span class="name">List of Repositories </span><a title="Permalink" class="permalink" href="#idm139994744474880">#</a></h6></div></div></div><div class="sect1 " id="smt.yast.staging.viewing"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.staging.viewing"><span class="number">4.2 </span><span class="name">Viewing and Managing Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.viewing">#</a></h2></div></div></div><p>
   In the <span class="guimenu">Repositories</span> section, you can see the list of all
   available package repositories for SMT. For each repository, the list
   shows the repository's name, target product and architecture, mirroring and
   staging flag, date of last mirroring, and a short description. Sort
   the list by clicking the desired column header, and scroll the list items
   using the scrollbar on the right side.
  </p><div class="sect2 " id="smt.yast.staging.viewing.filter"><div class="titlepage"><div><div><h3 class="title" id="smt.yast.staging.viewing.filter"><span class="number">4.2.1 </span><span class="name">Filtering Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.viewing.filter">#</a></h3></div></div></div><p>
    You can also filter out groups of repositories using the <span class="guimenu">Repository
    Filter</span> text box. Enter the desired filter term and click
    <span class="guimenu">Filter</span> to see only the matching entries. To cancel the
    current filter and display all repositories, clear the <span class="guimenu">Repository
    Filter</span> field and click <span class="guimenu">Filter</span>.
   </p><div class="figure" id="idm139994738260720"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_repo_filter.png"><img src="images/smt_repo_filter.png" width="" alt="Repository Filter" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.2: </span><span class="name">Repository Filter </span><a title="Permalink" class="permalink" href="#idm139994738260720">#</a></h6></div></div></div><div class="sect2 " id="smt.yast.staging.viewing.mirror"><div class="titlepage"><div><div><h3 class="title" id="smt.yast.staging.viewing.mirror"><span class="number">4.2.2 </span><span class="name">Mirroring Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.viewing.mirror">#</a></h3></div></div></div><p>
    Before you can offer package repositories, you need to create a
    local mirror of their packages. To do this, follow the procedure below.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      From the list, select the line containing the name of the repository you
      want to mirror.
     </p></li><li class="step "><p>
      Click the selected line to highlight it.
     </p></li><li class="step "><p>
      Click the <span class="guimenu">Toggle Mirroring</span> button in the lower-left
      part of the window. This enables the option in the <span class="guimenu">Mirroring</span> column of the
      selected repository. If the repository was already
      selected for mirroring, clicking the <span class="guimenu">Toggle Mirroring</span>
      button disables the mirroring.
     </p></li><li class="step "><p>
      Hit the <span class="guimenu">Mirror Now</span> button to mirror the repository.
     </p></li><li class="step "><p>
      A pop-up window appears with the information about mirroring status and
      result.
     </p></li><li class="step "><p>
      Click <span class="guimenu">OK</span> to refresh the list of repositories.
     </p></li></ol></div></div><div class="figure" id="idm139994716699600"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_mirroring-done.png"><img src="images/smt_mirroring-done.png" width="" alt="Status of Mirroring Process" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.3: </span><span class="name">Status of Mirroring Process </span><a title="Permalink" class="permalink" href="#idm139994716699600">#</a></h6></div></div></div></div><div class="sect1 " id="smt.yast.staging.stage"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.staging.stage"><span class="number">4.3 </span><span class="name">Staging Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.stage">#</a></h2></div></div></div><p>
   After the mirroring is finished, you can stage the mirrored repositories. In
   SMT, <span class="emphasis"><em>staging</em></span> is a process where you create either
   testing or production repositories based on the mirrored ones. The testing
   repository helps you examine the repository and its packages before you make
   them available in a production environment. To make repositories available
   for staging, follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     From the repository list, select the line containing the name of the
     repository you want to manage.
    </p></li><li class="step "><p>
     Click the selected line to highlight it.
    </p></li><li class="step "><p>
     Click the <span class="guimenu">Toggle Staging</span> button next to the
     <span class="guimenu">Toggle Mirroring</span> button. This enables the option in
     the <span class="guimenu">Staging</span> column of the selected repository. If the
     repository was already selected for staging before, clicking the
     <span class="guimenu">Toggle Staging</span> button disables staging.
    </p></li><li class="step "><p>
     Repeat steps 1 to 3 for all directories you want to stage.
    </p></li></ol></div></div><div id="idm139994742744128" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Toggle Staging Button Not Active</h6><p>
    You can only stage the repositories that were previously selected for
    mirroring. Otherwise, the <span class="guimenu">Toggle Staging</span>
    button will disabled.
   </p></div><p>
   After you have mirrored the repositories and made them available for staging, click
   the <span class="guimenu">Staging</span> tab. In the upper-left part of the window,
   you will find the <span class="guimenu">Repository Name</span> drop-down box
   containing all repositories available for staging. The repository names there
   have the name of the attached staging group. Select the group
   you want to stage, and you should see a list of packages in this repository.
   For each patch, there is information about the patch name, its version and category, testing and
   production flags, and a short summary.
  </p><p>
   Next to the <span class="guimenu">Repository Name</span> drop-down box, there is a
   <span class="guimenu">Patch Category</span> filter. It can be used for listing only the
   patches that belong to one of the predefined categories.
  </p><p>
   If the selected repository allows for patch filtering, you can toggle the
   status flag for individual patches. This is done by clicking the <span class="guimenu">Toggle
   Patch Status</span> button.
  </p><p>
   Before creating a repository of packages that are available in the
   <span class="emphasis"><em>production</em></span> environment, you need to create and test the
   <span class="emphasis"><em>testing</em></span> repository. Select the <span class="guimenu">From Full Mirror to
   Testing</span> item from the <span class="guimenu">Create Snapshot</span> drop-down
   list. A small pop-up window appears informing you
   about the staging process. After the testing repository snapshot has been created,
   you should see the appropriate options enabled in the <span class="guimenu">Testing</span> column.
  </p><div class="figure" id="idm139994747452496"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_staging1.png"><img src="images/smt_staging1.png" width="" alt="Testing Created Snapshot" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.4: </span><span class="name">Testing Created Snapshot </span><a title="Permalink" class="permalink" href="#idm139994747452496">#</a></h6></div></div><div id="idm139994747447488" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Creating a Production Snapshot</h6><p>
    After you have enabled <span class="emphasis"><em>staging</em></span> for an update repository, you
    need to create its <span class="emphasis"><em>production</em></span> snapshot to make it
    available to the clients. Otherwise, the clients cannot find
    the update repository.
   </p></div><p>
   Select the <span class="guimenu">From Testing to Production</span>
   item from the <span class="guimenu">Create Snapshot</span>
   drop-down box. A small pop-up window appears informing you about linking the
   testing repository to the production one. After the production snapshot has been
   created, you should see the appropriate options enabled in the <span class="guimenu">Production</span>
   column. Also, a green check mark appears in the <span class="guimenu">Repository Name</span> drop-down box.
  </p></div><div class="sect1 " id="smt.yast.staging.client"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.staging.client"><span class="number">4.4 </span><span class="name">Jobs and Client Status Monitoring</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.client">#</a></h2></div></div></div><p>
   For each client that is registered against the SMT server, SMT creates a
   job queue. To use the job queue, you need to install the
   <code class="systemitem">smt-client</code> package on the client. During the
   installation of the <code class="systemitem">smt-client</code> package, a cron job
   is created that runs the client executable
   <code class="command">/usr/sbin/smt-agent</code> every three hours. The
   agent then asks the server if it has any jobs in the queue belonging to this
   client and executes these jobs. When there are no more jobs in the queue,
   the agent terminates completely. It is important to understand that jobs are
   not pushed directly to the clients when they get created. They are not
   executed until the client asks for them at the intervals specified in the cron job.
   Therefore, from the time a job is created on the server until it is executed on the
   client, a delay of several hours may occur.
  </p><p>
   Every job can have a parent job. This means that the child job only runs
   after the parent job has successfully finished. It is also possible to configure
   advanced timing and recurrence and persistence of jobs. You can find more
   details about SMT jobs in <a class="xref" href="#smt.scripts.job" title="7.1.2.3. smt-job">Section 7.1.2.3, “smt-job”</a>.
  </p><p>
   When creating jobs, you need to specify the GUID of the target clients using
   the <code class="option">-g <em class="replaceable ">GUID</em></code> parameter. Although
   the <code class="option">-g</code> parameter can be specified multiple times in a
   single command, you cannot use wild cards to assign a job to all
   clients.
  </p><p>
   Currently, the following types of jobs are available:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994742434672"><span class="term ">Execute</span></dt><dd><p>
      Run commands on the client
     </p></dd><dt id="idm139994742432864"><span class="term ">Eject</span></dt><dd><p>
      Open, close, or toggle the CD tray of the client
     </p></dd><dt id="idm139994714400304"><span class="term ">Patchstatus</span></dt><dd><p>
      Report the status of installed patches
     </p></dd><dt id="idm139994714398480"><span class="term ">Reboot</span></dt><dd><p>
      Reboot the client
     </p></dd><dt id="idm139994714396672"><span class="term ">Softwarepush</span></dt><dd><p>
      Install packages
     </p></dd><dt id="idm139994714394864"><span class="term ">Update</span></dt><dd><p>
      Install available updates
     </p></dd></dl></div><div id="idm139994714392896" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Default Job Types</h6><p>
    By default only <code class="literal">softwarepush</code>, <code class="literal">patchstatus</code>, and <code class="literal">update</code> jobs are
    allowed. To allow more types of jobs, append the job type to the
    <code class="literal">ALLOWED_AGENTS</code> list in
    <code class="filename">/etc/sysconfig/smt-client</code>.
   </p></div><p>
   All clients that register against the SMT server automatically get a
   persistent <code class="literal">patchstatus</code> job added to their job queue. This
   is also the case for
   clients without the <code class="systemitem">smt-clients</code> package (SUSE Linux Enterprise 10 and
   older, or non-SUSE based distributions). These clients appear with the
   <code class="literal">Unknown</code> patchstatus in the client lists. The <code class="literal">patchstatus</code> jobs for
   such clients are not required, and clients can safely be deleted to clean
   up the output of <code class="command">smt-job</code>. Keep in mind that if you
   update a machine to SUSE Linux Enterprise 11 or later, you need to create the
   <code class="literal">patchstatus</code> job manually.
  </p><p>
   Whenever the client runs a <code class="literal">patchstatus</code> job, it compares the currently
   installed updates with what is available in the repositories on the SMT
   server. The job then reports back the number of missing patches that need to
   be installed in each of the four categories:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Security
    </p></li><li class="listitem "><p>
     Package Manager
    </p></li><li class="listitem "><p>
     Recommended
    </p></li><li class="listitem "><p>
     Optional
    </p></li></ul></div><div id="idm139994742120960" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: The <code class="option">--agreelicense</code> Option</h6><p>
    To install a package and its dependencies, the job type <code class="literal">softwarepush</code> is
    used. When creating this type of job, it is a good idea to use the
    <code class="option">--agreelicense</code> option. If a
    package displays a license agreement and expects it to be accepted, the job
    will skip the package if <code class="option">--agreelicense</code> is not
    specified. The <code class="command">smt-client</code> command forwards the installation
    process to <code class="command">zypper</code>, which does not consider a failed
    acceptance of a license agreement to be an error. This results in the job
    being completed successfully, even if the package is not installed. Using the
    <code class="option">--agreelicense</code> option prevents this from happening.
   </p></div><div class="sect2 " id="smt.yast.staging.client.yast"><div class="titlepage"><div><div><h3 class="title" id="smt.yast.staging.client.yast"><span class="number">4.4.1 </span><span class="name">Checking the Client Status with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.client.yast">#</a></h3></div></div></div><p>
    The <span class="guimenu">Clients Status</span> section of the <span class="guimenu">SMT
    Management</span> window provides the status information about all the
    clients that use the repositories on your SMT server. This information
    consists of two main parts: the list of the clients and the detailed information.
   </p><p>
    You can see the client's host name, the date and time of the last network
    contact with the SMT server, and its update status. The update status can
    be one of the following:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994747013536"><span class="term ">Up-to-date</span></dt><dd><p>
       The client packages are updated to their last version available in the
       production repository
      </p></dd><dt id="idm139994747011648"><span class="term ">Updates available</span></dt><dd><p>
       This status means that there are updates available for the client that
       are either <code class="literal">optional</code> or
       <code class="literal">recommended</code>
      </p></dd><dt id="idm139994747008880"><span class="term ">Critical</span></dt><dd><p>
       Either <code class="literal">security</code> patches or <code class="literal">package
       manager</code> patches are available for the client
      </p></dd></dl></div><p>
    Detailed information about the selected client is available in the lower
    part of the window. This usually includes extended status
    information and detailed information about the number and types of
    available updates.
   </p><div class="figure" id="idm139994714674480"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_clients_status.png"><img src="images/smt_clients_status.png" width="" alt="Clients Status" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.5: </span><span class="name">Clients Status </span><a title="Permalink" class="permalink" href="#idm139994714674480">#</a></h6></div></div><p>
    The date and time in the <span class="guimenu">Last Contact</span> column is the
    last time contact of the server—even if it only ran the regular
    registration update script. This date is not the date of the last
    'patchstatus' report. The <code class="command">smt-client</code> command-line tool
    prints the correct date and calls it <code class="literal">Patch Status Date</code>.
    The <code class="command">smt-client -v</code> command prints both dates: the
    <code class="literal">patchstatus</code> date
    and the last contact of the client system.
   </p><div id="idm139994714666496" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Hidden Patches</h6><p>
     Some patches may not be visible if they are required by other patches that
     are only shown as available after the package manager patch or patches
     have been installed.
    </p></div></div></div></div><div class="chapter " id="smt.registration"><div class="titlepage"><div><div><h1 class="title"><span class="number">5 </span><span class="name">Managing Client Machines with SMT</span> <a title="Permalink" class="permalink" href="#smt.registration">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_registration.xml</li><li><span class="ds-label">ID: </span>smt.registration</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.registration.clients"><span class="number">5.1 </span><span class="name">Listing Registered Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.delete"><span class="number">5.2 </span><span class="name">Deleting Registrations</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.smtregister"><span class="number">5.3 </span><span class="name">Manual Registration of Clients at SUSE Customer Center</span></a></span></dt><dt><span class="sect1"><a href="#smt.registrations.schedule"><span class="number">5.4 </span><span class="name">Scheduling Periodic Registrations of Clients at SUSE Customer Center</span></a></span></dt><dt><span class="sect1"><a href="#smt.registrations.compliance"><span class="number">5.5 </span><span class="name">Compliance Monitoring</span></a></span></dt></dl></div></div><p>
  SMT lets you register and manage client machines on SUSE Customer Center. Client machines
  must be configured to use SMT. For information about configuring clients to
  use SMT, see <a class="xref" href="#smt.client" title="Chapter 8. Configuring Clients to Use SMT">Chapter 8, <em>Configuring Clients to Use SMT</em></a>.
 </p><div class="sect1 " id="smt.registration.clients"><div class="titlepage"><div><div><h2 class="title" id="smt.registration.clients"><span class="number">5.1 </span><span class="name">Listing Registered Clients</span> <a title="Permalink" class="permalink" href="#smt.registration.clients">#</a></h2></div></div></div><p>
   To list SMT-registered client machines, use the
   <code class="command">smt-list-registrations</code> command. The following information
   is listed for each client: its <span class="guimenu">Unique ID</span>,
   <span class="guimenu">Hostname</span>, date and time of <span class="guimenu">Last
   Contact</span> with the SMT server, and the Software
   <span class="guimenu">Product</span> the client uses.
  </p></div><div class="sect1 " id="smt.registration.delete"><div class="titlepage"><div><div><h2 class="title" id="smt.registration.delete"><span class="number">5.2 </span><span class="name">Deleting Registrations</span> <a title="Permalink" class="permalink" href="#smt.registration.delete">#</a></h2></div></div></div><p>
   To delete a registration from SMT and SUSE Customer Center, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen">smt-delete-registration -g
<em class="replaceable ">Client_ID</em></pre></div><p>
   To delete multiple registrations, the option <code class="option">-g</code> can be used
   several times.
  </p><p>
   The ID of the client machine to be deleted can be determined from the output
   of the <code class="command">smt-list-registrations</code> command.
  </p></div><div class="sect1 " id="smt.registration.smtregister"><div class="titlepage"><div><div><h2 class="title" id="smt.registration.smtregister"><span class="number">5.3 </span><span class="name">Manual Registration of Clients at SUSE Customer Center</span> <a title="Permalink" class="permalink" href="#smt.registration.smtregister">#</a></h2></div></div></div><p>
   The <code class="command">smt-register</code> command registers clients at SUSE Customer Center. This
   registers all unregistered clients and clients with data that changed
   since the last registration.
  </p><p>
   To register clients whose registration has failed, use the
   <code class="option">--reseterror</code> option. This option resets the SCC
   registration error flag and tries to submit registrations again.
  </p></div><div class="sect1 " id="smt.registrations.schedule"><div class="titlepage"><div><div><h2 class="title" id="smt.registrations.schedule"><span class="number">5.4 </span><span class="name">Scheduling Periodic Registrations of Clients at SUSE Customer Center</span> <a title="Permalink" class="permalink" href="#smt.registrations.schedule">#</a></h2></div></div></div><p>
   SMT module allows for the easy scheduling of client registrations. By
   default, registrations are scheduled to run every 15 minutes. To create or
   modify a new registration schedule, follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST <span class="guimenu">SMT Configuration</span> module (<code class="command">yast2
     smt-server</code>).
    </p></li><li class="step "><p>
     Go to the <span class="guimenu">Scheduled SMT Job</span>.
    </p></li><li class="step "><p>
     Select any <span class="guimenu">SCC Registration</span> job and click
     <span class="guimenu">Edit</span> to change its schedule.
    </p><p>
     To create a new registration schedule, click <span class="guimenu">Add</span> and
     select <span class="guimenu">SCC Registration</span> as <span class="guimenu">Job to
     Run</span>.
    </p></li><li class="step "><p>
     Choose the <span class="guimenu">Frequency</span> of the scheduled SMT job. You
     can perform jobs <span class="guimenu">Daily</span>, <span class="guimenu">Weekly</span>,
     <span class="guimenu">Monthly</span>, or <span class="guimenu">Periodically</span> (every n-th
     hour or every m-th minute).
    </p><p>
     Set the <span class="guimenu">Job Start Time</span> by entering the
     <span class="guimenu">Hour</span> and <span class="guimenu">Minute</span> or appropriate time periods. For weekly and monthly
     schedules, select the <span class="guimenu">Day of the Week</span> or the
     <span class="guimenu">Day of the Month</span> the mirroring should occur.
    </p><div id="idm139994715121296" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Lowest Registration Frequency</h6><p>
      Do not set the frequency lower than 10 minutes, because the maximum value
      of the <code class="literal">rndRegister</code> is 450 (7.5 minutes). If the
      frequency is lower, it may happen that the started process is still
      sleeping when the next process starts. This causes the second request
      to exit.
     </p></div></li><li class="step "><p>
     Click <span class="guimenu">OK</span> or <span class="guimenu">Add</span> and
     <span class="guimenu">Finish</span>.
    </p></li></ol></div></div><p>
   Scheduling of SMT jobs in general is covered in
   <a class="xref" href="#smt.yast.scheduling" title="2.5. Setting the SMT Job Schedule with YaST">Section 2.5, “Setting the SMT Job Schedule with YaST”</a>.
  </p><p>
   YaST uses <code class="command">cron</code> to schedule SUSE Customer Center registrations and
   other SMT jobs. If you prefer not  to use YaST, you can use
   <code class="command">cron</code> directly.
  </p><p>
   To disable automatic registration, change the
   <code class="option">forwardRegistration</code> value in the <code class="literal">[LOCAL]</code>
   section of the <code class="filename">/etc/smt.conf</code> configuration file to
   <code class="literal">false</code>.
  </p></div><div class="sect1 " id="smt.registrations.compliance"><div class="titlepage"><div><div><h2 class="title" id="smt.registrations.compliance"><span class="number">5.5 </span><span class="name">Compliance Monitoring</span> <a title="Permalink" class="permalink" href="#smt.registrations.compliance">#</a></h2></div></div></div><p>
   To assist customers in monitoring their license compliance, SMT generates
   a weekly report based on data from SMT and SUSE Customer Center. This report contains
   information about statistics of the registered machines, products used, and
   of the active, expiring or missing license subscriptions. If subscriptions
   are about to expire and/or more SUSE Linux Enterprise machines are registered than you have
   purchased licenses for, the report contains relevant warnings.
  </p><p>
   To calculate the compliance, the <code class="command">smt-report</code> tool
   by default downloads information about the subscriptions and registrations
   (this can be disabled).
  </p><p>
   You can configure the recipient addresses for the reports in the
   <span class="guimenu">Database and Reporting</span> section of the YaST
   <span class="guimenu">Subscription Management Tool</span> configuration module. All of
   the e-mail configuration options are located in the
   <code class="literal">[REPORT]</code> section of <code class="filename">/etc/smt.conf</code>
   and explained in <a class="xref" href="#smt.config.smtconf.report" title="7.2.1.6. [REPORT] Section of /etc/smt.conf">Section 7.2.1.6, “[REPORT] Section of /etc/smt.conf”</a>.
  </p><p>
   The scheduling of the reports is configured in
   <code class="filename">/etc/cron.d/novell.com-smt</code>, while the parameters to use
   with the cron jobs are in the <code class="literal">REPORT_PARAMS</code> section of
   <code class="filename">/etc/smt.d/smt-cron.conf</code>.
  </p><p>
   Describing the content of the reports is beyond the scope of this section,
   but a set of reports can be split into five individual parts. By default,
   these reports are attached as individual files to the mail on the weekly
   report run. The alerts report is a normal text file while the others are in
   CSV format. The reports can also be created in PDF or XML by specifying
   <code class="option">--pdf</code> or <code class="option">--xml</code> as output format.
  </p><p>
   To generate a set of reports as CSV files based on local data and to display
   them in the standard output, run the following command:
  </p><div class="verbatim-wrap"><pre class="screen">smt-report --local --csv --file /root/smt-local-rep</pre></div><div id="idm139994716576000" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Directory for Reports</h6><p>
    The example stores the reports in the <code class="filename">/root</code> directory.
    You can change it to any other writable directory.
   </p></div><p>
   The command generates the following files:
  </p><div class="verbatim-wrap"><pre class="screen">/root/smt-local-rep-product_subscription_active.csv
/root/smt-local-rep-product_subscription_alerts.txt
/root/smt-local-rep-product_subscription_expired.csv
/root/smt-local-rep-product_subscription_expiresoon.csv
/root/smt-local-rep-product_subscription_summary.csv</pre></div><div id="idm139994743165504" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Multiple SMT Servers</h6><p>
    If you have multiple SMT servers, the
    reports may not include  all SMT servers or machines in your
    environment. For the complete statistics of all your registered machines,
    refer to the information provided by SUSE Customer Center.
   </p></div><p>
   For more information about types of reports, output formats, and targets
   refer to <a class="xref" href="#smt.reporting" title="Chapter 6. SMT Reports">Chapter 6, <em>SMT Reports</em></a>.
  </p></div></div><div class="chapter " id="smt.reporting"><div class="titlepage"><div><div><h1 class="title"><span class="number">6 </span><span class="name">SMT Reports</span> <a title="Permalink" class="permalink" href="#smt.reporting">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_reporting.xml</li><li><span class="ds-label">ID: </span>smt.reporting</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#idm139994743157664"><span class="number">6.1 </span><span class="name">Report Schedule and Recipients</span></a></span></dt><dt><span class="sect1"><a href="#idm139994740379920"><span class="number">6.2 </span><span class="name">Report Output Formats and Targets</span></a></span></dt></dl></div></div><p>
  This chapter explains how to generate reports using the data from the SMT and SUSE
  Customer Center. These reports contain statistics of all the
  registered machines, products used and all active, expiring or missing
  subscriptions.
 </p><div id="idm139994743159248" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Assignment of Reports</h6><p>
   If you are using more than one SMT server,
   generated reports may not include all SMT servers or machines
   in your environment. For the complete statistics of all your registered
   machines, refer to the information in the SUSE Customer Center.
  </p></div><div class="sect1 " id="idm139994743157664"><div class="titlepage"><div><div><h2 class="title" id="idm139994743157664"><span class="number">6.1 </span><span class="name">Report Schedule and Recipients</span> <a title="Permalink" class="permalink" href="#idm139994743157664">#</a></h2></div></div></div><p>
   Generated SMT reports can be periodically sent to a list of specified e-mail
   addresses. To create or edit this list and to set the frequency of
   the reports, use the YaST SMT Configuration module. How to configure
   this list is described in <a class="xref" href="#smt.yast.reports" title="2.4. Setting E-mail Addresses to Receive Reports with YaST">Section 2.4, “Setting E-mail Addresses to Receive Reports with YaST”</a>.
   Configuration of the report schedule is covered in
   <a class="xref" href="#smt.yast.scheduling" title="2.5. Setting the SMT Job Schedule with YaST">Section 2.5, “Setting the SMT Job Schedule with YaST”</a>.
  </p><p>
   The list can also be edited manually in the <code class="option">reportEmail</code>
   part of the <code class="filename">/etc/smt.conf</code> configuration file. For
   more information about manually editing the list of addresses, see
   <a class="xref" href="#smt.config.smtconf.report" title="7.2.1.6. [REPORT] Section of /etc/smt.conf">Section 7.2.1.6, “[REPORT] Section of /etc/smt.conf”</a>. To set the frequency of
   reports manually, you can edit the
   <code class="filename">smt-gen-report</code> lines of the crontab in
   <code class="filename">/etc/cron.d/novell.com-smt</code>. For more information
   about the crontab format, see <code class="command">man 5 crontab</code>.
  </p><p>
   Reports, including those generated as a scheduled SMT job, are created by
   the <code class="command">smt-report</code> command. This command supports various
   parameters. To edit parameters used with scheduled commands, edit the
   <code class="filename">/etc/smt.d/smt-cron.conf</code> configuration file. For
   more information, see <a class="xref" href="#smt.config.cronconf" title="7.2.2. /etc/smt.d/smt-cron.conf">Section 7.2.2, “/etc/smt.d/smt-cron.conf”</a>.
  </p></div><div class="sect1 " id="idm139994740379920"><div class="titlepage"><div><div><h2 class="title" id="idm139994740379920"><span class="number">6.2 </span><span class="name">Report Output Formats and Targets</span> <a title="Permalink" class="permalink" href="#idm139994740379920">#</a></h2></div></div></div><p>
   SMT reports can be printed to the standard output, exported to one or
   multiple files (in the CSV format), and mailed to a specified list of
   e-mail addresses. The following parameters can be used with the
   <code class="command">smt-report</code> command:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994740377776"><span class="term "><code class="option">--quiet</code> or <code class="option">-q</code>
    </span></dt><dd><p>
      Suppress output to STDOUT and run <code class="command">smt-report</code> in
      quiet mode.
     </p></dd><dt id="idm139994740374752"><span class="term "><code class="option">--file</code> or <code class="option">-F</code>
    </span></dt><dd><p>
      Export the report to one or several files. By default, the report is
      written to a single file, with the results formatted as tables. Optionally, the file name
      or whole path may be specified after the parameter: <code class="option">--file
      <em class="replaceable ">FILENAME</em></code>. If no file name is
      specified, the default file name containing a time stamp is used. However,
      SMT will not check if the file or files already exist.
     </p><p>
      In the CSV (Comma-Separated Value) mode, the report is written to
      multiple files, therefore the specified file name expands to
      <code class="filename"><em class="replaceable ">[PATH/]FILENAME</em>-<em class="replaceable ">reportname</em>.<em class="replaceable ">extension</em></code>
      for every report.
     </p></dd><dt id="idm139994744463712"><span class="term "><code class="option">--csv</code> or <code class="option">-c</code>
    </span></dt><dd><p> The report is exported to multiple files in the CSV format.
            The first line of each *.csv file consists of the column
            names. It is recommended
            to use the <code class="option">--csv</code> parameter together with
            the <code class="option">--file</code> parameter. If the specified file
            name contains a <code class="literal">.csv</code> extension, the
            report format will be CSV (as if the <code class="option">--csv</code>
            parameter was used). </p></dd><dt id="idm139994744459072"><span class="term "><code class="option">--mail</code> or <code class="option">-m</code>
    </span></dt><dd><p>
      Send the report to the addresses configured using the
      YaST SMT Configuration module and stored in
      <code class="filename">/etc/smt.conf</code>. The report is rendered as
      tables.
     </p></dd><dt id="idm139994744455968"><span class="term "><code class="option">--attach</code> or <code class="option">-a</code>
    </span></dt><dd><p>
      Attach the report to the mails in the CSV format. This option should only
      be used in combination with the <code class="option">--mail</code> option.
     </p></dd><dt id="idm139994744452896"><span class="term "><code class="option">--pdf</code>
    </span></dt><dd><p>
      The report is exported to multiple files in the PDF format.
     </p></dd><dt id="idm139994714589200"><span class="term "><code class="option">--xml</code>
    </span></dt><dd><p>
      The report is exported to multiple files in the XML format.
     </p></dd></dl></div><div id="idm139994714586896" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Disabling Sending Attachments</h6><p>
    To disable sending CSV attachments with report mails, edit
    the <code class="filename">/etc/smt.d/smt-cron.conf</code> configuration file as
    follows: remove the <code class="option">--attach</code> option from the
    <code class="literal">REPORT_PARAMS</code> value. The default line reads:
    <code class="literal">REPORT_PARAMS="--mail --attach -L
    /var/log/smt-report.log"</code>. To disable CSV attachments, change
    it to: <code class="literal">REPORT_PARAMS="--mail -L
    /var/log/smt-report.log"</code>.
   </p><p>
    If you have disabled CSV attachments but need them occasionally, you can
    send them manually with the <code class="command">smt-report --mail --attach -L
    /var/log/smt-report.log</code> command.
   </p></div></div></div><div class="chapter " id="smt.tools"><div class="titlepage"><div><div><h1 class="title"><span class="number">7 </span><span class="name">SMT Tools and Configuration Files</span> <a title="Permalink" class="permalink" href="#smt.tools">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_tools.xml</li><li><span class="ds-label">ID: </span>smt.tools</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.scripts"><span class="number">7.1 </span><span class="name">Important Scripts and Tools</span></a></span></dt><dt><span class="sect1"><a href="#idm139994738491808"><span class="number">7.2 </span><span class="name">SMT Configuration Files</span></a></span></dt><dt><span class="sect1"><a href="#smt.tools.cert"><span class="number">7.3 </span><span class="name">Server Certificates</span></a></span></dt></dl></div></div><p>
  This chapter describes the most important scripts, configuration files and
  certificates shipped with SMT.
 </p><div class="sect1 " id="smt.scripts"><div class="titlepage"><div><div><h2 class="title" id="smt.scripts"><span class="number">7.1 </span><span class="name">Important Scripts and Tools</span> <a title="Permalink" class="permalink" href="#smt.scripts">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_scripts.xml</li><li><span class="ds-label">ID: </span>smt.scripts</li></ul></div></div></div></div><p>
  There are two important groups of SMT commands: The
  <code class="command">smt</code> command and its sub-commands are used for managing
  the mirroring of updates, registration of clients, and reporting. The
  <code class="systemitem">systemd</code> <code class="systemitem">smt.target</code> is used for starting,
  stopping, restarting the SMT service and services that SMT depends on,
  and for checking their status.
 </p><div class="sect2 " id="smt.scripts.que"><div class="titlepage"><div><div><h3 class="title" id="smt.scripts.que"><span class="number">7.1.1 </span><span class="name">SMT JobQueue</span> <a title="Permalink" class="permalink" href="#smt.scripts.que">#</a></h3></div></div></div><p>
   Since SUSE Linux Enterprise version 11, there is a new SMT service called SMT
   JobQueue for delegating <span class="emphasis"><em>jobs</em></span> to the
   registered clients.
  </p><p>
   To enable JobQueue, the <code class="systemitem">smt-client</code> package needs
   to be installed on the SMT client. The client then pulls jobs from the
   server via a cron job (every 3 hours by default). The list of jobs is
   maintained on the server. Jobs are not pushed directly to the clients and
   processed immediately: instead, the client asks for them. Therefore, a delay
   of several hours may occur.
  </p><p> Every job can have its parent job, which sets a dependency. The
      child job only runs after the parent job successfully finished.
      Job timing is also possible: a job can have a start time and an
      expiration time to define its earliest execution time or the time
      the job will expire. A job may also be persistent. It is run
      repeatedly with a delay. For example, a patch status job is a
      persistent job that runs once a day. For each client, a patch
      status job is automatically generated after it registers
      successfully against an SMT 11 server. The <code class="literal">patchstatus</code>
      information can be queried with the <code class="command">smt-client</code>
      command. For already registered clients, you can add <code class="literal">patchstatus</code>
      jobs manually with the <code class="command">smt-job</code> command. </p><p>
   You can edit, list, create, and delete the jobs using the
   <code class="command">smt-job</code> command-line tool. For more
   details on <code class="command">smt-job</code>, see
   <a class="xref" href="#smt.scripts.job" title="7.1.2.3. smt-job">Section 7.1.2.3, “smt-job”</a>.
  </p><div id="idm139994747694832" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Overriding the Automatic Creation of Patch Status Jobs</h6><p>
    When creating a software push or an update job, normally a
    non-persistent patch status job is added automatically. The
    parent ID is set to the ID of the new job. To disable this behavior, use
    the <code class="option">--no-autopatchstatus</code> option.
   </p></div><p> SMT is not intended to be a system to directly access the
      clients or to immediately report the results back. It is a
      long-term maintenance and monitoring system rather than a live
      interaction tool. </p><div id="idm139994747772208" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Job Time Lag Limitation</h6><p>
    The client normally processes one job at a time, reports back the result, and
    then asks for the next job. If you create a persistent job with a time
    offset of only a few seconds, it will be repeated forever and will block other
    jobs. Therefore, adding jobs with a time offset shorter than
    one minute is not supported.
   </p></div></div><div class="sect2 " id="smt.scripts.smt"><div class="titlepage"><div><div><h3 class="title" id="smt.scripts.smt"><span class="number">7.1.2 </span><span class="name">/usr/sbin/smt Commands</span> <a title="Permalink" class="permalink" href="#smt.scripts.smt">#</a></h3></div></div></div><p>
   The key command to manage the SMT is <code class="command">smt</code>
   (<code class="filename">/usr/sbin/smt</code>). The <code class="command">smt</code> command
   should be used together with various sub-commands described in this
   section. If the <code class="command">smt</code> command is used alone, it prints
   a list of all available sub-commands. To get help for individual
   sub-commands, use <code class="command">smt</code>
   <em class="replaceable ">SUBCOMMAND</em> --help.
  </p><p>
   The following sub-commands are available:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>

     <code class="command">smt-client</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-delete-registration</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-job</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-list-products</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-list-registrations</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-mirror</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-scc-sync</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-register</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-report</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-repos</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-setup-custom-repos</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-staging</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-support</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-sync</code>
    </p></li></ul></div><p> There are two syntax types you can use with the
        <code class="command">smt</code> command: <code class="command">smt</code> followed by a sub-command or a single
      command consisting of <code class="command">smt</code> followed by the dash and the desired
      sub-command. For example, it is possible to use
      either <code class="command">smt mirror</code> or
        <code class="command">smt-mirror</code>, as both have the same meaning. </p><div id="idm139994746587056" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Conflicting Commands</h6><p>
    Depending on your <code class="literal">$PATH</code> environment variable, the
    SMT <code class="command">smt</code> command
    (<code class="filename">/usr/sbin/smt</code>) may collide with the
    <code class="command">smt</code> command from the <code class="systemitem">star</code>
    package (<code class="filename">/usr/bin/smt</code>). Either use the absolute
    path <code class="filename">/usr/sbin/smt</code>, create an alias, or set your
    <code class="literal">$PATH</code> accordingly.
   </p><p>
    Another solution is to always use the <code class="command">smt-</code>
    <em class="replaceable ">SUBCOMMAND</em> syntax.
   </p></div><div class="sect3 " id="idm139994746580688"><div class="titlepage"><div><div><h4 class="title" id="idm139994746580688"><span class="number">7.1.2.1 </span><span class="name">smt-client</span> <a title="Permalink" class="permalink" href="#idm139994746580688">#</a></h4></div></div></div><p>
    The <code class="command">smt-client</code> command shows information about
    registered clients. The information includes the following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      guid
     </p></li><li class="listitem "><p>
      host name
     </p></li><li class="listitem "><p>
      patch status
     </p></li><li class="listitem "><p>
      time stamps of the patch status
     </p></li><li class="listitem "><p>
      last contact with the SMT server
     </p></li></ul></div><p>
    The <code class="command">smt-client</code> supports the following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994715047712"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Shows detailed information about the client. The last contact date is
       shown as well.
      </p></dd><dt id="idm139994715045088"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd><dt id="idm139994715042544"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies the file the log will be written to.
      </p></dd><dt id="idm139994715039504"><span class="term "><code class="option">--hostname</code> or <code class="option">-h</code> with the
     parameter <em class="replaceable ">HOSTNAME</em>
     </span></dt><dd><p>
       Lists the entries whose host name begins with
       <em class="replaceable ">HOSTNAME</em>.
      </p></dd><dt id="idm139994714704464"><span class="term "><code class="option">--guid</code> or <code class="option">-g</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Lists the entries whose GUID is <em class="replaceable ">ID</em>.
      </p></dd><dt id="idm139994714701040"><span class="term "><code class="option">--severity</code> or <code class="option">-s</code> with the
     parameter <em class="replaceable ">LEVEL</em>
     </span></dt><dd><p>
       Filters the result by the patch status information. The value
       <em class="replaceable ">level</em> can be one of <code class="literal">packagemanager</code>,
       <code class="literal">security</code>, <code class="literal">recommended</code> or <code class="literal">optional</code>.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994714695424"><div class="titlepage"><div><div><h4 class="title" id="idm139994714695424"><span class="number">7.1.2.2 </span><span class="name">smt-delete-registration</span> <a title="Permalink" class="permalink" href="#idm139994714695424">#</a></h4></div></div></div><p>
    The <code class="command">smt-delete-registration</code> command deletes one or
    more registrations from SMT and SUSE Customer Center. It unregisters machines
    from the system. The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994714693360"><span class="term "><code class="option">--guid</code> or <code class="option">-g</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Deletes the machine with the guid <em class="replaceable ">ID</em> from
       the system. You can use this option multiple times.
      </p></dd><dt id="idm139994742649648"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>

       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="smt.scripts.job"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.job"><span class="number">7.1.2.3 </span><span class="name">smt-job</span> <a title="Permalink" class="permalink" href="#smt.scripts.job">#</a></h4></div></div></div><p>
    The <code class="command">smt-job</code> script manages jobs for individual SMT
    clients. You can this command to list, create, edit, and delete jobs. The
    following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994742644288"><span class="term "><code class="option">--list</code> or <code class="option">-l</code>
     </span></dt><dd><p>
       Lists all client jobs. This is the default if the operation mode
       switch is omitted.
      </p></dd><dt id="idm139994742641664"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code> with the parameter
     <em class="replaceable ">LEVEL</em>
     </span></dt><dd><p>
       Shows detailed information about a job or jobs in a list mode. The
       <em class="replaceable ">level</em> value can be a number from 0 to 3.
       The higher the value, the more verbose the command is.
      </p></dd><dt id="idm139994742638064"><span class="term "><code class="option">--create</code> or <code class="option">-c</code>
     </span></dt><dd><p>
       Creates a new job.
      </p></dd><dt id="idm139994736464224"><span class="term "><code class="option">--edit</code> or <code class="option">-e</code>
     </span></dt><dd><p>
       Edits an existing job.
      </p></dd><dt id="idm139994736461680"><span class="term "><code class="option">--delete</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Deletes an existing job.
      </p></dd><dt id="idm139994736459136"><span class="term "><code class="option">--guid</code> or <code class="option">-g</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the client's guid. This parameter
       can be used multiple times to create a job for more than one client.
      </p></dd><dt id="idm139994736456032"><span class="term "><code class="option">--jobid</code> or <code class="option">-j</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the job ID. You need to specify job ID and client's
       guid when editing or deleting a job,
       as the same job for multiple clients has the same job ID.
      </p></dd><dt id="idm139994736452864"><span class="term "><code class="option">--deleteall</code> or <code class="option">-A</code><em class="replaceable ">id</em>
     </span></dt><dd><p> Omit either the client's guid or the job ID in the delete
              operation. The missing parameter will match all respective
              jobs. </p></dd><dt id="idm139994739434208"><span class="term "><code class="option">--type</code> or <code class="option">-t</code> with the parameter
     <em class="replaceable ">TYPE</em>
     </span></dt><dd><p>
       Specifies the job type. The type can be one of
       <code class="literal">patchstatus</code>, <code class="literal">softwarepush</code>,
       <code class="literal">update</code>, <code class="literal">execute</code>,
       <code class="literal">reboot</code>, <code class="literal">wait</code>,
       <code class="literal">eject</code>. On the client, only the following job types
       are enabled by default: <code class="literal">patchstatus</code>,
       <code class="literal">softwarepush</code> and <code class="literal">update</code>.
      </p></dd><dt id="idm139994739426720"><span class="term "><code class="option">--description <em class="replaceable ">DESCRIPTION</em></code>
     </span></dt><dd><p>
       Specifies a job description.
      </p></dd><dt id="idm139994739424384"><span class="term "><code class="option">--parent</code><em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the job ID of the parent job. Use it to define a
       dependency. A job will not be processed until its parent has
       successfully finished.
      </p></dd><dt id="idm139994739421856"><span class="term "><code class="option">--name</code> or <code class="option">-n</code> with the parameter
     <em class="replaceable ">NAME</em>
     </span></dt><dd><p>
       Specifies a job name.
      </p></dd><dt id="idm139994742499440"><span class="term "><code class="option">--persistent</code>
     </span></dt><dd><p>
       Specifies if a job is persistent. Non-persistent jobs are processed
       only once, while persistent jobs are processed again and again. Use
       <code class="option">--timelag</code> to define the time that elapses until the
       next run.
      </p></dd><dt id="idm139994742496720"><span class="term "><code class="option">--finished</code>
     </span></dt><dd><p>
       Search option for finished jobs.
      </p></dd><dt id="idm139994742494608"><span class="term "><code class="option">--targeted</code><em class="replaceable ">time</em>
     </span></dt><dd><p>
       Specifies the earliest execution time of a job. Note that the job most
       likely will not run exactly at that point in time, but probably some
       minutes or hours after. The reason is that the client polls in a
       fixed interval for jobs.
      </p></dd><dt id="idm139994742491984"><span class="term "><code class="option">--expires</code><em class="replaceable ">time</em>
     </span></dt><dd><p>
       Defines when the job will no longer be executed anymore.
      </p></dd><dt id="idm139994742489568"><span class="term "><code class="option">--timelag</code><em class="replaceable ">time</em>
     </span></dt><dd><p>
       Defines the time interval for persistent jobs.
      </p></dd></dl></div><p> For a complete list of available options and their explanations,
        see the manual page of the <code class="command">smt-job</code> command
          (<code class="command">man</code>
        <code class="command">smt-job</code>). </p><div class="sect4 " id="idm139994742116768"><div class="titlepage"><div><div><h5 class="title" id="idm139994742116768"><span class="number">7.1.2.3.1 </span><span class="name">Examples</span> <a title="Permalink" class="permalink" href="#idm139994742116768">#</a></h5></div></div></div><p>
     List all finished jobs:
    </p><div class="verbatim-wrap"><pre class="screen">smt-job --list --finished</pre></div><p>
     Create a <code class="literal">softwarepush</code> job that installs <code class="literal">xterm</code>
     and <code class="literal">bash</code> on client 12345 and 67890:
    </p><div class="verbatim-wrap"><pre class="screen">smt-job --create -t softwarepush -P xterm -P bash -g 12345 -g 67890</pre></div><p>
     Change the timing for a persistent job with job ID 42 and guid 12345
     to run every 6 hours:
    </p><div class="verbatim-wrap"><pre class="screen">smt-job --edit -j 42 -g 12345 --targeted 0000-00-00 --timelag 06:00:00</pre></div><p>
     Delete all jobs with job ID 42:
    </p><div class="verbatim-wrap"><pre class="screen">smt-job --delete -jobid 42 --deleteall</pre></div></div></div><div class="sect3 " id="smt.scripts.listproducts"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.listproducts"><span class="number">7.1.2.4 </span><span class="name">smt-list-products</span> <a title="Permalink" class="permalink" href="#smt.scripts.listproducts">#</a></h4></div></div></div><p>
    The <code class="command">smt-list-products</code> script lists all software
    products in the SMT database. The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994742108048"><span class="term "><code class="option">--used</code> or <code class="option">-u</code>
     </span></dt><dd><p>

       Shows only used products.
      </p></dd><dt id="idm139994742105488"><span class="term "><code class="option">--catstat</code> or <code class="option">-c</code>
     </span></dt><dd><p>

       Shows whether all repositories needed for a product are locally
       mirrored.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994715799552"><div class="titlepage"><div><div><h4 class="title" id="idm139994715799552"><span class="number">7.1.2.5 </span><span class="name">smt-list-registrations</span> <a title="Permalink" class="permalink" href="#idm139994715799552">#</a></h4></div></div></div><p>
    The <code class="command">smt-list-registrations</code> script lists all
    registrations. There are two options available for this command:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994715797552"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Shows detailed information about the registered devices.
      </p></dd><dt id="idm139994715794976"><span class="term "><code class="option">--format</code> or <code class="option">-f</code> with the parameter
     <em class="replaceable ">FORMAT</em>
     </span></dt><dd><p> Formats the output in the <em class="replaceable ">asciitable</em> or
                <em class="replaceable ">csv</em> formats. </p></dd></dl></div></div><div class="sect3 " id="idm139994715790800"><div class="titlepage"><div><div><h4 class="title" id="idm139994715790800"><span class="number">7.1.2.6 </span><span class="name">smt-mirror</span> <a title="Permalink" class="permalink" href="#idm139994715790800">#</a></h4></div></div></div><p>
    The <code class="command">smt-mirror</code> command performs the mirroring
    procedure and downloads repositories that are set to be mirrored.
   </p><p>
    You can run the <code class="command">smt-mirror</code> with the following
    options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994715787872"><span class="term "><code class="option">--clean</code> or <code class="option">-c</code>
     </span></dt><dd><p>
       Removes all files no longer mentioned in the metadata from the mirror.
       No mirroring occurs before cleanup.
      </p></dd><dt id="idm139994717720256"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Enables the debugging mode.
      </p></dd><dt id="idm139994717717696"><span class="term "><code class="option">--deepverify</code>
     </span></dt><dd><p>
       Turns on verifying of all package checksums.
      </p></dd><dt id="idm139994717715568"><span class="term "><code class="option">--hardlink <em class="replaceable ">SIZE</em></code>
     </span></dt><dd><p>
       Searches for duplicate files with a size greater than the size
       specified in kilobytes. Creates hard links for them.

      </p></dd><dt id="idm139994717713072"><span class="term "><code class="option">--directory <em class="replaceable ">PATH</em></code>
     </span></dt><dd><p>
       Defines the directory to work on. When using this option, the default
       value configured in the <code class="filename">smt.conf</code> configuration
       file is ignored.
      </p></dd><dt id="idm139994717710128"><span class="term "><code class="option">--dbreplfile <em class="replaceable ">FILE</em></code>
     </span></dt><dd><p>
       Defines a path to the *.xml file to use as database replacement. You
       can create this file with the <code class="command">smt-scc</code> command.
      </p></dd><dt id="idm139994717707216"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the
     parameter <em class="replaceable ">FILE</em>
     </span></dt><dd><p>
       Specifies the path to a log file.
      </p></dd></dl></div></div><div class="sect3 " id="smt.scripts.smtsync"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.smtsync"><span class="number">7.1.2.7 </span><span class="name">smt-sync</span> <a title="Permalink" class="permalink" href="#smt.scripts.smtsync">#</a></h4></div></div></div><p>
    The <code class="command">smt-sync</code> or <code class="command">smt sync</code> command
    obtains data from SUSE Customer Center and updates the local SMT database.
    It can also save SUSE Customer Center data to a directory instead of the SMT
    database, or read the data from such a directory instead of
    downloading it from SUSE Customer Center.
   </p><p> For SUSE Linux Enterprise 11 clients, this script automatically determines
        whether Novell Customer Center or SUSE Customer Center should be used. Then
          <code class="command">smt-ncc-sync</code> or
          <code class="command">smt-scc-sync</code> is called.
        For SUSE Linux Enterprise 12 clients, only <code class="command">smt-scc-sync</code> is
        supported. </p></div><div class="sect3 " id="smt.scripts.sccsync"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.sccsync"><span class="number">7.1.2.8 </span><span class="name">smt-scc-sync</span> <a title="Permalink" class="permalink" href="#smt.scripts.sccsync">#</a></h4></div></div></div><p>
    The <code class="command">smt scc-sync</code>
    command obtains data from the SUSE Customer Center and updates the local SMT database.
    It can also save SUSE Customer Center data to a directory instead of the SMT
    database, or read SUSE Customer Center data from a directory instead
    of downloading it from SUSE Customer Center.
   </p><p>
    You can run the <code class="command">smt-scc-sync</code> with the following
    options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994738557040"><span class="term "><code class="option">--fromdir <em class="replaceable ">DIRECTORY</em></code>
     </span></dt><dd><p>
       Reads SUSE Customer Center data from a directory instead of downloading it from
       SUSE Customer Center.
      </p></dd><dt id="idm139994738554560"><span class="term "><code class="option">--todir <em class="replaceable ">DIRECTORY</em></code>
     </span></dt><dd><p>
       Writes SUSE Customer Center data to the specified directory without updating the
       SMT database.
      </p><div id="idm139994738552416" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: SUSE Manager's Subscription Matching Feature</h6><p>
        This data can be used by the subscription matching feature of
        SUSE Manager, which gives you a detailed overview of your subscription
        usage. For more information on the subscription matching feature, see
        <a class="link" href="https://www.suse.com/documentation/suse-manager-3/book_suma_reference_manual/data/ref_webui_audit_subscription.html" target="_blank">https://www.suse.com/documentation/suse-manager-3/book_suma_reference_manual/data/ref_webui_audit_subscription.html</a>
       </p></div></dd><dt id="idm139994742410016"><span class="term "><code class="option">--createdbreplacementfile</code>
     </span></dt><dd><p>
       Creates a database replacement file for using
       <code class="command">smt-mirror</code> without database.
      </p></dd><dt id="idm139994742407408"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies the path to a log file.
      </p></dd><dt id="idm139994742404384"><span class="term "><code class="option">--debug</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994742401968"><div class="titlepage"><div><div><h4 class="title" id="idm139994742401968"><span class="number">7.1.2.9 </span><span class="name">smt-register</span> <a title="Permalink" class="permalink" href="#idm139994742401968">#</a></h4></div></div></div><p>
    The <code class="command">smt-register</code> or <code class="command">smt register</code>
    command registers all currently unregistered clients at the SUSE Customer Center. It also
    registers all clients whose data has changed since the last
    registration.
   </p><p>
    The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994742398960"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies the path to a log file.
      </p></dd><dt id="idm139994744664368"><span class="term "><code class="option">--debug</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994744662000"><div class="titlepage"><div><div><h4 class="title" id="idm139994744662000"><span class="number">7.1.2.10 </span><span class="name">smt-report</span> <a title="Permalink" class="permalink" href="#idm139994744662000">#</a></h4></div></div></div><p>
    The <code class="command">smt-report</code> or <code class="command">smt report</code>
    command generates a subscription report based on local calculation or
    SUSE Customer Center registrations.
   </p><p>
    The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994744659056"><span class="term "><code class="option">--mail</code> or <code class="option">-m</code>
     </span></dt><dd><p>
       Activates mailing the report to the addresses configured with the
       SMT Server and written in <code class="filename">/etc/smt.conf</code>. The
       report is formatted as tables.
      </p></dd><dt id="idm139994744655952"><span class="term "><code class="option">--attach</code> or <code class="option">-a</code>
     </span></dt><dd><p>
       Appends the report to the e-mails in CSV format. This option should
       only be used in combination with the <code class="option">--mail</code> option.
      </p></dd><dt id="idm139994744652864"><span class="term "><code class="option">--quiet</code> or <code class="option">-q</code>
     </span></dt><dd><p>
       Suppresses output to STDOUT and runs <code class="command">smt-report</code> in
       quiet mode.
      </p></dd><dt id="idm139994744649840"><span class="term "><code class="option">--csv</code> or <code class="option">-c</code>
     </span></dt><dd><p>
       Exports the report to multiple files in the CSV format. The first line
       of each *.csv file consists of the column names. The
       <code class="option">--csv</code> parameter should only be used in combination with
       the <code class="option">--file</code> parameter. If the specified file name has
       the <code class="literal">.csv</code> extension, the report is formatted as CSV
       (as if the <code class="option">--csv</code> parameter was used).
      </p></dd><dt id="idm139994715754720"><span class="term "><code class="option">--pdf</code> or <code class="option">-p</code>
     </span></dt><dd><p>
       Exports the report in the PDF format. Use it only in combination with
       the <code class="option">-file</code> option.
      </p></dd><dt id="idm139994715751664"><span class="term "><code class="option">--xml</code>
     </span></dt><dd><p>
       Exports the report in the XML format. Use it only in combination with
       the <code class="option">-file</code> option. For a detailed description of the
       XML format, see the manual page of the <code class="command">smt-report</code>
       command.
      </p></dd><dt id="idm139994715748528"><span class="term "><code class="option">--file</code> or <code class="option">-F</code>
     </span></dt><dd><p>
       Exports the report to one or several files. By default, the report
       is written to a single file formatted as tables. Optionally, the
       file name or whole path may be specified after the
       <code class="option">--file <em class="replaceable ">filename</em></code> parameter. If no
       file name is specified, a default file name containing a time stamp is
       used. However, SMT does not check if the file or files already
       exist.
      </p><p> In the CSV mode the report is written to multiple files,
              therefore the specified file name expands to
                  <code class="filename"><em class="replaceable ">[PATH/]FILENAME</em>-<em class="replaceable ">reportname</em>.<em class="replaceable ">extension</em></code>
              for every report. </p></dd><dt id="idm139994735545504"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies path to a log file.
      </p></dd><dt id="idm139994735542480"><span class="term "><code class="option">--debug</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994735540064"><div class="titlepage"><div><div><h4 class="title" id="idm139994735540064"><span class="number">7.1.2.11 </span><span class="name">smt-repos</span> <a title="Permalink" class="permalink" href="#idm139994735540064">#</a></h4></div></div></div><p>
    Use <code class="command">smt-repos</code> (or <code class="command">smt
    repositories</code>) to list all available repositories and for
    enabling, disabling, and deleting repositories. The following options are
    available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994735537568"><span class="term "><code class="option">--enable-mirror</code> or <code class="option">-e</code>
     </span></dt><dd><p>
       Enables repository mirroring.
      </p></dd><dt id="idm139994735535008"><span class="term "><code class="option">--disable-mirror</code> or <code class="option">-d</code>
       </span></dt><dd><p>
           Disables repository mirroring.
         </p></dd><dt id="idm139994735532448"><span class="term "><code class="option">--enable-by-prod</code> or <code class="option">-p</code>
     </span></dt><dd><p>
       Enables repository mirroring by giving product data in the following
       format:
       <code class="literal">Product[,Version[,Architecture[,Release]]]</code>.

      </p></dd><dt id="idm139994742623232"><span class="term "><code class="option">--disable-by-prod</code> or <code class="option">-P</code>
     </span></dt><dd><p>
       Disables repository mirroring by giving product data in the following
       format:
       <code class="literal">Product[,Version[,Architecture[,Release]]]</code>.

      </p></dd><dt id="idm139994742620144"><span class="term "><code class="option">--enable-staging</code> or <code class="option">-s</code>
     </span></dt><dd><p>
       Enables repository staging.
      </p></dd><dt id="idm139994742617584"><span class="term "><code class="option">--disable-staging</code> or <code class="option">-S</code>
     </span></dt><dd><p>
       Disables repository staging.
      </p></dd><dt id="idm139994742615024"><span class="term "><code class="option">--only-mirrorable</code> or <code class="option">-m</code>
     </span></dt><dd><p>
       Lists only repositories that can be mirrored.
      </p></dd><dt id="idm139994742612448"><span class="term "><code class="option">--only-enabled</code> or <code class="option">-o</code>
     </span></dt><dd><p>
       Lists only enabled repositories.
      </p></dd><dt id="idm139994742609888"><span class="term "><code class="option">--delete</code>
     </span></dt><dd><p>
       Lists repositories and deletes them from disk.
      </p></dd><dt id="idm139994746624176"><span class="term "><code class="option">--namespace <em class="replaceable ">DIRNAME</em></code>
     </span></dt><dd><p>
       Deletes the repository in the specified name space.
      </p></dd><dt id="idm139994746621760"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Shows detailed repository information.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994746618880"><div class="titlepage"><div><div><h4 class="title" id="idm139994746618880"><span class="number">7.1.2.12 </span><span class="name">smt-setup-custom-repos</span> <a title="Permalink" class="permalink" href="#idm139994746618880">#</a></h4></div></div></div><p>
    The <code class="command">smt-setup-custom-repos</code> and <code class="command">smt
    setup-custom-repos</code> script are designed for setting up custom
    repositories (repositories not present in the download server) for use with SMT.
    You can use this script to add a new repository to the SMT database or
    to delete a repository from the database. The script supports the
    following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994746616208"><span class="term "><code class="option">--productid</code> <em class="replaceable ">PRODUCT_ID</em>
     </span></dt><dd><p>
       ID of a product the repository belongs to. If a repository should
       belong to multiple products, use this option multiple times to assign
       the repository to all relevant products.
      </p></dd><dt id="idm139994746613488"><span class="term "><code class="option">--name</code> <em class="replaceable ">NAME</em>
     </span></dt><dd><p>
       The name of the custom repository.
      </p></dd><dt id="idm139994746610928"><span class="term "><code class="option">--description</code> <em class="replaceable ">DESCRIPTION</em>
     </span></dt><dd><p>
       The description of the custom repository.
      </p></dd><dt id="idm139994746608352"><span class="term "><code class="option">--exturl</code> <em class="replaceable ">URL</em>
     </span></dt><dd><p>
       The URL for the repository to be mirrored from. Only HTTP and
       HTTPS protocols are supported.
      </p></dd><dt id="idm139994742770336"><span class="term "><code class="option">--delete</code> <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Removes a custom repository with a given ID from the SMT database.
      </p></dd></dl></div><p>
    To set up a new repository, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen">smt-setup-custom-repos --productid <em class="replaceable ">PRODUCT_ID</em> \
--name <em class="replaceable ">NAME</em> --exturl <em class="replaceable ">URL</em></pre></div><p>
    For example:
   </p><div class="verbatim-wrap"><pre class="screen">smt-setup-custom-repos --productid <em class="replaceable ">434</em> \
--name <em class="replaceable ">My_Catalog</em> --exturl <em class="replaceable ">http://my.example.com/My_Catalog</em></pre></div><p>
    To remove a configured repository, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen">smt-setup-custom-repos --delete <em class="replaceable ">ID</em></pre></div><p>
    For example:
   </p><div class="verbatim-wrap"><pre class="screen">smt-setup-custom-repos --delete <em class="replaceable ">1cf336d819e8e5904f4d4b05ee081971a0cc8afc</em></pre></div></div><div class="sect3 " id="idm139994742760208"><div class="titlepage"><div><div><h4 class="title" id="idm139994742760208"><span class="number">7.1.2.13 </span><span class="name">smt-staging</span> <a title="Permalink" class="permalink" href="#idm139994742760208">#</a></h4></div></div></div><p>
    A <span class="emphasis"><em>patch</em></span> is an update of a package or group of
    packages. The term <span class="emphasis"><em>update</em></span> and
    <span class="emphasis"><em>patch</em></span> are often interchangeable. With the
    <code class="command">smt-staging</code> script, you can set up patch filters for
    update repositories. It can also help you generate both testing
    repositories and repositories for the production environment.
   </p><p>
    The first argument of <code class="command">smt-staging</code> is always the
    <code class="command">command</code>. It must be followed by a
    <em class="replaceable ">repository</em>. The repository can be specified
    by <em class="replaceable ">Name</em> and <em class="replaceable ">Target</em>
    from the table scheme returned by the <code class="command">smt-repos</code>
    command. Alternatively, it can be specified by its <code class="literal">Repository
    ID</code> which can be obtained by running the command
    <code class="command">smt-repos -v</code>. The <code class="command">smt-staging</code>
    script supports the following commands:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994716713552"><span class="term "><code class="option">listupdates</code>
     </span></dt><dd><p>
       Lists available patches and their allowed and forbidden status.
      </p></dd><dt id="idm139994716711408"><span class="term "><code class="option">allow/forbid</code>
     </span></dt><dd><p>
       Allows or forbids specified patches.
      </p></dd><dt id="idm139994716709296"><span class="term "><code class="option">createrepo</code>
     </span></dt><dd><p>
       Generates both testing and production repository with allowed patches.
      </p></dd><dt id="idm139994716707152"><span class="term "><code class="option">status</code>
     </span></dt><dd><p>
       Gives information about both testing and production snapshots, and
       patch counts.
      </p></dd><dt id="idm139994716704992"><span class="term "><code class="option">listgroups</code>
     </span></dt><dd><p>
       Lists staging groups.
      </p><p>
       There is always one group available with the name
       <span class="quote">“<span class="quote">default</span>”</span>. The default group has the path
       <code class="filename">repo/full</code>, <code class="filename">repo/testing</code> and
       <code class="filename">repo</code>. New paths can
       be specified when creating a new group.
      </p></dd><dt id="idm139994717678976"><span class="term "><code class="option">creategroup</code>
     </span></dt><dd><p>
       Creates a staging group. Required parameters are: group name, testing
       directory name, and production directory name.
      </p></dd><dt id="idm139994717676768"><span class="term "><code class="option">removegroup</code>
     </span></dt><dd><p>
       Removes a staging group. The group name parameter is required.
      </p></dd></dl></div><p>
    The following options apply to any <code class="command">smt-staging</code>
    command:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994717673248"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code><em class="replaceable ">file path</em>
     </span></dt><dd><p>
       Writes log information to the specified file. It is created if it does
       not already exist.
      </p></dd><dt id="idm139994717670336"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Turns on the debugging output and log.
      </p></dd><dt id="idm139994717667776"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Turns more detailed output on.
      </p></dd></dl></div><p>
    The following options apply to specific <code class="command">smt-staging</code>
    commands:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994717663840"><span class="term "><code class="option">--patch</code> <em class="replaceable ">PATCH_ID</em>
     </span></dt><dd><p>
       Specifies a patch by its ID. You can get a list of available patches
       with the <code class="command">listupates</code> command. This option can be
       used multiple times. Use it with the <code class="command">allow</code>,
       <code class="command">forbid</code>, and <code class="command">listupdates</code>
       commands. When used with <code class="command">listupdates</code>, the command
       prints detailed information about the specified patches.
      </p></dd><dt id="idm139994715770736"><span class="term "><code class="option">--category</code> <em class="replaceable ">CATEGORY</em>
     </span></dt><dd><p>
       Specifies the patch category. The following categories are available:
       <code class="literal">security</code>, <code class="literal">recommended</code> and
       <code class="literal">optional</code>. Use it in combination with the
       <code class="command">allow</code>, <code class="command">forbid</code>, and
       <code class="command">listupdates</code> commands.
      </p></dd><dt id="idm139994715765424"><span class="term "><code class="option">--all</code>
     </span></dt><dd><p>
       Allows or forbids all patches in the <code class="command">allow</code> or
       <code class="command">forbid</code> commands.
      </p></dd><dt id="idm139994715762416"><span class="term "><code class="option">--individually</code>
     </span></dt><dd><p>
       Allows or forbids multiple patches (for example by category) one by one
       similar to the <code class="option">--patch</code> option used with each
       of the patches.
      </p></dd><dt id="idm139994715759776"><span class="term "><code class="option">--testing</code>
     </span></dt><dd><p>
       Generates a repository for testing when used in combination with the
       <code class="command">createrepo</code> command. The repository is generated from the
       full unfiltered local mirror of the remote repository. It is
       written into the <code class="filename">&lt;MirrorTo&gt;/repo/testing</code>
       directory, where <code class="filename">MirrorTo</code> is the value obtained
       from <code class="filename">smt.conf</code>.
      </p></dd><dt id="idm139994715142928"><span class="term "><code class="option">--production</code>
     </span></dt><dd><p>
       Generates a
       repository for production when used in combination with the
       <code class="command">createrepo</code> command. The repository is generated from
       the testing repository. It is written into the
       <code class="filename">&lt;MirrorTo&gt;/repo</code> directory, where
       <code class="filename">MirrorTo</code> is the value obtained from
       <code class="filename">smt.conf</code>. If the testing repository does not
       exist, the production repository is generated from the full
       unfiltered local mirror of the remote repository.
      </p></dd><dt id="idm139994715138704"><span class="term "><code class="option">--group</code> <em class="replaceable ">GROUP</em>
     </span></dt><dd><p>
       Specifies on which group the command should work. The default for
       <code class="option">--group</code> is the name <code class="literal">default</code>.
      </p></dd><dt id="idm139994715135216"><span class="term "><code class="option">--nohardlink</code>
     </span></dt><dd><p>
       Prevents creating hard links instead of copying files when creating a
       repository with the <code class="command">createrepo</code>
       command. If not specified, hard links are created instead.
      </p></dd><dt id="idm139994715132528"><span class="term "><code class="option">--nodesc</code>
     </span></dt><dd><p>
       Skips patch descriptions and summaries—to save some screen
       space and make the output more readable.
      </p></dd><dt id="idm139994715130336"><span class="term "><code class="option">--sort-by-version</code>
     </span></dt><dd><p>
       Sorts the <code class="literal">listupdates</code> table by patch version. The
       higher the version, the newer the patch should be.
      </p></dd><dt id="idm139994715094816"><span class="term "><code class="option">--sort-by-category</code>
     </span></dt><dd><p>
       Sorts the <code class="literal">listupdates</code> table by patch category.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994715091952"><div class="titlepage"><div><div><h4 class="title" id="idm139994715091952"><span class="number">7.1.2.14 </span><span class="name">smt-support</span> <a title="Permalink" class="permalink" href="#idm139994715091952">#</a></h4></div></div></div><p>
    The <code class="command">smt-support</code> command manages uploaded support data
    usually coming from the <code class="command">supportconfig</code> tool. You can
    forward the data to SUSE, either selectively or in full. This command
    supports the following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994715089424"><span class="term "><code class="option">--incoming</code> or <code class="option">-i</code> with the
     parameter <em class="replaceable ">DIRECTORY</em>
     </span></dt><dd><p>
       Specifies the directory where the supportconfig archives are uploaded.
       You can also set this option with the <code class="literal">SMT_INCOMING</code>
       environment variable. The default <code class="literal">SMT_INCOMING</code>
       directory is <code class="filename">/var/spool/smt-support</code>.
      </p></dd><dt id="idm139994715084944"><span class="term "><code class="option">--list</code> or <code class="option">-l</code>
     </span></dt><dd><p>
       Lists the uploaded supportconfig archives in the incoming directory.
      </p></dd><dt id="idm139994715082352"><span class="term "><code class="option">--remove</code> or <code class="option">-r</code> with the parameter
     <em class="replaceable ">ARCHIVE</em>
     </span></dt><dd><p>
       Deletes the specified archive.
      </p></dd><dt id="idm139994713657152"><span class="term "><code class="option">--empty</code> or <code class="option">-R</code>
     </span></dt><dd><p>
       Deletes all archives in the incoming directory.
      </p></dd><dt id="idm139994713654576"><span class="term "><code class="option">--upload</code> or <code class="option">-u</code> with the parameter
     <em class="replaceable ">ARCHIVE</em>
     </span></dt><dd><p>
       Uploads the specified archive to SUSE. If you specify
       <code class="option">-s</code>, <code class="option">-n</code>, <code class="option">-c</code>,
       <code class="option">-p</code>, and <code class="option">-e</code> options, the archive is
       repackaged with contact information.
      </p></dd><dt id="idm139994713649232"><span class="term "><code class="option">--uploadall</code> or <code class="option">-U</code>
     </span></dt><dd><p>
       Uploads all archives in the incoming directory to SUSE.
      </p></dd><dt id="idm139994713646656"><span class="term "><code class="option">--srnum</code> or <code class="option">-s</code> with the parameter <em class="replaceable ">SR_NUMBER</em>
     </span></dt><dd><p>
       Specifies the Novell Service Request 12-digit number.
      </p></dd><dt id="idm139994713643632"><span class="term "><code class="option">--name</code> or <code class="option">-n</code> with the parameter
     <em class="replaceable ">NAME</em>
     </span></dt><dd><p>
       Specifies the first and last name of the contact, in quotes.
      </p></dd><dt id="idm139994716639120"><span class="term "><code class="option">--company</code> or <code class="option">-c</code> with the parameter
     <em class="replaceable ">COMPANY</em>
     </span></dt><dd><p>
       Specifies the company name.
      </p></dd><dt id="idm139994716636096"><span class="term "><code class="option">--storeid</code> or <code class="option">-d</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the store ID, if applicable.
      </p></dd><dt id="idm139994716633072"><span class="term "><code class="option">--terminalid</code> or <code class="option">-t</code> with the
     parameter <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the terminal ID, if applicable.
      </p></dd><dt id="idm139994716630032"><span class="term "><code class="option">--phone</code> or <code class="option">-p</code> with the parameter
     <em class="replaceable ">PHONE</em>
     </span></dt><dd><p>
       Specifies the phone number of the contact person.
      </p></dd><dt id="idm139994716626992"><span class="term "><code class="option">--email</code> or <code class="option">-e</code> with the parameter
     <em class="replaceable ">E-MAIL_ADDRESS</em>
     </span></dt><dd><p>
       Specifies the e-mail address of the contact.
      </p></dd></dl></div></div></div><div class="sect2 " id="idm139994716623472"><div class="titlepage"><div><div><h3 class="title" id="idm139994716623472"><span class="number">7.1.3 </span><span class="name">SMT <code class="systemitem">systemd</code> Commands</span> <a title="Permalink" class="permalink" href="#idm139994716623472">#</a></h3></div></div></div><p>
   You can manage SMT-related services with the standard <code class="systemitem">systemd</code>
   commands:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994738503728"><span class="term "><code class="command">systemctl start smt.target</code>
    </span></dt><dd><p>
      Starts the SMT services.
     </p></dd><dt id="idm139994738501616"><span class="term "><code class="command">systemctl stop smt.target</code>
    </span></dt><dd><p>
      Stops the SMT services.
     </p></dd><dt id="idm139994738499504"><span class="term "><code class="command">systemctl status smt.target</code>
    </span></dt><dd><p>
      Checks the status of the SMT services. Checks whether httpd, Maria DB,
      and cron are running.
     </p></dd><dt id="idm139994738497312"><span class="term "><code class="command">systemctl restart smt.target</code>
    </span></dt><dd><p>
      Restarts the SMT services.
     </p></dd><dt id="idm139994738495200"><span class="term "><code class="command">systemctl try-restart smt.target</code>
    </span></dt><dd><p>
      Checks whether the SMT services are enabled and if so, restarts them.
     </p></dd></dl></div><p>
   You can enable and disable SMT with the YaST SMT Server module.
  </p></div></div><div class="sect1 " id="idm139994738491808"><div class="titlepage"><div><div><h2 class="title" id="idm139994738491808"><span class="number">7.2 </span><span class="name">SMT Configuration Files</span> <a title="Permalink" class="permalink" href="#idm139994738491808">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_config_files.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  The main SMT configuration file is <code class="filename">/etc/smt.conf</code>.
  You can set most of the options with the YaST SMT Server module.
  Another important configuration file is
  <code class="filename">/etc/smt.d/smt-cron.conf</code>, which contains parameters
  for commands launched as SMT scheduled jobs.
 </p><div class="sect2 " id="smt.config.smtconf"><div class="titlepage"><div><div><h3 class="title" id="smt.config.smtconf"><span class="number">7.2.1 </span><span class="name">/etc/smt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf">#</a></h3></div></div></div><p>
   The <code class="filename">/etc/smt.conf</code> file has several sections. The
   <code class="literal">[NU]</code> section contains the update credentials and URL.
   The <code class="literal">[DB]</code> section contains the configuration of the
   Maria DB database for SMT. The <code class="literal">[LOCAL]</code> section includes
   other configuration data. The <code class="literal">[REPORT]</code> section
   contains the configuration of SMT reports.
  </p><div id="idm139994743279408" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Passwords in Clear Text</h6><p> The <code class="filename">/etc/smt.conf</code> file contains passwords
        in clear text. Its default permissions (640, root, wwwrun)
        make its content easily accessible with scripts running on the
        Apache server. Be careful with running other software on the
        SMT Apache server. The best policy is to use this server only
        for SMT. </p></div><div class="sect3 " id="smt.config.smtconf.nu"><div class="titlepage"><div><div><h4 class="title" id="smt.config.smtconf.nu"><span class="number">7.2.1.1 </span><span class="name">[NU] Section of /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf.nu">#</a></h4></div></div></div><p>
    The following options are available in the [NU] section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994743275408"><span class="term "><code class="option">NUUrl</code>
     </span></dt><dd><p>
       URL of the update service. Usually it should contain the
       <code class="literal">https://updates.suse.com/</code> URL.
      </p></dd><dt id="idm139994743272800"><span class="term "><code class="option">NURegUrl</code>
     </span></dt><dd><p>
       URL of the update registration service. It is used by
       <code class="command">smt-sync</code>. If this option is missing, the URL from
       <code class="filename">/etc/SUSEConnect</code> is used as a fallback.
      </p></dd><dt id="idm139994743269728"><span class="term "><code class="option">NUUser</code>
     </span></dt><dd><p>
       <code class="option">NUUser</code> should contain the user name for update
       service. For information about getting organization credentials, see
       <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>. You can set this
       value with the SMT Server.
      </p></dd><dt id="idm139994743266464"><span class="term "><code class="option">NUPass</code>
     </span></dt><dd><p>
       <code class="option">NUPass</code> is the password for the user defined in
       <code class="option">NUUser</code>. For information about getting organization
       credentials, see <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>. You
       can set this value with the SMT Server.
      </p></dd><dt id="idm139994736488800"><span class="term "><code class="option">ApiType</code>
     </span></dt><dd><p>
              <code class="option">ApiType</code> is the type of service SMT
              uses; it can be either <code class="literal">NCC</code> for Novell
              Customer Center or <code class="literal">SCC</code> for SUSE Customer Center. The
              only supported value for SMT 12 is
                <code class="literal">SCC</code>. </p></dd></dl></div></div><div class="sect3 " id="idm139994736484448"><div class="titlepage"><div><div><h4 class="title" id="idm139994736484448"><span class="number">7.2.1.2 </span><span class="name">[DB] Section of /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#idm139994736484448">#</a></h4></div></div></div><p>
    The three options defined in the [DB] section are used for configuring
    the database for SMT. Currently, only Maria DB is supported by SMT.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994736482832"><span class="term "><code class="option">config</code>
     </span></dt><dd><p>
       The first parameter of the DBI-&gt;connect Perl method used for
       connection to the Maria DB database. The value should be in the form
      </p><div class="verbatim-wrap"><pre class="screen">dbi:mysql:database=<em class="replaceable ">SMT</em>;host=<em class="replaceable ">LOCALHOST</em></pre></div><p>
       where <em class="replaceable ">SMT</em> is the name of the database and
       <em class="replaceable ">LOCALHOST</em> is the host name of the database
       server.
      </p></dd><dt id="idm139994736478032"><span class="term "><code class="option">user</code>
     </span></dt><dd><p>
       The user for the database. The default value is
       <code class="literal">smt</code>.
      </p></dd><dt id="idm139994736475456"><span class="term "><code class="option">pass</code>
     </span></dt><dd><p>
       The password for the database user. You can set the password with the
       YaST SMT Server module.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994736472960"><div class="titlepage"><div><div><h4 class="title" id="idm139994736472960"><span class="number">7.2.1.3 </span><span class="name">[LOCAL] Section of /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#idm139994736472960">#</a></h4></div></div></div><p>
    The following options are available in the <code class="literal">[LOCAL]</code>
    section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994742093584"><span class="term "><code class="option">url</code>
     </span></dt><dd><p>
       The base URL of the SMT server which is used to construct URLs of
       the repositories available on the server. This value should be set by
       YaST automatically during installation. The format of this option
       should be: <code class="literal">https://server.domain.tld/</code>.
      </p><p>
       You can change the URL manually. For example, the administrator may
       choose to use the <code class="literal">http://</code> scheme instead of
       <code class="literal">https://</code> for performance reasons. Another reason
       may be using an alias (configured with CNAME in DNS) instead of the
       host name of the server. For example,
       <code class="literal">http://smt.domain.tld/</code> instead of
       <code class="literal">http://server1.domain.tld/</code>.
      </p></dd><dt id="idm139994742088304"><span class="term "><code class="option">nccEmail</code>
     </span></dt><dd><p>
       E-mail address used for registration at the SUSE Customer Center. The SMT
       administrator can set this value with the YaST SMT Server module.
      </p></dd><dt id="idm139994742086080"><span class="term "><code class="option">MirrorTo</code>
     </span></dt><dd><p>
       Determines the path to mirror to.
      </p></dd><dt id="idm139994742083968"><span class="term "><code class="option">MirrorAll</code>
     </span></dt><dd><p>
       If the <code class="option">MirrorAll</code> option is set to
       <code class="literal">true</code>, the <code class="command">smt-sync</code> script will
       set all repositories that can be mirrored to be mirrored (DOMIRROR
       flag).
      </p></dd><dt id="idm139994742080432"><span class="term "><code class="option">MirrorSRC</code>
     </span></dt><dd><p>
       If the <code class="option">MirrorSRC</code> option is set to
       <code class="literal">true</code>, source RPM packages are mirrored.
      </p><div id="idm139994742077728" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Default Value Changed with SMT 11 SP2</h6><p>
        With SMT 11 SP2, the preset default value was changed to
        <code class="literal">false</code>. If you also want SMT to mirror source
        RPM packages on new installations, set <code class="option">MirrorSRC</code> to
        <code class="literal">true</code>.
       </p><p>
        Upgraded systems are not affected.
       </p></div></dd><dt id="idm139994742518912"><span class="term "><code class="option">forwardRegistration</code>
     </span></dt><dd><p>
       For SMT 11, this option determined whether the clients registered at SMT should be registered at
       Novell Customer Center, too. This option does not work with SUSE Customer Center
       yet.
      </p></dd><dt id="idm139994742516640"><span class="term "><code class="option">rndRegister</code>
     </span></dt><dd><p>
       Specify a delay in seconds before the clients are registered at SUSE Customer Center.
       The value is a random number between <code class="literal">0</code> and
       <code class="literal">450</code>, generated by the YaST SMT Server module.
       The purpose of this random delay is to prevent a high load on the
       SUSE Customer Center server that would occur if all smt-register cron jobs connected
       at the same time.
      </p></dd><dt id="idm139994742513312"><span class="term "><code class="option">mirror_preunlock_hook</code>
     </span></dt><dd><p>
       Specify the path to the script that will be run before the
       <code class="command">smt-mirror</code> script removes its lock.
      </p></dd><dt id="idm139994742510752"><span class="term "><code class="option">mirror_postunlock_hook</code>
     </span></dt><dd><p>
       Specify the path to the script that will be run after the
       <code class="command">smt-mirror</code> script removes its lock.
      </p></dd><dt id="idm139994742508144"><span class="term "><code class="option">HTTPProxy</code>
     </span></dt><dd><p>
       If you do not want to use global proxy settings, specify the proxy to
       be used for HTTP connection here. Use the following form:
       <code class="literal">http://<em class="replaceable ">PROXY</em>.example.com:<em class="replaceable ">3128</em></code>.
      </p><p>
       If the proxy settings are not configured in
       <code class="filename">/etc/smt.conf</code>, the global proxy settings
       configured in <code class="filename">/etc/syconfig/proxy</code> are used. You
       can configure the global proxy settings with the YaST Proxy module.
      </p></dd><dt id="idm139994742503248"><span class="term "><code class="option">HTTPSProxy</code>
     </span></dt><dd><p>
       If you do not want to use global proxy settings, specify the proxy to
       be used for HTTPS connection here. Use the form:
       <code class="literal">https://<em class="replaceable ">PROXY</em>.example.com:<em class="replaceable ">3128</em></code>.
      </p><p>
       If the proxy settings are not configured in
       <code class="filename">/etc/smt.conf</code>, the global proxy settings
       configured in <code class="filename">/etc/syconfig/proxy</code> are used. You
       can configure the global proxy settings with the YaST Proxy module.
      </p></dd><dt id="idm139994747657680"><span class="term "><code class="option">ProxyUser</code>
     </span></dt><dd><p>
       If your proxy requires authentication, specify a user name and
       password here, using the
       <code class="literal"><em class="replaceable ">USERNAME</em>:<em class="replaceable ">PASSWORD</em></code>
       format.
      </p><p>
       If the proxy settings are not configured in
       <code class="filename">/etc/smt.conf</code>, the global proxy settings
       configured in <code class="filename">/etc/syconfig/proxy</code> are used. You
       can configure the global proxy settings with the YaST Proxy module.
      </p><div id="idm139994747653296" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Global User Authentication Setting</h6><p>
        If you configure the global proxy settings with YaST, manually
        copy <code class="filename">/root/.curlrc</code> to the home directory of the
        <code class="systemitem">smt</code>. Adjust the
        permissions with the following commands as <code class="systemitem">root</code>:
       </p><div class="verbatim-wrap"><pre class="screen">cp /root/.curlrc /var/lib/smt/
chown smt:www /var/lib/smt/.curlrc</pre></div></div></dd><dt id="idm139994747649152"><span class="term "><code class="option">requiredAuthType</code>
     </span></dt><dd><p>
       Specify an authentication type to access the repository. There are
       three possible types:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="literal">none</code> - no authentication is required. This is
         the default value.
        </p></li><li class="listitem "><p>
         <code class="literal">lazy</code> - only user name and password are checked. A
         valid user can access all repositories.
        </p></li><li class="listitem "><p>
         <code class="literal">strict</code> - checks also if the user has access to
         the repository.
        </p></li></ul></div></dd><dt id="idm139994744285360"><span class="term "><code class="option">smtUser</code>
     </span></dt><dd><p>
       Specify a user name of a Unix user under which all smt commands will
       run.
      </p></dd><dt id="idm139994744283200"><span class="term "><code class="option">signingKeyID</code>
     </span></dt><dd><p>
       Specify the ID of the GPG key to sign modified repositories. The user
       specified under <code class="option">smtUser</code> needs to have access to the
       key. If this option is not set, the modified repositories will be
       unsigned.
      </p></dd></dl></div></div><div class="sect3 " id="smt.config.smtconf.rest"><div class="titlepage"><div><div><h4 class="title" id="smt.config.smtconf.rest"><span class="number">7.2.1.4 </span><span class="name">[REST] Section of /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf.rest">#</a></h4></div></div></div><p>
    The following options are available in the <code class="literal">[REST]</code>
    section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994744277824"><span class="term "><code class="option">enableRESTAdminAccess</code>
     </span></dt><dd><p>
       If set to <em class="replaceable ">1</em>, turns administrative access
       to the SMT RESTService on. Default value is
       <em class="replaceable ">0</em>.
      </p></dd><dt id="idm139994744274768"><span class="term "><code class="option">RESTAdminUser</code>
     </span></dt><dd><p>
       Specify the user name that the REST-Admin uses to log in. Default
       value is <em class="replaceable ">RESTroot</em>.
      </p></dd><dt id="idm139994744272160"><span class="term "><code class="option">RESTAdminPassword</code>
     </span></dt><dd><p>
       Specify the password for the REST-Admin user. The option has no
       default value. An empty password is invalid.
      </p></dd></dl></div></div><div class="sect3 " id="smt.config.smtconf.jobqueue"><div class="titlepage"><div><div><h4 class="title" id="smt.config.smtconf.jobqueue"><span class="number">7.2.1.5 </span><span class="name">[JOBQUEUE] Section of /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf.jobqueue">#</a></h4></div></div></div><p>
    The following options are available in the <code class="literal">[JOBQUEUE]</code>
    section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994744267216"><span class="term "><code class="option">maxFinishedJobAge</code>
     </span></dt><dd><p>
       Specify the maximum age of finished non-persistent jobs in days.
       Default value is 8.
      </p></dd><dt id="idm139994745519168"><span class="term "><code class="option">jobStatusIsSuccess</code>
     </span></dt><dd><p>
       Specify a comma separated list of JobQueue status IDs that should be
       interpreted as successful. For more information about possible status
       IDs, see <code class="command">smt-job --help</code>. Leaving this option empty
       is interpreted as default (1,4).
      </p></dd></dl></div></div><div class="sect3 " id="smt.config.smtconf.report"><div class="titlepage"><div><div><h4 class="title" id="smt.config.smtconf.report"><span class="number">7.2.1.6 </span><span class="name">[REPORT] Section of /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf.report">#</a></h4></div></div></div><p>
    The following options are available in the <code class="literal">[REPORT]</code>
    section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994745513824"><span class="term "><code class="option">reportEmail</code>
     </span></dt><dd><p>
       A comma separated list of e-mail addresses to send SMT status
       reports to. You can set this list with the YaST SMT Server
       module.
      </p></dd><dt id="idm139994745511600"><span class="term "><code class="option">reportEmailFrom</code>
     </span></dt><dd><p>
       <code class="literal">From</code> field of report e-mails. If not set, the
       default
       <code class="literal">root@<em class="replaceable ">HOSTNAME</em>.<em class="replaceable ">DOMAINNAME</em></code>
       will be used.
      </p></dd><dt id="idm139994745507824"><span class="term "><code class="option">mailServer</code>
     </span></dt><dd><p>
       Relay mail server. If empty, e-mails are sent directly.
      </p></dd><dt id="idm139994745505696"><span class="term "><code class="option">mailServerPort</code>
     </span></dt><dd><p>
       Port of the relay mail server set in <code class="option">mailServer</code>.
      </p></dd><dt id="idm139994745503136"><span class="term "><code class="option">mailServerUser</code>
     </span></dt><dd><p>
       User name for authentication to the mail server set in
       <code class="option">mailServer</code>.
      </p></dd><dt id="idm139994745500560"><span class="term "><code class="option">mailServerPassword</code>
     </span></dt><dd><p>
       Password for authentication to the mail server set in
       <code class="option">mailServer</code>.
      </p></dd></dl></div></div><div class="sect3 " id="idm139994742848736"><div class="titlepage"><div><div><h4 class="title" id="idm139994742848736"><span class="number">7.2.1.7 </span><span class="name">Example /etc/smt.conf</span> <a title="Permalink" class="permalink" href="#idm139994742848736">#</a></h4></div></div></div><div class="example" id="smt.mirroring.smtconf.ex"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 7.1: </span><span class="name">smt.conf </span><a title="Permalink" class="permalink" href="#smt.mirroring.smtconf.ex">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">[NU]
NUUrl=https://updates.suse.com/
NURegUrl=https://scc.suse.com/connect
NUUser = exampleuser
NUPass = examplepassword
ApiType = SCC

[DB]
config = dbi:mysql:database=smt;host=localhost
user = smt
pass = smt

[LOCAL]
# Default should be http://server.domain.top/
url = http://smt.example.com/
# This email address is used for registration at SCC
nccEmail = exampleuser@example.com
MirrorTo = /srv/www/htdocs
MirrorAll = false
MirrorSRC = false
forwardRegistration = true
rndRegister = 127
# The hook script that should be called before the smt-mirror script removes its lock
mirror_preunlock_hook =
# The hook script that should be called after the smt-mirror script removed its lock
mirror_postunlock_hook =
# specify proxy settings here, if you do not want to use the global proxy settings
# If you leave these options empty the global options are used.
#
# specify which proxy you want to use for HTTP connection
# in the form http://proxy.example.com:3128
HTTPProxy =
# specify which proxy you want to use for HTTPS connection
# in the form http://proxy.example.com:3128
HTTPSProxy =
# specify username and password if your proxy requires authentication
# in the form username:password
ProxyUser =
#
# require authentication to access the repository?
# Three possible authtypes can be configured here
# 1) none   : no authentication required (default)
# 2) lazy   : check only username and password. A valid user has access to all repositories
# 3) strict : check also if this user has access to the repository.
#
requiredAuthType = none
#
# the smt commands should run with this unix user
#
smtUser = smt
#
# ID of the GPG key to be used to sign modified (filtered) repositories.
# The key must be accessible by the user who runs SMT, i.e. the user specified
# in the 'smtUser' configuration option.
#
# If empty, the modified repositories will be unsigned.
#
signingKeyID =
#
# This string is sent in HTTP requests as UserAgent.
# If the key UserAgent does not exist, a default is used.
# If UserAgent is empty, no UserAgent string is set.
#
#UserAgent=
# Organization credentials for this SMT server.
# These are currently only used to get list of all available repositories
# from https://your.smt.url/repo/repoindex.xml
# Note: if authenticated as a client machine instead of these mirrorUser,
# the above URL returns only repositories relevant for that client.
mirrorUser =
mirrorPassword =

[REST]
# Enable administrative access to the SMT RESTService by setting enableRESTAdminAccess=1
# default: 0
enableRESTAdminAccess = 0
# Define the username the REST-Admin uses for login
# default: RESTroot
RESTAdminUser = RESTroot
# Define the password for the REST-Admin (note: empty password is invalid)
# default: &lt;empty&gt;
RESTAdminPassword =

[JOBQUEUE]
# maximum age of finished (non-persistent) jobs in days
# default: 8
maxFinishedJobAge = 8
# comma separated list of JobQueue status IDs that should be interpreted as successful
# See smt-job --help for more information about possible Status IDs
# Please note: An empty string will be interpreted as default (1,4).
# default: 1,4
# useful:  1,4,6
jobStatusIsSuccess = 1,4

[REPORT]
# comma separated list of eMail addresses where the status reports will be sent to
reportEmail = exampleuser@example.com
# from field of report mails - if empty it defaults to "root@&lt;hostname&gt;.&lt;domainname&gt;"
reportEmailFrom =
# relay mail server - leave empty if mail should be sent directly
mailServer =
mailServerPort =
# mail server authentication - leave empty if not required
mailServerUser =
mailServerPassword =</pre></div></div></div></div></div><div class="sect2 " id="smt.config.cronconf"><div class="titlepage"><div><div><h3 class="title" id="smt.config.cronconf"><span class="number">7.2.2 </span><span class="name">/etc/smt.d/smt-cron.conf</span> <a title="Permalink" class="permalink" href="#smt.config.cronconf">#</a></h3></div></div></div><p>
   The <code class="filename">/etc/smt.d/smt-cron.conf</code> configuration file
   contains options of the SMT commands launched as SMT scheduled jobs
   set with YaST (see <a class="xref" href="#smt.yast.scheduling" title="2.5. Setting the SMT Job Schedule with YaST">Section 2.5, “Setting the SMT Job Schedule with YaST”</a>). Cron is used
   to launch these scheduled jobs. The cron table is located in the
   <code class="filename">/etc/cron.d/novell.com-smt</code> file.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994742838528"><span class="term "><code class="option">SCC_SYNC_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt scc-sync</code> command, if
      called as part of an SMT scheduled job via cron. The default value
      is <code class="literal">"-L /var/log/smt/smt-sync.log --mail"</code>.
     </p></dd><dt id="idm139994742835440"><span class="term "><code class="option">MIRROR_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt mirror</code> command, if
      called as part of an SMT scheduled job via cron. The default value
      is <code class="literal">"-L /var/log/smt/smt-mirror.log --mail" </code>.
     </p></dd><dt id="idm139994742832336"><span class="term "><code class="option">REGISTER_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt register</code> command, if
      called as part of an SMT scheduled job via cron. The default value
      is <code class="literal">"-r -L /var/log/smt/smt-register.log --mail" </code>.
     </p></dd><dt id="idm139994746031152"><span class="term "><code class="option">REPORT_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt report</code> command, if
      called as part of an SMT scheduled job via cron. The default value
      is <code class="literal">"--mail --attach -L /var/log/smt/smt-report.log"
      </code>.
     </p></dd><dt id="idm139994746028112"><span class="term "><code class="option">JOBQUEUECLEANUP_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters for smt jobqueue cleanup, if called as a part of
      an SMT scheduled job via cron. The default value is <code class="literal">"--mail
      -L /var/log/smt/smt-jobqueuecleanup.log"</code>.
     </p></dd></dl></div></div></div><div class="sect1 " id="smt.tools.cert"><div class="titlepage"><div><div><h2 class="title" id="smt.tools.cert"><span class="number">7.3 </span><span class="name">Server Certificates</span> <a title="Permalink" class="permalink" href="#smt.tools.cert">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_certificates.xml</li><li><span class="ds-label">ID: </span>smt.tools.cert</li></ul></div></div></div></div><p>
  For communication between the SMT server and client machines, the
  encrypted HTTPS protocol is used, requiring a server certificate. If the
  certificate is not available, or if clients are not configured to use the
  certificate, the communication between server and clients will fail.
 </p><p>
  Every client must be able to verify the server certificate by trusting the CA
  (certificate authority) certificate that signed the server certificate.
  Therefore, the SMT server provides a copy of the CA at
  <code class="filename">/srv/www/htdocs/smt.crt</code>. This CA can be downloaded from
  every client via the URL
  <code class="literal">http://<em class="replaceable ">FQDN</em>/smt.crt</code>. The copy is
  created by the <code class="filename">/usr/lib/SMT/bin/smt-maintenance</code> script.
  Whenever SMT is started with <code class="command">systemctl start smt.target</code>,
  it checks the certificate. If a new CA certificate exists, it is copied again.
  Therefore, whenever the CA certificate is missing or changed, restart SMT
  using the <code class="command">systemctl restart smt.target</code> command.
   </p><p>
  When the SMT Server module applies configuration changes, it checks for
  the existence of the common server certificate. If the certificate does
  not exist, YaST asks whether the certificate should be created. If the
  user confirms, the YaST CA Management module is started.
 </p><div class="sect2 " id="idm139994746017520"><div class="titlepage"><div><div><h3 class="title" id="idm139994746017520"><span class="number">7.3.1 </span><span class="name">Certificate Expiration</span> <a title="Permalink" class="permalink" href="#idm139994746017520">#</a></h3></div></div></div><p>
   The common server certificate SMT uses is valid for one year. After
   that time, a new certificate is needed. Either generate a new certificate
   using YaST CA Management module or import a new certificate using the
   YaST Common Server Certificate module. Both options are described in
   the following sections.
  </p><p> As long as the same CA certificate is used, there is no need to
      update certificates on the client machines. The generated CA
      certificate is valid for 10 years. </p></div><div class="sect2 " id="smt.certificate.creating"><div class="titlepage"><div><div><h3 class="title" id="smt.certificate.creating"><span class="number">7.3.2 </span><span class="name">Creating a New Common Server Certificate</span> <a title="Permalink" class="permalink" href="#smt.certificate.creating">#</a></h3></div></div></div><p>
   To create a new common server certificate with YaST, proceed as
   follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST and select <span class="guimenu">Security and
     Users</span> › <span class="guimenu">CA Management</span>.
     Alternatively, start the YaST CA Management module from a command
     line by entering <code class="command">yast2 ca_mgm</code> as <code class="systemitem">root</code>.
    </p></li><li class="step "><p>
     Select the required CA and click <span class="guimenu">Enter CA</span>.
    </p></li><li class="step "><p>
     Enter the password if entering a CA for the first time. YaST displays
     the CA key information in the <span class="guimenu">Description</span> tab.
    </p></li><li class="step "><p>
     Click the <span class="guimenu">Certificates</span> tab (see
     <a class="xref" href="#fig.yast.ca_cert" title="Certificates of a CA">Figure 7.1, “Certificates of a CA”</a>) and select <span class="guimenu">Add</span> › <span class="guimenu">Add Server Certificate</span>.
    </p><div class="figure" id="fig.yast.ca_cert"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_ca_cert.png"><img src="images/yast2_ca_cert.png" width="" alt="Certificates of a CA" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 7.1: </span><span class="name">Certificates of a CA </span><a title="Permalink" class="permalink" href="#fig.yast.ca_cert">#</a></h6></div></div></li><li class="step " id="step.new.cert1"><p> Enter the fully qualified domain name of the server as
            <span class="guimenu">Common Name</span>. Add a valid e-mail address
          of the server administrator. Other fields, such as
            <span class="guimenu">Organization</span>, <span class="guimenu">Organizational
            Unit</span>, <span class="guimenu">Locality</span>, and
            <span class="guimenu">State</span> are optional. Click
            <span class="guimenu">Next</span> to proceed.</p><div id="idm139994738197344" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Host Name in Server Certificate</h6><p>
      The server certificate must contain the correct host name. If the
      client requests server <code class="literal">https://some.hostname/</code>, then
      <code class="literal">some.hostname</code> must be part of the certificate. The
      host name must either be used as the <span class="guimenu">Common Name</span>,
      see <a class="xref" href="#step.new.cert1" title="Step 5">Step 5</a>, or as the <span class="guimenu">Subject
      Alternative Name</span>, see <a class="xref" href="#step.new.cert2" title="Step 7">Step 7</a>:
      <code class="literal">DNS:some.hostname</code> and
      <code class="literal">IP:<em class="replaceable ">&lt;ipaddress&gt;</em></code>.
     </p></div></li><li class="step "><p> Enter a <span class="guimenu">Password</span> for the private key of
          the certificate and re-enter it in the next field to verify
          it. </p></li><li class="step " id="step.new.cert2"><p>
     If you want to define a <span class="guimenu">Subject Alternative Name</span>,
     click <span class="guimenu">Advanced Options</span>, select <span class="guimenu">Subject
     Alternative Name</span> from the list and click
     <span class="guimenu">Add</span>.
    </p><div id="idm139994742251056" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Subject Alternative Name</h6><p>
      If <span class="guimenu">Subject Alternative Name</span> be in the server certificate,
      then it needs to contain the DNS entry. If <span class="guimenu">Subject Alternative Name</span> is present,
      the <span class="guimenu">Common Name</span> (CN) is not checked anymore.
     </p></div></li><li class="step "><p>
     If you want to keep the default values for the other options, like
     <span class="guimenu">Key Length</span> and <span class="guimenu">Valid Period</span>,
     click <span class="guimenu">Next</span>. An overview of the certificate to be
     created is shown.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Create</span> to generate the certificate.
    </p></li><li class="step "><p>
     To export the new certificate as the common server certificate, select
     it in the <span class="guimenu">Certificates</span> tab and select <span class="guimenu">Export</span> › <span class="guimenu">Export as Common Server
     Certificate</span>.
    </p></li><li class="step "><p>
     After having created a new certificate, restart SMT using the
     <code class="command">systemctl restart smt.target</code> command. Restarting
     SMT ensures that the new certificate is copied from
     <code class="filename">/etc/ssl/certs/YaST-CA.pem</code> to
     <code class="filename">/srv/www/htdocs/smt.crt</code>, the copy SMT uses.
     Restarting SMT also restarts the Web server.
    </p></li></ol></div></div><p> For detailed information about managing certification and
      further usage of the YaST CA Management module and the Common
      Server Certificate module, refer to the <em class="citetitle "><em class="citetitle ">Security Guide</em></em>.
   It si available from <a class="link" href="https://www.suse.com/documentation/sles-12" target="_blank">https://www.suse.com/documentation/sles-12</a>.</p></div><div class="sect2 " id="smt.certificate.importing"><div class="titlepage"><div><div><h3 class="title" id="smt.certificate.importing"><span class="number">7.3.3 </span><span class="name">Importing a Common Server Certificate</span> <a title="Permalink" class="permalink" href="#smt.certificate.importing">#</a></h3></div></div></div><p>
   You can import an own common server certificate from a file. The
   certificate to be imported needs to be in the PKCS12 format with CA chain.
   Common server certificates can be imported with the YaST Common Server
   Certificate module.
  </p><p>
   To import an own certificate with YaST, proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST and select <span class="guimenu">Security and
     Users</span> › <span class="guimenu">Common Server Certificate</span>. Alternatively, start the YaST Common Server
     Certificate module from the command line by entering <code class="command">yast2
     common_cert</code> as <code class="systemitem">root</code>.
    </p><p>
     The description of the currently used common server certificate is
     shown in the dialog that opens.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Import</span> and select the file containing the
     certificate to be imported. Specify the certificate password in the
     <span class="guimenu">Password</span> field.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Next</span>. If the certificate is successfully
     imported, close YaST with <span class="guimenu">Finish</span>.
    </p></li><li class="step "><p>
     After having created a new certificate, restart SMT using the
     <code class="command">systemctl restart smt.target</code> command. Restarting
     SMT ensures that the new certificate is copied from
     <code class="filename">/etc/ssl/certs/YaST-CA.pem</code> to
     <code class="filename">/srv/www/htdocs/smt.crt</code>, the copy SMT uses.
     Restarting SMT also restarts the Web server.
    </p></li></ol></div></div></div><div class="sect2 " id="idm139994746285920"><div class="titlepage"><div><div><h3 class="title" id="idm139994746285920"><span class="number">7.3.4 </span><span class="name">Synchronizing Time between SMT Server and Clients</span> <a title="Permalink" class="permalink" href="#idm139994746285920">#</a></h3></div></div></div><p>
   The synchronization of time between the SMT server and clients is
   highly recommended. Each server certificate has a validity period. If the
   client happens to be set to a time outside of this period, the
   certificate validation on the client side fails.
  </p><p>
   Therefore, it is advisable to keep the time on the server and clients
   synchronized. You can easily synchronize the time using NTP (network time
   protocol). Use <code class="command">yast2 ntp-client</code> to configure an NTP
   client. Find detailed information about NTP in the <em class="citetitle ">Administration Guide</em>.
  </p></div></div></div><div class="chapter " id="smt.client"><div class="titlepage"><div><div><h1 class="title"><span class="number">8 </span><span class="name">Configuring Clients to Use SMT</span> <a title="Permalink" class="permalink" href="#smt.client">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_client.xml</li><li><span class="ds-label">ID: </span>smt.client</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.client.parameters"><span class="number">8.1 </span><span class="name">Using Kernel Parameters to Access an SMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.autoyast"><span class="number">8.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.clientsetupscript"><span class="number">8.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.yast"><span class="number">8.4 </span><span class="name">Configuring Clients with YaST</span></a></span></dt><dt><span class="sect1"><a href="#idm139994740418800"><span class="number">8.5 </span><span class="name">Registering SLE11 Clients against SMT Test Environment</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirror.testenv.sle12client"><span class="number">8.6 </span><span class="name">Registering SLE12 Clients against SMT Test Environment</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.repolist"><span class="number">8.7 </span><span class="name">Listing Accessible Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.onlinemigration"><span class="number">8.8 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.rhel"><span class="number">8.9 </span><span class="name">How to Update Red Hat Enterprise Linux with SMT</span></a></span></dt></dl></div></div><p>
  Any machine running SUSE Linux Enterprise 10 SP4, 11 SP1 or later, or any version of SUSE Linux Enterprise 12
  can be configured to register against SMT and download software updates
  from there, instead of communicating directly with SUSE Customer Center or Novell Customer
  Center.
 </p><p>
  If your network includes an SMT server to provide a local update source,
  you need to equip the client with the server's URL. As client and server
  communicate via the HTTPS protocol during registration, you also need to make
  sure the client trusts the server's certificate. In case you set up your
  SMT server to use the default server certificate, the CA certificate will
  be available on the SMT server at
  <code class="literal">http://<em class="replaceable ">FQDN</em>/smt.crt</code> .
 </p><p>
  If the certificate is not issued by a well-trusted authority, the
  registration process will import the certificate from the URL specified as
  <code class="systemitem">regcert</code> parameter (SUSE Linux Enterprise Server 10 and 11). For SLE 12,
  the certificate will be downloaded automatically from SMT. In this case,
  the client displays the new certificate details (its fingerprint), and you
  need to accept the certificate.
 </p><p>
  There are several ways to provide the registration information and to
  configure the client machine to use SMT:
 </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
    Provide the required information via kernel parameters at boot time
    (<a class="xref" href="#smt.client.parameters" title="8.1. Using Kernel Parameters to Access an SMT Server">Section 8.1, “Using Kernel Parameters to Access an SMT Server”</a>).
   </p></li><li class="listitem "><p>
    Configure the clients using an AutoYaST profile
    (<a class="xref" href="#smt.client.autoyast" title="8.2. Configuring Clients with AutoYaST Profile">Section 8.2, “Configuring Clients with AutoYaST Profile”</a>).
   </p></li><li class="listitem "><p>
    Use the <code class="command">clientSetup4SMT.sh</code> script
    (<a class="xref" href="#smt.client.clientsetupscript" title="8.3. Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12">Section 8.3, “Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12”</a>). This script can be run on
    a client to make it register against a specified SMT server.
   </p></li><li class="listitem "><p>
    In SUSE Linux Enterprise 11 and 12, you can set the SMT server URL with the YaST
    registration module during installation
    (<a class="xref" href="#smt.client.yast" title="8.4. Configuring Clients with YaST">Section 8.4, “Configuring Clients with YaST”</a>).
   </p></li></ol></div><p>
  These methods are described in the following sections.
 </p><div class="sect1 " id="smt.client.parameters"><div class="titlepage"><div><div><h2 class="title" id="smt.client.parameters"><span class="number">8.1 </span><span class="name">Using Kernel Parameters to Access an SMT Server</span> <a title="Permalink" class="permalink" href="#smt.client.parameters">#</a></h2></div></div></div><div id="idm139994746161568" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: <code class="literal">regcert</code> Parameter Support</h6><p>
    Note that the <code class="literal">regcert</code> kernel boot parameter is supported
    for SLE 10 and 11. It is not supported from SLE 12.
   </p></div><p>
   Any client can be configured to use SMT by providing the following kernel
   parameters during machine boot: <code class="literal">regurl</code> and
   <code class="literal">regcert</code>. The first parameter is mandatory, the latter is
   optional.
  </p><div id="idm139994746157920" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Beware of Typing Errors</h6><p>
    Make sure the values you enter are correct. If <code class="literal">regurl</code>
    has not been specified correctly, the registration of the update source
    will fail.
   </p><p>
    If an invalid value for <code class="literal">regcert</code> has been entered, you
    will be prompted for a local path to the certificate. In case
    <code class="literal">regcert</code> is not specified, it will default to
    <code class="literal">http://<em class="replaceable ">FQDN</em>/smt.crt</code> with
    <code class="literal">FQDN</code> being the name of the SMT server.
   </p></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994746152896"><span class="term ">regurl</span></dt><dd><p>
      URL of the SMT server.
     </p><p>
      For SLE 11 and older clients, the URL needs to be in the following
      format:
      <code class="literal">https://<em class="replaceable ">FQDN</em>/center/regsvc/</code>
      with <em class="replaceable ">FQDN</em> being the fully qualified host name
      of the SMT server. It must be identical to the FQDN of the server
      certificate used on the SMT server. Example:
     </p><div class="verbatim-wrap"><pre class="screen">regurl=https://smt.example.com/center/regsvc/</pre></div><p>
      For SLE 12 clients, the URL needs to be in the following format:
      <code class="literal">https://<em class="replaceable ">FQDN</em>/connect/</code> with
      <em class="replaceable ">FQDN</em> being the fully qualified host name of
      the SMT server. It must be identical to the FQDN of the server
      certificate used on the SMT server. Example:
     </p><div class="verbatim-wrap"><pre class="screen">regurl=https://smt.example.com/connect/</pre></div></dd><dt id="idm139994716560560"><span class="term ">regcert</span></dt><dd><p>
      Location of the SMT server's CA certificate. Specify one of the
      following locations:
     </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994716558720"><span class="term ">URL</span></dt><dd><p>
         Remote location (HTTP, HTTPS, or FTP) from which the certificate can be
         downloaded. Example:
        </p><div class="verbatim-wrap"><pre class="screen">regcert=http://smt.example.com/smt.crt</pre></div></dd><dt id="idm139994716556352"><span class="term ">Floppy</span></dt><dd><p>
         Specifies a location on a floppy. The floppy needs to be inserted at
         boot time—you will not be prompted to insert it if it is
         missing. The value needs to start with the string
         <code class="literal">floppy</code>, followed by the path to the certificate.
         Example:
        </p><div class="verbatim-wrap"><pre class="screen">regcert=floppy/smt/smt-ca.crt</pre></div></dd><dt id="idm139994716553488"><span class="term ">Local Path</span></dt><dd><p>
         Absolute path to the certificate on the local machine. Example:
        </p><div class="verbatim-wrap"><pre class="screen">regcert=/data/inst/smt/smt-ca.cert</pre></div></dd><dt id="idm139994716551168"><span class="term ">Interactive</span></dt><dd><p>
         Use <code class="literal">ask</code> to open a pop-up menu during installation
         where you can specify the path to the certificate. Do not use this
         option with AutoYaST. Example:
        </p><div class="verbatim-wrap"><pre class="screen">regcert=ask</pre></div></dd><dt id="idm139994716548336"><span class="term ">Deactivate Certificate Installation</span></dt><dd><p>
         Use <code class="literal">done</code> if either the certificate will be
         installed by an add-on product, or if you are using a certificate
         issued by an official certificate authority. Example:
        </p><div class="verbatim-wrap"><pre class="screen">regcert=done</pre></div></dd></dl></div></dd></dl></div><div id="idm139994716544832" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Change of SMT Server Certificate</h6><p>
    If the SMT server gets a new certificate from an untrusted CA, the
    clients need to retrieve the new CA certificate file.
   </p><p>
    On SLE 10 and 11, this is done automatically with the registration process
    in the following cases:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>If a URL was used at installation time to retrieve the
      certificate.</p></li><li class="listitem "><p>If the <code class="literal">regcert</code> parameter was omitted and
      thus the default URL is used.</p></li></ul></div><p>If the certificate was loaded using any other
    method, such as floppy or local path, the CA certificate will not be
    updated.
   </p><p>
    On SUSE Linux Enterprise Server 12, after the certificate has changed, YaST displays a dialog
    for importing a new certificate. If you confirm importing the new
    certificate, the old one is replaced with the new one.
   </p></div></div><div class="sect1 " id="smt.client.autoyast"><div class="titlepage"><div><div><h2 class="title" id="smt.client.autoyast"><span class="number">8.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span> <a title="Permalink" class="permalink" href="#smt.client.autoyast">#</a></h2></div></div></div><p>
   Clients can be configured to register with SMT server via AutoYaST profile.
   For general information about creating AutoYaST profiles and preparing automatic
   installation, refer to the <span class="emphasis"><em>AutoYaST Guide</em></span>. In this section,
   only SMT specific configuration is described.
  </p><p>
   To configure SMT specific data using AutoYaST, follow the steps for the
   relevant version of SMT client.
  </p><div class="sect2 " id="smt.client.autoyast.sle11"><div class="titlepage"><div><div><h3 class="title" id="smt.client.autoyast.sle11"><span class="number">8.2.1 </span><span class="name">Configuring SUSE Linux Enterprise 11 Clients</span> <a title="Permalink" class="permalink" href="#smt.client.autoyast.sle11">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      As <code class="systemitem">root</code>, start YaST and select <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation</span> to start the graphical AutoYaST front-end.
     </p><p>
      From a command line, you can start the graphical AutoYaST front-end with the
      <code class="command">yast2 autoyast</code> command.
     </p></li><li class="step "><p>
      Open an existing profile using <span class="guimenu">File</span> › <span class="guimenu">Open</span>, create a profile based on the
      current system's configuration using <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference Profile</span>, or work with an empty profile.
     </p></li><li class="step "><p>
      Select <span class="guimenu">Software</span> › <span class="guimenu">Novell Customer
      Center Configuration</span>. An overview of the current
      configuration is shown.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Configure</span>.
     </p></li><li class="step "><p>
      Set the URL of the <span class="guimenu">SMT Server</span> and, optionally, the
      location of the <span class="guimenu">SMT Certificate</span>. The possible values
      are the same as for the kernel parameters <code class="literal">regurl</code> and
      <code class="literal">regcert</code> (see <a class="xref" href="#smt.client.parameters" title="8.1. Using Kernel Parameters to Access an SMT Server">Section 8.1, “Using Kernel Parameters to Access an SMT Server”</a>).
      The only exception is that the <code class="literal">ask</code> value for
      <code class="literal">regcert</code> does not work in AutoYaST, because it requires
      user interaction. If using it, the registration process will be skipped.
     </p></li><li class="step "><p>
      Perform all other configuration needed for the systems to be deployed.
     </p></li><li class="step "><p>
      Select <span class="guimenu">File</span> › <span class="guimenu">Save As</span> and enter a file name for the profile, such as
      <code class="filename">autoinst.xml</code>.
     </p></li></ol></div></div></div><div class="sect2 " id="smt.client.autoyast.sle12"><div class="titlepage"><div><div><h3 class="title" id="smt.client.autoyast.sle12"><span class="number">8.2.2 </span><span class="name">Configuring SUSE Linux Enterprise 12 Clients</span> <a title="Permalink" class="permalink" href="#smt.client.autoyast.sle12">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      As <code class="systemitem">root</code>, start YaST and select <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation</span> to start the graphical AutoYaST front-end.
     </p><p>
      From a command line, you can start the graphical AutoYaST front-end with the
      <code class="command">yast2 autoyast</code> command.
     </p></li><li class="step "><p>
      Open an existing profile using <span class="guimenu">File</span> › <span class="guimenu">Open</span>, create a profile based on the
      current system's configuration using <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference Profile</span>, or work with an empty profile.
     </p></li><li class="step "><p>
      Select <span class="guimenu">Software</span> › <span class="guimenu">Product
      Registration</span>. An overview of the current
      configuration is shown.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Edit</span>.
     </p></li><li class="step "><p>
      Check <span class="guimenu">Register the Product</span>, set the URL of the SMT
      server in <span class="guimenu">Use Specific Server URL Instead of the
      Default</span>, and you can set the <span class="guimenu">Optional SSL Server
      Certificate URL</span>. The possible values for the server URL are the
      same as for the kernel parameter <code class="literal">regurl</code>. For the SSL
      certificate location, you can use either HTTP or HTTPS based URLs.
     </p></li><li class="step "><p>
      Perform all other configuration needed for the systems to be deployed,
      then click <span class="guimenu">Finish</span> to return to the main screen.
     </p></li><li class="step "><p>
      Select <span class="guimenu">File</span> › <span class="guimenu">Save As</span> and enter a file name for the profile, such as
      <code class="filename">autoinst.xml</code>.
     </p></li></ol></div></div></div></div><div class="sect1 " id="smt.client.clientsetupscript"><div class="titlepage"><div><div><h2 class="title" id="smt.client.clientsetupscript"><span class="number">8.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12</span> <a title="Permalink" class="permalink" href="#smt.client.clientsetupscript">#</a></h2></div></div></div><p>
   In SLE 11 and 12, the
   <code class="command">/usr/share/doc/packages/smt/clientSetup4SMT.sh</code> script is
   provided together with SMT. This script allows you to configure a client
   machine to use an SMT server. It can also be used to reconfigure an
   existing client to use a different SMT server.
  </p><div id="idm139994716797168" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Installation of <code class="command">wget</code></h6><p>
    The script <code class="filename">clientSetup4SMT.sh</code> itself uses
    <code class="command">wget</code>, so <code class="command">wget</code> must be installed on
    the client.
   </p></div><div id="idm139994716794160" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Upgrade <code class="command">clientSetup4SMT.sh</code></h6><p>
    If you migrated your client OS from an older SUSE Linux Enterprise, check if the version
    of the <code class="command">clientSetup4SMT.sh</code> script on your host is up to date.
   <code class="command">clientSetup4SMT.sh</code> from older versions of SMT cannot manage SMT 12 clients.
    If you apply software patches regularly on your SMT server, you can always find the latest version
    of <code class="command">clientSetup4SMT.sh</code> at <code class="filename">&lt;SMT_HOSTNAME&gt;/repo/tools/clientSetup4SMT.sh</code>.
   </p></div><p>
   To configure a client machine to use SMT with the
   <code class="command">clientSetup4SMT.sh</code> script, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Copy the <code class="filename">clientSetup4SMT.sh</code> script from your SMT
     server to the client machine. The script is available at
     <code class="filename">&lt;SMT_HOSTNAME&gt;/repo/tools/clientSetup4SMT.sh</code>
     and <code class="filename">/srv/www/htdocs/repo/tools/clientSetup4SMT.sh</code>.
     You can download it with a browser, using <code class="command">wget</code>, or by
     another means, such as with <code class="command">scp</code>.
    </p></li><li class="step "><p>
     As <code class="systemitem">root</code>, execute the script on the client machine. The script can be
     executed in two ways. In the first case, the script name is followed by
     the registration URL. For example:
    </p><div class="verbatim-wrap"><pre class="screen">./clientSetup4SMT.sh https://smt.example.com/center/regsvc</pre></div><p>
     In the second case, the script uses the <code class="option">--host</code> option
     followed by the host name of the SMT server, and
     <code class="option">--regcert</code> followed by the URL of the SSL certificate; for
     example:
    </p><div class="verbatim-wrap"><pre class="screen">./clientSetup4SMT.sh --host smt.example.com \
  --regcert http://smt.example.com/certs/smt.crt</pre></div><p>
     In this case, without any <span class="quote">“<span class="quote">namespace</span>”</span> specified, the client
     will be configured to use the default production repositories. If
     <code class="option">--namespace <em class="replaceable ">GROUPNAME</em></code> is
     specified, the client will use that staging group.
    </p></li><li class="step "><p>
     The script downloads the server's CA certificate. Accept it by pressing
     <span class="keycap">Y</span>.
    </p></li><li class="step "><p>
     The script performs all necessary modifications on the client. However,
     the registration itself is not performed by the script.
    </p></li><li class="step "><p>
     The script downloads and asks to accept additional GPG keys to sign
     repositories with.
    </p></li><li class="step "><p>
     On SLE 11, perform the registration by executing
     <code class="command">suse_register</code> or running the <code class="command">yast2
     inst_suse_register</code> module on the client.
    </p><p>
     On SLE 12, perform the registration by executing
    </p><div class="verbatim-wrap"><pre class="screen">SUSEConnect -p <em class="replaceable ">PRODUCT_NAME</em> --url <em class="replaceable ">https://smt.example.org</em></pre></div><p>
     or running the <code class="command">yast2 registration</code> (SUSE Linux Enterprise Server 12 SP1 and newer) or
     <code class="command">yast2 scc</code> (SUSE Linux Enterprise Server 12) module on the client.
    </p></li></ol></div></div><p>
   The <code class="command">clientSetup4SMT.sh</code> script works with SUSE Linux Enterprise 10 SP2 and
   later Service Packs, SLE 11, and SLE 12 systems.
  </p><p>
   This script is also provided for download. You can get it by running
  </p><div class="verbatim-wrap"><pre class="screen">wget http://smt.example.com/repo/tools/clientSetup4SMT.sh</pre></div><div id="idm139994714648352" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Extension and Module Registration in SUSE Linux Enterprise 12</h6><p>
    When registering an existing system against SMT 12—both on the
    command line and using YaST—you need to register additional
    extensions and modules separately, one by one. This applies both to
    already installed extensions and to extensions that you plan to install.
   </p></div><div class="sect2 " id="idm139994714646688"><div class="titlepage"><div><div><h3 class="title" id="idm139994714646688"><span class="number">8.3.1 </span><span class="name">Problems Downloading GPG Keys from the Server</span> <a title="Permalink" class="permalink" href="#idm139994714646688">#</a></h3></div></div></div><p>
    The <code class="literal">apache2-example-pages</code> package includes a
    <code class="filename">robots.txt</code> file. The file is installed into the
    Apache2 document root directory, and controls how clients can access files
    from the Web server. If this package is installed on the server,
    <code class="filename">clientSetup4SMT.sh</code> fails to download the keys stored
    under <code class="filename">/repo/keys</code>.
   </p><p>
    You can solve this problem by either editing
    <code class="filename">robots.txt</code>, or uninstalling the
    <code class="literal">apache2-example-pages</code> package.
   </p><p>
    If you choose to edit the <code class="filename">robots.txt</code> file, add before
    the <code class="literal">Disallow: /</code> statement:
   </p><div class="verbatim-wrap"><pre class="screen">Allow: /repo/keys</pre></div></div></div><div class="sect1 " id="smt.client.yast"><div class="titlepage"><div><div><h2 class="title" id="smt.client.yast"><span class="number">8.4 </span><span class="name">Configuring Clients with YaST</span> <a title="Permalink" class="permalink" href="#smt.client.yast">#</a></h2></div></div></div><div class="sect2 " id="idm139994714638512"><div class="titlepage"><div><div><h3 class="title" id="idm139994714638512"><span class="number">8.4.1 </span><span class="name">Configuring Clients with YaST in SLE 11</span> <a title="Permalink" class="permalink" href="#idm139994714638512">#</a></h3></div></div></div><p>
    To configure a client to perform the registration against an SMT server
    use the YaST registration module (<code class="command">yast2
    inst_suse_register</code>).
   </p><p>
    Click <span class="guimenu">Advanced</span> › <span class="guimenu">Local Registration
    Server</span> and enter the name of the SMT server plus
    the path to the registration internals
    (<code class="filename">/center/regsvc/</code>), for example:
   </p><div class="verbatim-wrap"><pre class="screen">https://smt.example.com/center/regsvc/</pre></div><p>
    After confirmation the certificate is loaded and the user is asked to
    accept it. Then continue.
   </p><div id="idm139994740428656" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Staging Groups Registration</h6><p>
     If a staging group is used, make sure that settings in
     <code class="filename">/etc/suseRegister.conf</code> are done accordingly. If not
     already done, modify the <code class="literal">register=</code> parameter and append
     <code class="literal">&amp;namespace=<em class="replaceable ">NAMESPACE</em></code>.
     For more information about staging groups, see
     <a class="xref" href="#smt.yast.staging.stage" title="4.3. Staging Repositories">Section 4.3, “Staging Repositories”</a>.
    </p><p>
     Alternatively, use the <code class="command">clientSetup4SMT.sh</code> script (see
     <a class="xref" href="#smt.client.clientsetupscript" title="8.3. Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12">Section 8.3, “Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12”</a>).
    </p></div></div><div class="sect2 " id="idm139994740423296"><div class="titlepage"><div><div><h3 class="title" id="idm139994740423296"><span class="number">8.4.2 </span><span class="name">Configuring Clients with YaST in SLE 12</span> <a title="Permalink" class="permalink" href="#idm139994740423296">#</a></h3></div></div></div><p>
    To configure a client to perform the registration against an SMT server
    use the YaST <span class="guimenu">Product Registration</span> module
    <code class="command">yast2 registration</code> (SUSE Linux Enterprise Server 12 SP1 or newer) or <code class="command">yast2
    scc</code> (SUSE Linux Enterprise Server 12).
   </p><p>
    On the client, the credentials are not necessary and you may leave the
    relevant fields empty. Click <span class="guimenu">Local Registration Server</span>
    and enter its URL. Then click <span class="guimenu">Next</span> until the exit from
    the module.
   </p></div></div><div class="sect1 " id="idm139994740418800"><div class="titlepage"><div><div><h2 class="title" id="idm139994740418800"><span class="number">8.5 </span><span class="name">Registering SLE11 Clients against SMT Test Environment</span> <a title="Permalink" class="permalink" href="#idm139994740418800">#</a></h2></div></div></div><p>
   To configure a client to register against the test environment instead of
   the production environment, modify
   <code class="filename">/etc/suseRegister.conf</code> on the client machine by
   setting:
  </p><div class="verbatim-wrap"><pre class="screen">register = command=register&amp;namespace=testing</pre></div><p>
   For more information about using SMT with a test environment, see
   <a class="xref" href="#smt.mirroring.testenv" title="3.5. Using the Test Environment">Section 3.5, “Using the Test Environment”</a>.
  </p></div><div class="sect1 " id="smt.mirror.testenv.sle12client"><div class="titlepage"><div><div><h2 class="title" id="smt.mirror.testenv.sle12client"><span class="number">8.6 </span><span class="name">Registering SLE12 Clients against SMT Test Environment</span> <a title="Permalink" class="permalink" href="#smt.mirror.testenv.sle12client">#</a></h2></div></div></div><p>
   To configure a client to register against the test environment instead of
   the production environment, modify <code class="filename">/etc/SUSEConnect</code> on
   the client machine by setting:
  </p><div class="verbatim-wrap"><pre class="screen">namespace: testing</pre></div><p>
   For more information about using SMT with a test environment, see
   <a class="xref" href="#smt.mirroring.testenv" title="3.5. Using the Test Environment">Section 3.5, “Using the Test Environment”</a>.
  </p></div><div class="sect1 " id="smt.clients.repolist"><div class="titlepage"><div><div><h2 class="title" id="smt.clients.repolist"><span class="number">8.7 </span><span class="name">Listing Accessible Repositories</span> <a title="Permalink" class="permalink" href="#smt.clients.repolist">#</a></h2></div></div></div><p>
   To retrieve the accessible repositories for a client, download
   <code class="filename">repo/repoindex.xml</code> from the SMT server with the
   client's credentials. The credentials are stored in
   <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> (SUSE Linux Enterprise Server 12) or
   <code class="filename">/etc/zypp/credentials.d/NCCcredentials</code> (SUSE Linux Enterprise Server 11) on the
   client machine. Using <code class="command">wget</code>, the command for testing could
   be as follows:
  </p><div class="verbatim-wrap"><pre class="screen">wget https://<em class="replaceable ">USER</em>:<em class="replaceable ">PASS</em>@smt.example.com/repo/repoindex.xml</pre></div><p>
   <code class="filename">repoindex.xml</code> returns the complete repository list as
   they come from the vendor. If a repository is marked for staging,
   <code class="filename">repoindex.xml</code> lists the repository in the
   <code class="literal">full</code> namespace (<code class="filename">repos/full/$RCE</code>).
  </p><p>
   To get a list of all repositories available on the SMT server, use the
   credentials specified in the <code class="literal">[LOCAL]</code> section of
   <code class="filename">/etc/smt.conf</code> on the server as
   <code class="literal">mirrorUser</code> and <code class="literal">mirrorPassword</code>.
  </p></div><div class="sect1 " id="smt.client.onlinemigration"><div class="titlepage"><div><div><h2 class="title" id="smt.client.onlinemigration"><span class="number">8.8 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span> <a title="Permalink" class="permalink" href="#smt.client.onlinemigration">#</a></h2></div></div></div><p>
   SUSE Linux Enterprise clients registered against SMT can be migrated online to the latest
   service pack of the same major release the same way as clients registered
   against SUSE Customer Center or Novell Customer Center. Before starting the migration, make
   sure that SMT is configured to provide the correct version of repositories
   to which you need the clients to migrate.
  </p><p>
   For detailed information on online migration, see
   <a class="link" href="https://www.suse.com/documentation/sles11/book_sle_deployment/data/cha_update_sle.html" target="_blank">https://www.suse.com/documentation/sles11/book_sle_deployment/data/cha_update_sle.html</a>
   for SUSE Linux Enterprise 11 clients, or <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 19 “Upgrading SUSE Linux Enterprise”</span> for SUSE Linux Enterprise 12
   clients.
  </p></div><div class="sect1 " id="smt.clients.rhel"><div class="titlepage"><div><div><h2 class="title" id="smt.clients.rhel"><span class="number">8.9 </span><span class="name">How to Update Red Hat Enterprise Linux with SMT</span> <a title="Permalink" class="permalink" href="#smt.clients.rhel">#</a></h2></div></div></div><p>
   SMT enables customers that possess the required entitlements to mirror
   updates for Red Hat Enterprise Linux (RHEL). Refer to
   <a class="link" href="http://www.suse.com/products/expandedsupport/" target="_blank">http://www.suse.com/products/expandedsupport/</a> for
   details on SUSE Linux Enterprise Server Subscription with Expanded Support. This section discusses
   the actions required to configure the SMT server and clients (RHEL
   servers) for this solution.
  </p><div id="idm139994739397520" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: SUSE Linux Enterprise Server 10</h6><p>
    Configuring RHEL client with Subscription Management Tool for SUSE Linux Enterprise (SMT
    1.0) running SUSE Linux Enterprise Server 10 is slightly different. For more information, see
    <a class="link" href="http://www.novell.com/support/search.do?usemicrosite=true&amp;searchString=7001751" target="_blank">How
    to update Red Hat Enterprise Linux with SMT.</a>
   </p></div><div class="sect2 " id="smt.client.rhel.server"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.server"><span class="number">8.9.1 </span><span class="name">How to Prepare SMT Server for Mirroring and Publishing Updates for RHEL</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.server">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install SUSE Linux Enterprise Server (SLES) with the SMT packages as per the documentation on
      the respective products.
     </p></li><li class="step "><p>
      During SMT setup, use organization credentials that have access to
      Novell-provided RHEL update repositories.
     </p></li><li class="step "><p>
      Verify that the organization credentials have access to download updates
      for the Red Hat products with
     </p><div class="verbatim-wrap"><pre class="screen">smt-repos -m | grep RES</pre></div></li><li class="step "><p>
      Enable mirroring of the RHEL update repositories for the desired
      architecture(s):
     </p><div class="verbatim-wrap"><pre class="screen">smt-repos -e <em class="replaceable ">REPO-NAME</em> <em class="replaceable ">ARCHITECTURE</em></pre></div></li><li class="step "><p>
      Mirror the updates and log verbose output:
     </p><div class="verbatim-wrap"><pre class="screen">smt-mirror -d -L /var/log/smt/smt-mirror.log</pre></div><p>
      The updates for RHEL will also be mirrored automatically as part of the
      default nightly SMT mirroring cron job. When the mirror process of the
      repositories for your RHEL products has completed, the updates are available
      via
     </p><div class="verbatim-wrap"><pre class="screen">http://smt-server.your-domain.top/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/</pre></div></li><li class="step "><p>
      To enable GPG checking of the repositories, the key used to sign the
      repositories needs to be made available to the RHEL clients. This key is
      now available in the res-signingkeys package, which is included in the
      SMT 11 installation source.
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Install the <code class="literal">res-signingkeys</code> package with the command
       </p><div class="verbatim-wrap"><pre class="screen">zypper in -y res-signingkeys</pre></div></li><li class="listitem "><p>
        The installation of the package stores the key file as
        <code class="filename">/srv/www/htdocs/repo/keys/res-signingkeys.key</code>.
       </p></li><li class="listitem "><p>
        Now the key is available to the clients and can be imported into their
        RPM database as described later.
       </p></li></ul></div></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.yum"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.yum"><span class="number">8.9.2 </span><span class="name">How to Configure the YUM Client on RHEL 5.2 to Receive Updates from SMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.yum">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Import the repository signing key downloaded above into the local RPM
      database with
     </p><div class="verbatim-wrap"><pre class="screen">rpm --import http://<em class="replaceable ">smt.example.com</em>/repo/keys/res-signingkeys.key</pre></div></li><li class="step "><p>
      Create a file in <code class="filename">/etc/yum.repos.d/</code> and name it
      <code class="literal">RES5.repo</code>.
     </p></li><li class="step "><p>
      Edit the file and enter the repository data, and point to the repository on
      the SMT server as follows:
     </p><div class="verbatim-wrap"><pre class="screen">[smt]
name=SMT repository
baseurl=http://<em class="replaceable ">smt.example.com</em>/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/
enabled=1
gpgcheck=1</pre></div><p>
      Example of base URL:
     </p><div class="verbatim-wrap"><pre class="screen">http://smt.mycompany.com/repo/$RCE/RES5/i386/</pre></div></li><li class="step "><p>
      Save the file.
     </p></li><li class="step "><p>
      Disable standard Red Hat repositories by setting
     </p><div class="verbatim-wrap"><pre class="screen">enabled=0</pre></div><p>
      in the repository entries in other files in
      <code class="filename">/etc/yum.repos.d/</code> (if any are enabled).
     </p><p>
      Both YUM and the update notification applet should work correctly now and
      notify of available updates when applicable. You may need to restart the
      applet.
     </p></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.up2date"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.up2date"><span class="number">8.9.3 </span><span class="name">How to Configure the UP2DATE Client on RHEL 3.9 and 4.7 to Receive Updates from SMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.up2date">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Import the repository signing key downloaded above into the local RPM
      database with
     </p><div class="verbatim-wrap"><pre class="screen">rpm --import http://<em class="replaceable ">smt.example.com</em>/repo/keys/res-signingkeys.key</pre></div></li><li class="step "><p>
      Edit the file <code class="filename">/etc/sysconfig/rhn/sources</code> and make
      the following changes:
     </p></li><li class="step "><p>
      Comment out any lines starting with <code class="literal">up2date</code>.
     </p><p>
      Normally, there will be a line that says "up2date default".
     </p></li><li class="step "><p>
      Add an entry pointing to the SMT repository (all in one line):
     </p><div class="verbatim-wrap"><pre class="screen">yum <em class="replaceable ">REPO_NAME</em> http://<em class="replaceable ">smt.example.com</em>/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/</pre></div><p>
      where <code class="literal">repo-name</code> should be set to RES3 for 3.9 and RES4
      for 4.7.
     </p></li><li class="step "><p>
      Save the file.
     </p></li></ol></div></div><p>
    Both up2date and the update notification applet should work correctly now,
    pointing to the SMT repository and indicating updates when available. In
    case of trouble, try to restart the applet.
   </p><p>
    To ensure correct reporting of the Red Hat Enterprise systems in SUSE Customer Center,
    they need to be registered against your SMT server. For this a special
    suseRegisterRES package is provided through the RES* repositories and it should
    be installed, configured and executed as described below.
   </p></div><div class="sect2 " id="smt.client.rhel.rhel52"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.rhel52"><span class="number">8.9.4 </span><span class="name">How to Register RHEL 5.2 against SMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.rhel52">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the suseRegisterRES package.
     </p><div class="verbatim-wrap"><pre class="screen">yum install suseRegisterRES</pre></div><div id="idm139994744631392" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Packages</h6><p>
       You may need to install the <code class="literal">perl-Crypt-SSLeay</code> and
       <code class="literal">perl-XML-Parser</code> packages from the original RHEL
       media.
      </p></div></li><li class="step "><p>
      Copy the SMT certificate to the system:
     </p><div class="verbatim-wrap"><pre class="screen">wget http://<em class="replaceable ">smt.example.com</em>/smt.crt</pre></div><div class="verbatim-wrap"><pre class="screen">cat smt.crt &gt;&gt; /etc/pki/tls/cert.pem</pre></div></li><li class="step "><p>
      Edit <code class="filename">/etc/suseRegister.conf</code> to point to SMT by
      changing the URL value to
     </p><div class="verbatim-wrap"><pre class="screen">url: https://<em class="replaceable ">smt.example.com</em>/center/regsvc/</pre></div><p>
      or (for SUSE Customer Center)
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/connect/</pre></div></li><li class="step "><p>
      Register the system:
     </p><div class="verbatim-wrap"><pre class="screen">suse_register</pre></div></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.rhel4739"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.rhel4739"><span class="number">8.9.5 </span><span class="name">How to Register RHEL 4.7 and RHEL 3.9 against SMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.rhel4739">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the <code class="literal">suseRegisterRES</code> package:
     </p><div class="verbatim-wrap"><pre class="screen">up2date --get suseRegisterRES
up2date --get perl-XML-Writer
rpm -ivh /var/spool/up2date/suseRegisterRES*.rpm /var/spool/up2date/perl-XML-Writer-0*.rpm</pre></div><div id="idm139994713707200" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Packages</h6><p>
       You may need to install the <code class="literal">perl-Crypt-SSLeay</code> and
       <code class="literal">perl-XML-Parser</code> packages from the original RHEL
       media.
      </p></div></li><li class="step "><p>
      Copy the SMT certificate to the system:
     </p><div class="verbatim-wrap"><pre class="screen">wget http://<em class="replaceable ">smt.example.com</em>/smt.crt</pre></div><div class="verbatim-wrap"><pre class="screen">cat smt.crt &gt;&gt; /usr/share/ssl/cert.pem</pre></div></li><li class="step "><p>
      Edit <code class="filename">/etc/suseRegister.conf</code> to point to SMT by
      changing the URL value to
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/center/regsvc/</pre></div><p>
      or (for SUSE Customer Center)
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/connect/</pre></div></li><li class="step "><p>
      Register the system:
     </p><div class="verbatim-wrap"><pre class="screen">suse_register</pre></div></li></ol></div></div></div></div></div><div class="chapter " id="smt.advanced"><div class="titlepage"><div><div><h1 class="title"><span class="number">9 </span><span class="name">Advanced Topics</span> <a title="Permalink" class="permalink" href="#smt.advanced">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_advanced.xml</li><li><span class="ds-label">ID: </span>smt.advanced</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.backup"><span class="number">9.1 </span><span class="name">Backup of the SMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.disconnected"><span class="number">9.2 </span><span class="name">Disconnected SMT Servers</span></a></span></dt></dl></div></div><p>
  This chapter covers usage scenarios beyond the regular workflow to
  give you more control over your SMT server.
 </p><div class="sect1 " id="smt.backup"><div class="titlepage"><div><div><h2 class="title" id="smt.backup"><span class="number">9.1 </span><span class="name">Backup of the SMT Server</span> <a title="Permalink" class="permalink" href="#smt.backup">#</a></h2></div></div></div><p>
   Creating backups of the SMT server regularly can help restore it quickly
   and reliably if the server fails.
  </p><p>
   There are three main parts on the SMT server to back up:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Configuration files
    </p></li><li class="listitem "><p>
     Package repositories
    </p></li><li class="listitem "><p>
     The database
    </p></li></ul></div><div class="sect2 " id="smt.backup.conf_files"><div class="titlepage"><div><div><h3 class="title" id="smt.backup.conf_files"><span class="number">9.1.1 </span><span class="name">Configuration Files and Repositories</span> <a title="Permalink" class="permalink" href="#smt.backup.conf_files">#</a></h3></div></div></div><p>
    The SMT server configuration is stored in the
    <code class="filename">/etc/smt.conf</code> file and files in the
    <code class="filename">/etc/smt.d</code> directory.
   </p><p>
    As SMT depends on the services provided by the Apache Web server and
    Maria DB database engine, you need to back up their configuration files as
    well. Apache configuration files are located in the
    <code class="filename">/etc/apache2</code> directory, while configuration of
    Maria DB is stored in <code class="filename">/etc/my.cnf</code>,
    <code class="filename">/etc/mysqlaccess.conf</code>, and files in the
    <code class="filename">/etc/my.cnf.d</code> directory.
   </p><p>
    Package repositories are stored in the
    <code class="filename">/srv/www/htdocs/repo</code> directory. While you can
    normally mirror the repositories on the restored server from the update
    server as well, the download can take a long time. Therefore backing up the
    repositories can save you time and bandwidth. Moreover, backing up
    the repositories is necessary if you are using repository staging and
    want to restore the snapshots of the repositories (see
    <a class="xref" href="#smt.staging" title="3.6. Testing and Filtering Update Repositories with Staging">Section 3.6, “Testing and Filtering Update Repositories with Staging”</a>).
   </p><div id="idm139994713681584" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Size of the Repositories</h6><p>
     The software repositories can be significant in size, and you will need to
     transfer them from the update server.
    </p></div><p>
    Use your preferred tool to back up the configuration and repository files.
   </p></div><div class="sect2 " id="smt.backup.db"><div class="titlepage"><div><div><h3 class="title" id="smt.backup.db"><span class="number">9.1.2 </span><span class="name">The Database</span> <a title="Permalink" class="permalink" href="#smt.backup.db">#</a></h3></div></div></div><p>
    SMT uses the Maria DB database to store information about clients,
    registrations, machine data, which repositories are enabled for mirroring, and
    custom repositories. Unlike the configuration files and repositories, the
    database information cannot be recovered without a valid backup.
   </p><p>
    To back up the SMT database, you can for example create a cron job that
    performs an SQL dump into a plain text file:
   </p><div class="verbatim-wrap"><pre class="screen">mysqldump -u root -p <em class="replaceable ">SMT_DB_PASSWORD</em> smt &gt; /<em class="replaceable ">BACKUP_DIR</em>/smt-db-backup.sql</pre></div><p>
    Then add the resulting file to your regular backup jobs.
   </p></div></div><div class="sect1 " id="smt.disconnected"><div class="titlepage"><div><div><h2 class="title" id="smt.disconnected"><span class="number">9.2 </span><span class="name">Disconnected SMT Servers</span> <a title="Permalink" class="permalink" href="#smt.disconnected">#</a></h2></div></div></div><p>
   In some restricted environments it is not possible for SMT servers to
   access the Internet because they are located on disconnected or isolated
   networks. In this case, you can back up the relevant data on an external
   storage device using special parameters with the SMT commands.
  </p><p>
   You need an external SMT server that mirrors the repositories
   from SUSE Customer Center. Then you can transfer these repositories to the SMT servers on
   the isolated network using the external storage device.
  </p><div class="figure" id="idm139994713672320"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_disconnected.png"><img src="images/smt_disconnected.png" width="" alt="SMT Disconnected Setup" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 9.1: </span><span class="name">SMT Disconnected Setup </span><a title="Permalink" class="permalink" href="#idm139994713672320">#</a></h6></div></div><p>
   Although the initial setup of this solution requires additional
   configuration, the regular update synchronization with SUSE Customer Center and
   distribution to isolated servers is simple. The steps required during the
   initial setup are as follows:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Installing and configuring the external SMT server
    </p></li><li class="listitem "><p>
     Installing the internal server
    </p></li><li class="listitem "><p>
     Editing <code class="filename">/etc/smt.conf</code> and setting up a cron job on the
     internal SMT server
    </p></li><li class="listitem "><p>
     Transferring the SUSE Customer Center data from the external SMT server  to
     the internal server
    </p></li><li class="listitem "><p>
     Enabling and disabling repositories on the internal server
    </p></li><li class="listitem "><p>
     Creating an SMT database replacement file on the
     internal server—when performing the mirror jobs, the file can be used
     instead of the normal Maria DB database 
    </p></li></ul></div><p>
   Day-to-day operation requires the following actions:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Running the <code class="command">smt-mirror</code> job on the external
      server
    </p></li><li class="listitem "><p>
     Synchronizing the mirrored repositories from the external storage device to the
     internal SMT server
    </p></li></ul></div><p>
   Below is a detailed description of the individual steps.
  </p><div class="procedure " id="idm139994705551232"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.1: </span><span class="name">External SMT Server Configuration for the Disconnected Setup </span><a title="Permalink" class="permalink" href="#idm139994705551232">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Install and configure SMT as described in
     <a class="xref" href="#smt.installation" title="Chapter 1. SMT Installation">Chapter 1, <em>SMT Installation</em></a>.
    </p></li><li class="step "><p>
     Enable the repositories for use by the internal SMT servers.
    </p></li><li class="step "><p>
     Perform a standard repository mirroring from SUSE Customer Center with
     <code class="command">smt-mirror</code>.
    </p></li><li class="step "><p>
     Attach a removable storage device to the server and mount it.
    </p></li><li class="step "><p>
     Export the required SUSE Customer Center data to a directory on the mounted storage device:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Create a directory with correct permissions for storing the data. Because
       the <code class="command">smt</code> commands run as the
       <code class="systemitem">smt</code> user (whose numeric UID
       can differ between the servers), you need to make permissions for
       the directories on the external storage device less restrictive:
      </p><div class="verbatim-wrap"><pre class="screen">chmod o+w <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li><li class="step "><p>
       Export the SUSE Customer Center data:
      </p><div class="verbatim-wrap"><pre class="screen">smt-sync --todir <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li></ol></li><li class="step "><p>
     Create a directory with correct permissions:
    </p><div class="verbatim-wrap"><pre class="screen">mkdir <em class="replaceable ">/path/to/repository/on/storage/device</em>
chmod o+w <em class="replaceable ">/path/to/repository/on/storage/device</em></pre></div></li><li class="step "><p>
     Unmount and detach the storage device.
    </p></li></ol></div></div><div class="procedure " id="idm139994705536240"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.2: </span><span class="name">Internal SMT Server Configuration for the Disconnected Setup </span><a title="Permalink" class="permalink" href="#idm139994705536240">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Ensure you have a working SUSE Linux Enterprise Server installation source.
    </p></li><li class="step "><p>
     Install SMT the same way as on the external server with the following
     exceptions:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Select <span class="guimenu">Generate new SCC credentials</span> in the
       <span class="guimenu">SCC Credentials</span> dialog.
      </p></li><li class="step "><p>
       Ignore the error message when running the synchronization script in the
       <span class="guimenu">Writing SMT Configuration</span> phase of the wizard.
      </p></li><li class="step "><p>
       Abort the <span class="guimenu">SUSE Customer Center Configuration</span> wizard
       and click <span class="guimenu">OK</span> in the list of installed add-on
       products.
      </p></li></ol></li><li class="step "><p>
     Re-launch the YaST Subscription Management Tool Server Configuration module (<code class="command">yast2
     smt-server</code>) and go to the<span class="guimenu"> Scheduled SMT Jobs</span>
     tab.
    </p></li><li class="step "><p>
     Delete <code class="literal">SCC Registration</code> and <code class="literal">Synchronization of Updates</code> jobs.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span> to finish the wizard, provide the SMT
     user password, and acknowledge the synchronization error again.
    </p></li><li class="step "><p>
     Prevent registration data upstream synchronization to SUSE Customer Center by setting
    </p><div class="verbatim-wrap"><pre class="screen">forwardRegistration = false</pre></div><p>
     in <code class="filename">/etc/smt.conf</code>.
    </p></li><li class="step "><p>
     Connect an external storage device and mount it.
    </p></li><li class="step "><p>
     Populate the SMT database with the previously created SUSE Customer Center data:
    </p><div class="verbatim-wrap"><pre class="screen">smt-sync --fromdir <em class="replaceable ">/path/to/scc/dir/on/mobile/disk</em></pre></div></li><li class="step "><p>
     Enable mirroring of the desired repositories using the <code class="command">smt-repos
     -e</code> command.
    </p></li><li class="step "><p>
     Create a database replacement file on the external storage device:
    </p><div class="verbatim-wrap"><pre class="screen">smt-sync --createdbreplacementfile <em class="replaceable ">/path/to/dbrepl/file/on/mobile/disk</em></pre></div></li><li class="step "><p>
     Unmount and detach the storage device.
    </p></li></ol></div></div><p>
   Now the configuration of both the external and internal SMT servers is
   complete. However, the update repository is still empty. After you run the
   following daily operation routines for the first time, the repository will
   be synchronized, and the internal SMT server will be ready to serve clients.
  </p><div class="procedure " id="idm139994705512880"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.3: </span><span class="name">Daily External SMT Server Operation </span><a title="Permalink" class="permalink" href="#idm139994705512880">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Connect an external storage device and mount it.
    </p></li><li class="step "><p>
     Perform a mirror to a directory on the storage device based on the file
     stored on it:
    </p><div class="verbatim-wrap"><pre class="screen">smt-mirror --dbreplfile <em class="replaceable ">/path/to/dbrepl/file/on/storage/device</em> \
 --fromlocalsmt --directory <em class="replaceable ">/path/to/repository/on/storage/device</em> \
 -L /var/log/smt/smt-mirror-example.log</pre></div></li><li class="step "><p>
     Update the database on the storage device with the product and subscription
     info from SUSE Customer Center:
    </p><div class="verbatim-wrap"><pre class="screen">smt-sync --todir <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li><li class="step "><p>
     Optionally, scan the storage device for viruses and other unwanted content.
    </p></li><li class="step "><p>
     Unmount and disconnect the storage device.
    </p></li></ol></div></div><div class="procedure " id="idm139994705504960"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.4: </span><span class="name">Daily Internal SMT Server Operation </span><a title="Permalink" class="permalink" href="#idm139994705504960">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Connect a storage device and mount it.
    </p></li><li class="step "><p>
     Update the SUSE Customer Center data on the server:
    </p><div class="verbatim-wrap"><pre class="screen">smt-sync --fromdir <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li><li class="step "><p>
     Mirror from the storage device to the server:
    </p><div class="verbatim-wrap"><pre class="screen">smt-mirror --fromdir <em class="replaceable ">/path/to/repository/on/storage/device</em></pre></div></li><li class="step "><p>
     Update the SUSE Customer Center data on the storage device with local changes in the mirror
     status since the last synchronization:
    </p><div class="verbatim-wrap"><pre class="screen">smt-sync --createdbreplacementfile <em class="replaceable ">/path/to/dbrepl/file/on/storage/device</em></pre></div></li><li class="step "><p>
     Unmount and disconnect the storage device.
    </p></li></ol></div></div></div></div><div class="appendix " id="smt.app.api"><div class="titlepage"><div><div><h1 class="title"><span class="number">A </span><span class="name">SMT REST API</span> <a title="Permalink" class="permalink" href="#smt.app.api">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_appendix_api.xml</li><li><span class="ds-label">ID: </span>smt.app.api</li></ul></div></div></div></div><div class="line"></div><p>
  The SMT REST interface is meant for communication with SMT clients
  and integration into other Web services. The base URI for all the following
  REST calls is <code class="literal">https://YOURSMTSERVER/=/1</code>. The SMT server
  responds with XML data described for each call by an RNC snippet with
  comments.
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994705492608"><span class="term "><span class="emphasis"><em>Quick Reference</em></span>
   </span></dt><dd><div id="idm139994705491296" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: API for authenticating SMT clients.</h6><p>
      Used internally in the <code class="systemitem">smt-client</code> package.
      Not intended for general administrative use!
     </p></div><div class="verbatim-wrap"><pre class="screen">GET /jobs                            get list of all jobs for client
GET /job/@next                       get the next job for client
GET /job/&lt;jobid&gt;                     get job with jobid for client.
                                     Note: this marks the job as retrieved
PUT /job/&lt;jobid&gt;                     update job having &lt;jobid&gt; using XML data.
                                     Note: updates only retrieved jobs</pre></div><p> For backward compatibility reasons, the following are also
          available: </p><div class="verbatim-wrap"><pre class="screen">GET /jobs/@next                      same as GET /job/@next
GET /jobs/&lt;jobid&gt;                    same as GET /job/&lt;jobid&gt;
PUT /jobs/&lt;jobid&gt;                    same as PUT /job/&lt;jobid&gt;</pre></div><p>
     API for general access (this needs authentication using credentials
     from the <code class="literal">[REST]</code> section of
     <code class="filename">smt.conf</code>).
    </p><div class="verbatim-wrap"><pre class="screen">GET /client                          get data of all clients
GET /client/&lt;GUID&gt;                   get data of client with specified GUID
GET /client/&lt;GUID&gt;/jobs              get client's job data
GET /client/&lt;GUID&gt;/patchstatus       get client's patch status
GET /client/&lt;GUID&gt;/job/@next         get client's next job
GET /client/&lt;GUID&gt;/job/&lt;jobid&gt;       get specified client job data
GET /client/@all/jobs                get job data of all clients
GET /client/@all/patchstatus         get patch status of all clients
GET /repo                            get all repositories known to SMT
GET /repo/&lt;repoid&gt;                   get details of repository with &lt;repoid&gt;
GET /repo/&lt;repoid&gt;/patches           get repository's patches
GET /patch/&lt;patchid&gt;                 get patch &lt;patchid&gt; details
GET /product                         get list of all products known to SMT
GET /product/&lt;productid&gt;             get details of product with &lt;productid&gt;
GET /product/&lt;productid&gt;/repos       get list of product's repositories</pre></div><p>
     For backward compatibility reasons, plural forms are also available;
     for example:
    </p><div class="verbatim-wrap"><pre class="screen">GET /clients                         same as GET /client
GET /repos                           same as GET /repo
GET /product                         same as GET /product</pre></div></dd><dt id="idm139994705483104"><span class="term "><span class="emphasis"><em>Detailed Description</em></span>
   </span></dt><dd><p>
     API for authenticating clients:
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994705481024"><span class="term "><code class="literal">GET /jobs</code>
      </span></dt><dd><p>
        Get list of all jobs for an authenticating client. When getting the
        jobs via this path they will not be set to the status retrieved.
       </p><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;jobs&gt;
  &lt;job name="Patchstatus Job" created="2010-06-18 16:34:38" description="Patchstatus Job for Client 456" exitcode="" expires="" finished="" guid="456" guid_id="30" id="31" message="" parent_id="" persistent="1" retrieved="" status="0" stderr="" stdout="" targeted="" timelag="23:00:00" type="1" verbose="0"&gt;
    &lt;arguments&gt;&lt;/arguments&gt;
  &lt;/job&gt;
  &lt;job name="Software Push" created="2010-06-18 16:37:59" description="Software Push: mmv, whois" exitcode="" expires="" finished="" guid="456" guid_id="30" id="32" message="" parent_id="" persistent="0" retrieved="" status="0" stderr="" stdout="" targeted="" timelag="" type="2" verbose="0"&gt;
    &lt;arguments&gt;
      &lt;packages&gt;
        &lt;package&gt;mmv&lt;/package&gt;
        &lt;package&gt;whois&lt;/package&gt;
      &lt;/packages&gt;
    &lt;/arguments&gt;
  &lt;/job&gt;
  &lt;job name="Update Job" created="2010-06-18 16:38:39" description="Update Job" exitcode="" expires="" finished="" guid="456" guid_id="30" id="34" message="" parent_id="" persistent="0" retrieved="" status="0" stderr="" stdout="" targeted="" timelag="" type="3" verbose="0"&gt;
    &lt;arguments&gt;&lt;/arguments&gt;
  &lt;/job&gt;
  &lt;job name="Execute" created="2010-06-18 17:40:10" description="Execute custom command" exitcode="0" expires="" finished="2010-06-18 17:40:14" guid="456" guid_id="30" id="41" message="execute successfully finished" parent_id="" persistent="0" retrieved="2010-06-18 17:40:14" status="1" stderr="man:x:13:62:Manual pages viewer:/var/cache/man:/bin/bash" stdout="" targeted="" timelag="" type="4" verbose="1"&gt;
   &lt;arguments command="grep man /etc/passwd" /&gt;
  &lt;/job&gt;
  &lt;job name="Reboot" created="2010-06-18 16:40:28" description="Reboot now" exitcode="" expires="2011-06-12 15:15:15" finished="" guid="456" guid_id="30" id="37" message="" parent_id="" persistent="0" retrieved="" status="0" stderr="" stdout="" targeted="2010-06-12 15:15:15" timelag="" type="5" verbose="0"&gt;
    &lt;arguments&gt;&lt;/arguments&gt;
  &lt;/job&gt;
  &lt;job name="Wait 5 sec. for exit 0." created="2010-06-18 16:40:59" description="Wait for 5 seconds and return with value 0." exitcode="" expires="" finished="" guid="456" guid_id="30" id="38" message="" parent_id="" persistent="0" retrieved="" status="0" stderr="" stdout="" targeted="" timelag="" type="7" verbose="0"&gt;
    &lt;arguments exitcode="0" waittime="5" /&gt;
  &lt;/job&gt;
  &lt;job name="Eject job" created="2010-06-18 16:42:00" description="Job to eject the CD/DVD drawer" exitcode="" expires="" finished="" guid="456" guid_id="30" id="39" message="" parent_id="" persistent="0" retrieved="" status="0" stderr="" stdout="" targeted="" timelag="" type="8" verbose="0"&gt;
    &lt;arguments action="toggle" /&gt;
  &lt;/job&gt;
&lt;/jobs&gt;</pre></div></dd><dt id="idm139994705475280"><span class="term "><code class="literal">GET /jobs/@next</code>
      </span></dt><dd><p>
        Get the next job for an authenticating client. The job will not be
        set to the retrieved status.
       </p><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="31" guid="456" type="patchstatus" verbose="false"&gt;
  &lt;arguments&gt;&lt;/arguments&gt;
&lt;/job&gt;</pre></div></dd><dt id="idm139994705472096"><span class="term "><code class="literal">GET /jobs/&lt;jobid&gt;</code>
      </span></dt><dd><p>
        Get a job with the specified jobid for an authenticating client. The
        job will be set to the retrieved status.
       </p><p>
        When the client retrieves a job, not all the metadata is part of the
        XML response. However, it can be the full set of metadata, as
        <code class="command">smt-client</code> only picks the data that is relevant.
        But a job retrieval should only contain the minimal set of data that
        is required to fulfill it.
       </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start = element job {
  attribute id {xsd:integer},         # the job ID. A job id alone is not unique.
                                      # A job is only uniquely identified with
                                      # guid and id. The same jobs for multiple
                                      # clients have the same job id.
  attribute parent_id {xsd:integer}?, # ID of the job on which this job depends
  attribute guid {xsd:string},
  attribute guid_id {xsd:integer}?,   # internal database ID of the client
                                      # (for compatibility reasons, if third
                                      # party application talks to SMT REST
                                      # service).
  attribute type {                    # job type ID string. Must be unique and
                                      # equal to the name of the Perl module on
                                      # the client.
    "softwarepush",
    "patchstatus",
    "&lt;custom&gt;"                        # add your own job types
  },
  attribute name {xsd:string},        # short custom name of the job, user-defined
  attribute description {xsd:string}, # custom description of what the job does
  attribute created {xsd:string},     # time stamp of creation
  attribute expires {xsd:string},     # expiration time stamp; the job expires
                                      # if not retrieved by then
  attribute finished {xsd:string},    # time stamp of job completion
  attribute retrieved {xsd:string},   # time stamp of retrieval of the job
  attribute persistent {xsd:boolean}?, # defines whether the job is a persistent
                                      # (repetitive) job
  attribute verbose {xsd:boolean},    # if true, output of job commands is
                                      # attached to the result
  attribute exitcode {xsd:integer},   # the last exit code of the system command
                                      # executed to complete the job
  attribute message {xsd:string},     # custom human-readable message the client
                                      # sends back as a result
  attribute status {                  # logical status of the job
    0,     # not yet worked on: The job may be already retrieved but no
           # result was sent back yet.
    1,     # success: The job was retrieved, processed and the client sent
           # back a success response.
    2,     # failed: The job was retrieved, processed and the client sent
           # back a failure response.
    3},    # denied by client: The job was retrieved but could not be
           # processed as the client denied to process this job type
           # (a client needs to allow all job types that should be processed,
           # any other will be denied).
  attribute stderr {text},            # standard error output of jobs's system
                                      # commands (filled if verbose)
  attribute stdout {text},            # standard output of jobs's system
                                      # commands (filled if verbose)
  attribute targeted {xsd:string},    # time stamp when this job will be
                                      # delivered at the earliest
  attribute timelag {xsd:string}?,    # interval time of a persistent job in
                                      # the format "HH:MM:SS" (HH can be
                                      # bigger than 23)
  element-arguments                   # job-type-specific XML data
}</pre></div><p>
        Example (minimal job definition for a 'softwarepush' job):
       </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="32" guid="456" type="softwarepush" verbose="false"&gt;
  &lt;arguments&gt;
    &lt;packages&gt;
      &lt;package&gt;mmv&lt;/package&gt;
      &lt;package&gt;whois&lt;/package&gt;
    &lt;/packages&gt;
  &lt;/arguments&gt;
&lt;/job&gt;</pre></div></dd><dt id="idm139994705463216"><span class="term "><code class="literal">PUT /job/&lt;jobid&gt;</code>
      </span></dt><dd><p>
        Update a job for an authenticating client using XML data.
       </p><p> A client can only send job results for jobs properly
                retrieved previously. The jobs will be set to status
                done (except for persistent jobs, in which
                case a new target time will be computed). </p><p>
        Examples:
       </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
          Example for a successful patchstatus job:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="31" guid="abc123" exitcode="0" message="0:0:0:0 # PackageManager=0 Security=0 Recommended=0 Optional=0" status="1" stderr="" stdout="" /&gt;</pre></div></li><li class="listitem "><p>
          Example for a failed softwarepush:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="32" guid="abc123" exitcode="104" message="softwarepush failed" status="2" stderr="" stdout="" /&gt;</pre></div></li><li class="listitem "><p>
          Example for a successful update:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="34" guid="abc123" exitcode="0" message="update successfully finished" status="1" stderr="" stdout="" /&gt;</pre></div></li><li class="listitem "><p>
          Example for a successful reboot job:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="37" guid="abc123" exitcode="0" message="reboot triggered" status="1" stderr="" stdout="" /&gt;</pre></div></li><li class="listitem "><p>
          Execute for a successful wait job:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="38" guid="abc123" exitcode="0" message="wait successfully finished" status="1" stderr="" stdout="" /&gt;</pre></div></li><li class="listitem "><p>
          Example for a successful eject job:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="39" guid="abc123" exitcode="0" message="eject successfully finished" status="1" stderr="" stdout="" /&gt;</pre></div></li><li class="listitem "><p>
          Example for a successful execute job:
         </p><div class="verbatim-wrap"><pre class="screen">&lt;job id="41" guid="abc123" exitcode="0" message="execute successfully finished" status="1" stderr="man:x:13:62:Manual pages viewer:/var/cache/man:/bin/bash" stdout="" /&gt;</pre></div></li></ul></div></dd></dl></div><p>
     API for general access:
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139994705447584"><span class="term "><code class="literal">GET /repo/&lt;repoid&gt;</code>
      </span></dt><dd><p>
        Returns detailed information about the specified repository. The
        <code class="literal">&lt;repoid&gt;</code> can be obtained using the
        <code class="literal">/repos</code> or
        <code class="literal">/products/&lt;productid&gt;/repos/</code> call.
       </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start = element repo {                     # repository
  attribute id {xsd:integer},              # SMT ID of the repository
  attribute name {xsd:string},             # repository's Unix name
  attribute target {xsd:string},           # repository's target product
  attribute type {"nu" | "yum" | "zypp" | "pum"}, # type of repository
  element description {xsd:string},        # description of the repository
  element localpath {xsd:string},          # path to local SMT mirror of the
                                           # repository
  element url {xsd:anyURI},                # original URL of the repository
  element mirrored {
    attribute date {xsd:integer}           # timestamp of the last successful
                                           # mirror (empty if not mirrored yet)
  }
}</pre></div><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;repo name="SLES10-SP2-Updates" id="226" target="sles-10-i586" type="nu"&gt;
  &lt;description&gt;SLES10-SP2-Updates for sles-10-i586&lt;/description&gt;
  &lt;localpath&gt;/local/htdocs/repo/$RCE/SLES10-SP2-Updates/sles-10-i586&lt;/localpath&gt;
  &lt;mirrored date="1283523440"/&gt;
  &lt;url&gt;https://nu.novell.com/repo/$RCE/SLES10-SP2-Updates/sles-10-i586/&lt;/url&gt;
&lt;/repo&gt;</pre></div></dd><dt id="idm139994705441152"><span class="term "><code class="literal">GET /repo/&lt;repoid&gt;/patches</code>
      </span></dt><dd><p>
        Returns a list of all patches in the specified software repository.
        The repoid can be obtained using the <code class="literal">/repos</code> or
        <code class="literal">/products/&lt;productid&gt;/repos/</code> call.
       </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start = element patches {
  element patch {
    attribute id {xsd:integer},                # SMT ID of the patch
    attribute name {xsd:string},               # patch's Unix name
    attribute version {xsd:integer}            # patch's version number
    attribute category {                       # patch importance category
      "security",
      "recommended",
      "optional",
      "mandatory"}
  }*
}</pre></div><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;patches&gt;
  &lt;patch name="slesp2-krb5" category="security" id="1471" version="6775"/&gt;
  &lt;patch name="slesp2-heartbeat" category="recommended" id="1524" version="5857"/&gt;
  &lt;patch name="slesp2-curl" category="security" id="1409" version="6402"/&gt;
  ...
&lt;/patches&gt;</pre></div></dd><dt id="idm139994705435584"><span class="term "><code class="literal">GET /repos</code>
      </span></dt><dd><p>
        Returns a list of all software repositories known to SMT. Those
        which are currently mirrored on SMT have non-empty mirror time stamp
        in the mirrored attribute.
       </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start = element repos {
  element repo {
    attribute id {xsd:integer},        # SMT ID of the repository
    attribute name {xsd:string},       # repository's Unix name
    attribute target {xsd:string},     # repository's target product
    attribute mirrored {xsd:integer}   # time stamp of the last successful mirror
                                       # (empty if not mirrored yet)
  }*
}</pre></div><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;repos&gt;
  &lt;repo name="SLE10-SDK-Updates" id="1" mirrored="" target="sles-10-x86_64"/&gt;
  &lt;repo name="SLE10-SDK-SP3-Pool" id="2" mirrored="" target="sles-10-ppc"/&gt;
  &lt;repo name="SLES10-SP2-Updates" id="226" mirrored="1283523440" target="sles-10-i586"/&gt;
  ...
&lt;/repo&gt;</pre></div></dd><dt id="idm139994705430880"><span class="term "><code class="literal">GET /patch/&lt;patchid&gt;</code>
      </span></dt><dd><p>
        Returns detailed information about the specified patch. The patchid
        can be obtained via the
        <code class="literal">/repo/&lt;repoid&gt;/patches</code> call.
       </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start = element patch {
  attribute id {xsd:integer},            # SMT ID of the patch
  attribute name {xsd:string},           # patch's Unix name
  attribute version {xsd:integer},       # patch's version number
  attribute category {                   # patch importance category
    "security",
    "recommended",
    "optional",
    "mandatory"},
  element title {xsd:string},            # title of the patch
  element description {text},            # description of issues fixed by the patch
  element issued {
    attribute date {xsd:integer}         # patch release time stamp
  },
  element packages {                     # packages which need update as part
                                         # of this patch
    element package {                    # individual RPM package data
      attribute name {xsd:string},       # package name
      attribute epoch {xsd:integer},     # epoch number
      attribute version {xsd:string},    # version string
      attribute release {xsd:string},    # release string
      attribute arch {xsd:string},       # architecture string
      element origlocation {xsd:anyURI}, # URL of the RPM package in the
                                         # original repository
      element smtlocation {xsd:anyURI}   # URL of the RPM package at the SMT server
    }*
  },
  element references {                   # references to issues fixed by this
                                         # patch
    element reference {                  # individual reference details
      attribute id,                      # ID number of the issue (bugzilla
                                         # or CVE number)
      attribute title {xsd:string},      # issue title
      attribute type {"bugzilla","cve"}, # type of the issue
      attribute href {xsd:anyURI}        # URL of the issue in its issue
                                         # tracking system
    }*
  }
}</pre></div><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;patch name="slesp2-krb5" category="security" id="1471" version="6775"&gt;
  &lt;description&gt;
    Specially crafted AES and RC4 packets could allow unauthenticated
    remote attackers to trigger an integer overflow leads to heap memory
    corruption (CVE-2009-4212). This has been fixed.
    Specially crafted AES and RC4 packets could allow
    unauthenticated remote attackers to trigger an integer
    overflow leads to heap memory corruption (CVE-2009-4212).
  &lt;/description&gt;
  &lt;issued date="1263343020"/&gt;
  &lt;packages&gt;
    &lt;package name="krb5" arch="i586" epoch="" release="19.43.2" version="1.4.3"&gt;
      &lt;origlocation&gt;https://nu.novell.com/repo/$RCE/SLES10-SP2-Updates/sles-10-i586/rpm/i586/krb5-1.4.3-19.43.2.i586.rpm&lt;/origlocation&gt;
      &lt;smtlocation&gt;http://kompost.suse.cz/repo/$RCE/SLES10-SP2-Updates/sles-10-i586/rpm/i586/krb5-1.4.3-19.43.2.i586.rpm&lt;/smtlocation&gt;
    &lt;/package&gt;
    &lt;package name="krb5-apps-servers" arch="i586" epoch="" release="19.43.2" version="1.4.3"&gt;
      &lt;origlocation&gt;https://nu.novell.com/repo/$RCE/SLES10-SP2-Updates/sles-10-i586/rpm/i586/krb5-apps-servers-1.4.3-19.43.2.i586.rpm&lt;/origlocation&gt;
      &lt;smtlocation&gt;http://kompost.suse.cz/repo/$RCE/SLES10-SP2-Updates/sles-10-i586/rpm/i586/krb5-apps-servers-1.4.3-19.43.2.i586.rpm&lt;/smtlocation&gt;
    &lt;/package&gt;
    ...
  &lt;/packages&gt;
  &lt;references&gt;
    &lt;reference id="535943" href="https://bugzilla.suse.com/show_bug.cgi?id=535943" title="bug number 535943" type="bugzilla"/&gt;
    &lt;reference id="CVE-2009-4212" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-4212" title="CVE-2009-4212" type="cve"/&gt;
  &lt;/references&gt;
  &lt;title&gt;Security update for Kerberos 5&lt;/title&gt;
&lt;/patch&gt;</pre></div></dd><dt id="idm139994705422896"><span class="term "><code class="literal">GET /products</code>
      </span></dt><dd><p>
        Returns list of all products known to SMT.
       </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start element products {
  element product {
    attribute id {xsd:integer},      # SMT ID of the product
    attribute name {xsd:string},     # Unix name of the product
    attribute version {xsd:string},  # version string
    attribute rel {xsd:string},      # release string
    attribute arch {xsd:string},     # target machine architecture string
    attribute uiname {xsd:string}    # name of the product to be
                                     # displayed to users
  }*
}</pre></div><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;products&gt;
  &lt;product name="SUSE_SLED" arch="x86_64" id="1824" rel="" uiname="SUSE Linux Enterprise Desktop 11 SP1" version="11.1"/&gt;
  &lt;product name="SUSE_SLES" arch="i686" id="1825" rel="" uiname="SUSE Linux Enterprise Server 11 SP1" version="11.1"/&gt;
  &lt;product name="sle-hae" arch="i686" id="1880" rel="" uiname="SUSE Linux Enterprise High Availability Extension 11 SP1" version="11.1"/&gt;
  &lt;product name="SUSE-Linux-Enterprise-Thin-Client" arch="" id="940" rel="SP1" uiname="SUSE Linux Enterprise 10 Thin Client SP1" version="10"/&gt;
  ...
&lt;/products&gt;</pre></div></dd><dt id="idm139994705417968"><span class="term "><code class="literal">GET /product/&lt;productid&gt;</code>
      </span></dt><dd><p> Returns information about the specified product. The
                productid can be obtained from data returned by the
                  <code class="literal">/products</code> call. </p><p>
        RNC:
       </p><div class="verbatim-wrap"><pre class="screen">start = element product {
  attribute id {xsd:integer},       # SMT ID of the product
  attribute name {xsd:string},      # Unix name of the product
  attribute version {xsd:string},   # version string
  attribute rel {xsd:string},       # release string
  attribute arch {xsd:string},      # target machine architecture string
  attribute uiname {xsd:string}     # name of the product to be displayed
                                    # to users
}</pre></div><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;product name="SUSE_SLED" arch="x86_64" id="1824" rel="" uiname="SUSE Linux Enterprise Server 11 SP1" version="11.1"/&gt;</pre></div></dd><dt id="idm139994705412960"><span class="term "><code class="literal">GET /product/&lt;productid&gt;/repos</code>
      </span></dt><dd><p> Returns the list of all software repositories for the
                specified product. The productid can be obtained from
                the data returned by the <code class="literal">/products</code>
                call. </p><p>
        RNC:
       </p><p>
        See the <code class="literal">/repos</code> call.
       </p><p>
        Example:
       </p><div class="verbatim-wrap"><pre class="screen">&lt;repos&gt;
  &lt;repo name="SLED11-SP1-Updates" id="143" mirrored="" target="sle-11-x86_64"/&gt;
  &lt;repo name="SLE11-SP1-Debuginfo-Pool" id="400" mirrored="" target="sle-11-x86_64"/&gt;
  &lt;repo name="SLED11-Extras" id="417" mirrored="" target="sle-11-x86_64"/&gt;
  &lt;repo name="SLED11-SP1-Pool" id="215" mirrored="" target="sle-11-x86_64"/&gt;
  &lt;repo name="nVidia-Driver-SLE11-SP1" id="469" mirrored="" target=""/&gt;
  &lt;repo name="ATI-Driver-SLE11-SP1" id="411" mirrored="" target=""/&gt;
  &lt;repo name="SLE11-SP1-Debuginfo-Updates" id="6" mirrored="" target="sle-11-x86_64"/&gt;
&lt;/repos&gt;</pre></div></dd></dl></div></dd></dl></div></div><div class="appendix " id="app.smt.docupdates"><div class="titlepage"><div><div><h1 class="title"><span class="number">B </span><span class="name">Documentation Updates</span> <a title="Permalink" class="permalink" href="#app.smt.docupdates">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>smt_docupdates.xml</li><li><span class="ds-label">ID: </span>app.smt.docupdates</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp3"><span class="number">B.1 </span><span class="name">September 2017 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP3)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp2_maint1"><span class="number">B.2 </span><span class="name">April 2017 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp2"><span class="number">B.3 </span><span class="name">November 2016 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp1_maint1"><span class="number">B.4 </span><span class="name">March 2016 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)</span></a></span></dt><dt><span class="sect1"><a href="#sec.smt.docupdates.sle12_sp1"><span class="number">B.5 </span><span class="name">December 2015 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)</span></a></span></dt></dl></div></div><p>
  This chapter lists content changes for this document.
 </p><p>
  This manual was updated on the following dates:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    <a class="xref" href="#sec.smt.docupdates.sle12_sp3" title="B.1. September 2017 (Initial Release of SUSE Linux Enterprise Server 12 SP3)">Section B.1, “September 2017 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP3)”</a>
   </p></li><li class="listitem "><p>
    <a class="xref" href="#sec.smt.docupdates.sle12_sp2_maint1" title="B.2. April 2017 (Maintenance Release of SUSE Linux Enterprise Server 12 SP2)">Section B.2, “April 2017 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)”</a>
   </p></li><li class="listitem "><p>
    <a class="xref" href="#sec.smt.docupdates.sle12_sp2" title="B.3. November 2016 (Initial Release of SUSE Linux Enterprise Server 12 SP2)">Section B.3, “November 2016 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)”</a>
   </p></li><li class="listitem "><p>
    <a class="xref" href="#sec.smt.docupdates.sle12_sp1_maint1" title="B.4. March 2016 (Maintenance Release of SUSE Linux Enterprise Server 12 SP1)">Section B.4, “March 2016 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)”</a>
   </p></li><li class="listitem "><p>
    <a class="xref" href="#sec.smt.docupdates.sle12_sp1" title="B.5. December 2015 (Initial Release of SUSE Linux Enterprise Server 12 SP1)">Section B.5, “December 2015 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)”</a>
   </p></li></ul></div><div class="sect1 " id="sec.smt.docupdates.sle12_sp3"><div class="titlepage"><div><div><h2 class="title" id="sec.smt.docupdates.sle12_sp3"><span class="number">B.1 </span><span class="name">September 2017 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP3)</span> <a title="Permalink" class="permalink" href="#sec.smt.docupdates.sle12_sp3">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705386640"><span class="term ">General</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Numerous small fixes and additions to the documentation, based on
        technical feedback.</p></li><li class="listitem "><p>
      Removed all references to the <code class="systemitem">faillog</code>
      package, which is no longer shipped (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=710788" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=710788</a>).
     </p></li></ul></div></dd></dl></div></div><div class="sect1 " id="sec.smt.docupdates.sle12_sp2_maint1"><div class="titlepage"><div><div><h2 class="title" id="sec.smt.docupdates.sle12_sp2_maint1"><span class="number">B.2 </span><span class="name">April 2017 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)</span> <a title="Permalink" class="permalink" href="#sec.smt.docupdates.sle12_sp2_maint1">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705378528"><span class="term ">Bugfixes</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        <code class="filename">smt.crt</code> is generated by <code class="command">systemctl restart
         smt.service</code> in <a class="xref" href="#smt.tools.cert" title="7.3. Server Certificates">Section 7.3, “Server Certificates”</a>
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=1084715" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=1084715</a>).
       </p></li><li class="listitem "><p>
        Specified how to enable the installer self-update repository
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=1015481" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=1015481</a>).
       </p></li></ul></div></dd></dl></div></div><div class="sect1 " id="sec.smt.docupdates.sle12_sp2"><div class="titlepage"><div><div><h2 class="title" id="sec.smt.docupdates.sle12_sp2"><span class="number">B.3 </span><span class="name">November 2016 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP2)</span> <a title="Permalink" class="permalink" href="#sec.smt.docupdates.sle12_sp2">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705366464"><span class="term ">General</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p> The e-mail address for documentation feedback has changed to
       <code class="literal">doc-team@suse.com</code>. </p></li><li class="listitem "><p> The documentation for Docker has been enhanced and renamed to
      <em class="citetitle ">Docker Guide</em>. </p></li></ul></div></dd></dl></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705361312"><span class="term ">General Updates to this Guide</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added a new chapter <a class="xref" href="#smt.advanced" title="Chapter 9. Advanced Topics">Chapter 9, <em>Advanced Topics</em></a> with sections
        <a class="xref" href="#smt.backup" title="9.1. Backup of the SMT Server">Section 9.1, “Backup of the SMT Server”</a> and <a class="xref" href="#smt.disconnected" title="9.2. Disconnected SMT Servers">Section 9.2, “Disconnected SMT Servers”</a>.
       </p></li><li class="listitem "><p>
        Updated options for some commands.
       </p></li></ul></div></dd><dt id="idm139994705355984"><span class="term "><a class="xref" href="#pre_smt" title="About This Guide">About This Guide</a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Replaced the introductory text with a more descriptive one, plus added a
        schema.
       </p></li></ul></div></dd><dt id="idm139994705352800"><span class="term "><a class="xref" href="#smt.installation" title="Chapter 1. SMT Installation">Chapter 1, <em>SMT Installation</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added <a class="xref" href="#smt.installation.upgrade.from12sp1" title="1.2.1. Upgrade from SMT 12 SP1">Section 1.2.1, “Upgrade from SMT 12 SP1”</a>.
       </p></li></ul></div></dd><dt id="idm139994705349136"><span class="term "><a class="xref" href="#smt.mirroring" title="Chapter 3. Mirroring Repositories on the SMT Server">Chapter 3, <em>Mirroring Repositories on the SMT Server</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added <a class="xref" href="#smt.repo.preload" title="3.7. Repository Preloading">Section 3.7, “Repository Preloading”</a>.
       </p></li><li class="listitem "><p>
        Added schema in <a class="xref" href="#smt.staging" title="3.6. Testing and Filtering Update Repositories with Staging">Section 3.6, “Testing and Filtering Update Repositories with Staging”</a>.
       </p></li></ul></div></dd><dt id="idm139994705344016"><span class="term "><a class="xref" href="#smt.management" title="Chapter 4. Managing Repositories with YaST SMT Server Management">Chapter 4, <em>Managing Repositories with YaST SMT Server Management</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added <a class="xref" href="#smt.yast.staging.client" title="4.4. Jobs and Client Status Monitoring">Section 4.4, “Jobs and Client Status Monitoring”</a> enhancing
        <a class="xref" href="#smt.yast.staging.client.yast" title="4.4.1. Checking the Client Status with YaST">Section 4.4.1, “Checking the Client Status with YaST”</a>.
       </p></li><li class="listitem "><p>
        Updated repository list filtering in
        <a class="xref" href="#smt.yast.staging.viewing.filter" title="4.2.1. Filtering Repositories">Section 4.2.1, “Filtering Repositories”</a> (Fate #319777).
       </p></li></ul></div></dd><dt id="idm139994705338272"><span class="term "><a class="xref" href="#smt.registration" title="Chapter 5. Managing Client Machines with SMT">Chapter 5, <em>Managing Client Machines with SMT</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added <a class="xref" href="#smt.registrations.compliance" title="5.5. Compliance Monitoring">Section 5.5, “Compliance Monitoring”</a>.
       </p></li></ul></div></dd><dt id="idm139994705334608"><span class="term "><a class="xref" href="#smt.tools" title="Chapter 7. SMT Tools and Configuration Files">Chapter 7, <em>SMT Tools and Configuration Files</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added a tip on SUSE Manager's subscription matching feature in
        <a class="xref" href="#smt.scripts.sccsync" title="7.1.2.8. smt-scc-sync">Section 7.1.2.8, “smt-scc-sync”</a> (Fate #320646).
       </p></li></ul></div></dd><dt id="idm139994705330880"><span class="term ">Bugfixes</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added <a class="xref" href="#smt.backup" title="9.1. Backup of the SMT Server">Section 9.1, “Backup of the SMT Server”</a>
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=954874" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=954874</a>).
       </p></li><li class="listitem "><p>
        It is important to add the DNS entry when setting the Server
        Alternative Name value in a server certificate in
        <a class="xref" href="#step.new.cert2" title="Step 7">Step 7</a>
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=908189" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=908189</a>).
       </p></li><li class="listitem "><p>
        Added a recommendation to check if
        <code class="command">clientSetup4SMT.sh</code> is up to date after OS migration
        in <a class="xref" href="#smt.client.clientsetupscript" title="8.3. Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12">Section 8.3, “Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12”</a> and
        <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 19 “Upgrading SUSE Linux Enterprise”, Section 19.3.8 “Check the <code class="command">clientSetup4SMT.sh</code> Script on SMT Clients”</span>
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=944342" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=944342</a>).
       </p></li><li class="listitem "><p>
        Stressed the need for one-by-one extension installation in
        <a class="xref" href="#smt.client.clientsetupscript" title="8.3. Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12">Section 8.3, “Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12”</a>
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=988678" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=988678</a>).
       </p></li></ul></div></dd></dl></div></div><div class="sect1 " id="sec.smt.docupdates.sle12_sp1_maint1"><div class="titlepage"><div><div><h2 class="title" id="sec.smt.docupdates.sle12_sp1_maint1"><span class="number">B.4 </span><span class="name">March 2016 (Maintenance Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)</span> <a title="Permalink" class="permalink" href="#sec.smt.docupdates.sle12_sp1_maint1">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705316640"><span class="term "><a class="xref" href="#smt.installation" title="Chapter 1. SMT Installation">Chapter 1, <em>SMT Installation</em></a>
    </span></dt><dd><p>
      Fixed typos: <code class="filename">my.conf.rpmnew</code> to
      <code class="filename">my.cnf.rpmnew</code> and <code class="filename">my.conf</code> to
      <code class="filename">my.cnf</code>
      (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=964121" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=964121</a>).
     </p></dd></dl></div></div><div class="sect1 " id="sec.smt.docupdates.sle12_sp1"><div class="titlepage"><div><div><h2 class="title" id="sec.smt.docupdates.sle12_sp1"><span class="number">B.5 </span><span class="name">December 2015 (Initial Release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> 12 SP1)</span> <a title="Permalink" class="permalink" href="#sec.smt.docupdates.sle12_sp1">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705306240"><span class="term ">General</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      <a class="xref" href="#book.smt" title="Subscription Management Tool for SLES 12 SP3">SMT Guide</a> is now part of the documentation for
      <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
     </p></li><li class="listitem "><p>
      Add-ons provided by SUSE have been renamed as modules and extensions.
      The manuals have been updated to reflect this change.
     </p></li><li class="listitem "><p>
      Numerous small fixes and additions to the documentation, based on
      technical feedback.
     </p></li><li class="listitem "><p>
      The registration service has been changed from Novell Customer Center to
      SUSE Customer Center.
     </p></li><li class="listitem "><p>
      In YaST, you will now reach <span class="guimenu">Network Settings</span> via the
      <span class="guimenu">System</span> group. <span class="guimenu">Network Devices</span> is
      gone
      (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=867809" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=867809</a>).
     </p></li></ul></div></dd></dl></div><div class="variablelist "><dl class="variablelist"><dt id="idm139994705295392"><span class="term "><a class="xref" href="#smt.installation" title="Chapter 1. SMT Installation">Chapter 1, <em>SMT Installation</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Rewrote and simplified the whole installation procedure as SMT is now
        part of SUSE Linux Enterprise Server.
       </p></li><li class="listitem "><p>
        Updated <a class="xref" href="#smt.installation.upgrade" title="1.2. Upgrading from Previous Versions of SMT">Section 1.2, “Upgrading from Previous Versions of SMT”</a> to describe ways to
        upgrade to version 12 SP1, including migration to SUSE Customer Center.
       </p></li></ul></div></dd><dt id="idm139994705290080"><span class="term "><a class="xref" href="#smt.mirroring" title="Chapter 3. Mirroring Repositories on the SMT Server">Chapter 3, <em>Mirroring Repositories on the SMT Server</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Updated suseRegister to SUSEConnect and introduced new
        <code class="literal">namespace</code> option in
        <a class="xref" href="#smt.mirroring.testenv" title="3.5. Using the Test Environment">Section 3.5, “Using the Test Environment”</a> and
        <a class="xref" href="#smt.staging" title="3.6. Testing and Filtering Update Repositories with Staging">Section 3.6, “Testing and Filtering Update Repositories with Staging”</a>.
       </p></li><li class="listitem "><p>
        Removed SUSE Linux Enterprise Server 9 references and informed about dropped support.
       </p></li></ul></div></dd><dt id="idm139994705283840"><span class="term "><a class="xref" href="#smt.tools" title="Chapter 7. SMT Tools and Configuration Files">Chapter 7, <em>SMT Tools and Configuration Files</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Added <code class="option">jobStatusIsSuccess</code>,
        <code class="option">mirror_preunlock_hook</code>, and
        <code class="option">mirror_postunlock_hook</code> options in
        <a class="xref" href="#smt.config.smtconf" title="7.2.1. /etc/smt.conf">Section 7.2.1, “/etc/smt.conf”</a>.
       </p></li><li class="listitem "><p>
        Removed the redundant <code class="command">smt-scc-sync</code> command
        description from <a class="xref" href="#smt.scripts.smt" title="7.1.2. /usr/sbin/smt Commands">Section 7.1.2, “/usr/sbin/smt Commands”</a>.
       </p></li><li class="listitem "><p>
        Removed SUSE Linux Enterprise Server 9 references and fixed command names and a log file name.
       </p></li></ul></div></dd><dt id="idm139994705275376"><span class="term "><a class="xref" href="#smt.client" title="Chapter 8. Configuring Clients to Use SMT">Chapter 8, <em>Configuring Clients to Use SMT</em></a>
    </span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Updated the way the client accepts untrusted certificate from SMT in
        the introduction to <a class="xref" href="#smt.client" title="Chapter 8. Configuring Clients to Use SMT">Chapter 8, <em>Configuring Clients to Use SMT</em></a>.
       </p></li><li class="listitem "><p>
        Added <a class="xref" href="#smt.client.onlinemigration" title="8.8. Online Migration of SUSE Linux Enterprise Clients">Section 8.8, “Online Migration of SUSE Linux Enterprise Clients”</a>.
       </p></li><li class="listitem "><p>
        Added SUSE Linux Enterprise 12 support to
        <a class="xref" href="#smt.client.clientsetupscript" title="8.3. Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12">Section 8.3, “Configuring Clients with the clientSetup4SMT.sh Script in SLE 11 and 12”</a>.
       </p></li><li class="listitem "><p>
        Added <a class="xref" href="#smt.client.autoyast.sle12" title="8.2.2. Configuring SUSE Linux Enterprise 12 Clients">Section 8.2.2, “Configuring SUSE Linux Enterprise 12 Clients”</a>.
       </p></li><li class="listitem "><p>
        Added <a class="xref" href="#smt.mirror.testenv.sle12client" title="8.6. Registering SLE12 Clients against SMT Test Environment">Section 8.6, “Registering SLE12 Clients against SMT Test Environment”</a>.
       </p></li></ul></div></dd><dt id="idm139994705265152"><span class="term ">Bugfixes</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Rephrased the paragraph and updated contact e-mails in
        <a class="xref" href="#smt.mirror.credential.merge" title="Tip: Merging Multiple Organization Site Credentials">Tip: Merging Multiple Organization Site Credentials</a>
        (<a class="link" href="https://bugzilla.suse.com/show_bug.cgi?id=866936" target="_blank">https://bugzilla.suse.com/show_bug.cgi?id=866936</a>).
       </p></li></ul></div></dd></dl></div></div></div></div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>