<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Encrypting Partitions and Files | Security Guide | SUSE Linux Enterprise Desktop 12 SP2</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Desktop" /><meta name="product-number" content="12 SP2" /><meta name="book-title" content="Security Guide" /><meta name="chapter-title" content="Chapter 11. Encrypting Partitions and Files" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Desktop 12 SP2" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Desktop Documentation" /><link rel="up" href="part.local_security.html" title="Part II. Local Security" /><link rel="prev" href="cha.security.acls.html" title="Chapter 10. Access Control Lists in Linux" /><link rel="next" href="cha.certstore.html" title="Chapter 12. Certificate Store" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.security.html">Security Guide</a><span> › </span><a class="crumb" href="part.local_security.html">Local Security</a><span> › </span><a class="crumb" href="cha.security.cryptofs.html">Encrypting Partitions and Files</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Security Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface.security.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="cha.security.html"><span class="number">1 </span><span class="name">Security and Confidentiality</span></a></li><li class="inactive"><a href="part.auth.html"><span class="number">I </span><span class="name">Authentication</span></a><ol><li class="inactive"><a href="cha.pam.html"><span class="number">2 </span><span class="name">Authentication with PAM</span></a></li><li class="inactive"><a href="cha.nis.html"><span class="number">3 </span><span class="name">Using NIS</span></a></li><li class="inactive"><a href="cha.security.auth.html"><span class="number">4 </span><span class="name">Setting Up Authentication Servers and Clients Using YaST</span></a></li><li class="inactive"><a href="cha.security.ldap.html"><span class="number">5 </span><span class="name">LDAP—A Directory Service</span></a></li><li class="inactive"><a href="cha.security.ad.html"><span class="number">6 </span><span class="name">Active Directory Support</span></a></li><li class="inactive"><a href="cha.security.kerberos.html"><span class="number">7 </span><span class="name">Network Authentication with Kerberos</span></a></li></ol></li><li class="inactive"><a href="part.local_security.html"><span class="number">II </span><span class="name">Local Security</span></a><ol><li class="inactive"><a href="cha.security.yast_security.html"><span class="number">8 </span><span class="name">Configuring Security Settings with YaST</span></a></li><li class="inactive"><a href="cha.security.policykit.html"><span class="number">9 </span><span class="name">Authorization with PolKit</span></a></li><li class="inactive"><a href="cha.security.acls.html"><span class="number">10 </span><span class="name">Access Control Lists in Linux</span></a></li><li class="inactive"><a href="cha.security.cryptofs.html"><span class="number">11 </span><span class="name">Encrypting Partitions and Files</span></a></li><li class="inactive"><a href="cha.certstore.html"><span class="number">12 </span><span class="name">Certificate Store</span></a></li><li class="inactive"><a href="cha.aide.html"><span class="number">13 </span><span class="name">Intrusion Detection with AIDE</span></a></li></ol></li><li class="inactive"><a href="part.network_security.html"><span class="number">III </span><span class="name">Network Security</span></a><ol><li class="inactive"><a href="cha.ssh.html"><span class="number">14 </span><span class="name">SSH: Secure Network Operations</span></a></li><li class="inactive"><a href="cha.security.firewall.html"><span class="number">15 </span><span class="name">Masquerading and Firewalls</span></a></li><li class="inactive"><a href="cha.security.vpnserver.html"><span class="number">16 </span><span class="name">Configuring a VPN Server</span></a></li><li class="inactive"><a href="cha.security.yast_ca.html"><span class="number">17 </span><span class="name">Managing X.509 Certification</span></a></li></ol></li><li class="inactive"><a href="part.apparmor.html"><span class="number">IV </span><span class="name">Confining Privileges with <span class="phrase">AppArmor</span></span></a><ol><li class="inactive"><a href="cha.apparmor.intro.html"><span class="number">18 </span><span class="name">Introducing <span class="phrase">AppArmor</span></span></a></li><li class="inactive"><a href="cha.apparmor.start.html"><span class="number">19 </span><span class="name">Getting Started</span></a></li><li class="inactive"><a href="cha.apparmor.concept.html"><span class="number">20 </span><span class="name">Immunizing Programs</span></a></li><li class="inactive"><a href="cha.apparmor.profiles.html"><span class="number">21 </span><span class="name">Profile Components and Syntax</span></a></li><li class="inactive"><a href="cha.apparmor.repos.html"><span class="number">22 </span><span class="name"><span class="phrase">AppArmor</span> Profile Repositories</span></a></li><li class="inactive"><a href="cha.apparmor.yast.html"><span class="number">23 </span><span class="name">Building and Managing Profiles with YaST</span></a></li><li class="inactive"><a href="cha.apparmor.commandline.html"><span class="number">24 </span><span class="name">Building Profiles from the Command Line</span></a></li><li class="inactive"><a href="cha.apparmor.hat.html"><span class="number">25 </span><span class="name">Profiling Your Web Applications Using ChangeHat</span></a></li><li class="inactive"><a href="cha.apparmor.pam.html"><span class="number">26 </span><span class="name">Confining Users with <code class="systemitem">pam_apparmor</code></span></a></li><li class="inactive"><a href="cha.apparmor.managing.html"><span class="number">27 </span><span class="name">Managing Profiled Applications</span></a></li><li class="inactive"><a href="cha.apparmor.support.html"><span class="number">28 </span><span class="name">Support</span></a></li><li class="inactive"><a href="cha.apparmor.glossary.html"><span class="number">29 </span><span class="name"><span class="phrase">AppArmor</span> Glossary</span></a></li></ol></li><li class="inactive"><a href="part.audit.html"><span class="number">V </span><span class="name"><em class="citetitle ">The Linux Audit Framework</em></span></a><ol><li class="inactive"><a href="cha.audit.comp.html"><span class="number">30 </span><span class="name">Understanding Linux Audit</span></a></li><li class="inactive"><a href="cha.audit.setup.html"><span class="number">31 </span><span class="name">Setting Up the Linux Audit Framework</span></a></li><li class="inactive"><a href="cha.audit.scenarios.html"><span class="number">32 </span><span class="name">Introducing an Audit Rule Set</span></a></li><li class="inactive"><a href="cha.audit.moreinfo.html"><span class="number">33 </span><span class="name">Useful Resources</span></a></li></ol></li><li class="inactive"><a href="app.security.docupdates.html"><span class="number">A </span><span class="name">Documentation Updates</span></a></li><li class="inactive"><a href="bk04apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 10. Access Control Lists in Linux" href="cha.security.acls.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 12. Certificate Store" href="cha.certstore.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.security.html">Security Guide</a><span> › </span><a class="crumb" href="part.local_security.html">Local Security</a><span> › </span><a class="crumb" href="cha.security.cryptofs.html">Encrypting Partitions and Files</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 10. Access Control Lists in Linux" href="cha.security.acls.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 12. Certificate Store" href="cha.certstore.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.security.cryptofs"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP2</span></span></span></div><div><h2 class="title"><span class="number">11 </span><span class="name">Encrypting Partitions and Files</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>security_cryptofs.xml</li><li><span class="ds-label">ID: </span>cha.security.cryptofs</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.security.cryptofs.html#sec.security.cryptofs.y2"><span class="number">11.1 </span><span class="name">Setting Up an Encrypted File System with YaST</span></a></span></dt><dt><span class="sect1"><a href="cha.security.cryptofs.html#sec.security.cryptofs.y2.homes"><span class="number">11.2 </span><span class="name">Using Encrypted Home Directories</span></a></span></dt><dt><span class="sect1"><a href="cha.security.cryptofs.html#sec.security.cryptofs.vi"><span class="number">11.3 </span><span class="name">Using vi to Encrypt Single ASCII Text Files</span></a></span></dt></dl></div></div><a id="idx.encrypting" class="indexterm"></a><a id="idm140407211410240" class="indexterm"></a><a id="idm140407211409216" class="indexterm"></a><p>
  Most users have some confidential data on their computer that third
  parties should not be able to access. The more you rely on mobile
  computing and on working in different environments and networks, the more
  carefully you should handle your data. The encryption of files or entire
  partitions is recommended if others have network or physical access to
  your system. Laptops or removable media, such as external hard disks or
  flash disks, are prone to being lost or stolen. Thus, it is recommended to
  encrypt the parts of your file system that hold confidential data.
 </p><p>
  There are several ways to protect your data by means of encryption:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm140407211406208"><span class="term ">Encrypting a Hard Disk Partition</span></dt><dd><p>
     You can create an encrypted partition with YaST during
     installation or in an already installed system. Refer to
     <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_inst" title="11.1.1. Creating an Encrypted Partition during Installation">Section 11.1.1, “Creating an Encrypted Partition during Installation”</a> and
     <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_run" title="11.1.2. Creating an Encrypted Partition on a Running System">Section 11.1.2, “Creating an Encrypted Partition on a Running System”</a> for details. This
     option can also be used for removable media, such as external hard
     disks, as described in
     <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.removables" title="11.1.4. Encrypting the Content of Removable Media">Section 11.1.4, “Encrypting the Content of Removable Media”</a>.
    </p></dd><dt id="idm140407211402448"><span class="term ">Creating an Encrypted File as Container</span></dt><dd><p>
     You can create an encrypted file on your hard disk or on a removable
     medium with YaST at any time. The encrypted file can then be used
     to <span class="emphasis"><em>store</em></span> other files or directories. For more
     information, refer to
     <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.container" title="11.1.3. Creating an Encrypted File as a Container">Section 11.1.3, “Creating an Encrypted File as a Container”</a>.
    </p></dd><dt id="idm140407211399424"><span class="term ">Encrypting Home Directories</span></dt><dd><p>
     With <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, you can also create encrypted user home
     directories. When the user logs in to the system, the encrypted home
     directory is mounted and the contents are made available to the user.
     Refer to <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.homes" title="11.2. Using Encrypted Home Directories">Section 11.2, “Using Encrypted Home Directories”</a> for more
     information.
    </p></dd><dt id="idm140407211395696"><span class="term ">Encrypting Single ASCII Text Files</span></dt><dd><p>
     If you only have a few ASCII text files that hold sensitive
     or confidential data, you can encrypt them individually and protect
     them with a password using the vi editor. Refer to
     <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.vi" title="11.3. Using vi to Encrypt Single ASCII Text Files">Section 11.3, “Using vi to Encrypt Single ASCII Text Files”</a> for more information.
    </p></dd></dl></div><div id="idm140407211392944" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Encrypted Media Offers Limited Protection</h6><p>
   The methods described in this chapter offer only a limited protection.
   You cannot protect your running system from being compromised. After the
   encrypted medium is successfully mounted, everybody with appropriate
   permissions has access to it. However, encrypted media are useful in case
   of loss or theft of your computer, or to prevent unauthorized individuals
   from reading your confidential data.
  </p></div><div class="sect1 " id="sec.security.cryptofs.y2"><div class="titlepage"><div><div><h2 class="title" id="sec.security.cryptofs.y2"><span class="number">11.1 </span><span class="name">Setting Up an Encrypted File System with YaST</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.y2">#</a></h2></div></div></div><a id="idx.encrypting.partitions" class="indexterm"></a><a id="idm140407211388416" class="indexterm"></a><p>
   Use YaST to encrypt partitions or parts of your file system during
   installation or in an already installed system. However, encrypting a
   partition in an already-installed system is more difficult, because you
   need to resize and change existing partitions. In such cases, it may be
   more convenient to create an encrypted file of a defined size, in which
   to <span class="emphasis"><em>store</em></span> other files or parts of your file system.
   To encrypt an entire partition, dedicate a partition for encryption in
   the partition layout. The standard partitioning proposal as suggested by
   YaST, does not include an encrypted partition by default. Add it
   manually in the partitioning dialog.
  </p><div class="sect2 " id="sec.security.cryptofs.y2.part_inst"><div class="titlepage"><div><div><h3 class="title" id="sec.security.cryptofs.y2.part_inst"><span class="number">11.1.1 </span><span class="name">Creating an Encrypted Partition during Installation</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_inst">#</a></h3></div></div></div><a id="idm140407211384624" class="indexterm"></a><a id="idm140407211383600" class="indexterm"></a><div id="idm140407211382416" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Password Input</h6><p>
     Make sure to memorize the password for your encrypted partitions well.
     Without that password, you cannot access or restore the encrypted data.
    </p></div><p>
    The YaST expert dialog for partitioning offers the options needed
    for creating an encrypted partition. To create a new encrypted partition
    proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Run the YaST Expert Partitioner with <span class="guimenu">System</span> › <span class="guimenu">Partitioner</span>.
     </p></li><li class="step "><p>
      Select a hard disk, click <span class="guimenu">Add</span>, and select a primary
      or an extended partition.
     </p></li><li class="step "><p>
      Select the partition size or the region to use on the disk.
     </p></li><li class="step "><p>
      Select the file system, and mount point of this partition.
     </p></li><li class="step "><p>
      Activate the <span class="guimenu">Encrypt device</span> check box.
     </p><div id="idm140407211373632" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Software Required</h6><p>
       After checking <span class="guimenu">Encrypt device</span>, a pop-up window
       asking for installing additional software may appear. Confirm to
       install all the required packages to ensure that the encrypted
       partition works well.
      </p></div></li><li class="step "><p>
      If the encrypted file system needs to be mounted only when necessary,
      enable <span class="guimenu">Do not mount partition</span> in the <span class="guimenu">Fstab
      Options</span>. otherwise enable <span class="guimenu">Mount partition</span>
      and enter the mount point.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Next</span> and enter a password which is used to
      encrypt this partition. This password is not displayed. To prevent
      typing errors, you need to enter the password twice.
     </p></li><li class="step "><p>
      Complete the process by clicking <span class="guimenu">Finish</span>. The
      newly-encrypted partition is now created.
     </p></li></ol></div></div><p>
    During the boot process, the operating system asks for the password
    before mounting any encrypted partition which is set to be auto-mounted
    in <code class="filename">/etc/fstab</code>. Such a partition is then available
    to all users when it has been mounted.
   </p><p>
    To skip mounting the encrypted partition during start-up, press
    <span class="keycap">Enter</span> when prompted for the password. Then decline
    the offer to enter the password again. In this case, the encrypted file
    system is not mounted and the operating system continues booting,
    blocking access to your data.
   </p><p>
    To mount an encrypted partition which is not mounted
    during the boot process, open a file manager and click the partition
    entry in the pane listing common places on your file system. You will be
    prompted for a password and the partition will be mounted.
   </p><p>
    When you are installing your system on a machine where partitions
    already exist, you can also decide to encrypt an existing partition
    during installation. In this case follow the description in
    <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_run" title="11.1.2. Creating an Encrypted Partition on a Running System">Section 11.1.2, “Creating an Encrypted Partition on a Running System”</a> and be aware that
    this action destroys all data on the existing partition.
   </p></div><div class="sect2 " id="sec.security.cryptofs.y2.part_run"><div class="titlepage"><div><div><h3 class="title" id="sec.security.cryptofs.y2.part_run"><span class="number">11.1.2 </span><span class="name">Creating an Encrypted Partition on a Running System</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_run">#</a></h3></div></div></div><a id="idm140407211360416" class="indexterm"></a><div id="idm140407211359232" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Activating Encryption on a Running System</h6><p>
     It is also possible to create encrypted partitions on a running system.
     However, encrypting an existing partition destroys all data on it, and
     requires re-sizing and restructuring of existing partitions.
    </p></div><p>
    On a running system, select <span class="guimenu">System</span> › <span class="guimenu">Partitioner</span> in the YaST control
    center. Click <span class="guimenu">Yes</span> to proceed. In the <span class="guimenu">Expert
    Partitioner</span>, select the partition to encrypt and click
    <span class="guimenu">Edit</span>. The rest of the procedure is the same as
    described in <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_inst" title="11.1.1. Creating an Encrypted Partition during Installation">Section 11.1.1, “Creating an Encrypted Partition during Installation”</a>.
   </p><a id="idm140407211354032" class="indexterm"></a></div><div class="sect2 " id="sec.security.cryptofs.y2.container"><div class="titlepage"><div><div><h3 class="title" id="sec.security.cryptofs.y2.container"><span class="number">11.1.3 </span><span class="name">Creating an Encrypted File as a Container</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.container">#</a></h3></div></div></div><a id="idm140407211351968" class="indexterm"></a><a id="idx.encrypting.files" class="indexterm"></a><p>
    Instead of using a partition, it is possible to create an encrypted
    file, which can hold other files or directories containing confidential
    data. Such container files are created from the YaST Expert
    Partitioner dialog. Select <span class="guimenu">Crypt Files</span> › <span class="guimenu">Add Crypt File</span> and enter the full path
    to the file and its size. If YaST should create the container file,
    activate the check box <span class="guimenu">Create Loop File</span>. Accept or
    change the proposed formatting settings and the file system type.
    Specify the mount point and make sure that <span class="guimenu">Encrypt
    Device</span> is checked.
   </p><p>
    Click <span class="guimenu">Next</span>, enter your password for decrypting the
    file, and confirm with <span class="guimenu">Finish</span>.
   </p><p>
    The advantage of encrypted container files over encrypted partitions is
    that they can be added without re-partitioning the hard disk. They are
    mounted with a loop device and behave like normal
    partitions.
   </p></div><div class="sect2 " id="sec.security.cryptofs.y2.removables"><div class="titlepage"><div><div><h3 class="title" id="sec.security.cryptofs.y2.removables"><span class="number">11.1.4 </span><span class="name">Encrypting the Content of Removable Media</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.removables">#</a></h3></div></div></div><a id="idx.encrypting.remmedia" class="indexterm"></a><p>
    YaST treats removable media (like external hard disks or flash
    disks) the same as any other hard disk. Container files or partitions on
    such media can be encrypted as described above. Do not, however, enable
    mounting at boot time, because removable media are usually only
    connected while the system is running.
   </p><p>
    If you encrypted your removable device with YaST, the GNOME desktop
    automatically recognizes the encrypted partition and prompt for the
    password when the device is detected. If you plug in a FAT formatted
    removable device while running GNOME, the desktop user entering the
    password automatically becomes the owner of the device.
    For devices with a file system other than FAT, change the
    ownership explicitly for users other than <code class="systemitem">root</code> to enable these
    users to read or write files on the device.
   </p><a id="idm140407211338800" class="indexterm"></a></div></div><div class="sect1 " id="sec.security.cryptofs.y2.homes"><div class="titlepage"><div><div><h2 class="title" id="sec.security.cryptofs.y2.homes"><span class="number">11.2 </span><span class="name">Using Encrypted Home Directories</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.homes">#</a></h2></div></div></div><p>
   To protect data in home directories from being stolen and consequent
   unauthorized access, use the YaST user management module to enable
   encryption of home directories. You can create encrypted home directories
   for new or existing users. To encrypt or decrypt home directories of
   already existing users, you need to know their login password. See
   <a class="xref" href="cha.y2.userman.html#sec.y2.userman.adv.crypto" title="12.3.3. Managing Encrypted Home Directories">Section 12.3.3, “Managing Encrypted Home Directories”</a> for instructions.
  </p><p>
   Encrypted home partitions are created within a file container as
   described in <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.container" title="11.1.3. Creating an Encrypted File as a Container">Section 11.1.3, “Creating an Encrypted File as a Container”</a>. Two
   files are created under <code class="filename">/home</code> for each encrypted
   home directory:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140407211333296"><span class="term "><code class="filename"><em class="replaceable ">LOGIN</em>.img</code>
    </span></dt><dd><p>
      The image holding the directory
     </p></dd><dt id="idm140407211330896"><span class="term "><code class="filename"><em class="replaceable ">LOGIN</em>.key</code>
    </span></dt><dd><p>
      The image key, protected with the user's login password.
     </p></dd></dl></div><p>
   On login, the home directory automatically gets decrypted. Internally, it
   works through the PAM module called <span class="emphasis"><em>pam_mount</em></span>. If
   you need to add an additional login method that provides encrypted home
   directories, you need to add this module to the respective configuration
   file in <code class="filename">/etc/pam.d/</code>. For more information, see
   <a class="xref" href="cha.pam.html" title="Chapter 2. Authentication with PAM">Chapter 2, <em>Authentication with PAM</em></a> and the man page of <code class="option">pam_mount</code>.
  </p><div id="idm140407211325712" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Security Restrictions</h6><p>
    Encrypting a user's home directory does not provide strong security from
    other users. If strong security is required, the system should not be
    shared physically.
   </p><p>
    To enhance security, also encrypt the <code class="filename">swap</code>
    partition and the <code class="filename">/tmp</code> and
    <code class="filename">/var/tmp</code> directories, because these may contain
    temporary images of critical data. You can encrypt
    <code class="filename">swap</code>, <code class="filename">/tmp</code>, and
    <code class="filename">/var/tmp</code> with the YaST partitioner as
    described in <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.part_inst" title="11.1.1. Creating an Encrypted Partition during Installation">Section 11.1.1, “Creating an Encrypted Partition during Installation”</a> or
    <a class="xref" href="cha.security.cryptofs.html#sec.security.cryptofs.y2.container" title="11.1.3. Creating an Encrypted File as a Container">Section 11.1.3, “Creating an Encrypted File as a Container”</a>.
   </p></div></div><div class="sect1 " id="sec.security.cryptofs.vi"><div class="titlepage"><div><div><h2 class="title" id="sec.security.cryptofs.vi"><span class="number">11.3 </span><span class="name">Using vi to Encrypt Single ASCII Text Files</span> <a title="Permalink" class="permalink" href="cha.security.cryptofs.html#sec.security.cryptofs.vi">#</a></h2></div></div></div><a id="idm140407211318560" class="indexterm"></a><p>
   The disadvantage of using encrypted partitions is obvious: While the
   partition is mounted, at least
   <code class="systemitem">root</code> can access the data. To
   prevent this, <code class="command">vi</code> can be used in encrypted mode.
  </p><p>
   Use <code class="command">vi</code> <code class="option">-x</code>
   <em class="replaceable ">filename</em> to edit a new file.
   <code class="command">vi</code> prompts you to set a password, after which it
   encrypts the content of the file. Whenever you access this file,
   <code class="command">vi</code> requests the correct password.
  </p><p>
   For even more security, you can place the encrypted text file in an
   encrypted partition. This is recommended because the encryption used in
   <code class="command">vi</code> is not very strong.
  </p><a id="idm140407211311984" class="indexterm"></a><a id="idm140407211311312" class="indexterm"></a></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.certstore.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 12 </span>Certificate Store</span></a><a class="nav-link" href="cha.security.acls.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 10 </span>Access Control Lists in Linux</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>