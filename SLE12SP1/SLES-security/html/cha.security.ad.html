<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Active Directory Support | Security Guide | SUSE Linux Enterprise Server 12 SP1</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="12 SP1" /><meta name="book-title" content="Security Guide" /><meta name="chapter-title" content="Chapter 6. Active Directory Support" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP1" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="part.auth.html" title="Part I. Authentication" /><link rel="prev" href="cha.security.ldap.html" title="Chapter 5. LDAP—A Directory Service" /><link rel="next" href="cha.security.kerberos.html" title="Chapter 7. Network Authentication with Kerberos" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.security.html">Security Guide</a><span> › </span><a class="crumb" href="part.auth.html">Authentication</a><span> › </span><a class="crumb" href="cha.security.ad.html">Active Directory Support</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Security Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface.security.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="cha.security.html"><span class="number">1 </span><span class="name">Security and Confidentiality</span></a></li><li class="inactive"><a href="part.auth.html"><span class="number">I </span><span class="name">Authentication</span></a><ol><li class="inactive"><a href="cha.pam.html"><span class="number">2 </span><span class="name">Authentication with PAM</span></a></li><li class="inactive"><a href="cha.nis.html"><span class="number">3 </span><span class="name">Using NIS</span></a></li><li class="inactive"><a href="cha.security.auth.html"><span class="number">4 </span><span class="name">Authentication Server and Client</span></a></li><li class="inactive"><a href="cha.security.ldap.html"><span class="number">5 </span><span class="name">LDAP—A Directory Service</span></a></li><li class="inactive"><a href="cha.security.ad.html"><span class="number">6 </span><span class="name">Active Directory Support</span></a></li><li class="inactive"><a href="cha.security.kerberos.html"><span class="number">7 </span><span class="name">Network Authentication with Kerberos</span></a></li></ol></li><li class="inactive"><a href="part.local_security.html"><span class="number">II </span><span class="name">Local Security</span></a><ol><li class="inactive"><a href="cha.security.yast_security.html"><span class="number">8 </span><span class="name">Configuring Security Settings with YaST</span></a></li><li class="inactive"><a href="cha.security.policykit.html"><span class="number">9 </span><span class="name">Authorization with PolKit</span></a></li><li class="inactive"><a href="cha.security.acls.html"><span class="number">10 </span><span class="name">Access Control Lists in Linux</span></a></li><li class="inactive"><a href="cha.security.cryptofs.html"><span class="number">11 </span><span class="name">Encrypting Partitions and Files</span></a></li><li class="inactive"><a href="cha.certstore.html"><span class="number">12 </span><span class="name">Certificate Store</span></a></li><li class="inactive"><a href="cha.aide.html"><span class="number">13 </span><span class="name">Intrusion Detection with AIDE</span></a></li></ol></li><li class="inactive"><a href="part.network_security.html"><span class="number">III </span><span class="name">Network Security</span></a><ol><li class="inactive"><a href="cha.ssh.html"><span class="number">14 </span><span class="name">SSH: Secure Network Operations</span></a></li><li class="inactive"><a href="cha.security.firewall.html"><span class="number">15 </span><span class="name">Masquerading and Firewalls</span></a></li><li class="inactive"><a href="cha.security.vpnserver.html"><span class="number">16 </span><span class="name">Configuring a VPN Server</span></a></li><li class="inactive"><a href="cha.security.yast_ca.html"><span class="number">17 </span><span class="name">Managing X.509 Certification</span></a></li></ol></li><li class="inactive"><a href="part.apparmor.html"><span class="number">IV </span><span class="name">Confining Privileges with <span class="phrase">AppArmor</span></span></a><ol><li class="inactive"><a href="cha.apparmor.intro.html"><span class="number">18 </span><span class="name">Introducing <span class="phrase">AppArmor</span></span></a></li><li class="inactive"><a href="cha.apparmor.start.html"><span class="number">19 </span><span class="name">Getting Started</span></a></li><li class="inactive"><a href="cha.apparmor.concept.html"><span class="number">20 </span><span class="name">Immunizing Programs</span></a></li><li class="inactive"><a href="cha.apparmor.profiles.html"><span class="number">21 </span><span class="name">Profile Components and Syntax</span></a></li><li class="inactive"><a href="cha.apparmor.repos.html"><span class="number">22 </span><span class="name"><span class="phrase">AppArmor</span> Profile Repositories</span></a></li><li class="inactive"><a href="cha.apparmor.yast.html"><span class="number">23 </span><span class="name">Building and Managing Profiles with YaST</span></a></li><li class="inactive"><a href="cha.apparmor.commandline.html"><span class="number">24 </span><span class="name">Building Profiles from the Command Line</span></a></li><li class="inactive"><a href="cha.apparmor.hat.html"><span class="number">25 </span><span class="name">Profiling Your Web Applications Using ChangeHat</span></a></li><li class="inactive"><a href="cha.apparmor.pam.html"><span class="number">26 </span><span class="name">Confining Users with <code class="systemitem">pam_apparmor</code></span></a></li><li class="inactive"><a href="cha.apparmor.managing.html"><span class="number">27 </span><span class="name">Managing Profiled Applications</span></a></li><li class="inactive"><a href="cha.apparmor.support.html"><span class="number">28 </span><span class="name">Support</span></a></li><li class="inactive"><a href="cha.apparmor.glossary.html"><span class="number">29 </span><span class="name"><span class="phrase">AppArmor</span> Glossary</span></a></li></ol></li><li class="inactive"><a href="bk05pt05.html"><span class="number">V </span><span class="name">SELinux</span></a><ol><li class="inactive"><a href="cha.selinux.html"><span class="number">30 </span><span class="name">Configuring SELinux</span></a></li></ol></li><li class="inactive"><a href="part.audit.html"><span class="number">VI </span><span class="name"><em class="citetitle ">The Linux Audit Framework</em></span></a><ol><li class="inactive"><a href="cha.audit.comp.html"><span class="number">31 </span><span class="name">Understanding Linux Audit</span></a></li><li class="inactive"><a href="cha.audit.setup.html"><span class="number">32 </span><span class="name">Setting Up the Linux Audit Framework</span></a></li><li class="inactive"><a href="cha.audit.scenarios.html"><span class="number">33 </span><span class="name">Introducing an Audit Rule Set</span></a></li><li class="inactive"><a href="cha.audit.moreinfo.html"><span class="number">34 </span><span class="name">Useful Resources</span></a></li></ol></li><li class="inactive"><a href="app.security.docupdates.html"><span class="number">A </span><span class="name">Documentation Updates</span></a></li><li class="inactive"><a href="bk05apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 5. LDAP—A Directory Service" href="cha.security.ldap.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. Network Authentication with Kerberos" href="cha.security.kerberos.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.security.html">Security Guide</a><span> › </span><a class="crumb" href="part.auth.html">Authentication</a><span> › </span><a class="crumb" href="cha.security.ad.html">Active Directory Support</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 5. LDAP—A Directory Service" href="cha.security.ldap.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. Network Authentication with Kerberos" href="cha.security.kerberos.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.security.ad"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP1</span></span></span></div><div><h2 class="title"><span class="number">6 </span><span class="name">Active Directory Support</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>security_ad_support.xml</li><li><span class="ds-label">ID: </span>cha.security.ad</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.security.ad.html#sec.security.ad.integrate"><span class="number">6.1 </span><span class="name">Integrating Linux and AD Environments</span></a></span></dt><dt><span class="sect1"><a href="cha.security.ad.html#sec.security.ad.background"><span class="number">6.2 </span><span class="name">Background Information for Linux AD Support</span></a></span></dt><dt><span class="sect1"><a href="cha.security.ad.html#sec.security.ad.config"><span class="number">6.3 </span><span class="name">Configuring a Linux Client for Active Directory</span></a></span></dt><dt><span class="sect1"><a href="cha.security.ad.html#sec.security.ad.login"><span class="number">6.4 </span><span class="name">Logging In to an AD Domain</span></a></span></dt><dt><span class="sect1"><a href="cha.security.ad.html#sec.security.ad.passwd"><span class="number">6.5 </span><span class="name">Changing Passwords</span></a></span></dt></dl></div></div><p>
  Active Directory* (AD) is a directory-service based on LDAP, Kerberos, and
  other services that is used by Microsoft Windows to manage resources,
  services, and people. In an MS Windows network, AD provides information
  about these objects, restricts access to them, and enforces policies.
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> lets you join existing AD domains and integrate your
  Linux machine into a Windows environment.
 </p><div class="sect1 " id="sec.security.ad.integrate"><div class="titlepage"><div><div><h2 class="title" id="sec.security.ad.integrate"><span class="number">6.1 </span><span class="name">Integrating Linux and AD Environments</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.integrate">#</a></h2></div></div></div><p>
   With a Linux client (configured as an Active Directory client) that is
   joined to an existing Active Directory domain, benefit from various
   features not available on a pure <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> Linux client:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139755144425552"><span class="term ">Browsing Shared Files and Directories with SMB</span></dt><dd><p>
      GNOME Files supports browsing shared resources
      through SMB.
     </p></dd><dt id="idm139755144423664"><span class="term ">Sharing Files and Directories with SMB</span></dt><dd><p>
      Nautilus supports sharing directories and files as in Windows.
     </p></dd><dt id="idm139755144421792"><span class="term ">Accessing and Manipulating User Data on the Windows Server</span></dt><dd><p>
      Through Nautilus, users can access their Windows user data and
      can edit, create, and delete files and directories on the Windows
      server. Users can access their data without having to enter their
      password multiple times.
     </p></dd><dt id="idm139755144419712"><span class="term ">Offline Authentication</span></dt><dd><p>
      Users can log in and access their local data on the Linux
      machine even if they are offline or the AD server is unavailable for
      other reasons.
     </p></dd><dt id="idm139755144417776"><span class="term ">Windows Password Change</span></dt><dd><p>
      This port of AD support in Linux enforces corporate password policies
      stored in Active Directory. The display managers and console support
      password change messages and accept your input. You can even use the
      Linux <code class="command">passwd</code> command to set Windows passwords.
     </p></dd><dt id="idm139755144415280"><span class="term ">Single-Sign-On through Kerberized Applications</span></dt><dd><p>
      
      Many applications of both desktops are Kerberos-enabled
      (<span class="emphasis"><em>kerberized</em></span>), which means they can transparently
      handle authentication for the user without the need for password
      reentry at Web servers, proxies, groupware applications, or other
      locations.
     </p></dd></dl></div><p>
   A brief technical background for most of these features is given in the
   following section. 
  </p></div><div class="sect1 " id="sec.security.ad.background"><div class="titlepage"><div><div><h2 class="title" id="sec.security.ad.background"><span class="number">6.2 </span><span class="name">Background Information for Linux AD Support</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.background">#</a></h2></div></div></div><p>
   Many system components need to interact flawlessly to integrate
   a Linux client into an existing Windows Active Directory domain.
   <a class="xref" href="cha.security.ad.html#fig.ad.schema" title="Active Directory Authentication Schema">Figure 6.1, “Active Directory Authentication Schema”</a> highlights the most prominent ones. The
   following sections focus on the underlying processes of the key events in
   AD server and client interaction.
  </p><div class="figure" id="fig.ad.schema"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/sled10_ad_schema.png"><img src="images/sled10_ad_schema.png" width="" alt="Active Directory Authentication Schema" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 6.1: </span><span class="name">Active Directory Authentication Schema </span><a title="Permalink" class="permalink" href="cha.security.ad.html#fig.ad.schema">#</a></h6></div></div><p>
   To communicate with the directory service, the client needs to share at
   least two protocols with the server:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139755144402720"><span class="term ">LDAP</span></dt><dd><p>
      LDAP is a protocol optimized for managing directory information. A
      Windows domain controller with AD can use the LDAP protocol to
      exchange directory information with the clients. To learn more about
      LDAP in general and about the open source port of it, OpenLDAP, refer
      to <a class="xref" href="cha.security.ldap.html" title="Chapter 5. LDAP—A Directory Service">Chapter 5, <em>LDAP—A Directory Service</em></a>.
     </p></dd><dt id="idm139755144400080"><span class="term ">Kerberos</span></dt><dd><p> Kerberos is a third-party trusted authentication service.
            All its clients trust Kerberos's authorization of another
            client's identity, enabling kerberized single-sign-on (SSO)
            solutions. Windows supports a Kerberos implementation,
            making Kerberos SSO possible even with Linux clients. To
            learn more about Kerberos in Linux, refer to <a class="xref" href="cha.security.kerberos.html" title="Chapter 7. Network Authentication with Kerberos">Chapter 7, <em>Network Authentication with Kerberos</em></a>. </p></dd></dl></div><p>
   The following client components process account and authentication data:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139755144396384"><span class="term ">Winbind</span></dt><dd><p>
      The most central part of this solution is the winbind daemon that is a
      part of the Samba project and handles all communication with the AD
      server.
     </p></dd><dt id="idm139755144394432"><span class="term ">NSS (<span class="emphasis"><em>Name Service Switch</em></span>)</span></dt><dd><p>
      NSS routines provide name service information. Naming service for both
      users and groups is provided by <code class="filename">nss_winbind</code>. This
      module directly interacts with the winbind daemon.
     </p></dd><dt id="idm139755144391600"><span class="term ">PAM (<span class="emphasis"><em>Pluggable Authentication Modules</em></span>)</span></dt><dd><p>
      User authentication for AD users is done by the
      <code class="filename">pam_winbind</code> module. The creation of user homes
      for the AD users on the Linux client is handled by
      <code class="filename">pam_mkhomedir</code>. The
      <code class="filename">pam_winbind</code> module directly interacts with
      winbindd. To learn more about PAM in general, refer to
      <a class="xref" href="cha.pam.html" title="Chapter 2. Authentication with PAM">Chapter 2, <em>Authentication with PAM</em></a>.
     </p></dd></dl></div><p>
   Applications that are PAM-aware, like the login routines and the GNOME
   display manager, interact with the PAM and NSS layer to authenticate
   against the Windows server. Applications supporting Kerberos
   authentication (such as file managers, Web browsers, or e-mail clients)
   use the Kerberos credential cache to access user's Kerberos tickets,
   making them part of the SSO framework.
  </p><div class="sect2 " id="sec.security.ad.background.domain_join"><div class="titlepage"><div><div><h3 class="title" id="sec.security.ad.background.domain_join"><span class="number">6.2.1 </span><span class="name">Domain Join</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.background.domain_join">#</a></h3></div></div></div><p>
    During domain join, the server and the client establish a secure
    relation. On the client, the following tasks need to be performed to
    join the existing LDAP and Kerberos SSO environment provided by the
    Window domain controller. The entire join process is handled by the
    YaST Domain Membership module, which can be run during installation
    or in the installed system:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      The Windows domain controller providing both LDAP and KDC (Key
      Distribution Center) services is located.
     </p></li><li class="step "><p>
      A machine account for the joining client is created in the directory
      service.
     </p></li><li class="step "><p>
      An initial ticket granting ticket (TGT) is obtained for the client and
      stored in its local Kerberos credential cache. The client needs this
      TGT to get further tickets allowing it to contact other services, like
      contacting the directory server for LDAP queries.
     </p></li><li class="step "><p>
      NSS and PAM configurations are adjusted to enable the client to
      authenticate against the domain controller.
     </p></li></ol></div></div><p>
    During client boot, the winbind daemon is started and retrieves the
    initial Kerberos ticket for the machine account. winbindd automatically
    refreshes the machine's ticket to keep it valid. To keep track of the
    current account policies, winbindd periodically queries the domain
    controller.
   </p></div><div class="sect2 " id="sec.security.ad.background.logon"><div class="titlepage"><div><div><h3 class="title" id="sec.security.ad.background.logon"><span class="number">6.2.2 </span><span class="name">Domain Login and User Homes</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.background.logon">#</a></h3></div></div></div><p>
    The login manager of GNOME (GDM) has been extended to allow the handling
    of AD domain login. Users can choose to log in to the primary domain the
    machine has joined or to one of the trusted domains with which the
    domain controller of the primary domain has established a trust
    relationship.
   </p><p>
    User authentication is mediated by several PAM modules as described
    in <a class="xref" href="cha.security.ad.html#sec.security.ad.background" title="6.2. Background Information for Linux AD Support">Section 6.2, “Background Information for Linux AD Support”</a>. The
    <code class="filename">pam_winbind</code> module used to authenticate clients
    against Active Directory or NT4 domains is fully aware of Windows error
    conditions that might prohibit a user's login. The Windows error codes
    are translated into appropriate user-readable error messages that PAM
    gives at login through any of the supported methods (GDM, console, and
    SSH):
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139755144374128"><span class="term "><code class="literal">Password has expired</code>
     </span></dt><dd><p>
       The user sees a message stating that the password has expired and
       needs to be changed. The system prompts for a new password and
       informs the user if the new password does not comply with corporate
       password policies (for example the password is too short, too simple,
       or already in the history). If a user's password change fails, the
       reason is shown and a new password prompt is given.
      </p></dd><dt id="idm139755144371632"><span class="term "><code class="literal">Account disabled</code>
     </span></dt><dd><p>
       The user sees an error message stating that the account has been
       disabled and to contact the system administrator.
      </p></dd><dt id="idm139755144369424"><span class="term "><code class="literal">Account locked out</code>
     </span></dt><dd><p>
       The user sees an error message stating that the account has been
       locked and to contact the system administrator.
      </p></dd><dt id="idm139755144367232"><span class="term "><code class="literal">Password has to be changed</code>
     </span></dt><dd><p>
       The user can log in but receives a warning that the password needs to
       be changed soon. This warning is sent three days before that password
       expires. After expiration, the user cannot log in.
      </p></dd><dt id="idm139755144364928"><span class="term "><code class="literal">Invalid workstation</code>
     </span></dt><dd><p>
       When a user is restricted to specific workstations and the current
       <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> machine is not among them, a message appears that
       this user cannot log in from this workstation.
      </p></dd><dt id="idm139755144361552"><span class="term "><code class="literal">Invalid logon hours</code>
     </span></dt><dd><p>
       When a user is only allowed to log in during working hours and tries
       to log in outside working hours, a message informs the user that
       logging in is not possible at that time.
      </p></dd><dt id="idm139755144359280"><span class="term "><code class="literal">Account expired</code>
     </span></dt><dd><p>
       An administrator can set an expiration time for a specific user
       account. If that user tries to log in after expiration, the user gets
       a message that the account has expired and cannot be used to log in.
      </p></dd></dl></div><p>
    During a successful authentication, <code class="filename">pam_winbind</code>
    acquires a ticket granting ticket (TGT) from the Kerberos server of
    Active Directory and stores it in the user's credential cache. It also
    renews the TGT in the background, requiring no user interaction.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports local home directories for AD users. If
    configured through YaST as described in
    <a class="xref" href="cha.security.ad.html#sec.security.ad.config" title="6.3. Configuring a Linux Client for Active Directory">Section 6.3, “Configuring a Linux Client for Active Directory”</a>, user homes are created at the
    first login of a Windows (AD) user into the Linux client. These home
    directories look and feel entirely the same as standard Linux user home
    directories and work independently of the AD domain controller. Using a
    local user home, it is possible to access a user's data on this machine
    (even when the AD server is disconnected) as long as the Linux client
    has been configured to perform offline authentication.
   </p></div><div class="sect2 " id="sec.security.ad.background.offline"><div class="titlepage"><div><div><h3 class="title" id="sec.security.ad.background.offline"><span class="number">6.2.3 </span><span class="name">Offline Service and Policy Support</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.background.offline">#</a></h3></div></div></div><p>
    Users in a corporate environment must have the ability to become roaming
    users (for example, to switch networks or even work disconnected for
    some time). To enable users to log in to a disconnected machine,
    extensive caching was integrated into the winbind daemon. The winbind
    daemon enforces password policies even in the offline state. It tracks
    the number of failed login attempts and reacts according to the policies
    configured in Active Directory. Offline support is disabled by default
    and must be explicitly enabled in the YaST Domain Membership
    module.
   </p><p>
    When the domain controller has become unavailable, the user can still
    access network resources (other than the AD server itself) with valid
    Kerberos tickets that have been acquired before losing the connection
    (as in Windows). Password changes cannot be processed unless the domain
    controller is online. While disconnected from the AD server, a user
    cannot access any data stored on this server. When a workstation has
    become disconnected from the network entirely and connects to the
    corporate network again later, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> acquires a new Kerberos
    ticket as soon as the user has locked and unlocked the desktop (for
    example, using a desktop screen saver).
   </p></div></div><div class="sect1 " id="sec.security.ad.config"><div class="titlepage"><div><div><h2 class="title" id="sec.security.ad.config"><span class="number">6.3 </span><span class="name">Configuring a Linux Client for Active Directory</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.config">#</a></h2></div></div></div><p>
   Before your client can join an AD domain, some adjustments must be made
   to your network setup to ensure the flawless interaction of client and
   server.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139755144346096"><span class="term ">DNS</span></dt><dd><p>
      Configure your client machine to use a DNS server that can forward DNS
      requests to the AD DNS server. Alternatively, configure your machine
      to use the AD DNS server as the name service data source.
     </p></dd><dt id="idm139755144344096"><span class="term ">NTP</span></dt><dd><p>
      To succeed with Kerberos authentication, the client must have its time
      set accurately. It is highly recommended to use a central NTP time
      server for this purpose (this can be also the NTP server running on
      your Active Directory domain controller). If the clock skew between
      your Linux host and the domain controller exceeds a certain limit,
      Kerberos authentication fails and the client is logged in using the
      weaker NTLM (NT LAN Manager) authentication. For more details about
      using active directory for time synchronization, see
      <a class="xref" href="cha.security.ad.html#proc.ad.join" title="Joining an AD Domain">Procedure 6.1, “Joining an AD Domain”</a>.
     </p></dd><dt id="idm139755144341168"><span class="term ">Firewall</span></dt><dd><p>
      To browse your network neighborhood, either disable the firewall
      entirely or mark the interface used for browsing as part of the
      internal zone.
     </p><p>
      
      To change the firewall settings on your client, log in as
      <code class="systemitem">root</code> and start the YaST firewall module. Select
      <span class="guimenu">Interfaces</span>. Select your network interface from the
      list of interfaces and click <span class="guimenu">Change</span>. Select
      <span class="guimenu">Internal Zone</span> and apply your settings with
      <span class="guimenu">OK</span>. Leave the firewall settings with <span class="guimenu">Next</span> › <span class="guimenu">Finish</span>. To
      disable the firewall, check the <span class="guimenu">Disable Firewall Automatic
      Starting</span> option, and leave the firewall module with
      <span class="guimenu">Next</span> › <span class="guimenu">Finish</span>.
     </p></dd><dt id="idm139755144332368"><span class="term ">AD Account</span></dt><dd><p>
      You cannot log in to an AD domain unless the AD administrator has
      provided you with a valid user account for that domain. Use the AD
      user name and password to log in to the AD domain from your Linux
      client.
     </p></dd></dl></div><p>
   To join an AD domain, proceed as follows:
  </p><div class="procedure " id="proc.ad.join"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 6.1: </span><span class="name">Joining an AD Domain </span><a title="Permalink" class="permalink" href="cha.security.ad.html#proc.ad.join">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Log in as <code class="systemitem">root</code> and start YaST.
    </p></li><li class="step "><p>
     Start <span class="guimenu">Network Services</span> › <span class="guimenu">Windows
     Domain Membership</span>.
    </p></li><li class="step "><p>
     Enter the domain to join at <span class="guimenu">Domain or Workgroup</span> in
     the <span class="guimenu">Windows Domain Membership</span> screen (see
     <a class="xref" href="cha.security.ad.html#fig.ad.smbclient" title="Determining Windows Domain Membership">Figure 6.2, “Determining Windows Domain Membership”</a>). If the DNS settings on your host
     are properly integrated with the Windows DNS server, enter the AD
     domain name in its DNS format
     (<code class="literal">mydomain.mycompany.com</code>). If you enter the short
     name of your domain (also known as the pre–Windows 2000 domain
     name), YaST must rely on NetBIOS name resolution instead of DNS to
     find the correct domain controller.

    </p><div class="figure" id="fig.ad.smbclient"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/ad_sambaclient.png"><img src="images/ad_sambaclient.png" width="" alt="Determining Windows Domain Membership" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 6.2: </span><span class="name">Determining Windows Domain Membership </span><a title="Permalink" class="permalink" href="cha.security.ad.html#fig.ad.smbclient">#</a></h6></div></div></li><li class="step "><p>
     Check <span class="guimenu">Also Use SMB Information for Linux
     Authentication</span> to use the SMB source for Linux
     authentication.
    </p></li><li class="step "><p>
     Check <span class="guimenu">Create Home Directory on Login</span> to
     automatically create a local home directory for your AD user on the
     Linux machine.
    </p></li><li class="step "><p>
     Check <span class="guimenu">Offline Authentication</span> to allow your domain
     users to log in even if the AD server is temporarily unavailable, or if
     you do not have a network connection.
    </p></li><li class="step "><p>
     Select <span class="guimenu">Expert Settings</span>, if you want to change the
     UID and GID ranges for the Samba users and groups. Let DHCP retrieve
     the WINS server only if you need it. This is the case when some
     machines are resolved only by the WINS system.
    </p></li><li class="step "><p>
     Configure NTP time synchronization for your AD environment by selecting
     <span class="guimenu">NTP Configuration</span> and entering an appropriate server
     name or IP address. This step is obsolete if you have already entered
     the appropriate settings in the stand-alone YaST NTP configuration
     module.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span> and confirm the domain join when prompted
     for it.
    </p></li><li class="step "><p>
     Provide the password for the Windows administrator on the AD server and
     click <span class="guimenu">OK</span> (see <a class="xref" href="cha.security.ad.html#fig.ad.join1" title="Providing Administrator Credentials">Figure 6.3, “Providing Administrator Credentials”</a>).
    </p><div class="figure" id="fig.ad.join1"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/ad_join1.png"><img src="images/ad_join1.png" width="" alt="Providing Administrator Credentials" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 6.3: </span><span class="name">Providing Administrator Credentials </span><a title="Permalink" class="permalink" href="cha.security.ad.html#fig.ad.join1">#</a></h6></div></div></li></ol></div></div><p>
   After you have joined the AD domain, you can log in to it from your
   workstation using the display manager of your desktop or the console.
  </p><div id="idm139755144299040" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Domain Name</h6><p>
    Joining a domain may not succeed if the domain name ends with
    <code class="literal">.local</code>. Names ending in <code class="literal">.local</code>
    cause conflicts with Multicast DNS (MDNS) where
    <code class="literal">.local</code> is reserved for link-local host names.
   </p></div><div id="idm139755144296224" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>
    Currently only a domain administrator account, such as
    <code class="literal">Administrator</code>, can join <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> into Active
    Directory.
   </p></div></div><div class="sect1 " id="sec.security.ad.login"><div class="titlepage"><div><div><h2 class="title" id="sec.security.ad.login"><span class="number">6.4 </span><span class="name">Logging In to an AD Domain</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.login">#</a></h2></div></div></div><p>
   Provided your machine has been configured to authenticate against Active
   Directory and you have a valid Windows user identity, you can log in to
   your machine using the AD credentials. Login is supported for GNOME, the
   console, SSH, and any other PAM-aware application.
  </p><div id="idm139755144291680" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Offline Authentication</h6><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> supports offline authentication, allowing you to log in
    to your client machine even when it is offline. See
    <a class="xref" href="cha.security.ad.html#sec.security.ad.background.offline" title="6.2.3. Offline Service and Policy Support">Section 6.2.3, “Offline Service and Policy Support”</a> for details.
   </p></div><div class="sect2 " id="sec.security.ad.login.gui"><div class="titlepage"><div><div><h3 class="title" id="sec.security.ad.login.gui"><span class="number">6.4.1 </span><span class="name">GDM</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.login.gui">#</a></h3></div></div></div><p>
    To authenticate a GNOME client machine against an AD server, proceed as
    follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Enter the domain name and the Windows user name in the form of
      <em class="replaceable ">Domain_Name</em>\<em class="replaceable ">Windows_User_Name</em>
      in the <span class="guimenu">User_Name</span> field and press
      <span class="keycap">Enter</span>.
     </p></li><li class="step "><p>
      Enter your Windows password and press <span class="keycap">Enter</span>.
     </p></li></ol></div></div><p>
    If configured to do so, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> creates a user home directory
    on the local machine on the first login of each AD authenticated user.
    This allows you to benefit from the AD support of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> while
    still having a fully functional Linux machine at your disposal.
   </p></div><div class="sect2 " id="sec.security.ad.login.console"><div class="titlepage"><div><div><h3 class="title" id="sec.security.ad.login.console"><span class="number">6.4.2 </span><span class="name">Console Login</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.login.console">#</a></h3></div></div></div><p>
    Besides logging in to the AD client machine using a graphical front-end,
    you can log in using the text-based console or even remotely using SSH.
   </p><p>
    To log in to your AD client from a console, enter
    <code class="literal"><em class="replaceable ">DOMAIN</em>\<em class="replaceable ">user</em></code>
    at the <code class="literal">login:</code> prompt and provide the password.
   </p><p>
    To remotely log in to your AD client machine using SSH, proceed as
    follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      At the login prompt, enter:
     </p><div class="verbatim-wrap"><pre class="screen">ssh <em class="replaceable ">DOMAIN</em>\\<em class="replaceable ">user</em>@<em class="replaceable ">host_name</em></pre></div><p>
      The <code class="literal">\</code> domain and login delimiter is escaped with
      another <code class="literal">\</code> sign.
     </p></li><li class="step "><p>
      Provide the user's password.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.security.ad.passwd"><div class="titlepage"><div><div><h2 class="title" id="sec.security.ad.passwd"><span class="number">6.5 </span><span class="name">Changing Passwords</span> <a title="Permalink" class="permalink" href="cha.security.ad.html#sec.security.ad.passwd">#</a></h2></div></div></div><p>
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> has the ability to help a user choose a suitable new
   password that meets the corporate security policy. The underlying PAM
   module retrieves the current password policy settings from the domain
   controller, informing the user about the specific password quality
   requirements a user account typically has by means of a message on login.
   Like its Windows counterpart, <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> presents a message
   describing:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Password history settings
    </p></li><li class="listitem "><p>
     Minimum password length requirements
    </p></li><li class="listitem "><p>
     Minimum password age
    </p></li><li class="listitem "><p>
     Password complexity
    </p></li></ul></div><p>
   The password change process cannot succeed unless all requirements have
   been successfully met. Feedback about the password status is given both
   through the display managers and the console.
  </p><p>
   GDM provides feedback about password expiration and the prompt for new
   passwords in an interactive mode. To change passwords in the display
   managers, provide the password information when prompted.
  </p><p>
   To change your Windows password, you can use the standard Linux utility,
   <code class="command">passwd</code>, instead of having to manipulate this data on
   the server. To change your Windows password, proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Log in at the console.
    </p></li><li class="step "><p>
     Enter <code class="literal">passwd</code>.
    </p></li><li class="step "><p>
     Enter your current password when prompted.
    </p></li><li class="step "><p>
     Enter the new password.
    </p></li><li class="step "><p>
     Reenter the new password for confirmation. If your new password does
     not comply with the policies on the Windows server, this feedback is
     given to you and you are prompted for another password.
    </p></li></ol></div></div><p>
   To change your Windows password from the GNOME desktop, proceed as
   follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Click the <span class="guimenu">Computer</span> icon on the left edge of the
     panel.
    </p></li><li class="step "><p>
     Select <span class="guimenu">Control Center</span>.
    </p></li><li class="step "><p>
     From the <span class="guimenu">Personal</span> section, select
     <span class="guimenu">About Me</span> › <span class="guimenu">Change
     Password</span>.
    </p></li><li class="step "><p>
     Enter your old password.
    </p></li><li class="step "><p>
     Enter and confirm the new password.
    </p></li><li class="step "><p>
     Leave the dialog with <span class="guimenu">Close</span> to apply your settings.
    </p></li></ol></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.security.kerberos.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 7 </span>Network Authentication with Kerberos</span></a><a class="nav-link" href="cha.security.ldap.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 5 </span>LDAP—A Directory Service</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>