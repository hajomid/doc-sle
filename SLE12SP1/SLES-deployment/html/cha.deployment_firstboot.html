<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Deploying Customized Preinstallations | Deployment Guide | SUSE Linux Enterprise Server 12 SP1</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="12 SP1" /><meta name="book-title" content="Deployment Guide" /><meta name="chapter-title" content="Chapter 24. Deploying Customized Preinstallations" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 12 SP1" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="part.imaging.html" title="Part IV. Imaging and Creating Products" /><link rel="prev" href="cha.imgcreator.html" title="Chapter 23. Creating Images with YaST Image Creator" /><link rel="next" href="part.autoinstall.html" title="Part V. Automated Installations" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.sle.deployment.html">Deployment Guide</a><span> › </span><a class="crumb" href="part.imaging.html">Imaging and Creating Products</a><span> › </span><a class="crumb" href="cha.deployment_firstboot.html">Deploying Customized Preinstallations</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Deployment Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface.deployment.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="cha.planning.html"><span class="number">1 </span><span class="name">Planning for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></a></li><li class="inactive"><a href="part.archspec.html"><span class="number">I </span><span class="name">Architecture-Specific Installation Considerations</span></a><ol><li class="inactive"><a href="cha.x86.html"><span class="number">2 </span><span class="name">Installation on AMD64 and Intel 64</span></a></li><li class="inactive"><a href="cha.power.html"><span class="number">3 </span><span class="name">Installation on IBM POWER</span></a></li><li class="inactive"><a href="cha.zseries.html"><span class="number">4 </span><span class="name">Installation on IBM z Systems</span></a></li></ol></li><li class="inactive"><a href="part.mandeploy.html"><span class="number">II </span><span class="name">Manual Deployment</span></a><ol><li class="inactive"><a href="cha.deployment.html"><span class="number">5 </span><span class="name">Deployment Strategies</span></a></li><li class="inactive"><a href="cha.inst.html"><span class="number">6 </span><span class="name">Installation with YaST</span></a></li><li class="inactive"><a href="cha.y2.hw.html"><span class="number">7 </span><span class="name">Setting Up Hardware Components with YaST</span></a></li><li class="inactive"><a href="cha.y2.sw.html"><span class="number">8 </span><span class="name">Installing or Removing Software</span></a></li><li class="inactive"><a href="cha.add-ons.html"><span class="number">9 </span><span class="name">Installing Modules, Extensions, and Third Party Add-On Products</span></a></li><li class="inactive"><a href="cha.tuning.multikernel.html"><span class="number">10 </span><span class="name">Installing Multiple Kernel Versions</span></a></li><li class="inactive"><a href="cha.y2.userman.html"><span class="number">11 </span><span class="name">Managing Users with YaST</span></a></li><li class="inactive"><a href="cha.y2.lang.html"><span class="number">12 </span><span class="name">Changing Language and Country Settings with YaST</span></a></li><li class="inactive"><a href="cha.deployment.remoteinst.html"><span class="number">13 </span><span class="name">Remote Installation</span></a></li><li class="inactive"><a href="cha.advdisk.html"><span class="number">14 </span><span class="name">Advanced Disk Setup</span></a></li></ol></li><li class="inactive"><a href="part.update.html"><span class="number">III </span><span class="name">Updating and Upgrading SUSE Linux Enterprise</span></a><ol><li class="inactive"><a href="cha.update.background.html"><span class="number">15 </span><span class="name">Life Cycle and Support</span></a></li><li class="inactive"><a href="cha.update.backporting.html"><span class="number">16 </span><span class="name">Backporting Source Code</span></a></li><li class="inactive"><a href="cha.update.sle.html"><span class="number">17 </span><span class="name">Upgrading SUSE Linux Enterprise</span></a></li><li class="inactive"><a href="cha.update.spmigration.html"><span class="number">18 </span><span class="name">Service Pack Migration</span></a></li></ol></li><li class="inactive"><a href="part.imaging.html"><span class="number">IV </span><span class="name">Imaging and Creating Products</span></a><ol><li class="inactive"><a href="cha.kiwi.pointer.html"><span class="number">19 </span><span class="name">Creating Images with KIWI</span></a></li><li class="inactive"><a href="cha.studio.pointer.html"><span class="number">20 </span><span class="name">Creating Images with SUSE Studio</span></a></li><li class="inactive"><a href="cha.addon_creator.html"><span class="number">21 </span><span class="name">Creating Add-on Products With Add-on Product Creator</span></a></li><li class="inactive"><a href="cha.productcreator.html"><span class="number">22 </span><span class="name">Creating Images with YaST Product Creator</span></a></li><li class="inactive"><a href="cha.imgcreator.html"><span class="number">23 </span><span class="name">Creating Images with YaST Image Creator</span></a></li><li class="inactive"><a href="cha.deployment_firstboot.html"><span class="number">24 </span><span class="name">Deploying Customized Preinstallations</span></a></li></ol></li><li class="inactive"><a href="part.autoinstall.html"><span class="number">V </span><span class="name">Automated Installations</span></a><ol><li class="inactive"><a href="cha.deployment.autoinst.html"><span class="number">25 </span><span class="name">Automated Installation</span></a></li><li class="inactive"><a href="cha.update.auto.html"><span class="number">26 </span><span class="name">Automated Upgrade from SUSE Linux Enterprise 11 SP2 to 11 SP3</span></a></li><li class="inactive"><a href="cha.autokiwi.html"><span class="number">27 </span><span class="name">Automated Deployment of Preload Images</span></a></li></ol></li><li class="inactive"><a href="app.deployment.docupdates.html"><span class="number">A </span><span class="name">Documentation Updates</span></a></li><li class="inactive"><a href="bk02apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 23. Creating Images with YaST Image Creator" href="cha.imgcreator.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part V. Automated Installations" href="part.autoinstall.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.sle.deployment.html">Deployment Guide</a><span> › </span><a class="crumb" href="part.imaging.html">Imaging and Creating Products</a><span> › </span><a class="crumb" href="cha.deployment_firstboot.html">Deploying Customized Preinstallations</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 23. Creating Images with YaST Image Creator" href="cha.imgcreator.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part V. Automated Installations" href="part.autoinstall.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.deployment_firstboot"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">12 SP1</span></span></span></div><div><h2 class="title"><span class="number">24 </span><span class="name">Deploying Customized Preinstallations</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>deployment_firstboot.xml</li><li><span class="ds-label">ID: </span>cha.deployment_firstboot</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.deployment_firstboot.html#sec.fb.master"><span class="number">24.1 </span><span class="name">Preparing the Master Machine</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment_firstboot.html#sec.fb.customize"><span class="number">24.2 </span><span class="name">Customizing the Firstboot Installation</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment_firstboot.html#sec.fb.clone"><span class="number">24.3 </span><span class="name">Cloning the Master Installation</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment_firstboot.html#sec.fb.personalize"><span class="number">24.4 </span><span class="name">Personalizing the Installation</span></a></span></dt></dl></div></div><p>
  Rolling out customized preinstallations of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> to many identical
  machines spares you from installing each one of them separately and provides
  a standardized installation for the end users.  With YaST Firstboot,
  create customized preinstallation images and determine the workflow for the
  final personalizing steps that involve end user interaction (as opposed to
  AutoYaST, which allows completely automated installations; for more information,
  see <a class="xref" href="cha.deployment.autoinst.html" title="Chapter 25. Automated Installation">Chapter 25, <em>Automated Installation</em></a>).
 </p><p>
  Creating a custom installation, rolling it out to your hardware, and
  personalizing the final product involves the following steps:
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Prepare the master machine whose disk needs to be cloned to the client
    machines. For more information, refer to
    <a class="xref" href="cha.deployment_firstboot.html#sec.fb.master" title="24.1. Preparing the Master Machine">Section 24.1, “Preparing the Master Machine”</a>.
   </p></li><li class="step "><p>
    Customize the firstboot workflow. For more information, refer to
    <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize" title="24.2. Customizing the Firstboot Installation">Section 24.2, “Customizing the Firstboot Installation”</a>.
   </p></li><li class="step "><p>
    Clone the master machine's disk and roll this image out to the clients'
    disks. For more information, refer to <a class="xref" href="cha.deployment_firstboot.html#sec.fb.clone" title="24.3. Cloning the Master Installation">Section 24.3, “Cloning the Master Installation”</a>.
   </p></li><li class="step "><p>
    Have the end user personalize the instance of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>. For more
    information, refer to <a class="xref" href="cha.deployment_firstboot.html#sec.fb.personalize" title="24.4. Personalizing the Installation">Section 24.4, “Personalizing the Installation”</a>.
   </p></li></ol></div></div><div class="sect1 " id="sec.fb.master"><div class="titlepage"><div><div><h2 class="title" id="sec.fb.master"><span class="number">24.1 </span><span class="name">Preparing the Master Machine</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.master">#</a></h2></div></div></div><p>
   To prepare a master machine for a firstboot workflow, proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step " id="st.master1"><p>
     Insert the installation media into the master machine.
    </p></li><li class="step " id="st.master2"><p>
     Boot the machine.
    </p></li><li class="step " id="st.master3"><p>
     Perform a normal installation including all necessary configuration
     steps and wait for the installed machine to boot. Also install the
     <code class="systemitem">yast2-firstboot</code> package.
    </p></li><li class="step " id="st.master4"><p>
     To define your own workflow of YaST configuration steps for the
     end user or to add your own YaST modules to this workflow, proceed
     to <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize" title="24.2. Customizing the Firstboot Installation">Section 24.2, “Customizing the Firstboot Installation”</a>. Otherwise proceed directly to
     <a class="xref" href="cha.deployment_firstboot.html#st.master5" title="Step 5">Step 5</a>.
    </p></li><li class="step " id="st.master5"><p>
     Enable firstboot as <code class="systemitem">root</code>:
    </p><p>
     Create an empty file
     <code class="filename">/var/lib/YaST2/reconfig_system</code> to trigger
     firstboot's execution. This file will be deleted after the firstboot
     configuration has been successfully accomplished. Create this file
     using the following command:
    </p><div class="verbatim-wrap"><pre class="screen">touch /var/lib/YaST2/reconfig_system</pre></div></li><li class="step "><p>
     Proceed to <a class="xref" href="cha.deployment_firstboot.html#sec.fb.clone" title="24.3. Cloning the Master Installation">Section 24.3, “Cloning the Master Installation”</a>.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.fb.customize"><div class="titlepage"><div><div><h2 class="title" id="sec.fb.customize"><span class="number">24.2 </span><span class="name">Customizing the Firstboot Installation</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.customize">#</a></h2></div></div></div><p>
   Customizing the firstboot installation workflow may involve several
   different components. Customizing them is optional. If you do not make
   any changes, firstboot performs the installation using the default
   settings. The following options are available:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Customizing messages to the user, as described in
     <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.msg" title="24.2.1. Customizing YaST Messages">Section 24.2.1, “Customizing YaST Messages”</a>.
    </p></li><li class="listitem "><p>
     Customizing licenses and license actions, as described in
     <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.license" title="24.2.2. Customizing the License Action">Section 24.2.2, “Customizing the License Action”</a>.
    </p></li><li class="listitem "><p>
     Customizing the release notes to display, as described in
     <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.rn" title="24.2.3. Customizing the Release Notes">Section 24.2.3, “Customizing the Release Notes”</a>.
    </p></li><li class="listitem "><p>
     Customizing the order and number of components involved in the
     installation, as described in <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.wf" title="24.2.4. Customizing the Workflow">Section 24.2.4, “Customizing the Workflow”</a>.
    </p></li><li class="listitem "><p>
     Configuring additional optional scripts, as described in
     <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.script" title="24.2.5. Configuring Additional Scripts">Section 24.2.5, “Configuring Additional Scripts”</a>.
    </p></li></ul></div><p>
   To customize any of these components, modify the following configuration
   files:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140486194850512"><span class="term "><code class="filename">/etc/sysconfig/firstboot</code>
    </span></dt><dd><p>
      Configure various aspects of firstboot (such as release notes,
      scripts, and license actions).
     </p></dd><dt id="idm140486194848320"><span class="term "><code class="filename">/etc/YaST2/firstboot.xml</code>
    </span></dt><dd><p>
      Configure the installation workflow by enabling or disabling
      components or adding custom ones.
     </p><p>
      Provide translations for such a customized installation workflow, as
      described in <a class="xref" href="cha.deployment_firstboot.html#sec.fb.provide.trans" title="24.2.6. Providing Translations of the Installation Workflow">Section 24.2.6, “Providing Translations of the Installation Workflow”</a>.
     </p><div id="idm140486194845360" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Alternative Location of the Control File</h6><p>
       <code class="filename">/etc/YaST2/firstboot.xml</code> is the default path for
       the control file, installed by the
       <code class="systemitem">yast2-firstboot</code> package. If you need to
       define a different location for the control file, edit
       <code class="filename">/etc/sysconfig/firstboot</code>, and change the
       <code class="literal">FIRSTBOOT_CONTROL_FILE</code> variable to your preferred
       location.
      </p></div></dd></dl></div><p>
   If you want to customize more than the workflow components, refer to the
   <code class="filename">control.xml</code> documentation at
   <a class="link" href="http://doc.opensuse.org/projects/YaST/SLES11/tdg/inst_in_general_chap.html#product_control" target="_blank">http://doc.opensuse.org/projects/YaST/SLES11/tdg/inst_in_general_chap.html#product_control</a>.
  </p><div class="sect2 " id="sec.fb.customize.msg"><div class="titlepage"><div><div><h3 class="title" id="sec.fb.customize.msg"><span class="number">24.2.1 </span><span class="name">Customizing YaST Messages</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.customize.msg">#</a></h3></div></div></div><p>
    By default, an installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> contains several default
    messages that are localized and displayed at certain stages of the
    installation process. These include a welcome message, a license
    message, and a congratulatory message at the end of installation. You
    can replace any of these with your own versions and include localized
    versions of them in the installation. To include your own welcome
    message, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Log in as <code class="systemitem">root</code>.
     </p></li><li class="step "><p>
      Open the <code class="filename">/etc/sysconfig/firstboot</code> configuration
      file and apply the following changes:
     </p><ol type="a" class="substeps "><li class="step "><p>
        Set <code class="envar">FIRSTBOOT_WELCOME_DIR</code> to the directory path where
        you want to store the files containing the welcome message and the
        localized versions, for example:
       </p><div class="verbatim-wrap"><pre class="screen">FIRSTBOOT_WELCOME_DIR="/usr/share/firstboot/"</pre></div></li><li class="step "><p>
        If your welcome message has file names other than
        <code class="filename">welcome.txt</code> and
        <code class="filename">welcome_<em class="replaceable ">locale</em>.txt</code>
        (where <em class="replaceable ">locale</em> matches the ISO 639
        language codes such as <span class="quote">“<span class="quote">cs</span>”</span> or <span class="quote">“<span class="quote">de</span>”</span>),
        specify the file name pattern in
        <code class="envar">FIRSTBOOT_WELCOME_PATTERNS</code>. For example:
       </p><div class="verbatim-wrap"><pre class="screen">FIRSTBOOT_WELCOME_PATTERNS="mywelcome.txt"</pre></div><p>
        If unset, the default value of <code class="filename">welcome.txt</code> is
        assumed.
       </p></li></ol></li><li class="step "><p>
      Create the welcome file and the localized versions and place them in
      the directory specified in the
      <code class="filename">/etc/sysconfig/firstboot</code> configuration file.
     </p></li></ol></div></div><p>
    Proceed in a similar way to configure customized license and finish
    messages. These variables are <code class="envar">FIRSTBOOT_LICENSE_DIR</code> and
    <code class="envar">FIRSTBOOT_FINISH_FILE</code>.
   </p><p>
    Change the <code class="envar">SHOW_Y2CC_CHECKBOX</code> to <span class="quote">“<span class="quote">yes</span>”</span> if
    the user needs to be able to start YaST directly after performing
    the installation.
   </p></div><div class="sect2 " id="sec.fb.customize.license"><div class="titlepage"><div><div><h3 class="title" id="sec.fb.customize.license"><span class="number">24.2.2 </span><span class="name">Customizing the License Action</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.customize.license">#</a></h3></div></div></div><p>
    You can customize the way the installation system reacts to a user's
    refusal to accept the license agreement. There are three different ways
    which the system could react to this scenario:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140486194818384"><span class="term ">halt</span></dt><dd><p>
       The firstboot installation is aborted and the entire system shuts
       down. This is the default setting.
      </p></dd><dt id="idm140486194816480"><span class="term ">continue</span></dt><dd><p>
       The firstboot installation continues.
      </p></dd><dt id="idm140486194814656"><span class="term ">abort</span></dt><dd><p>
       The firstboot installation is aborted, but the system attempts to
       boot.
      </p></dd></dl></div><p>
    Make your choice and set <code class="envar">LICENSE_REFUSAL_ACTION</code> to the
    appropriate value.
   </p></div><div class="sect2 " id="sec.fb.customize.rn"><div class="titlepage"><div><div><h3 class="title" id="sec.fb.customize.rn"><span class="number">24.2.3 </span><span class="name">Customizing the Release Notes</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.customize.rn">#</a></h3></div></div></div><p>
    Depending on if you have changed the instance of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> you
    are deploying with firstboot, you probably need to educate the end users
    about important aspects of their new operating system. A standard
    installation uses release notes (displayed during one of the final
    stages of the installation) to provide important information to the
    users. To have your own modified release notes displayed as part of a
    firstboot installation, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create your own release notes file. Use the RTF format as in the
      example file in <code class="filename">/usr/share/doc/release-notes</code> and
      save the result as <code class="filename">RELEASE-NOTES.en.rtf</code> (for
      English).
     </p></li><li class="step "><p>
      Store optional localized versions next to the original version and
      replace the <code class="literal">en</code> part of the file name with the
      actual ISO 639 language code, such as <code class="literal">de</code> for
      German.
     </p></li><li class="step "><p>
      Open the firstboot configuration file from
      <code class="filename">/etc/sysconfig/firstboot</code> and set
      <code class="envar">FIRSTBOOT_RELEASE_NOTES_PATH</code> to the actual directory
      where the release notes files are stored.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.fb.customize.wf"><div class="titlepage"><div><div><h3 class="title" id="sec.fb.customize.wf"><span class="number">24.2.4 </span><span class="name">Customizing the Workflow</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.customize.wf">#</a></h3></div></div></div><p>
    By default, a standard firstboot workflow includes the following
    components:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Language Selection
     </p></li><li class="listitem "><p>
      Welcome
     </p></li><li class="listitem "><p>
      License Agreement
     </p></li><li class="listitem "><p>
      Host Name
     </p></li><li class="listitem "><p>
      Network
     </p></li><li class="listitem "><p>
      Time and Date
     </p></li><li class="listitem "><p>
      Desktop
     </p></li><li class="listitem "><p>
      root Password
     </p></li><li class="listitem "><p>
      User Authentication Method
     </p></li><li class="listitem "><p>
      User Management
     </p></li><li class="listitem "><p>
      Hardware Configuration
     </p></li><li class="listitem "><p>
      Finish Setup
     </p></li></ul></div><p>
    This standard layout of a firstboot installation workflow is not
    mandatory. You can enable or disable certain components or integrate
    your own modules into the workflow. To modify the firstboot workflow,
    manually edit the firstboot configuration file
    <code class="filename">/etc/YaST2/firstboot.xml</code>. This XML file is a subset
    of the standard <code class="filename">control.xml</code> file that is used by
    YaST to control the installation workflow.
   </p><p>
    For an overview about proposals, see <a class="xref" href="cha.deployment_firstboot.html#ex.fb.proposal" title="Configuring the Proposal Screens">Example 24.1, “Configuring the Proposal Screens”</a>.
    This provides you with enough background to modify the firstboot
    installation workflow. The basic syntax of the firstboot configuration
    file (plus how the key elements are configured) is explained with this
    example.
   </p><div class="example" id="ex.fb.proposal"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 24.1: </span><span class="name">Configuring the Proposal Screens </span><a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#ex.fb.proposal">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">    …
    &lt;proposals config:type="list"&gt;<span id="co.fb.plist"></span><span class="callout">1</span>
        &lt;proposal&gt;<span id="co.fb.p"></span><span class="callout">2</span>
            &lt;name&gt;firstboot_hardware&lt;/name&gt;<span id="co.fb.pname"></span><span class="callout">3</span>
            &lt;mode&gt;installation&lt;/mode&gt;<span id="co.fb.pmode"></span><span class="callout">4</span>
            &lt;stage&gt;firstboot&lt;/stage&gt;<span id="co.fb.pstage"></span><span class="callout">5</span>
            &lt;label&gt;Hardware Configuration&lt;/label&gt;<span id="co.fb.plabel"></span><span class="callout">6</span>
            &lt;proposal_modules config:type="list"&gt;<span id="co.fb.pmodl"></span><span class="callout">7</span>
                &lt;proposal_module&gt;printer&lt;/proposal_module&gt;<span id="co.fb.pmod"></span><span class="callout">8</span>
            &lt;/proposal_modules&gt;
        &lt;/proposal&gt;
        &lt;proposal&gt;
        …
        &lt;/proposal&gt;
    &lt;/proposals&gt;</pre></div></div></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.plist"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The container for all proposals that should be part of the firstboot
      workflow.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.p"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      The container for an individual proposal.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.pname"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      The internal name of the proposal.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.pmode"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      The mode of this proposal. Do not make any changes here. For a
      firstboot installation, this must be set to
      <code class="literal">installation</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.pstage"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
      The stage of the installation process at which this proposal is
      invoked. Do not make any changes here. For a firstboot installation,
      this must be set to <code class="literal">firstboot</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.plabel"><span class="callout">6</span></a> </p></td><td valign="top" align="left"><p>
      The label to be displayed on the proposal.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.pmodl"><span class="callout">7</span></a> </p></td><td valign="top" align="left"><p>
      The container for all modules that are part of the proposal screen.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.pmod"><span class="callout">8</span></a> </p></td><td valign="top" align="left"><p>
      One or more modules that are part of the proposal screen.
     </p></td></tr></table></div><p>
    The next section of the firstboot configuration file consists of the
    workflow definition. All modules that should be part of the firstboot
    installation workflow must be listed here.
   </p><div class="example" id="ex.fb.wf"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 24.2: </span><span class="name">Configuring the Workflow Section </span><a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#ex.fb.wf">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">    &lt;workflows  config:type="list"&gt;
        &lt;workflow&gt;
            &lt;defaults&gt;
                &lt;enable_back&gt;yes&lt;/enable_back&gt;
                &lt;enable_next&gt;yes&lt;/enable_next&gt;
                &lt;archs&gt;all&lt;/archs&gt;
            &lt;/defaults&gt;
            &lt;stage&gt;firstboot&lt;/stage&gt;
            &lt;label&gt;Configuration&lt;/label&gt;
            &lt;mode&gt;installation&lt;/mode&gt;
            … &lt;!–– list of modules  ––&gt;
            &lt;/modules&gt;
        &lt;/workflow&gt;
    &lt;/workflows&gt;
    …</pre></div></div></div><p>
    The overall structure of the <code class="literal">workflows</code> section is
    very similar to that of the <code class="literal">proposals</code> section. A
    container holds the workflow elements and the workflow elements all
    include stage, label and mode information (just as the proposals
    introduced in <a class="xref" href="cha.deployment_firstboot.html#ex.fb.proposal" title="Configuring the Proposal Screens">Example 24.1, “Configuring the Proposal Screens”</a>). The most notable
    difference is the <code class="filename">defaults</code> section, which contains
    basic design information for the workflow components:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140486194760816"><span class="term "><code class="literal">enable_back</code>
     </span></dt><dd><p>
       Include the <span class="guimenu">Back</span> button in all dialogs.
      </p></dd><dt id="idm140486194758272"><span class="term "><code class="literal">enable_next</code>
     </span></dt><dd><p>
       Include the <span class="guimenu">Next</span> button in all dialogs.
      </p></dd><dt id="idm140486194755728"><span class="term "><code class="literal">archs</code>
     </span></dt><dd><p>
       Specify the hardware architectures on which this workflow should be
       used.
      </p></dd></dl></div><div class="example" id="ex.fb.wfmod"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 24.3: </span><span class="name">Configuring the List of Workflow Components </span><a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#ex.fb.wfmod">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">    &lt;modules  config:type="list"&gt;<span id="co.fb.modl"></span><span class="callout">1</span>
        &lt;module&gt;<span id="co.fb.mod"></span><span class="callout">2</span>
            &lt;label&gt;Language&lt;/label&gt;<span id="co.fb.label"></span><span class="callout">3</span>
            &lt;enabled config:type="boolean"&gt;false&lt;/enabled&gt;<span id="co.fb.en"></span><span class="callout">4</span>
            &lt;name&gt;firstboot_language&lt;/name&gt;<span id="co.fb.name"></span><span class="callout">5</span>
        &lt;/module&gt;
    &lt;modules&gt;</pre></div></div></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.modl"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The container for all components of the workflow.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.mod"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      The module definition.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.label"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      The label displayed with the module.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.en"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      The switch to enable or disable this component in the workflow.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.fb.name"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
      The module name. The module itself must be located under
      <code class="filename">/usr/share/YaST2/clients</code> and have the
      <code class="filename">.ycp</code> file suffix.
     </p></td></tr></table></div><p>
    To make changes to the number or order of proposal screens during the
    firstboot installation, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open the firstboot configuration file at
      <code class="filename">/etc/YaST2/firstboot.xml</code>.
     </p></li><li class="step "><p>
      Delete or add proposal screens or change the order of the existing
      ones:
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        To delete an entire proposal, remove the <code class="literal">proposal</code>
        element including all its sub-elements from the
        <code class="literal">proposals</code> section and remove the respective
        <code class="literal">module</code> element (with sub-elements) from the
        workflow.
       </p></li><li class="listitem "><p>
        To add a new proposal, create a new <code class="literal">proposal</code>
        element and fill in all the required sub-elements. Make sure that
        the proposal exists as a YaST module in
        <code class="filename">/usr/share/YaST2/clients</code>.
       </p></li><li class="listitem "><p>
        To change the order of proposals, move the respective
        <code class="literal">module</code> elements containing the proposal screens
        around in the workflow. Note that there may be dependencies to other
        installation steps that require a certain order of proposals and
        workflow components.
       </p></li></ul></div></li><li class="step "><p>
      Apply your changes and close the configuration file.
     </p></li></ol></div></div><p>
    You can always change the workflow of the configuration steps when the
    default does not meet your needs. Enable or disable certain modules in
    the workflow (or add your own custom ones).
   </p><p>
    To toggle the status of a module in the firstboot workflow, proceed as
    follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open the <code class="filename">/etc/YaST2/firstboot.xml</code> configuration
      file.
     </p></li><li class="step "><p>
      Change the value for the <code class="literal">enabled</code> element from
      <code class="literal">true</code> to <code class="filename">false</code> to disable the
      module or from <code class="literal">false</code> to <code class="literal">true</code> to
      enable it again.
     </p><div class="verbatim-wrap"><pre class="screen">&lt;module&gt;
    &lt;label&gt;Time and Date&lt;/label&gt;
    &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
    &lt;name&gt;firstboot_timezone&lt;/name&gt;
&lt;/module&gt;</pre></div></li><li class="step "><p>
      Apply your changes and close the configuration file.
     </p></li></ol></div></div><p>
    To add a custom made module to the workflow, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create your own YaST module and store the module file
      <code class="filename"><em class="replaceable ">module_name</em>.ycp</code> in
      <code class="filename">/usr/share/YaST2/clients</code>.
     </p></li><li class="step "><p>
      Open the <code class="filename">/etc/YaST2/firstboot.xml</code> configuration
      file.
     </p></li><li class="step "><p>
      Determine at which point in the workflow your new module should be
      run. In doing so, make sure that possible dependencies to other steps
      in the workflow are taken into account and resolved.
     </p></li><li class="step "><p>
      Create a new <code class="literal">module</code> element inside the
      <code class="literal">modules</code> container and add the appropriate
      sub-elements:
     </p><div class="verbatim-wrap"><pre class="screen">&lt;modules config:type="list"&gt;
     …
     &lt;module&gt;
        &lt;label&gt;<em class="replaceable ">my_module</em>&lt;/label&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
        &lt;name&gt;<em class="replaceable ">filename_my_module</em>&lt;/name&gt;
     &lt;/module&gt;
&lt;/modules&gt;</pre></div><ol type="a" class="substeps "><li class="step "><p>
        Enter the label to be displayed on your module in the
        <code class="literal">label</code> element.
       </p></li><li class="step "><p>
        Make sure that <code class="literal">enabled</code> is set to
        <code class="literal">true</code> to have your module included in the
        workflow.
       </p></li><li class="step "><p>
        Enter the file name of your module in the <code class="literal">name</code>
        element. Omit the full path and the <code class="filename">.ycp</code>
        suffix.
       </p></li></ol></li><li class="step "><p>
      Apply your settings and close the configuration file.
     </p></li></ol></div></div><div id="idm140486194706016" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: 
     Finding a Connected Network Interface For Auto-Configuration
    </h6><p>
     If the target hardware may feature more than one network interface add
     the <code class="systemitem">network-autoconfig</code> package to the
     application image. <code class="systemitem">network-autoconfig</code> makes
     sure that during firstboot all available Ethernet interfaces are cycled
     until one is successfully configured with DHCP.
    </p></div></div><div class="sect2 " id="sec.fb.customize.script"><div class="titlepage"><div><div><h3 class="title" id="sec.fb.customize.script"><span class="number">24.2.5 </span><span class="name">Configuring Additional Scripts</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.customize.script">#</a></h3></div></div></div><p>
    Firstboot can be configured to execute additional scripts after the
    firstboot workflow has been completed. To add additional scripts to the
    firstboot sequence, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open the <code class="filename">/etc/sysconfig/firstboot</code> configuration
      file and make sure that the path specified for
      <code class="envar">SCRIPT_DIR</code> is correct. The default value is
      <code class="filename">/usr/share/firstboot/scripts</code>.
     </p></li><li class="step "><p>
      Create your shell script, store it in the specified directory, and
      apply the appropriate file permissions.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.fb.provide.trans"><div class="titlepage"><div><div><h3 class="title" id="sec.fb.provide.trans"><span class="number">24.2.6 </span><span class="name">Providing Translations of the Installation Workflow</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.provide.trans">#</a></h3></div></div></div><p>
    Depending on the end user it could be desirable to offer translations of
    the customized workflow. Those translations could be necessary, if you
    customized the workflow by changing the
    <code class="filename">/etc/YaST2/firstboot.xml</code> file, as described in
    <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.wf" title="24.2.4. Customizing the Workflow">Section 24.2.4, “Customizing the Workflow”</a>. This is different from the
    localization of customized YaST messages, which is already
    described in <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.msg" title="24.2.1. Customizing YaST Messages">Section 24.2.1, “Customizing YaST Messages”</a>.
   </p><p>
    If you have changed <code class="filename">/etc/YaST2/firstboot.xml</code> and
    introduced string changes, generate a new translation template file
    (<code class="filename">.pot</code> file) and use the
    <code class="systemitem">gettext</code> tool chain to translate and finally
    install the translated files in the YaST locale directories
    (<code class="filename">/usr/share/YaST2/locale</code>) as compiled
    <code class="filename">.mo</code> files. Proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Change the <code class="systemitem">textdomain</code> setting from:
     </p><div class="verbatim-wrap"><pre class="screen">&lt;textdomain&gt;firstboot&lt;/textdomain&gt;</pre></div><p>
      to, for example,
     </p><div class="verbatim-wrap"><pre class="screen">&lt;textdomain&gt;firstboot-oem&lt;/textdomain&gt;</pre></div></li><li class="step "><p>
      Use <code class="command">xgettext</code> to extract the translatable strings to
      the translation template file (<code class="filename">.pot</code> file), for
      example to <code class="filename">firstboot-oem.pot</code>:
     </p><div class="verbatim-wrap"><pre class="screen">xgettext -L Glade -o firstboot-oem.pot /etc/YaST2/firstboot.xml</pre></div></li><li class="step "><p>
      Start the translation process. Then package the translated files
      (<code class="filename">.<em class="replaceable ">LL_code</em>.po</code> files)
      the same way as translations of the other projects and install the
      compiled <code class="filename">firstboot-oem.mo</code> files.
     </p></li></ol></div></div><p>
    If you need translations for additional or changed YaST modules,
    provide translations within such a module itself. If you changed an
    existing module, make sure to change also its text-domain statement to
    avoid undesired side effects.
   </p><div id="idm140486194682112" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: For More Information</h6><p>
     For more information about YaST development, refer to
     <a class="link" href="http://en.opensuse.org/openSUSE:YaST_development" target="_blank">http://en.opensuse.org/openSUSE:YaST_development</a>.
     Detailed information about YaST firstboot can be found at
     <a class="link" href="http://doc.opensuse.org/projects/YaST/SLES11/tdg/bk09ch01s02.html" target="_blank">http://doc.opensuse.org/projects/YaST/SLES11/tdg/bk09ch01s02.html</a>.
    </p></div></div></div><div class="sect1 " id="sec.fb.clone"><div class="titlepage"><div><div><h2 class="title" id="sec.fb.clone"><span class="number">24.3 </span><span class="name">Cloning the Master Installation</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.clone">#</a></h2></div></div></div><p>
   Clone the master machine's disk using any of the imaging mechanisms
   available to you, and roll these images out to the target machines. For
   more information about imaging see
   <a class="link" href="http://doc.opensuse.org/projects/kiwi/doc/" target="_blank">http://doc.opensuse.org/projects/kiwi/doc/</a>.
  </p></div><div class="sect1 " id="sec.fb.personalize"><div class="titlepage"><div><div><h2 class="title" id="sec.fb.personalize"><span class="number">24.4 </span><span class="name">Personalizing the Installation</span> <a title="Permalink" class="permalink" href="cha.deployment_firstboot.html#sec.fb.personalize">#</a></h2></div></div></div><p>
   As soon as the cloned disk image is booted, firstboot starts and the
   installation proceeds exactly as laid out in
   <a class="xref" href="cha.deployment_firstboot.html#sec.fb.customize.wf" title="24.2.4. Customizing the Workflow">Section 24.2.4, “Customizing the Workflow”</a>. Only the components included in
   the firstboot workflow configuration are started. All other installation
   steps are skipped. The end user adjusts language, keyboard, network, and
   password settings to personalize the workstation. After this process is
   finished, a firstboot installed system behaves as any other instance of
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>.
  </p></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="part.autoinstall.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Part V </span>Automated Installations</span></a><a class="nav-link" href="cha.imgcreator.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 23 </span>Creating Images with YaST Image Creator</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>