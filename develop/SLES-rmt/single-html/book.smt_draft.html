<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Repository Management Tool for SLES 15 | SUSE Linux Enterprise Server 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1)" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="15" /><meta name="book-title" content="Repository Management Tool for SLES 15" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Server 15" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft single offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs inactive"><a class="single-crumb" href="#book.smt" accesskey="c"><span class="single-contents-icon"></span>RMT Guide</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#book.smt" accesskey="c"><span class="single-contents-icon"></span>Show Contents: RMT Guide</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#pre_smt"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="#smt.installation"><span class="number">1 </span><span class="name">RMT Installation</span></a></li><li class="inactive"><a href="#smt.server"><span class="number">2 </span><span class="name">RMT Server Configuration</span></a></li><li class="inactive"><a href="#smt.mirroring"><span class="number">3 </span><span class="name">Mirroring Repositories on the RMT Server</span></a></li><li class="inactive"><a href="#smt.management"><span class="number">4 </span><span class="name">Managing Repositories with YaST RMT Server Management</span></a></li><li class="inactive"><a href="#smt.registration"><span class="number">5 </span><span class="name">Managing Client Machines with RMT</span></a></li><li class="inactive"><a href="#smt.client"><span class="number">6 </span><span class="name">Configuring Clients to Use RMT</span></a></li><li class="inactive"><a href="#smt.tools"><span class="number">7 </span><span class="name">RMT Tools and Configuration Files</span></a></li><li class="inactive"><a href="#smt.advanced"><span class="number">8 </span><span class="name">Advanced Topics</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class="draft "><div class="documentation"><div xml:lang="en" class="book" id="book.smt" lang="en"><div class="titlepage"><div><h6 class="version-info"><span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></h6><div><h1 class="title">Repository Management Tool for SLES <span class="productnumber"><span class="phrase">15</span></span></h1></div><div class="authorgroup"><div><span class="imprint-label">Authors: </span><span class="firstname">Tomáš</span> <span class="surname">Bažant</span>, <span class="firstname">Jakub</span> <span class="surname">Friedl</span>, and <span class="firstname">Florian</span> <span class="surname">Nadge</span></div></div><div class="date"><span class="imprint-label">Publication Date: </span>April 03, 2018
</div></div></div><div class="toc"><dl><dt><span class="preface"><a href="#pre_smt"><span class="name">About This Guide</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#idm140661817308640"><span class="name">Overview</span></a></span></dt><dt><span class="sect1"><a href="#idm140661815625200"><span class="name">Additional Documentation and Resources</span></a></span></dt><dt><span class="sect1"><a href="#idm140661826551328"><span class="name">Feedback</span></a></span></dt><dt><span class="sect1"><a href="#idm140661824319984"><span class="name">Documentation Conventions</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.installation"><span class="number">1 </span><span class="name">RMT Installation</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.installation.wizard"><span class="number">1.1 </span><span class="name">RMT Configuration Wizard</span></a></span></dt><dt><span class="sect1"><a href="#smt.installation.upgrade"><span class="number">1.2 </span><span class="name">Upgrading from Previous Versions of RMT</span></a></span></dt><dt><span class="sect1"><a href="#idm140661816643808"><span class="number">1.3 </span><span class="name">Enabling SLP Announcements</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.server"><span class="number">2 </span><span class="name">RMT Server Configuration</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.yast.activation"><span class="number">2.1 </span><span class="name">Activating and Deactivating RMT with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.credentials"><span class="number">2.2 </span><span class="name">Setting the Update Server Credentials with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.database"><span class="number">2.3 </span><span class="name">Setting RMT Database Password with YaST</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.mirroring"><span class="number">3 </span><span class="name">Mirroring Repositories on the RMT Server</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.mirroring.getcredentials"><span class="number">3.1 </span><span class="name">Mirroring Credentials</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirroring.manage"><span class="number">3.2 </span><span class="name">Managing Software Repositories with RMT Command Line Tools</span></a></span></dt><dt><span class="sect1"><a href="#smt.repo.preload"><span class="number">3.3 </span><span class="name">Repository Preloading</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.management"><span class="number">4 </span><span class="name">Managing Repositories with YaST RMT Server Management</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.yast.staging.starting"><span class="number">4.1 </span><span class="name">Starting RMT Management Module</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.viewing"><span class="number">4.2 </span><span class="name">Viewing and Managing Repositories</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.registration"><span class="number">5 </span><span class="name">Managing Client Machines with RMT</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.registration.clients"><span class="number">5.1 </span><span class="name">Listing Registered Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.delete"><span class="number">5.2 </span><span class="name">Deleting Registrations</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.smtregister"><span class="number">5.3 </span><span class="name">Manual Registration of Clients at SUSE Customer Center</span></a></span></dt><dt><span class="sect1"><a href="#smt.registrations.schedule"><span class="number">5.4 </span><span class="name">Scheduling Periodic Registrations of Clients at SUSE Customer Center</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.client"><span class="number">6 </span><span class="name">Configuring Clients to Use RMT</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.client.parameters"><span class="number">6.1 </span><span class="name">Using linuxrc Parameters to Access an RMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.autoyast"><span class="number">6.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.clientsetupscript"><span class="number">6.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.yast"><span class="number">6.4 </span><span class="name">Configuring Clients with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.repolist"><span class="number">6.5 </span><span class="name">Listing Accessible Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.onlinemigration"><span class="number">6.6 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.rhel"><span class="number">6.7 </span><span class="name">How to Update Red Hat Enterprise Linux with RMT</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.tools"><span class="number">7 </span><span class="name">RMT Tools and Configuration Files</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.scripts"><span class="number">7.1 </span><span class="name">Important Scripts and Tools</span></a></span></dt><dt><span class="sect1"><a href="#idm140661818357904"><span class="number">7.2 </span><span class="name">RMT Configuration Files</span></a></span></dt><dt><span class="sect1"><a href="#smt.tools.cert"><span class="number">7.3 </span><span class="name">Server Certificates</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#smt.advanced"><span class="number">8 </span><span class="name">Advanced Topics</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#smt.backup"><span class="number">8.1 </span><span class="name">Backup of the RMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.disconnected"><span class="number">8.2 </span><span class="name">Disconnected RMT Servers</span></a></span></dt></dl></dd></dl></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><dl><dt><span class="figure"><a href="#idm140661817529120"><span class="number">1 </span><span class="name">RMT</span></a></span></dt><dt><span class="figure"><a href="#idm140661822569136"><span class="number">1.1 </span><span class="name">RMT Pattern</span></a></span></dt><dt><span class="figure"><a href="#idm140661820957088"><span class="number">1.2 </span><span class="name">RMT Wizard</span></a></span></dt><dt><span class="figure"><a href="#idm140661820682480"><span class="number">1.3 </span><span class="name">Missing Server Certificate</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.credentials"><span class="number">2.1 </span><span class="name">Setting the Update Server Credentials with YaST</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.credtest"><span class="number">2.2 </span><span class="name">Successful Test of the Update Server Credentials</span></a></span></dt><dt><span class="figure"><a href="#idm140661825396640"><span class="number">4.1 </span><span class="name">List of Repositories</span></a></span></dt><dt><span class="figure"><a href="#idm140661824268560"><span class="number">4.2 </span><span class="name">Repository Filter</span></a></span></dt><dt><span class="figure"><a href="#idm140661796554544"><span class="number">4.3 </span><span class="name">Status of Mirroring Process</span></a></span></dt><dt><span class="figure"><a href="#fig.yast.ca_cert"><span class="number">7.1 </span><span class="name">Certificates of a CA</span></a></span></dt><dt><span class="figure"><a href="#idm140661816302000"><span class="number">8.1 </span><span class="name">RMT Disconnected Setup</span></a></span></dt></dl></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><dl><dt><span class="example"><a href="#ex.smt.mirroring.repos.o"><span class="number">3.1 </span><span class="name">Listing All Enabled Repositories</span></a></span></dt><dt><span class="example"><a href="#smt.mirroring.smtconf.ex"><span class="number">7.1 </span><span class="name">rmt.conf</span></a></span></dt></dl></div><div><div class="legalnotice" id="idm140661818189472"><p>
  Copyright © 2006–
2018

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document under
  the terms of the GNU Free Documentation License, Version 1.2 or (at your
  option) version 1.3; with the Invariant Section being this copyright notice
  and license. A copy of the license version 1.2 is included in the section
  entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="http://www.suse.com/company/legal/" target="_blank">http://www.suse.com/company/legal/</a>. All other
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention to
  detail. However, this does not guarantee complete accuracy. Neither SUSE LLC,
  its affiliates, the authors nor the translators shall be held liable for
  possible errors or the consequences thereof.
 </p></div></div><div class="preface " id="pre_smt"><div class="titlepage"><div><div><h1 class="title"><span class="number"> </span><span class="name">About This Guide</span> <a title="Permalink" class="permalink" href="#pre_smt">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_overview.xml</li><li><span class="ds-label">ID: </span>pre_smt</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#idm140661817308640"><span class="name">Overview</span></a></span></dt><dt><span class="sect1"><a href="#idm140661815625200"><span class="name">Additional Documentation and Resources</span></a></span></dt><dt><span class="sect1"><a href="#idm140661826551328"><span class="name">Feedback</span></a></span></dt><dt><span class="sect1"><a href="#idm140661824319984"><span class="name">Documentation Conventions</span></a></span></dt></dl></div></div><p>
  Repository Management Tool (RMT) for SUSE Linux Enterprise <span class="productnumber"><span class="phrase">15</span></span> allows enterprise customers to
  optimize the management of SUSE Linux Enterprise software updates and subscription
  entitlements. It establishes a proxy system for SUSE® Customer Center with repository
  (formerly known as catalog) and registration targets. This helps you
  centrally manage software updates within the firewall on a per-system basis,
  while maintaining your corporate security policies and regulatory compliance.
 </p><p>
  RMT allows you to provision updates for all of your devices running a
  product based on SUSE Linux Enterprise. By downloading these updates once and
  distributing them throughout the enterprise, you can set more restrictive
  firewall policies. This also reduces bandwidth usage, as there is no need to
  download the same updates for each device. RMT is fully supported and available as a download for customers with an active
  SUSE Linux Enterprise product subscription.
 </p><p>
  Repository Management Tool provides functionality that can be useful in many situations,
  including the following:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    You want to update both SUSE Linux Enterprise and Red Hat Enterprise Linux servers.
   </p></li><li class="listitem "><p>
    You want to get a detailed overview of your company's license compliance.
   </p></li><li class="listitem "><p>
    Not all machines in your environment can be connected to SUSE Customer Center to register and retrieve
    updates for bandwidth or security reasons.
   </p></li><li class="listitem "><p>
    There are SUSE Linux Enterprise hosts that are restricted and difficult to update without
    putting in place a custom update management solution.
   </p></li><li class="listitem "><p>
    You need to integrate additional software update external
    or internal repositories into your update solution.
   </p></li><li class="listitem "><p>
    You are looking for a turnkey box staging solution for testing updates
    before releasing them to the clients.
   </p></li><li class="listitem "><p>
    You want to have a quick overview of the patch status of your SUSE Linux Enterprise servers and
    desktops.
   </p></li></ul></div><div class="figure" id="idm140661817529120"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_schema.png"><img src="images/smt_schema.png" width="" alt="RMT" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1: </span><span class="name">RMT </span><a title="Permalink" class="permalink" href="#idm140661817529120">#</a></h6></div></div><div class="sect1 " id="idm140661817308640"><div class="titlepage"><div><div><h2 class="title" id="idm140661817308640"><span class="number">1 </span><span class="name">Overview</span> <a title="Permalink" class="permalink" href="#idm140661817308640">#</a></h2></div></div></div><p>
   The <em class="citetitle ">Subscription Management Tool Guide</em> is divided into the following chapters:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661826531200"><span class="term "><a class="xref" href="#smt.installation" title="Chapter 1. RMT Installation"><em>RMT Installation</em></a>
    </span></dt><dd><p>
      Introduction to the RMT installation process and the SMT Configuration
      Wizard. You will learn how to install the RMT add-on on your base
      system during the installation process or on an already installed base
      system.
     </p></dd><dt id="idm140661817506288"><span class="term "><a class="xref" href="#smt.server" title="Chapter 2. RMT Server Configuration"><em>RMT Server Configuration</em></a>
    </span></dt><dd><p>
      Description of the YaST configuration module RMT Server. This chapter
      explains how to set and configure organization credentials and RMT
      database passwords. It also explains how to activate or deactivate the
      RMT service.
     </p></dd><dt id="idm140661815715488"><span class="term "><a class="xref" href="#smt.mirroring" title="Chapter 3. Mirroring Repositories on the RMT Server"><em>Mirroring Repositories on the RMT Server</em></a>
    </span></dt><dd><p>
      Explanation of how to mirror repositories with the RMT command line
      tools.
     </p></dd><dt id="idm140661826236688"><span class="term ">
     <a class="xref" href="#smt.management" title="Chapter 4. Managing Repositories with YaST RMT Server Management"><em>Managing Repositories with YaST RMT Server Management</em></a>
    </span></dt><dd><p>
      Explanation of how to manage repositories with YaST.
     </p></dd><dt id="idm140661826238352"><span class="term "><a class="xref" href="#smt.registration" title="Chapter 5. Managing Client Machines with RMT"><em>Managing Client Machines with RMT</em></a>
    </span></dt><dd><p>
      Description of how to register client machines on SUSE Customer Center.
     </p></dd><dt id="idm140661820692000"><span class="term "><a class="xref" href="#smt.client" title="Chapter 6. Configuring Clients to Use RMT"><em>Configuring Clients to Use RMT</em></a>
    </span></dt><dd><p>
      Introduction to configuring any client machine to
      register against RMT and download software updates from there instead
      of communicating directly with the SUSE Customer Center.
     </p></dd><dt id="idm140661825206016"><span class="term "><a class="xref" href="#smt.tools" title="Chapter 7. RMT Tools and Configuration Files"><em>RMT Tools and Configuration Files</em></a>
    </span></dt><dd><p>
      Description of the most important scripts, configuration files
      and certificates supplied with RMT.
     </p></dd></dl></div></div><div class="sect1 " id="idm140661815625200"><div class="titlepage"><div><div><h2 class="title" id="idm140661815625200"><span class="number">2 </span><span class="name">Additional Documentation and Resources</span> <a title="Permalink" class="permalink" href="#idm140661815625200">#</a></h2></div></div></div><p>
   Chapters in this manual contain links to additional documentation resources
   that are available either on the system or on the Internet.
  </p><p>
   For an overview of the documentation available for your product and the
   latest documentation updates, refer to
   <a class="link" href="http://www.suse.com/documentation" target="_blank">http://www.suse.com/documentation</a>.
  </p></div><div class="sect1 " id="idm140661826551328"><div class="titlepage"><div><div><h2 class="title" id="idm140661826551328"><span class="number">3 </span><span class="name">Feedback</span> <a title="Permalink" class="permalink" href="#idm140661826551328">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_feedback_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  Several feedback channels are available:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661824275360"><span class="term ">Bugs and Enhancement Requests</span></dt><dd><p>
     For services and support options available for your product, refer to
     <a class="link" href="http://www.suse.com/support/" target="_blank">http://www.suse.com/support/</a>.
    </p><p>
     Help for openSUSE is provided by the community. Refer to <a class="link" href="https://en.opensuse.org/Portal:Support" target="_blank">https://en.opensuse.org/Portal:Support</a> for more information.
    </p><p>

     To report bugs for a product component, go to
     <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log in, and
     click <span class="guimenu">Create New</span>.
    </p></dd><dt id="idm140661817332576"><span class="term ">User Comments</span></dt><dd><p>
     We want to hear your comments about and suggestions for this manual and
     the other documentation included with this product. Use the User Comments
     feature at the bottom of each page in the online documentation or go to
     <a class="link" href="http://www.suse.com/documentation/feedback.html" target="_blank">http://www.suse.com/documentation/feedback.html</a> and
     enter your comments there.
    </p></dd><dt id="idm140661796692576"><span class="term ">Mail</span></dt><dd><p>
     For feedback on the documentation of this product, you can also send a
     mail to <code class="literal">doc-team@suse.com</code>. Make sure to include the
     document title, the product version and the publication date of the
     documentation. To report errors or suggest enhancements, provide a concise
     description of the problem and refer to the respective section number and
     page (or URL).
    </p></dd></dl></div></div><div class="sect1 " id="idm140661824319984"><div class="titlepage"><div><div><h2 class="title" id="idm140661824319984"><span class="number">4 </span><span class="name">Documentation Conventions</span> <a title="Permalink" class="permalink" href="#idm140661824319984">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_typografie_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  The following notices and typographical conventions are used in this
  documentation:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    <code class="filename">/etc/passwd</code>: directory names and file names
   </p></li><li class="listitem "><p>
    <em class="replaceable ">PLACEHOLDER</em>: replace
    <em class="replaceable ">PLACEHOLDER</em> with the actual value
   </p></li><li class="listitem "><p>
    <code class="envar">PATH</code>: the environment variable PATH
   </p></li><li class="listitem "><p>
    <code class="command">ls</code>, <code class="option">--help</code>: commands, options, and
    parameters
   </p></li><li class="listitem "><p>
    <code class="systemitem">user</code>: users or groups
   </p></li><li class="listitem "><p>
    <span class="package">package name</span>
    : name of a package
   </p></li><li class="listitem "><p>
    <span class="keycap">Alt</span>, <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>: a key to press or a key combination; keys
    are shown in uppercase as on a keyboard
   </p></li><li class="listitem "><p>
    <span class="guimenu">File</span>, <span class="guimenu">File</span> › <span class="guimenu">Save
    As</span>: menu items, buttons
   </p></li><li class="listitem "><p><strong class="arch-arrow-start">x86_64</strong>
    This paragraph is only relevant for the AMD64/Intel 64 architecture. The
    arrows mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"></strong></p><p><strong class="arch-arrow-start">System z, POWER</strong>
    This paragraph is only relevant for the architectures
    <code class="literal">IBM Z</code> and <code class="literal">POWER</code>. The arrows
    mark the beginning and the end of the text block.
   <strong class="arch-arrow-end"></strong></p></li><li class="listitem "><p>
    <span class="emphasis"><em>Dancing Penguins</em></span> (Chapter
    <span class="emphasis"><em>Penguins</em></span>, ↑Another Manual): This is a reference
    to a chapter in another manual.
   </p></li><li class="listitem "><p>
    Commands that must be run with <code class="systemitem">root</code> privileges. Often you can also
    prefix these commands with the <code class="command">sudo</code> command to run them
    as non-privileged user.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">command</code>
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">command</code></pre></div></li><li class="listitem "><p>
    Commands that can be run by non-privileged users.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">command</code></pre></div></li><li class="listitem "><p>
    Notices
   </p><div id="idm140661816522048" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Warning Notice</h6><p>
     Vital information you must be aware of before proceeding. Warns you about
     security issues, potential loss of data, damage to hardware, or physical
     hazards.
    </p></div><div id="idm140661816520544" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Important Notice</h6><p>
     Important information you should be aware of before proceeding.
    </p></div><div id="idm140661816519232" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Note Notice</h6><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="idm140661822627904" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Tip Notice</h6><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li></ul></div></div></div><div class="chapter " id="smt.installation"><div class="titlepage"><div><div><h1 class="title"><span class="number">1 </span><span class="name">RMT Installation</span> <a title="Permalink" class="permalink" href="#smt.installation">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_install.xml</li><li><span class="ds-label">ID: </span>smt.installation</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.installation.wizard"><span class="number">1.1 </span><span class="name">RMT Configuration Wizard</span></a></span></dt><dt><span class="sect1"><a href="#smt.installation.upgrade"><span class="number">1.2 </span><span class="name">Upgrading from Previous Versions of RMT</span></a></span></dt><dt><span class="sect1"><a href="#idm140661816643808"><span class="number">1.3 </span><span class="name">Enabling SLP Announcements</span></a></span></dt></dl></div></div><p>
     RMT is included in SUSE Linux Enterprise Server starting with version 12 SP1. To install
    it, start SUSE Linux Enterprise Server installation, and click
      <span class="guimenu">Software</span> on the <span class="guimenu">Installation
      Settings</span> screen. Select the <span class="guimenu">Subscription
      Management Tool</span> pattern on the <span class="guimenu">Software
      Selection and System Tasks</span> screen, then click
      <span class="guimenu">OK</span>. </p><div class="figure" id="idm140661822569136"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_install_pattern.png"><img src="images/smt_install_pattern.png" width="" alt="RMT Pattern" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.1: </span><span class="name">RMT Pattern </span><a title="Permalink" class="permalink" href="#idm140661822569136">#</a></h6></div></div><div id="idm140661821361136" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Installing RMT on an Existing System</h6><p>
   To install RMT on the existing SUSE Linux Enterprise Server system, run
   <span class="guimenu">YaST</span> › <span class="guimenu">Software</span> › <span class="guimenu">Software
   Management</span>, select
   <span class="guimenu">View</span> › <span class="guimenu">Patterns</span>
   and select the <span class="guimenu">RMT</span> pattern there.
  </p></div><p>
  It is recommended to check for available RMT updates immediately after
  installing SUSE Linux Enterprise Server using the <code class="command">zypper patch</code> command. SUSE
  continuously releases maintenance updates for RMT, and newer packages are
  likely to be available.
 </p><p>
  After the system is installed and updated, perform an initial RMT
  configuration using <span class="guimenu">YaST</span> › <span class="guimenu">Network
  Services</span> › <span class="guimenu">RMT Configuration
  Wizard</span>.
 </p><div id="idm140661796518080" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Install smt-client</h6><p>
     The <code class="literal">smt-client</code> package needs to be installed on clients
     connected to the RMT server. The package requires no configuration, and
     it can be installed using the <code class="command">sudo zypper in smt-client</code>
     command.
    </p></div><div class="sect1 " id="smt.installation.wizard"><div class="titlepage"><div><div><h2 class="title" id="smt.installation.wizard"><span class="number">1.1 </span><span class="name">RMT Configuration Wizard</span> <a title="Permalink" class="permalink" href="#smt.installation.wizard">#</a></h2></div></div></div><p>
   The two-step <span class="guimenu">RMT Configuration Wizard</span> helps you
   configure RMT after SUSE Linux Enterprise Server installation is finished. You can change
   the configuration later using the YaST RMT Server Configuration
   module—see <a class="xref" href="#smt.server" title="Chapter 2. RMT Server Configuration">Chapter 2, <em>RMT Server Configuration</em></a>.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     The <span class="guimenu">Enable Subscription Management Tool service
     (RMT)</span> option is enabled by default. Toggle it only if you
     want to disable the RMT product.
    </p><p>
     If the firewall is enabled, enable <span class="guimenu">Open Port in
     Firewall</span> to allow access to the RMT service from remote
     computers.
    </p><p>
     Enter your SUSE Customer Center organization credentials in <span class="guimenu">User</span>
     and <span class="guimenu">Password</span>. If you do not know your SUSE Customer Center
     credentials, refer to <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>.
     Test the entered credentials using the <span class="guimenu">Test</span>
     button. RMT will connect to the Customer Center server using the
     provided credentials and download testing data.
    </p><p> Enter the e-mail address you used for the SUSE Customer Center registration
          into <span class="guimenu">SCC E-mail Used for Registration</span>. </p><p>
     <span class="guimenu">Your RMT Server URL</span> should contain the URL of the
     RMT server being configured. It is populated automatically.
    </p><p>
     Click <span class="guimenu">Next</span> to continue to the second configuration
     step.
    </p><div class="figure" id="idm140661820957088"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_wizard1.png"><img src="images/smt_wizard1.png" width="" alt="RMT Wizard" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.2: </span><span class="name">RMT Wizard </span><a title="Permalink" class="permalink" href="#idm140661820957088">#</a></h6></div></div></li><li class="step "><p>
     For security reasons, RMT requires a separate user to connect to the
     database. In the <span class="guimenu">Database Password for smt User</span>
     screen, set the database password for this user.
    </p><p>
     Enter all e-mail addresses for receiving RMT reports using the
     <span class="guimenu">Add</span> button. Use the
     <span class="guimenu">Edit</span> and <span class="guimenu">Delete</span> buttons to modify
     and delete the existing addresses. When you have done that, click <span class="guimenu">Next</span>.
    </p></li><li class="step "><p>
     If the current database root password is empty, you will be prompted to specify it.
    </p></li><li class="step "><p>
     By default, RMT is set to communicate with the client hosts via a secure
     protocol. For this, the server needs to have a server SSL certificate. The
     wizard displays a warning if the certificate does not exist. You can create
     a certificate using the
     <span class="guimenu">Run CA Management</span> button. Refer to
     <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 17 “Managing X.509 Certification”, Section 17.2 “YaST Modules for CA Management”</span> for detailed information
     on managing certificates with YaST.
    </p><div class="figure" id="idm140661820682480"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_missing_cert.png"><img src="images/smt_missing_cert.png" width="" alt="Missing Server Certificate" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.3: </span><span class="name">Missing Server Certificate </span><a title="Permalink" class="permalink" href="#idm140661820682480">#</a></h6></div></div></li></ol></div></div></div><div class="sect1 " id="smt.installation.upgrade"><div class="titlepage"><div><div><h2 class="title" id="smt.installation.upgrade"><span class="number">1.2 </span><span class="name">Upgrading from Previous Versions of RMT</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade">#</a></h2></div></div></div><p> This section provides information on upgrading RMT from the
      previous versions. </p><div id="idm140661794985808" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Upgrade from Versions Prior to 11 SP3</h6><p>
    
    A direct upgrade path from SMT to RMT prior to version 11 SP4 is not
   supported. You need to do the following:</p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>Upgrade the operating system to SUSE Linux Enterprise Server 11
      SP4 as described in <a class="link" href="https://www.suse.com/documentation/sles11/book_sle_deployment/data/cha.upgrade-paths.html" target="_blank">https://www.suse.com/documentation/sles11/book_sle_deployment/data/cha.upgrade-paths.html</a></p></li><li class="listitem "><p>At the same time upgrade SMT to version 11 SP4 as
      described in <a class="link" href="https://www.suse.com/documentation/smt11/book_yep/data/smt_installation_upgrade.html" target="_blank">https://www.suse.com/documentation/smt11/book_yep/data/smt_installation_upgrade.html</a>.</p></li><li class="listitem "><p>Follow the steps described in <a class="xref" href="#smt.installation.upgrade.latest" title="1.2.2. Upgrade from RMT 11 SP4">Section 1.2.2, “Upgrade from RMT 11 SP4”</a>.</p></li></ol></div></div><div class="sect2 " id="smt.installation.upgrade.from12sp1"><div class="titlepage"><div><div><h3 class="title" id="smt.installation.upgrade.from12sp1"><span class="number">1.2.1 </span><span class="name">Upgrade from RMT 12 SP3</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade.from12sp1">#</a></h3></div></div></div><p>
    Upgrade from RMT 12 SP3 is performed automatically during the SUSE Linux Enterprise Server
    upgrade and requires no additional manual steps. For more information on SUSE Linux Enterprise Server upgrade, see <span class="intraxref">Book “Upgrade Guide”, Chapter 1 “Upgrade Paths and Methods”</span>.
   </p></div><div class="sect2 " id="smt.installation.upgrade.latest"><div class="titlepage"><div><div><h3 class="title" id="smt.installation.upgrade.latest"><span class="number">1.2.2 </span><span class="name">Upgrade from RMT 11 SP4</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade.latest">#</a></h3></div></div></div><p>
    To upgrade RMT from version 11 SP4 to 12 SP3, follow the steps below.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      If you have not already done so, migrate from Novell Customer Center
      to SUSE Customer Center as described in
      <a class="xref" href="#smt.installation.upgrade.scc" title="1.2.2.1. Migration to SUSE Customer Center on SMT 11 SP4">Section 1.2.2.1, “Migration to SUSE Customer Center on  SMT 11 SP4”</a>.
     </p></li><li class="step "><p> Back up and migrate the database. See the general procedure
            in <span class="intraxref">Book “Upgrade Guide”, Chapter 3 “Preparing the Upgrade”, Section 3.5.1 “Migrate your MySQL Database”</span>. </p></li><li class="step "><p>
      Upgrade to SUSE Linux Enterprise Server 12 SP3 as described in
      <span class="intraxref">Book “Upgrade Guide”, Chapter 1 “Upgrade Paths and Methods”</span>.
     </p></li><li class="step "><p> Look if the new <code class="filename">/etc/my.cnf.rpmnew</code>
            exists and update it with any custom changes you need. Then
            copy it over the existing <code class="filename">/etc/my.cnf</code>: </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cp /etc/my.cnf.rpmnew /etc/my.cnf</pre></div></li><li class="step "><p> Enable the <code class="systemitem">smt</code> target to start at
            the system boot:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl enable smt.target</pre></div><p>
      Start it immediately, if necessary:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl start smt.target</pre></div></li></ol></div></div><div class="sect3 " id="smt.installation.upgrade.scc"><div class="titlepage"><div><div><h4 class="title" id="smt.installation.upgrade.scc"><span class="number">1.2.2.1 </span><span class="name">Migration to SUSE Customer Center on  SMT 11 SP4</span> <a title="Permalink" class="permalink" href="#smt.installation.upgrade.scc">#</a></h4></div></div></div><p>
     Before upgrading to SUSE Linux Enterprise Server 12, you need to switch the registration center
     on SUSE Linux Enterprise Server 11. SMT now registers with SUSE Customer Center instead of Novell Customer
     Center. You can do this either via a YaST
     module or command line tools.
    </p><p>
     Before performing the switch between customer centers, make sure that
     the target customer center serves all products that are registered
     with RMT. Both YaST and the command line tools perform a check
     to find out whether all products can be served with the new
     registration server.
    </p><p>
     To perform the migration to SUSE Customer Center via command line, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt ncc-scc-migration</pre></div><p>
     The migration itself takes time, and during the migration process
     the RMT server may not be able to serve clients that are already
     registered.
    </p><p>
     The migration process itself changes the registration server and the
     proper type of API in the configuration files. No further
     (configuration) changes are needed on the RMT.
    </p><p>
     To migrate from Novell Customer Center to SUSE Customer Center via YaST, use the YaST smt-server
     module.
    </p><p> When migration has been completed, it is necessary to synchronize
          RMT with the customer center. It is recommended to ensure
          that the repositories are up to date. This can be done using
          the following commands: </p><div class="verbatim-wrap"><pre class="screen">   smt sync
   smt mirror</pre></div></div></div></div><div class="sect1 " id="idm140661816643808"><div class="titlepage"><div><div><h2 class="title" id="idm140661816643808"><span class="number">1.3 </span><span class="name">Enabling SLP Announcements</span> <a title="Permalink" class="permalink" href="#idm140661816643808">#</a></h2></div></div></div><p>
   RMT includes the SLP service description file
   (<code class="filename">/etc/slp.reg.d/smt.reg</code>). To enable SLP
   announcements of the RMT service, open respective ports in your
   firewall and enable the SLP service:
  </p><div class="verbatim-wrap"><pre class="screen">sysconf_addword /etc/sysconfig/SuSEfirewall2 FW_SERVICES_EXT_TCP "427"
sysconf_addword /etc/sysconfig/SuSEfirewall2 FW_SERVICES_EXT_UDP "427"
insserv slpd
rcslpd start</pre></div></div></div><div class="chapter " id="smt.server"><div class="titlepage"><div><div><h1 class="title"><span class="number">2 </span><span class="name">RMT Server Configuration</span> <a title="Permalink" class="permalink" href="#smt.server">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_server.xml</li><li><span class="ds-label">ID: </span>smt.server</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.yast.activation"><span class="number">2.1 </span><span class="name">Activating and Deactivating RMT with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.credentials"><span class="number">2.2 </span><span class="name">Setting the Update Server Credentials with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.database"><span class="number">2.3 </span><span class="name">Setting RMT Database Password with YaST</span></a></span></dt></dl></div></div><p>
  This chapter introduces the YaST configuration module for the RMT
  server. This module can be used to set and configure mirroring credentials,
  RMT database passwords, and e-mail addresses for receiving SMT reports. The
  module also lets you set the RMT job schedule, and activate or deactivate
  the RMT service.
 </p><p>
  To configure RMT with RMT Server Configuration, follow the steps below.
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Start the YaST module <span class="guimenu">SMT Server Configuration</span> from
    the YaST control center or by running <code class="command">yast
    smt-server</code> from the command line.
   </p></li><li class="step "><p>
    To activate RMT, toggle the <span class="guimenu">Enable Subscription Management
    Tool Service (SMT)</span> option in the <span class="guimenu">Customer Center
    Access</span> section. For more information about activating RMT with YaST, see
    <a class="xref" href="#smt.yast.activation" title="2.1. Activating and Deactivating RMT with YaST">Section 2.1, “Activating and Deactivating RMT with YaST”</a>.
   </p></li><li class="step "><p>
    If the firewall is enabled, activate <span class="guimenu">Open Port in
    Firewall</span>.
   </p></li><li class="step "><p> In the <span class="guimenu">Customer Center Configuration</span>
        section of <span class="guimenu">Customer Center Access</span>,
        you can set the custom server URLs. Set and test credentials for
        the SUSE Update service. Correct credentials are necessary to
        enable mirroring from the download server and determine the
        products that should be mirrored. Also set the e-mail address
        used for the registration and the URL of your RMT server. For
        more information, see <a class="xref" href="#smt.yast.credentials" title="2.2. Setting the Update Server Credentials with YaST">Section 2.2, “Setting the Update Server Credentials with YaST”</a>. </p></li><li class="step "><p>
    When you are satisfied with the configuration, click <span class="guimenu">OK</span>. YaST
    updates the RMT configuration and starts or restarts necessary
    services.
   </p><p>
    If you want to abort the configuration and cancel any changes, click
    <span class="guimenu">Cancel</span>.
   </p><div id="idm140661825760560" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Check for Certificate</h6><p>
     When the RMT Configuration applies changes, it checks whether the common
     server certificate exists. If the certificate
     does not exist, you will be asked whether the certificate should be created.
    </p></div></li></ol></div></div><div class="sect1 " id="smt.yast.activation"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.activation"><span class="number">2.1 </span><span class="name">Activating and Deactivating RMT with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.activation">#</a></h2></div></div></div><p>
   YaST provides an easy way to activate or deactivate the RMT service.
   To activate RMT using YaST, follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p> Switch to the <span class="guimenu">Customer Center Access</span> section in the
          RMT Configuration. </p></li><li class="step "><p>
     Activate the <span class="guimenu">Enable Subscription Management Tool service
     (SMT)</span> option.
    </p><div id="idm140661826436224" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Organization Credentials</h6><p>
      Specify organization credentials before activating RMT. For more
      information on how to
      set organization credentials with YaST, see
      <a class="xref" href="#smt.yast.credentials" title="2.2. Setting the Update Server Credentials with YaST">Section 2.2, “Setting the Update Server Credentials with YaST”</a>.
     </p></div></li><li class="step "><p>
     Click <span class="guimenu">Finish</span> to apply the changes and leave the
     RMT Configuration.
    </p></li></ol></div></div><p>
   To deactivate RMT with YaST, proceed as follows.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Customer Center Access</span> section in the RMT
     Configuration.
    </p></li><li class="step "><p>
     Disable the <span class="guimenu">Enable Subscription Management Tool service
     (SMT)</span> option.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Finish</span> to apply the changes and leave the
     RMT Configuration.
    </p></li></ol></div></div><p>
   When activating RMT, YaST performs the following actions.
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     The Apache configuration is changed by creating symbolic links in the
     <code class="filename">/etc/apache2/conf.d/</code> directory. Links to the
     <code class="filename">/etc/smt.d/nu_server.conf</code> and
     <code class="filename">/etc/smt.d/smt_mod_perl.conf</code> files are created
     there.
    </p></li><li class="listitem "><p>
     The Apache Web server is started (or reloaded if already running).
    </p></li><li class="listitem "><p>
     The MariaDB server is started or restarted. The smt
     user and all necessary tables in the database are created, if needed.
    </p></li><li class="listitem "><p>
     The schema of the RMT database is checked. If the database schema is
     outdated, the RMT database is upgraded to the current
     schema.
    </p></li><li class="listitem "><p>
     Cron is updated by creating a symbolic link in the
     <code class="filename">/etc/cron.d/</code> directory. A link to the
     <code class="filename">/etc/smt.d/novell.com-smt</code> file is created there.
    </p></li></ul></div><p>
   When deactivating RMT, YaST performs the following actions.
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Symbolic links that were created upon SMT activation in the
     /etc/apache2/conf.d/ and /etc/cron.d/ directories are deleted.
    </p></li><li class="listitem "><p>
     The Cron daemon, the Apache server, and the MariaDB database daemon are
     restarted. Neither Apache nor MariaDB are stopped, as they may be
     used for other purposes than the RMT service.
    </p></li></ul></div></div><div class="sect1 " id="smt.yast.credentials"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.credentials"><span class="number">2.2 </span><span class="name">Setting the Update Server Credentials with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.credentials">#</a></h2></div></div></div><p>
   The following procedure describes how to set and test the download server
   credentials and the URL of the download server service using YaST.
  </p><div class="figure" id="fig.yast.credentials"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt-yast-credentials.png"><img src="images/smt-yast-credentials.png" width="" alt="Setting the Update Server Credentials with YaST" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 2.1: </span><span class="name">Setting the Update Server Credentials with YaST </span><a title="Permalink" class="permalink" href="#fig.yast.credentials">#</a></h6></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Customer Center Access</span> section in the RMT
     Configuration. If the credentials have been already set with YaST or
     via the <code class="filename">/etc/smt.conf</code> configuration file, they will
     be displayed in the <span class="guimenu">User</span> and
     <span class="guimenu">Password</span> fields.
    </p></li><li class="step "><p>
     If you do not have credentials, visit SUSE Customer Center to obtain them. For
     more details, see <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>.
    </p></li><li class="step "><p>
     Enter your user name and password in the appropriate fields.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Test</span> to check the credentials. YaST will try
     to download a list of available repositories with the provided

     credentials. If the test succeeds, the last line of the test results
     will read <code class="literal">Test result: success</code>. If the test fails,
     check the provided

     credentials and try again.
    </p><div class="figure" id="fig.yast.credtest"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt-yast-credtest.png"><img src="images/smt-yast-credtest.png" width="" alt="Successful Test of the Update Server Credentials" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 2.2: </span><span class="name">Successful Test of the Update Server Credentials </span><a title="Permalink" class="permalink" href="#fig.yast.credtest">#</a></h6></div></div></li><li class="step "><p>
     Enter the <span class="guimenu">SCC E-mail Used for Registration</span>. This
     should be the address you used to register to SUSE Customer Center.
    </p><p>
     Enter <span class="guimenu">Your SMT Server URL</span> if it has not been
     detected automatically.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span>.
    </p></li></ol></div></div></div><div class="sect1 " id="smt.yast.database"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.database"><span class="number">2.3 </span><span class="name">Setting RMT Database Password with YaST</span> <a title="Permalink" class="permalink" href="#smt.yast.database">#</a></h2></div></div></div><p>
   For security reasons, RMT uses its own user in the database. YaST
   provides an interface for setting up or changing the RMT database
   password. To set or change the RMT database password with YaST,
   follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Switch to the <span class="guimenu">Database and Reporting</span> section in the RMT
     Configuration module.
    </p></li><li class="step "><p> Enter the <span class="guimenu">Database Password for RMT
          User</span>. Confirm the password by re-entering it, then
          click <span class="guimenu">OK</span>. </p></li></ol></div></div></div></div><div class="chapter " id="smt.mirroring"><div class="titlepage"><div><div><h1 class="title"><span class="number">3 </span><span class="name">Mirroring Repositories on the RMT Server</span> <a title="Permalink" class="permalink" href="#smt.mirroring">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_mirroring.xml</li><li><span class="ds-label">ID: </span>smt.mirroring</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.mirroring.getcredentials"><span class="number">3.1 </span><span class="name">Mirroring Credentials</span></a></span></dt><dt><span class="sect1"><a href="#smt.mirroring.manage"><span class="number">3.2 </span><span class="name">Managing Software Repositories with RMT Command Line Tools</span></a></span></dt><dt><span class="sect1"><a href="#smt.repo.preload"><span class="number">3.3 </span><span class="name">Repository Preloading</span></a></span></dt></dl></div></div><p>
  You can mirror the installation and update repositories on the RMT
  server. This way, you do not need to download updates on each machine, which saves time and bandwidth.
 </p><div id="idm140661815647120" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: SUSE Linux Enterprise Server 9 Repositories</h6><p>
   As SUSE Linux Enterprise Server 9 is no longer supported, RMT does not mirror SUSE Linux Enterprise Server 9
   repositories.
  </p></div><div class="sect1 " id="smt.mirroring.getcredentials"><div class="titlepage"><div><div><h2 class="title" id="smt.mirroring.getcredentials"><span class="number">3.1 </span><span class="name">Mirroring Credentials</span> <a title="Permalink" class="permalink" href="#smt.mirroring.getcredentials">#</a></h2></div></div></div><p>
   Before you create a local mirror of the repositories, you need appropriate
   organization credentials. You can obtain the credentials from SUSE Customer Center.
  </p><p>
   To get the credentials from SUSE Customer Center, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Visit SUSE Customer Center at <a class="link" href="http://scc.suse.com" target="_blank">http://scc.suse.com</a> and log in.
    </p></li><li class="step "><p>
     If you are member of multiple organizations, chose the organization you
     want to work with from the sidebar on the left.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Organization</span> in the top menu.
    </p></li><li class="step "><p>
     Switch to the <span class="guimenu">Organizational credentials</span> section.
    </p></li><li class="step "><p>
     To see the password, click <span class="guimenu">Show password</span>.
    </p></li></ol></div></div><p>
   The obtained credentials should be set with the YaST RMT Server
   Configuration module or added directly to the
   <code class="filename">/etc/smt.conf</code> file. For more information about the
   <code class="filename">/etc/smt.conf</code> file, see
   <a class="xref" href="#smt.config.smtconf" title="7.2.1. /etc/rmt.conf">Section 7.2.1, “/etc/rmt.conf”</a>.
  </p><div id="smt.mirror.credential.merge" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Merging Multiple Organization Site Credentials</h6><p>
    RMT can only work with one mirror credential at a time. Multiple
    credentials are not supported. When a customer creates a new company, this
    generates a new mirror credential. This is not always convenient, as some products
    are available via the first set and other products via the second set. To
    request a merge of credentials, the EMEA-based customers (Europe, the Middle
    East and Africa) are advised to send an e-mail to
    &lt;<a class="email" href="mailto:Customer_CenterEMEA@novell.com">Customer_CenterEMEA@novell.com</a>&gt; with the applicable customer
    and site IDs. The EMEA PIC team will verify the records. The contact for
    NALAAP (North America, Latin America, and Asia Pacific) is &lt;<a class="email" href="mailto:CustomerResolution@novell.com">CustomerResolution@novell.com</a>&gt;.
   </p></div></div><div class="sect1 " id="smt.mirroring.manage"><div class="titlepage"><div><div><h2 class="title" id="smt.mirroring.manage"><span class="number">3.2 </span><span class="name">Managing Software Repositories with RMT Command Line Tools</span> <a title="Permalink" class="permalink" href="#smt.mirroring.manage">#</a></h2></div></div></div><p>
   This section describes tools and procedures for viewing information about
   software repositories available through RMT, configuring these
   repositories, and setting up custom repositories on the command line. For
   details on the YaST RMT Server Management module, see
   <a class="xref" href="#smt.management" title="Chapter 4. Managing Repositories with YaST RMT Server Management">Chapter 4, <em>Managing Repositories with YaST RMT Server Management</em></a>.
  </p><div class="sect2 " id="idm140661813921792"><div class="titlepage"><div><div><h3 class="title" id="idm140661813921792"><span class="number">3.2.1 </span><span class="name">Updating the Local RMT Database</span> <a title="Permalink" class="permalink" href="#idm140661813921792">#</a></h3></div></div></div><p>

    
    The local RMT database needs to be updated periodically with the
    information downloaded from SUSE Customer Center. These periodic updates can be configured
    with the RMT Management module, as described in FIXME.
   </p><p>
    To update the RMT database manually, use the <code class="command">smt-sync</code>
    command. For more information about the <code class="command">smt-sync</code>
    command, see <a class="xref" href="#smt.scripts.smtsync" title="7.1.1.7. smt-ssc-sync">Section 7.1.1.7, “smt-ssc-sync”</a>.
   </p></div><div class="sect2 " id="idm140661820597200"><div class="titlepage"><div><div><h3 class="title" id="idm140661820597200"><span class="number">3.2.2 </span><span class="name">Enabled Repositories and Repositories That Can Be Mirrored</span> <a title="Permalink" class="permalink" href="#idm140661820597200">#</a></h3></div></div></div><p>
    The database installed with RMT contains information about all software
    repositories available on SUSE Customer Center. However, the used mirror credentials
    determine which repositories can really be mirrored. For more information
    about getting and setting organization credentials, see
    <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>.
   </p><p>
    Repositories that can be mirrored have the <code class="literal">MIRRORABLE</code>
    flag set in the repositories table in the RMT database. That a
    repository can be mirrored does not mean that it needs to be mirrored. Only
    repositories with the <code class="literal">DOMIRROR</code> flag set in the RMT
    database will be mirrored. For more information about configuring which
    repositories should be mirrored,
    see <a class="xref" href="#smt.mirroring.manage.domirror" title="3.2.4. Selecting Repositories to Be Mirrored">Section 3.2.4, “Selecting Repositories to Be Mirrored”</a>.
   </p></div><div class="sect2 " id="idm140661796710832"><div class="titlepage"><div><div><h3 class="title" id="idm140661796710832"><span class="number">3.2.3 </span><span class="name">Getting Information about Repositories</span> <a title="Permalink" class="permalink" href="#idm140661796710832">#</a></h3></div></div></div><p>
    Use the <code class="command">smt-repos</code> command to list available software
    repositories and additional information. Using this command without any
    options lists all available repositories, including repositories that
    cannot be mirrored. In the first column, the enabled repositories
    (repositories set to be mirrored) are marked with <code class="literal">Yes</code>.
    Disabled repositories are marked with <code class="literal">No</code>. The other
    columns show ID, type, name, target, and description of the listed
    repositories. The last columns show whether the repository can be mirrored
    and whether staging is enabled.
   </p><p>
    Use the <code class="option">--verbose</code> option, to get additional information
    about the URL of the repository and the path it will be mirrored to.

   </p><p>
    The repository listing can be limited to the repositories that can be
    mirrored or to the repositories that are enabled. To list the repositories that can be
    mirrored, use the <code class="option">-m</code> or <code class="option">--only-mirrorable</code>
    option: <code class="command">smt-repos -m</code>.
   </p><p>
    To list only enabled repositories, use the <code class="option">-o</code> or
    <code class="option">--only-enabled</code> option: <code class="command">smt-repos -o</code>
    (see <a class="xref" href="#ex.smt.mirroring.repos.o" title="Listing All Enabled Repositories">Example 3.1, “Listing All Enabled Repositories”</a>).
   </p><div class="example" id="ex.smt.mirroring.repos.o"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 3.1: </span><span class="name">Listing All Enabled Repositories </span><a title="Permalink" class="permalink" href="#ex.smt.mirroring.repos.o">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">tux:~ # smt-repos -o
.---------------------------------------------------------------------------------------------------------------------.
| Mirr| ID | Type | Name                    | Target        | Description                             | Can be M| Stag|
+-----+----+------+-------------------------+---------------+-----------------------------------------+---------+-----+
| Yes |  1 | zypp | ATI-Driver-SLE11-SP2    | --            | ATI-Driver-SLE11-SP2                    | Yes     | Yes |
| Yes |  2 | zypp | nVidia-Driver-SLE11-SP2 | --            | nVidia-Driver-SLE11-SP2                 | Yes     | No  |
| Yes |  3 | nu   | SLED11-SP2-Updates      | sle-11-x86_64 | SLED11-SP2-Updates for sle-11-x86_64    | Yes     | No  |
| Yes |  4 | nu   | SLES11-SP1-Updates      | sle-11-x86_64 | SLES11-SP1-Updates for sle-11-x86_64    | Yes     | Yes |
| Yes |  5 | nu   | SLES11-SP2-Core         | sle-11-x86_64 | SLES11-SP2-Core for sle-11-x86_64       | Yes     | No  |
| Yes |  6 | nu   | SLES11-SP2-Updates      | sle-11-i586   | SLES11-SP2-Updates for sle-11-i586      | Yes     | No  |
| Yes |  7 | nu   | WebYaST-Testing-Updates | sle-11-i586   | WebYaST-Testing-Updates for sle-11-i586 | Yes     | No  |
'-----+----+------+-------------------------+---------------+-----------------------------------------+---------+-----'</pre></div></div></div><p>
    You can also list only repositories with a specific name or show
    information about a repository with a specific name and target. To list
    repositories with a particular name, use the <code class="command">smt-repos</code>

    <em class="replaceable ">REPOSITORY_NAME</em> command. To show information
    about a repository with a specific name and target, use the
    <code class="command">smt-repos</code> <em class="replaceable ">repository_name</em>
    <em class="replaceable ">TARGET</em> command.
   </p><p>
    To get a list of installation repositories from remote, see
    <a class="xref" href="#smt.clients.repolist" title="6.5. Listing Accessible Repositories">Section 6.5, “Listing Accessible Repositories”</a>.
   </p></div><div class="sect2 " id="smt.mirroring.manage.domirror"><div class="titlepage"><div><div><h3 class="title" id="smt.mirroring.manage.domirror"><span class="number">3.2.4 </span><span class="name">Selecting Repositories to Be Mirrored</span> <a title="Permalink" class="permalink" href="#smt.mirroring.manage.domirror">#</a></h3></div></div></div><p>
    Only enabled repositories can be mirrored. In the database, the enabled
    repositories have the <code class="literal">DOMIRROR</code> flag set. Repositories
    can be enabled or disabled using the <code class="command">smt-repos</code> command.
   </p><p>
    To enable one or more repositories, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To enable all repositories that can be mirrored or to
      choose one repository from the list of all repositories, run the
      <code class="command">smt-repos -e</code> command.
     </p><p>
      You can limit the list of repositories by using the relevant options. To
      limit the list to the repositories that can be mirrored, use the
      <code class="option">-m</code> option: <code class="command">smt-repos -m -e</code>. To limit
      the list to the repositories with a specific name, use the
      <code class="command">smt-repos -e</code>
      <em class="replaceable ">REPOSITORY_NAME</em> command. To list a repository
      with a specific name and target, use the <code class="command">smt-repos -e
      <em class="replaceable ">REPOSITORY_NAME</em>
      <em class="replaceable ">TARGET</em></code> command.
     </p><p>
      To enable all repositories belonging to a specific product,
      use the <code class="option">--enable-by-prod</code> or <code class="option">-p</code> option,
      followed by the name of the product and optionally version,
      architecture, and release:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -p <em class="replaceable ">product</em>[,<em class="replaceable ">version</em>[,<em class="replaceable ">architecture</em>[,<em class="replaceable ">release</em>]]]</pre></div><p>
      For example, to enable all repositories belonging to SUSE Linux Enterprise Server 10 SP3 for
      PowerPC architecture, use the <code class="command">smt-repos -p
      SUSE-Linux-Enterprise-Server-SP3,10,ppc</code> command. The list of
      known products can be obtained with the
      <code class="command">smt-list-products</code> command.
     </p><div id="idm140661821124464" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Installer Self-Update Repository</h6><p>
       RMT supports mirroring the installer self-update repository (find more
       information in <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 8 “Installation Steps”, Section 8.2.1 “Self-Update Process”</span>). If
       you need to provide the self-update repository, identify and enable it,
       for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -m | grep Installer
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -e SLES12-SP2-Installer-Updates sle-12-x86_64</pre></div></div></li><li class="step "><p>
      If more than one repository is listed, choose the one you want to enable:
      specify its ID listed in the repository table and press
      <span class="keycap">Enter</span>. If you want to enable all the listed
      repositories, use <code class="literal">a</code> and press
      <span class="keycap">Enter</span>.
     </p></li></ol></div></div><p>
    To disable one or more repositories, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To disable all enabled repositories or just choose one
      repository from the list of all repositories, run the <code class="command">smt-repos
      -d</code> command.
     </p><p>
      To choose the repository to be disabled from a shorter list,
      or to disable all repositories from a limited group, use any of the
      available options to limit the list of repositories. To limit the list to
      the enabled repositories, use the <code class="option">-o</code>
      option: <code class="command">smt-repos -o -d</code>. To limit the list to
      repositories with a particular name, use the <code class="command">smt-repos

      -d</code> <em class="replaceable ">REPOSITORY_NAME</em> command. To show a repository with a specific name and target, use the
      <code class="command">smt-repos -d
      <em class="replaceable ">REPOSITORY_NAME</em>
      <em class="replaceable ">TARGET</em></code> command.
     </p></li><li class="step "><p>
      If more than one repository is listed, choose which one you want to
      disable: specify its ID listed in the repository table and
      press <span class="keycap">Enter</span>. If you want to disable all the
      listed repositories, use <code class="literal">a</code> and press
      <span class="keycap">Enter</span>.
     </p></li></ol></div></div></div><div class="sect2 " id="idm140661796403120"><div class="titlepage"><div><div><h3 class="title" id="idm140661796403120"><span class="number">3.2.5 </span><span class="name">Deleting Mirrored Repositories</span> <a title="Permalink" class="permalink" href="#idm140661796403120">#</a></h3></div></div></div><p>
    You can delete mirrored repositories that are no longer used. If you delete
    a repository, it will be physically removed from the SMT storage area.
   </p><p>
    Use the <code class="command">smt-repos
    --delete</code> command to delete a repository with a specific name. To
    delete the repository in a namespace, specify the <code class="option">--namespace <em class="replaceable ">DIRNAME</em></code>
    option.
   </p><p>
    The <code class="option">--delete</code> option lists all repositories. You can delete the specified
    repositories by entering the ID number or the name and target. To delete all repositories, enter
    <span class="guimenu">a</span>.
   </p><div id="idm140661822763008" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Detecting Repository IDs</h6><p>
     Every repository has an SHA-1 hash that you can use as an ID. You can get the
     repository's hash by calling <code class="command">smt-repos -v</code>.
    </p></div></div><div class="sect2 " id="idm140661822760992"><div class="titlepage"><div><div><h3 class="title" id="idm140661822760992"><span class="number">3.2.6 </span><span class="name">Mirroring Custom Repositories</span> <a title="Permalink" class="permalink" href="#idm140661822760992">#</a></h3></div></div></div><p>
    RMT also makes it possible to mirror repositories that are not available
    at the SUSE Customer Center. These repositories are called <span class="quote">“<span class="quote">custom
    repositories</span>”</span>, and they can be mirrored using the
    <code class="command">smt-setup-custom-repos</code> command.  It is also possible to
    delete custom repositories.
   </p><p>
    When adding a new custom repository, the
    <code class="command">smt-setup-custom-repos</code> command inserts a new record in the
    database and sets the <span class="emphasis"><em>mirror</em></span> flag to
    <em class="replaceable ">true</em>. You can disable
    mirroring later, if necessary.
   </p><p>
    To set up a custom repository to be available through RMT, follow these
    steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      If you do not know the ID of the product the new repositories should
      belong to, use <code class="command">smt-list-products</code> to get the ID. For
      the description of the <code class="command">smt-list-products</code>, see
      <a class="xref" href="#smt.scripts.listproducts" title="7.1.1.4. smt-list-products">Section 7.1.1.4, “smt-list-products”</a>.
     </p></li><li class="step "><p>
      Run
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-setup-custom-repos --productid <em class="replaceable ">PRODUCT_ID</em> \
--name <em class="replaceable ">REPOSITORY_NAME</em> --exturl <em class="replaceable ">REPOSITORY_URL</em></pre></div><p>
      <em class="replaceable ">PRODUCT_ID</em> is the ID of the
      product the repository belongs to,
      <em class="replaceable ">REPOSITORY_NAME</em> is the name of the
      repository, and <em class="replaceable ">REPOSITORY_URL</em> is the URL of the
      repository. If the added repository needs to be
      available for more than one product, specify the IDs of all products that
      should use the added repository.
     </p><p>
      For example, the following command sets <code class="literal">My repository</code> available at
      <code class="literal">http://example.com/My_repository</code> to the products with
      the IDs <code class="literal">423</code>, <code class="literal">424</code>, and
      <code class="literal">425</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-setup-custom-repositories --productid 423 --productid 424 \
--productid 425 --name 'My_repository' \
--exturl 'http://example.com/My_repository'</pre></div></li></ol></div></div><div id="idm140661817627728" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Mirroring Unsigned Repositories</h6><p>
     By default, SUSE Linux Enterprise 10 does not allow the use of unsigned
     repositories. So if you want to mirror unsigned repositories and
     use them on client machines, be aware that the package installation
     tool—YaST or <code class="command">zypper</code>—will ask you whether
     to use repositories that are not signed.
    </p></div><p>
    To remove an existing custom repository from the RMT database, use
    <code class="command">smt-setup-custom-repositories --delete</code>
    <em class="replaceable ">ID</em>, where <em class="replaceable ">ID</em>
    is the ID of the repository to be removed.
   </p></div></div><div class="sect1 " id="smt.repo.preload"><div class="titlepage"><div><div><h2 class="title" id="smt.repo.preload"><span class="number">3.3 </span><span class="name">Repository Preloading</span> <a title="Permalink" class="permalink" href="#smt.repo.preload">#</a></h2></div></div></div><p>
   Deploying multiple RMT servers can take time if each new RMT server
   must mirror the same repositories.
  </p><p>
   To save time when deploying new RMT servers, the repositories can be preloaded
   from another server or disk instead. To do this, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Enable the repositories to be mirrored with the RMT, for example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -e SLES12-Updates sle-12_x86_64</pre></div></li><li class="step "><p>
     Perform a dry run of <code class="command">smt-mirror</code> to create the required repository
     directories:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-mirror -d --dryrun -L /var/log/smt/smt-mirror.log</pre></div><p>
     The following directories are created based on the repository above and the default <code class="option">MirrorTo</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/srv/www/htdocs/repo/repoindex.xml
/srv/www/htdocs/repo/$RCE/SLES12-Updates/sle-12-x86_64/*</pre></div></li><li class="step "><p>
     Then copy the repositories from another RMT server, for
     example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rsync -av 'smt12:/srv/www/htdocs/repo/\$RCE/SLES12-Updates/sle-12-x86_64/' \
 '/srv/www/htdocs/repo/$RCE/SLES12-Updates/sle-12-x86_64/'</pre></div></li><li class="step "><p>
     To get the repository data fixed, run the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-mirror -d -L /var/log/smt/smt-mirror.log</pre></div></li></ol></div></div><div id="idm140661823800448" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Possible Error Messages</h6><p>
    Errors, such as <code class="literal">repomd.xml is the same, but repo is
    not valid. Start mirroring.</code>, are considered normal.
 They occur because the metadata of the preloaded repositories in
 the server's database remains incorrect until the initial mirror of the repositories has completed.
   </p></div></div></div><div class="chapter " id="smt.management"><div class="titlepage"><div><div><h1 class="title"><span class="number">4 </span><span class="name">Managing Repositories with YaST RMT Server Management</span> <a title="Permalink" class="permalink" href="#smt.management">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_management.xml</li><li><span class="ds-label">ID: </span>smt.management</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.yast.staging.starting"><span class="number">4.1 </span><span class="name">Starting RMT Management Module</span></a></span></dt><dt><span class="sect1"><a href="#smt.yast.staging.viewing"><span class="number">4.2 </span><span class="name">Viewing and Managing Repositories</span></a></span></dt></dl></div></div><p>
  The YaST RMT Server Management module is designed to perform daily
  management tasks. It can be used to enable and disable the mirroring of
  repositories, the staging flag for repositories, and perform the
  mirroring and staging.
 </p><div class="sect1 " id="smt.yast.staging.starting"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.staging.starting"><span class="number">4.1 </span><span class="name">Starting RMT Management Module</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.starting">#</a></h2></div></div></div><p>
   RMT Management is a YaST module. There are two ways to start the module:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Start YaST and select <span class="guimenu">Network Services</span>, then
     <span class="guimenu">RMT Server Management</span>
    </p></li><li class="listitem "><p>
     Run the  <code class="command">yast2 smt</code> command in the terminal as <code class="systemitem">root</code>
    </p></li></ul></div><p>
   This opens the RMT Management application window and switches to the
   <span class="guimenu">Repositories</span> section.
  </p><div class="figure" id="idm140661825396640"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_repos.png"><img src="images/smt_repos.png" width="" alt="List of Repositories" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.1: </span><span class="name">List of Repositories </span><a title="Permalink" class="permalink" href="#idm140661825396640">#</a></h6></div></div></div><div class="sect1 " id="smt.yast.staging.viewing"><div class="titlepage"><div><div><h2 class="title" id="smt.yast.staging.viewing"><span class="number">4.2 </span><span class="name">Viewing and Managing Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.viewing">#</a></h2></div></div></div><p>
   In the <span class="guimenu">Repositories</span> section, you can see the list of all
   available package repositories for RMT. For each repository, the list
   shows the repository's name, target product and architecture, mirroring and
   staging flag, date of last mirroring, and a short description. Sort
   the list by clicking the desired column header, and scroll the list items
   using the scrollbar on the right side.
  </p><div class="sect2 " id="smt.yast.staging.viewing.filter"><div class="titlepage"><div><div><h3 class="title" id="smt.yast.staging.viewing.filter"><span class="number">4.2.1 </span><span class="name">Filtering Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.viewing.filter">#</a></h3></div></div></div><p>
    You can also filter out groups of repositories using the <span class="guimenu">Repository
    Filter</span> text box. Enter the desired filter term and click
    <span class="guimenu">Filter</span> to see only the matching entries. To cancel the
    current filter and display all repositories, clear the <span class="guimenu">Repository
    Filter</span> field and click <span class="guimenu">Filter</span>.
   </p><div class="figure" id="idm140661824268560"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_repo_filter.png"><img src="images/smt_repo_filter.png" width="" alt="Repository Filter" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.2: </span><span class="name">Repository Filter </span><a title="Permalink" class="permalink" href="#idm140661824268560">#</a></h6></div></div></div><div class="sect2 " id="smt.yast.staging.viewing.mirror"><div class="titlepage"><div><div><h3 class="title" id="smt.yast.staging.viewing.mirror"><span class="number">4.2.2 </span><span class="name">Mirroring Repositories</span> <a title="Permalink" class="permalink" href="#smt.yast.staging.viewing.mirror">#</a></h3></div></div></div><p>
    Before you can offer package repositories, you need to create a
    local mirror of their packages. To do this, follow the procedure below.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      From the list, select the line containing the name of the repository you
      want to mirror.
     </p></li><li class="step "><p>
      Click the selected line to highlight it.
     </p></li><li class="step "><p>
      Click the <span class="guimenu">Toggle Mirroring</span> button in the lower-left
      part of the window. This enables the option in the <span class="guimenu">Mirroring</span> column of the
      selected repository. If the repository was already
      selected for mirroring, clicking the <span class="guimenu">Toggle Mirroring</span>
      button disables the mirroring.
     </p></li><li class="step "><p>
      Hit the <span class="guimenu">Mirror Now</span> button to mirror the repository.
     </p></li><li class="step "><p>
      A pop-up window appears with the information about mirroring status and
      result.
     </p></li><li class="step "><p>
      Click <span class="guimenu">OK</span> to refresh the list of repositories.
     </p></li></ol></div></div><div class="figure" id="idm140661796554544"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_mirroring-done.png"><img src="images/smt_mirroring-done.png" width="" alt="Status of Mirroring Process" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 4.3: </span><span class="name">Status of Mirroring Process </span><a title="Permalink" class="permalink" href="#idm140661796554544">#</a></h6></div></div></div></div></div><div class="chapter " id="smt.registration"><div class="titlepage"><div><div><h1 class="title"><span class="number">5 </span><span class="name">Managing Client Machines with RMT</span> <a title="Permalink" class="permalink" href="#smt.registration">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_registration.xml</li><li><span class="ds-label">ID: </span>smt.registration</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.registration.clients"><span class="number">5.1 </span><span class="name">Listing Registered Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.delete"><span class="number">5.2 </span><span class="name">Deleting Registrations</span></a></span></dt><dt><span class="sect1"><a href="#smt.registration.smtregister"><span class="number">5.3 </span><span class="name">Manual Registration of Clients at SUSE Customer Center</span></a></span></dt><dt><span class="sect1"><a href="#smt.registrations.schedule"><span class="number">5.4 </span><span class="name">Scheduling Periodic Registrations of Clients at SUSE Customer Center</span></a></span></dt></dl></div></div><p>
  RMT lets you register and manage client machines on SUSE Customer Center. Client machines
  must be configured to use RMT. For information about configuring clients to
  use RMT, see <a class="xref" href="#smt.client" title="Chapter 6. Configuring Clients to Use RMT">Chapter 6, <em>Configuring Clients to Use RMT</em></a>.
 </p><div class="sect1 " id="smt.registration.clients"><div class="titlepage"><div><div><h2 class="title" id="smt.registration.clients"><span class="number">5.1 </span><span class="name">Listing Registered Clients</span> <a title="Permalink" class="permalink" href="#smt.registration.clients">#</a></h2></div></div></div><p>
   To list RMT-registered client machines, use the
   <code class="command">smt-list-registrations</code> command. The following information
   is listed for each client: its <span class="guimenu">Unique ID</span>,
   <span class="guimenu">Hostname</span>, date and time of <span class="guimenu">Last
   Contact</span> with the RMT server, and the Software
   <span class="guimenu">Product</span> the client uses.
  </p></div><div class="sect1 " id="smt.registration.delete"><div class="titlepage"><div><div><h2 class="title" id="smt.registration.delete"><span class="number">5.2 </span><span class="name">Deleting Registrations</span> <a title="Permalink" class="permalink" href="#smt.registration.delete">#</a></h2></div></div></div><p>
   To delete a registration from RMT and SUSE Customer Center, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-delete-registration -g
<em class="replaceable ">Client_ID</em></pre></div><p>
   To delete multiple registrations, the option <code class="option">-g</code> can be used
   several times.
  </p><p>
   The ID of the client machine to be deleted can be determined from the output
   of the <code class="command">smt-list-registrations</code> command.
  </p></div><div class="sect1 " id="smt.registration.smtregister"><div class="titlepage"><div><div><h2 class="title" id="smt.registration.smtregister"><span class="number">5.3 </span><span class="name">Manual Registration of Clients at SUSE Customer Center</span> <a title="Permalink" class="permalink" href="#smt.registration.smtregister">#</a></h2></div></div></div><p>
   The <code class="command">smt-register</code> command registers clients at SUSE Customer Center. This
   registers all unregistered clients and clients with data that changed
   since the last registration.
  </p><p>
   To register clients whose registration has failed, use the
   <code class="option">--reseterror</code> option. This option resets the SCC
   registration error flag and tries to submit registrations again.
  </p></div><div class="sect1 " id="smt.registrations.schedule"><div class="titlepage"><div><div><h2 class="title" id="smt.registrations.schedule"><span class="number">5.4 </span><span class="name">Scheduling Periodic Registrations of Clients at SUSE Customer Center</span> <a title="Permalink" class="permalink" href="#smt.registrations.schedule">#</a></h2></div></div></div><p>

   

   RMT module allows for the easy scheduling of client registrations. By
   default, registrations are scheduled to run every 15 minutes. To create or
   modify a new registration schedule, follow the steps below.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST <span class="guimenu">RMT Configuration</span> module (<code class="command">yast2
     smt-server</code>).
    </p></li><li class="step "><p>
     Go to the <span class="guimenu">Scheduled RMT Job</span>.
    </p></li><li class="step "><p>
     Select any <span class="guimenu">SCC Registration</span> job and click
     <span class="guimenu">Edit</span> to change its schedule.
    </p><p>
     To create a new registration schedule, click <span class="guimenu">Add</span> and
     select <span class="guimenu">SCC Registration</span> as <span class="guimenu">Job to
     Run</span>.
    </p></li><li class="step "><p>
     Choose the <span class="guimenu">Frequency</span> of the scheduled RMT job. You
     can perform jobs <span class="guimenu">Daily</span>, <span class="guimenu">Weekly</span>,
     <span class="guimenu">Monthly</span>, or <span class="guimenu">Periodically</span> (every n-th
     hour or every m-th minute).
    </p><p>
     Set the <span class="guimenu">Job Start Time</span> by entering the
     <span class="guimenu">Hour</span> and <span class="guimenu">Minute</span> or appropriate time periods. For weekly and monthly
     schedules, select the <span class="guimenu">Day of the Week</span> or the
     <span class="guimenu">Day of the Month</span> the mirroring should occur.
    </p><div id="idm140661817590752" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Lowest Registration Frequency</h6><p>
      Do not set the frequency lower than 10 minutes, because the maximum value
      of the <code class="literal">rndRegister</code> is 450 (7.5 minutes). If the
      frequency is lower, it may happen that the started process is still
      sleeping when the next process starts. This causes the second request
      to exit.
     </p></div></li><li class="step "><p>
     Click <span class="guimenu">OK</span> or <span class="guimenu">Add</span> and
     <span class="guimenu">Finish</span>.
    </p></li></ol></div></div><p>
   Scheduling of RMT jobs in general is covered in
    FIXME.
  </p><p>
   YaST uses <code class="command">cron</code> to schedule SUSE Customer Center registrations and
   other RMT jobs. If you prefer not  to use YaST, you can use
   <code class="command">cron</code> directly.
  </p><p>
   To disable automatic registration, change the
   <code class="option">forwardRegistration</code> value in the <code class="literal">[LOCAL]</code>
   section of the <code class="filename">/etc/smt.conf</code> configuration file to
   <code class="literal">false</code>.
  </p></div></div><div class="chapter " id="smt.client"><div class="titlepage"><div><div><h1 class="title"><span class="number">6 </span><span class="name">Configuring Clients to Use RMT</span> <a title="Permalink" class="permalink" href="#smt.client">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_client.xml</li><li><span class="ds-label">ID: </span>smt.client</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.client.parameters"><span class="number">6.1 </span><span class="name">Using linuxrc Parameters to Access an RMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.autoyast"><span class="number">6.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.clientsetupscript"><span class="number">6.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.yast"><span class="number">6.4 </span><span class="name">Configuring Clients with YaST</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.repolist"><span class="number">6.5 </span><span class="name">Listing Accessible Repositories</span></a></span></dt><dt><span class="sect1"><a href="#smt.client.onlinemigration"><span class="number">6.6 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span></a></span></dt><dt><span class="sect1"><a href="#smt.clients.rhel"><span class="number">6.7 </span><span class="name">How to Update Red Hat Enterprise Linux with RMT</span></a></span></dt></dl></div></div><p>
  Any machine running SUSE Linux Enterprise 12 or newer can be configured to register against
  RMT and download software updates from there, instead of communicating
  directly with SUSE Customer Center or Novell Customer Center.
 </p><p>
  If your network includes an RMT server to provide a local update source,
  you need to equip the client with the server's URL. As client and server
  communicate via the HTTPS protocol during registration, you also need to make
  sure the client trusts the server's certificate. In case you set up your
  RMT server to use the default server certificate, the CA certificate will
  be available on the RMT server at
  <code class="literal">http://<em class="replaceable ">FQDN</em>/smt.crt</code> .
 </p><p>
  If the certificate is not issued by a well-trusted authority, it will be
  downloaded automatically from RMT. In this case, the client displays the
  new certificate details (its fingerprint), and you need to accept the
  certificate.
 </p><p>
  There are several ways to provide the registration information and to
  configure the client machine to use RMT:
 </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
    Provide the required information via kernel parameters at boot time
    (<a class="xref" href="#smt.client.parameters" title="6.1. Using linuxrc Parameters to Access an RMT Server">Section 6.1, “Using linuxrc Parameters to Access an RMT Server”</a>).
   </p></li><li class="listitem "><p>
    Configure the clients using an AutoYaST profile
    (<a class="xref" href="#smt.client.autoyast" title="6.2. Configuring Clients with AutoYaST Profile">Section 6.2, “Configuring Clients with AutoYaST Profile”</a>).
   </p></li><li class="listitem "><p>
    Use the <code class="command">clientSetup4SMT.sh</code> script
    (<a class="xref" href="#smt.client.clientsetupscript" title="6.3. Configuring Clients with the clientSetup4SMT.sh Script">Section 6.3, “Configuring Clients with the clientSetup4SMT.sh Script”</a>). This script can be run on
    a client to make it register against a specified RMT server.
   </p></li><li class="listitem "><p>
    You can set the RMT server URL with the YaST
    registration module during installation
    (<a class="xref" href="#smt.client.yast" title="6.4. Configuring Clients with YaST">Section 6.4, “Configuring Clients with YaST”</a>).
   </p></li></ol></div><p>
  These methods are described in the following sections.
 </p><div class="sect1 " id="smt.client.parameters"><div class="titlepage"><div><div><h2 class="title" id="smt.client.parameters"><span class="number">6.1 </span><span class="name">Using linuxrc Parameters to Access an RMT Server</span> <a title="Permalink" class="permalink" href="#smt.client.parameters">#</a></h2></div></div></div><p>
   Any client can be configured to use RMT by providing the
   <code class="literal">regurl</code> parameter during machine boot.
  </p><p>
   The parameter needs to be entered as
   <code class="literal">regurl=<em class="replaceable ">SMT_SERVER_URL</em></code>. The URL
   needs to be in the following format:
   <code class="literal">https://<em class="replaceable ">FQDN</em>/connect/</code> with
   <em class="replaceable ">FQDN</em> being the fully qualified host name of the
   RMT server. It must be identical to the FQDN of the server certificate
   used on the RMT server. Example:
  </p><div class="verbatim-wrap"><pre class="screen">regurl=https://smt.example.com/connect/</pre></div><div id="idm140661816155248" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Beware of Typing Errors</h6><p>
    Make sure the values you enter are correct. If <code class="literal">regurl</code>
    has not been specified correctly, the registration of the update source
    will fail.
   </p></div><div id="idm140661816153344" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Change of RMT Server Certificate</h6><p>
    If the RMT server gets a new certificate from an untrusted CA, the
    clients need to retrieve the new CA certificate file.  YaST displays a
    dialog for importing a new certificate. If you confirm importing the new
    certificate, the old one is replaced with the new one.
   </p></div></div><div class="sect1 " id="smt.client.autoyast"><div class="titlepage"><div><div><h2 class="title" id="smt.client.autoyast"><span class="number">6.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span> <a title="Permalink" class="permalink" href="#smt.client.autoyast">#</a></h2></div></div></div><p>
   Clients can be configured to register with RMT server via AutoYaST profile.
   For general information about creating AutoYaST profiles and preparing automatic
   installation, refer to the <span class="emphasis"><em>AutoYaST Guide</em></span>. In this section,
   only RMT specific configuration is described.
  </p><p>
   To configure RMT specific data using AutoYaST, follow the steps for the
   relevant version of RMT client.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      As <code class="systemitem">root</code>, start YaST and select <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation</span> to start the graphical AutoYaST front-end.
     </p><p>
      From a command line, you can start the graphical AutoYaST front-end with the
      <code class="command">yast2 autoyast</code> command.
     </p></li><li class="step "><p>
      Open an existing profile using <span class="guimenu">File</span> › <span class="guimenu">Open</span>, create a profile based on the
      current system's configuration using <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference Profile</span>, or work with an empty profile.
     </p></li><li class="step "><p>
      Select <span class="guimenu">Software</span> › <span class="guimenu">Product
      Registration</span>. An overview of the current
      configuration is shown.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Edit</span>.
     </p></li><li class="step "><p>
      Check <span class="guimenu">Register the Product</span>, set the URL of the RMT
      server in <span class="guimenu">Use Specific Server URL Instead of the
      Default</span>, and you can set the <span class="guimenu">Optional SSL Server
      Certificate URL</span>. The possible values for the server URL are the
      same as for the kernel parameter <code class="literal">regurl</code>. For the SSL
      certificate location, you can use either HTTP or HTTPS based URLs.
     </p></li><li class="step "><p>
      Perform all other configuration needed for the systems to be deployed,
      then click <span class="guimenu">Finish</span> to return to the main screen.
     </p></li><li class="step "><p>
      Select <span class="guimenu">File</span> › <span class="guimenu">Save As</span> and enter a file name for the profile, such as
      <code class="filename">autoinst.xml</code>.
     </p></li></ol></div></div></div><div class="sect1 " id="smt.client.clientsetupscript"><div class="titlepage"><div><div><h2 class="title" id="smt.client.clientsetupscript"><span class="number">6.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script</span> <a title="Permalink" class="permalink" href="#smt.client.clientsetupscript">#</a></h2></div></div></div><p>
   The <code class="command">/usr/share/doc/packages/smt/clientSetup4SMT.sh</code> script
   is provided together with RMT. This script allows you to configure a
   client machine to use an RMT server. It can also be used to reconfigure an
   existing client to use a different RMT server.
  </p><div id="idm140661817633696" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Installation of <code class="command">wget</code></h6><p>
    The script <code class="filename">clientSetup4SMT.sh</code> itself uses
    <code class="command">wget</code>, so <code class="command">wget</code> must be installed on
    the client.
   </p></div><p>
   To configure a client machine to use RMT with the
   <code class="command">clientSetup4SMT.sh</code> script, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Copy the <code class="filename">clientSetup4SMT.sh</code> script from your RMT
     server to the client machine. The script is available at
     <code class="filename">&lt;SMT_HOSTNAME&gt;/repo/tools/clientSetup4SMT.sh</code>
     and <code class="filename">/srv/www/htdocs/repo/tools/clientSetup4SMT.sh</code>.
     You can download it with a browser, using <code class="command">wget</code>, or by
     another means, such as with <code class="command">scp</code>.
    </p></li><li class="step "><p>
     As <code class="systemitem">root</code>, execute the script on the client machine. The script can be
     executed in two ways. In the first case, the script name is followed by
     the registration URL. For example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>./clientSetup4SMT.sh https://smt.example.com/center/regsvc</pre></div><p>
     In the second case, the script uses the <code class="option">--host</code> option
     followed by the host name of the RMT server, and
     <code class="option">--regcert</code> followed by the URL of the SSL certificate; for
     example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>./clientSetup4SMT.sh --host smt.example.com \
  --regcert http://smt.example.com/certs/smt.crt</pre></div><p>
     In this case, without any <span class="quote">“<span class="quote">namespace</span>”</span> specified, the client
     will be configured to use the default production repositories. If
     <code class="option">--namespace <em class="replaceable ">GROUPNAME</em></code> is
     specified, the client will use that staging group.
    </p></li><li class="step "><p>
     The script downloads the server's CA certificate. Accept it by pressing
     <span class="keycap">Y</span>.
    </p></li><li class="step "><p>
     The script performs all necessary modifications on the client. However,
     the registration itself is not performed by the script.
    </p></li><li class="step "><p>
     The script downloads and asks to accept additional GPG keys to sign
     repositories with.
    </p></li><li class="step "><p>
     Perform the registration by executing
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> SUSEConnect -p <em class="replaceable ">PRODUCT_NAME</em> --url <em class="replaceable ">https://smt.example.org</em></pre></div><p>
     or running the <code class="command">yast2 registration</code> (SUSE Linux Enterprise Server 12 SP1 and newer) or
     <code class="command">yast2 scc</code> (SUSE Linux Enterprise Server 12) module on the client.
    </p></li></ol></div></div><p>
   This script is also provided for download. You can get it by running
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>wget http://smt.example.com/repo/tools/clientSetup4SMT.sh</pre></div><div id="idm140661818314608" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Extension and Module Registration</h6><p>
    When registering an existing system against RMT—both on the
    command line and using YaST—you need to register additional
    extensions and modules separately, one by one. This applies both to
    already installed extensions and to extensions that you plan to install.
   </p></div><div class="sect2 " id="idm140661818312208"><div class="titlepage"><div><div><h3 class="title" id="idm140661818312208"><span class="number">6.3.1 </span><span class="name">Problems Downloading GPG Keys from the Server</span> <a title="Permalink" class="permalink" href="#idm140661818312208">#</a></h3></div></div></div><p>
    The <code class="literal">apache2-example-pages</code> package includes a
    <code class="filename">robots.txt</code> file. The file is installed into the
    Apache2 document root directory, and controls how clients can access files
    from the Web server. If this package is installed on the server,
    <code class="filename">clientSetup4SMT.sh</code> fails to download the keys stored
    under <code class="filename">/repo/keys</code>.
   </p><p>
    You can solve this problem by either editing
    <code class="filename">robots.txt</code>, or uninstalling the
    <code class="literal">apache2-example-pages</code> package.
   </p><p>
    If you choose to edit the <code class="filename">robots.txt</code> file, add before
    the <code class="literal">Disallow: /</code> statement:
   </p><div class="verbatim-wrap"><pre class="screen">Allow: /repo/keys</pre></div></div></div><div class="sect1 " id="smt.client.yast"><div class="titlepage"><div><div><h2 class="title" id="smt.client.yast"><span class="number">6.4 </span><span class="name">Configuring Clients with YaST</span> <a title="Permalink" class="permalink" href="#smt.client.yast">#</a></h2></div></div></div><p>
    To configure a client to perform the registration against an RMT server
    use the YaST <span class="guimenu">Product Registration</span> module
    <code class="command">yast2 registration</code>.
   </p><p>
    On the client, the credentials are not necessary and you may leave the
    relevant fields empty. Click <span class="guimenu">Local Registration Server</span>
    and enter its URL. Then click <span class="guimenu">Next</span> until the exit from
    the module.
   </p></div><div class="sect1 " id="smt.clients.repolist"><div class="titlepage"><div><div><h2 class="title" id="smt.clients.repolist"><span class="number">6.5 </span><span class="name">Listing Accessible Repositories</span> <a title="Permalink" class="permalink" href="#smt.clients.repolist">#</a></h2></div></div></div><p>
   To retrieve the accessible repositories for a client, download
   <code class="filename">repo/repoindex.xml</code> from the RMT server with the
   client's credentials. The credentials are stored in
   <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> on the
   client machine. Using <code class="command">wget</code>, the command for testing could
   be as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>wget https://<em class="replaceable ">USER</em>:<em class="replaceable ">PASS</em>@smt.example.com/repo/repoindex.xml</pre></div><p>
   <code class="filename">repoindex.xml</code> returns the complete repository list as
   they come from the vendor. If a repository is marked for staging,
   <code class="filename">repoindex.xml</code> lists the repository in the
   <code class="literal">full</code> namespace (<code class="filename">repos/full/$RCE</code>).
  </p><p>
   To get a list of all repositories available on the RMT server, use the
   credentials specified in the <code class="literal">[LOCAL]</code> section of
   <code class="filename">/etc/smt.conf</code> on the server as
   <code class="literal">mirrorUser</code> and <code class="literal">mirrorPassword</code>.
  </p></div><div class="sect1 " id="smt.client.onlinemigration"><div class="titlepage"><div><div><h2 class="title" id="smt.client.onlinemigration"><span class="number">6.6 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span> <a title="Permalink" class="permalink" href="#smt.client.onlinemigration">#</a></h2></div></div></div><p>
   SUSE Linux Enterprise clients registered against RMT can be migrated online to the latest
   service pack of the same major release the same way as clients registered
   against SUSE Customer Center or Novell Customer Center. Before starting the migration, make
   sure that RMT is configured to provide the correct version of repositories
   to which you need the clients to migrate.
  </p><p>
   For detailed information on online migration, see <span class="intraxref">Book “Upgrade Guide”, Chapter 1 “Upgrade Paths and Methods”</span>.
  </p></div><div class="sect1 " id="smt.clients.rhel"><div class="titlepage"><div><div><h2 class="title" id="smt.clients.rhel"><span class="number">6.7 </span><span class="name">How to Update Red Hat Enterprise Linux with RMT</span> <a title="Permalink" class="permalink" href="#smt.clients.rhel">#</a></h2></div></div></div><p>

   

   RMT enables customers that possess the required entitlements to mirror
   updates for Red Hat Enterprise Linux (RHEL). Refer to
   <a class="link" href="http://www.suse.com/products/expandedsupport/" target="_blank">http://www.suse.com/products/expandedsupport/</a> for
   details on SUSE Linux Enterprise Server Subscription with Expanded Support. This section discusses
   the actions required to configure the RMT server and clients (RHEL
   servers) for this solution.
  </p><div id="idm140661813930048" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: SUSE Linux Enterprise Server 10</h6><p>
    Configuring RHEL client with Subscription Management Tool for SUSE Linux Enterprise (RMT
    1.0) running SUSE Linux Enterprise Server 10 is slightly different. For more information, see
    <a class="link" href="http://www.novell.com/support/search.do?usemicrosite=true&amp;searchString=7001751" target="_blank">How
    to update Red Hat Enterprise Linux with RMT.</a>
   </p></div><div class="sect2 " id="smt.client.rhel.server"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.server"><span class="number">6.7.1 </span><span class="name">How to Prepare RMT Server for Mirroring and Publishing Updates for RHEL</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.server">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install SUSE Linux Enterprise Server (SLES) with the RMT packages as per the documentation on
      the respective products.
     </p></li><li class="step "><p>
      During RMT setup, use organization credentials that have access to
      Novell-provided RHEL update repositories.
     </p></li><li class="step "><p>
      Verify that the organization credentials have access to download updates
      for the Red Hat products with
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -m | grep RES</pre></div></li><li class="step "><p>
      Enable mirroring of the RHEL update repositories for the desired
      architecture(s):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -e <em class="replaceable ">REPO-NAME</em> <em class="replaceable ">ARCHITECTURE</em></pre></div></li><li class="step "><p>
      Mirror the updates and log verbose output:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-mirror -d -L /var/log/smt/smt-mirror.log</pre></div><p>
      The updates for RHEL will also be mirrored automatically as part of the
      default nightly RMT mirroring cron job. When the mirror process of the
      repositories for your RHEL products has completed, the updates are available
      via
     </p><div class="verbatim-wrap"><pre class="screen">http://smt-server.your-domain.top/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/</pre></div></li><li class="step "><p>
      To enable GPG checking of the repositories, the key used to sign the
      repositories needs to be made available to the RHEL clients. This key is
      now available in the res-signingkeys package, which is included in the
      RMT installation source.
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Install the <code class="literal">res-signingkeys</code> package with the command
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper in -y res-signingkeys</pre></div></li><li class="listitem "><p>
        The installation of the package stores the key file as
        <code class="filename">/srv/www/htdocs/repo/keys/res-signingkeys.key</code>.
       </p></li><li class="listitem "><p>
        Now the key is available to the clients and can be imported into their
        RPM database as described later.
       </p></li></ul></div></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.yum"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.yum"><span class="number">6.7.2 </span><span class="name">How to Configure the YUM Client on RHEL 5.2 to Receive Updates from RMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.yum">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Import the repository signing key downloaded above into the local RPM
      database with
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm --import http://<em class="replaceable ">smt.example.com</em>/repo/keys/res-signingkeys.key</pre></div></li><li class="step "><p>
      Create a file in <code class="filename">/etc/yum.repos.d/</code> and name it
      <code class="literal">RES5.repo</code>.
     </p></li><li class="step "><p>
      Edit the file and enter the repository data, and point to the repository on
      the RMT server as follows:
     </p><div class="verbatim-wrap"><pre class="screen">[smt]
name=SMT repository
baseurl=http://<em class="replaceable ">smt.example.com</em>/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/
enabled=1
gpgcheck=1</pre></div><p>
      Example of base URL:
     </p><div class="verbatim-wrap"><pre class="screen">http://smt.mycompany.com/repo/$RCE/RES5/i386/</pre></div></li><li class="step "><p>
      Save the file.
     </p></li><li class="step "><p>
      Disable standard Red Hat repositories by setting
     </p><div class="verbatim-wrap"><pre class="screen">enabled=0</pre></div><p>
      in the repository entries in other files in
      <code class="filename">/etc/yum.repos.d/</code> (if any are enabled).
     </p><p>
      Both YUM and the update notification applet should work correctly now and
      notify of available updates when applicable. You may need to restart the
      applet.
     </p></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.up2date"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.up2date"><span class="number">6.7.3 </span><span class="name">How to Configure the UP2DATE Client on RHEL 3.9 and 4.7 to Receive Updates from RMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.up2date">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Import the repository signing key downloaded above into the local RPM
      database with
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm --import http://<em class="replaceable ">smt.example.com</em>/repo/keys/res-signingkeys.key</pre></div></li><li class="step "><p>
      Edit the file <code class="filename">/etc/sysconfig/rhn/sources</code> and make
      the following changes:
     </p></li><li class="step "><p>
      Comment out any lines starting with <code class="literal">up2date</code>.
     </p><p>
      Normally, there will be a line that says "up2date default".
     </p></li><li class="step "><p>
      Add an entry pointing to the RMT repository (all in one line):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yum <em class="replaceable ">REPO_NAME</em> http://<em class="replaceable ">smt.example.com</em>/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/</pre></div><p>
      where <code class="literal">repo-name</code> should be set to RES3 for 3.9 and RES4
      for 4.7.
     </p></li><li class="step "><p>
      Save the file.
     </p></li></ol></div></div><p>
    Both up2date and the update notification applet should work correctly now,
    pointing to the RMT repository and indicating updates when available. In
    case of trouble, try to restart the applet.
   </p><p>
    To ensure correct reporting of the Red Hat Enterprise systems in SUSE Customer Center,
    they need to be registered against your RMT server. For this a special
    suseRegisterRES package is provided through the RES* repositories and it should
    be installed, configured and executed as described below.
   </p></div><div class="sect2 " id="smt.client.rhel.rhel52"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.rhel52"><span class="number">6.7.4 </span><span class="name">How to Register RHEL 5.2 against RMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.rhel52">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the suseRegisterRES package.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yum install suseRegisterRES</pre></div><div id="idm140661820806368" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Packages</h6><p>
       You may need to install the <code class="literal">perl-Crypt-SSLeay</code> and
       <code class="literal">perl-XML-Parser</code> packages from the original RHEL
       media.
      </p></div></li><li class="step "><p>
      Copy the RMT certificate to the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> wget http://<em class="replaceable ">smt.example.com</em>/smt.crt</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cat smt.crt &gt;&gt; /etc/pki/tls/cert.pem</pre></div></li><li class="step "><p>
      Edit <code class="filename">/etc/suseRegister.conf</code> to point to RMT by
      changing the URL value to
     </p><div class="verbatim-wrap"><pre class="screen">url: https://<em class="replaceable ">smt.example.com</em>/center/regsvc/</pre></div><p>
      or (for SUSE Customer Center)
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/connect/</pre></div></li><li class="step "><p>
      Register the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> suse_register</pre></div></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.rhel4739"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.rhel4739"><span class="number">6.7.5 </span><span class="name">How to Register RHEL 4.7 and RHEL 3.9 against RMT</span> <a title="Permalink" class="permalink" href="#smt.client.rhel.rhel4739">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the <code class="literal">suseRegisterRES</code> package:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> up2date --get suseRegisterRES
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> up2date --get perl-XML-Writer
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm -ivh /var/spool/up2date/suseRegisterRES*.rpm /var/spool/up2date/perl-XML-Writer-0*.rpm</pre></div><div id="idm140661820742320" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Packages</h6><p>
       You may need to install the <code class="literal">perl-Crypt-SSLeay</code> and
       <code class="literal">perl-XML-Parser</code> packages from the original RHEL
       media.
      </p></div></li><li class="step "><p>
      Copy the RMT certificate to the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> wget http://<em class="replaceable ">smt.example.com</em>/smt.crt</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cat smt.crt &gt;&gt; /usr/share/ssl/cert.pem</pre></div></li><li class="step "><p>
      Edit <code class="filename">/etc/suseRegister.conf</code> to point to RMT by
      changing the URL value to
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/center/regsvc/</pre></div><p>
      or (for SUSE Customer Center)
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/connect/</pre></div></li><li class="step "><p>
      Register the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> suse_register</pre></div></li></ol></div></div></div></div></div><div class="chapter " id="smt.tools"><div class="titlepage"><div><div><h1 class="title"><span class="number">7 </span><span class="name">RMT Tools and Configuration Files</span> <a title="Permalink" class="permalink" href="#smt.tools">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_tools.xml</li><li><span class="ds-label">ID: </span>smt.tools</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.scripts"><span class="number">7.1 </span><span class="name">Important Scripts and Tools</span></a></span></dt><dt><span class="sect1"><a href="#idm140661818357904"><span class="number">7.2 </span><span class="name">RMT Configuration Files</span></a></span></dt><dt><span class="sect1"><a href="#smt.tools.cert"><span class="number">7.3 </span><span class="name">Server Certificates</span></a></span></dt></dl></div></div><p>
  This chapter describes the most important scripts, configuration files and
  certificates shipped with RMT.
 </p><div class="sect1 " id="smt.scripts"><div class="titlepage"><div><div><h2 class="title" id="smt.scripts"><span class="number">7.1 </span><span class="name">Important Scripts and Tools</span> <a title="Permalink" class="permalink" href="#smt.scripts">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_scripts.xml</li><li><span class="ds-label">ID: </span>smt.scripts</li></ul></div></div></div></div><p>
  There are two important groups of RMT commands: The
  <code class="command">smt</code> command and its sub-commands are used for managing
  the mirroring of updates, registration of clients, and reporting. The
  <code class="systemitem">systemd</code> <code class="systemitem">smt.target</code> is used for starting,
  stopping, restarting the RMT service and services that RMT depends on,
  and for checking their status.
 </p><div class="sect2 " id="smt.scripts.smt"><div class="titlepage"><div><div><h3 class="title" id="smt.scripts.smt"><span class="number">7.1.1 </span><span class="name">/usr/sbin/smt Commands</span> <a title="Permalink" class="permalink" href="#smt.scripts.smt">#</a></h3></div></div></div><p>
   The key command to manage the RMT is <code class="command">smt</code>
   (<code class="filename">/usr/sbin/smt</code>). The <code class="command">smt</code> command
   should be used together with various sub-commands described in this
   section. If the <code class="command">smt</code> command is used alone, it prints
   a list of all available sub-commands. To get help for individual
   sub-commands, use <code class="command">smt</code>
   <em class="replaceable ">SUBCOMMAND</em> --help.
  </p><p>
   The following sub-commands are available:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>

     <code class="command">smt-client</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-delete-registration</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-job</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-list-products</code>
    </p></li><li class="listitem "><p>

     <code class="command">smt-list-registrations</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-mirror</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-scc-sync</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-register</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-report</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-repos</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-setup-custom-repos</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-support</code>
    </p></li><li class="listitem "><p>
     <code class="command">smt-sync</code>
    </p></li></ul></div><p> There are two syntax types you can use with the
        <code class="command">smt</code> command: <code class="command">smt</code> followed by a sub-command or a single
      command consisting of <code class="command">smt</code> followed by the dash and the desired
      sub-command. For example, it is possible to use
      either <code class="command">smt mirror</code> or
        <code class="command">smt-mirror</code>, as both have the same meaning. </p><div id="idm140661826362400" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Conflicting Commands</h6><p>
    Depending on your <code class="literal">$PATH</code> environment variable, the
    RMT <code class="command">smt</code> command
    (<code class="filename">/usr/sbin/smt</code>) may collide with the
    <code class="command">smt</code> command from the <code class="systemitem">star</code>
    package (<code class="filename">/usr/bin/smt</code>). Either use the absolute
    path <code class="filename">/usr/sbin/smt</code>, create an alias, or set your
    <code class="literal">$PATH</code> accordingly.
   </p><p>
    Another solution is to always use the <code class="command">smt-</code>
    <em class="replaceable ">SUBCOMMAND</em> syntax.
   </p></div><div class="sect3 " id="idm140661795766880"><div class="titlepage"><div><div><h4 class="title" id="idm140661795766880"><span class="number">7.1.1.1 </span><span class="name">smt-client</span> <a title="Permalink" class="permalink" href="#idm140661795766880">#</a></h4></div></div></div><p>
    The <code class="command">smt-client</code> command shows information about
    registered clients. The information includes the following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      guid
     </p></li><li class="listitem "><p>
      host name
     </p></li><li class="listitem "><p>
      patch status
     </p></li><li class="listitem "><p>
      time stamps of the patch status
     </p></li><li class="listitem "><p>
      last contact with the RMT server
     </p></li></ul></div><p>
    The <code class="command">smt-client</code> supports the following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661825300640"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Shows detailed information about the client. The last contact date is
       shown as well.
      </p></dd><dt id="idm140661825298016"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd><dt id="idm140661825295472"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies the file the log will be written to.
      </p></dd><dt id="idm140661825541616"><span class="term "><code class="option">--hostname</code> or <code class="option">-h</code> with the
     parameter <em class="replaceable ">HOSTNAME</em>
     </span></dt><dd><p>
       Lists the entries whose host name begins with
       <em class="replaceable ">HOSTNAME</em>.
      </p></dd><dt id="idm140661825538128"><span class="term "><code class="option">--guid</code> or <code class="option">-g</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Lists the entries whose GUID is <em class="replaceable ">ID</em>.
      </p></dd><dt id="idm140661825534656"><span class="term "><code class="option">--severity</code> or <code class="option">-s</code> with the
     parameter <em class="replaceable ">LEVEL</em>
     </span></dt><dd><p>
       Filters the result by the patch status information. The value
       <em class="replaceable ">level</em> can be one of <code class="literal">packagemanager</code>,
       <code class="literal">security</code>, <code class="literal">recommended</code> or <code class="literal">optional</code>.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661825386288"><div class="titlepage"><div><div><h4 class="title" id="idm140661825386288"><span class="number">7.1.1.2 </span><span class="name">smt-delete-registration</span> <a title="Permalink" class="permalink" href="#idm140661825386288">#</a></h4></div></div></div><p>
    The <code class="command">smt-delete-registration</code> command deletes one or
    more registrations from RMT and SUSE Customer Center. It unregisters machines
    from the system. The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661825384224"><span class="term "><code class="option">--guid</code> or <code class="option">-g</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Deletes the machine with the guid <em class="replaceable ">ID</em> from
       the system. You can use this option multiple times.
      </p></dd><dt id="idm140661796505008"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>

       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="smt.scripts.job"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.job"><span class="number">7.1.1.3 </span><span class="name">smt-job</span> <a title="Permalink" class="permalink" href="#smt.scripts.job">#</a></h4></div></div></div><p>
    The <code class="command">smt-job</code> script manages jobs for individual RMT
    clients. You can this command to list, create, edit, and delete jobs. The
    following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661796499648"><span class="term "><code class="option">--list</code> or <code class="option">-l</code>
     </span></dt><dd><p>
       Lists all client jobs. This is the default if the operation mode
       switch is omitted.
      </p></dd><dt id="idm140661796497024"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code> with the parameter
     <em class="replaceable ">LEVEL</em>
     </span></dt><dd><p>
       Shows detailed information about a job or jobs in a list mode. The
       <em class="replaceable ">level</em> value can be a number from 0 to 3.
       The higher the value, the more verbose the command is.
      </p></dd><dt id="idm140661821332880"><span class="term "><code class="option">--create</code> or <code class="option">-c</code>
     </span></dt><dd><p>
       Creates a new job.
      </p></dd><dt id="idm140661821330336"><span class="term "><code class="option">--edit</code> or <code class="option">-e</code>
     </span></dt><dd><p>
       Edits an existing job.
      </p></dd><dt id="idm140661821327792"><span class="term "><code class="option">--delete</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Deletes an existing job.
      </p></dd><dt id="idm140661821325248"><span class="term "><code class="option">--guid</code> or <code class="option">-g</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the client's guid. This parameter
       can be used multiple times to create a job for more than one client.
      </p></dd><dt id="idm140661796546400"><span class="term "><code class="option">--jobid</code> or <code class="option">-j</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the job ID. You need to specify job ID and client's
       guid when editing or deleting a job,
       as the same job for multiple clients has the same job ID.
      </p></dd><dt id="idm140661796543232"><span class="term "><code class="option">--deleteall</code> or <code class="option">-A</code><em class="replaceable ">id</em>
     </span></dt><dd><p> Omit either the client's guid or the job ID in the delete
              operation. The missing parameter will match all respective
              jobs. </p></dd><dt id="idm140661796540272"><span class="term "><code class="option">--type</code> or <code class="option">-t</code> with the parameter
     <em class="replaceable ">TYPE</em>
     </span></dt><dd><p>
       Specifies the job type. The type can be one of
       <code class="literal">patchstatus</code>, <code class="literal">softwarepush</code>,
       <code class="literal">update</code>, <code class="literal">execute</code>,
       <code class="literal">reboot</code>, <code class="literal">wait</code>,
       <code class="literal">eject</code>. On the client, only the following job types
       are enabled by default: <code class="literal">patchstatus</code>,
       <code class="literal">softwarepush</code> and <code class="literal">update</code>.
      </p></dd><dt id="idm140661794570416"><span class="term "><code class="option">--description <em class="replaceable ">DESCRIPTION</em></code>
     </span></dt><dd><p>
       Specifies a job description.
      </p></dd><dt id="idm140661794568080"><span class="term "><code class="option">--parent</code><em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the job ID of the parent job. Use it to define a
       dependency. A job will not be processed until its parent has
       successfully finished.
      </p></dd><dt id="idm140661794565552"><span class="term "><code class="option">--name</code> or <code class="option">-n</code> with the parameter
     <em class="replaceable ">NAME</em>
     </span></dt><dd><p>
       Specifies a job name.
      </p></dd><dt id="idm140661796535216"><span class="term "><code class="option">--persistent</code>
     </span></dt><dd><p>
       Specifies if a job is persistent. Non-persistent jobs are processed
       only once, while persistent jobs are processed again and again. Use
       <code class="option">--timelag</code> to define the time that elapses until the
       next run.
      </p></dd><dt id="idm140661796532496"><span class="term "><code class="option">--finished</code>
     </span></dt><dd><p>
       Search option for finished jobs.
      </p></dd><dt id="idm140661796530448"><span class="term "><code class="option">--targeted</code><em class="replaceable ">time</em>
     </span></dt><dd><p>
       Specifies the earliest execution time of a job. Note that the job most
       likely will not run exactly at that point in time, but probably some
       minutes or hours after. The reason is that the client polls in a
       fixed interval for jobs.
      </p></dd><dt id="idm140661796527824"><span class="term "><code class="option">--expires</code><em class="replaceable ">time</em>
     </span></dt><dd><p>
       Defines when the job will no longer be executed anymore.
      </p></dd><dt id="idm140661817543024"><span class="term "><code class="option">--timelag</code><em class="replaceable ">time</em>
     </span></dt><dd><p>
       Defines the time interval for persistent jobs.
      </p></dd></dl></div><p> For a complete list of available options and their explanations,
        see the manual page of the <code class="command">smt-job</code> command
          (<code class="command">man</code>
        <code class="command">smt-job</code>). </p><div class="sect4 " id="idm140661817538576"><div class="titlepage"><div><div><h5 class="title" id="idm140661817538576"><span class="number">7.1.1.3.1 </span><span class="name">Examples</span> <a title="Permalink" class="permalink" href="#idm140661817538576">#</a></h5></div></div></div><p>
     List all finished jobs:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-job --list --finished</pre></div><p>
     Create a <code class="literal">softwarepush</code> job that installs <code class="literal">xterm</code>
     and <code class="literal">bash</code> on client 12345 and 67890:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-job --create -t softwarepush -P xterm -P bash -g 12345 -g 67890</pre></div><p>
     Change the timing for a persistent job with job ID 42 and guid 12345
     to run every 6 hours:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-job --edit -j 42 -g 12345 --targeted 0000-00-00 --timelag 06:00:00</pre></div><p>
     Delete all jobs with job ID 42:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-job --delete -jobid 42 --deleteall</pre></div></div></div><div class="sect3 " id="smt.scripts.listproducts"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.listproducts"><span class="number">7.1.1.4 </span><span class="name">smt-list-products</span> <a title="Permalink" class="permalink" href="#smt.scripts.listproducts">#</a></h4></div></div></div><p>
    The <code class="command">smt-list-products</code> script lists all software
    products in the RMT database. The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661795756016"><span class="term "><code class="option">--used</code> or <code class="option">-u</code>
     </span></dt><dd><p>

       Shows only used products.
      </p></dd><dt id="idm140661795753456"><span class="term "><code class="option">--catstat</code> or <code class="option">-c</code>
     </span></dt><dd><p>

       Shows whether all repositories needed for a product are locally
       mirrored.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661794506576"><div class="titlepage"><div><div><h4 class="title" id="idm140661794506576"><span class="number">7.1.1.5 </span><span class="name">smt-list-registrations</span> <a title="Permalink" class="permalink" href="#idm140661794506576">#</a></h4></div></div></div><p>
    The <code class="command">smt-list-registrations</code> script lists all
    registrations. There are two options available for this command:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661794504576"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Shows detailed information about the registered devices.
      </p></dd><dt id="idm140661794502000"><span class="term "><code class="option">--format</code> or <code class="option">-f</code> with the parameter
     <em class="replaceable ">FORMAT</em>
     </span></dt><dd><p> Formats the output in the <em class="replaceable ">asciitable</em> or
                <em class="replaceable ">csv</em> formats. </p></dd></dl></div></div><div class="sect3 " id="idm140661794497824"><div class="titlepage"><div><div><h4 class="title" id="idm140661794497824"><span class="number">7.1.1.6 </span><span class="name">smt-mirror</span> <a title="Permalink" class="permalink" href="#idm140661794497824">#</a></h4></div></div></div><p>
    The <code class="command">smt-mirror</code> command performs the mirroring
    procedure and downloads repositories that are set to be mirrored.
   </p><p>
    You can run the <code class="command">smt-mirror</code> with the following
    options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661825596368"><span class="term "><code class="option">--clean</code> or <code class="option">-c</code>
     </span></dt><dd><p>
       Removes all files no longer mentioned in the metadata from the mirror.
       No mirroring occurs before cleanup.
      </p></dd><dt id="idm140661825593728"><span class="term "><code class="option">--debug</code> or <code class="option">-d</code>
     </span></dt><dd><p>
       Enables the debugging mode.
      </p></dd><dt id="idm140661825591168"><span class="term "><code class="option">--deepverify</code>
     </span></dt><dd><p>
       Turns on verifying of all package checksums.
      </p></dd><dt id="idm140661825589040"><span class="term "><code class="option">--hardlink <em class="replaceable ">SIZE</em></code>
     </span></dt><dd><p>
       Searches for duplicate files with a size greater than the size
       specified in kilobytes. Creates hard links for them.

      </p></dd><dt id="idm140661820658896"><span class="term "><code class="option">--directory <em class="replaceable ">PATH</em></code>
     </span></dt><dd><p>
       Defines the directory to work on. When using this option, the default
       value configured in the <code class="filename">smt.conf</code> configuration
       file is ignored.
      </p></dd><dt id="idm140661820655952"><span class="term "><code class="option">--dbreplfile <em class="replaceable ">FILE</em></code>
     </span></dt><dd><p>
       Defines a path to the *.xml file to use as database replacement. You
       can create this file with the <code class="command">smt-scc</code> command.
      </p></dd><dt id="idm140661820653040"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the
     parameter <em class="replaceable ">FILE</em>
     </span></dt><dd><p>
       Specifies the path to a log file.
      </p></dd></dl></div></div><div class="sect3 " id="smt.scripts.smtsync"><div class="titlepage"><div><div><h4 class="title" id="smt.scripts.smtsync"><span class="number">7.1.1.7 </span><span class="name">smt-ssc-sync</span> <a title="Permalink" class="permalink" href="#smt.scripts.smtsync">#</a></h4></div></div></div><p>
    The <code class="command">smt-scc-sync</code> command
    obtains data from SUSE Customer Center and updates the local RMT database.
    It can also save SUSE Customer Center data to a directory instead of the RMT
    database, or read the data from such a directory instead of
    downloading it from SUSE Customer Center.
   </p><p>
    You can run the <code class="command">smt-scc-sync</code> with the following
    options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661794238144"><span class="term "><code class="option">--fromdir <em class="replaceable ">DIRECTORY</em></code>
     </span></dt><dd><p>
       Reads SUSE Customer Center data from a directory instead of downloading it from
       SUSE Customer Center.
      </p></dd><dt id="idm140661794235664"><span class="term "><code class="option">--todir <em class="replaceable ">DIRECTORY</em></code>
     </span></dt><dd><p>
       Writes SUSE Customer Center data to the specified directory without updating the
       RMT database.
      </p><div id="idm140661794233520" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: SUSE Manager's Subscription Matching Feature</h6><p>
        This data can be used by the subscription matching feature of
        SUSE Manager, which gives you a detailed overview of your subscription
        usage. For more information on the subscription matching feature, see
        <a class="link" href="https://www.suse.com/documentation/suse-manager-3/book_suma_reference_manual/data/ref_webui_audit_subscription.html" target="_blank">https://www.suse.com/documentation/suse-manager-3/book_suma_reference_manual/data/ref_webui_audit_subscription.html</a>
       </p></div></dd><dt id="idm140661794230944"><span class="term "><code class="option">--createdbreplacementfile</code>
     </span></dt><dd><p>
       Creates a database replacement file for using
       <code class="command">smt-mirror</code> without database.
      </p></dd><dt id="idm140661825424912"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies the path to a log file.
      </p></dd><dt id="idm140661825421888"><span class="term "><code class="option">--debug</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661825419472"><div class="titlepage"><div><div><h4 class="title" id="idm140661825419472"><span class="number">7.1.1.8 </span><span class="name">smt-register</span> <a title="Permalink" class="permalink" href="#idm140661825419472">#</a></h4></div></div></div><p>
    The <code class="command">smt-register</code> or <code class="command">smt register</code>
    command registers all currently unregistered clients at the SUSE Customer Center. It also
    registers all clients whose data has changed since the last
    registration.
   </p><p>
    The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661825416464"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies the path to a log file.
      </p></dd><dt id="idm140661795848256"><span class="term "><code class="option">--debug</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661795845840"><div class="titlepage"><div><div><h4 class="title" id="idm140661795845840"><span class="number">7.1.1.9 </span><span class="name">smt-report</span> <a title="Permalink" class="permalink" href="#idm140661795845840">#</a></h4></div></div></div><p>
    The <code class="command">smt-report</code> or <code class="command">smt report</code>
    command generates a subscription report based on local calculation or
    SUSE Customer Center registrations.
   </p><p>
    The following options are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661795842896"><span class="term "><code class="option">--mail</code> or <code class="option">-m</code>
     </span></dt><dd><p>
       Activates mailing the report to the addresses configured with the
       RMT Server and written in <code class="filename">/etc/smt.conf</code>. The
       report is formatted as tables.
      </p></dd><dt id="idm140661795839792"><span class="term "><code class="option">--attach</code> or <code class="option">-a</code>
     </span></dt><dd><p>
       Appends the report to the e-mails in CSV format. This option should
       only be used in combination with the <code class="option">--mail</code> option.
      </p></dd><dt id="idm140661796624144"><span class="term "><code class="option">--quiet</code> or <code class="option">-q</code>
     </span></dt><dd><p>
       Suppresses output to STDOUT and runs <code class="command">smt-report</code> in
       quiet mode.
      </p></dd><dt id="idm140661796621184"><span class="term "><code class="option">--csv</code> or <code class="option">-c</code>
     </span></dt><dd><p>
       Exports the report to multiple files in the CSV format. The first line
       of each *.csv file consists of the column names. The
       <code class="option">--csv</code> parameter should only be used in combination with
       the <code class="option">--file</code> parameter. If the specified file name has
       the <code class="literal">.csv</code> extension, the report is formatted as CSV
       (as if the <code class="option">--csv</code> parameter was used).
      </p></dd><dt id="idm140661796616592"><span class="term "><code class="option">--pdf</code> or <code class="option">-p</code>
     </span></dt><dd><p>
       Exports the report in the PDF format. Use it only in combination with
       the <code class="option">-file</code> option.
      </p></dd><dt id="idm140661795006800"><span class="term "><code class="option">--xml</code>
     </span></dt><dd><p>
       Exports the report in the XML format. Use it only in combination with
       the <code class="option">-file</code> option. For a detailed description of the
       XML format, see the manual page of the <code class="command">smt-report</code>
       command.
      </p></dd><dt id="idm140661795003664"><span class="term "><code class="option">--file</code> or <code class="option">-F</code>
     </span></dt><dd><p>
       Exports the report to one or several files. By default, the report
       is written to a single file formatted as tables. Optionally, the
       file name or whole path may be specified after the
       <code class="option">--file <em class="replaceable ">filename</em></code> parameter. If no
       file name is specified, a default file name containing a time stamp is
       used. However, RMT does not check if the file or files already
       exist.
      </p><p> In the CSV mode the report is written to multiple files,
              therefore the specified file name expands to
                  <code class="filename"><em class="replaceable ">[PATH/]FILENAME</em>-<em class="replaceable ">reportname</em>.<em class="replaceable ">extension</em></code>
              for every report. </p></dd><dt id="idm140661794997984"><span class="term "><code class="option">--logfile</code> or <code class="option">-L</code> with the parameter
     <em class="replaceable ">LOGFILE</em>
     </span></dt><dd><p>
       Specifies path to a log file.
      </p></dd><dt id="idm140661793142720"><span class="term "><code class="option">--debug</code>
     </span></dt><dd><p>
       Enables debugging mode.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661793140304"><div class="titlepage"><div><div><h4 class="title" id="idm140661793140304"><span class="number">7.1.1.10 </span><span class="name">smt-repos</span> <a title="Permalink" class="permalink" href="#idm140661793140304">#</a></h4></div></div></div><p>
    Use <code class="command">smt-repos</code> (or <code class="command">smt
    repositories</code>) to list all available repositories and for
    enabling, disabling, and deleting repositories. The following options are
    available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661793137808"><span class="term "><code class="option">--enable-mirror</code> or <code class="option">-e</code>
     </span></dt><dd><p>
       Enables repository mirroring.
      </p></dd><dt id="idm140661793135248"><span class="term "><code class="option">--disable-mirror</code> or <code class="option">-d</code>
       </span></dt><dd><p>
           Disables repository mirroring.
         </p></dd><dt id="idm140661825379168"><span class="term "><code class="option">--enable-by-prod</code> or <code class="option">-p</code>
     </span></dt><dd><p>
       Enables repository mirroring by giving product data in the following
       format:
       <code class="literal">Product[,Version[,Architecture[,Release]]]</code>.

      </p></dd><dt id="idm140661825376080"><span class="term "><code class="option">--disable-by-prod</code> or <code class="option">-P</code>
     </span></dt><dd><p>
       Disables repository mirroring by giving product data in the following
       format:
       <code class="literal">Product[,Version[,Architecture[,Release]]]</code>.

      </p></dd><dt id="idm140661825372992"><span class="term "><code class="option">--only-mirrorable</code> or <code class="option">-m</code>
     </span></dt><dd><p>
       Lists only repositories that can be mirrored.
      </p></dd><dt id="idm140661825370496"><span class="term "><code class="option">--only-enabled</code> or <code class="option">-o</code>
     </span></dt><dd><p>
       Lists only enabled repositories.
      </p></dd><dt id="idm140661820763872"><span class="term "><code class="option">--delete</code>
     </span></dt><dd><p>
       Lists repositories and deletes them from disk.
      </p></dd><dt id="idm140661820761744"><span class="term "><code class="option">--namespace <em class="replaceable ">DIRNAME</em></code>
     </span></dt><dd><p>
       Deletes the repository in the specified name space.
      </p></dd><dt id="idm140661820759328"><span class="term "><code class="option">--verbose</code> or <code class="option">-v</code>
     </span></dt><dd><p>
       Shows detailed repository information.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661820756448"><div class="titlepage"><div><div><h4 class="title" id="idm140661820756448"><span class="number">7.1.1.11 </span><span class="name">smt-setup-custom-repos</span> <a title="Permalink" class="permalink" href="#idm140661820756448">#</a></h4></div></div></div><p>
    The <code class="command">smt-setup-custom-repos</code> and <code class="command">smt
    setup-custom-repos</code> script are designed for setting up custom
    repositories (repositories not present in the download server) for use with RMT.
    You can use this script to add a new repository to the RMT database or
    to delete a repository from the database. The script supports the
    following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661820753776"><span class="term "><code class="option">--productid</code> <em class="replaceable ">PRODUCT_ID</em>
     </span></dt><dd><p>
       ID of a product the repository belongs to. If a repository should
       belong to multiple products, use this option multiple times to assign
       the repository to all relevant products.
      </p></dd><dt id="idm140661813887968"><span class="term "><code class="option">--name</code> <em class="replaceable ">NAME</em>
     </span></dt><dd><p>
       The name of the custom repository.
      </p></dd><dt id="idm140661813885408"><span class="term "><code class="option">--description</code> <em class="replaceable ">DESCRIPTION</em>
     </span></dt><dd><p>
       The description of the custom repository.
      </p></dd><dt id="idm140661813882832"><span class="term "><code class="option">--exturl</code> <em class="replaceable ">URL</em>
     </span></dt><dd><p>
       The URL for the repository to be mirrored from. Only HTTP and
       HTTPS protocols are supported.
      </p></dd><dt id="idm140661813880208"><span class="term "><code class="option">--delete</code> <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Removes a custom repository with a given ID from the RMT database.
      </p></dd></dl></div><p>
    To set up a new repository, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-setup-custom-repos --productid <em class="replaceable ">PRODUCT_ID</em> \
--name <em class="replaceable ">NAME</em> --exturl <em class="replaceable ">URL</em></pre></div><p>
    For example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-setup-custom-repos --productid <em class="replaceable ">434</em> \
--name <em class="replaceable ">My_Catalog</em> --exturl <em class="replaceable ">http://my.example.com/My_Catalog</em></pre></div><p>
    To remove a configured repository, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-setup-custom-repos --delete <em class="replaceable ">ID</em></pre></div><p>
    For example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-setup-custom-repos --delete <em class="replaceable ">1cf336d819e8e5904f4d4b05ee081971a0cc8afc</em></pre></div></div><div class="sect3 " id="idm140661825579232"><div class="titlepage"><div><div><h4 class="title" id="idm140661825579232"><span class="number">7.1.1.12 </span><span class="name">smt-support</span> <a title="Permalink" class="permalink" href="#idm140661825579232">#</a></h4></div></div></div><p>
    The <code class="command">smt-support</code> command manages uploaded support data
    usually coming from the <code class="command">supportconfig</code> tool. You can
    forward the data to SUSE, either selectively or in full. This command
    supports the following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661825576704"><span class="term "><code class="option">--incoming</code> or <code class="option">-i</code> with the
     parameter <em class="replaceable ">DIRECTORY</em>
     </span></dt><dd><p>
       Specifies the directory where the supportconfig archives are uploaded.
       You can also set this option with the <code class="literal">SMT_INCOMING</code>
       environment variable. The default <code class="literal">SMT_INCOMING</code>
       directory is <code class="filename">/var/spool/smt-support</code>.
      </p></dd><dt id="idm140661821381168"><span class="term "><code class="option">--list</code> or <code class="option">-l</code>
     </span></dt><dd><p>
       Lists the uploaded supportconfig archives in the incoming directory.
      </p></dd><dt id="idm140661821378576"><span class="term "><code class="option">--remove</code> or <code class="option">-r</code> with the parameter
     <em class="replaceable ">ARCHIVE</em>
     </span></dt><dd><p>
       Deletes the specified archive.
      </p></dd><dt id="idm140661821375552"><span class="term "><code class="option">--empty</code> or <code class="option">-R</code>
     </span></dt><dd><p>
       Deletes all archives in the incoming directory.
      </p></dd><dt id="idm140661821372976"><span class="term "><code class="option">--upload</code> or <code class="option">-u</code> with the parameter
     <em class="replaceable ">ARCHIVE</em>
     </span></dt><dd><p>
       Uploads the specified archive to SUSE. If you specify
       <code class="option">-s</code>, <code class="option">-n</code>, <code class="option">-c</code>,
       <code class="option">-p</code>, and <code class="option">-e</code> options, the archive is
       repackaged with contact information.
      </p></dd><dt id="idm140661818198784"><span class="term "><code class="option">--uploadall</code> or <code class="option">-U</code>
     </span></dt><dd><p>
       Uploads all archives in the incoming directory to SUSE.
      </p></dd><dt id="idm140661818196208"><span class="term "><code class="option">--srnum</code> or <code class="option">-s</code> with the parameter <em class="replaceable ">SR_NUMBER</em>
     </span></dt><dd><p>
       Specifies the Novell Service Request 12-digit number.
      </p></dd><dt id="idm140661818193184"><span class="term "><code class="option">--name</code> or <code class="option">-n</code> with the parameter
     <em class="replaceable ">NAME</em>
     </span></dt><dd><p>
       Specifies the first and last name of the contact, in quotes.
      </p></dd><dt id="idm140661796735056"><span class="term "><code class="option">--company</code> or <code class="option">-c</code> with the parameter
     <em class="replaceable ">COMPANY</em>
     </span></dt><dd><p>
       Specifies the company name.
      </p></dd><dt id="idm140661796732032"><span class="term "><code class="option">--storeid</code> or <code class="option">-d</code> with the parameter
     <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the store ID, if applicable.
      </p></dd><dt id="idm140661796729008"><span class="term "><code class="option">--terminalid</code> or <code class="option">-t</code> with the
     parameter <em class="replaceable ">ID</em>
     </span></dt><dd><p>
       Specifies the terminal ID, if applicable.
      </p></dd><dt id="idm140661796725968"><span class="term "><code class="option">--phone</code> or <code class="option">-p</code> with the parameter
     <em class="replaceable ">PHONE</em>
     </span></dt><dd><p>
       Specifies the phone number of the contact person.
      </p></dd><dt id="idm140661822750928"><span class="term "><code class="option">--email</code> or <code class="option">-e</code> with the parameter
     <em class="replaceable ">E-MAIL_ADDRESS</em>
     </span></dt><dd><p>
       Specifies the e-mail address of the contact.
      </p></dd></dl></div></div></div><div class="sect2 " id="idm140661822747408"><div class="titlepage"><div><div><h3 class="title" id="idm140661822747408"><span class="number">7.1.2 </span><span class="name">RMT <code class="systemitem">systemd</code> Commands</span> <a title="Permalink" class="permalink" href="#idm140661822747408">#</a></h3></div></div></div><p>
   You can manage RMT-related services with the standard <code class="systemitem">systemd</code>
   commands:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661822744560"><span class="term "><code class="command">systemctl start smt.target</code>
    </span></dt><dd><p>
      Starts the RMT services.
     </p></dd><dt id="idm140661822742448"><span class="term "><code class="command">systemctl stop smt.target</code>
    </span></dt><dd><p>
      Stops the RMT services.
     </p></dd><dt id="idm140661822740336"><span class="term "><code class="command">systemctl status smt.target</code>
    </span></dt><dd><p>
      Checks the status of the RMT services. Checks whether httpd, MariaDB,
      and cron are running.
     </p></dd><dt id="idm140661822738144"><span class="term "><code class="command">systemctl restart smt.target</code>
    </span></dt><dd><p>
      Restarts the RMT services.
     </p></dd><dt id="idm140661818361216"><span class="term "><code class="command">systemctl try-restart smt.target</code>
    </span></dt><dd><p>
      Checks whether the RMT services are enabled and if so, restarts them.
     </p></dd></dl></div><p>
   You can enable and disable RMT with the YaST RMT Server module.
  </p></div></div><div class="sect1 " id="idm140661818357904"><div class="titlepage"><div><div><h2 class="title" id="idm140661818357904"><span class="number">7.2 </span><span class="name">RMT Configuration Files</span> <a title="Permalink" class="permalink" href="#idm140661818357904">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_config_files.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  The main RMT configuration file is <code class="filename">/etc/rmt.conf</code>.
  You can set most of the options with the YaST RMT Server module.
  Another important configuration file is
  <code class="filename">/etc/smt.d/smt-cron.conf</code>, which contains parameters
  for commands launched as RMT scheduled jobs.
 </p><div class="sect2 " id="smt.config.smtconf"><div class="titlepage"><div><div><h3 class="title" id="smt.config.smtconf"><span class="number">7.2.1 </span><span class="name">/etc/rmt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf">#</a></h3></div></div></div><p>
   The <code class="filename">/etc/rmt.conf</code> file has several sections. The
   <code class="literal">[NU]</code> section contains the update credentials and URL.
   The <code class="literal">[DB]</code> section contains the configuration of the
   MariaDB database for RMT. The <code class="literal">[LOCAL]</code> section includes
   other configuration data. The <code class="literal">[REPORT]</code> section
   contains the configuration of RMT reports.
  </p><div id="idm140661818350624" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Passwords in Clear Text</h6><p> The <code class="filename">/etc/rmt.conf</code> file contains passwords
        in clear text. Its default permissions (640, root, wwwrun)
        make its content easily accessible with scripts running on the
        Apache server. Be careful with running other software on the
        RMT Apache server. The best policy is to use this server only
        for RMT. </p></div><div class="sect3 " id="smt.config.smtconf.nu"><div class="titlepage"><div><div><h4 class="title" id="smt.config.smtconf.nu"><span class="number">7.2.1.1 </span><span class="name">[NU] Section of /etc/rmt.conf</span> <a title="Permalink" class="permalink" href="#smt.config.smtconf.nu">#</a></h4></div></div></div><p>
    The following options are available in the [NU] section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661794535808"><span class="term "><code class="option">NUUrl</code>
     </span></dt><dd><p>
       URL of the update service. Usually it should contain the
       <code class="literal">https://updates.suse.com/</code> URL.
      </p></dd><dt id="idm140661794533200"><span class="term "><code class="option">NURegUrl</code>
     </span></dt><dd><p>
       URL of the update registration service. It is used by
       <code class="command">smt-sync</code>. If this option is missing, the URL from
       <code class="filename">/etc/SUSEConnect</code> is used as a fallback.
      </p></dd><dt id="idm140661794530128"><span class="term "><code class="option">NUUser</code>
     </span></dt><dd><p>
       <code class="option">NUUser</code> should contain the user name for update
       service. For information about getting organization credentials, see
       <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>. You can set this
       value with the RMT Server.
      </p></dd><dt id="idm140661794526864"><span class="term "><code class="option">NUPass</code>
     </span></dt><dd><p>
       <code class="option">NUPass</code> is the password for the user defined in
       <code class="option">NUUser</code>. For information about getting organization
       credentials, see <a class="xref" href="#smt.mirroring.getcredentials" title="3.1. Mirroring Credentials">Section 3.1, “Mirroring Credentials”</a>. You
       can set this value with the RMT Server.
      </p></dd><dt id="idm140661816592048"><span class="term "><code class="option">ApiType</code>
     </span></dt><dd><p>
              <code class="option">ApiType</code> is the type of service RMT
              uses; it can be either <code class="literal">NCC</code> for Novell
              Customer Center or <code class="literal">SCC</code> for SUSE Customer Center. The
              only supported value for RMT 12 is
                <code class="literal">SCC</code>. </p></dd></dl></div></div><div class="sect3 " id="idm140661816587760"><div class="titlepage"><div><div><h4 class="title" id="idm140661816587760"><span class="number">7.2.1.2 </span><span class="name">[DB] Section of /etc/rmt.conf</span> <a title="Permalink" class="permalink" href="#idm140661816587760">#</a></h4></div></div></div><p>
    The three options defined in the [DB] section are used for configuring
    the database for RMT. Currently, only MariaDB is supported by RMT.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661816586144"><span class="term "><code class="option">config</code>
     </span></dt><dd><p>
       The first parameter of the DBI-&gt;connect Perl method used for
       connection to the MariaDB database. The value should be in the form
      </p><div class="verbatim-wrap"><pre class="screen">dbi:mysql:database=<em class="replaceable ">SMT</em>;host=<em class="replaceable ">LOCALHOST</em></pre></div><p>
       where <em class="replaceable ">SMT</em> is the name of the database and
       <em class="replaceable ">LOCALHOST</em> is the host name of the database
       server.
      </p></dd><dt id="idm140661816581344"><span class="term "><code class="option">user</code>
     </span></dt><dd><p>
       The user for the database. The default value is
       <code class="literal">smt</code>.
      </p></dd><dt id="idm140661815732288"><span class="term "><code class="option">pass</code>
     </span></dt><dd><p>
       The password for the database user. You can set the password with the
       YaST RMT Server module.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661815729792"><div class="titlepage"><div><div><h4 class="title" id="idm140661815729792"><span class="number">7.2.1.3 </span><span class="name">[LOCAL] Section of /etc/rmt.conf</span> <a title="Permalink" class="permalink" href="#idm140661815729792">#</a></h4></div></div></div><p>
    The following options are available in the <code class="literal">[LOCAL]</code>
    section:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661815727872"><span class="term "><code class="option">url</code>
     </span></dt><dd><p>
       The base URL of the RMT server which is used to construct URLs of
       the repositories available on the server. This value should be set by
       YaST automatically during installation. The format of this option
       should be: <code class="literal">https://server.domain.tld/</code>.
      </p><p>
       You can change the URL manually. For example, the administrator may
       choose to use the <code class="literal">http://</code> scheme instead of
       <code class="literal">https://</code> for performance reasons. Another reason
       may be using an alias (configured with CNAME in DNS) instead of the
       host name of the server. For example,
       <code class="literal">http://smt.domain.tld/</code> instead of
       <code class="literal">http://server1.domain.tld/</code>.
      </p></dd><dt id="idm140661815722592"><span class="term "><code class="option">nccEmail</code>
     </span></dt><dd><p>
       E-mail address used for registration at the SUSE Customer Center. The RMT
       administrator can set this value with the YaST RMT Server module.
      </p></dd><dt id="idm140661815720368"><span class="term "><code class="option">MirrorTo</code>
     </span></dt><dd><p>
       Determines the path to mirror to.
      </p></dd><dt id="idm140661815718256"><span class="term "><code class="option">MirrorAll</code>
     </span></dt><dd><p>
       If the <code class="option">MirrorAll</code> option is set to
       <code class="literal">true</code>, the <code class="command">smt-sync</code> script will
       set all repositories that can be mirrored to be mirrored (DOMIRROR
       flag).
      </p></dd><dt id="idm140661816261936"><span class="term "><code class="option">MirrorSRC</code>
     </span></dt><dd><p>
       If the <code class="option">MirrorSRC</code> option is set to
       <code class="literal">true</code>, source RPM packages are mirrored.
      </p></dd><dt id="idm140661816258912"><span class="term "><code class="option">rndRegister</code>
     </span></dt><dd><p>
       Specify a delay in seconds before the clients are registered at SUSE Customer Center.
       The value is a random number between <code class="literal">0</code> and
       <code class="literal">450</code>, generated by the YaST RMT Server module.
       The purpose of this random delay is to prevent a high load on the
       SUSE Customer Center server that would occur if all smt-register cron jobs connected
       at the same time.
      </p></dd><dt id="idm140661816255584"><span class="term "><code class="option">mirror_preunlock_hook</code>
     </span></dt><dd><p>
       Specify the path to the script that will be run before the
       <code class="command">smt-mirror</code> script removes its lock.
      </p></dd><dt id="idm140661816252976"><span class="term "><code class="option">mirror_postunlock_hook</code>
     </span></dt><dd><p>
       Specify the path to the script that will be run after the
       <code class="command">smt-mirror</code> script removes its lock.
      </p></dd><dt id="idm140661816446224"><span class="term "><code class="option">HTTPProxy</code>
     </span></dt><dd><p>
       If you do not want to use global proxy settings, specify the proxy to
       be used for HTTP connection here. Use the following form:
       <code class="literal">http://<em class="replaceable ">PROXY</em>.example.com:<em class="replaceable ">3128</em></code>.
      </p><p>
       If the proxy settings are not configured in
       <code class="filename">/etc/rmt.conf</code>, the global proxy settings
       configured in <code class="filename">/etc/syconfig/proxy</code> are used. You
       can configure the global proxy settings with the YaST Proxy module.
      </p></dd><dt id="idm140661816441328"><span class="term "><code class="option">HTTPSProxy</code>
     </span></dt><dd><p>
       If you do not want to use global proxy settings, specify the proxy to
       be used for HTTPS connection here. Use the form:
       <code class="literal">https://<em class="replaceable ">PROXY</em>.example.com:<em class="replaceable ">3128</em></code>.
      </p><p>
       If the proxy settings are not configured in
       <code class="filename">/etc/rmt.conf</code>, the global proxy settings
       configured in <code class="filename">/etc/syconfig/proxy</code> are used. You
       can configure the global proxy settings with the YaST Proxy module.
      </p></dd><dt id="idm140661816436432"><span class="term "><code class="option">ProxyUser</code>
     </span></dt><dd><p>
       If your proxy requires authentication, specify a user name and
       password here, using the
       <code class="literal"><em class="replaceable ">USERNAME</em>:<em class="replaceable ">PASSWORD</em></code>
       format.
      </p><p>
       If the proxy settings are not configured in
       <code class="filename">/etc/rmt.conf</code>, the global proxy settings
       configured in <code class="filename">/etc/syconfig/proxy</code> are used. You
       can configure the global proxy settings with the YaST Proxy module.
      </p><div id="idm140661825463424" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Global User Authentication Setting</h6><p>
        If you configure the global proxy settings with YaST, manually
        copy <code class="filename">/root/.curlrc</code> to the home directory of the
        <code class="systemitem">smt</code>. Adjust the
        permissions with the following commands as <code class="systemitem">root</code>:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cp /root/.curlrc /var/lib/smt/
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> chown smt:www /var/lib/smt/.curlrc</pre></div></div></dd><dt id="idm140661825457936"><span class="term "><code class="option">requiredAuthType</code>
     </span></dt><dd><p>
       Specify an authentication type to access the repository. There are
       three possible types:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="literal">none</code> - no authentication is required. This is
         the default value.
        </p></li><li class="listitem "><p>
         <code class="literal">lazy</code> - only user name and password are checked. A
         valid user can access all repositories.
        </p></li><li class="listitem "><p>
         <code class="literal">strict</code> - checks also if the user has access to
         the repository.
        </p></li></ul></div></dd><dt id="idm140661825450528"><span class="term "><code class="option">smtUser</code>
     </span></dt><dd><p>
       Specify a user name of a Unix user under which all smt commands will
       run.
      </p></dd><dt id="idm140661794930976"><span class="term "><code class="option">signingKeyID</code>
     </span></dt><dd><p>
       Specify the ID of the GPG key to sign modified repositories. The user
       specified under <code class="option">smtUser</code> needs to have access to the
       key. If this option is not set, the modified repositories will be
       unsigned.
      </p></dd></dl></div></div><div class="sect3 " id="idm140661794927936"><div class="titlepage"><div><div><h4 class="title" id="idm140661794927936"><span class="number">7.2.1.4 </span><span class="name">Example /etc/rmt.conf</span> <a title="Permalink" class="permalink" href="#idm140661794927936">#</a></h4></div></div></div><div class="example" id="smt.mirroring.smtconf.ex"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 7.1: </span><span class="name">rmt.conf </span><a title="Permalink" class="permalink" href="#smt.mirroring.smtconf.ex">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">[NU]
NUUrl=https://updates.suse.com/
NURegUrl=https://scc.suse.com/connect
NUUser = exampleuser
NUPass = examplepassword
ApiType = SCC

[DB]
config = dbi:mysql:database=smt;host=localhost
user = smt
pass = smt

[LOCAL]
# Default should be http://server.domain.top/
url = http://smt.example.com/
# This email address is used for registration at SCC
nccEmail = exampleuser@example.com
MirrorTo = /srv/www/htdocs
MirrorAll = false
MirrorSRC = false
forwardRegistration = true
rndRegister = 127
# The hook script that should be called before the smt-mirror script removes its lock
mirror_preunlock_hook =
# The hook script that should be called after the smt-mirror script removed its lock
mirror_postunlock_hook =
# specify proxy settings here, if you do not want to use the global proxy settings
# If you leave these options empty the global options are used.
#
# specify which proxy you want to use for HTTP connection
# in the form http://proxy.example.com:3128
HTTPProxy =
# specify which proxy you want to use for HTTPS connection
# in the form http://proxy.example.com:3128
HTTPSProxy =
# specify username and password if your proxy requires authentication
# in the form username:password
ProxyUser =
#
# require authentication to access the repository?
# Three possible authtypes can be configured here
# 1) none   : no authentication required (default)
# 2) lazy   : check only username and password. A valid user has access to all repositories
# 3) strict : check also if this user has access to the repository.
#
requiredAuthType = none
#
# the smt commands should run with this unix user
#
smtUser = smt
#
# ID of the GPG key to be used to sign modified (filtered) repositories.
# The key must be accessible by the user who runs SMT, i.e. the user specified
# in the 'smtUser' configuration option.
#
# If empty, the modified repositories will be unsigned.
#
signingKeyID =
#
# This string is sent in HTTP requests as UserAgent.
# If the key UserAgent does not exist, a default is used.
# If UserAgent is empty, no UserAgent string is set.
#
#UserAgent=
# Organization credentials for this SMT server.
# These are currently only used to get list of all available repositories
# from https://your.smt.url/repo/repoindex.xml
# Note: if authenticated as a client machine instead of these mirrorUser,
# the above URL returns only repositories relevant for that client.
mirrorUser =
mirrorPassword =

[REST]
# Enable administrative access to the RMT RESTService by setting enableRESTAdminAccess=1
# default: 0
enableRESTAdminAccess = 0
# Define the username the REST-Admin uses for login
# default: RESTroot
RESTAdminUser = RESTroot
# Define the password for the REST-Admin (note: empty password is invalid)
# default: &lt;empty&gt;
RESTAdminPassword =

[JOBQUEUE]
# maximum age of finished (non-persistent) jobs in days
# default: 8
maxFinishedJobAge = 8
# comma separated list of JobQueue status IDs that should be interpreted as successful
# See smt-job --help for more information about possible Status IDs
# Please note: An empty string will be interpreted as default (1,4).
# default: 1,4
# useful:  1,4,6
jobStatusIsSuccess = 1,4

[REPORT]
# comma separated list of eMail addresses where the status reports will be sent to
reportEmail = exampleuser@example.com
# from field of report mails - if empty it defaults to "root@&lt;hostname&gt;.&lt;domainname&gt;"
reportEmailFrom =
# relay mail server - leave empty if mail should be sent directly
mailServer =
mailServerPort =
# mail server authentication - leave empty if not required
mailServerUser =
mailServerPassword =</pre></div></div></div></div></div><div class="sect2 " id="smt.config.cronconf"><div class="titlepage"><div><div><h3 class="title" id="smt.config.cronconf"><span class="number">7.2.2 </span><span class="name">/etc/smt.d/smt-cron.conf</span> <a title="Permalink" class="permalink" href="#smt.config.cronconf">#</a></h3></div></div></div><p>

   

   The <code class="filename">/etc/smt.d/smt-cron.conf</code> configuration file
   contains options of the RMT commands launched as RMT scheduled jobs set
   with YaST (see  FIXME). Cron
   is used to launch these scheduled jobs. The cron table is located in the
   <code class="filename">/etc/cron.d/novell.com-smt</code> file.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140661794917408"><span class="term "><code class="option">SCC_SYNC_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt scc-sync</code> command, if
      called as part of an RMT scheduled job via cron. The default value
      is <code class="literal">"-L /var/log/smt/smt-sync.log --mail"</code>.
     </p></dd><dt id="idm140661820529712"><span class="term "><code class="option">MIRROR_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt mirror</code> command, if
      called as part of an RMT scheduled job via cron. The default value
      is <code class="literal">"-L /var/log/smt/smt-mirror.log --mail" </code>.
     </p></dd><dt id="idm140661820526608"><span class="term "><code class="option">REGISTER_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt register</code> command, if
      called as part of an RMT scheduled job via cron. The default value
      is <code class="literal">"-r -L /var/log/smt/smt-register.log --mail" </code>.
     </p></dd><dt id="idm140661820523504"><span class="term "><code class="option">REPORT_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters of the <code class="command">smt report</code> command, if
      called as part of an RMT scheduled job via cron. The default value
      is <code class="literal">"--mail --attach -L /var/log/smt/smt-report.log"
      </code>.
     </p></dd><dt id="idm140661820520400"><span class="term "><code class="option">JOBQUEUECLEANUP_PARAMS</code>
    </span></dt><dd><p>
      Contains parameters for smt jobqueue cleanup, if called as a part of
      an RMT scheduled job via cron. The default value is <code class="literal">"--mail
      -L /var/log/smt/smt-jobqueuecleanup.log"</code>.
     </p></dd></dl></div></div></div><div class="sect1 " id="smt.tools.cert"><div class="titlepage"><div><div><h2 class="title" id="smt.tools.cert"><span class="number">7.3 </span><span class="name">Server Certificates</span> <a title="Permalink" class="permalink" href="#smt.tools.cert">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_certificates.xml</li><li><span class="ds-label">ID: </span>smt.tools.cert</li></ul></div></div></div></div><p>
  For communication between the RMT server and client machines, the
  encrypted HTTPS protocol is used, requiring a server certificate. If the
  certificate is not available, or if clients are not configured to use the
  certificate, the communication between server and clients will fail.
 </p><p>
  Every client must be able to verify the server certificate by trusting the CA
  (certificate authority) certificate that signed the server certificate.
  Therefore, the RMT server provides a copy of the CA at
  <code class="filename">/srv/www/htdocs/smt.crt</code>. This CA can be downloaded from
  every client via the URL
  <code class="literal">http://<em class="replaceable ">FQDN</em>/smt.crt</code>. Whenever
  RMT is started with <code class="command">systemctl start smt.target</code>, it checks
  the certificate. If a new CA certificate exists, it is copied again.
  Therefore, whenever the CA certificate is missing or changed, restart RMT
  using the <code class="command">systemctl restart smt.target</code> command.
 </p><p>
  When the RMT Server module applies configuration changes, it checks for
  the existence of the common server certificate. If the certificate does
  not exist, YaST asks whether the certificate should be created. If the
  user confirms, the YaST CA Management module is started.
 </p><div class="sect2 " id="idm140661794553328"><div class="titlepage"><div><div><h3 class="title" id="idm140661794553328"><span class="number">7.3.1 </span><span class="name">Certificate Expiration</span> <a title="Permalink" class="permalink" href="#idm140661794553328">#</a></h3></div></div></div><p>
   The common server certificate RMT uses is valid for one year. After
   that time, a new certificate is needed. Either generate a new certificate
   using YaST CA Management module or import a new certificate using the
   YaST Common Server Certificate module. Both options are described in
   the following sections.
  </p><p> As long as the same CA certificate is used, there is no need to
      update certificates on the client machines. The generated CA
      certificate is valid for 10 years. </p></div><div class="sect2 " id="smt.certificate.creating"><div class="titlepage"><div><div><h3 class="title" id="smt.certificate.creating"><span class="number">7.3.2 </span><span class="name">Creating a New Common Server Certificate</span> <a title="Permalink" class="permalink" href="#smt.certificate.creating">#</a></h3></div></div></div><p>
   To create a new common server certificate with YaST, proceed as
   follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST and select <span class="guimenu">Security and
     Users</span> › <span class="guimenu">CA Management</span>.
     Alternatively, start the YaST CA Management module from a command
     line by entering <code class="command">yast2 ca_mgm</code> as <code class="systemitem">root</code>.
    </p></li><li class="step "><p>
     Select the required CA and click <span class="guimenu">Enter CA</span>.
    </p></li><li class="step "><p>
     Enter the password if entering a CA for the first time. YaST displays
     the CA key information in the <span class="guimenu">Description</span> tab.
    </p></li><li class="step "><p>
     Click the <span class="guimenu">Certificates</span> tab (see
     <a class="xref" href="#fig.yast.ca_cert" title="Certificates of a CA">Figure 7.1, “Certificates of a CA”</a>) and select <span class="guimenu">Add</span> › <span class="guimenu">Add Server Certificate</span>.
    </p><div class="figure" id="fig.yast.ca_cert"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_ca_cert.png"><img src="images/yast2_ca_cert.png" width="" alt="Certificates of a CA" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 7.1: </span><span class="name">Certificates of a CA </span><a title="Permalink" class="permalink" href="#fig.yast.ca_cert">#</a></h6></div></div></li><li class="step " id="step.new.cert1"><p> Enter the fully qualified domain name of the server as
            <span class="guimenu">Common Name</span>. Add a valid e-mail address
          of the server administrator. Other fields, such as
            <span class="guimenu">Organization</span>, <span class="guimenu">Organizational
            Unit</span>, <span class="guimenu">Locality</span>, and
            <span class="guimenu">State</span> are optional. Click
            <span class="guimenu">Next</span> to proceed.</p><div id="idm140661796667520" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Host Name in Server Certificate</h6><p>
      The server certificate must contain the correct host name. If the
      client requests server <code class="literal">https://some.hostname/</code>, then
      <code class="literal">some.hostname</code> must be part of the certificate. The
      host name must either be used as the <span class="guimenu">Common Name</span>,
      see <a class="xref" href="#step.new.cert1" title="Step 5">Step 5</a>, or as the <span class="guimenu">Subject
      Alternative Name</span>, see <a class="xref" href="#step.new.cert2" title="Step 7">Step 7</a>:
      <code class="literal">DNS:some.hostname</code> and
      <code class="literal">IP:<em class="replaceable ">&lt;ipaddress&gt;</em></code>.
     </p></div></li><li class="step "><p> Enter a <span class="guimenu">Password</span> for the private key of
          the certificate and re-enter it in the next field to verify
          it. </p></li><li class="step " id="step.new.cert2"><p>
     If you want to define a <span class="guimenu">Subject Alternative Name</span>,
     click <span class="guimenu">Advanced Options</span>, select <span class="guimenu">Subject
     Alternative Name</span> from the list and click
     <span class="guimenu">Add</span>.
    </p><div id="idm140661796657280" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Subject Alternative Name</h6><p>
      If <span class="guimenu">Subject Alternative Name</span> be in the server certificate,
      then it needs to contain the DNS entry. If <span class="guimenu">Subject Alternative Name</span> is present,
      the <span class="guimenu">Common Name</span> (CN) is not checked anymore.
     </p></div></li><li class="step "><p>
     If you want to keep the default values for the other options, like
     <span class="guimenu">Key Length</span> and <span class="guimenu">Valid Period</span>,
     click <span class="guimenu">Next</span>. An overview of the certificate to be
     created is shown.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Create</span> to generate the certificate.
    </p></li><li class="step "><p>
     To export the new certificate as the common server certificate, select
     it in the <span class="guimenu">Certificates</span> tab and select <span class="guimenu">Export</span> › <span class="guimenu">Export as Common Server
     Certificate</span>.
    </p></li><li class="step "><p>
     After having created a new certificate, restart RMT using the
     <code class="command">systemctl restart smt.target</code> command. Restarting
     RMT ensures that the new certificate is copied from
     <code class="filename">/etc/ssl/certs/YaST-CA.pem</code> to
     <code class="filename">/srv/www/htdocs/smt.crt</code>, the copy RMT uses.
     Restarting RMT also restarts the Web server.
    </p></li></ol></div></div><p> For detailed information about managing certification and
      further usage of the YaST CA Management module and the Common
      Server Certificate module, refer to the <em class="citetitle "><em class="citetitle ">Security Guide</em></em>.
   It si available from <a class="link" href="https://www.suse.com/documentation/sles-12" target="_blank">https://www.suse.com/documentation/sles-12</a>.</p></div><div class="sect2 " id="smt.certificate.importing"><div class="titlepage"><div><div><h3 class="title" id="smt.certificate.importing"><span class="number">7.3.3 </span><span class="name">Importing a Common Server Certificate</span> <a title="Permalink" class="permalink" href="#smt.certificate.importing">#</a></h3></div></div></div><p>
   You can import an own common server certificate from a file. The
   certificate to be imported needs to be in the PKCS12 format with CA chain.
   Common server certificates can be imported with the YaST Common Server
   Certificate module.
  </p><p>
   To import an own certificate with YaST, proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST and select <span class="guimenu">Security and
     Users</span> › <span class="guimenu">Common Server Certificate</span>. Alternatively, start the YaST Common Server
     Certificate module from the command line by entering <code class="command">yast2
     common_cert</code> as <code class="systemitem">root</code>.
    </p><p>
     The description of the currently used common server certificate is
     shown in the dialog that opens.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Import</span> and select the file containing the
     certificate to be imported. Specify the certificate password in the
     <span class="guimenu">Password</span> field.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Next</span>. If the certificate is successfully
     imported, close YaST with <span class="guimenu">Finish</span>.
    </p></li><li class="step "><p>
     After having created a new certificate, restart RMT using the
     <code class="command">systemctl restart smt.target</code> command. Restarting
     RMT ensures that the new certificate is copied from
     <code class="filename">/etc/ssl/certs/YaST-CA.pem</code> to
     <code class="filename">/srv/www/htdocs/smt.crt</code>, the copy RMT uses.
     Restarting RMT also restarts the Web server.
    </p></li></ol></div></div></div><div class="sect2 " id="idm140661813968656"><div class="titlepage"><div><div><h3 class="title" id="idm140661813968656"><span class="number">7.3.4 </span><span class="name">Synchronizing Time between RMT Server and Clients</span> <a title="Permalink" class="permalink" href="#idm140661813968656">#</a></h3></div></div></div><p>
   The synchronization of time between the RMT server and clients is
   highly recommended. Each server certificate has a validity period. If the
   client happens to be set to a time outside of this period, the
   certificate validation on the client side fails.
  </p><p>
   Therefore, it is advisable to keep the time on the server and clients
   synchronized. You can easily synchronize the time using NTP (network time
   protocol). Use <code class="command">yast2 ntp-client</code> to configure an NTP
   client. Find detailed information about NTP in the <em class="citetitle ">Administration Guide</em>.
  </p></div></div></div><div class="chapter " id="smt.advanced"><div class="titlepage"><div><div><h1 class="title"><span class="number">8 </span><span class="name">Advanced Topics</span> <a title="Permalink" class="permalink" href="#smt.advanced">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_advanced.xml</li><li><span class="ds-label">ID: </span>smt.advanced</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#smt.backup"><span class="number">8.1 </span><span class="name">Backup of the RMT Server</span></a></span></dt><dt><span class="sect1"><a href="#smt.disconnected"><span class="number">8.2 </span><span class="name">Disconnected RMT Servers</span></a></span></dt></dl></div></div><p>
  This chapter covers usage scenarios beyond the regular workflow to
  give you more control over your RMT server.
 </p><div class="sect1 " id="smt.backup"><div class="titlepage"><div><div><h2 class="title" id="smt.backup"><span class="number">8.1 </span><span class="name">Backup of the RMT Server</span> <a title="Permalink" class="permalink" href="#smt.backup">#</a></h2></div></div></div><p>
   Creating backups of the RMT server regularly can help restore it quickly
   and reliably if the server fails.
  </p><p>
   There are three main parts on the RMT server to back up:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Configuration files
    </p></li><li class="listitem "><p>
     Package repositories
    </p></li><li class="listitem "><p>
     The database
    </p></li></ul></div><div class="sect2 " id="smt.backup.conf_files"><div class="titlepage"><div><div><h3 class="title" id="smt.backup.conf_files"><span class="number">8.1.1 </span><span class="name">Configuration Files and Repositories</span> <a title="Permalink" class="permalink" href="#smt.backup.conf_files">#</a></h3></div></div></div><p>
    The RMT server configuration is stored in the
    <code class="filename">/etc/smt.conf</code> file and files in the
    <code class="filename">/etc/smt.d</code> directory.
   </p><p>
    As RMT depends on the services provided by the Apache Web server and
    MariaDB database engine, you need to back up their configuration files as
    well. Apache configuration files are located in the
    <code class="filename">/etc/apache2</code> directory, while configuration of
    MariaDB is stored in <code class="filename">/etc/my.cnf</code>,
    <code class="filename">/etc/mysqlaccess.conf</code>, and files in the
    <code class="filename">/etc/my.cnf.d</code> directory.
   </p><p>
    Package repositories are stored in the
    <code class="filename">/srv/www/htdocs/repo</code> directory. While you can
    normally mirror the repositories on the restored server from the update
    server as well, the download can take a long time. Therefore backing up the
    repositories can save you time and bandwidth.
   </p><div id="idm140661821401376" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Size of the Repositories</h6><p>
     The software repositories can be significant in size, and you will need to
     transfer them from the update server.
    </p></div><p>
    Use your preferred tool to back up the configuration and repository files.
   </p></div><div class="sect2 " id="smt.backup.db"><div class="titlepage"><div><div><h3 class="title" id="smt.backup.db"><span class="number">8.1.2 </span><span class="name">The Database</span> <a title="Permalink" class="permalink" href="#smt.backup.db">#</a></h3></div></div></div><p>
    RMT uses the MariaDB database to store information about clients,
    registrations, machine data, which repositories are enabled for mirroring, and
    custom repositories. Unlike the configuration files and repositories, the
    database information cannot be recovered without a valid backup.
   </p><p>
    To back up the RMT database, you can for example create a cron job that
    performs an SQL dump into a plain text file:
   </p><div class="verbatim-wrap"><pre class="screen">mysqldump -u root -p <em class="replaceable ">SMT_DB_PASSWORD</em> smt &gt; /<em class="replaceable ">BACKUP_DIR</em>/smt-db-backup.sql</pre></div><p>
    Then add the resulting file to your regular backup jobs.
   </p></div></div><div class="sect1 " id="smt.disconnected"><div class="titlepage"><div><div><h2 class="title" id="smt.disconnected"><span class="number">8.2 </span><span class="name">Disconnected RMT Servers</span> <a title="Permalink" class="permalink" href="#smt.disconnected">#</a></h2></div></div></div><p>

   

   In some restricted environments it is not possible for RMT servers to
   access the Internet because they are located on disconnected or isolated
   networks. In this case, you can back up the relevant data on an external
   storage device using special parameters with the RMT commands.
  </p><p>
   You need an external RMT server that mirrors the repositories
   from SUSE Customer Center. Then you can transfer these repositories to the RMT servers on
   the isolated network using the external storage device.
  </p><div class="figure" id="idm140661816302000"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/smt_disconnected.png"><img src="images/smt_disconnected.png" width="" alt="RMT Disconnected Setup" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.1: </span><span class="name">RMT Disconnected Setup </span><a title="Permalink" class="permalink" href="#idm140661816302000">#</a></h6></div></div><p>
   Although the initial setup of this solution requires additional
   configuration, the regular update synchronization with SUSE Customer Center and
   distribution to isolated servers is simple. The steps required during the
   initial setup are as follows:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Installing and configuring the external RMT server
    </p></li><li class="listitem "><p>
     Installing the internal server
    </p></li><li class="listitem "><p>
     Editing <code class="filename">/etc/smt.conf</code> and setting up a cron job on the
     internal RMT server
    </p></li><li class="listitem "><p>
     Transferring the SUSE Customer Center data from the external RMT server  to
     the internal server
    </p></li><li class="listitem "><p>
     Enabling and disabling repositories on the internal server
    </p></li><li class="listitem "><p>
     Creating an RMT database replacement file on the
     internal server—when performing the mirror jobs, the file can be used
     instead of the normal MariaDB database
    </p></li></ul></div><p>
   Day-to-day operation requires the following actions:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Running the <code class="command">smt-mirror</code> job on the external
      server
    </p></li><li class="listitem "><p>
     Synchronizing the mirrored repositories from the external storage device to the
     internal RMT server
    </p></li></ul></div><p>
   Below is a detailed description of the individual steps.
  </p><div class="procedure " id="idm140661795860384"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.1: </span><span class="name">External RMT Server Configuration for the Disconnected Setup </span><a title="Permalink" class="permalink" href="#idm140661795860384">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Install and configure RMT as described in
     <a class="xref" href="#smt.installation" title="Chapter 1. RMT Installation">Chapter 1, <em>RMT Installation</em></a>.
    </p></li><li class="step "><p>
     Enable the repositories for use by the internal RMT servers.
    </p></li><li class="step "><p>
     Perform a standard repository mirroring from SUSE Customer Center with
     <code class="command">smt-mirror</code>.
    </p></li><li class="step "><p>
     Attach a removable storage device to the server and mount it.
    </p></li><li class="step "><p>
     Export the required SUSE Customer Center data to a directory on the mounted storage device:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Create a directory with correct permissions for storing the data. Because
       the <code class="command">smt</code> commands run as the
       <code class="systemitem">smt</code> user (whose numeric UID
       can differ between the servers), you need to make permissions for
       the directories on the external storage device less restrictive:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>chmod o+w <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li><li class="step "><p>
       Export the SUSE Customer Center data:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-sync --todir <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li></ol></li><li class="step "><p>
     Create a directory with correct permissions:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mkdir <em class="replaceable ">/path/to/repository/on/storage/device</em>
<code class="prompt user">tux &gt; </code>chmod o+w <em class="replaceable ">/path/to/repository/on/storage/device</em></pre></div></li><li class="step "><p>
     Unmount and detach the storage device.
    </p></li></ol></div></div><div class="procedure " id="idm140661825553248"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.2: </span><span class="name">Internal RMT Server Configuration for the Disconnected Setup </span><a title="Permalink" class="permalink" href="#idm140661825553248">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Ensure you have a working SUSE Linux Enterprise Server installation source.
    </p></li><li class="step "><p>
     Install RMT the same way as on the external server with the following
     exceptions:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Select <span class="guimenu">Generate new SCC credentials</span> in the
       <span class="guimenu">SCC Credentials</span> dialog.
      </p></li><li class="step "><p>
       Ignore the error message when running the synchronization script in the
       <span class="guimenu">Writing SMT Configuration</span> phase of the wizard.
      </p></li><li class="step "><p>
       Abort the <span class="guimenu">SUSE Customer Center Configuration</span> wizard
       and click <span class="guimenu">OK</span> in the list of installed add-on
       products.
      </p></li></ol></li><li class="step "><p>
     Re-launch the YaST Repository Management Tool Server Configuration module (<code class="command">yast2
     smt-server</code>) and go to the<span class="guimenu"> Scheduled SMT Jobs</span>
     tab.
    </p></li><li class="step "><p>
     Delete <code class="literal">SCC Registration</code> and <code class="literal">Synchronization of Updates</code> jobs.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span> to finish the wizard, provide the RMT
     user password, and acknowledge the synchronization error again.
    </p></li><li class="step "><p>
     Prevent registration data upstream synchronization to SUSE Customer Center by setting
    </p><div class="verbatim-wrap"><pre class="screen">forwardRegistration = false</pre></div><p>
     in <code class="filename">/etc/smt.conf</code>.
    </p></li><li class="step "><p>
     Connect an external storage device and mount it.
    </p></li><li class="step "><p>
     Populate the RMT database with the previously created SUSE Customer Center data:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-sync --fromdir <em class="replaceable ">/path/to/scc/dir/on/mobile/disk</em></pre></div></li><li class="step "><p>
     Enable mirroring of the desired repositories using the <code class="command">smt-repos
     -e</code> command.
    </p></li><li class="step "><p>
     Create a database replacement file on the external storage device:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-sync --createdbreplacementfile <em class="replaceable ">/path/to/dbrepl/file/on/mobile/disk</em></pre></div></li><li class="step "><p>
     Unmount and detach the storage device.
    </p></li></ol></div></div><p>
   Now the configuration of both the external and internal RMT servers is
   complete. However, the update repository is still empty. After you run the
   following daily operation routines for the first time, the repository will
   be synchronized, and the internal RMT server will be ready to serve clients.
  </p><div class="procedure " id="idm140661816382928"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.3: </span><span class="name">Daily External RMT Server Operation </span><a title="Permalink" class="permalink" href="#idm140661816382928">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Connect an external storage device and mount it.
    </p></li><li class="step "><p>
     Perform a mirror to a directory on the storage device based on the file
     stored on it:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-mirror --dbreplfile <em class="replaceable ">/path/to/dbrepl/file/on/storage/device</em> \
 --fromlocalsmt --directory <em class="replaceable ">/path/to/repository/on/storage/device</em> \
 -L /var/log/smt/smt-mirror-example.log</pre></div></li><li class="step "><p>
     Update the database on the storage device with the product and subscription
     info from SUSE Customer Center:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-sync --todir <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li><li class="step "><p>
     Optionally, scan the storage device for viruses and other unwanted content.
    </p></li><li class="step "><p>
     Unmount and disconnect the storage device.
    </p></li></ol></div></div><div class="procedure " id="idm140661794475488"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.4: </span><span class="name">Daily Internal RMT Server Operation </span><a title="Permalink" class="permalink" href="#idm140661794475488">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Connect a storage device and mount it.
    </p></li><li class="step "><p>
     Update the SUSE Customer Center data on the server:
    </p><div class="verbatim-wrap"><pre class="screen">smt-sync --fromdir <em class="replaceable ">/path/to/scc/dir/on/storage/device</em></pre></div></li><li class="step "><p>
     Mirror from the storage device to the server:
    </p><div class="verbatim-wrap"><pre class="screen">smt-mirror --fromdir <em class="replaceable ">/path/to/repository/on/storage/device</em></pre></div></li><li class="step "><p>
     Update the SUSE Customer Center data on the storage device with local changes in the mirror
     status since the last synchronization:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-sync --createdbreplacementfile <em class="replaceable ">/path/to/dbrepl/file/on/storage/device</em></pre></div></li><li class="step "><p>
     Unmount and disconnect the storage device.
    </p></li></ol></div></div></div></div></div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>