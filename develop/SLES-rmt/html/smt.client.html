<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring Clients to Use RMT | Repository Management Tool for SLES 15 | SUSE Linux Enterprise Server 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="15" /><meta name="book-title" content="Repository Management Tool for SLES 15" /><meta name="chapter-title" content="Chapter 6. Configuring Clients to Use RMT" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Server 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="index.html" title="Repository Management Tool for SLES 15" /><link rel="prev" href="smt.registration.html" title="Chapter 5. Managing Client Machines with RMT" /><link rel="next" href="smt.tools.html" title="Chapter 7. RMT Tools and Configuration Files" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="index.html">RMT Guide</a><span> › </span><a class="crumb" href="smt.client.html">Configuring Clients to Use RMT</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Repository Management Tool for SLES 15</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pre_smt.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="smt.installation.html"><span class="number">1 </span><span class="name">RMT Installation</span></a></li><li class="inactive"><a href="smt.server.html"><span class="number">2 </span><span class="name">RMT Server Configuration</span></a></li><li class="inactive"><a href="smt.mirroring.html"><span class="number">3 </span><span class="name">Mirroring Repositories on the RMT Server</span></a></li><li class="inactive"><a href="smt.management.html"><span class="number">4 </span><span class="name">Managing Repositories with YaST RMT Server Management</span></a></li><li class="inactive"><a href="smt.registration.html"><span class="number">5 </span><span class="name">Managing Client Machines with RMT</span></a></li><li class="inactive"><a href="smt.client.html"><span class="number">6 </span><span class="name">Configuring Clients to Use RMT</span></a></li><li class="inactive"><a href="smt.tools.html"><span class="number">7 </span><span class="name">RMT Tools and Configuration Files</span></a></li><li class="inactive"><a href="smt.advanced.html"><span class="number">8 </span><span class="name">Advanced Topics</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 5. Managing Client Machines with RMT" href="smt.registration.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. RMT Tools and Configuration Files" href="smt.tools.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="index.html">RMT Guide</a><span> › </span><a class="crumb" href="smt.client.html">Configuring Clients to Use RMT</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 5. Managing Client Machines with RMT" href="smt.registration.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. RMT Tools and Configuration Files" href="smt.tools.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="smt.client"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h1 class="title"><span class="number">6 </span><span class="name">Configuring Clients to Use RMT</span> </h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rmt_client.xml</li><li><span class="ds-label">ID: </span>smt.client</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="smt.client.html#smt.client.parameters"><span class="number">6.1 </span><span class="name">Using linuxrc Parameters to Access an RMT Server</span></a></span></dt><dt><span class="sect1"><a href="smt.client.html#smt.client.autoyast"><span class="number">6.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span></a></span></dt><dt><span class="sect1"><a href="smt.client.html#smt.client.clientsetupscript"><span class="number">6.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script</span></a></span></dt><dt><span class="sect1"><a href="smt.client.html#smt.client.yast"><span class="number">6.4 </span><span class="name">Configuring Clients with YaST</span></a></span></dt><dt><span class="sect1"><a href="smt.client.html#smt.clients.repolist"><span class="number">6.5 </span><span class="name">Listing Accessible Repositories</span></a></span></dt><dt><span class="sect1"><a href="smt.client.html#smt.client.onlinemigration"><span class="number">6.6 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span></a></span></dt><dt><span class="sect1"><a href="smt.client.html#smt.clients.rhel"><span class="number">6.7 </span><span class="name">How to Update Red Hat Enterprise Linux with RMT</span></a></span></dt></dl></div></div><p>
  Any machine running SUSE Linux Enterprise 12 or newer can be configured to register against
  RMT and download software updates from there, instead of communicating
  directly with SUSE Customer Center or Novell Customer Center.
 </p><p>
  If your network includes an RMT server to provide a local update source,
  you need to equip the client with the server's URL. As client and server
  communicate via the HTTPS protocol during registration, you also need to make
  sure the client trusts the server's certificate. In case you set up your
  RMT server to use the default server certificate, the CA certificate will
  be available on the RMT server at
  <code class="literal">http://<em class="replaceable ">FQDN</em>/smt.crt</code> .
 </p><p>
  If the certificate is not issued by a well-trusted authority, it will be
  downloaded automatically from RMT. In this case, the client displays the
  new certificate details (its fingerprint), and you need to accept the
  certificate.
 </p><p>
  There are several ways to provide the registration information and to
  configure the client machine to use RMT:
 </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
    Provide the required information via kernel parameters at boot time
    (<a class="xref" href="smt.client.html#smt.client.parameters" title="6.1. Using linuxrc Parameters to Access an RMT Server">Section 6.1, “Using linuxrc Parameters to Access an RMT Server”</a>).
   </p></li><li class="listitem "><p>
    Configure the clients using an AutoYaST profile
    (<a class="xref" href="smt.client.html#smt.client.autoyast" title="6.2. Configuring Clients with AutoYaST Profile">Section 6.2, “Configuring Clients with AutoYaST Profile”</a>).
   </p></li><li class="listitem "><p>
    Use the <code class="command">clientSetup4SMT.sh</code> script
    (<a class="xref" href="smt.client.html#smt.client.clientsetupscript" title="6.3. Configuring Clients with the clientSetup4SMT.sh Script">Section 6.3, “Configuring Clients with the clientSetup4SMT.sh Script”</a>). This script can be run on
    a client to make it register against a specified RMT server.
   </p></li><li class="listitem "><p>
    You can set the RMT server URL with the YaST
    registration module during installation
    (<a class="xref" href="smt.client.html#smt.client.yast" title="6.4. Configuring Clients with YaST">Section 6.4, “Configuring Clients with YaST”</a>).
   </p></li></ol></div><p>
  These methods are described in the following sections.
 </p><div class="sect1 " id="smt.client.parameters"><div class="titlepage"><div><div><h2 class="title" id="smt.client.parameters"><span class="number">6.1 </span><span class="name">Using linuxrc Parameters to Access an RMT Server</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.parameters">#</a></h2></div></div></div><p>
   Any client can be configured to use RMT by providing the
   <code class="literal">regurl</code> parameter during machine boot.
  </p><p>
   The parameter needs to be entered as
   <code class="literal">regurl=<em class="replaceable ">SMT_SERVER_URL</em></code>. The URL
   needs to be in the following format:
   <code class="literal">https://<em class="replaceable ">FQDN</em>/connect/</code> with
   <em class="replaceable ">FQDN</em> being the fully qualified host name of the
   RMT server. It must be identical to the FQDN of the server certificate
   used on the RMT server. Example:
  </p><div class="verbatim-wrap"><pre class="screen">regurl=https://smt.example.com/connect/</pre></div><div id="idm140081549152048" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Beware of Typing Errors</h6><p>
    Make sure the values you enter are correct. If <code class="literal">regurl</code>
    has not been specified correctly, the registration of the update source
    will fail.
   </p></div><div id="idm140081549150144" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Change of RMT Server Certificate</h6><p>
    If the RMT server gets a new certificate from an untrusted CA, the
    clients need to retrieve the new CA certificate file.  YaST displays a
    dialog for importing a new certificate. If you confirm importing the new
    certificate, the old one is replaced with the new one.
   </p></div></div><div class="sect1 " id="smt.client.autoyast"><div class="titlepage"><div><div><h2 class="title" id="smt.client.autoyast"><span class="number">6.2 </span><span class="name">Configuring Clients with AutoYaST Profile</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.autoyast">#</a></h2></div></div></div><p>
   Clients can be configured to register with RMT server via AutoYaST profile.
   For general information about creating AutoYaST profiles and preparing automatic
   installation, refer to the <span class="emphasis"><em>AutoYaST Guide</em></span>. In this section,
   only RMT specific configuration is described.
  </p><p>
   To configure RMT specific data using AutoYaST, follow the steps for the
   relevant version of RMT client.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      As <code class="systemitem">root</code>, start YaST and select <span class="guimenu">Miscellaneous</span> › <span class="guimenu">Autoinstallation</span> to start the graphical AutoYaST front-end.
     </p><p>
      From a command line, you can start the graphical AutoYaST front-end with the
      <code class="command">yast2 autoyast</code> command.
     </p></li><li class="step "><p>
      Open an existing profile using <span class="guimenu">File</span> › <span class="guimenu">Open</span>, create a profile based on the
      current system's configuration using <span class="guimenu">Tools</span> › <span class="guimenu">Create Reference Profile</span>, or work with an empty profile.
     </p></li><li class="step "><p>
      Select <span class="guimenu">Software</span> › <span class="guimenu">Product
      Registration</span>. An overview of the current
      configuration is shown.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Edit</span>.
     </p></li><li class="step "><p>
      Check <span class="guimenu">Register the Product</span>, set the URL of the RMT
      server in <span class="guimenu">Use Specific Server URL Instead of the
      Default</span>, and you can set the <span class="guimenu">Optional SSL Server
      Certificate URL</span>. The possible values for the server URL are the
      same as for the kernel parameter <code class="literal">regurl</code>. For the SSL
      certificate location, you can use either HTTP or HTTPS based URLs.
     </p></li><li class="step "><p>
      Perform all other configuration needed for the systems to be deployed,
      then click <span class="guimenu">Finish</span> to return to the main screen.
     </p></li><li class="step "><p>
      Select <span class="guimenu">File</span> › <span class="guimenu">Save As</span> and enter a file name for the profile, such as
      <code class="filename">autoinst.xml</code>.
     </p></li></ol></div></div></div><div class="sect1 " id="smt.client.clientsetupscript"><div class="titlepage"><div><div><h2 class="title" id="smt.client.clientsetupscript"><span class="number">6.3 </span><span class="name">Configuring Clients with the clientSetup4SMT.sh Script</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.clientsetupscript">#</a></h2></div></div></div><p>
   The <code class="command">/usr/share/doc/packages/smt/clientSetup4SMT.sh</code> script
   is provided together with RMT. This script allows you to configure a
   client machine to use an RMT server. It can also be used to reconfigure an
   existing client to use a different RMT server.
  </p><div id="idm140081548635536" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Installation of <code class="command">wget</code></h6><p>
    The script <code class="filename">clientSetup4SMT.sh</code> itself uses
    <code class="command">wget</code>, so <code class="command">wget</code> must be installed on
    the client.
   </p></div><p>
   To configure a client machine to use RMT with the
   <code class="command">clientSetup4SMT.sh</code> script, follow these steps:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Copy the <code class="filename">clientSetup4SMT.sh</code> script from your RMT
     server to the client machine. The script is available at
     <code class="filename">&lt;SMT_HOSTNAME&gt;/repo/tools/clientSetup4SMT.sh</code>
     and <code class="filename">/srv/www/htdocs/repo/tools/clientSetup4SMT.sh</code>.
     You can download it with a browser, using <code class="command">wget</code>, or by
     another means, such as with <code class="command">scp</code>.
    </p></li><li class="step "><p>
     As <code class="systemitem">root</code>, execute the script on the client machine. The script can be
     executed in two ways. In the first case, the script name is followed by
     the registration URL. For example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>./clientSetup4SMT.sh https://smt.example.com/center/regsvc</pre></div><p>
     In the second case, the script uses the <code class="option">--host</code> option
     followed by the host name of the RMT server, and
     <code class="option">--regcert</code> followed by the URL of the SSL certificate; for
     example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>./clientSetup4SMT.sh --host smt.example.com \
  --regcert http://smt.example.com/certs/smt.crt</pre></div><p>
     In this case, without any <span class="quote">“<span class="quote">namespace</span>”</span> specified, the client
     will be configured to use the default production repositories. If
     <code class="option">--namespace <em class="replaceable ">GROUPNAME</em></code> is
     specified, the client will use that staging group.
    </p></li><li class="step "><p>
     The script downloads the server's CA certificate. Accept it by pressing
     <span class="keycap">Y</span>.
    </p></li><li class="step "><p>
     The script performs all necessary modifications on the client. However,
     the registration itself is not performed by the script.
    </p></li><li class="step "><p>
     The script downloads and asks to accept additional GPG keys to sign
     repositories with.
    </p></li><li class="step "><p>
     Perform the registration by executing
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> SUSEConnect -p <em class="replaceable ">PRODUCT_NAME</em> --url <em class="replaceable ">https://smt.example.org</em></pre></div><p>
     or running the <code class="command">yast2 registration</code> (SUSE Linux Enterprise Server 12 SP1 and newer) or
     <code class="command">yast2 scc</code> (SUSE Linux Enterprise Server 12) module on the client.
    </p></li></ol></div></div><p>
   This script is also provided for download. You can get it by running
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>wget http://smt.example.com/repo/tools/clientSetup4SMT.sh</pre></div><div id="idm140081553003104" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Extension and Module Registration</h6><p>
    When registering an existing system against RMT—both on the
    command line and using YaST—you need to register additional
    extensions and modules separately, one by one. This applies both to
    already installed extensions and to extensions that you plan to install.
   </p></div><div class="sect2 " id="idm140081550720384"><div class="titlepage"><div><div><h3 class="title" id="idm140081550720384"><span class="number">6.3.1 </span><span class="name">Problems Downloading GPG Keys from the Server</span> <a title="Permalink" class="permalink" href="smt.client.html#idm140081550720384">#</a></h3></div></div></div><p>
    The <code class="literal">apache2-example-pages</code> package includes a
    <code class="filename">robots.txt</code> file. The file is installed into the
    Apache2 document root directory, and controls how clients can access files
    from the Web server. If this package is installed on the server,
    <code class="filename">clientSetup4SMT.sh</code> fails to download the keys stored
    under <code class="filename">/repo/keys</code>.
   </p><p>
    You can solve this problem by either editing
    <code class="filename">robots.txt</code>, or uninstalling the
    <code class="literal">apache2-example-pages</code> package.
   </p><p>
    If you choose to edit the <code class="filename">robots.txt</code> file, add before
    the <code class="literal">Disallow: /</code> statement:
   </p><div class="verbatim-wrap"><pre class="screen">Allow: /repo/keys</pre></div></div></div><div class="sect1 " id="smt.client.yast"><div class="titlepage"><div><div><h2 class="title" id="smt.client.yast"><span class="number">6.4 </span><span class="name">Configuring Clients with YaST</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.yast">#</a></h2></div></div></div><p>
    To configure a client to perform the registration against an RMT server
    use the YaST <span class="guimenu">Product Registration</span> module
    <code class="command">yast2 registration</code>.
   </p><p>
    On the client, the credentials are not necessary and you may leave the
    relevant fields empty. Click <span class="guimenu">Local Registration Server</span>
    and enter its URL. Then click <span class="guimenu">Next</span> until the exit from
    the module.
   </p></div><div class="sect1 " id="smt.clients.repolist"><div class="titlepage"><div><div><h2 class="title" id="smt.clients.repolist"><span class="number">6.5 </span><span class="name">Listing Accessible Repositories</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.clients.repolist">#</a></h2></div></div></div><p>
   To retrieve the accessible repositories for a client, download
   <code class="filename">repo/repoindex.xml</code> from the RMT server with the
   client's credentials. The credentials are stored in
   <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> on the
   client machine. Using <code class="command">wget</code>, the command for testing could
   be as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>wget https://<em class="replaceable ">USER</em>:<em class="replaceable ">PASS</em>@smt.example.com/repo/repoindex.xml</pre></div><p>
   <code class="filename">repoindex.xml</code> returns the complete repository list as
   they come from the vendor. If a repository is marked for staging,
   <code class="filename">repoindex.xml</code> lists the repository in the
   <code class="literal">full</code> namespace (<code class="filename">repos/full/$RCE</code>).
  </p><p>
   To get a list of all repositories available on the RMT server, use the
   credentials specified in the <code class="literal">[LOCAL]</code> section of
   <code class="filename">/etc/smt.conf</code> on the server as
   <code class="literal">mirrorUser</code> and <code class="literal">mirrorPassword</code>.
  </p></div><div class="sect1 " id="smt.client.onlinemigration"><div class="titlepage"><div><div><h2 class="title" id="smt.client.onlinemigration"><span class="number">6.6 </span><span class="name">Online Migration of SUSE Linux Enterprise Clients</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.onlinemigration">#</a></h2></div></div></div><p>
   SUSE Linux Enterprise clients registered against RMT can be migrated online to the latest
   service pack of the same major release the same way as clients registered
   against SUSE Customer Center or Novell Customer Center. Before starting the migration, make
   sure that RMT is configured to provide the correct version of repositories
   to which you need the clients to migrate.
  </p><p>
   For detailed information on online migration, see <span class="intraxref">Book “Upgrade Guide”, Chapter 2 “Upgrade Paths and Methods”</span>.
  </p></div><div class="sect1 " id="smt.clients.rhel"><div class="titlepage"><div><div><h2 class="title" id="smt.clients.rhel"><span class="number">6.7 </span><span class="name">How to Update Red Hat Enterprise Linux with RMT</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.clients.rhel">#</a></h2></div></div></div><p>

   

   RMT enables customers that possess the required entitlements to mirror
   updates for Red Hat Enterprise Linux (RHEL). Refer to
   <a class="link" href="http://www.suse.com/products/expandedsupport/" target="_blank">http://www.suse.com/products/expandedsupport/</a> for
   details on SUSE Linux Enterprise Server Subscription with Expanded Support. This section discusses
   the actions required to configure the RMT server and clients (RHEL
   servers) for this solution.
  </p><div id="idm140081544216528" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: SUSE Linux Enterprise Server 10</h6><p>
    Configuring RHEL client with Subscription Management Tool for SUSE Linux Enterprise (RMT
    1.0) running SUSE Linux Enterprise Server 10 is slightly different. For more information, see
    <a class="link" href="http://www.novell.com/support/search.do?usemicrosite=true&amp;searchString=7001751" target="_blank">How
    to update Red Hat Enterprise Linux with RMT.</a>
   </p></div><div class="sect2 " id="smt.client.rhel.server"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.server"><span class="number">6.7.1 </span><span class="name">How to Prepare RMT Server for Mirroring and Publishing Updates for RHEL</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.rhel.server">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install SUSE Linux Enterprise Server (SLES) with the RMT packages as per the documentation on
      the respective products.
     </p></li><li class="step "><p>
      During RMT setup, use organization credentials that have access to
      Novell-provided RHEL update repositories.
     </p></li><li class="step "><p>
      Verify that the organization credentials have access to download updates
      for the Red Hat products with
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -m | grep RES</pre></div></li><li class="step "><p>
      Enable mirroring of the RHEL update repositories for the desired
      architecture(s):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-repos -e <em class="replaceable ">REPO-NAME</em> <em class="replaceable ">ARCHITECTURE</em></pre></div></li><li class="step "><p>
      Mirror the updates and log verbose output:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> smt-mirror -d -L /var/log/smt/smt-mirror.log</pre></div><p>
      The updates for RHEL will also be mirrored automatically as part of the
      default nightly RMT mirroring cron job. When the mirror process of the
      repositories for your RHEL products has completed, the updates are available
      via
     </p><div class="verbatim-wrap"><pre class="screen">http://smt-server.your-domain.top/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/</pre></div></li><li class="step "><p>
      To enable GPG checking of the repositories, the key used to sign the
      repositories needs to be made available to the RHEL clients. This key is
      now available in the res-signingkeys package, which is included in the
      RMT installation source.
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        Install the <code class="literal">res-signingkeys</code> package with the command
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper in -y res-signingkeys</pre></div></li><li class="listitem "><p>
        The installation of the package stores the key file as
        <code class="filename">/srv/www/htdocs/repo/keys/res-signingkeys.key</code>.
       </p></li><li class="listitem "><p>
        Now the key is available to the clients and can be imported into their
        RPM database as described later.
       </p></li></ul></div></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.yum"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.yum"><span class="number">6.7.2 </span><span class="name">How to Configure the YUM Client on RHEL 5.2 to Receive Updates from RMT</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.rhel.yum">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Import the repository signing key downloaded above into the local RPM
      database with
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm --import http://<em class="replaceable ">smt.example.com</em>/repo/keys/res-signingkeys.key</pre></div></li><li class="step "><p>
      Create a file in <code class="filename">/etc/yum.repos.d/</code> and name it
      <code class="literal">RES5.repo</code>.
     </p></li><li class="step "><p>
      Edit the file and enter the repository data, and point to the repository on
      the RMT server as follows:
     </p><div class="verbatim-wrap"><pre class="screen">[smt]
name=SMT repository
baseurl=http://<em class="replaceable ">smt.example.com</em>/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/
enabled=1
gpgcheck=1</pre></div><p>
      Example of base URL:
     </p><div class="verbatim-wrap"><pre class="screen">http://smt.mycompany.com/repo/$RCE/RES5/i386/</pre></div></li><li class="step "><p>
      Save the file.
     </p></li><li class="step "><p>
      Disable standard Red Hat repositories by setting
     </p><div class="verbatim-wrap"><pre class="screen">enabled=0</pre></div><p>
      in the repository entries in other files in
      <code class="filename">/etc/yum.repos.d/</code> (if any are enabled).
     </p><p>
      Both YUM and the update notification applet should work correctly now and
      notify of available updates when applicable. You may need to restart the
      applet.
     </p></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.up2date"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.up2date"><span class="number">6.7.3 </span><span class="name">How to Configure the UP2DATE Client on RHEL 3.9 and 4.7 to Receive Updates from RMT</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.rhel.up2date">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Import the repository signing key downloaded above into the local RPM
      database with
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm --import http://<em class="replaceable ">smt.example.com</em>/repo/keys/res-signingkeys.key</pre></div></li><li class="step "><p>
      Edit the file <code class="filename">/etc/sysconfig/rhn/sources</code> and make
      the following changes:
     </p></li><li class="step "><p>
      Comment out any lines starting with <code class="literal">up2date</code>.
     </p><p>
      Normally, there will be a line that says "up2date default".
     </p></li><li class="step "><p>
      Add an entry pointing to the RMT repository (all in one line):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yum <em class="replaceable ">REPO_NAME</em> http://<em class="replaceable ">smt.example.com</em>/repo/$RCE/<em class="replaceable ">REPOSITORY_NAME</em>/<em class="replaceable ">ARCHITECTURE</em>/</pre></div><p>
      where <code class="literal">repo-name</code> should be set to RES3 for 3.9 and RES4
      for 4.7.
     </p></li><li class="step "><p>
      Save the file.
     </p></li></ol></div></div><p>
    Both up2date and the update notification applet should work correctly now,
    pointing to the RMT repository and indicating updates when available. In
    case of trouble, try to restart the applet.
   </p><p>
    To ensure correct reporting of the Red Hat Enterprise systems in SUSE Customer Center,
    they need to be registered against your RMT server. For this a special
    suseRegisterRES package is provided through the RES* repositories and it should
    be installed, configured and executed as described below.
   </p></div><div class="sect2 " id="smt.client.rhel.rhel52"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.rhel52"><span class="number">6.7.4 </span><span class="name">How to Register RHEL 5.2 against RMT</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.rhel.rhel52">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the suseRegisterRES package.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yum install suseRegisterRES</pre></div><div id="idm140081553493920" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Packages</h6><p>
       You may need to install the <code class="literal">perl-Crypt-SSLeay</code> and
       <code class="literal">perl-XML-Parser</code> packages from the original RHEL
       media.
      </p></div></li><li class="step "><p>
      Copy the RMT certificate to the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> wget http://<em class="replaceable ">smt.example.com</em>/smt.crt</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cat smt.crt &gt;&gt; /etc/pki/tls/cert.pem</pre></div></li><li class="step "><p>
      Edit <code class="filename">/etc/suseRegister.conf</code> to point to RMT by
      changing the URL value to
     </p><div class="verbatim-wrap"><pre class="screen">url: https://<em class="replaceable ">smt.example.com</em>/center/regsvc/</pre></div><p>
      or (for SUSE Customer Center)
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/connect/</pre></div></li><li class="step "><p>
      Register the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> suse_register</pre></div></li></ol></div></div></div><div class="sect2 " id="smt.client.rhel.rhel4739"><div class="titlepage"><div><div><h3 class="title" id="smt.client.rhel.rhel4739"><span class="number">6.7.5 </span><span class="name">How to Register RHEL 4.7 and RHEL 3.9 against RMT</span> <a title="Permalink" class="permalink" href="smt.client.html#smt.client.rhel.rhel4739">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the <code class="literal">suseRegisterRES</code> package:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> up2date --get suseRegisterRES
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> up2date --get perl-XML-Writer
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm -ivh /var/spool/up2date/suseRegisterRES*.rpm /var/spool/up2date/perl-XML-Writer-0*.rpm</pre></div><div id="idm140081550626944" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Additional Packages</h6><p>
       You may need to install the <code class="literal">perl-Crypt-SSLeay</code> and
       <code class="literal">perl-XML-Parser</code> packages from the original RHEL
       media.
      </p></div></li><li class="step "><p>
      Copy the RMT certificate to the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> wget http://<em class="replaceable ">smt.example.com</em>/smt.crt</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cat smt.crt &gt;&gt; /usr/share/ssl/cert.pem</pre></div></li><li class="step "><p>
      Edit <code class="filename">/etc/suseRegister.conf</code> to point to RMT by
      changing the URL value to
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/center/regsvc/</pre></div><p>
      or (for SUSE Customer Center)
     </p><div class="verbatim-wrap"><pre class="screen">url = https://<em class="replaceable ">smt.example.com</em>/connect/</pre></div></li><li class="step "><p>
      Register the system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> suse_register</pre></div></li></ol></div></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="smt.tools.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 7 </span>RMT Tools and Configuration Files</span></a><a class="nav-link" href="smt.registration.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 5 </span>Managing Client Machines with RMT</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>