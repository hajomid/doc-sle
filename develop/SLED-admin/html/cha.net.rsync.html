<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>File Copying with RSync | Administration Guide | SUSE Linux Enterprise Desktop 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Desktop" /><meta name="product-number" content="15" /><meta name="book-title" content="Administration Guide" /><meta name="chapter-title" content="Chapter 9. File Copying with RSync" /><meta name="description" content="Today, a typical user has several computers: home and workplace machines, a laptop, a smartphone or a tablet. This makes the task of keeping files and documents in sync across multiple devices all more important." /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Desktop 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Desktop Documentation" /><link rel="up" href="part.administration.html" title="Part I. Common Tasks" /><link rel="prev" href="cha.vnc.html" title="Chapter 8. Remote Access with VNC" /><link rel="next" href="cha.gnome.gconf.html" title="Chapter 10. GNOME Configuration for Administrators" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.sle.admin.html">Administration Guide</a><span> › </span><a class="crumb" href="part.administration.html">Common Tasks</a><span> › </span><a class="crumb" href="cha.net.rsync.html">File Copying with RSync</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Administration Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pre.sle.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="part.administration.html"><span class="number">I </span><span class="name">Common Tasks</span></a><ol><li class="inactive"><a href="cha.adm.shell.html"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span></a></li><li class="inactive"><a href="cha.adm.sudo.html"><span class="number">2 </span><span class="name">sudo
</span></a></li><li class="inactive"><a href="cha.onlineupdate.you.html"><span class="number">3 </span><span class="name">YaST Online Update</span></a></li><li class="inactive"><a href="cha.yast.gui.html"><span class="number">4 </span><span class="name">YaST</span></a></li><li class="inactive"><a href="cha.yast.text.html"><span class="number">5 </span><span class="name">YaST in Text Mode</span></a></li><li class="inactive"><a href="cha.sw_cl.html"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span></a></li><li class="inactive"><a href="cha.snapper.html"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span></a></li><li class="inactive"><a href="cha.vnc.html"><span class="number">8 </span><span class="name">Remote Access with VNC</span></a></li><li class="inactive"><a href="cha.net.rsync.html"><span class="number">9 </span><span class="name">File Copying with RSync</span></a></li><li class="inactive"><a href="cha.gnome.gconf.html"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span></a></li></ol></li><li class="inactive"><a href="part.boot.html"><span class="number">II </span><span class="name">Booting a Linux System</span></a><ol><li class="inactive"><a href="cha.boot.html"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span></a></li><li class="inactive"><a href="cha.uefi.html"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li class="inactive"><a href="cha.grub2.html"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span></a></li><li class="inactive"><a href="cha.systemd.html"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span></a></li></ol></li><li class="inactive"><a href="part.system.html"><span class="number">III </span><span class="name">System</span></a><ol><li class="inactive"><a href="cha.64bit.html"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span></a></li><li class="inactive"><a href="cha.journalctl.html"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span></a></li><li class="inactive"><a href="cha.update-alternative.html"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span></a></li><li class="inactive"><a href="cha.network.html"><span class="number">18 </span><span class="name">Basic Networking</span></a></li><li class="inactive"><a href="cha.print.html"><span class="number">19 </span><span class="name">Printer Operation</span></a></li><li class="inactive"><a href="cha.x11.html"><span class="number">20 </span><span class="name">The X Window System</span></a></li><li class="inactive"><a href="cha.fuse.html"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span></a></li><li class="inactive"><a href="cha.mod.html"><span class="number">22 </span><span class="name">Managing Kernel Modules</span></a></li><li class="inactive"><a href="cha.udev.html"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span></a></li><li class="inactive"><a href="cha.kgraft.html"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span></a></li><li class="inactive"><a href="cha.suse.html"><span class="number">25 </span><span class="name">Special System Features</span></a></li><li class="inactive"><a href="cha.nm.html"><span class="number">26 </span><span class="name">Using NetworkManager</span></a></li><li class="inactive"><a href="cha.power-mgmt.html"><span class="number">27 </span><span class="name">Power Management</span></a></li></ol></li><li class="inactive"><a href="part.services.html"><span class="number">IV </span><span class="name">Services</span></a><ol><li class="inactive"><a href="cha.ntp.html"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span></a></li><li class="inactive"><a href="cha.nfs.html"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span></a></li><li class="inactive"><a href="cha.samba.html"><span class="number">30 </span><span class="name">Samba</span></a></li><li class="inactive"><a href="cha.autofs.html"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span></a></li></ol></li><li class="inactive"><a href="part.trouble.html"><span class="number">V </span><span class="name">Troubleshooting</span></a><ol><li class="inactive"><a href="cha.adminhelp.html"><span class="number">32 </span><span class="name">Help and Documentation</span></a></li><li class="inactive"><a href="cha.adm.support.html"><span class="number">33 </span><span class="name">Gathering System Information for Support</span></a></li><li class="inactive"><a href="cha.trouble.html"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span></a></li></ol></li><li class="inactive"><a href="app.nwscheme.html"><span class="number">A </span><span class="name">An Example Network</span></a></li><li class="inactive"><a href="bk01apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 8. Remote Access with VNC" href="cha.vnc.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 10. GNOME Configuration for Administrators" href="cha.gnome.gconf.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.sle.admin.html">Administration Guide</a><span> › </span><a class="crumb" href="part.administration.html">Common Tasks</a><span> › </span><a class="crumb" href="cha.net.rsync.html">File Copying with RSync</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 8. Remote Access with VNC" href="cha.vnc.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 10. GNOME Configuration for Administrators" href="cha.gnome.gconf.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.net.rsync"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">9 </span><span class="name">File Copying with RSync</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_sync.xml</li><li><span class="ds-label">ID: </span>cha.net.rsync</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="cha.net.rsync.html#idm140703705303840">#</a></h6></div><p>
    Today, a typical user has several computers: home and workplace machines, a
    laptop, a smartphone or a tablet. This makes the task of keeping files and
    documents in sync across multiple devices all more important.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.net.rsync.html#sec.net.rsync.overview"><span class="number">9.1 </span><span class="name">Conceptual Overview</span></a></span></dt><dt><span class="sect1"><a href="cha.net.rsync.html#sec.net.rsync.syntax"><span class="number">9.2 </span><span class="name">Basic Syntax</span></a></span></dt><dt><span class="sect1"><a href="cha.net.rsync.html#sec.net.rsync.local-copy"><span class="number">9.3 </span><span class="name">Copying Files and Directories Locally</span></a></span></dt><dt><span class="sect1"><a href="cha.net.rsync.html#sec.net.rsync.remote-copy"><span class="number">9.4 </span><span class="name">Copying Files and Directories Remotely</span></a></span></dt><dt><span class="sect1"><a href="cha.net.rsync.html#sec.net.rsync.server"><span class="number">9.5 </span><span class="name">Configuring and Using an Rsync Server</span></a></span></dt><dt><span class="sect1"><a href="cha.net.rsync.html#sec.net.rsync.summary"><span class="number">9.6 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div id="idm140703705301248" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Risk of Data Loss</h6><p>
   Before you start using a synchronization tool, you should familiarize
   yourself with its features and functionality. Make sure to back up your
   important files.
  </p></div><div class="sect1 " id="sec.net.rsync.overview"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.overview"><span class="number">9.1 </span><span class="name">Conceptual Overview</span> <a title="Permalink" class="permalink" href="cha.net.rsync.html#sec.net.rsync.overview">#</a></h2></div></div></div><p>
   For synchronizing a large amount of data over a slow network connection,
   Rsync offers a reliable method of transmitting only changes within files.
   This applies not only to text files but also binary files. To detect the
   differences between files, Rsync subdivides the files into blocks and
   computes check sums over them.
  </p><p>
   Detecting changes requires some computing power. So make sure that machines
   on both ends have enough resources, including RAM.
  </p><p>
   Rsync can be particularly useful when large amounts of data containing only
   minor changes need to be transmitted regularly. This is often the case when
   working with backups. Rsync can also be useful for mirroring staging servers
   that store complete directory trees of Web servers to a Web server in a DMZ.
  </p><p>
   Despite its name, Rsync is not a synchronization tool. Rsync is a tool that
   copies data only in one direction at a time. It does not and cannot do the
   reverse. If you need a bidirectional tool which is able to synchronize both
   source and destination, use Csync.
  </p></div><div class="sect1 " id="sec.net.rsync.syntax"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.syntax"><span class="number">9.2 </span><span class="name">Basic Syntax</span> <a title="Permalink" class="permalink" href="cha.net.rsync.html#sec.net.rsync.syntax">#</a></h2></div></div></div><p>
   Rsync is a command-line tool that has the following basic syntax:
  </p><div class="verbatim-wrap"><pre class="screen">rsync [OPTION] SOURCE [SOURCE]... DEST</pre></div><p>
   You can use Rsync on any local or remote machine, provided you have access
   and write permissions. It is possible to have multiple
   <em class="replaceable ">SOURCE</em> entries. The
   <em class="replaceable ">SOURCE</em> and <em class="replaceable ">DEST</em>
   placeholders can be paths, URLs, or both.
  </p><p>
   Below are the most common Rsync options:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140703705290752"><span class="term "><code class="option">-v</code>
    </span></dt><dd><p>
      Outputs more verbose text
     </p></dd><dt id="idm140703705288656"><span class="term "><code class="option">-a</code>
    </span></dt><dd><p>
      Archive mode; copies files recursively and preserves timestamps,
      user/group ownership, file permissions, and symbolic links
     </p></dd><dt id="idm140703705286448"><span class="term "><code class="option">-z</code>
    </span></dt><dd><p>
      Compresses the transmitted data
     </p></dd></dl></div><div id="idm140703705284176" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Trailing Slashes Count</h6><p>
    When working with Rsync, you should pay particular attention to trailing
    slashes. A trailing slash after the directory denotes the
    <span class="emphasis"><em>content</em></span> of the directory. No trailing slash denotes
    the <span class="emphasis"><em>directory itself</em></span>.
   </p></div></div><div class="sect1 " id="sec.net.rsync.local-copy"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.local-copy"><span class="number">9.3 </span><span class="name">Copying Files and Directories Locally</span> <a title="Permalink" class="permalink" href="cha.net.rsync.html#sec.net.rsync.local-copy">#</a></h2></div></div></div><p>
   The following description assumes that the current user has write
   permissions to the directory <code class="filename">/var/backup</code>. To copy a
   single file from one directory on your machine to another path, use the
   following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz backup.tar.xz /var/backup/</pre></div><p>
   The file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup/</code>; the absolute path will be
   <code class="filename">/var/backup/backup.tar.xz</code>.
  </p><p>
   Do not forget to add the <span class="emphasis"><em>trailing slash</em></span> after the
   <code class="filename">/var/backup/</code> directory! If you do not insert the slash,
   the file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup</code> (file) <span class="emphasis"><em>not</em></span> inside the
   directory <code class="filename">/var/backup/</code>!
  </p><p>
   Copying a directory is similar to copying a single file. The following
   example copies the directory <code class="filename">tux/</code> and
   its content into the directory <code class="filename">/var/backup/</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz tux /var/backup/</pre></div><p>
   Find the copy in the absolute path
   <code class="filename">/var/backup/tux/</code>.
  </p></div><div class="sect1 " id="sec.net.rsync.remote-copy"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.remote-copy"><span class="number">9.4 </span><span class="name">Copying Files and Directories Remotely</span> <a title="Permalink" class="permalink" href="cha.net.rsync.html#sec.net.rsync.remote-copy">#</a></h2></div></div></div><p>
   The Rsync tool is required on both machines. To copy files from or to remote
   directories requires an IP address or a domain name. A user name is optional
   if your current user names on the local and remote machine are the same.
  </p><p>
   To copy the file <code class="filename">file.tar.xz</code> from your local host to
   the remote host
   <code class="systemitem">192.168.1.1</code> with
   same users (being local and remote), use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz file.tar.xz  tux@192.168.1.1:</pre></div><p>
   Depending on what you prefer, these commands are also possible and
   equivalent:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:~
<code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:/home/tux</pre></div><p>
   In all cases with standard configuration, you will be prompted to enter your
   passphrase of the remote user. This command will copy
   <code class="filename">file.tar.xz</code> to the home directory of user <code class="systemitem">tux</code>
   (usually <code class="filename">/home/tux</code>).
  </p><p>
   Copying a directory remotely is similar to copying a directory locally. The
   following example copies the directory
   <code class="filename">tux/</code> and its content into the remote
   directory <code class="filename">/var/backup/</code> on the
   <code class="systemitem">192.168.1.1</code> host:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz tux 192.168.1.1:/var/backup/</pre></div><p>
   Assuming you have write permissions on the host
   <code class="systemitem">192.168.1.1</code>, you will
   find the copy in the absolute path
   <code class="filename">/var/backup/tux</code>.
  </p></div><div class="sect1 " id="sec.net.rsync.server"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.server"><span class="number">9.5 </span><span class="name">Configuring and Using an Rsync Server</span> <a title="Permalink" class="permalink" href="cha.net.rsync.html#sec.net.rsync.server">#</a></h2></div></div></div><p>
   Rsync can run as a daemon
   (<code class="systemitem">rsyncd</code>) listing on default
   port 873 for incoming connections. This daemon can receive <span class="quote">“<span class="quote">copying
   targets</span>”</span>.
  </p><p>
   The following description explains how to create an Rsync server on
   <code class="systemitem">jupiter</code> with a <span class="emphasis"><em>backup</em></span> target.
   This target can be used to store your backups. To create an Rsync server, do
   the following:
  </p><div class="procedure " id="idm140703705251040"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.1: </span><span class="name">Setting Up an Rsync Server </span><a title="Permalink" class="permalink" href="cha.net.rsync.html#idm140703705251040">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step " id="st.rsync.server.mkdir"><p>
     On jupiter, create a directory to store all your backup files. In this
     example, we use <code class="filename">/var/backup</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">mkdir</code> /var/backup</pre></div></li><li class="step "><p>
     Specify ownership. In this case, the directory is owned by user
     <code class="systemitem">tux</code> in group
     <code class="systemitem">users</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chown</code> tux.users /var/backup</pre></div></li><li class="step "><p>
     Configure the rsyncd daemon.
    </p><p>
     We will separate the configuration file into a main file and some
     <span class="quote">“<span class="quote">modules</span>”</span> which hold your backup target. This makes it easier
     to add additional targets later. Global values can be stored in
     <code class="filename">/etc/rsyncd.d/*.inc</code> files, whereas your modules are
     placed in <code class="filename">/etc/rsyncd.d/*.conf</code> files:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Create a directory <code class="filename">/etc/rsyncd.d/</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">mkdir</code> /etc/rsyncd.d/</pre></div></li><li class="step "><p>
       In the main configuration file <code class="filename">/etc/rsyncd.conf</code>,
       add the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># rsyncd.conf main configuration file
log file = /var/log/rsync.log
pid file = /var/lock/rsync.lock

&amp;merge /etc/rsyncd.d <span id="co.rsync.conf.merge"></span><span class="callout">1</span>
&amp;include /etc/rsyncd.d <span id="co.rsync.conf.include"></span><span class="callout">2</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.merge"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
         Merges global values from <code class="filename">/etc/rsyncd.d/*.inc</code>
         files into the main configuration file.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.include"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
         Loads any modules (or targets) from
         <code class="filename">/etc/rsyncd.d/*.conf</code> files. These files should
         not contain any references to global values.
        </p></td></tr></table></div></li><li class="step "><p>
       Create your module (your backup target) in the file
       <code class="filename">/etc/rsyncd.d/backup.conf</code> with the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># backup.conf: backup module
[backup] <span id="co.rsync.conf.target"></span><span class="callout">1</span>
   uid = tux <span id="co.rsync.conf.uid-gid"></span><span class="callout">2</span>
   gid = users <a class="xref" href="cha.net.rsync.html#co.rsync.conf.uid-gid"><span class="callout">2</span></a>
   path = /var/backup <span id="co.rsync.conf.path"></span><span class="callout">3</span>
   auth users = tux  <span id="co.rsync.conf.authusers"></span><span class="callout">4</span>
   secrets file = /etc/rsyncd.secrets <span id="co.rsync.conf.secretfiles"></span><span class="callout">5</span>
   comment = Our backup target</pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.target"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
         The <span class="emphasis"><em>backup</em></span> target. You can use any name you like.
         However, it is a good idea to name a target according to its purpose
         and use the same name in your <code class="filename">*.conf</code> file.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.uid-gid"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
         Specifies the user name or group name that is used when the file
         transfer takes place.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.path"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
         Defines the path to store your backups (from
         <a class="xref" href="cha.net.rsync.html#st.rsync.server.mkdir" title="Step 1">Step 1</a>).
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.authusers"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
         Specifies a comma-separated list of allowed users. In its simplest
         form, it contains the user names that are allowed to connect to this
         module. In our case, only user <code class="systemitem">tux</code> is allowed.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.secretfiles"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
         Specifies the path of a file that contains lines with user names and
         plain passwords.
        </p></td></tr></table></div></li><li class="step "><p>
       Create the <code class="filename">/etc/rsyncd.secrets</code> file with the
       following content and replace <em class="replaceable ">PASSPHRASE</em>:
      </p><div class="verbatim-wrap"><pre class="screen"># user:passwd
tux:<em class="replaceable ">PASSPHRASE</em></pre></div></li><li class="step "><p>
       Make sure the file is only readable by <code class="systemitem">root</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chmod</code> 0600 /etc/rsyncd.secrets</pre></div></li></ol></li><li class="step "><p>
     Start and enable the rsyncd daemon with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">systemctl</code> enable rsyncd
<code class="prompt root">root # </code><code class="command">systemctl</code> start rsyncd</pre></div></li><li class="step "><p>
     Test the access to your Rsync server:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> jupiter::</pre></div><p>
     You should see a response that looks like this:
    </p><div class="verbatim-wrap"><pre class="screen">backup          Our backup target</pre></div><p>
     Otherwise, check your configuration file, firewall and network settings.
    </p></li></ol></div></div><p>
   The above steps create an Rsync server that can now be used to store
   backups. The example also creates a log file listing all connections. This
   file is stored in <code class="filename">/var/log/rsyncd.log</code>. This is useful
   if you want to debug your transfers.
  </p><p>
   To list the content of your backup target, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rsync -avz jupiter::backup</pre></div><p>
   This command lists all files present in the directory
   <code class="filename">/var/backup</code> on the server. This request is also logged
   in the log file <code class="filename">/var/log/rsyncd.log</code>. To start an actual
   transfer, provide a source directory. Use <code class="literal">.</code> for the
   current directory. For example, the following command copies the current
   directory to your Rsync backup server:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rsync -avz . jupiter::backup</pre></div><p>
   By default, Rsync does not delete files and directories when it runs. To
   enable deletion, the additional option <code class="option">--delete</code> must be
   stated. To ensure that no newer files are deleted, the option
   <code class="option">--update</code> can be used instead. Any conflicts that arise must
   be resolved manually.
  </p></div><div class="sect1 " id="sec.net.rsync.summary"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.summary"><span class="number">9.6 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="cha.net.rsync.html#sec.net.rsync.summary">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm140703705194864"><span class="term ">CSync</span></dt><dd><p>
      Bidirectional file synchronizer, see
      <a class="link" href="https://www.csync.org/" target="_blank">https://www.csync.org/</a>.
     </p></dd><dt id="idm140703705192480"><span class="term ">RSnapshot</span></dt><dd><p>
      Creates incremental backups, see
      <a class="link" href="http://rsnapshot.org" target="_blank">http://rsnapshot.org</a>.
     </p></dd><dt id="idm140703705190096"><span class="term ">Unison</span></dt><dd><p>
      A file synchronizer similar to CSync but with a graphical interface, see
      <a class="link" href="http://www.seas.upenn.edu/~bcpierce/unison/" target="_blank">http://www.seas.upenn.edu/~bcpierce/unison/</a>.
     </p></dd><dt id="idm140703705187648"><span class="term ">Rear</span></dt><dd><p>
      A disaster recovery framework, see the <em class="citetitle ">Administration
      Guide</em> of the SUSE Linux Enterprise High Availability Extension
      <a class="link" href="https://www.suse.com/documentation/sle-ha-12/" target="_blank">https://www.suse.com/documentation/sle-ha-12/</a>.
     </p></dd></dl></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.gnome.gconf.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 10 </span>GNOME Configuration for Administrators</span></a><a class="nav-link" href="cha.vnc.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 8 </span>Remote Access with VNC</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>