<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The systemd Daemon | Administration Guide | SUSE Linux Enterprise Desktop 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Desktop" /><meta name="product-number" content="15" /><meta name="book-title" content="Administration Guide" /><meta name="chapter-title" content="Chapter 14. The systemd Daemon" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Desktop 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Desktop Documentation" /><link rel="up" href="part.boot.html" title="Part II. Booting a Linux System" /><link rel="prev" href="cha.grub2.html" title="Chapter 13. The Boot Loader GRUB 2" /><link rel="next" href="part.system.html" title="Part III. System" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.sle.admin.html">Administration Guide</a><span> › </span><a class="crumb" href="part.boot.html">Booting a Linux System</a><span> › </span><a class="crumb" href="cha.systemd.html">The systemd Daemon</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Administration Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pre.sle.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="part.administration.html"><span class="number">I </span><span class="name">Common Tasks</span></a><ol><li class="inactive"><a href="cha.adm.shell.html"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span></a></li><li class="inactive"><a href="cha.adm.sudo.html"><span class="number">2 </span><span class="name">sudo
</span></a></li><li class="inactive"><a href="cha.onlineupdate.you.html"><span class="number">3 </span><span class="name">YaST Online Update</span></a></li><li class="inactive"><a href="cha.yast.gui.html"><span class="number">4 </span><span class="name">YaST</span></a></li><li class="inactive"><a href="cha.yast.text.html"><span class="number">5 </span><span class="name">YaST in Text Mode</span></a></li><li class="inactive"><a href="cha.sw_cl.html"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span></a></li><li class="inactive"><a href="cha.snapper.html"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span></a></li><li class="inactive"><a href="cha.vnc.html"><span class="number">8 </span><span class="name">Remote Access with VNC</span></a></li><li class="inactive"><a href="cha.net.rsync.html"><span class="number">9 </span><span class="name">File Copying with RSync</span></a></li><li class="inactive"><a href="cha.gnome.gconf.html"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span></a></li></ol></li><li class="inactive"><a href="part.boot.html"><span class="number">II </span><span class="name">Booting a Linux System</span></a><ol><li class="inactive"><a href="cha.boot.html"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span></a></li><li class="inactive"><a href="cha.uefi.html"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li class="inactive"><a href="cha.grub2.html"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span></a></li><li class="inactive"><a href="cha.systemd.html"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span></a></li></ol></li><li class="inactive"><a href="part.system.html"><span class="number">III </span><span class="name">System</span></a><ol><li class="inactive"><a href="cha.64bit.html"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span></a></li><li class="inactive"><a href="cha.journalctl.html"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span></a></li><li class="inactive"><a href="cha.update-alternative.html"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span></a></li><li class="inactive"><a href="cha.network.html"><span class="number">18 </span><span class="name">Basic Networking</span></a></li><li class="inactive"><a href="cha.print.html"><span class="number">19 </span><span class="name">Printer Operation</span></a></li><li class="inactive"><a href="cha.x11.html"><span class="number">20 </span><span class="name">The X Window System</span></a></li><li class="inactive"><a href="cha.fuse.html"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span></a></li><li class="inactive"><a href="cha.mod.html"><span class="number">22 </span><span class="name">Managing Kernel Modules</span></a></li><li class="inactive"><a href="cha.udev.html"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span></a></li><li class="inactive"><a href="cha.kgraft.html"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span></a></li><li class="inactive"><a href="cha.suse.html"><span class="number">25 </span><span class="name">Special System Features</span></a></li><li class="inactive"><a href="cha.nm.html"><span class="number">26 </span><span class="name">Using NetworkManager</span></a></li><li class="inactive"><a href="cha.power-mgmt.html"><span class="number">27 </span><span class="name">Power Management</span></a></li></ol></li><li class="inactive"><a href="part.services.html"><span class="number">IV </span><span class="name">Services</span></a><ol><li class="inactive"><a href="cha.ntp.html"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span></a></li><li class="inactive"><a href="cha.nfs.html"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span></a></li><li class="inactive"><a href="cha.samba.html"><span class="number">30 </span><span class="name">Samba</span></a></li><li class="inactive"><a href="cha.autofs.html"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span></a></li></ol></li><li class="inactive"><a href="part.trouble.html"><span class="number">V </span><span class="name">Troubleshooting</span></a><ol><li class="inactive"><a href="cha.adminhelp.html"><span class="number">32 </span><span class="name">Help and Documentation</span></a></li><li class="inactive"><a href="cha.adm.support.html"><span class="number">33 </span><span class="name">Gathering System Information for Support</span></a></li><li class="inactive"><a href="cha.trouble.html"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span></a></li></ol></li><li class="inactive"><a href="app.nwscheme.html"><span class="number">A </span><span class="name">An Example Network</span></a></li><li class="inactive"><a href="bk01apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 13. The Boot Loader GRUB 2" href="cha.grub2.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part III. System" href="part.system.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.sle.admin.html">Administration Guide</a><span> › </span><a class="crumb" href="part.boot.html">Booting a Linux System</a><span> › </span><a class="crumb" href="cha.systemd.html">The systemd Daemon</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 13. The Boot Loader GRUB 2" href="cha.grub2.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part III. System" href="part.system.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.systemd"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>systemd.xml</li><li><span class="ds-label">ID: </span>cha.systemd</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.systemd.concept"><span class="number">14.1 </span><span class="name">The systemd Concept</span></a></span></dt><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.systemd.basics"><span class="number">14.2 </span><span class="name">Basic Usage</span></a></span></dt><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.systemd.boot"><span class="number">14.3 </span><span class="name">System Start and Target Management</span></a></span></dt><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.runlevel.edit"><span class="number">14.4 </span><span class="name">Managing Services with YaST</span></a></span></dt><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.systemd.custom"><span class="number">14.5 </span><span class="name">Customization of <code class="systemitem">systemd</code></span></a></span></dt><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.systemd.advanced"><span class="number">14.6 </span><span class="name">Advanced Usage</span></a></span></dt><dt><span class="sect1"><a href="cha.systemd.html#sec.boot.systemd.info"><span class="number">14.7 </span><span class="name">More Information</span></a></span></dt></dl></div></div><p>
  The program <code class="systemitem">systemd</code> is the process with process ID 1. It is responsible for
  initializing the system in the required way. <code class="systemitem">systemd</code> is started directly by
  the kernel and resists signal 9, which normally terminates processes.
  All other programs are either started directly by systemd or by one of its
  child processes.
 </p><p>
  Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> 12 systemd is a replacement for the popular
  System V init daemon. <code class="systemitem">systemd</code> is fully compatible with System V init (by
  supporting init scripts). One of the main advantages of systemd is that it
  considerably speeds up boot time by aggressively paralleling service starts.
  Furthermore, systemd only starts a service when it is really needed. Daemons
  are not started unconditionally at boot time, but rather when being required
  for the first time. systemd also supports Kernel Control Groups (cgroups),
  snapshotting and restoring the system state and more. See
  <a class="link" href="http://www.freedesktop.org/wiki/Software/systemd/" target="_blank">http://www.freedesktop.org/wiki/Software/systemd/</a> for
  details.
 </p><div class="sect1 " id="sec.boot.systemd.concept"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.concept"><span class="number">14.1 </span><span class="name">The systemd Concept</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.concept">#</a></h2></div></div></div><p>
   This section will go into detail about the concept behind systemd.
  </p><div class="sect2 " id="sec.boot.systemd.whatissystemd"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.whatissystemd"><span class="number">14.1.1 </span><span class="name">What Is systemd</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.whatissystemd">#</a></h3></div></div></div><p>
    systemd is a system and session manager for Linux, compatible with System V
    and LSB init scripts. The main features are:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      provides aggressive parallelization capabilities
     </p></li><li class="listitem "><p>
      uses socket and D-Bus activation for starting services
     </p></li><li class="listitem "><p>
      offers on-demand starting of daemons
     </p></li><li class="listitem "><p>
      keeps track of processes using Linux cgroups
     </p></li><li class="listitem "><p>
      supports snapshotting and restoring of the system state
     </p></li><li class="listitem "><p>
      maintains mount and automount points
     </p></li><li class="listitem "><p>
      implements an elaborate transactional dependency-based service control
      logic
     </p></li></ul></div></div><div class="sect2 " id="sec.boot.systemd.unitfile"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.unitfile"><span class="number">14.1.2 </span><span class="name">Unit File</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.unitfile">#</a></h3></div></div></div><p>
    A unit configuration file contains information about a service, a socket, a
    device, a mount point, an automount point, a swap file or partition, a
    start-up target, a watched file system path, a timer controlled and
    supervised by systemd, a temporary system state snapshot, a resource
    management slice or a group of externally created processes. <span class="quote">“<span class="quote">Unit
    file</span>”</span> is a generic term used by systemd for the following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><span class="formalpara-title">Service. </span>
       Information about a process (for example running a daemon); file ends
       with .service
      </p></li><li class="listitem "><p><span class="formalpara-title">Targets. </span>
       Used for grouping units and as synchronization points during start-up;
       file ends with .target
      </p></li><li class="listitem "><p><span class="formalpara-title">Sockets. </span>
       Information about an IPC or network socket or a file system FIFO, for
       socket-based activation (like
       <code class="systemitem">inetd</code>); file ends with .socket
      </p></li><li class="listitem "><p><span class="formalpara-title">Path. </span>
       Used to trigger other units (for example running a service when files
       change); file ends with .path
      </p></li><li class="listitem "><p><span class="formalpara-title">Timer. </span>
       Information about a timer controlled, for timer-based activation; file
       ends with .timer
      </p></li><li class="listitem "><p><span class="formalpara-title">Mount point. </span>
       Usually auto-generated by the fstab generator; file ends with .mount
      </p></li><li class="listitem "><p><span class="formalpara-title">Automount point. </span>
       Information about a file system automount point; file ends with
       .automount
      </p></li><li class="listitem "><p><span class="formalpara-title">Swap. </span>
       Information about a swap device or file for memory paging; file ends
       with .swap
      </p></li><li class="listitem "><p><span class="formalpara-title">Device. </span>
       Information about a device unit as exposed in the sysfs/udev(7) device
       tree; file ends with .device
      </p></li><li class="listitem "><p><span class="formalpara-title">Scope / Slice. </span>
       A concept for hierarchically managing resources of a group of processes;
       file ends with .scope/.slice
      </p></li></ul></div><p>
    For more information about systemd.unit see
    <a class="link" href="http://www.freedesktop.org/software/systemd/man/systemd.unit.html" target="_blank">http://www.freedesktop.org/software/systemd/man/systemd.unit.html</a>
   </p></div></div><div class="sect1 " id="sec.boot.systemd.basics"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.basics"><span class="number">14.2 </span><span class="name">Basic Usage</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.basics">#</a></h2></div></div></div><p>
   The System V init system uses several commands to handle services—the
   init scripts, <code class="command">insserv</code>, <code class="command">telinit</code> and
   others. systemd makes it easier to manage services, since there is only one
   command to memorize for the majority of service-handling tasks:
   <code class="command">systemctl</code>. It uses the <span class="quote">“<span class="quote">command plus
   subcommand</span>”</span> notation like <code class="command">git</code> or
   <code class="command">zypper</code>:
  </p><div class="verbatim-wrap"><pre class="screen">systemctl <em class="replaceable ">GENERAL OPTIONS</em> <em class="replaceable ">SUBCOMMAND</em> <em class="replaceable ">SUBCOMMAND OPTIONS</em></pre></div><p>
   See <code class="command">man 1 systemctl</code> for a complete manual.
  </p><div id="idm139759223436688" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Terminal Output and Bash Completion</h6><p>
    If the output goes to a terminal (and not to a pipe or a file, for example)
    systemd commands send long output to a pager by default. Use the
    <code class="option">--no-pager</code> option to turn off paging mode.
   </p><p>
    systemd also supports bash-completion, allowing you to enter the first
    letters of a subcommand and then press <span class="keycap">→|</span> to
    automatically complete it. This feature is only available in the
    <code class="systemitem">bash</code> shell and requires the installation of the
    package <code class="systemitem">bash-completion</code>.
   </p></div><div class="sect2 " id="sec.boot.systemd.basics.services"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.basics.services"><span class="number">14.2.1 </span><span class="name">Managing Services in a Running System</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.basics.services">#</a></h3></div></div></div><p>
    Subcommands for managing services are the same as for managing a service
    with System V init (<code class="command">start</code>, <code class="command">stop</code>,
    ...). The general syntax for service management commands is as follows:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759223429344"><span class="term ">systemd</span></dt><dd><div class="verbatim-wrap"><pre class="screen">systemctl reload|restart|start|status|stop|<em class="replaceable ">...</em> <em class="replaceable ">MY_SERVICE(S)</em></pre></div></dd><dt id="idm139759223426784"><span class="term ">System V init</span></dt><dd><div class="verbatim-wrap"><pre class="screen">rc<em class="replaceable ">MY_SERVICE(S)</em> reload|restart|start|status|stop|<em class="replaceable ">...</em></pre></div></dd></dl></div><p>
    systemd allows you to manage several services in one go. Instead of
    executing init scripts one after the other as with System V init, execute a
    command like the following:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl start <em class="replaceable ">MY_1ST_SERVICE</em> <em class="replaceable ">MY_2ND_SERVICE</em></pre></div><p>
    To list all services available on the system:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl list-unit-files --type=service</pre></div><p>
    The following table lists the most important service management commands
    for systemd and System V init:
   </p><div class="table" id="idm139759223419616"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.1: </span><span class="name">Service Management Commands </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759223419616">#</a></h6></div><div class="table-contents"><table summary="Service Management Commands" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
        <p>
         Task
        </p>
       </th><th>
        <p>
         systemd Command
        </p>
       </th><th>
        <p>
         System V init Command
        </p>
       </th></tr></thead><tbody><tr><td>
        <p><span class="formalpara-title">Starting. </span></p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">start</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">start</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Stopping. </span></p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">stop</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">stop</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Restarting. </span>
          Shuts down services and starts them afterward. If a service is not
          yet running it will be started.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">restart</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Restarting conditionally. </span>
          Restarts services if they are currently running. Does nothing for
          services that are not running.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">try-restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">try-restart</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Reloading. </span>
          Tells services to reload their configuration files without
          interrupting operation. Use case: Tell Apache to reload a modified
          <code class="filename">httpd.conf</code> configuration file. Note that not all
          services support reloading.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Reloading or restarting. </span>
          Reloads services if reloading is supported, otherwise restarts them.
          If a service is not yet running it will be started.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload-or-restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">n/a</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Reloading or restarting conditionally. </span>
          Reloads services if reloading is supported, otherwise restarts them
          if currently running. Does nothing for services that are not running.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload-or-try-restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">n/a</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Getting detailed status information. </span>
          Lists information about the status of services. The <code class="systemitem">systemd</code> command
          shows details such as description, executable, status, cgroup, and
          messages last issued by a service (see
          <a class="xref" href="cha.systemd.html#sec.boot.systemd.basics.services_debugging" title="14.6.8. Debugging Services">Section 14.6.8, “Debugging Services”</a>). The
          level of details displayed with the System V init differs from
          service to service.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Getting short status information. </span>
          Shows whether services are active or not.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">is-active</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
       </td></tr></tbody></table></div></div></div><div class="sect2 " id="sec.boot.systemd.basics.services_enabling"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.basics.services_enabling"><span class="number">14.2.2 </span><span class="name">Permanently Enabling/Disabling Services</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.basics.services_enabling">#</a></h3></div></div></div><p>
    The service management commands mentioned in the previous section let you
    manipulate services for the current session. systemd also lets you
    permanently enable or disable services, so they are automatically started
    when requested or are always unavailable. You can either do this by using
    YaST, or on the command line.
   </p><div class="sect3 " id="sec.boot.systemd.basics.services_enabling.cmd"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.basics.services_enabling.cmd"><span class="number">14.2.2.1 </span><span class="name">Enabling/Disabling Services on the Command Line</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.basics.services_enabling.cmd">#</a></h4></div></div></div><p>
     The following table lists enabling and disabling commands for systemd and
     System V init:
    </p><div id="idm139759223359408" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Service Start</h6><p>
      When enabling a service on the command line, it is not started
      automatically. It is scheduled to be started with the next system
      start-up or runlevel/target change. To immediately start a service after
      having enabled it, explicitly run <code class="command">systemctl start
      <em class="replaceable ">MY_SERVICE</em></code> or <code class="command">rc
      <em class="replaceable ">MY_SERVICE</em> start</code>.
     </p></div><div class="table" id="idm139759223356192"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.2: </span><span class="name">Commands for Enabling and Disabling Services </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759223356192">#</a></h6></div><div class="table-contents"><table summary="Commands for Enabling and Disabling Services" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
         <p>
          Task
         </p>
        </th><th>
         <p>
          <code class="systemitem">systemd</code> Command
         </p>
        </th><th>
         <p>
          System V init Command
         </p>
        </th></tr></thead><tbody><tr><td>
         <p><span class="formalpara-title">Enabling. </span></p>
        </td><td>
         <p>
          <code class="command">systemctl enable
          <em class="replaceable ">MY_SERVICE(S)</em></code>
         </p>
        </td><td>
         <p>
          <code class="command">insserv <em class="replaceable ">MY_SERVICE(S)</em></code>,
          <code class="command">chkconfig -a
          <em class="replaceable ">MY_SERVICE(S)</em></code>
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Disabling. </span></p>
        </td><td>
         <p>
          <code class="command">systemctl disable
          <em class="replaceable ">MY_SERVICE(S)</em>.service</code>
         </p>
        </td><td>
         <p>
          <code class="command">insserv -r
          <em class="replaceable ">MY_SERVICE(S)</em></code>,
          <code class="command">chkconfig -d
          <em class="replaceable ">MY_SERVICE(S)</em></code>
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Checking. </span>
           Shows whether a service is enabled or not.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl is-enabled
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          <code class="command">chkconfig <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Re-enabling. </span>
           Similar to restarting a service, this command first disables and
           then enables a service. Useful to re-enable a service with its
           defaults.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl reenable
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Masking. </span>
           After <span class="quote">“<span class="quote">disabling</span>”</span> a service, it can still be started
           manually. To completely disable a service, you need to mask it. Use
           with care.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl mask
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Unmasking. </span>
           A service that has been masked can only be used again after it has
           been unmasked.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl unmask
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr></tbody></table></div></div></div></div></div><div class="sect1 " id="sec.boot.systemd.boot"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.boot"><span class="number">14.3 </span><span class="name">System Start and Target Management</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.boot">#</a></h2></div></div></div><p>
   The entire process of starting the system and shutting it down is maintained
   by systemd. From this point of view, the kernel can be considered a
   background process to maintain all other processes and adjust CPU time and
   hardware access according to requests from other programs.
  </p><div class="sect2 " id="sec.boot.systemd.targets"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.targets"><span class="number">14.3.1 </span><span class="name">Targets Compared to Runlevels</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.targets">#</a></h3></div></div></div><p>
    With System V init the system was booted into a so-called
    <span class="quote">“<span class="quote">Runlevel</span>”</span>. A runlevel defines how the system is started and
    what services are available in the running system. Runlevels are numbered;
    the most commonly known ones are <code class="literal">0</code> (shutting down the
    system), <code class="literal">3</code> (multiuser with network) and
    <code class="literal">5</code> (multiuser with network and display manager).
   </p><p>
    systemd introduces a new concept by using so-called <span class="quote">“<span class="quote">target
    units</span>”</span>. However, it remains fully compatible with the runlevel
    concept. Target units are named rather than numbered and serve specific
    purposes. For example, the targets <code class="systemitem">local-fs.target</code>
    and <code class="systemitem">swap.target</code> mount local file systems and swap
    spaces.
   </p><p>
    The target <code class="systemitem">graphical.target</code> provides a multiuser
    system with network and display manager capabilities and is equivalent to
    runlevel 5. Complex targets, such as
    <code class="systemitem">graphical.target</code> act as <span class="quote">“<span class="quote">meta</span>”</span>
    targets by combining a subset of other targets. Since systemd makes it easy
    to create custom targets by combining existing targets, it offers great
    flexibility.
   </p><p>
    The following list shows the most important systemd target units. For a
    full list refer to <code class="command">man 7 systemd.special</code>.
   </p><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Selected systemd Target Units </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759223296240">#</a></h6></div><dl class="variablelist"><dt id="idm139759223295488"><span class="term "><code class="systemitem">default.target</code>
     </span></dt><dd><p>
       The target that is booted by default. Not a <span class="quote">“<span class="quote">real</span>”</span> target,
       but rather a symbolic link to another target like
       <code class="systemitem">graphic.target</code>. Can be permanently changed via
       YaST (see <a class="xref" href="cha.systemd.html#sec.boot.runlevel.edit" title="14.4. Managing Services with YaST">Section 14.4, “Managing Services with YaST”</a>). To change it for
       a session, use the kernel parameter
       <code class="literal">systemd.unit=<em class="replaceable ">MY_TARGET.target</em></code>
       at the boot prompt.
      </p></dd><dt id="idm139759223291024"><span class="term "><code class="systemitem">emergency.target</code>
     </span></dt><dd><p>
       Starts an emergency shell on the console. Only use it at the boot prompt
       as <code class="literal">systemd.unit=emergency.target</code>.
      </p></dd><dt id="idm139759223288400"><span class="term "><code class="systemitem">graphical.target</code>
     </span></dt><dd><p>
       Starts a system with network, multiuser support and a display manager.
      </p></dd><dt id="idm139759223286256"><span class="term "><code class="systemitem">halt.target</code>
     </span></dt><dd><p>
       Shuts down the system.
      </p></dd><dt id="idm139759223284160"><span class="term "><code class="systemitem">mail-transfer-agent.target</code>
     </span></dt><dd><p>
       Starts all services necessary for sending and receiving mails.
      </p></dd><dt id="idm139759223282000"><span class="term "><code class="systemitem">multi-user.target</code>
     </span></dt><dd><p>
       Starts a multiuser system with network.
      </p></dd><dt id="idm139759223279888"><span class="term "><code class="systemitem">reboot.target</code>
     </span></dt><dd><p>
       Reboots the system.
      </p></dd><dt id="idm139759223277792"><span class="term "><code class="systemitem">rescue.target</code>
     </span></dt><dd><p>
       Starts a single-user system without network.
      </p></dd></dl></div><p>
    To remain compatible with the System V init runlevel system, systemd
    provides special targets named
    <code class="literal">runlevel<em class="replaceable ">X</em>.target</code> mapping the
    corresponding runlevels numbered <em class="replaceable ">X</em>.
   </p><p>
    If you want to know the current target, use the command: <code class="command">systemctl
    get-default</code>
   </p><div class="table" id="idm139759223272624"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.3: </span><span class="name">System V Runlevels and <code class="systemitem">systemd</code> Target Units </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759223272624">#</a></h6></div><div class="table-contents"><table summary="System V Runlevels and systemd Target Units" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
        <p>
         System V runlevel
        </p>
       </th><th>
        <p>
         <code class="systemitem">systemd</code> target
        </p>
       </th><th>
        <p>
         Purpose
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         0
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel0.target</code>,
         <code class="systemitem">halt.target</code>,
         <code class="systemitem">poweroff.target</code>
        </p>
       </td><td>
        <p>
         System shutdown
        </p>
       </td></tr><tr><td>
        <p>
         1, S
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel1.target</code>,
         <code class="systemitem">rescue.target</code>,
        </p>
       </td><td>
        <p>
         Single-user mode
        </p>
       </td></tr><tr><td>
        <p>
         2
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel2.target</code>,
         <code class="systemitem">multi-user.target</code>,
        </p>
       </td><td>
        <p>
         Local multiuser without remote network
        </p>
       </td></tr><tr><td>
        <p>
         3
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel3.target</code>,
         <code class="systemitem">multi-user.target</code>,
        </p>
       </td><td>
        <p>
         Full multiuser with network
        </p>
       </td></tr><tr><td>
        <p>
         4
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel4.target</code>
        </p>
       </td><td>
        <p>
         Unused/User-defined
        </p>
       </td></tr><tr><td>
        <p>
         5
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel5.target</code>,
         <code class="systemitem">graphical.target</code>,
        </p>
       </td><td>
        <p>
         Full multiuser with network and display manager
        </p>
       </td></tr><tr><td>
        <p>
         6
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel6.target</code>,
         <code class="systemitem">reboot.target</code>,
        </p>
       </td><td>
        <p>
         System reboot
        </p>
       </td></tr></tbody></table></div></div><div id="idm139759223233504" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: systemd Ignores <code class="filename">/etc/inittab</code></h6><p>
     The runlevels in a System V init system are configured in
     <code class="filename">/etc/inittab</code>. systemd does <span class="emphasis"><em>not</em></span>
     use this configuration. Refer to
     <a class="xref" href="cha.systemd.html#sec.boot.systemd.custom.targets" title="14.5.3. Creating Custom Targets">Section 14.5.3, “Creating Custom Targets”</a> for instructions on how
     to create your own bootable target.
    </p></div><div class="sect3 " id="sec.boot.systemd.targets.commands"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.targets.commands"><span class="number">14.3.1.1 </span><span class="name">Commands to Change Targets</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.targets.commands">#</a></h4></div></div></div><p>
     Use the following commands to operate with target units:
    </p><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
         <p>
          Task
         </p>
        </th><th>
         <p>
          systemd Command
         </p>
        </th><th>
         <p>
          System V init Command
         </p>
        </th></tr></thead><tbody><tr><td>
         <p>
          Change the current target/runlevel
         </p>
        </td><td>
         <p>
          <code class="command">systemctl isolate</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
        </td><td>
         <p>
          <code class="command">telinit</code> <em class="replaceable ">X</em>
         </p>
        </td></tr><tr><td>
         <p>
          Change to the default target/runlevel
         </p>
        </td><td>
         <p>
          <code class="command">systemctl default</code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr><tr><td>
         <p>
          Get the current target/runlevel
         </p>
        </td><td>
         <p>
          <code class="command">systemctl list-units --type=target</code>
         </p>
         <p>
          With systemd there is usually more than one active target. The
          command lists all currently active targets.
         </p>
        </td><td>
         <p>
          <code class="command">who -r</code>
         </p>
         <p>
          or
         </p>
         <p>
          <code class="command">runlevel</code>
         </p>
        </td></tr><tr><td>
         <p>
          persistently change the default runlevel
         </p>
        </td><td>
         <p>
          Use the Services Manager or run the following command:
         </p>
         <p>
          <code class="command">ln -sf /usr/lib/systemd/system/</code>
          <em class="replaceable ">MY_TARGET</em>.target
          /etc/systemd/system/default.target
         </p>
        </td><td>
         <p>
          Use the Services Manager or change the line
         </p>
         <p>
          <code class="command">id:</code> <em class="replaceable ">X</em>:initdefault:
         </p>
         <p>
          in <code class="filename">/etc/inittab</code>
         </p>
        </td></tr><tr><td>
         <p>
          Change the default runlevel for the current boot process
         </p>
        </td><td>
         <p>
          Enter the following option at the boot prompt
         </p>
         <p>
          <code class="command">systemd.unit=</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
        </td><td>
         <p>
          Enter the desired runlevel number at the boot prompt.
         </p>
        </td></tr><tr><td>
         <p>
          Show a target's/runlevel's dependencies
         </p>
        </td><td>
         <p>
          <code class="command">systemctl show -p "Requires"</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
         <p>
          <code class="command">systemctl show -p "Wants"</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
         <p>
          <span class="quote">“<span class="quote">Requires</span>”</span> lists the hard dependencies (the ones that
          must be resolved), whereas <span class="quote">“<span class="quote">Wants</span>”</span> lists the soft
          dependencies (the ones that get resolved if possible).
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr></tbody></table></div></div></div><div class="sect2 " id="sec.boot.systemd.debug"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.debug"><span class="number">14.3.2 </span><span class="name">Debugging System Start-Up</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.debug">#</a></h3></div></div></div><p>
    systemd offers the means to analyze the system start-up process. You can
    review the list of all services and their status (rather than having to
    parse <code class="filename">/varlog/</code>). systemd also allows you to scan the
    start-up procedure to find out how much time each service start-up
    consumes.
   </p><div class="sect3 " id="sec.boot.systemd.debug.review"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.debug.review"><span class="number">14.3.2.1 </span><span class="name">Review Start-Up of Services</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.debug.review">#</a></h4></div></div></div><p>
     To review the complete list of services that have been started since
     booting the system, enter the command <code class="command">systemctl</code>. It
     lists all active services like shown below (shortened). To get more
     information on a specific service, use <code class="command">systemctl status
     <em class="replaceable ">MY_SERVICE</em></code>.
    </p><div class="example" id="idm139759223175120"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 14.1: </span><span class="name">List Active Services </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759223175120">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl
UNIT                        LOAD   ACTIVE SUB       JOB DESCRIPTION
[...]
iscsi.service               loaded active exited    Login and scanning of iSC+
kmod-static-nodes.service   loaded active exited    Create list of required s+
libvirtd.service            loaded active running   Virtualization daemon
nscd.service                loaded active running   Name Service Cache Daemon
chronyd.service             loaded active running   NTP Server Daemon
polkit.service              loaded active running   Authorization Manager
postfix.service             loaded active running   Postfix Mail Transport Ag+
rc-local.service            loaded active exited    /etc/init.d/boot.local Co+
rsyslog.service             loaded active running   System Logging Service
[...]
LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

161 loaded units listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.</pre></div></div></div><p>
     To restrict the output to services that failed to start, use the
     <code class="option">--failed</code> option:
    </p><div class="example" id="idm139759223171136"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 14.2: </span><span class="name">List Failed Services </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759223171136">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl --failed
UNIT                   LOAD   ACTIVE SUB    JOB DESCRIPTION
apache2.service        loaded failed failed     apache
NetworkManager.service loaded failed failed     Network Manager
plymouth-start.service loaded failed failed     Show Plymouth Boot Screen

[...]</pre></div></div></div></div><div class="sect3 " id="sec.boot.systemd.debug.time"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.debug.time"><span class="number">14.3.2.2 </span><span class="name">Debug Start-Up Time</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.debug.time">#</a></h4></div></div></div><p>
     To debug system start-up time, systemd offers the
     <code class="command">systemd-analyze</code> command. It shows the total start-up
     time, a list of services ordered by start-up time and can also generate an
     SVG graphic showing the time services took to start in relation to the
     other services.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759223166192"><span class="term ">Listing the System Start-Up Time</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-analyze
Startup finished in 2666ms (kernel) + 21961ms (userspace) = 24628ms</pre></div></dd><dt id="idm139759223163808"><span class="term ">Listing the Services Start-Up Time</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-analyze blame
  6472ms systemd-modules-load.service
  5833ms remount-rootfs.service
  4597ms network.service
  4254ms systemd-vconsole-setup.service
  4096ms postfix.service
  2998ms xdm.service
  2483ms localnet.service
  2470ms SuSEfirewall2_init.service
  2189ms avahi-daemon.service
  2120ms systemd-logind.service
  1080ms chronyd.service
[...]
    75ms fbset.service
    72ms purge-kernels.service
    47ms dev-vda1.swap
    38ms bluez-coldplug.service
    35ms splash_early.service</pre></div></dd><dt id="idm139759223160960"><span class="term ">Services Start-Up Time Graphics</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-analyze plot &gt; jupiter.example.com-startup.svg</pre></div><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/systemd_startup.png"><img src="images/systemd_startup.png" width="" /></a></div></div></dd></dl></div></div><div class="sect3 " id="sec.boot.systemd.debug.complete"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.debug.complete"><span class="number">14.3.2.3 </span><span class="name">Review the Complete Start-Up Process</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.debug.complete">#</a></h4></div></div></div><p>
     The above-mentioned commands let you review the services that started and
     the time it took to start them. If you need to know more details, you can
     tell <code class="systemitem">systemd</code> to verbosely log the complete start-up procedure by
     entering the following parameters at the boot prompt:
    </p><div class="verbatim-wrap"><pre class="screen">systemd.log_level=debug systemd.log_target=kmsg</pre></div><p>
     Now <code class="systemitem">systemd</code> writes its log messages into the kernel ring buffer. View
     that buffer with <code class="command">dmesg</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>dmesg -T | less</pre></div></div></div><div class="sect2 " id="sec.boot.systemd.sysv_compatibility"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.sysv_compatibility"><span class="number">14.3.3 </span><span class="name">System V Compatibility</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.sysv_compatibility">#</a></h3></div></div></div><p>
    systemd is compatible with System V, allowing you to still use existing
    System V init scripts. However, there is at least one known issue where a
    System V init script does not work with systemd out of the box: starting a
    service as a different user via <code class="command">su</code> or
    <code class="command">sudo</code> in init scripts will result in a failure of the
    script, producing an <span class="quote">“<span class="quote">Access denied</span>”</span> error.
   </p><p>
    When changing the user with <code class="command">su</code> or
    <code class="command">sudo</code>, a PAM session is started. This session will be
    terminated after the init script is finished. As a consequence, the service
    that has been started by the init script will also be terminated. To work
    around this error, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create a service file wrapper with the same name as the init script plus
      the file name extension <code class="filename">.service</code>:
     </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Description=<em class="replaceable ">DESCRIPTION</em>
After=network.target

[Service]
User=<em class="replaceable ">USER</em>
Type=forking<span id="co.service_wrapper.type"></span><span class="callout">1</span>
PIDFile=<em class="replaceable ">PATH TO PID FILE</em><a class="xref" href="cha.systemd.html#co.service_wrapper.type"><span class="callout">1</span></a>
ExecStart=<em class="replaceable ">PATH TO INIT SCRIPT</em> start
ExecStop=<em class="replaceable ">PATH TO INIT SCRIPT</em> stop
ExecStopPost=/usr/bin/rm -f <em class="replaceable ">PATH TO PID FILE</em><a class="xref" href="cha.systemd.html#co.service_wrapper.type"><span class="callout">1</span></a>

[Install]
WantedBy=multi-user.target<span id="co.service_wrapper.target"></span><span class="callout">2</span></pre></div><p>
      Replace all values written in <em class="replaceable ">UPPERCASE
      LETTERS</em> with appropriate values.
     </p><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.service_wrapper.type"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
        Optional—only use if the init script starts a daemon.
       </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.service_wrapper.target"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
        <code class="literal">multi-user.target</code> also starts the init script when
        booting into <code class="literal">graphical.target</code>. If it should only be
        started when booting into the display manager, user
        <code class="literal">graphical.target</code> here.
       </p></td></tr></table></div></li><li class="step "><p>
      Start the daemon with <code class="command">systemctl start
      <em class="replaceable ">APPLICATION</em></code>.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.boot.runlevel.edit"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.runlevel.edit"><span class="number">14.4 </span><span class="name">Managing Services with YaST</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.runlevel.edit">#</a></h2></div></div></div><p>
   Basic service management can also be done with the YaST Services Manager
   module. It supports starting, stopping, enabling and disabling services. It
   also lets you show a service's status and change the default target. Start
   the YaST module with <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Services Manager</span>.
  </p><div class="figure" id="fig.yast2.runlevel"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_runlevel.png"><img src="images/yast2_runlevel.png" width="" alt="Services Manager" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 14.1: </span><span class="name">Services Manager </span><a title="Permalink" class="permalink" href="cha.systemd.html#fig.yast2.runlevel">#</a></h6></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139759223118736"><span class="term ">Changing the <span class="guimenu">Default System Target</span>
    </span></dt><dd><p>
      To change the target the system boots into, choose a target from the
      <span class="guimenu">Default System Target</span> drop-down box. The most often
      used targets are <span class="guimenu">Graphical Interface</span> (starting a
      graphical login screen) and <span class="guimenu">Multi-User</span> (starting the
      system in command line mode).
     </p></dd><dt id="idm139759223114976"><span class="term ">Starting or Stopping a Service</span></dt><dd><p>
      Select a service from the table. The <span class="guimenu">Active</span> column
      shows whether it is currently running (<span class="guimenu">Active</span>) or not
      (<span class="guimenu">Inactive</span>). Toggle its status by choosing
      <span class="guimenu">Start/Stop</span>.
     </p><p>
      Starting or stopping a service changes its status for the currently
      running session. To change its status throughout a reboot, you need to
      enable or disable it.
     </p></dd><dt id="idm139759223110672"><span class="term ">Enabling or Disabling a Service</span></dt><dd><p>
      Select a service from the table. The <span class="guimenu">Enabled</span> column
      shows whether it is currently <span class="guimenu">Enabled</span> or
      <span class="guimenu">Disabled</span>. Toggle its status by choosing
      <span class="guimenu">Enable/Disable</span>.
     </p><p>
      By enabling or disabling a service you configure whether it is started
      during booting (<span class="guimenu">Enabled</span>) or not
      (<span class="guimenu">Disabled</span>). This setting will not affect the current
      session. To change its status in the current session, you need to start
      or stop it.
     </p></dd><dt id="idm139759223105440"><span class="term ">View a Status Messages</span></dt><dd><p>
      To view the status message of a service, select it from the list and
      choose <span class="guimenu">Show Details</span>. The output you will see is
      identical to the one generated by the command
      <code class="command">systemctl</code> <code class="option">-l</code> status
      <em class="replaceable ">MY_SERVICE</em>.
     </p></dd></dl></div><div id="idm139759223101552" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Faulty Runlevel Settings May Damage Your System</h6><p>
    Faulty runlevel settings may make your system unusable. Before applying
    your changes, make absolutely sure that you know their consequences.
   </p></div></div><div class="sect1 " id="sec.boot.systemd.custom"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.custom"><span class="number">14.5 </span><span class="name">Customization of <code class="systemitem">systemd</code></span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.custom">#</a></h2></div></div></div><p>
   The following sections contain some examples for
   <code class="systemitem">systemd</code> customization.
  </p><div id="idm139759223097472" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Avoiding Overwritten Customization</h6><p>
    Always do systemd customization in <code class="filename">/etc/systemd/</code>,
    <span class="emphasis"><em>never</em></span> in <code class="filename">/usr/lib/systemd/</code>.
    Otherwise your changes will be overwritten by the next update of systemd.
   </p></div><div class="sect2 " id="sec.boot.systemd.custom.service"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.custom.service"><span class="number">14.5.1 </span><span class="name">Customizing Unit Files</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.custom.service">#</a></h3></div></div></div><p>
    The systemd unit files are located in
    <code class="filename">/usr/lib/systemd/system</code>. If you want to customize
    them, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Copy the files you want to modify from
      <code class="filename">/usr/lib/systemd/system</code> to
      <code class="filename">/etc/systemd/system</code>. Keep the file names identical
      to the original ones.
     </p></li><li class="step "><p>
      Modify the copies in <code class="filename">/etc/systemd/system</code> according
      to your needs.
     </p></li><li class="step "><p>
      For an overview of your configuration changes, use the
      <code class="command">systemd-delta</code> command. It can compare and identify
      configuration files that override other configuration files. For details,
      refer to the <code class="command">systemd-delta</code> man page.
     </p></li></ol></div></div><p>
    The modified files in <code class="filename">/etc/systemd</code> will take
    precedence over the original files in
    <code class="filename">/usr/lib/systemd/system</code>, provided that their file name
    is the same.
   </p><div class="sect3 " id="systemd.xinetd_conversion"><div class="titlepage"><div><div><h4 class="title" id="systemd.xinetd_conversion"><span class="number">14.5.1.1 </span><span class="name">Converting <code class="systemitem">xinetd</code> Services to <code class="systemitem">systemd</code></span> <a title="Permalink" class="permalink" href="cha.systemd.html#systemd.xinetd_conversion">#</a></h4></div></div></div><p>
     Since the release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> 15, the <code class="systemitem">xinetd</code>
     infrastructure has been removed. This section outlines how to convert
     existing custom <code class="systemitem">xinetd</code> service files to <code class="systemitem">systemd</code>
     sockets.
    </p><p>
     For each <code class="systemitem">xinetd</code> service file, you need at least
     two <code class="systemitem">systemd</code> unit files: the socket file (<code class="filename">*.socket</code>)
     and an associated service file (<code class="filename">*.service</code>). The
     socket file tells <code class="systemitem">systemd</code> which socket to create, and the service file
     tells what executable to start.
    </p><p>
     Consider the following example <code class="systemitem">xinetd</code> service
     file:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cat /etc/xinetd.d/example
service example
{
  socket_type = stream
  protocol = tcp
  port = 10085
  wait = no
  user = user
  group = users
  groups = yes
  server = /usr/libexec/example/exampled
  server_args = -auth=bsdtcp exampledump
  disable = no
}</pre></div><p>
     To convert it to <code class="systemitem">systemd</code>, you need the following two matching files:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cat /usr/lib/systemd/system/example.socket
[Socket]
ListenStream=0.0.0.0:10085
Accept=false

[Install]
WantedBy=sockets.target</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cat /usr/lib/systemd/system/example.service
[Unit]
Description=example

[Service]
ExecStart=/usr/libexec/example/exampled -auth=bsdtcp exampledump
User=user
Group=users
StandardInput=socket</pre></div><p>
     For a complete list of the <code class="systemitem">systemd</code> 'socket' and 'service' file options,
     refer to systemd.socket and systemd.service manual pages (<code class="command">man 5
     systemd.socket</code>, <code class="command">man 5 systemd.service</code>).
    </p></div></div><div class="sect2 " id="sec.boot.systemd.custom.drop-in"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.custom.drop-in"><span class="number">14.5.2 </span><span class="name">Creating <span class="quote">“<span class="quote">Drop-in</span>”</span> Files</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.custom.drop-in">#</a></h3></div></div></div><p>
    If you only want to add a few lines to a configuration file or modify a
    small part of it, you can use so-called <span class="quote">“<span class="quote">drop-in</span>”</span> files.
    Drop-in files let you extend the configuration of unit files without having
    to edit or override the unit files themselves.
   </p><p>
    For example, to change one value for the <em class="replaceable ">FOOBAR</em>
    service located in
    <code class="filename">/usr/lib/systemd/system/<em class="replaceable ">FOOBAR.SERVICE</em></code>,
    proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create a directory called
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_SERVICE</em>.service.d/</code>.
     </p><p>
      Note the <code class="literal">.d</code> suffix. The directory must otherwise be
      named like the service that you want to patch with the drop-in file.
     </p></li><li class="step "><p>
      In that directory, create a file
      <code class="filename"><em class="replaceable ">WHATEVERMODIFICATION</em>.conf</code>.
     </p><p>
      Make sure it only contains the line with the value that you want to
      modify.
     </p></li><li class="step "><p>
      Save your changes to the file. It will be used as an extension of the
      original file.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.boot.systemd.custom.targets"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.custom.targets"><span class="number">14.5.3 </span><span class="name">Creating Custom Targets</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.custom.targets">#</a></h3></div></div></div><p>
    On System V init SUSE systems, runlevel 4 is unused to allow
    administrators to create their own runlevel configuration. systemd allows
    you to create any number of custom targets. It is suggested to start by
    adapting an existing target such as
    <code class="systemitem">graphical.target</code>.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Copy the configuration file
      <code class="filename">/usr/lib/systemd/system/graphical.target</code> to
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_TARGET</em>.target</code>
      and adjust it according to your needs.
     </p></li><li class="step "><p>
      The configuration file copied in the previous step already covers the
      required (<span class="quote">“<span class="quote">hard</span>”</span>) dependencies for the target. To also cover
      the wanted (<span class="quote">“<span class="quote">soft</span>”</span>) dependencies, create a directory
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_TARGET</em>.target.wants</code>.
     </p></li><li class="step "><p>
      For each wanted service, create a symbolic link from
      <code class="filename">/usr/lib/systemd/system</code> into
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_TARGET</em>.target.wants</code>.
     </p></li><li class="step "><p>
      Once you have finished setting up the target, reload the systemd
      configuration to make the new target available:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl daemon-reload</pre></div></li></ol></div></div></div></div><div class="sect1 " id="sec.boot.systemd.advanced"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.advanced"><span class="number">14.6 </span><span class="name">Advanced Usage</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced">#</a></h2></div></div></div><p>
   The following sections cover advanced topics for system administrators. For
   even more advanced systemd documentation, refer to Lennart Pöttering's
   series about systemd for administrators at
   <a class="link" href="http://0pointer.de/blog/projects" target="_blank">http://0pointer.de/blog/projects</a>.
  </p><div class="sect2 " id="sec.boot.systemd.advanced.tmp"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.tmp"><span class="number">14.6.1 </span><span class="name">Cleaning Temporary Directories</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.tmp">#</a></h3></div></div></div><p>
    <code class="systemitem">systemd</code> supports cleaning temporary directories regularly. The
    configuration from the previous system version is automatically migrated
    and active. <code class="literal">tmpfiles.d</code>—which is responsible for
    managing temporary files—reads its configuration from
    <code class="filename">/etc/tmpfiles.d/*.conf</code> ,
    <code class="filename">/run/tmpfiles.d/*.conf</code>, and
    <code class="filename">/usr/lib/tmpfiles.d/*.conf</code> files. Configuration placed
    in <code class="filename">/etc/tmpfiles.d/*.conf</code> overrides related
    configurations from the other two directories
    (<code class="filename">/usr/lib/tmpfiles.d/*.conf</code> is where packages store
    their configuration files).
   </p><p>
    The configuration format is one line per path containing action and path,
    and optionally mode, ownership, age and argument fields, depending on the
    action. The following example unlinks the X11 lock files:
   </p><div class="verbatim-wrap"><pre class="screen">Type Path               Mode UID  GID  Age Argument
r    /tmp/.X[0-9]*-lock</pre></div><p>
    To get the status the tmpfile timer:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl status systemd-tmpfiles-clean.timer
systemd-tmpfiles-clean.timer - Daily Cleanup of Temporary Directories
 Loaded: loaded (/usr/lib/systemd/system/systemd-tmpfiles-clean.timer; static)
 Active: active (waiting) since Tue 2014-09-09 15:30:36 CEST; 1 weeks 6 days ago
   Docs: man:tmpfiles.d(5)
         man:systemd-tmpfiles(8)

Sep 09 15:30:36 jupiter systemd[1]: Starting Daily Cleanup of Temporary Directories.
Sep 09 15:30:36 jupiter systemd[1]: Started Daily Cleanup of Temporary Directories.</pre></div><p>
    For more information on temporary files handling, see <code class="command">man 5
    tmpfiles.d</code>.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.logging"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.logging"><span class="number">14.6.2 </span><span class="name">System Log</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.logging">#</a></h3></div></div></div><p>
    <a class="xref" href="cha.systemd.html#sec.boot.systemd.basics.services_debugging" title="14.6.8. Debugging Services">Section 14.6.8, “Debugging Services”</a> explains how
    to view log messages for a given service. However, displaying log messages
    is not restricted to service logs. You can also access and query the
    complete log messages written by <code class="systemitem">systemd</code>—the so-called
    <span class="quote">“<span class="quote">Journal</span>”</span>. Use the command
    <code class="command">systemd-journalctl</code> to display the complete log messages
    starting with the oldest entries. Refer to <code class="command">man 1
    systemd-journalctl</code> for options such as applying filters or
    changing the output format.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.snapshots"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.snapshots"><span class="number">14.6.3 </span><span class="name">Snapshots</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.snapshots">#</a></h3></div></div></div><p>
    You can save the current state of <code class="systemitem">systemd</code> to a named snapshot and later
    revert to it with the <code class="command">isolate</code> subcommand. This is useful
    when testing services or custom targets, because it allows you to return to
    a defined state at any time. A snapshot is only available in the current
    session and will automatically be deleted on reboot. A snapshot name must
    end in <code class="filename">.snapshot</code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759223024128"><span class="term ">Create a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl snapshot <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="idm139759223021312"><span class="term ">Delete a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl delete <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="idm139759223018496"><span class="term ">View a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl show <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="idm139759223015680"><span class="term ">Activate a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl isolate <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd></dl></div></div><div class="sect2 " id="sec.boot.systemd.advanced.kernel_modules"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.kernel_modules"><span class="number">14.6.4 </span><span class="name">Loading Kernel Modules</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.kernel_modules">#</a></h3></div></div></div><p>
    With <code class="systemitem">systemd</code>, kernel modules can automatically be loaded at boot time via
    a configuration file in <code class="filename">/etc/modules-load.d</code>. The file
    should be named <em class="replaceable ">MODULE</em>.conf and have the
    following content:
   </p><div class="verbatim-wrap"><pre class="screen"># load module <em class="replaceable ">MODULE</em> at boot time
<em class="replaceable ">MODULE</em></pre></div><p>
    In case a package installs a configuration file for loading a kernel
    module, the file gets installed to
    <code class="filename">/usr/lib/modules-load.d</code>. If two configuration files
    with the same name exist, the one in
    <code class="filename">/etc/modules-load.d</code> tales precedence.
   </p><p>
    For more information, see the <code class="systemitem">modules-load.d(5)</code>
    man page.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.before.local"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.before.local"><span class="number">14.6.5 </span><span class="name">Performing Actions before Loading a Service</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.before.local">#</a></h3></div></div></div><p>
    With System V init actions that need to be performed before loading a
    service, needed to be specified in <code class="filename">/etc/init.d/before.local
    </code>. This procedure is no longer supported with systemd. If you
    need to do actions before starting services, do the following:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759223002784"><span class="term ">Loading Kernel Modules</span></dt><dd><p>
       Create a drop-in file in <code class="filename">/etc/modules-load.d</code>
       directory (see <code class="command">man modules-load.d</code> for the syntax)
      </p></dd><dt id="idm139759223000080"><span class="term ">
     Creating Files or Directories, Cleaning-up Directories, Changing
     Ownership
     </span></dt><dd><p>
       Create a drop-in file in <code class="filename">/etc/tmpfiles.d</code> (see
       <code class="command">man tmpfiles.d</code> for the syntax)
      </p></dd><dt id="idm139759222997296"><span class="term ">Other Tasks</span></dt><dd><p>
       Create a system service file, for example
       <code class="filename">/etc/systemd/system/before.service</code>, from the
       following template:
      </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Before=<em class="replaceable ">NAME OF THE SERVICE YOU WANT THIS SERVICE TO BE STARTED BEFORE</em>
[Service]
Type=oneshot
RemainAfterExit=true
ExecStart=<em class="replaceable ">YOUR_COMMAND</em>
# beware, executable is run directly, not through a shell, check the man pages
# systemd.service and systemd.unit for full syntax
[Install]
# target in which to start the service
WantedBy=multi-user.target
#WantedBy=graphical.target</pre></div><p>
       When the service file is created, you should run the following commands
       (as <code class="systemitem">root</code>):
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl daemon-reload
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl enable before</pre></div><p>
       Every time you modify the service file, you need to run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl daemon-reload</pre></div></dd></dl></div></div><div class="sect2 " id="sec.boot.systemd.advanced.cgroups"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.cgroups"><span class="number">14.6.6 </span><span class="name">Kernel Control Groups (cgroups)</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.cgroups">#</a></h3></div></div></div><p>
    On a traditional System V init system it is not always possible to clearly
    assign a process to the service that spawned it. Some services, such as
    Apache, spawn a lot of third-party processes (for example CGI or Java
    processes), which themselves spawn more processes. This makes a clear
    assignment difficult or even impossible. Additionally, a service may not
    terminate correctly, leaving some children alive.
   </p><p>
    systemd solves this problem by placing each service into its own cgroup.
    cgroups are a kernel feature that allows aggregating processes and all
    their children into hierarchical organized groups. systemd names each
    cgroup after its service. Since a non-privileged process is not allowed to
    <span class="quote">“<span class="quote">leave</span>”</span> its cgroup, this provides an effective way to label
    all processes spawned by a service with the name of the service.
   </p><p>
    To list all processes belonging to a service, use the command
    <code class="command">systemd-cgls</code>. The result will look like the following
    (shortened) example:
   </p><div class="example" id="idm139759222984112"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 14.3: </span><span class="name">List all Processes Belonging to a Service </span><a title="Permalink" class="permalink" href="cha.systemd.html#idm139759222984112">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-cgls --no-pager
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 20
├─user.slice
│ └─user-1000.slice
│   ├─session-102.scope
│   │ ├─12426 gdm-session-worker [pam/gdm-password]
│   │ ├─15831 gdm-session-worker [pam/gdm-password]
│   │ ├─15839 gdm-session-worker [pam/gdm-password]
│   │ ├─15858 /usr/lib/gnome-terminal-server

[...]

└─system.slice
  ├─systemd-hostnamed.service
  │ └─17616 /usr/lib/systemd/systemd-hostnamed
  ├─cron.service
  │ └─1689 /usr/sbin/cron -n
  ├─postfix.service
  │ ├─ 1676 /usr/lib/postfix/master -w
  │ ├─ 1679 qmgr -l -t fifo -u
  │ └─15590 pickup -l -t fifo -u
  ├─sshd.service
  │ └─1436 /usr/sbin/sshd -D

[...]</pre></div></div></div><p>
    See <span class="intraxref">Book “<em class="citetitle ">System Analysis and Tuning Guide</em>”, Chapter 9 “Kernel Control Groups”</span> for more information about
    cgroups.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.kill"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.kill"><span class="number">14.6.7 </span><span class="name">Terminating Services (Sending Signals)</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.advanced.kill">#</a></h3></div></div></div><p>
    As explained in <a class="xref" href="cha.systemd.html#sec.boot.systemd.advanced.cgroups" title="14.6.6. Kernel Control Groups (cgroups)">Section 14.6.6, “Kernel Control Groups (cgroups)”</a>, it is
    not always possible to assign a process to its parent service process in a
    System V init system. This makes it difficult to terminate a service and
    all of its children. Child processes that have not been terminated will
    remain as zombie processes.
   </p><p>
    systemd's concept of confining each service into a cgroup makes it possible
    to clearly identify all child processes of a service and therefore allows
    you to send a signal to each of these processes. Use <code class="command">systemctl
    kill</code> to send signals to services. For a list of available signals
    refer to <code class="command">man 7 signals</code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759222975872"><span class="term ">Sending <code class="systemitem">SIGTERM</code> to a Service</span></dt><dd><p>
       <code class="systemitem">SIGTERM</code> is the default signal that is sent.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl kill <em class="replaceable ">MY_SERVICE</em></pre></div></dd><dt id="idm139759222971840"><span class="term ">Sending <em class="replaceable ">SIGNAL</em> to a Service</span></dt><dd><p>
       Use the <code class="option">-s</code> option to specify the signal that should be
       sent.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl kill -s <em class="replaceable ">SIGNAL</em> <em class="replaceable ">MY_SERVICE</em></pre></div></dd><dt id="idm139759222967344"><span class="term ">Selecting Processes</span></dt><dd><p>
       By default the <code class="command">kill</code> command sends the signal to
       <code class="option">all</code> processes of the specified cgroup. You can restrict
       it to the <code class="option">control</code> or the <code class="option">main</code> process.
       The latter is for example useful to force a service to reload its
       configuration by sending <code class="systemitem">SIGHUP</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl kill -s SIGHUP --kill-who=main <em class="replaceable ">MY_SERVICE</em></pre></div></dd></dl></div><div id="idm139759222961648" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Terminating or Restarting the D-Bus Service is Not Supported</h6><p>
     The D-Bus service is the message bus for communication between systemd
     clients and the systemd manager that is running as pid 1. Even though
     <code class="systemitem">dbus</code> is a stand-alone daemon, it
     is an integral part of the init infrastructure.
    </p><p>
     Terminating <code class="systemitem">dbus</code> or
     restarting it in the running system is similar to an attempt to terminate
     or restart pid 1. It will break systemd client/server communication and
     make most systemd functions unusable.
    </p><p>
     Therefore, terminating or restarting
     <code class="systemitem">dbus</code> is neither recommended
     nor supported.
    </p></div></div><div class="sect2 " id="sec.boot.systemd.basics.services_debugging"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.basics.services_debugging"><span class="number">14.6.8 </span><span class="name">Debugging Services</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.basics.services_debugging">#</a></h3></div></div></div><p>
    By default, systemd is not overly verbose. If a service was started
    successfully, no output will be produced. In case of a failure, a short
    error message will be displayed. However, <code class="command">systemctl
    status</code> provides means to debug start-up and operation of a
    service.
   </p><p>
    systemd comes with its own logging mechanism (<span class="quote">“<span class="quote">The Journal</span>”</span>)
    that logs system messages. This allows you to display the service messages
    together with status messages. The <code class="command">status</code> command works
    similar to <code class="command">tail</code> and can also display the log messages in
    different formats, making it a powerful debugging tool.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759222951888"><span class="term ">Show Service Start-Up Failure</span></dt><dd><p>
       Whenever a service fails to start, use <code class="command">systemctl status
       <em class="replaceable ">MY_SERVICE</em></code> to get a detailed error
       message:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl start apache2
Job failed. See system journal and 'systemctl status' for details.
<code class="prompt root">root # </code>systemctl status apache2
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: failed (Result: exit-code) since Mon, 04 Jun 2012 16:52:26 +0200; 29s ago
   Process: 3088 ExecStart=/usr/sbin/start_apache2 -D SYSTEMD -k start (code=exited, status=1/FAILURE)
   CGroup: name=systemd:/system/apache2.service

Jun 04 16:52:26 g144 start_apache2[3088]: httpd2-prefork: Syntax error on line
205 of /etc/apache2/httpd.conf: Syntax error on li...alHost&gt;</pre></div></dd><dt id="idm139759222947008"><span class="term ">Show Last <em class="replaceable ">N</em> Service Messages</span></dt><dd><p>
       The default behavior of the <code class="command">status</code> subcommand is to
       display the last ten messages a service issued. To change the number of
       messages to show, use the
       <code class="option">--lines=<em class="replaceable ">N</em></code> parameter:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl status chronyd
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl --lines=20 status chronyd</pre></div></dd><dt id="idm139759222941648"><span class="term ">Show Service Messages in Append Mode</span></dt><dd><p>
       To display a <span class="quote">“<span class="quote">live stream</span>”</span> of service messages, use the
       <code class="option">--follow</code> option, which works like
       <code class="command">tail</code> <code class="option">-f</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl --follow status chronyd</pre></div></dd><dt id="idm139759222936976"><span class="term ">Messages Output Format</span></dt><dd><p>
       The <code class="option">--output=<em class="replaceable ">MODE</em></code> parameter
       allows you to change the output format of service messages. The most
       important modes available are:
      </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759222934368"><span class="term "><code class="option">short</code>
        </span></dt><dd><p>
          The default format. Shows the log messages with a human readable time
          stamp.
         </p></dd><dt id="idm139759222932192"><span class="term "><code class="option">verbose</code>
        </span></dt><dd><p>
          Full output with all fields.
         </p></dd><dt id="idm139759222930080"><span class="term "><code class="option">cat</code>
        </span></dt><dd><p>
          Terse output without time stamps.
         </p></dd></dl></div></dd></dl></div></div></div><div class="sect1 " id="sec.boot.systemd.info"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.info"><span class="number">14.7 </span><span class="name">More Information</span> <a title="Permalink" class="permalink" href="cha.systemd.html#sec.boot.systemd.info">#</a></h2></div></div></div><p>
   For more information on systemd refer to the following online resources:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139759222925104"><span class="term ">Homepage</span></dt><dd><p>
      <a class="link" href="http://www.freedesktop.org/wiki/Software/systemd" target="_blank">http://www.freedesktop.org/wiki/Software/systemd</a>
     </p></dd><dt id="idm139759222922720"><span class="term ">systemd for Administrators</span></dt><dd><p>
      Lennart Pöttering, one of the systemd authors, has written a series of
      blog entries (13 at the time of writing this chapter). Find them at
      <a class="link" href="http://0pointer.de/blog/projects" target="_blank">http://0pointer.de/blog/projects</a>.
     </p></dd></dl></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="part.system.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Part III </span>System</span></a><a class="nav-link" href="cha.grub2.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 13 </span>The Boot Loader GRUB 2</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>