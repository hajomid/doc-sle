<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Administration Guide | SUSE Linux Enterprise Desktop 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1)" /><meta name="product-name" content="SUSE Linux Enterprise Desktop" /><meta name="product-number" content="15" /><meta name="book-title" content="Administration Guide" /><meta name="description" content="Covers system administration tasks like maintaining, monitoring and customizing an initially installed system." /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Desktop 15" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft single offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs inactive"><a class="single-crumb" href="#book.sle.admin" accesskey="c"><span class="single-contents-icon"></span>Administration Guide</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#book.sle.admin" accesskey="c"><span class="single-contents-icon"></span>Show Contents: Administration Guide</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#pre.sle"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="#part.administration"><span class="number">I </span><span class="name">Common Tasks</span></a><ol><li class="inactive"><a href="#cha.adm.shell"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span></a></li><li class="inactive"><a href="#cha.adm.sudo"><span class="number">2 </span><span class="name">sudo
</span></a></li><li class="inactive"><a href="#cha.onlineupdate.you"><span class="number">3 </span><span class="name">YaST Online Update</span></a></li><li class="inactive"><a href="#cha.yast.gui"><span class="number">4 </span><span class="name">YaST</span></a></li><li class="inactive"><a href="#cha.yast.text"><span class="number">5 </span><span class="name">YaST in Text Mode</span></a></li><li class="inactive"><a href="#cha.sw_cl"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span></a></li><li class="inactive"><a href="#cha.snapper"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span></a></li><li class="inactive"><a href="#cha.vnc"><span class="number">8 </span><span class="name">Remote Access with VNC</span></a></li><li class="inactive"><a href="#cha.net.rsync"><span class="number">9 </span><span class="name">File Copying with RSync</span></a></li><li class="inactive"><a href="#cha.gnome.gconf"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span></a></li></ol></li><li class="inactive"><a href="#part.boot"><span class="number">II </span><span class="name">Booting a Linux System</span></a><ol><li class="inactive"><a href="#cha.boot"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span></a></li><li class="inactive"><a href="#cha.uefi"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li class="inactive"><a href="#cha.grub2"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span></a></li><li class="inactive"><a href="#cha.systemd"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span></a></li></ol></li><li class="inactive"><a href="#part.system"><span class="number">III </span><span class="name">System</span></a><ol><li class="inactive"><a href="#cha.64bit"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span></a></li><li class="inactive"><a href="#cha.journalctl"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span></a></li><li class="inactive"><a href="#cha.update-alternative"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span></a></li><li class="inactive"><a href="#cha.network"><span class="number">18 </span><span class="name">Basic Networking</span></a></li><li class="inactive"><a href="#cha.print"><span class="number">19 </span><span class="name">Printer Operation</span></a></li><li class="inactive"><a href="#cha.x11"><span class="number">20 </span><span class="name">The X Window System</span></a></li><li class="inactive"><a href="#cha.fuse"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span></a></li><li class="inactive"><a href="#cha.mod"><span class="number">22 </span><span class="name">Managing Kernel Modules</span></a></li><li class="inactive"><a href="#cha.udev"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span></a></li><li class="inactive"><a href="#cha.kgraft"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span></a></li><li class="inactive"><a href="#cha.suse"><span class="number">25 </span><span class="name">Special System Features</span></a></li><li class="inactive"><a href="#cha.nm"><span class="number">26 </span><span class="name">Using NetworkManager</span></a></li><li class="inactive"><a href="#cha.power-mgmt"><span class="number">27 </span><span class="name">Power Management</span></a></li></ol></li><li class="inactive"><a href="#part.services"><span class="number">IV </span><span class="name">Services</span></a><ol><li class="inactive"><a href="#cha.ntp"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span></a></li><li class="inactive"><a href="#cha.nfs"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span></a></li><li class="inactive"><a href="#cha.samba"><span class="number">30 </span><span class="name">Samba</span></a></li><li class="inactive"><a href="#cha.autofs"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span></a></li></ol></li><li class="inactive"><a href="#part.trouble"><span class="number">V </span><span class="name">Troubleshooting</span></a><ol><li class="inactive"><a href="#cha.adminhelp"><span class="number">32 </span><span class="name">Help and Documentation</span></a></li><li class="inactive"><a href="#cha.adm.support"><span class="number">33 </span><span class="name">Gathering System Information for Support</span></a></li><li class="inactive"><a href="#cha.trouble"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span></a></li></ol></li><li class="inactive"><a href="#app.nwscheme"><span class="number">A </span><span class="name">An Example Network</span></a></li><li class="inactive"><a href="#idm139698745195120"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class="draft "><div class="documentation"><div xml:lang="en" class="book" id="book.sle.admin" lang="en"><div class="titlepage"><div><h6 class="version-info"><span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></h6><div><h1 class="title"><em class="citetitle ">Administration Guide</em></h1></div><div class="abstract "><p>
    Covers system administration tasks like maintaining,
     monitoring and customizing an initially installed system.
   </p></div><div class="date"><span class="imprint-label">Publication Date: </span>
February 23, 2018
</div></div></div><div class="toc"><dl><dt><span class="preface"><a href="#pre.sle"><span class="name">About This Guide</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#idm139698755274224"><span class="name">Available Documentation</span></a></span></dt><dt><span class="sect1"><a href="#idm139698756046832"><span class="name">Feedback</span></a></span></dt><dt><span class="sect1"><a href="#idm139698754770144"><span class="name">Documentation Conventions</span></a></span></dt><dt><span class="sect1"><a href="#idm139698754827504"><span class="name">About the Making of This Documentation</span></a></span></dt></dl></dd><dt><span class="part"><a href="#part.administration"><span class="number">I </span><span class="name">Common Tasks</span></a></span></dt><dd><dl><dt><span class="chapter"><a href="#cha.adm.shell"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.adm.whatistheshell"><span class="number">1.1 </span><span class="name">What is <span class="quote">“<span class="quote">The Shell</span>”</span>?</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shellscripts"><span class="number">1.2 </span><span class="name">Writing Shell Scripts</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.redirect"><span class="number">1.3 </span><span class="name">Redirecting Command Events</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.alias"><span class="number">1.4 </span><span class="name">Using Aliases</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.variables"><span class="number">1.5 </span><span class="name">Using Variables in Bash</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.grouping"><span class="number">1.6 </span><span class="name">Grouping and Combining Commands</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.commonconstructs"><span class="number">1.7 </span><span class="name">Working with Common Flow Constructs</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.moreinfo"><span class="number">1.8 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.adm.sudo"><span class="number">2 </span><span class="name">sudo
</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.adm.sudo.usage"><span class="number">2.1 </span><span class="name">Basic <code class="command">sudo</code> Usage</span></a></span></dt><dt><span class="sect1"><a href="#sec.sudo.conf"><span class="number">2.2 </span><span class="name">Configuring <code class="command">sudo</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.sudo.usecases"><span class="number">2.3 </span><span class="name">Common Use Cases</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.sudo.moreinfo"><span class="number">2.4 </span><span class="name">More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.onlineupdate.you"><span class="number">3 </span><span class="name">YaST Online Update</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.onlineupdate.you.overview"><span class="number">3.1 </span><span class="name">The Online Update Dialog</span></a></span></dt><dt><span class="sect1"><a href="#sec.onlineupdate.you.install"><span class="number">3.2 </span><span class="name">Installing Patches</span></a></span></dt><dt><span class="sect1"><a href="#sec.onlineupdate.you.automatically"><span class="number">3.3 </span><span class="name">Automatic Online Update</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.yast.gui"><span class="number">4 </span><span class="name">YaST</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.yast.gui.key_combination"><span class="number">4.1 </span><span class="name">Advanced Key Combinations</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.yast.text"><span class="number">5 </span><span class="name">YaST in Text Mode</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.yast.cli.navigate"><span class="number">5.1 </span><span class="name">Navigation in Modules</span></a></span></dt><dt><span class="sect1"><a href="#sec.yast.cli.key_combination"><span class="number">5.2 </span><span class="name">Advanced Key Combinations</span></a></span></dt><dt><span class="sect1"><a href="#sec.yast.cli.restricted_keys"><span class="number">5.3 </span><span class="name">Restriction of Key Combinations</span></a></span></dt><dt><span class="sect1"><a href="#sec.yast.cli.options"><span class="number">5.4 </span><span class="name">YaST Command Line Options</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.sw_cl"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.zypper"><span class="number">6.1 </span><span class="name">Using Zypper</span></a></span></dt><dt><span class="sect1"><a href="#sec.rpm"><span class="number">6.2 </span><span class="name">RPM—the Package Manager</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.snapper"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.snapper.setup"><span class="number">7.1 </span><span class="name">Default Setup</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.undo"><span class="number">7.2 </span><span class="name">Using Snapper to Undo Changes</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.snapshot-boot"><span class="number">7.3 </span><span class="name">System Rollback by Booting from Snapshots</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.config"><span class="number">7.4 </span><span class="name">Creating and Modifying Snapper Configurations</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.manage"><span class="number">7.5 </span><span class="name">Manually Creating and Managing Snapshots</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.clean-up"><span class="number">7.6 </span><span class="name">Automatic Snapshot Clean-Up</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.faqs"><span class="number">7.7 </span><span class="name">Frequently Asked Questions</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.vnc"><span class="number">8 </span><span class="name">Remote Access with VNC</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.vnc.viewer"><span class="number">8.1 </span><span class="name">The <code class="command">vncviewer</code> Client</span></a></span></dt><dt><span class="sect1"><a href="#vnc.remmina"><span class="number">8.2 </span><span class="name">Remmina: the Remote Desktop Client</span></a></span></dt><dt><span class="sect1"><a href="#sec.vnc.one-time"><span class="number">8.3 </span><span class="name">One-time VNC Sessions</span></a></span></dt><dt><span class="sect1"><a href="#sec.vnc.persistent"><span class="number">8.4 </span><span class="name">Persistent VNC Sessions</span></a></span></dt><dt><span class="sect1"><a href="#sec.vnc.encrypt"><span class="number">8.5 </span><span class="name">Encrypted VNC Communication</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.net.rsync"><span class="number">9 </span><span class="name">File Copying with RSync</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.net.rsync.overview"><span class="number">9.1 </span><span class="name">Conceptual Overview</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.syntax"><span class="number">9.2 </span><span class="name">Basic Syntax</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.local-copy"><span class="number">9.3 </span><span class="name">Copying Files and Directories Locally</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.remote-copy"><span class="number">9.4 </span><span class="name">Copying Files and Directories Remotely</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.server"><span class="number">9.5 </span><span class="name">Configuring and Using an Rsync Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.summary"><span class="number">9.6 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.gnome.gconf"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.gnome.gconf.autostart"><span class="number">10.1 </span><span class="name">Starting Applications Automatically</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.automount"><span class="number">10.2 </span><span class="name">Automounting and Managing Media Devices</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.pref_app"><span class="number">10.3 </span><span class="name">Changing Preferred Applications</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.templates"><span class="number">10.4 </span><span class="name">Adding Document Templates</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.info"><span class="number">10.5 </span><span class="name">For More Information</span></a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#part.boot"><span class="number">II </span><span class="name">Booting a Linux System</span></a></span></dt><dd><dl><dt><span class="chapter"><a href="#cha.boot"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.boot.proc"><span class="number">11.1 </span><span class="name">The Linux Boot Process</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.initrd"><span class="number">11.2 </span><span class="name"><code class="systemitem">initramfs</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.linuxrc"><span class="number">11.3 </span><span class="name">Init on <code class="systemitem">initramfs</code></span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.uefi"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.uefi.secboot"><span class="number">12.1 </span><span class="name">Secure Boot</span></a></span></dt><dt><span class="sect1"><a href="#sec.uefi.moreinfo"><span class="number">12.2 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.grub2"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.grub2.new.features"><span class="number">13.1 </span><span class="name">Main Differences between GRUB Legacy and GRUB 2</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.file_structure"><span class="number">13.2 </span><span class="name">Configuration File Structure</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.yast2.config"><span class="number">13.3 </span><span class="name">Configuring the Boot Loader with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.zseries"><span class="number">13.4 </span><span class="name">Differences in Terminal Usage on z Systems</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.commands"><span class="number">13.5 </span><span class="name">Helpful GRUB 2 Commands</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.info"><span class="number">13.6 </span><span class="name">More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.systemd"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.boot.systemd.concept"><span class="number">14.1 </span><span class="name">The systemd Concept</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.basics"><span class="number">14.2 </span><span class="name">Basic Usage</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.boot"><span class="number">14.3 </span><span class="name">System Start and Target Management</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.runlevel.edit"><span class="number">14.4 </span><span class="name">Managing Services with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.custom"><span class="number">14.5 </span><span class="name">Customization of <code class="systemitem">systemd</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.advanced"><span class="number">14.6 </span><span class="name">Advanced Usage</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.info"><span class="number">14.7 </span><span class="name">More Information</span></a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#part.system"><span class="number">III </span><span class="name">System</span></a></span></dt><dd><dl><dt><span class="chapter"><a href="#cha.64bit"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.64bit.runt"><span class="number">15.1 </span><span class="name">Runtime Support</span></a></span></dt><dt><span class="sect1"><a href="#sec.64bit.devel"><span class="number">15.2 </span><span class="name">Software Development</span></a></span></dt><dt><span class="sect1"><a href="#sec.64bit.biarch"><span class="number">15.3 </span><span class="name">Software Compilation on Biarch Platforms</span></a></span></dt><dt><span class="sect1"><a href="#sec.64bit.kernel"><span class="number">15.4 </span><span class="name">Kernel Specifications</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.journalctl"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.journalctl.persistent"><span class="number">16.1 </span><span class="name">Making the Journal Persistent</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.switches"><span class="number">16.2 </span><span class="name"><code class="command">journalctl</code> Useful Switches</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.filter"><span class="number">16.3 </span><span class="name">Filtering the Journal Output</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.investigate"><span class="number">16.4 </span><span class="name">Investigating <code class="systemitem">systemd</code> Errors</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.config"><span class="number">16.5 </span><span class="name">Journald Configuration</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.yast"><span class="number">16.6 </span><span class="name">Using YaST to Filter the <code class="systemitem">systemd</code> Journal</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.update-alternative"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.ua.concept"><span class="number">17.1 </span><span class="name">Conceptual Overview</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.use-cases"><span class="number">17.2 </span><span class="name">Use Cases</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.view"><span class="number">17.3 </span><span class="name">Viewing Alternatives</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.set"><span class="number">17.4 </span><span class="name">Setting the Default Version of Alternatives</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.install"><span class="number">17.5 </span><span class="name">Installing Custom Alternatives</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.slave"><span class="number">17.6 </span><span class="name">Defining Dependent Alternatives</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.network"><span class="number">18 </span><span class="name">Basic Networking</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.network.addresses"><span class="number">18.1 </span><span class="name">IP Addresses and Routing</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.ipv6"><span class="number">18.2 </span><span class="name">IPv6—The Next Generation Internet</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.nameres"><span class="number">18.3 </span><span class="name">Name Resolution</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.yast"><span class="number">18.4 </span><span class="name">Configuring a Network Connection with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.nm"><span class="number">18.5 </span><span class="name">NetworkManager</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.manconf"><span class="number">18.6 </span><span class="name">Configuring a Network Connection Manually</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.iface-bonding"><span class="number">18.7 </span><span class="name">Setting Up Bonding Devices</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.iface-teaming"><span class="number">18.8 </span><span class="name">Setting Up Team Devices for Network Teaming</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.print"><span class="number">19 </span><span class="name">Printer Operation</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.print.workflow"><span class="number">19.1 </span><span class="name">The CUPS Workflow</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.method"><span class="number">19.2 </span><span class="name">Methods and Protocols for Connecting Printers</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.software"><span class="number">19.3 </span><span class="name">Installing the Software</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.net"><span class="number">19.4 </span><span class="name">Network Printers</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.net.config_cmdl"><span class="number">19.5 </span><span class="name">Configuring CUPS with Command Line Tools</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.appl.commandline"><span class="number">19.6 </span><span class="name">Printing from the Command Line</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.special"><span class="number">19.7 </span><span class="name">Special Features in <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span></a></span></dt><dt><span class="sect1"><a href="#sec.print.prob"><span class="number">19.8 </span><span class="name">Troubleshooting</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.x11"><span class="number">20 </span><span class="name">The X Window System</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.x11.fontsys"><span class="number">20.1 </span><span class="name">Installing and Configuring Fonts</span></a></span></dt><dt><span class="sect1"><a href="#sec.x11.moreinfo"><span class="number">20.2 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.fuse"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.fuse.config"><span class="number">21.1 </span><span class="name">Configuring FUSE</span></a></span></dt><dt><span class="sect1"><a href="#sec.fuse.ntfs"><span class="number">21.2 </span><span class="name">Mounting an NTFS Partition</span></a></span></dt><dt><span class="sect1"><a href="#sec.fuse.moreinfo"><span class="number">21.3 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.mod"><span class="number">22 </span><span class="name">Managing Kernel Modules</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.mod.lsmod"><span class="number">22.1 </span><span class="name">Listing Loaded Modules with lsmod and modinfo</span></a></span></dt><dt><span class="sect1"><a href="#sec.mod.modprobe"><span class="number">22.2 </span><span class="name">Adding and Removing Kernel Modules</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.udev"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.udev.devdir"><span class="number">23.1 </span><span class="name">The <code class="filename">/dev</code> Directory</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.kernel"><span class="number">23.2 </span><span class="name">Kernel <code class="systemitem">uevents</code> and <code class="systemitem">udev</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.drivers"><span class="number">23.3 </span><span class="name">Drivers, Kernel Modules and Devices</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.boot"><span class="number">23.4 </span><span class="name">Booting and Initial Device Setup</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.debug"><span class="number">23.5 </span><span class="name">Monitoring the Running <code class="systemitem">udev</code> Daemon</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.rules"><span class="number">23.6 </span><span class="name">Influencing Kernel Device Event Handling with <code class="systemitem">udev</code> Rules</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.persdev"><span class="number">23.7 </span><span class="name">Persistent Device Naming</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.files"><span class="number">23.8 </span><span class="name">Files used by <code class="systemitem">udev</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.moreinfo"><span class="number">23.9 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.kgraft"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.kgraft.advantages"><span class="number">24.1 </span><span class="name">Advantages of kGraft</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.low-level"><span class="number">24.2 </span><span class="name">Low-level Function of kGraft</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.install_patch"><span class="number">24.3 </span><span class="name">Installing kGraft Patches</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.lifecycle"><span class="number">24.4 </span><span class="name">Patch Lifecycle</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.remove"><span class="number">24.5 </span><span class="name">Removing a kGraft Patch</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.exec_threads"><span class="number">24.6 </span><span class="name">Stuck Kernel Execution Threads</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.kgr"><span class="number">24.7 </span><span class="name">The <code class="command">kgr</code> Tool</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.scope"><span class="number">24.8 </span><span class="name">Scope of kGraft Technology</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.scope_patching"><span class="number">24.9 </span><span class="name">Scope of SLE Live Patching</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.support_interaction"><span class="number">24.10 </span><span class="name">Interaction with the Support Processes</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.suse"><span class="number">25 </span><span class="name">Special System Features</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.suse.packages"><span class="number">25.1 </span><span class="name">Information about Special Software Packages</span></a></span></dt><dt><span class="sect1"><a href="#sec.suse.virt.konsolen"><span class="number">25.2 </span><span class="name">Virtual Consoles</span></a></span></dt><dt><span class="sect1"><a href="#sec.suse.kb"><span class="number">25.3 </span><span class="name">Keyboard Mapping</span></a></span></dt><dt><span class="sect1"><a href="#sec.suse.l10n"><span class="number">25.4 </span><span class="name">Language and Country-Specific Settings</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.nm"><span class="number">26 </span><span class="name">Using NetworkManager</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.nm.usecase"><span class="number">26.1 </span><span class="name">Use Cases for NetworkManager</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.activate"><span class="number">26.2 </span><span class="name">Enabling or Disabling NetworkManager</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.configure"><span class="number">26.3 </span><span class="name">Configuring Network Connections</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.security"><span class="number">26.4 </span><span class="name">NetworkManager and Security</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.faq"><span class="number">26.5 </span><span class="name">Frequently Asked Questions</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.trouble"><span class="number">26.6 </span><span class="name">Troubleshooting</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.more"><span class="number">26.7 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.power-mgmt"><span class="number">27 </span><span class="name">Power Management</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.power-mgmt.save"><span class="number">27.1 </span><span class="name">Power Saving Functions</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.acpi"><span class="number">27.2 </span><span class="name">Advanced Configuration and Power Interface (ACPI)</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.silenthd"><span class="number">27.3 </span><span class="name">Rest for the Hard Disk</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.faq"><span class="number">27.4 </span><span class="name">Troubleshooting</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.info"><span class="number">27.5 </span><span class="name">For More Information</span></a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#part.services"><span class="number">IV </span><span class="name">Services</span></a></span></dt><dd><dl><dt><span class="chapter"><a href="#cha.ntp"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.ntp.yast"><span class="number">28.1 </span><span class="name">Configuring an NTP Client with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.netconf"><span class="number">28.2 </span><span class="name">Manually Configuring NTP in the Network</span></a></span></dt><dt><span class="sect1"><a href="#ntp.chronyc"><span class="number">28.3 </span><span class="name">Configure <code class="systemitem">chronyd</code> at Runtime using <code class="command">chronyc</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.dynamic"><span class="number">28.4 </span><span class="name">Dynamic Time Synchronization at Runtime</span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.normal"><span class="number">28.5 </span><span class="name">Setting Up a Local Reference Clock</span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.etr"><span class="number">28.6 </span><span class="name">Clock Synchronization to an External Time Reference (ETR)</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.nfs"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.nfs.overview"><span class="number">29.1 </span><span class="name">Overview</span></a></span></dt><dt><span class="sect1"><a href="#sec.nfs.installation-sled"><span class="number">29.2 </span><span class="name">Installing NFS Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.nfs.configuring-nfs-clients"><span class="number">29.3 </span><span class="name">Configuring Clients</span></a></span></dt><dt><span class="sect1"><a href="#sec.nfs.info"><span class="number">29.4 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.samba"><span class="number">30 </span><span class="name">Samba</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.samba.term"><span class="number">30.1 </span><span class="name">Terminology</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.install"><span class="number">30.2 </span><span class="name">Installing a Samba Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.serv.inst"><span class="number">30.3 </span><span class="name">Configuring a Samba Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.client.inst"><span class="number">30.4 </span><span class="name">Configuring Clients</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.anmeld.serv"><span class="number">30.5 </span><span class="name">Samba as Login Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.advanced"><span class="number">30.6 </span><span class="name">Advanced Topics</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.info"><span class="number">30.7 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.autofs"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.autofs.installation"><span class="number">31.1 </span><span class="name">Installation</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.configuration"><span class="number">31.2 </span><span class="name">Configuration</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.debugging"><span class="number">31.3 </span><span class="name">Operation and Debugging</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.nfs"><span class="number">31.4 </span><span class="name">Auto-Mounting an NFS Share</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.advanced"><span class="number">31.5 </span><span class="name">Advanced Topics</span></a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#part.trouble"><span class="number">V </span><span class="name">Troubleshooting</span></a></span></dt><dd><dl><dt><span class="chapter"><a href="#cha.adminhelp"><span class="number">32 </span><span class="name">Help and Documentation</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.help.onboard.docdir"><span class="number">32.1 </span><span class="name">Documentation Directory</span></a></span></dt><dt><span class="sect1"><a href="#sec.help.onboard.manpages"><span class="number">32.2 </span><span class="name">Man Pages</span></a></span></dt><dt><span class="sect1"><a href="#sec.help.onboard.infopages"><span class="number">32.3 </span><span class="name">Info Pages</span></a></span></dt><dt><span class="sect1"><a href="#sec.help.online"><span class="number">32.4 </span><span class="name">Online Resources</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.adm.support"><span class="number">33 </span><span class="name">Gathering System Information for Support</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.admsupport.hostinfo"><span class="number">33.1 </span><span class="name">Displaying Current System Information</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.supportconfig"><span class="number">33.2 </span><span class="name">Collecting System Information with Supportconfig</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.submit"><span class="number">33.3 </span><span class="name">Submitting Information to Global Technical Support</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.sca"><span class="number">33.4 </span><span class="name">Analyzing System Information</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.install"><span class="number">33.5 </span><span class="name">Gathering Information during the Installation</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.kernel"><span class="number">33.6 </span><span class="name">Support of Kernel Modules</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.moreinfo"><span class="number">33.7 </span><span class="name">For More Information</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.trouble"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.trouble.info"><span class="number">34.1 </span><span class="name">Finding and Gathering Information</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.boot"><span class="number">34.2 </span><span class="name">Boot Problems</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.login"><span class="number">34.3 </span><span class="name">Login Problems</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.netconfig"><span class="number">34.4 </span><span class="name">Network Problems</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.data"><span class="number">34.5 </span><span class="name">Data Problems</span></a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#app.nwscheme"><span class="number">A </span><span class="name">An Example Network</span></a></span></dt><dt><span class="appendix"><a href="#idm139698745195120"><span class="number">B </span><span class="name">GNU Licenses</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#idm139698745190480"><span class="number">B.1 </span><span class="name">GNU Free Documentation License</span></a></span></dt></dl></dd></dl></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><dl><dt><span class="figure"><a href="#idm139698753314752"><span class="number">3.1 </span><span class="name">YaST Online Update</span></a></span></dt><dt><span class="figure"><a href="#fig.yast2.ncurses"><span class="number">5.1 </span><span class="name">Main Window of YaST in Text Mode</span></a></span></dt><dt><span class="figure"><a href="#fig.yast2.ncurses_inst"><span class="number">5.2 </span><span class="name">The Software Installation Module</span></a></span></dt><dt><span class="figure"><a href="#fig.snapper.snapshot-boot.identify"><span class="number">7.1 </span><span class="name">Boot Loader: Snapshots</span></a></span></dt><dt><span class="figure"><a href="#fig.vnc.viewer.connectgui"><span class="number">8.1 </span><span class="name">vncviewer</span></a></span></dt><dt><span class="figure"><a href="#idm139698751718272"><span class="number">8.2 </span><span class="name">Remmina's Main Window</span></a></span></dt><dt><span class="figure"><a href="#idm139698751705248"><span class="number">8.3 </span><span class="name">Remote Desktop Preference</span></a></span></dt><dt><span class="figure"><a href="#idm139698751681552"><span class="number">8.4 </span><span class="name">Quick-starting</span></a></span></dt><dt><span class="figure"><a href="#idm139698751672224"><span class="number">8.5 </span><span class="name">Remmina Viewing SLES 15 Remote Session</span></a></span></dt><dt><span class="figure"><a href="#idm139698751654864"><span class="number">8.6 </span><span class="name">Reading Path to the Profile File</span></a></span></dt><dt><span class="figure"><a href="#idm139698751633152"><span class="number">8.7 </span><span class="name">Remote Administration</span></a></span></dt><dt><span class="figure"><a href="#idm139698751545456"><span class="number">8.8 </span><span class="name">VNC Session Settings</span></a></span></dt><dt><span class="figure"><a href="#idm139698751519600"><span class="number">8.9 </span><span class="name">Joining a Persistent VNC Session</span></a></span></dt><dt><span class="figure"><a href="#idm139698751198624"><span class="number">12.1 </span><span class="name">Secure Boot Support</span></a></span></dt><dt><span class="figure"><a href="#fig.uefi.secure.boot.mok2"><span class="number">12.2 </span><span class="name">UEFI: Secure Boot Process</span></a></span></dt><dt><span class="figure"><a href="#fig.grub2.boot.editor"><span class="number">13.1 </span><span class="name">GRUB 2 Boot Editor</span></a></span></dt><dt><span class="figure"><a href="#fig.grub2.yast.boot.code.options0"><span class="number">13.2 </span><span class="name">Boot Code Options</span></a></span></dt><dt><span class="figure"><a href="#fig.grub2.yast.boot.code.options"><span class="number">13.3 </span><span class="name">Code Options</span></a></span></dt><dt><span class="figure"><a href="#fig.grub2.yast.bootloader.options"><span class="number">13.4 </span><span class="name">Boot loader Options</span></a></span></dt><dt><span class="figure"><a href="#fig.grub2.yast.kernel.parameters"><span class="number">13.5 </span><span class="name">Kernel Parameters</span></a></span></dt><dt><span class="figure"><a href="#fig.yast2.runlevel"><span class="number">14.1 </span><span class="name">Services Manager</span></a></span></dt><dt><span class="figure"><a href="#fig.journalctl.yast"><span class="number">16.1 </span><span class="name">YaST systemd Journal</span></a></span></dt><dt><span class="figure"><a href="#fig.net.basic.OSI"><span class="number">18.1 </span><span class="name">Simplified Layer Model for TCP/IP</span></a></span></dt><dt><span class="figure"><a href="#fig.net.basic.TCPPaket"><span class="number">18.2 </span><span class="name">TCP/IP Ethernet Packet</span></a></span></dt><dt><span class="figure"><a href="#fig.yast2.neticard"><span class="number">18.3 </span><span class="name">Configuring Network Settings</span></a></span></dt><dt><span class="figure"><a href="#wicked.architecture"><span class="number">18.4 </span><span class="name"><code class="literal">wicked</code> architecture</span></a></span></dt><dt><span class="figure"><a href="#idm139698747158560"><span class="number">26.1 </span><span class="name">GNOME Network Connections Dialog</span></a></span></dt><dt><span class="figure"><a href="#idm139698746840720"><span class="number">28.1 </span><span class="name">NTP Configuration Window</span></a></span></dt><dt><span class="figure"><a href="#idm139698746815232"><span class="number">28.2 </span><span class="name">Adding a Time Server</span></a></span></dt><dt><span class="figure"><a href="#idm139698746566560"><span class="number">30.1 </span><span class="name">Windows Explorer <span class="guimenu">Advanced Attributes</span> Dialog</span></a></span></dt><dt><span class="figure"><a href="#idm139698746559696"><span class="number">30.2 </span><span class="name">Windows Explorer Directory Listing with Compressed Files</span></a></span></dt><dt><span class="figure"><a href="#fig.yast2.samba.snapshot"><span class="number">30.3 </span><span class="name">Adding a New Samba Share with Snapshotting Enabled</span></a></span></dt><dt><span class="figure"><a href="#fig.samba.win_explorer"><span class="number">30.4 </span><span class="name">The <span class="guimenu">Previous Versions</span> tab in Windows Explorer</span></a></span></dt><dt><span class="figure"><a href="#fig.scatool.html"><span class="number">33.1 </span><span class="name">HTML Report Generated by SCA Tool</span></a></span></dt><dt><span class="figure"><a href="#fig.sca.appl.html"><span class="number">33.2 </span><span class="name">HTML Report Generated by SCA Appliance</span></a></span></dt></dl></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><dl><dt><span class="table"><a href="#tab.adm.shell.config.loginshells"><span class="number">1.1 </span><span class="name">Bash Configuration Files for Login Shells</span></a></span></dt><dt><span class="table"><a href="#tab.adm.shell.configs.nonloginshells"><span class="number">1.2 </span><span class="name">Bash Configuration Files for Non-Login Shells</span></a></span></dt><dt><span class="table"><a href="#idm139698754860048"><span class="number">1.3 </span><span class="name">Special Files for Bash</span></a></span></dt><dt><span class="table"><a href="#idm139698754842096"><span class="number">1.4 </span><span class="name">Overview of a Standard Directory Tree</span></a></span></dt><dt><span class="table"><a href="#tab.adm.envars"><span class="number">1.5 </span><span class="name">Useful Environment Variables</span></a></span></dt><dt><span class="table"><a href="#tab.adm.sudo.options"><span class="number">2.1 </span><span class="name">Useful Flags and Options</span></a></span></dt><dt><span class="table"><a href="#tab.rpm.query"><span class="number">6.1 </span><span class="name">The Most Important RPM Query Options</span></a></span></dt><dt><span class="table"><a href="#tab.rpm.verify"><span class="number">6.2 </span><span class="name">RPM Verify Options</span></a></span></dt><dt><span class="table"><a href="#idm139698750514608"><span class="number">14.1 </span><span class="name">Service Management Commands</span></a></span></dt><dt><span class="table"><a href="#idm139698750451248"><span class="number">14.2 </span><span class="name">Commands for Enabling and Disabling Services</span></a></span></dt><dt><span class="table"><a href="#idm139698750367680"><span class="number">14.3 </span><span class="name">System V Runlevels and <code class="systemitem">systemd</code> Target Units</span></a></span></dt><dt><span class="table"><a href="#tab.net.basic.privat.net"><span class="number">18.1 </span><span class="name">Private IP Address Domains</span></a></span></dt><dt><span class="table"><a href="#tab.netz.param.hostconf"><span class="number">18.2 </span><span class="name">Parameters for /etc/host.conf</span></a></span></dt><dt><span class="table"><a href="#tab.netz.nnswitch.db"><span class="number">18.3 </span><span class="name">Databases Available via /etc/nsswitch.conf</span></a></span></dt><dt><span class="table"><a href="#tab.netz.nnswitch.conf"><span class="number">18.4 </span><span class="name">Configuration Options for NSS <span class="quote">“<span class="quote">Databases</span>”</span></span></a></span></dt><dt><span class="table"><a href="#tab.team.comparison"><span class="number">18.5 </span><span class="name">Feature Comparison between Bonding and Team</span></a></span></dt><dt><span class="table"><a href="#tab.x11.fontsys.example.alias"><span class="number">20.1 </span><span class="name">Generating PFL from Fontconfig rules</span></a></span></dt><dt><span class="table"><a href="#tab.x11.fontsys.example.alias2"><span class="number">20.2 </span><span class="name">Results from Generating PFL from Fontconfig Rules with Changed Order</span></a></span></dt><dt><span class="table"><a href="#tab.x11.fontsys.example.alias3"><span class="number">20.3 </span><span class="name">Results from Generating PFL from Fontconfig Rules</span></a></span></dt><dt><span class="table"><a href="#tab.suse.packages.ulimit"><span class="number">25.1 </span><span class="name"><code class="command">ulimit</code>: Setting Resources for the User</span></a></span></dt><dt><span class="table"><a href="#tab.help.mancategory"><span class="number">32.1 </span><span class="name">Man Pages—Categories and Descriptions</span></a></span></dt><dt><span class="table"><a href="#tab.trouble.info"><span class="number">34.1 </span><span class="name">Log Files</span></a></span></dt><dt><span class="table"><a href="#tab.trouble.system"><span class="number">34.2 </span><span class="name">System Information With the <code class="filename">/proc</code> File System</span></a></span></dt><dt><span class="table"><a href="#tab.trouble.sysfs"><span class="number">34.3 </span><span class="name">System Information With the <code class="filename">/sys</code> File System</span></a></span></dt></dl></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><dl><dt><span class="example"><a href="#idm139698753982688"><span class="number">1.1 </span><span class="name">A Shell Script Printing a Text</span></a></span></dt><dt><span class="example"><a href="#ex.zypper.repos"><span class="number">6.1 </span><span class="name">Zypper—List of Known Repositories</span></a></span></dt><dt><span class="example"><a href="#aus.update.rpm-i"><span class="number">6.2 </span><span class="name"><code class="command">rpm -q -i wget</code></span></a></span></dt><dt><span class="example"><a href="#dat.rpm.search"><span class="number">6.3 </span><span class="name">Script to Search for Packages</span></a></span></dt><dt><span class="example"><a href="#ex.snapper.config.timeline"><span class="number">7.1 </span><span class="name">Example timeline configuration</span></a></span></dt><dt><span class="example"><a href="#idm139698750610816"><span class="number">13.1 </span><span class="name">Usage of grub2-mkconfig</span></a></span></dt><dt><span class="example"><a href="#idm139698750601232"><span class="number">13.2 </span><span class="name">Usage of grub2-mkrescue</span></a></span></dt><dt><span class="example"><a href="#idm139698750597376"><span class="number">13.3 </span><span class="name">Usage of grub2-script-check</span></a></span></dt><dt><span class="example"><a href="#idm139698750593376"><span class="number">13.4 </span><span class="name">Usage of grub2-once</span></a></span></dt><dt><span class="example"><a href="#idm139698750270240"><span class="number">14.1 </span><span class="name">List Active Services</span></a></span></dt><dt><span class="example"><a href="#idm139698750266256"><span class="number">14.2 </span><span class="name">List Failed Services</span></a></span></dt><dt><span class="example"><a href="#idm139698750078912"><span class="number">14.3 </span><span class="name">List all Processes Belonging to a Service</span></a></span></dt><dt><span class="example"><a href="#idm139698749796720"><span class="number">17.1 </span><span class="name">Alternatives System of the <code class="command">java</code> Command</span></a></span></dt><dt><span class="example"><a href="#aus.net.basic.ipaddress"><span class="number">18.1 </span><span class="name">Writing IP Addresses</span></a></span></dt><dt><span class="example"><a href="#tab.net.basic.netmask"><span class="number">18.2 </span><span class="name">Linking IP Addresses to the Netmask</span></a></span></dt><dt><span class="example"><a href="#aus.netz.ipv6.add"><span class="number">18.3 </span><span class="name">Sample IPv6 Address</span></a></span></dt><dt><span class="example"><a href="#aus.netz.ipv6.addpre"><span class="number">18.4 </span><span class="name">IPv6 Address Specifying the Prefix Length</span></a></span></dt><dt><span class="example"><a href="#idm139698748994576"><span class="number">18.5 </span><span class="name">Common Network Interfaces and Some Static Routes</span></a></span></dt><dt><span class="example"><a href="#dat.netz.etc.resolv.conf"><span class="number">18.6 </span><span class="name"><code class="filename">/etc/resolv.conf</code></span></a></span></dt><dt><span class="example"><a href="#dat.netz.etc.hosts"><span class="number">18.7 </span><span class="name"><code class="filename">/etc/hosts</code></span></a></span></dt><dt><span class="example"><a href="#dat.netz.networks"><span class="number">18.8 </span><span class="name"><code class="filename">/etc/networks</code></span></a></span></dt><dt><span class="example"><a href="#dat.netz.etc.hostconf"><span class="number">18.9 </span><span class="name"><code class="filename">/etc/host.conf</code></span></a></span></dt><dt><span class="example"><a href="#dat.netz.nsswitchconf"><span class="number">18.10 </span><span class="name"><code class="filename">/etc/nsswitch.conf</code></span></a></span></dt><dt><span class="example"><a href="#ex.basicnet.manconf.ping"><span class="number">18.11 </span><span class="name">Output of the Command ping</span></a></span></dt><dt><span class="example"><a href="#ex.team.lb"><span class="number">18.12 </span><span class="name">Configuration for Loadbalancing with Network Teaming</span></a></span></dt><dt><span class="example"><a href="#ex.team.failover"><span class="number">18.13 </span><span class="name">Configuration for DHCP Network Teaming Device</span></a></span></dt><dt><span class="example"><a href="#aus.d.lpd"><span class="number">19.1 </span><span class="name">Error Message from <code class="command">lpd</code></span></a></span></dt><dt><span class="example"><a href="#aus.d.bcast"><span class="number">19.2 </span><span class="name">Broadcast from the CUPS Network Server</span></a></span></dt><dt><span class="example"><a href="#ex.x11.fontsys.fontconfig.rendering_algorithms"><span class="number">20.1 </span><span class="name">Specifying Rendering Algorithms</span></a></span></dt><dt><span class="example"><a href="#ex.x11.fontsys.fontconfig.aliases1"><span class="number">20.2 </span><span class="name">Aliases and Family Name Substitutions</span></a></span></dt><dt><span class="example"><a href="#ex.x11.fontsys.fontconfig.aliases2"><span class="number">20.3 </span><span class="name">Aliases and Family Name Substitutions</span></a></span></dt><dt><span class="example"><a href="#ex.x11.fontsys.fontconfig.aliases3"><span class="number">20.4 </span><span class="name">Aliases and Family Names Substitutions</span></a></span></dt><dt><span class="example"><a href="#ex.rules"><span class="number">23.1 </span><span class="name">Example <code class="systemitem">udev</code> Rules</span></a></span></dt><dt><span class="example"><a href="#ex.suse.packages.cron"><span class="number">25.1 </span><span class="name">Entry in /etc/crontab</span></a></span></dt><dt><span class="example"><a href="#ex.suse.packages.cron.time"><span class="number">25.2 </span><span class="name">/etc/crontab: Remove Time Stamp Files</span></a></span></dt><dt><span class="example"><a href="#ex.u.ulimit.bashrc"><span class="number">25.3 </span><span class="name"><code class="command">ulimit</code>: Settings in <code class="filename">~/.bashrc</code></span></a></span></dt><dt><span class="example"><a href="#dat.samba.smb.conf.dom"><span class="number">30.1 </span><span class="name">Global Section in smb.conf</span></a></span></dt><dt><span class="example"><a href="#idm139698746512176"><span class="number">30.2 </span><span class="name">Using <code class="command">rpcclient</code> to Request a Windows Server 2012 Share Snapshot</span></a></span></dt><dt><span class="example"><a href="#ex.support.hostinfo"><span class="number">33.1 </span><span class="name">Output of <code class="command">hostinfo</code> When Logging In as <code class="systemitem">root</code></span></a></span></dt></dl></div><div><div class="legalnotice" id="idm139698755551808"><p>
  Copyright © 2006–
2018

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document under
  the terms of the GNU Free Documentation License, Version 1.2 or (at your
  option) version 1.3; with the Invariant Section being this copyright notice
  and license. A copy of the license version 1.2 is included in the section
  entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="http://www.suse.com/company/legal/" target="_blank">http://www.suse.com/company/legal/</a>. All other
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention to
  detail. However, this does not guarantee complete accuracy. Neither SUSE LLC,
  its affiliates, the authors nor the translators shall be held liable for
  possible errors or the consequences thereof.
 </p></div></div><div class="preface " id="pre.sle"><div class="titlepage"><div><div><h1 class="title"><span class="number"> </span><span class="name">About This Guide</span> <a title="Permalink" class="permalink" href="#pre.sle">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>sle_admin_intro.xml</li><li><span class="ds-label">ID: </span>pre.sle</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#idm139698755274224"><span class="name">Available Documentation</span></a></span></dt><dt><span class="sect1"><a href="#idm139698756046832"><span class="name">Feedback</span></a></span></dt><dt><span class="sect1"><a href="#idm139698754770144"><span class="name">Documentation Conventions</span></a></span></dt><dt><span class="sect1"><a href="#idm139698754827504"><span class="name">About the Making of This Documentation</span></a></span></dt></dl></div></div><p>
  This guide is intended for use by professional network and system
  administrators during the operation of SUSE® Linux Enterprise. As such, it is solely
  concerned with ensuring that SUSE Linux Enterprise is properly configured and that the
  required services on the network are available to allow it to function
  properly as initially installed. This guide does not cover the process of
  ensuring that SUSE Linux Enterprise offers proper compatibility with your enterprise's
  application software or that its core functionality meets those requirements.
  It assumes that a full requirements audit has been done and the installation
  has been requested, or that a test installation for such an audit has been
  requested.
 </p><p>
  This guide contains the following:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698757127904"><span class="term ">Support and Common Tasks</span></dt><dd><p>
     SUSE Linux Enterprise offers a wide range of tools to customize various aspects of the
     system. This part introduces a few of them. 
    </p></dd><dt id="idm139698755443120"><span class="term ">System</span></dt><dd><p>
     Learn more about the underlying operating system by studying this part.
     SUSE Linux Enterprise supports several hardware architectures and you can use this to
     adapt your own applications to run on SUSE Linux Enterprise. The boot loader and boot
     procedure information assists you in understanding how your Linux system
     works and how your own custom scripts and applications may blend in with
     it.
    </p></dd><dt id="idm139698754688896"><span class="term ">Services</span></dt><dd><p>
     SUSE Linux Enterprise is designed to be a network operating system. 
     <span class="phrase">SUSE® Linux Enterprise Desktop includes client support for many network
     services. It integrates well into heterogeneous environments including MS
     Windows clients and servers. </span>
    </p></dd><dt id="idm139698754691200"><span class="term ">Mobile Computers</span></dt><dd><p>
     Laptops, and the communication between mobile devices like PDAs, or
     cellular phones and SUSE Linux Enterprise need some special attention. Take care for power
     conservation and for the integration of different devices into a changing
     network environment. Also get in touch with the background technologies
     that provide the needed functionality.
    </p></dd><dt id="idm139698756067808"><span class="term ">Troubleshooting</span></dt><dd><p>
     Provides an overview of finding help and additional documentation
     when you need more information or want to perform specific tasks. There is
     also a list of the most frequent problems with explanations how to
     fix them.
    </p></dd></dl></div><div class="sect1 " id="idm139698755274224"><div class="titlepage"><div><div><h2 class="title" id="idm139698755274224"><span class="number">1 </span><span class="name">Available Documentation</span> <a title="Permalink" class="permalink" href="#idm139698755274224">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_available_doc_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div id="idm139698755275456" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Online Documentation and Latest Updates</h6><p>
   Documentation for our products is available at
   <span class="phrase"><a class="link" href="http://www.suse.com/documentation/" target="_blank">http://www.suse.com/documentation/</a></span>, where you can also
   find the latest updates, and browse or download the documentation in various formats.
   
  </p></div><p>
  In addition, the product documentation
  is usually available in your installed system under
  <code class="filename">/usr/share/doc/manual</code>.
 </p><p>
  The following documentation is available for this product:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698756049856"><span class="term "><span class="intraxref">Article “<em class="citetitle ">Installation Quick Start</em>”</span>
   </span></dt><dd><p>
     This Quick Start guides you step-by-step
     through the installation of <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> <span class="productnumber"><span class="phrase">15</span></span>.
    </p></dd><dt id="idm139698754801232"><span class="term "><span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”</span>
   </span></dt><dd><p>
     
     Shows how to install single or multiple systems
     and how to exploit the product inherent capabilities for a deployment
     infrastructure. Choose from various approaches, ranging from a local
     installation or a network installation server to a mass deployment using
     a remote-controlled, highly-customized, and automated installation
     technique.
    </p></dd><dt id="idm139698757426992"><span class="term "><a class="xref" href="#book.sle.admin" title="Administration Guide"><em class="citetitle ">Administration Guide</em></a>
   </span></dt><dd><p>
     Covers system administration tasks like maintaining,
     monitoring and customizing an initially installed system.
    </p></dd><dt id="idm139698755554224"><span class="term "><span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”</span>
   </span></dt><dd><p>
     Introduces basic concepts of system security,
     covering both local and network security aspects. Shows how to use
     the product inherent security software like <span class="phrase">AppArmor</span> or the auditing system
     that reliably collects information about any
     security-relevant events.
    </p></dd><dt id="idm139698754969312"><span class="term "><span class="intraxref">Book “<em class="citetitle ">System Analysis and Tuning Guide</em>”</span>
   </span></dt><dd><p>
     An administrator's guide for problem detection,
     resolution and optimization. Find how to inspect and optimize your system
     by means of monitoring tools and how to efficiently manage
     resources. Also contains an overview of common problems and solutions and
     of additional help and documentation resources.
    </p></dd><dt id="idm139698755276448"><span class="term "><span class="intraxref">Book “<em class="citetitle ">GNOME User Guide</em>”</span>
   </span></dt><dd><p>
     Introduces the GNOME desktop of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>. It
     guides you through using and configuring the desktop and helps you
     perform key tasks. It is intended mainly for end users who want to make
     efficient use of GNOME as their default desktop.
    </p></dd></dl></div></div><div class="sect1 " id="idm139698756046832"><div class="titlepage"><div><div><h2 class="title" id="idm139698756046832"><span class="number">2 </span><span class="name">Feedback</span> <a title="Permalink" class="permalink" href="#idm139698756046832">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_feedback_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  Several feedback channels are available:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698754765392"><span class="term ">Bugs and Enhancement Requests</span></dt><dd><p>
     For services and support options available for your product, refer to
     <a class="link" href="http://www.suse.com/support/" target="_blank">http://www.suse.com/support/</a>.
    </p><p>
     Help for openSUSE is provided by the community. Refer to <a class="link" href="https://en.opensuse.org/Portal:Support" target="_blank">https://en.opensuse.org/Portal:Support</a> for more information.
    </p><p>

     To report bugs for a product component, go to
     <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log in, and
     click <span class="guimenu">Create New</span>.
    </p></dd><dt id="idm139698754756800"><span class="term ">User Comments</span></dt><dd><p>
     We want to hear your comments about and suggestions for this manual and
     the other documentation included with this product. Use the User Comments
     feature at the bottom of each page in the online documentation or go to
     <a class="link" href="http://www.suse.com/documentation/feedback.html" target="_blank">http://www.suse.com/documentation/feedback.html</a> and
     enter your comments there.
    </p></dd><dt id="idm139698754773312"><span class="term ">Mail</span></dt><dd><p>
     For feedback on the documentation of this product, you can also send a
     mail to <code class="literal">doc-team@suse.com</code>. Make sure to include the
     document title, the product version and the publication date of the
     documentation. To report errors or suggest enhancements, provide a concise
     description of the problem and refer to the respective section number and
     page (or URL).
    </p></dd></dl></div></div><div class="sect1 " id="idm139698754770144"><div class="titlepage"><div><div><h2 class="title" id="idm139698754770144"><span class="number">3 </span><span class="name">Documentation Conventions</span> <a title="Permalink" class="permalink" href="#idm139698754770144">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_typografie_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  The following notices and typographical conventions are used in this
  documentation:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    <code class="filename">/etc/passwd</code>: directory names and file names
   </p></li><li class="listitem "><p>
    <em class="replaceable ">PLACEHOLDER</em>: replace
    <em class="replaceable ">PLACEHOLDER</em> with the actual value
   </p></li><li class="listitem "><p>
    <code class="envar">PATH</code>: the environment variable PATH
   </p></li><li class="listitem "><p>
    <code class="command">ls</code>, <code class="option">--help</code>: commands, options, and
    parameters
   </p></li><li class="listitem "><p>
    <code class="systemitem">user</code>: users or groups
   </p></li><li class="listitem "><p>
    <span class="package">package name</span>
    : name of a package
   </p></li><li class="listitem "><p>
    <span class="keycap">Alt</span>, <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>: a key to press or a key combination; keys
    are shown in uppercase as on a keyboard
   </p></li><li class="listitem "><p>
    <span class="guimenu">File</span>, <span class="guimenu">File</span> › <span class="guimenu">Save
    As</span>: menu items, buttons
   </p></li><li class="listitem "><p>
    <span class="emphasis"><em>Dancing Penguins</em></span> (Chapter
    <span class="emphasis"><em>Penguins</em></span>, ↑Another Manual): This is a reference
    to a chapter in another manual.
   </p></li><li class="listitem "><p>
    Commands that must be run with <code class="systemitem">root</code> privileges. Often you can also
    prefix these commands with the <code class="command">sudo</code> command to run them
    as non-privileged user.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">command</code>
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">command</code></pre></div></li><li class="listitem "><p>
    Commands that can be run by non-privileged users.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">command</code></pre></div></li><li class="listitem "><p>
    Notices
   </p><div id="idm139698754833680" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Warning Notice</h6><p>
     Vital information you must be aware of before proceeding. Warns you about
     security issues, potential loss of data, damage to hardware, or physical
     hazards.
    </p></div><div id="idm139698754832176" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Important Notice</h6><p>
     Important information you should be aware of before proceeding.
    </p></div><div id="idm139698754830864" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Note Notice</h6><p>
     Additional information, for example about differences in software
     versions.
    </p></div><div id="idm139698754829552" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Tip Notice</h6><p>
     Helpful information, like a guideline or a piece of practical advice.
    </p></div></li></ul></div></div><div xml:lang="en" class="sect1 " id="idm139698754827504" lang="en"><div class="titlepage"><div><div><h2 class="title" id="idm139698754827504"><span class="number">4 </span><span class="name">About the Making of This Documentation</span> <a title="Permalink" class="permalink" href="#idm139698754827504">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_intro_making_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  This documentation is written in SUSEDoc, a subset of
  <a class="link" href="http://www.docbook.org" target="_blank">DocBook 5</a>.
  The XML source files were validated by <code class="command">jing</code> (see
  <a class="link" href="https://code.google.com/p/jing-trang/" target="_blank">https://code.google.com/p/jing-trang/</a>), processed by
  <code class="command">xsltproc</code>, and converted into XSL-FO using a customized
  version of Norman Walsh's stylesheets. The final PDF is formatted through FOP
  from
  <a class="link" href="https://xmlgraphics.apache.org/fop" target="_blank">Apache
  Software Foundation</a>. The open source tools and the environment used to
  build this documentation are provided by the DocBook Authoring and Publishing
  Suite (DAPS). The project's home page can be found at
  <a class="link" href="https://github.com/openSUSE/daps" target="_blank">https://github.com/openSUSE/daps</a>.
 </p><p>
  The XML source code of this documentation can be found at
  <a class="link" href="https://github.com/SUSE/doc-sle" target="_blank">https://github.com/SUSE/doc-sle</a>.
 </p></div></div><div class="part" id="part.administration"><div class="titlepage"><div><div><h1 class="title"><span class="number">Part I </span><span class="name">Common Tasks </span><a title="Permalink" class="permalink" href="#part.administration">#</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.adm.shell"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span></a></span></dt><dd class="toc-abstract"><p>
    Today, many people use computers with a graphical user interface (GUI)
    like GNOME. Although they offer lots of features, their use is limited
    when it comes to the execution of automated tasks. Shells are a good
    addition to GUIs and this chapter gives you an overview of some aspects of
    shells, in this case Bash.
   </p></dd><dt><span class="chapter"><a href="#cha.adm.sudo"><span class="number">2 </span><span class="name">sudo
</span></a></span></dt><dd class="toc-abstract"><p>Many commands and system utilities need to be run as root to modify files and/or perform tasks that only the super user is allowed to. For security reasons and to avoid accidentally running dangerous commands, it is generally advisable not to log in directly as root. Instead, it is recommended to wo…</p></dd><dt><span class="chapter"><a href="#cha.onlineupdate.you"><span class="number">3 </span><span class="name">YaST Online Update</span></a></span></dt><dd class="toc-abstract"><p>SUSE offers a continuous stream of software security updates for your product. By default, the update applet is used to keep your system up-to-date. Refer to Book “Deployment Guide”, Chapter 12 “Installing or Removing Software”, Section 12.4 “Keeping the System Up-to-date” for further information on…</p></dd><dt><span class="chapter"><a href="#cha.yast.gui"><span class="number">4 </span><span class="name">YaST</span></a></span></dt><dd class="toc-abstract"><p>YaST is the installation and configuration tool for SUSE Linux Enterprise Desktop. It has a graphical interface and the capability to customize your system quickly during and after the installation. It can be used to set up hardware, configure the network, system services, and tune your security set…</p></dd><dt><span class="chapter"><a href="#cha.yast.text"><span class="number">5 </span><span class="name">YaST in Text Mode</span></a></span></dt><dd class="toc-abstract"><p>
  This section is intended for system administrators and experts who do not run
  an X server on their systems and depend on the text-based installation tool.
  It provides basic information about starting and operating YaST in text
  mode.
 </p></dd><dt><span class="chapter"><a href="#cha.sw_cl"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span></a></span></dt><dd class="toc-abstract"><p>
    This chapter describes Zypper and RPM, two command line tools for managing
    software. For a definition of the terminology used in this context (for
    example, <code class="literal">repository</code>, <code class="literal">patch</code>, or
    <code class="literal">update</code>) refer to
    <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 12 “Installing or Removing Software”, Section 12.1 “Definition of Terms”</span>.
   </p></dd><dt><span class="chapter"><a href="#cha.snapper"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span></a></span></dt><dd class="toc-abstract"><p>
    Being able to do file system snapshots providing the ability to do
    rollbacks on Linux is a feature that was often requested in the past.
    Snapper, with the <code class="literal">Btrfs</code> file system or thin-provisioned
    LVM volumes now fills that gap.
   </p><p>
    <code class="literal">Btrfs</code>, a new copy-on-write file system for Linux,
    supports file system snapshots (a copy of the state of a subvolume at a
    certain point of time) of subvolumes (one or more separately mountable file
    systems within each physical partition). Snapshots are also supported on
    thin-provisioned LVM volumes formatted with XFS, Ext4 or Ext3. Snapper lets
    you create and manage these snapshots. It comes with a command line and a
    YaST interface. Starting with <span class="phrase">SUSE Linux Enterprise Server
    12</span> it is also possible
    to boot from <code class="literal">Btrfs</code> snapshots—see <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a> for more information.
   </p></dd><dt><span class="chapter"><a href="#cha.vnc"><span class="number">8 </span><span class="name">Remote Access with VNC</span></a></span></dt><dd class="toc-abstract"><p>
    Virtual Network Computing (VNC) enables you to control a remote computer
    via a graphical desktop (as opposed to a remote shell access). VNC is
    platform-independent and lets you access the remote machine from any
    operating system.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> supports two different kinds of VNC sessions: One-time
    sessions that <span class="quote">“<span class="quote">live</span>”</span> as long as the VNC connection from the
    client is kept up, and persistent sessions that <span class="quote">“<span class="quote">live</span>”</span> until
    they are explicitly terminated.
   </p></dd><dt><span class="chapter"><a href="#cha.net.rsync"><span class="number">9 </span><span class="name">File Copying with RSync</span></a></span></dt><dd class="toc-abstract"><p>
    Today, a typical user has several computers: home and workplace machines, a
    laptop, a smartphone or a tablet. This makes the task of keeping files and
    documents in sync across multiple devices all more important.
   </p></dd><dt><span class="chapter"><a href="#cha.gnome.gconf"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span></a></span></dt><dd class="toc-abstract"><p>
  This chapter introduces GNOME configuration options which administrators
  can use to adjust system-wide settings, such as customizing menus,
  installing themes, configuring fonts, changing preferred applications, and
  locking down capabilities.
 </p></dd></dl></div><div class="chapter " id="cha.adm.shell"><div class="titlepage"><div><div><h2 class="title"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span> <a title="Permalink" class="permalink" href="#cha.adm.shell">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>adm_shell.xml</li><li><span class="ds-label">ID: </span>cha.adm.shell</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698754809808">#</a></h6></div><p>
    Today, many people use computers with a graphical user interface (GUI)
    like GNOME. Although they offer lots of features, their use is limited
    when it comes to the execution of automated tasks. Shells are a good
    addition to GUIs and this chapter gives you an overview of some aspects of
    shells, in this case Bash.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.adm.whatistheshell"><span class="number">1.1 </span><span class="name">What is <span class="quote">“<span class="quote">The Shell</span>”</span>?</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shellscripts"><span class="number">1.2 </span><span class="name">Writing Shell Scripts</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.redirect"><span class="number">1.3 </span><span class="name">Redirecting Command Events</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.alias"><span class="number">1.4 </span><span class="name">Using Aliases</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.variables"><span class="number">1.5 </span><span class="name">Using Variables in Bash</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.grouping"><span class="number">1.6 </span><span class="name">Grouping and Combining Commands</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.commonconstructs"><span class="number">1.7 </span><span class="name">Working with Common Flow Constructs</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.shell.moreinfo"><span class="number">1.8 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.adm.whatistheshell"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.whatistheshell"><span class="number">1.1 </span><span class="name">What is <span class="quote">“<span class="quote">The Shell</span>”</span>?</span> <a title="Permalink" class="permalink" href="#sec.adm.whatistheshell">#</a></h2></div></div></div><p>
   Traditionally, <span class="emphasis"><em>the</em></span> shell is Bash (Bourne again Shell).
   When this chapter speaks about <span class="quote">“<span class="quote">the shell</span>”</span> it means Bash. There
   are actually more available shells than Bash (ash, csh, ksh, zsh, …),
   each employing different features and characteristics. If you need further
   information about other shells, search for <span class="emphasis"><em>shell</em></span> in
   YaST.
  </p><div class="sect2 " id="sec.adm.configfiles"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.configfiles"><span class="number">1.1.1 </span><span class="name">Knowing the Bash Configuration Files</span> <a title="Permalink" class="permalink" href="#sec.adm.configfiles">#</a></h3></div></div></div><p>
    A shell can be invoked as an:
   </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p><span class="formalpara-title">Interactive login shell. </span>
       This is used when logging in to a machine, invoking Bash with the
       <code class="option">--login</code> option or when logging in to a remote machine
       with SSH.
      </p></li><li class="listitem "><p><span class="formalpara-title"><span class="quote">“<span class="quote">Ordinary</span>”</span> interactive shell. </span>
       This is normally the case when starting xterm, konsole, gnome-terminal
       or similar tools.
      </p></li><li class="listitem "><p><span class="formalpara-title">Non-interactive shell. </span>
       This is used when invoking a shell script at the command line.
      </p></li></ol></div><p>
    Depending on which type of shell you use, different configuration files are
    being read. The following tables show the login and non-login shell
    configuration files.
   </p><div class="table" id="tab.adm.shell.config.loginshells"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 1.1: </span><span class="name">Bash Configuration Files for Login Shells </span><a title="Permalink" class="permalink" href="#tab.adm.shell.config.loginshells">#</a></h6></div><div class="table-contents"><table summary="Bash Configuration Files for Login Shells" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
        <p>
         File
        </p>
       </th><th>
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         <code class="filename">/etc/profile</code>
        </p>
       </td><td>
        <p>
         Do not modify this file, otherwise your modifications can be destroyed
         during your next update!
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">/etc/profile.local</code>
        </p>
       </td><td>
        <p>
         Use this file if you extend <code class="filename">/etc/profile</code>
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">/etc/profile.d/</code>
        </p>
       </td><td>
        <p>
         Contains system-wide configuration files for specific programs
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">~/.profile</code>
        </p>
       </td><td>
        <p>
         Insert user specific configuration for login shells here
        </p>
       </td></tr></tbody></table></div></div><p>
    Note that the login shell also sources the configuration files listed under
    <a class="xref" href="#tab.adm.shell.configs.nonloginshells" title="Bash Configuration Files for Non-Login Shells">Table 1.2, “Bash Configuration Files for Non-Login Shells”</a>.
   </p><div class="table" id="tab.adm.shell.configs.nonloginshells"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 1.2: </span><span class="name">Bash Configuration Files for Non-Login Shells </span><a title="Permalink" class="permalink" href="#tab.adm.shell.configs.nonloginshells">#</a></h6></div><div class="table-contents"><table summary="Bash Configuration Files for Non-Login Shells" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>
        <p>
         <code class="filename">/etc/bash.bashrc</code>
        </p>
       </td><td>
        <p>
         Do not modify this file, otherwise your modifications can be destroyed
         during your next update!
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">/etc/bash.bashrc.local</code>
        </p>
       </td><td>
        <p>
         Use this file to insert your system-wide modifications for Bash only
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">~/.bashrc</code>
        </p>
       </td><td>
        <p>
         Insert user specific configuration here
        </p>
       </td></tr></tbody></table></div></div><p>
    Additionally, Bash uses some more files:
   </p><div class="table" id="idm139698754860048"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 1.3: </span><span class="name">Special Files for Bash </span><a title="Permalink" class="permalink" href="#idm139698754860048">#</a></h6></div><div class="table-contents"><table summary="Special Files for Bash" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
        <p>
         File
        </p>
       </th><th>
        <p>
         Description
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         <code class="filename">~/.bash_history</code>
        </p>
       </td><td>
        <p>
         Contains a list of all commands you have been typing
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">~/.bash_logout</code>
        </p>
       </td><td>
        <p>
         Executed when logging out
        </p>
       </td></tr><tr><td>
        <p>
         <code class="filename">~/.alias</code>
        </p>
       </td><td>
        <p>
         User defined aliases of frequently used commands. See
         <code class="command">man 1 alias</code> for more details about how to define
         aliases.
        </p>
       </td></tr></tbody></table></div></div></div><div class="sect2 " id="sec.adm.dirstructure"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.dirstructure"><span class="number">1.1.2 </span><span class="name">The Directory Structure</span> <a title="Permalink" class="permalink" href="#sec.adm.dirstructure">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>fs_structure_i.xml</li><li><span class="ds-label">ID: </span>sec.adm.dirstructure</li></ul></div></div></div></div><p>
  The following table provides a short overview of the most important
  higher-level directories that you find on a Linux system. Find more detailed
  information about the directories and important subdirectories in the
  following list.
 </p><div class="table" id="idm139698754842096"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 1.4: </span><span class="name">Overview of a Standard Directory Tree </span><a title="Permalink" class="permalink" href="#idm139698754842096">#</a></h6></div><div class="table-contents"><table summary="Overview of a Standard Directory Tree" border="1"><colgroup><col class="1" /><col class="2" /></colgroup><thead><tr><th>
      <p>
       Directory
      </p>
     </th><th>
      <p>
       Contents
      </p>
     </th></tr></thead><tbody><tr><td>
      <p>
       <code class="filename">/</code>
      </p>
     </td><td>
      <p>
       Root directory—the starting point of the directory tree.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/bin</code>
      </p>
     </td><td>
      <p>
       Essential binary files, such as commands that are needed by both the
       system administrator and normal users. Usually also contains the shells,
       such as Bash.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/boot</code>
      </p>
     </td><td>
      <p>
       Static files of the boot loader.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/dev</code>
      </p>
     </td><td>
      <p>
       Files needed to access host-specific devices.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/etc</code>
      </p>
     </td><td>
      <p>
       Host-specific system configuration files.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/home</code>
      </p>
     </td><td>
      <p>
       Holds the home directories of all users who have accounts on the system.
       However, <code class="systemitem">root</code>'s home directory is not located in
       <code class="filename">/home</code> but in <code class="filename">/root</code>.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/lib</code>
      </p>
     </td><td>
      <p>
       Essential shared libraries and kernel modules.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/media</code>
      </p>
     </td><td>
      <p>
       Mount points for removable media.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/mnt</code>
      </p>
     </td><td>
      <p>
       Mount point for temporarily mounting a file system.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/opt</code>
      </p>
     </td><td>
      <p>
       Add-on application software packages.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/root</code>
      </p>
     </td><td>
      <p>
       Home directory for the superuser <code class="systemitem">root</code>.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/sbin</code>
      </p>
     </td><td>
      <p>
       Essential system binaries.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/srv</code>
      </p>
     </td><td>
      <p>
       Data for services provided by the system.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/tmp</code>
      </p>
     </td><td>
      <p>
       Temporary files.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/usr</code>
      </p>
     </td><td>
      <p>
       Secondary hierarchy with read-only data.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/var</code>
      </p>
     </td><td>
      <p>
       Variable data such as log files.
      </p>
     </td></tr><tr><td>
      <p>
       <code class="filename">/windows</code>
      </p>
     </td><td>
      <p>
       Only available if you have both Microsoft Windows* and Linux installed
       on your system. Contains the Windows data.
      </p>
     </td></tr></tbody></table></div></div><p>
  The following list provides more detailed information and gives some examples
  of which files and subdirectories can be found in the directories:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698754686832"><span class="term "><code class="filename">/bin</code>
   </span></dt><dd><p>
     Contains the basic shell commands that may be used both by <code class="systemitem">root</code> and
     by other users. These commands include <code class="command">ls</code>,
     <code class="command">mkdir</code>, <code class="command">cp</code>, <code class="command">mv</code>,
     <code class="command">rm</code> and <code class="command">rmdir</code>.
     <code class="filename">/bin</code> also contains Bash, the default shell in
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
    </p></dd><dt id="idm139698754679728"><span class="term "><code class="filename">/boot</code>
   </span></dt><dd><p>
     Contains data required for booting, such as the boot loader, the kernel,
     and other data that is used before the kernel begins executing user-mode
     programs.
    </p></dd><dt id="idm139698754677488"><span class="term "><code class="filename">/dev</code>
   </span></dt><dd><p>
     Holds device files that represent hardware components.
    </p></dd><dt id="idm139698754675440"><span class="term "><code class="filename">/etc</code>
   </span></dt><dd><p>
     Contains local configuration files that control the operation of programs
     like the X Window System. The <code class="filename">/etc/init.d</code>
     subdirectory contains LSB init scripts that can be executed during the
     boot process.
    </p></dd><dt id="idm139698754672736"><span class="term "><code class="filename">/home/<em class="replaceable ">USERNAME</em></code>
   </span></dt><dd><p>
     Holds the private data of every user who has an account on the system. The
     files located here can only be modified by their owner or by the system
     administrator. By default, your e-mail directory and personal desktop
     configuration are located here in the form of hidden files and
     directories, such as <code class="filename">.gconf/</code> and
     <code class="filename">.config</code>.
    </p><div id="idm139698754669488" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Home Directory in a Network Environment</h6><p>
      If you are working in a network environment, your home directory may be
      mapped to a directory in the file system other than
      <code class="filename">/home</code>.
     </p></div></dd><dt id="idm139698754667232"><span class="term "><code class="filename">/lib</code>
   </span></dt><dd><p>
     Contains the essential shared libraries needed to boot the system and to
     run the commands in the root file system. The Windows equivalent for
     shared libraries are DLL files.
    </p></dd><dt id="idm139698754664976"><span class="term "><code class="filename">/media</code>
   </span></dt><dd><p>
     Contains mount points for removable media, such as CD-ROMs, flash disks,
     and digital cameras (if they use USB). <code class="filename">/media</code>
     generally holds any type of drive except the hard disk of your system.
     When your removable medium has been inserted or connected to the system
     and has been mounted, you can access it from here.
     
    </p></dd><dt id="idm139698754661616"><span class="term "><code class="filename">/mnt</code>
   </span></dt><dd><p>
     This directory provides a mount point for a temporarily mounted file
     system. <code class="systemitem">root</code> may mount file systems here.
    </p></dd><dt id="idm139698754658720"><span class="term "><code class="filename">/opt</code>
   </span></dt><dd><p>
     Reserved for the installation of third-party software. Optional software
     and larger add-on program packages can be found here.
    </p></dd><dt id="idm139698754656512"><span class="term "><code class="filename">/root</code>
   </span></dt><dd><p>
     Home directory for the <code class="systemitem">root</code> user. The personal data of <code class="systemitem">root</code> is
     located here.
    </p></dd><dt id="idm139698754025824"><span class="term "><code class="filename">/run</code>
   </span></dt><dd><p>
     A tmpfs directory used by <code class="systemitem">systemd</code> and various
     components. <code class="filename">/var/run</code> is a symbolic link to
     <code class="filename">/run</code>.
    </p></dd><dt id="idm139698754022352"><span class="term "><code class="filename">/sbin</code>
   </span></dt><dd><p>
     As the <code class="literal">s</code> indicates, this directory holds utilities for
     the superuser. <code class="filename">/sbin</code> contains the binaries essential
     for booting, restoring and recovering the system in addition to the
     binaries in <code class="filename">/bin</code>.
    </p></dd><dt id="idm139698754018848"><span class="term "><code class="filename">/srv</code>
   </span></dt><dd><p>
     Holds data for services provided by the system, such as FTP and HTTP.
    </p></dd><dt id="idm139698754016800"><span class="term "><code class="filename">/tmp</code>
   </span></dt><dd><p>
     This directory is used by programs that require temporary storage of
     files.
    </p><div id="idm139698754014960" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Cleaning up <code class="filename">/tmp</code> at Boot Time</h6><p>
      Data stored in <code class="filename">/tmp</code> is not guaranteed to survive a
      system reboot. It depends, for example, on settings made in
      <code class="filename">/etc/tmpfiles.d/tmp.conf</code>.
     </p></div></dd><dt id="idm139698754011840"><span class="term "><code class="filename">/usr</code>
   </span></dt><dd><p>
     <code class="literal">/usr</code> has nothing to do with users, but is the acronym
     for Unix system resources. The data in <code class="filename">/usr</code> is
     static, read-only data that can be shared among various hosts compliant
     with the <code class="literal">Filesystem Hierarchy Standard</code> (FHS). This
     directory contains all application programs including the graphical
     desktops such as GNOME and establishes a secondary hierarchy in the file
     system. <code class="filename">/usr</code> holds several subdirectories, such as
     <code class="filename">/usr/bin</code>, <code class="filename">/usr/sbin</code>,
     <code class="filename">/usr/local</code>, and <code class="filename">/usr/share/doc</code>.
    </p></dd><dt id="idm139698754005808"><span class="term "><code class="filename">/usr/bin</code>
   </span></dt><dd><p>
     Contains generally accessible programs.
    </p></dd><dt id="idm139698754003696"><span class="term "><code class="filename">/usr/sbin</code>
   </span></dt><dd><p>
     Contains programs reserved for the system administrator, such as repair
     functions.
    </p></dd><dt id="idm139698754001536"><span class="term "><code class="filename">/usr/local</code>
   </span></dt><dd><p>
     In this directory the system administrator can install local,
     distribution-independent extensions.
    </p></dd><dt id="idm139698753999360"><span class="term "><code class="filename">/usr/share/doc</code>
   </span></dt><dd><p>
     Holds various documentation files and the release notes for your system.
     In the <code class="filename">manual</code> subdirectory find an online version of
     this manual. If more than one language is installed, this directory may
     contain versions of the manuals for different languages.
    </p><p>
     Under <code class="filename">packages</code> find the documentation included in the
     software packages installed on your system. For every package, a
     subdirectory
     <code class="filename">/usr/share/doc/packages/<em class="replaceable ">PACKAGENAME</em></code>
     is created that often holds README files for the package and sometimes
     examples, configuration files or additional scripts.
    </p><p>
     If HOWTOs are installed on your system <code class="filename">/usr/share/doc</code>
     also holds the <code class="filename">howto</code> subdirectory in which to find
     additional documentation on many tasks related to the setup and operation
     of Linux software.
    </p></dd><dt id="idm139698753993200"><span class="term "><code class="filename">/var</code>
   </span></dt><dd><p>
     Whereas <code class="filename">/usr</code> holds static, read-only data,
     <code class="filename">/var</code> is for data which is written during system
     operation and thus is variable data, such as log files or spooling data.
     For an overview of the most important log files you can find under
     <code class="filename">/var/log/</code>, refer to
     <a class="xref" href="#tab.trouble.info" title="Log Files">Table 34.1, “Log Files”</a>.
    </p></dd><dt id="idm139698753989024"><span class="term "><code class="filename">/windows</code>
   </span></dt><dd><p>
     Only available if you have both Microsoft Windows and Linux installed on
     your system. Contains the Windows data available on the Windows partition
     of your system. Whether you can edit the data in this directory depends on
     the file system your Windows partition uses. If it is FAT32, you can open
     and edit the files in this directory. For NTFS, <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> also
     includes write access support. However, the driver for the NTFS-3g file
     system has limited functionality.
    </p></dd></dl></div></div></div><div class="sect1 " id="sec.adm.shellscripts"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.shellscripts"><span class="number">1.2 </span><span class="name">Writing Shell Scripts</span> <a title="Permalink" class="permalink" href="#sec.adm.shellscripts">#</a></h2></div></div></div><p>
   Shell scripts provide a convenient way to perform a wide range of tasks: collecting
   data, searching for a word or phrase in a text and other useful things.
   The following example shows a small shell script that prints a text:
  </p><div class="example" id="idm139698753982688"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 1.1: </span><span class="name">A Shell Script Printing a Text </span><a title="Permalink" class="permalink" href="#idm139698753982688">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">#!/bin/sh <span id="co.adm.shell.shebang"></span><span class="callout">1</span>
# Output the following line: <span id="co.adm.shell.comment"></span><span class="callout">2</span>
echo "Hello World" <span id="co.adm.shell.echo"></span><span class="callout">3</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.adm.shell.shebang"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The first line begins with the <span class="emphasis"><em>Shebang</em></span>
      characters (<code class="literal">#!</code>) which is an indicator
      that this file is a script. The script is executed with the specified
      interpreter after the Shebang, in this case <code class="command">/bin/sh</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.adm.shell.comment"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      The second line is a comment beginning with the hash sign. It is
      recommended to comment difficult lines to remember what they do.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.adm.shell.echo"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      The third line uses the built-in command <code class="command">echo</code> to print
      the corresponding text.
     </p></td></tr></table></div></div></div><p>
   Before you can run this script you need some prerequisites:
  </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
     Every script should contain a Shebang line (as in the example above.) If
     the line is missing, you need to call the interpreter manually.
    </p></li><li class="listitem "><p>
     You can save the script wherever you want. However, it is a good idea to
     save it in a directory where the shell can find it. The search path in a
     shell is determined by the environment variable <code class="envar">PATH</code>.
     Usually a normal user does not have write access to
     <code class="filename">/usr/bin</code>. Therefore it is recommended to save your
     scripts in the users' directory <code class="filename">~/bin/</code>. The above
     example gets the name <code class="filename">hello.sh</code>.
    </p></li><li class="listitem "><p>
     The script needs executable permissions. Set the permissions with the
     following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>chmod +x ~/bin/hello.sh</pre></div></li></ol></div><p>
   If you have fulfilled all of the above prerequisites, you can execute the
   script in the following ways:
  </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p><span class="formalpara-title">As Absolute Path. </span>
      The script can be executed with an absolute path. In our case, it is
      <code class="command">~/bin/hello.sh</code>.
     </p></li><li class="listitem "><p><span class="formalpara-title">Everywhere. </span>
      If the <code class="envar">PATH</code> environment variable contains the directory
      where the script is located, you can execute the script with
      <code class="command">hello.sh</code>.
     </p></li></ol></div></div><div class="sect1 " id="sec.adm.shell.redirect"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.shell.redirect"><span class="number">1.3 </span><span class="name">Redirecting Command Events</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.redirect">#</a></h2></div></div></div><p>
   Each command can use three channels, either for input or output:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><span class="formalpara-title">Standard Output. </span>
      This is the default output channel. Whenever a command prints something,
      it uses the standard output channel.
     </p></li><li class="listitem "><p><span class="formalpara-title">Standard Input. </span>
      If a command needs input from users or other commands, it uses this
      channel.
     </p></li><li class="listitem "><p><span class="formalpara-title">Standard Error. </span>
      Commands use this channel for error reporting.
     </p></li></ul></div><p>
   To redirect these channels, there are the following possibilities:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698754048400"><span class="term "><code class="literal">Command &gt; File</code>
    </span></dt><dd><p>
      Saves the output of the command into a file, an existing file will be
      deleted. For example, the <code class="command">ls</code> command writes its output
      into the file <code class="filename">listing.txt</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>ls &gt; listing.txt</pre></div></dd><dt id="idm139698754044560"><span class="term "><code class="literal">Command &gt;&gt; File</code>
    </span></dt><dd><p>
      Appends the output of the command to a file. For example, the
      <code class="command">ls</code> command appends its output to the file
      <code class="filename">listing.txt</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>ls &gt;&gt; listing.txt</pre></div></dd><dt id="idm139698754040848"><span class="term "><code class="literal">Command &lt; File</code>
    </span></dt><dd><p>
      Reads the file as input for the given command. For example, the
      <code class="command">read</code> command reads in the content of the file into the
      variable:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>read a &lt; foo</pre></div></dd><dt id="idm139698754037648"><span class="term "><code class="literal">Command1 | Command2</code>
    </span></dt><dd><p>
      Redirects the output of the left command as input for the right command.
      For example, the <code class="command">cat</code> command outputs the content of
      the <code class="filename">/proc/cpuinfo</code> file. This output is used by
      <code class="command">grep</code> to filter only those lines which contain
      <code class="literal">cpu</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>cat /proc/cpuinfo | grep cpu</pre></div></dd></dl></div><p>
   Every channel has a <span class="emphasis"><em>file descriptor</em></span>: 0 (zero) for
   standard input, 1 for standard output and 2 for standard error. It is
   allowed to insert this file descriptor before a <code class="literal">&lt;</code> or
   <code class="literal">&gt;</code> character. For example, the following line searches
   for a file starting with <code class="filename">foo</code>, but suppresses its errors
   by redirecting it to <code class="filename">/dev/null</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>find / -name "foo*" 2&gt;/dev/null</pre></div></div><div class="sect1 " id="sec.adm.alias"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.alias"><span class="number">1.4 </span><span class="name">Using Aliases</span> <a title="Permalink" class="permalink" href="#sec.adm.alias">#</a></h2></div></div></div><p>
   An alias is a shortcut definition of one or more commands. The syntax for an
   alias is:
  </p><div class="verbatim-wrap"><pre class="screen">alias <em class="replaceable ">NAME</em>=<em class="replaceable ">DEFINITION</em></pre></div><p>
   For example, the following line defines an alias <code class="command">lt</code> that
   outputs a long listing (option <code class="option">-l</code>), sorts it by
   modification time (<code class="option">-t</code>), and prints it in reverse sorted order (<code class="option">-r</code>):
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>alias lt='ls -ltr'</pre></div><p>
   To view all alias definitions, use <code class="command">alias</code>. Remove your
   alias with <code class="command">unalias</code> and the corresponding alias name.
  </p></div><div class="sect1 " id="sec.adm.variables"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.variables"><span class="number">1.5 </span><span class="name">Using Variables in Bash</span> <a title="Permalink" class="permalink" href="#sec.adm.variables">#</a></h2></div></div></div><p>
   A shell variable can be global or local. Global variables, or environment
   variables, can be accessed in all shells. In contrast, local variables are
   visible in the current shell only.
  </p><p>
   To view all environment variables, use the <code class="command">printenv</code>
   command. If you need to know the value of a variable, insert the name of
   your variable as an argument:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>printenv PATH</pre></div><p>
   A variable, be it global or local, can also be viewed with
   <code class="command">echo</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>echo $PATH</pre></div><p>
   To set a local variable, use a variable name followed by the equal sign,
   followed by the value:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>PROJECT="SLED"</pre></div><p>
   Do not insert spaces around the equal sign, otherwise you get an error. To
   set an environment variable, use <code class="command">export</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>export NAME="tux"</pre></div><p>
   To remove a variable, use <code class="command">unset</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>unset NAME</pre></div><p>
   The following table contains some common environment variables which can be
   used in you shell scripts:
  </p><div class="table" id="tab.adm.envars"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 1.5: </span><span class="name">Useful Environment Variables </span><a title="Permalink" class="permalink" href="#tab.adm.envars">#</a></h6></div><div class="table-contents"><table summary="Useful Environment Variables" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>
       <p>
        <code class="envar">HOME</code>
       </p>
      </td><td>
       <p>
        the home directory of the current user
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">HOST</code>
       </p>
      </td><td>
       <p>
        the current host name
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">LANG</code>
       </p>
      </td><td>
       <p>
        when a tool is localized, it uses the language from this environment
        variable. English can also be set to <code class="literal">C</code>
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">PATH</code>
       </p>
      </td><td>
       <p>
        the search path of the shell, a list of directories separated by colon
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">PS1</code>
       </p>
      </td><td>
       <p>
        specifies the normal prompt printed before each command
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">PS2</code>
       </p>
      </td><td>
       <p>
        specifies the secondary prompt printed when you execute a multi-line
        command
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">PWD</code>
       </p>
      </td><td>
       <p>
        current working directory
       </p>
      </td></tr><tr><td>
       <p>
        <code class="envar">USER</code>
       </p>
      </td><td>
       <p>
        the current user
       </p>
      </td></tr></tbody></table></div></div><div class="sect2 " id="sec.adm.variables.argument"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.variables.argument"><span class="number">1.5.1 </span><span class="name">Using Argument Variables</span> <a title="Permalink" class="permalink" href="#sec.adm.variables.argument">#</a></h3></div></div></div><p>
    For example, if you have the script <code class="command">foo.sh</code> you can
    execute it like this:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>foo.sh "Tux Penguin" 2000</pre></div><p>
    To access all the arguments which are passed to your script, you need
    positional parameters. These are <code class="envar">$1</code> for the first argument,
    <code class="envar">$2</code> for the second, and so on. You can have up to nine
    parameters. To get the script name, use <code class="envar">$0</code>.
   </p><p>
    The following script <code class="command">foo.sh</code> prints all arguments from 1
    to 4:
   </p><div class="verbatim-wrap"><pre class="screen">#!/bin/sh
echo \"$1\" \"$2\" \"$3\" \"$4\"</pre></div><p>
    If you execute this script with the above arguments, you get:
   </p><div class="verbatim-wrap"><pre class="screen">"Tux Penguin" "2000" "" ""</pre></div></div><div class="sect2 " id="sec.adm.shell.varsubst"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.shell.varsubst"><span class="number">1.5.2 </span><span class="name">Using Variable Substitution</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.varsubst">#</a></h3></div></div></div><p>
    Variable substitutions apply a pattern to the content of a variable either
    from the left or right side. The following list contains the possible
    syntax forms:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753599216"><span class="term "><code class="literal">${VAR#pattern}</code>
     </span></dt><dd><p>
       removes the shortest possible match from the left:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">tux &gt; </code>echo ${file#*/}
home/tux/book/book.tar.bz2</pre></div></dd><dt id="idm139698753595936"><span class="term "><code class="literal">${VAR##pattern}</code>
     </span></dt><dd><p>
       removes the longest possible match from the left:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">tux &gt; </code>echo ${file##*/}
book.tar.bz2</pre></div></dd><dt id="idm139698753592672"><span class="term "><code class="literal">${VAR%pattern}</code>
     </span></dt><dd><p>
       removes the shortest possible match from the right:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">tux &gt; </code>echo ${file%.*}
/home/tux/book/book.tar</pre></div></dd><dt id="idm139698753589408"><span class="term "><code class="literal">${VAR%%pattern}</code>
     </span></dt><dd><p>
       removes the longest possible match from the right:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">tux &gt; </code>echo ${file%%.*}
/home/tux/book/book</pre></div></dd><dt id="idm139698753586144"><span class="term "><code class="literal">${VAR/pattern_1/pattern_2}</code>
     </span></dt><dd><p>
       substitutes the content of <em class="replaceable ">VAR</em> from the
       <em class="replaceable ">PATTERN_1</em> with
       <em class="replaceable ">PATTERN_2</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>file=/home/tux/book/book.tar.bz2
<code class="prompt user">tux &gt; </code>echo ${file/tux/wilber}
/home/wilber/book/book.tar.bz2</pre></div></dd></dl></div></div></div><div class="sect1 " id="sec.adm.shell.grouping"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.shell.grouping"><span class="number">1.6 </span><span class="name">Grouping and Combining Commands</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.grouping">#</a></h2></div></div></div><p>
   Shells allow you to concatenate and group commands for conditional
   execution. Each command returns an exit code which determines the success or
   failure of its operation. If it is 0 (zero) the command was successful,
   everything else marks an error which is specific to the command.
  </p><p>
   The following list shows, how commands can be grouped:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753578416"><span class="term "><code class="literal">Command1 ; Command2</code>
    </span></dt><dd><p>
      executes the commands in sequential order. The exit code is not checked.
      The following line displays the content of the file with
      <code class="command">cat</code> and then prints its file properties with
      <code class="command">ls</code> regardless of their exit codes:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>cat filelist.txt ; ls -l filelist.txt</pre></div></dd><dt id="idm139698753574512"><span class="term "><code class="literal">Command1 &amp;&amp; Command2</code>
    </span></dt><dd><p>
      runs the right command, if the left command was successful (logical AND).
      The following line displays the content of the file and prints its file
      properties only, when the previous command was successful (compare it
      with the previous entry in this list):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>cat filelist.txt &amp;&amp; ls -l filelist.txt</pre></div></dd><dt id="idm139698753571408"><span class="term "><code class="literal">Command1 || Command2</code>
    </span></dt><dd><p>
      runs the right command, when the left command has failed (logical OR).
      The following line creates only a directory in
      <code class="filename">/home/wilber/bar</code> when the creation of the directory
      in <code class="filename">/home/tux/foo</code> has failed:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mkdir /home/tux/foo || mkdir /home/wilber/bar</pre></div></dd><dt id="idm139698753567504"><span class="term "><code class="literal">funcname(){ ... }</code>
    </span></dt><dd><p>
      creates a shell function. You can use the positional parameters to access
      its arguments. The following line defines the function
      <code class="literal">hello</code> to print a short message:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>hello() { echo "Hello $1"; }</pre></div><p>
      You can call this function like this:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>hello Tux</pre></div><p>
      which prints:
     </p><div class="verbatim-wrap"><pre class="screen">Hello Tux</pre></div></dd></dl></div></div><div class="sect1 " id="sec.adm.shell.commonconstructs"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.shell.commonconstructs"><span class="number">1.7 </span><span class="name">Working with Common Flow Constructs</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.commonconstructs">#</a></h2></div></div></div><p>
   To control the flow of your script, a shell has <code class="command">while</code>,
   <code class="command">if</code>, <code class="command">for</code> and <code class="command">case</code>
   constructs.
  </p><div class="sect2 " id="sec.adm.shell.if"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.shell.if"><span class="number">1.7.1 </span><span class="name">The if Control Command</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.if">#</a></h3></div></div></div><p>
    The <code class="command">if</code> command is used to check expressions. For
    example, the following code tests whether the current user is Tux:
   </p><div class="verbatim-wrap"><pre class="screen">if test $USER = "tux"; then
  echo "Hello Tux."
else
  echo "You are not Tux."
fi</pre></div><p>
    The test expression can be as complex or simple as possible. The following
    expression checks if the file <code class="filename">foo.txt</code> exists:
   </p><div class="verbatim-wrap"><pre class="screen">if test -e /tmp/foo.txt ; then
  echo "Found foo.txt"
fi</pre></div><p>
    The test expression can also be abbreviated in angled brackets:
   </p><div class="verbatim-wrap"><pre class="screen">if [ -e /tmp/foo.txt ] ; then
  echo "Found foo.txt"
fi</pre></div><p>
    Find more useful expressions at
    <a class="link" href="http://www.cyberciti.biz/nixcraft/linux/docs/uniqlinuxfeatures/lsst/ch03sec02.html" target="_blank">http://www.cyberciti.biz/nixcraft/linux/docs/uniqlinuxfeatures/lsst/ch03sec02.html</a>.
   </p></div><div class="sect2 " id="sec.adm.shell.for"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.shell.for"><span class="number">1.7.2 </span><span class="name">Creating Loops with the <code class="command">for</code> Command</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.for">#</a></h3></div></div></div><p>
    The <code class="command">for</code> loop allows you to execute commands to a list of
    entries. For example, the following code prints some information about PNG
    files in the current directory:
   </p><div class="verbatim-wrap"><pre class="screen">for i in *.png; do
 ls -l $i
done</pre></div></div></div><div class="sect1 " id="sec.adm.shell.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.shell.moreinfo"><span class="number">1.8 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.adm.shell.moreinfo">#</a></h2></div></div></div><p>
   Important information about Bash is provided in the man pages <code class="command">man
   bash</code>. More about this topic can be found in the following list:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <a class="link" href="http://tldp.org/LDP/Bash-Beginners-Guide/html/index.html" target="_blank">http://tldp.org/LDP/Bash-Beginners-Guide/html/index.html</a>—Bash
     Guide for Beginners
    </p></li><li class="listitem "><p>
     <a class="link" href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html" target="_blank">http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html</a>—BASH
     Programming - Introduction HOW-TO
    </p></li><li class="listitem "><p>
     <a class="link" href="http://tldp.org/LDP/abs/html/index.html" target="_blank">http://tldp.org/LDP/abs/html/index.html</a>—Advanced
     Bash-Scripting Guide
    </p></li><li class="listitem "><p>
     <a class="link" href="http://www.grymoire.com/Unix/Sh.html" target="_blank">http://www.grymoire.com/Unix/Sh.html</a>—Sh - the
     Bourne Shell
    </p></li></ul></div></div></div><div class="chapter " id="cha.adm.sudo"><div class="titlepage"><div><div><h2 class="title"><span class="number">2 </span><span class="name">sudo
</span> <a title="Permalink" class="permalink" href="#cha.adm.sudo">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>adm_sudo.xml</li><li><span class="ds-label">ID: </span>cha.adm.sudo</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.adm.sudo.usage"><span class="number">2.1 </span><span class="name">Basic <code class="command">sudo</code> Usage</span></a></span></dt><dt><span class="sect1"><a href="#sec.sudo.conf"><span class="number">2.2 </span><span class="name">Configuring <code class="command">sudo</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.sudo.usecases"><span class="number">2.3 </span><span class="name">Common Use Cases</span></a></span></dt><dt><span class="sect1"><a href="#sec.adm.sudo.moreinfo"><span class="number">2.4 </span><span class="name">More Information</span></a></span></dt></dl></div></div><p>
  Many commands and system utilities need to be run as <code class="systemitem">root</code> to modify
  files and/or perform tasks that only the super user is allowed to. For
  security reasons and to avoid accidentally running dangerous commands, it is
  generally advisable not to log in directly as <code class="systemitem">root</code>. Instead, it is
  recommended to work as a normal, unprivileged user and use the <code class="command">sudo</code>
  command to run commands with elevated privileges.
 </p><p>
  On <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, <code class="command">sudo</code> is configured by default to work similarly to su.
  However, <code class="command">sudo</code> offers the possibility to allow users to run commands with
  privileges of any other user in a highly configurable manner. This can be
  used to assign roles with specific privileges to certain users and groups. It
  is for example possible to allow members of the group <code class="systemitem">users</code> to run a
  command with the privileges of <code class="systemitem">wilber</code>. Access to the command can be
  further restricted by, for example, forbidding to specify any command
  options. While su always requires the <code class="systemitem">root</code> password for authentication
  with PAM, <code class="command">sudo</code> can be configured to authenticate with your own credentials.
  This increases security by not having to share the <code class="systemitem">root</code> password. For
  example, you can allow members of the group <code class="systemitem">users</code> to run a command
  <code class="command">frobnicate</code> as <code class="systemitem">wilber</code>, with the restriction that
  no arguments are specified. This can be used to assign roles with specific
  abilities to certain users and groups.
 </p><div class="sect1 " id="sec.adm.sudo.usage"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.sudo.usage"><span class="number">2.1 </span><span class="name">Basic <code class="command">sudo</code> Usage</span> <a title="Permalink" class="permalink" href="#sec.adm.sudo.usage">#</a></h2></div></div></div><p>
   <code class="command">sudo</code> is simple to use, yet very powerful.
  </p><div class="sect2 " id="sec.adm.sudo.usage.cmd"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.sudo.usage.cmd"><span class="number">2.1.1 </span><span class="name">Running a Single Command</span> <a title="Permalink" class="permalink" href="#sec.adm.sudo.usage.cmd">#</a></h3></div></div></div><p>
    Logged in as normal user, you can run any command as <code class="systemitem">root</code> by
    adding <code class="command">sudo</code> before it. It will prompt for the root password and, if
    authenticated successfully, run the command as <code class="systemitem">root</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">id -un</code><span id="co.sudo.usage.id"></span><span class="callout">1</span>
tux
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">id -un</code>
root's password:<span id="co.sudo.usage.pw"></span><span class="callout">2</span>
root
<code class="prompt user">tux &gt; </code><code class="command">id -un</code>
tux<span id="co.sudo.usage.after"></span><span class="callout">3</span>
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">id -un</code>
<span id="co.sudo.usage.nopw"></span><span class="callout">4</span>
root</pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.usage.id"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The <code class="command">id -un</code> command prints the login name of the
      current user.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.usage.pw"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      The password is not shown during input, neither as clear text nor as
      bullets.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.usage.after"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      Only commands started with <code class="command">sudo</code> are run with elevated privileges. If
      you run the same command without the <code class="command">sudo</code> prefix, it is run with the
      privileges of the current user again.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.usage.nopw"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      For a limited amount of time, you do not need to enter the <code class="systemitem">root</code>
      password again.
     </p></td></tr></table></div><div id="idm139698753506976" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: I/O Redirection</h6><p>
     I/O redirection does not work as you would probably expect:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> echo s &gt; /proc/sysrq-trigger
bash: /proc/sysrq-trigger: Permission denied
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> cat &lt; /proc/1/maps
bash: /proc/1/maps: Permission denied</pre></div><p>
     Only the <code class="command">echo</code>/<code class="command">cat</code> binary is run with
     elevated privileges, while the redirection is performed by the user's
     shell with user privileges. You can either start a shell like in
     <a class="xref" href="#sec.sudo.shell" title="2.1.2. Starting a Shell">Section 2.1.2, “Starting a Shell”</a> or use the <code class="command">dd</code> utility
     instead:
    </p><div class="verbatim-wrap"><pre class="screen">echo s | sudo dd of=/proc/sysrq-trigger
sudo dd if=/proc/1/maps | cat</pre></div></div></div><div class="sect2 " id="sec.sudo.shell"><div class="titlepage"><div><div><h3 class="title" id="sec.sudo.shell"><span class="number">2.1.2 </span><span class="name">Starting a Shell</span> <a title="Permalink" class="permalink" href="#sec.sudo.shell">#</a></h3></div></div></div><p>
    Having to add <code class="command">sudo</code> before every command can be cumbersome. While you
    could specify a shell as a command <code class="command">sudo bash</code>, it is
    recommended to rather use one of the built-in mechanisms to start a shell:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753497456"><span class="term "><code class="literal">sudo -s (&lt;command&gt;)</code>
     </span></dt><dd><p>
       Starts a shell specified by the <code class="envar">SHELL</code> environment
       variable or the target user's default shell. If a command is given, it
       is passed to the shell (with the <code class="option">-c</code> option), else the
       shell is run in interactive mode.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>sudo -i
root's password:
<code class="prompt user">root:/home/tux # </code>exit
<code class="prompt user">tux:~ &gt; </code></pre></div></dd><dt id="idm139698753492480"><span class="term "><code class="literal">sudo -i (&lt;command&gt;)</code>
     </span></dt><dd><p>
       Like <code class="option">-s</code>, but starts the shell as login shell. This
       means that the shell's start-up files (<code class="filename">.profile</code>
       etc.) are processed and the current working directory is set to the
       target user's home directory.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>sudo -i
root's password:
<code class="prompt user">root:~ # </code>exit
<code class="prompt user">tux:~ &gt; </code></pre></div></dd></dl></div></div><div class="sect2 " id="sec.adm.sudo.usage.env"><div class="titlepage"><div><div><h3 class="title" id="sec.adm.sudo.usage.env"><span class="number">2.1.3 </span><span class="name">Environment Variables</span> <a title="Permalink" class="permalink" href="#sec.adm.sudo.usage.env">#</a></h3></div></div></div><p>
    By default, <code class="command">sudo</code> does not propagate environment variables:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>ENVVAR=test env | grep ENVVAR
ENVVAR=test
<code class="prompt user">tux &gt; </code>ENVVAR=test sudo env | grep ENVVAR
root's password:
<span id="co.sudo.env.novar"></span><span class="callout">1</span>
<code class="prompt user">tux &gt; </code></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.env.novar"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The empty output shows that the environment variable
      <code class="envar">ENVVAR</code> did not exist in the context of the command run
      with <code class="command">sudo</code>.
     </p></td></tr></table></div><p>
    This behavior can be changed by the <code class="literal">env_reset</code> option,
    see <a class="xref" href="#tab.adm.sudo.options" title="Useful Flags and Options">Table 2.1, “Useful Flags and Options”</a>.
   </p></div></div><div class="sect1 " id="sec.sudo.conf"><div class="titlepage"><div><div><h2 class="title" id="sec.sudo.conf"><span class="number">2.2 </span><span class="name">Configuring <code class="command">sudo</code></span> <a title="Permalink" class="permalink" href="#sec.sudo.conf">#</a></h2></div></div></div><p>
   <code class="command">sudo</code> is a very flexible tool with extensive configuration.
  </p><div id="idm139698753475904" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Locked yourself out of sudo</h6><p>
    If you accidentally locked yourself out of <code class="command">sudo</code>, use <code class="command">su
    -</code> and the <code class="systemitem">root</code> password to get a root shell.
    To fix the error, run <code class="command">visudo</code>.
   </p></div><div class="sect2 " id="sec.sudo.conf.edit"><div class="titlepage"><div><div><h3 class="title" id="sec.sudo.conf.edit"><span class="number">2.2.1 </span><span class="name">Editing the Configuration Files</span> <a title="Permalink" class="permalink" href="#sec.sudo.conf.edit">#</a></h3></div></div></div><p>
    The main policy configuration file for <code class="command">sudo</code> is
    <code class="filename">/etc/sudoers</code>. As it is possible to lock yourself out
    of the system due to errors in this file, it is strongly
    recommended to use <code class="command">visudo</code> for editing. It will prevent
    simultaneous changes to the opened file and check for syntax errors before
    saving the modifications.
   </p><p>
    Despite its name, you can also use editors other than vi by setting the
    <code class="envar">EDITOR</code> environment variable, for example:
   </p><div class="verbatim-wrap"><pre class="screen">sudo EDITOR=<em class="replaceable ">/usr/bin/nano</em> visudo</pre></div><p>
    However, the <code class="filename">/etc/sudoers</code> file itself is supplied by
    the system packages and modifications may break on updates. Therefore, it
    is recommended to put custom configuration into files in the
    <code class="filename">/etc/sudoers.d/</code> directory. Any file in there is
    automatically included. To create or edit a file in that subdirectory, run:
   </p><div class="verbatim-wrap"><pre class="screen">sudo visudo -f /etc/sudoers.d/<em class="replaceable ">NAME</em></pre></div><p>
    Alternatively with a different editor (for example
    <code class="command">nano</code>):
   </p><div class="verbatim-wrap"><pre class="screen">sudo EDITOR=<em class="replaceable ">/usr/bin/nano</em> visudo -f /etc/sudoers.d/<em class="replaceable ">NAME</em></pre></div><div id="idm139698753462848" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Ignored Files in <code class="filename">/etc/sudoers.d</code></h6><p>
     The <code class="literal">#includedir</code> command in
     <code class="filename">/etc/sudoers</code>, used for
     <code class="filename">/etc/sudoers.d</code>, ignores files that end in
     <code class="literal">~</code> (tilde) or contain a <code class="literal">.</code> (dot).
    </p></div><p>
    For more information on the <code class="command">visudo</code> command, run
    <code class="command">man 8 visudo</code>.
   </p></div><div class="sect2 " id="sec.sudo.conf.syntax"><div class="titlepage"><div><div><h3 class="title" id="sec.sudo.conf.syntax"><span class="number">2.2.2 </span><span class="name">Basic sudoers Configuration Syntax</span> <a title="Permalink" class="permalink" href="#sec.sudo.conf.syntax">#</a></h3></div></div></div><p>
    In the sudoers configuration files, there are two types of options: strings
    and flags. While strings can contain any value, flags can be turned either
    ON or OFF. The most important syntax constructs for sudoers configuration
    files are:
   </p><div class="verbatim-wrap"><pre class="screen"># Everything on a line after a # gets ignored <span id="co.sudo.syntax.comment"></span><span class="callout">1</span>
Defaults !insults # Disable the insults flag <span id="co.sudo.syntax.flag"></span><span class="callout">2</span>
Defaults env_keep += "DISPLAY HOME" # Add DISPLAY and HOME to env_keep
tux ALL = NOPASSWD: /usr/bin/frobnicate, PASSWD: /usr/bin/journalctl <span id="co.sudo.syntax.rule"></span><span class="callout">3</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.syntax.comment"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      There are two exceptions: <code class="literal">#include</code> and
      <code class="literal">#includedir</code> are normal commands. Followed by digits,
      it specifies a UID.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.syntax.flag"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Remove the <code class="literal">!</code> to set the specified flag to ON.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.sudo.syntax.rule"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      See <a class="xref" href="#sec.sudo.conf.rule" title="2.2.3. Rules in sudoers">Section 2.2.3, “Rules in sudoers”</a>.
     </p></td></tr></table></div><div class="table" id="tab.adm.sudo.options"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 2.1: </span><span class="name">Useful Flags and Options </span><a title="Permalink" class="permalink" href="#tab.adm.sudo.options">#</a></h6></div><div class="table-contents"><table summary="Useful Flags and Options" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>
        <p>
         Option name
        </p>
       </th><th>
        <p>
         Description
        </p>
       </th><th>
        <p>
         Example
        </p>
       </th></tr></thead><tbody><tr><td><code class="literal">targetpw</code>
       </td><td>
        <p>
         This flag controls whether the invoking user is required to enter the
         password of the target user (ON) (for example <code class="systemitem">root</code>) or the
         invoking user (OFF).
        </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">Defaults targetpw # Turn targetpw flag ON</pre></div>
       </td></tr><tr><td><code class="literal">rootpw</code>
       </td><td>
        <p>
         If set, <code class="command">sudo</code> will prompt for the <code class="systemitem">root</code> password instead of the
         target user's or the invoker's. The default is OFF.
        </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">Defaults !rootpw # Turn rootpw flag OFF</pre></div>
       </td></tr><tr><td><code class="literal">env_reset</code>
       </td><td>
        <p>
         If set, <code class="command">sudo</code> constructs a minimal environment with only
         <code class="envar">TERM</code>, <code class="envar">PATH</code>, <code class="envar">HOME</code>,
         <code class="envar">MAIL</code>, <code class="envar">SHELL</code>, <code class="envar">LOGNAME</code>,
         <code class="envar">USER</code>, <code class="envar">USERNAME</code>, and
         <code class="envar">SUDO_*</code> set. Additionally, variables listed in
         <code class="literal">env_keep</code> get imported from the calling
         environment. The default is ON.
        </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">Defaults env_reset # Turn env_reset flag ON</pre></div>
       </td></tr><tr><td><code class="literal">env_keep</code>
       </td><td>
        <p>
         List of environment variables to keep when the
         <code class="literal">env_reset</code> flag is ON.
        </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen"># Set env_keep to contain EDITOR and PROMPT
Defaults env_keep = "EDITOR PROMPT"
Defaults env_keep += "JRE_HOME" # Add JRE_HOME
Defaults env_keep -= "JRE_HOME" # Remove JRE_HOME</pre></div>
       </td></tr><tr><td><code class="literal">env_delete</code>
       </td><td>
        <p>
         List of environment variables to remove when the
         <code class="literal">env_reset</code> flag is OFF.
        </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen"># Set env_delete to contain EDITOR and PROMPT
Defaults env_delete = "EDITOR PROMPT"
Defaults env_delete += "JRE_HOME" # Add JRE_HOME
Defaults env_delete -= "JRE_HOME" # Remove JRE_HOME</pre></div>
       </td></tr></tbody></table></div></div><p>
    The <code class="literal">Defaults</code> token can also be used to create aliases
    for a collection of users, hosts, and commands. Furthermore, it is possible
    to apply an option only to a specific set of users.
   </p><p>
    For detailed information about the <code class="filename">/etc/sudoers</code>
    configuration file, consult <code class="command">man 5 sudoers</code>.
   </p></div><div class="sect2 " id="sec.sudo.conf.rule"><div class="titlepage"><div><div><h3 class="title" id="sec.sudo.conf.rule"><span class="number">2.2.3 </span><span class="name">Rules in sudoers</span> <a title="Permalink" class="permalink" href="#sec.sudo.conf.rule">#</a></h3></div></div></div><p>
    Rules in the sudoers configuration can be very complex, so this section
    will only cover the basics. Each rule follows the basic scheme
    (<code class="literal">[]</code> marks optional parts):
   </p><div class="verbatim-wrap"><pre class="screen">#Who      Where         As whom      Tag                What
User_List Host_List = [(User_List)] [NOPASSWD:|PASSWD:] Cmnd_List</pre></div><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Syntax for sudoers Rules </span><a title="Permalink" class="permalink" href="#idm139698753412096">#</a></h6></div><dl class="variablelist"><dt id="idm139698753411344"><span class="term "><code class="literal">User_List</code>
     </span></dt><dd><p>
       One or more (separated by <code class="literal">,</code>) identifiers: Either a
       user name, a group in the format <code class="literal">%GROUPNAME</code> or a user
       ID in the format <code class="literal">#UID</code>. Negation can be performed with
       a <code class="literal">!</code> prefix.
      </p></dd><dt id="idm139698753407360"><span class="term "><code class="literal">Host_List</code>
     </span></dt><dd><p>
       One or more (separated by <code class="literal">,</code>) identifiers: Either a
       (fully qualified) host name or an IP address. Negation can be performed
       with a <code class="literal">!</code> prefix. <code class="literal">ALL</code> is the usual
       choice for <code class="literal">Host_List</code>.
      </p></dd><dt id="idm139698753403360"><span class="term "><code class="literal">NOPASSWD:|PASSWD:</code>
     </span></dt><dd><p>
       The user will not be prompted for a password when running commands
       matching <code class="literal">CMDSPEC</code> after <code class="literal">NOPASSWD:</code>.
      </p><p>
       <code class="literal">PASSWD</code> is the default, it only needs to be specified
       when both are on the same line:
      </p><div class="verbatim-wrap"><pre class="screen">tux ALL = PASSWD: /usr/bin/foo, NOPASSWD: /usr/bin/bar</pre></div></dd><dt id="idm139698753398848"><span class="term "><code class="literal">Cmnd_List</code>
     </span></dt><dd><p>
       One or more (separated by <code class="literal">,</code>) specifiers: A path to an
       executable, followed by allowed arguments or nothing.
      </p><div class="verbatim-wrap"><pre class="screen">/usr/bin/foo     # Anything allowed
/usr/bin/foo bar # Only "/usr/bin/foo bar" allowed
/usr/bin/foo ""  # No arguments allowed</pre></div></dd></dl></div><p>
    <code class="literal">ALL</code> can be used as <code class="literal">User_List</code>,
    <code class="literal">Host_List</code>, and <code class="literal">Cmnd_List</code>.
   </p><p>
    A rule that allows <code class="systemitem">tux</code> to run all commands as root without
    entering a password:
   </p><div class="verbatim-wrap"><pre class="screen">tux ALL = NOPASSWD: ALL</pre></div><p>
    A rule that allows <code class="systemitem">tux</code> to run <code class="command">systemctl restart
    apache2</code>:
   </p><div class="verbatim-wrap"><pre class="screen">tux ALL = /usr/bin/systemctl restart apache2</pre></div><p>
    A rule that allows <code class="systemitem">tux</code> to run <code class="command">wall</code> as
    <code class="systemitem">admin</code> with no arguments:
   </p><div class="verbatim-wrap"><pre class="screen">tux ALL = (admin) /usr/bin/wall ""</pre></div><div id="idm139698753386912" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Dangerous constructs</h6><p>
     Constructs of the kind
    </p><div class="verbatim-wrap"><pre class="screen">ALL ALL = ALL</pre></div><p>
     <span class="emphasis"><em>must not</em></span> be used without <code class="literal">Defaults
     targetpw</code>, otherwise anyone can run commands as <code class="systemitem">root</code>.
    </p></div></div></div><div class="sect1 " id="sec.sudo.usecases"><div class="titlepage"><div><div><h2 class="title" id="sec.sudo.usecases"><span class="number">2.3 </span><span class="name">Common Use Cases</span> <a title="Permalink" class="permalink" href="#sec.sudo.usecases">#</a></h2></div></div></div><p>
   Although the default configuration is often sufficient for simple setups and
   desktop environments, custom configurations can be very useful.
  </p><div class="sect2 " id="sec.sudo.usecases.userpw"><div class="titlepage"><div><div><h3 class="title" id="sec.sudo.usecases.userpw"><span class="number">2.3.1 </span><span class="name">Using <code class="command">sudo</code> without <code class="systemitem">root</code> Password</span> <a title="Permalink" class="permalink" href="#sec.sudo.usecases.userpw">#</a></h3></div></div></div><p>
    In cases with special restrictions (<span class="quote">“<span class="quote">user X can only run command Y as
    <code class="systemitem">root</code></span>”</span>) it is not possible. In other cases, it is still
    favorable to have some kind of separation. By convention, members of the
    group <code class="systemitem">wheel</code> can run all commands
    with <code class="command">sudo</code> as root.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Add yourself to the <code class="systemitem">wheel</code>
      group
     </p><p>
      If your user account is not already member of the
      <code class="systemitem">wheel</code> group, add it by running
      <code class="command">sudo usermod -a -G wheel
      <em class="replaceable ">USERNAME</em></code> and logging out and in
      again. Verify that the change was successful by running <code class="command">groups
      <em class="replaceable ">USERNAME</em></code>.
     </p></li><li class="step "><p>
      Make authentication with the invoking user's password the default.
     </p><p>
      Create the file <code class="filename">/etc/sudoers.d/userpw</code> with
      <code class="command">visudo</code> (see <a class="xref" href="#sec.sudo.conf.edit" title="2.2.1. Editing the Configuration Files">Section 2.2.1, “Editing the Configuration Files”</a>) and
      add:
     </p><div class="verbatim-wrap"><pre class="screen">Defaults !targetpw</pre></div></li><li class="step "><p>
      Select a new default rule.
     </p><p>
      Depending on whether you want users to re-enter their passwords,
      uncomment the specific line in <code class="filename">/etc/sudoers</code> and
      comment out the default rule.
     </p><div class="verbatim-wrap"><pre class="screen">## Uncomment to allow members of group wheel to execute any command
# %wheel ALL=(ALL) ALL

## Same thing without a password
# %wheel ALL=(ALL) NOPASSWD: ALL</pre></div></li><li class="step "><p>
      Make the default rule more restrictive
     </p><p>
      Comment out or remove the allow-everything rule in
      <code class="filename">/etc/sudoers</code>:
     </p><div class="verbatim-wrap"><pre class="screen">ALL     ALL=(ALL) ALL   # WARNING! Only use this together with 'Defaults targetpw'!</pre></div><div id="idm139698753363136" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Dangerous rule in sudoers</h6><p>
       Do not forget this step, otherwise <span class="emphasis"><em>any</em></span> user can
       execute <span class="emphasis"><em>any</em></span> command as <code class="systemitem">root</code>!
      </p></div></li><li class="step "><p>
      Test the configuration
     </p><p>
      Try to run <code class="command">sudo</code> as member and non-member of
      <code class="systemitem">wheel</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux:~ &gt; </code>groups
users wheel
<code class="prompt user">tux:~ &gt; </code>sudo id -un
tux's password:
root
<code class="prompt user">wilber:~ &gt; </code>groups
users
<code class="prompt user">wilber:~ &gt; </code>sudo id -un
wilber is not in the sudoers file.  This incident will be reported.</pre></div></li></ol></div></div></div><div class="sect2 " id="sec.sudo.usecases.xorg"><div class="titlepage"><div><div><h3 class="title" id="sec.sudo.usecases.xorg"><span class="number">2.3.2 </span><span class="name">Using <code class="command">sudo</code> with X.Org Applications</span> <a title="Permalink" class="permalink" href="#sec.sudo.usecases.xorg">#</a></h3></div></div></div><p>
    When starting graphical applications with <code class="command">sudo</code>, you will encounter the
    following error:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> xterm
xterm: Xt error: Can't open display: %s
xterm: DISPLAY is not set</pre></div><p>
    YaST will pick the ncurses interface instead of the graphical one.
   </p><p>
    To use X.Org in applications started with <code class="command">sudo</code>, the environment
    variables <code class="envar">DISPLAY</code> and <code class="envar">XAUTHORITY</code> need to be
    propagated. To configure this, create the file
    <code class="filename">/etc/sudoers.d/xorg</code>, (see
    <a class="xref" href="#sec.sudo.conf.edit" title="2.2.1. Editing the Configuration Files">Section 2.2.1, “Editing the Configuration Files”</a>) and add the following line:
   </p><div class="verbatim-wrap"><pre class="screen">Defaults env_keep += "DISPLAY XAUTHORITY"</pre></div><p>
    If not set already, set the <code class="envar">XAUTHORITY</code> variable as follows:
   </p><div class="verbatim-wrap"><pre class="screen">export XAUTHORITY=~/.Xauthority</pre></div><p>
    Now X.Org applications can be run as usual:
   </p><div class="verbatim-wrap"><pre class="screen">sudo yast2</pre></div></div></div><div class="sect1 " id="sec.adm.sudo.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.adm.sudo.moreinfo"><span class="number">2.4 </span><span class="name">More Information</span> <a title="Permalink" class="permalink" href="#sec.adm.sudo.moreinfo">#</a></h2></div></div></div><p>
   A quick overview about the available command line switches can be retrieved
   by <code class="command">sudo --help</code>. An explanation and other important
   information can be found in the man page: <code class="command">man 8 sudo</code>,
   while the configuration is documented in <code class="command">man 5 sudoers</code>.
  </p></div></div><div class="chapter " id="cha.onlineupdate.you"><div class="titlepage"><div><div><h2 class="title"><span class="number">3 </span><span class="name">YaST Online Update</span> <a title="Permalink" class="permalink" href="#cha.onlineupdate.you">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>yast2_you.xml</li><li><span class="ds-label">ID: </span>cha.onlineupdate.you</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.onlineupdate.you.overview"><span class="number">3.1 </span><span class="name">The Online Update Dialog</span></a></span></dt><dt><span class="sect1"><a href="#sec.onlineupdate.you.install"><span class="number">3.2 </span><span class="name">Installing Patches</span></a></span></dt><dt><span class="sect1"><a href="#sec.onlineupdate.you.automatically"><span class="number">3.3 </span><span class="name">Automatic Online Update</span></a></span></dt></dl></div></div><p>
  SUSE offers a continuous stream of software security updates for your
  product. By default, the update applet is used to keep your system
  up-to-date. Refer to <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 12 “Installing or Removing Software”, Section 12.4 “Keeping the System Up-to-date”</span> for further information on
  the update applet. This chapter covers the alternative tool for updating
  software packages: YaST Online Update.
 </p><p>
  The current patches for <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> are available from an update
  software repository. If you have registered your product during
  the installation, an update repository is already configured. If you have not
  registered <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, you can do so by starting the <span class="guimenu">Product
  Registration</span> in YaST. Alternatively, you can manually add an
  update repository from a source you trust. To add or remove repositories,
  start the Repository Manager with <span class="guimenu">Software</span> › <span class="guimenu">Software Repositories</span> in YaST. Learn more
  about the Repository Manager in <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 12 “Installing or Removing Software”, Section 12.3 “Managing Software Repositories and Services”</span>.
 </p><div id="idm139698753330240" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Error on Accessing the Update Catalog</h6><p>
   If you are not able to access the update catalog, this might be because of
   an expired subscription. Normally, <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> comes with a one-year or
   three-year subscription, during which you have access to the update catalog.
   This access will be denied after the subscription ends.
  </p><p>
   If an access to the update catalog is denied, you will see a warning
   message prompting you to visit the SUSE Customer Center and check your
   subscription. The SUSE Customer Center is available at <a class="link" href="https://scc.suse.com//" target="_blank">https://scc.suse.com//</a>.
  </p></div><p>
  SUSE provides updates with different relevance levels:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753325248"><span class="term ">Security Updates</span></dt><dd><p>
     Fix severe security hazards and should always be installed.
    </p></dd><dt id="idm139698753323408"><span class="term ">Recommended Updates</span></dt><dd><p>
     Fix issues that could compromise your computer.
    </p></dd><dt id="idm139698753321568"><span class="term ">Optional Updates</span></dt><dd><p>
     Fix non-security relevant issues or provide enhancements.
    </p></dd></dl></div><div class="sect1 " id="sec.onlineupdate.you.overview"><div class="titlepage"><div><div><h2 class="title" id="sec.onlineupdate.you.overview"><span class="number">3.1 </span><span class="name">The Online Update Dialog</span> <a title="Permalink" class="permalink" href="#sec.onlineupdate.you.overview">#</a></h2></div></div></div><p>
   To open the YaST <span class="guimenu">Online Update</span> dialog, start YaST and
   select <span class="guimenu">Software </span> › <span class="guimenu">Online
   Update</span>. Alternatively, start it from the command
   line with <code class="command">yast2 online_update</code>.
  </p><p>
   The <span class="guimenu">Online Update</span> window consists of four sections.
  </p><div class="figure" id="idm139698753314752"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_you.png"><img src="images/yast2_you.png" width="" alt="YaST Online Update" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 3.1: </span><span class="name">YaST Online Update </span><a title="Permalink" class="permalink" href="#idm139698753314752">#</a></h6></div></div><p>
   The <span class="guimenu">Summary</span> section on the left lists the available
   patches for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>. The patches are sorted by security relevance:
   <code class="literal">security</code>, <code class="literal">recommended</code>, and
   <code class="literal">optional</code>. You can change the view of the
   <span class="guimenu">Summary</span> section by selecting one of the following options
   from <span class="guimenu">Show Patch Category</span>:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753305056"><span class="term "><span class="guimenu">Needed Patches</span> (default view)</span></dt><dd><p>
      Non-installed patches that apply to packages installed on your system.
     </p></dd><dt id="idm139698753302912"><span class="term "><span class="guimenu">Unneeded Patches</span>
    </span></dt><dd><p>
      Patches that either apply to packages not installed on your system, or
      patches that have requirements which have already have been fulfilled
      (because the relevant packages have already been updated from another
      source).
     </p></dd><dt id="idm139698753300592"><span class="term "><span class="guimenu">All Patches</span>
    </span></dt><dd><p>
      All patches available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
     </p></dd></dl></div><p>
   Each list entry in the <span class="guimenu">Summary</span> section consists of a
   symbol and the patch name. For an overview of the possible symbols and their
   meaning, press <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F1</span>. Actions required by <code class="literal">Security</code> and
   <code class="literal">Recommended</code> patches are automatically preset. These
   actions are <span class="guimenu">Autoinstall</span>, <span class="guimenu">Autoupdate</span>
   and <span class="guimenu">Autodelete</span>.
  </p><p>
   If you install an up-to-date package from a repository other than the update
   repository, the requirements of a patch for this package may be fulfilled
   with this installation. In this case a check mark is displayed in front of
   the patch summary. The patch will be visible in the list until you mark it
   for installation. This will in fact not install the patch (because the
   package already is up-to-date), but mark the patch as having been installed.
  </p><p>
   Select an entry in the <span class="guimenu">Summary</span> section to view a short
   <span class="guimenu">Patch Description</span> at the bottom left corner of the
   dialog. The upper right section lists the packages included in the selected
   patch (a patch can consist of several packages). Click an entry in the upper
   right section to view details about the respective package that is included
   in the patch.
  </p></div><div class="sect1 " id="sec.onlineupdate.you.install"><div class="titlepage"><div><div><h2 class="title" id="sec.onlineupdate.you.install"><span class="number">3.2 </span><span class="name">Installing Patches</span> <a title="Permalink" class="permalink" href="#sec.onlineupdate.you.install">#</a></h2></div></div></div><p>
   The YaST Online Update dialog allows you to either install all available
   patches at once or manually select the desired patches. You may also revert patches that have been applied to the
   system.
  </p><p>
   By default, all new patches (except <code class="literal">optional</code> ones) that
   are currently available for your system are already marked for installation.
   They will be applied automatically once you click <span class="guimenu">Accept</span>
   or <span class="guimenu">Apply</span>.

   If one or multiple patches require a system reboot, you will be notified
   about this before the patch installation starts. You can then either decide
   to continue with the installation of the selected patches, skip the
   installation of all patches that need rebooting and install the rest, or go
   back to the manual patch selection.
  </p><div class="procedure " id="idm139698753285616"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 3.1: </span><span class="name">Applying Patches with YaST Online Update </span><a title="Permalink" class="permalink" href="#idm139698753285616">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST and select <span class="guimenu">Software</span> › <span class="guimenu">Online Update</span>.
    </p></li><li class="step "><p>
     To automatically apply all new patches (except <code class="literal">optional</code>
     ones) that are currently available for your system, press
     <span class="guimenu">Apply</span> or <span class="guimenu">Accept</span>.
    </p></li><li class="step "><p>
     First modify the selection of patches that you want to apply:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Use the respective filters and views that the interface provides. For
       details, refer to <a class="xref" href="#sec.onlineupdate.you.overview" title="3.1. The Online Update Dialog">Section 3.1, “The Online Update Dialog”</a>.
      </p></li><li class="step "><p>
       Select or deselect patches according to your needs and wishes by
       right-clicking the patch and choosing the respective action from the
       context menu.
      </p><div id="idm139698753276512" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Always Apply Security Updates</h6><p>
        Do not deselect any <code class="literal">security</code>-related patches without
        a very good reason. These patches fix severe security hazards and
        prevent your system from being exploited.
       </p></div></li><li class="step "><p>
       Most patches include updates for several packages. If you want to change
       actions for single packages, right-click a package in the package view
       and choose an action.
      </p></li><li class="step "><p>
       To confirm your selection and apply the selected patches, proceed with
       <span class="guimenu">Apply</span> or <span class="guimenu">Accept</span>.
      </p></li></ol></li><li class="step "><p>
     After the installation is complete, click <span class="guimenu">Finish</span> to
     leave the YaST <span class="guimenu">Online Update</span>. Your system is now
     up-to-date.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.onlineupdate.you.automatically"><div class="titlepage"><div><div><h2 class="title" id="sec.onlineupdate.you.automatically"><span class="number">3.3 </span><span class="name">Automatic Online Update</span> <a title="Permalink" class="permalink" href="#sec.onlineupdate.you.automatically">#</a></h2></div></div></div><p>
   YaST also offers the possibility to set up an automatic update with daily,
   weekly or monthly schedule. To use the respective module, you need to
   install the
   <code class="systemitem">yast2-online-update-configuration</code>
   package first.
  </p><p>
   By default, updates are downloaded as delta RPMs. Since rebuilding RPM
   packages from delta RPMs is a memory- and processor-intensive task, certain
   setups or hardware configurations might require you to disable the use of
   delta RPMs for the sake of performance.
  </p><p>
   Some patches, such as kernel updates or packages requiring license
   agreements, require user interaction, which would cause the automatic update
   procedure to stop. You can configure to skip patches that require user
   interaction.
  </p><div class="procedure " id="idm139698753265088"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 3.2: </span><span class="name">Configuring the Automatic Online Update </span><a title="Permalink" class="permalink" href="#idm139698753265088">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     After installation, start YaST and select <span class="guimenu">Software</span> › <span class="guimenu">Online Update Configuration</span>.
    </p><p>
     Alternatively, start the module with
     <code class="command">yast2 online_update_configuration</code> from the command
     line.
    </p></li><li class="step "><p>
     Activate <span class="guimenu">Automatic Online Update</span>.
    </p></li><li class="step "><p>
     Choose the update interval: <span class="guimenu">Daily</span>,
     <span class="guimenu">Weekly</span>, or <span class="guimenu">Monthly</span>.
    </p></li><li class="step "><p>
     To automatically accept any license agreements, activate <span class="guimenu">Agree
     with Licenses</span>.
    </p></li><li class="step "><p>
     Select if you want to <span class="guimenu">Skip Interactive Patches</span> in case
     you want the update procedure to proceed fully automatically.
    </p><div id="idm139698753254800" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Skipping Patches</h6><p>
      If you select to skip any packages that require interaction, run a manual
      <span class="guimenu">Online Update</span> occasionally to install those patches,
      too. Otherwise you might miss important patches.
     </p></div></li><li class="step "><p>
     To automatically install all packages recommended by updated packages,
     activate <span class="guimenu">Include Recommended Packages</span>.
    </p></li><li class="step "><p>
     To disable the use of delta RPMs (for performance reasons), deactivate
     <span class="guimenu">Use Delta RPMs</span>.
    </p></li><li class="step "><p>
     To filter the patches by category (such as security or recommended),
     activate <span class="guimenu">Filter by Category</span> and add the appropriate
     patch categories from the list. Only patches of the selected categories
     will be installed. Others will be skipped.
    </p></li><li class="step "><p>
     Confirm your configuration with <span class="guimenu">OK</span>.
    </p></li></ol></div></div><p>
   The automatic online update does not automatically restart the system
   afterward. If there are package updates that require a system reboot, you
   need to do this manually.
  </p></div></div><div class="chapter " id="cha.yast.gui"><div class="titlepage"><div><div><h2 class="title"><span class="number">4 </span><span class="name">YaST</span> <a title="Permalink" class="permalink" href="#cha.yast.gui">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>yast2_gui.xml</li><li><span class="ds-label">ID: </span>cha.yast.gui</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.yast.gui.key_combination"><span class="number">4.1 </span><span class="name">Advanced Key Combinations</span></a></span></dt></dl></div></div><p>
  YaST is the installation and configuration tool for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
  It has a graphical interface and the capability to customize your system
  quickly during and after the installation. It can be used to set up
  hardware, configure the network, system services, and tune your security
  settings.
 </p><div class="sect1 " id="sec.yast.gui.key_combination"><div class="titlepage"><div><div><h2 class="title" id="sec.yast.gui.key_combination"><span class="number">4.1 </span><span class="name">Advanced Key Combinations</span> <a title="Permalink" class="permalink" href="#sec.yast.gui.key_combination">#</a></h2></div></div></div><p>YaST has a set of advanced key combinations.</p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753238000"><span class="term ">
     <span class="keycap">Print Screen</span>
    </span></dt><dd><p>
      Take and save a screenshot. May not be available when YaST is running under
      some desktop environments.
     </p></dd><dt id="idm139698753235648"><span class="term ">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F4</span>
    </span></dt><dd><p>
      Enable/disable the color palette optimized for vision impaired users.
     </p></dd><dt id="idm139698753232544"><span class="term ">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F7</span>
    </span></dt><dd><p>
      Enable/disable logging of debug messages.
     </p></dd><dt id="idm139698753229472"><span class="term ">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F8</span>
    </span></dt><dd><p>
      Open a file dialog to save log files to a non-standard location.
     </p></dd><dt id="idm139698753226368"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">D</span>
    </span></dt><dd><p>
      Send a DebugEvent. YaST modules can react to this by executing special debugging actions.
      The result depends on the specific YaST module.
     </p></dd><dt id="idm139698753222384"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">M</span>
    </span></dt><dd><p>
      Start/stop macro recorder.
     </p></dd><dt id="idm139698753218528"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">P</span>
    </span></dt><dd><p>
      Replay macro.
     </p></dd><dt id="idm139698753214672"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">S</span>
    </span></dt><dd><p>
      Show style sheet editor.
     </p></dd><dt id="idm139698753210816"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">T</span>
    </span></dt><dd><p>
      Dump widget tree to the log file.
     </p></dd><dt id="idm139698753206944"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">X</span>
    </span></dt><dd><p>
      Open a terminal window (xterm). Useful for installation process via VNC.
     </p></dd><dt id="idm139698753203040"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">Y</span>
    </span></dt><dd><p>
      Show widget tree browser.
     </p></dd></dl></div></div></div><div class="chapter " id="cha.yast.text"><div class="titlepage"><div><div><h2 class="title"><span class="number">5 </span><span class="name">YaST in Text Mode</span> <a title="Permalink" class="permalink" href="#cha.yast.text">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>yast2_ncurses.xml</li><li><span class="ds-label">ID: </span>cha.yast.text</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.yast.cli.navigate"><span class="number">5.1 </span><span class="name">Navigation in Modules</span></a></span></dt><dt><span class="sect1"><a href="#sec.yast.cli.key_combination"><span class="number">5.2 </span><span class="name">Advanced Key Combinations</span></a></span></dt><dt><span class="sect1"><a href="#sec.yast.cli.restricted_keys"><span class="number">5.3 </span><span class="name">Restriction of Key Combinations</span></a></span></dt><dt><span class="sect1"><a href="#sec.yast.cli.options"><span class="number">5.4 </span><span class="name">YaST Command Line Options</span></a></span></dt></dl></div></div><p>
  This section is intended for system administrators and experts who do not run
  an X server on their systems and depend on the text-based installation tool.
  It provides basic information about starting and operating YaST in text
  mode.
 </p><p>
  YaST in text mode uses the ncurses library to provide an easy
  pseudo-graphical user interface. The ncurses library is installed by default.
  The minimum supported size of the terminal emulator in which to run YaST is
  80x25 characters.
 </p><div class="figure" id="fig.yast2.ncurses"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_ncurses_main.png"><img src="images/yast2_ncurses_main.png" width="" alt="Main Window of YaST in Text Mode" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 5.1: </span><span class="name">Main Window of YaST in Text Mode </span><a title="Permalink" class="permalink" href="#fig.yast2.ncurses">#</a></h6></div></div><p>
  When you start YaST in text mode, the YaST control center appears (see
  <a class="xref" href="#fig.yast2.ncurses" title="Main Window of YaST in Text Mode">Figure 5.1</a>). The
  main window consists of three areas. The left frame features the categories
  to which the various modules belong. This frame is active when YaST is
  started and therefore it is marked by a bold white border. The active
  category is selected. The right frame provides an overview of the modules
  available in the active category. The bottom frame contains the buttons for
  <span class="guimenu">Help</span> and <span class="guimenu">Quit</span>.
 </p><p>
  When you start the YaST control center, the category
  <span class="guimenu">Software</span> is selected automatically. Use
  <span class="keycap">↓</span> and <span class="keycap">↑</span> to change the category.
  To select a module from the category, activate the right frame with
  <span class="keycap">→</span> and then use <span class="keycap">↓</span> and
  <span class="keycap">↑</span> to select the module. Keep the arrow keys pressed to
  scroll through the list of available modules. The selected module is
  selected. Press <span class="keycap">Enter</span> to start the active module.
 </p><p>
  Various buttons or selection fields in the module contain a highlighted
  letter (yellow by default). Use
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">highlighted_letter</span>
  to select a button directly instead of navigating there with
  <span class="keycap">→|</span>. Exit the YaST control center by pressing
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">Q</span>
  or by selecting <span class="guimenu">Quit</span> and pressing
  <span class="keycap">Enter</span>.
 </p><div id="idm139698753176000" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Refreshing YaST Dialogs</h6><p>
   If a YaST dialog gets corrupted or distorted (for example, while resizing
   the window), press
   <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">L</span>
   to refresh and restore its contents.
  </p></div><div class="sect1 " id="sec.yast.cli.navigate"><div class="titlepage"><div><div><h2 class="title" id="sec.yast.cli.navigate"><span class="number">5.1 </span><span class="name">Navigation in Modules</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.navigate">#</a></h2></div></div></div><p>
   The following description of the control elements in the YaST modules
   assumes that all function keys and <span class="keycap">Alt</span> key combinations
   work and are not assigned to different global functions. Read
   <a class="xref" href="#sec.yast.cli.restricted_keys" title="5.3. Restriction of Key Combinations">Section 5.3, “Restriction of Key Combinations”</a> for information about possible
   exceptions.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753170064"><span class="term ">Navigation among Buttons and Selection Lists</span></dt><dd><p>
      Use <span class="keycap">→|</span> to navigate among the buttons and frames
      containing selection lists. To navigate in reverse order, use
      <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">→|</span> or <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">→|</span>
      combinations.
     </p></dd><dt id="idm139698753163888"><span class="term ">Navigation in Selection Lists</span></dt><dd><p>
      Use the arrow keys (<span class="keycap">↑</span> and
      <span class="keycap">↓</span>) to navigate among the individual elements in
      an active frame containing a selection list. If individual entries within
      a frame exceed its width, use
      <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">→</span> or <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">←</span> to scroll
      horizontally to the right and left. Alternatively, use
      <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">E</span> or <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">A</span>. This combination can also be used if
      using <span class="keycap">→</span> or <span class="keycap">←</span> results in
      changing the active frame or the current selection list, as in the
      control center.
     </p></dd><dt id="idm139698753152816"><span class="term ">Buttons, Radio Buttons, and Check Boxes</span></dt><dd><p>
      To select buttons with empty square brackets (check boxes) or empty
      parentheses (radio buttons), press <span class="keycap">Space</span> or
      <span class="keycap">Enter</span>. Alternatively, radio buttons and check boxes
      can be selected directly with <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">highlighted_letter</span>.
      In this case, you do not need to confirm with <span class="keycap">Enter</span>.
      If you navigate to an item with <span class="keycap">→|</span>, press
      <span class="keycap">Enter</span> to execute the selected action or activate the
      respective menu item.
     </p></dd><dt id="idm139698753146352"><span class="term ">Function Keys</span></dt><dd><p>
      The function keys (<span class="keycap">F1</span> ... <span class="keycap">F12</span>) enable
      quick access to the various buttons. Available function key combinations
      (<code class="literal">F<em class="replaceable ">X</em></code>) are shown in the
      bottom line of the YaST screen. Which function keys are actually mapped
      to which buttons depend on the active YaST module, because the
      different modules offer different buttons (<span class="guimenu">Details</span>,
      <span class="guimenu">Info</span>, <span class="guimenu">Add</span>,
      <span class="guimenu">Delete</span>, etc.). Use <span class="keycap">F10</span> for
      <span class="guimenu">Accept</span>, <span class="guimenu">OK</span>,
      <span class="guimenu">Next</span>, and <span class="guimenu">Finish</span>. Press
      <span class="keycap">F1</span> to access the YaST help.
     </p></dd><dt id="idm139698753138144"><span class="term ">Using Navigation Tree in ncurses Mode</span></dt><dd><p>
      Some YaST modules use a navigation tree in the left part of the window
      to select configuration dialogs. Use the arrow keys
      (<span class="keycap">↑</span> and <span class="keycap">↓</span>) to navigate in
      the tree. Use <span class="keycap">Space</span> to open or close tree items. In
      ncurses mode, <span class="keycap">Enter</span> must be pressed after a
      selection in the navigation tree to show the selected dialog. This is an
      intentional behavior to save time consuming redraws when browsing through
      the navigation tree.
     </p></dd><dt id="idm139698753133712"><span class="term ">Selecting Software in the Software Installation Module</span></dt><dd><p>
      Use the filters on the left side to limit the amount of displayed
      packages. Installed packages are marked with the letter
      <code class="literal">i</code>. To change the status of a package, press
      <span class="keycap">Space</span> or <span class="keycap">Enter</span>. Alternatively,
      use the <span class="guimenu">Actions</span> menu to select the needed status
      change (install, delete, update, taboo or lock).
     </p></dd></dl></div><div class="figure" id="fig.yast2.ncurses_inst"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_ncurses_inst.png"><img src="images/yast2_ncurses_inst.png" width="" alt="The Software Installation Module" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 5.2: </span><span class="name">The Software Installation Module </span><a title="Permalink" class="permalink" href="#fig.yast2.ncurses_inst">#</a></h6></div></div></div><div class="sect1 " id="sec.yast.cli.key_combination"><div class="titlepage"><div><div><h2 class="title" id="sec.yast.cli.key_combination"><span class="number">5.2 </span><span class="name">Advanced Key Combinations</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.key_combination">#</a></h2></div></div></div><p>YaST in text mode has a set of advanced key combinations.</p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753121984"><span class="term ">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F1</span>
    </span></dt><dd><p>
      Show a list of advanced hotkeys.
     </p></dd><dt id="idm139698753118912"><span class="term ">
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">F4</span>
    </span></dt><dd><p>
      Change color schema.
     </p></dd><dt id="idm139698753115856"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">\</span>
    </span></dt><dd><p>
      Quit the application.
     </p></dd><dt id="idm139698753112800"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">L</span>
    </span></dt><dd><p>
      Refresh screen.
     </p></dd><dt id="idm139698753109744"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">D</span>
     <span class="keycap">F1</span>
    </span></dt><dd><p>
      Show a list of advanced hotkeys.
     </p></dd><dt id="idm139698753106224"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">D</span>
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">D</span>
    </span></dt><dd><p>
      Dump dialog to the log file as a screenshot.
     </p></dd><dt id="idm139698753101888"><span class="term ">
     <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">D</span>
     <span class="keycap">Shift</span><span class="key-connector">–</span><span class="keycap">Y</span>
    </span></dt><dd><p>
      Open YDialogSpy to see the widget hierarchy.
     </p></dd></dl></div></div><div class="sect1 " id="sec.yast.cli.restricted_keys"><div class="titlepage"><div><div><h2 class="title" id="sec.yast.cli.restricted_keys"><span class="number">5.3 </span><span class="name">Restriction of Key Combinations</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.restricted_keys">#</a></h2></div></div></div><p>
   If your window manager uses global <span class="keycap">Alt</span> combinations,
   the <span class="keycap">Alt</span> combinations in YaST might not work. Keys
   like <span class="keycap">Alt</span> or <span class="keycap">Shift</span> can also be
   occupied by the settings of the terminal.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753093008"><span class="term ">Replacing <span class="keycap">Alt</span> with <span class="keycap">Esc</span>
    </span></dt><dd><p>
      <span class="keycap">Alt</span> shortcuts can be executed with
      <span class="keycap">Esc</span> instead of <span class="keycap">Alt</span>. For
      example, <span class="keycap">Esc</span><span class="key-connector">–</span><span class="keycap">H</span> replaces
      <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">H</span>. (First press
      <span class="keycap">Esc</span>, <span class="emphasis"><em>then</em></span> press
      <span class="keycap">H</span>.)
     </p></dd><dt id="idm139698753084128"><span class="term "> Backward and Forward Navigation with <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">F</span> and <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">B</span>
    </span></dt><dd><p>
      If the <span class="keycap">Alt</span> and <span class="keycap">Shift</span>
      combinations are occupied by the window manager or the terminal, use the
      combinations <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">F</span> (forward) and <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">B</span> (backward)
      instead.
     </p></dd><dt id="idm139698753075632"><span class="term ">Restriction of Function Keys</span></dt><dd><p>
      The function keys (<span class="keycap">F1</span> ... <span class="keycap">F12</span>) are
      also used for functions. Certain function keys might be
      occupied by the terminal and may not be available for YaST. However,
      the <span class="keycap">Alt</span> key combinations and function keys should
      always be fully available on a pure text console.
     </p></dd></dl></div></div><div class="sect1 " id="sec.yast.cli.options"><div class="titlepage"><div><div><h2 class="title" id="sec.yast.cli.options"><span class="number">5.4 </span><span class="name">YaST Command Line Options</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.options">#</a></h2></div></div></div><p>
   Besides the text mode interface, YaST provides a pure command line
   interface. To get a list of YaST command line options, enter:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yast -h</pre></div><div class="sect2 " id="sec.yast.cli.options.modules"><div class="titlepage"><div><div><h3 class="title" id="sec.yast.cli.options.modules"><span class="number">5.4.1 </span><span class="name">Starting the Individual Modules</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.options.modules">#</a></h3></div></div></div><p>
    To save time, the individual YaST modules can be started directly. To
    start a module, enter:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yast &lt;module_name&gt;</pre></div><p>
    View a list of all module names available on your system with <code class="command">yast
    -l</code> or <code class="command">yast --list</code>. Start the network module,
    for example, with <code class="command">yast lan</code>.
   </p></div><div class="sect2 " id="sec.yast.cli.options.install"><div class="titlepage"><div><div><h3 class="title" id="sec.yast.cli.options.install"><span class="number">5.4.2 </span><span class="name">Installing Packages from the Command Line</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.options.install">#</a></h3></div></div></div><p>
    If you know a package name and the package is provided by any of your
    active installation repositories, you can use the command line option
    <code class="option">-i</code> to install the package:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yast -i &lt;package_name&gt;</pre></div><p>
    or
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yast --install &lt;package_name&gt;</pre></div><p>
    <em class="replaceable ">PACKAGE_NAME</em> can be a single short package name
    (for example <code class="systemitem">gvim</code>) installed with
    dependency checking, or the full path to an RPM package
    which is installed without dependency checking.
   </p><p>
    If you need a command line based software management utility with
    functionality beyond what YaST provides, consider using Zypper. This
    utility uses the same software management library that is also the
    foundation for the YaST package manager. The basic usage of Zypper is
    covered in <a class="xref" href="#sec.zypper" title="6.1. Using Zypper">Section 6.1, “Using Zypper”</a>.
   </p></div><div class="sect2 " id="sec.yast.cli.options.module_params"><div class="titlepage"><div><div><h3 class="title" id="sec.yast.cli.options.module_params"><span class="number">5.4.3 </span><span class="name">Command Line Parameters of the YaST Modules</span> <a title="Permalink" class="permalink" href="#sec.yast.cli.options.module_params">#</a></h3></div></div></div><p>
    To use YaST functionality in scripts, YaST provides command line
    support for individual modules. Not all modules have command line support.
    To display the available options of a module, enter:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> yast &lt;module_name&gt; help</pre></div><p>
    If a module does not provide command line support, the module is started in
    text mode and the following message appears:
   </p><div class="verbatim-wrap"><pre class="screen">This YaST module does not support the command line interface.</pre></div></div></div></div><div class="chapter " id="cha.sw_cl"><div class="titlepage"><div><div><h2 class="title"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span> <a title="Permalink" class="permalink" href="#cha.sw_cl">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>sw_managing_commandline.xml</li><li><span class="ds-label">ID: </span>cha.sw_cl</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698753049216">#</a></h6></div><p>
    This chapter describes Zypper and RPM, two command line tools for managing
    software. For a definition of the terminology used in this context (for
    example, <code class="literal">repository</code>, <code class="literal">patch</code>, or
    <code class="literal">update</code>) refer to
    <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 12 “Installing or Removing Software”, Section 12.1 “Definition of Terms”</span>.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.zypper"><span class="number">6.1 </span><span class="name">Using Zypper</span></a></span></dt><dt><span class="sect1"><a href="#sec.rpm"><span class="number">6.2 </span><span class="name">RPM—the Package Manager</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.zypper"><div class="titlepage"><div><div><h2 class="title" id="sec.zypper"><span class="number">6.1 </span><span class="name">Using Zypper</span> <a title="Permalink" class="permalink" href="#sec.zypper">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>zypper.xml</li><li><span class="ds-label">ID: </span>sec.zypper</li></ul></div></div></div></div><p>
  Zypper is a command line package manager for installing, updating and
  removing packages as well as for managing repositories. It is especially
  useful for accomplishing remote software management tasks or managing
  software from shell scripts.
 </p><div class="sect2 " id="sec.zypper.usage"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.usage"><span class="number">6.1.1 </span><span class="name">General Usage</span> <a title="Permalink" class="permalink" href="#sec.zypper.usage">#</a></h3></div></div></div><p>
   The general syntax of Zypper is:
  </p><div class="verbatim-wrap"><pre class="screen">zypper <code class="option">[--global-options]</code> <em class="replaceable ">COMMAND</em> <code class="option"> [--command-options]</code> <code class="option">[arguments]</code></pre></div><p>
   The components enclosed in brackets are not required. See <code class="command">zypper
   help</code> for a list of general options and all commands. To get help
   for a specific command, type <code class="command">zypper help</code>
   <em class="replaceable ">COMMAND</em>.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698753034272"><span class="term ">Zypper Commands</span></dt><dd><p>
      The simplest way to execute Zypper is to type its name, followed by a
      command. For example, to apply all needed patches to the system, use:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch</pre></div></dd><dt id="idm139698753031312"><span class="term ">Global Options</span></dt><dd><p>
      Additionally, you can choose from one or more global options by typing
      them immediately before the command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper --non-interactive patch</pre></div><p>
      In the above example, the option <code class="option">--non-interactive</code> means
      that the command is run without asking anything (automatically applying
      the default answers).
     </p></dd><dt id="idm139698753027344"><span class="term ">Command-Specific Options</span></dt><dd><p>
      To use options that are specific to a particular command, type them
      immediately after the command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --auto-agree-with-licenses</pre></div><p>
      In the above example, <code class="option">--auto-agree-with-licenses</code> is used
      to apply all needed patches to a system without you being asked to
      confirm any licenses. Instead, license will be accepted automatically.
     </p></dd><dt id="idm139698753023312"><span class="term ">Arguments</span></dt><dd><p>
      Some commands require one or more arguments. For example, when using the
      command <code class="command">install</code>, you need to specify which package or
      which packages you want to <span class="emphasis"><em>install</em></span>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install mplayer</pre></div><p>
      Some options also require a single argument. The following command will
      list all known patterns:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper search -t pattern</pre></div></dd></dl></div><p>
   You can combine all of the above. For example, the following command will
   install the <span class="package">mc</span> and <span class="package">vim</span> packages from
   the <code class="literal">factory</code> repository while being verbose:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper -v install --from factory mc vim</pre></div><p>
   The <code class="option">--from</code> option makes sure to keep all repositories
   enabled (for solving any dependencies) while requesting the package from the
   specified repository.
  </p><p>
   Most Zypper commands have a <code class="literal">dry-run</code> option that does a
   simulation of the given command. It can be used for test purposes.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper remove --dry-run MozillaFirefox</pre></div><p>
   Zypper supports the global <code class="option">--userdata
   <em class="replaceable ">STRING</em></code> option. You can specify a string
   with this option, which gets written to Zypper's log files and plug-ins
   (such as the Btrfs plug-in). It can be used to mark and identify
   transactions in log files.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper --userdata <em class="replaceable ">STRING</em> patch</pre></div></div><div class="sect2 " id="sec.zypper.softman"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.softman"><span class="number">6.1.2 </span><span class="name">Installing and Removing Software with Zypper</span> <a title="Permalink" class="permalink" href="#sec.zypper.softman">#</a></h3></div></div></div><p>
   To install or remove packages, use the following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install <em class="replaceable ">PACKAGE_NAME</em>
sudo zypper remove <em class="replaceable ">PACKAGE_NAME</em></pre></div><div id="idm139698753005520" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Do Not Remove Mandatory System Packages</h6><p>
    Do not remove mandatory system packages like
    <span class="package">glibc</span>
    ,
    <span class="package">zypper</span>
    ,
    <span class="package">kernel</span>
    . If they are removed, the system can become unstable or stop working
    altogether.
   </p></div><div class="sect3 " id="sec.zypper.selectpackage"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.selectpackage"><span class="number">6.1.2.1 </span><span class="name">Selecting Which Packages to Install or Remove</span> <a title="Permalink" class="permalink" href="#sec.zypper.selectpackage">#</a></h4></div></div></div><p>
    There are various ways to address packages with the commands
    <code class="command">zypper install</code> and <code class="command">zypper remove</code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752999808"><span class="term ">By Exact Package Name</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install MozillaFirefox</pre></div></dd><dt id="idm139698752997472"><span class="term ">By Exact Package Name and Version Number</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install MozillaFirefox-52.2</pre></div></dd><dt id="idm139698752995056"><span class="term ">By Repository Alias and Package Name</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install mozilla:MozillaFirefox</pre></div><p>
       Where <code class="literal">mozilla</code> is the alias of the repository from
       which to install.
      </p></dd><dt id="idm139698752991712"><span class="term ">By Package Name Using Wild Cards</span></dt><dd><p>
       You can select all packages that have names starting or ending with a
       certain string. Use wild cards with care, especially when removing
       packages. The following command will install all packages starting with
       <span class="quote">“<span class="quote">Moz</span>”</span>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install 'Moz*'</pre></div><div id="idm139698752988528" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Removing all <code class="filename">-debuginfo</code> Packages</h6><p>
        When debugging a problem, you sometimes need to temporarily install a
        lot of <code class="filename">-debuginfo</code> packages which give you more
        information about running processes. After your debugging session
        finishes and you need to clean the environment, run the following:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper remove '*-debuginfo'</pre></div></div></dd><dt id="idm139698752984672"><span class="term ">By Capability</span></dt><dd><p>
       For example, if you want to install a Perl module without knowing the
       name of the package, capabilities come in handy:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install firefox</pre></div></dd><dt id="idm139698752981728"><span class="term ">By Capability, Hardware Architecture, or Version</span></dt><dd><p>
       Together with a capability, you can specify a hardware architecture and
       a version:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         The name of the desired hardware architecture is appended to the
         capability after a full stop. For example, to specify the AMD64/Intel 64
         architectures (which in Zypper is named <code class="literal">x86_64</code>),
         use:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install 'firefox.x86_64'</pre></div></li><li class="listitem "><p>
         Versions must be appended to the end of the string and must be
         preceded by an operator: <code class="literal">&lt;</code> (lesser than),
         <code class="literal">&lt;=</code> (lesser than or equal), <code class="literal">=</code>
         (equal), <code class="literal">&gt;=</code> (greater than or equal),
         <code class="literal">&gt;</code> (greater than).
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install 'firefox&gt;=52.2'</pre></div></li><li class="listitem "><p>
         You can also combine a hardware architecture and version requirement:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install 'firefox.x86_64&gt;=52.2'</pre></div></li></ul></div></dd><dt id="idm139698752970416"><span class="term ">By Path to the RPM file</span></dt><dd><p>
       You can also specify a local or remote path to a package:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install /tmp/install/MozillaFirefox.rpm
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install http://download.example.com/MozillaFirefox.rpm</pre></div></dd></dl></div></div><div class="sect3 " id="sec.zypper.combineinstall"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.combineinstall"><span class="number">6.1.2.2 </span><span class="name">Combining Installation and Removal of Packages</span> <a title="Permalink" class="permalink" href="#sec.zypper.combineinstall">#</a></h4></div></div></div><p>
    To install and remove packages simultaneously, use the
    <code class="literal">+/-</code> modifiers. To install
    <span class="package">emacs</span>
    and simultaneously remove
    <span class="package">vim</span>
    , use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install emacs -vim</pre></div><p>
    To remove
    <span class="package">emacs</span>
    and simultaneously install
    <span class="package">vim</span>
    , use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper remove emacs +vim</pre></div><p>
    To prevent the package name starting with the <code class="literal">-</code> being
    interpreted as a command option, always use it as the second argument. If
    this is not possible, precede it with <code class="literal">--</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install -emacs +vim       # Wrong
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install vim -emacs        # Correct
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install -- -emacs +vim    # Correct
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper remove emacs +vim         # Correct</pre></div></div><div class="sect3 " id="sec.zypper.clean"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.clean"><span class="number">6.1.2.3 </span><span class="name">Cleaning Up Dependencies of Removed Packages</span> <a title="Permalink" class="permalink" href="#sec.zypper.clean">#</a></h4></div></div></div><p>
    If (together with a certain package), you automatically want to remove any
    packages that become unneeded after removing the specified package, use the
    <code class="option">--clean-deps</code> option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper rm <em class="replaceable ">PACKAGE_NAME</em> --clean-deps</pre></div></div><div class="sect3 " id="sec.zypper.script"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.script"><span class="number">6.1.2.4 </span><span class="name">Using Zypper in Scripts</span> <a title="Permalink" class="permalink" href="#sec.zypper.script">#</a></h4></div></div></div><p>
    By default, Zypper asks for a confirmation before installing or removing a
    selected package, or when a problem occurs. You can override this behavior
    using the <code class="option">--non-interactive</code> option. This option must be
    given before the actual command (<code class="command">install</code>,
    <code class="command">remove</code>, and <code class="command">patch</code>), as can be seen in
    the following:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper <code class="option">--non-interactive</code> install <em class="replaceable ">PACKAGE_NAME</em></pre></div><p>
    This option allows the use of Zypper in scripts and cron jobs.
   </p></div><div class="sect3 " id="sec.zypper.softman.sources"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softman.sources"><span class="number">6.1.2.5 </span><span class="name">Installing or Downloading Source Packages</span> <a title="Permalink" class="permalink" href="#sec.zypper.softman.sources">#</a></h4></div></div></div><p>
    To install the corresponding source package of a package, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper source-install <em class="replaceable ">PACKAGE_NAME</em></pre></div><p>
    When executed as <code class="systemitem">root</code>, the default location to install source
    packages is <code class="filename">/usr/src/packages/</code> and
    <code class="filename">~/rpmbuild</code> when run as user. These values can be
    changed in your local <code class="command">rpm</code> configuration.
   </p><p>
    This command will also install the build dependencies of the specified
    package. If you do not want this, add the switch <code class="literal">-D</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper source-install -D <em class="replaceable ">PACKAGE_NAME</em></pre></div><p>
    To install only the build dependencies use <code class="literal">-d</code>.
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper source-install -d <em class="replaceable ">PACKAGE_NAME</em></pre></div><p>
    Of course, this will only work if you have the repository with the source
    packages enabled in your repository list (it is added by default, but not
    enabled). See <a class="xref" href="#sec.zypper.instrepo" title="6.1.5. Managing Repositories with Zypper">Section 6.1.5, “Managing Repositories with Zypper”</a> for details on
    repository management.
   </p><p>
    A list of all source packages available in your repositories can be
    obtained with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper search -t srcpackage</pre></div><p>
    You can also download source packages for all installed packages to a local
    directory. To download source packages, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper source-download</pre></div><p>
    The default download directory is
    <code class="filename">/var/cache/zypper/source-download</code>. You can change it
    using the <code class="option">--directory</code> option. To only show missing or
    extraneous packages without downloading or deleting anything, use the
    <code class="option">--status</code> option. To delete extraneous source packages, use
    the <code class="option">--delete</code> option. To disable deleting, use the
    <code class="option">--no-delete</code> option.
   </p></div><div class="sect3 " id="sec.zypper.softman.pluscontent"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softman.pluscontent"><span class="number">6.1.2.6 </span><span class="name">Installing Packages from Disabled Repositories</span> <a title="Permalink" class="permalink" href="#sec.zypper.softman.pluscontent">#</a></h4></div></div></div><p>
    Normally you can only install or refresh packages from enabled
    repositories. The <code class="option">--plus-content
    <em class="replaceable ">TAG</em></code> option helps you specify
    repositories to be refreshed, temporarily enabled during the current Zypper
    session, and disabled after it completes.
   </p><p>
    For example, to enable repositories that may provide additional
    <code class="filename">-debuginfo</code> or <code class="filename">-debugsource</code>
    packages, use <code class="option">--plus-content debug</code>. You can specify this
    option multiple times.
   </p><p>
    To temporarily enable such 'debug' repositories to install a specific
    <code class="filename">-debuginfo</code> package, use the option as follows:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper --plus-content debug \
   install "debuginfo(build-id)=eb844a5c20c70a59fc693cd1061f851fb7d046f4"</pre></div><p>
    The <code class="literal">build-id</code> string is reported by
    <code class="command">gdb</code> for missing debuginfo packages.
   </p></div><div class="sect3 " id="sec.zypper.softman.util"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softman.util"><span class="number">6.1.2.7 </span><span class="name">Utilities</span> <a title="Permalink" class="permalink" href="#sec.zypper.softman.util">#</a></h4></div></div></div><p>
    To verify whether all dependencies are still fulfilled and to repair
    missing dependencies, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper verify</pre></div><p>
    In addition to dependencies that must be fulfilled, some packages
    <span class="quote">“<span class="quote">recommend</span>”</span> other packages. These recommended packages are
    only installed if actually available and installable. In case recommended
    packages were made available after the recommending package has been
    installed (by adding additional packages or hardware), use the following
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install-new-recommends</pre></div><p>
    This command is very useful after plugging in a Web cam or Wi-Fi device. It
    will install drivers for the device and related software, if available.
    Drivers and related software are only installable if certain hardware
    dependencies are fulfilled.
   </p></div></div><div class="sect2 " id="sec.zypper.softup"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.softup"><span class="number">6.1.3 </span><span class="name">Updating Software with Zypper</span> <a title="Permalink" class="permalink" href="#sec.zypper.softup">#</a></h3></div></div></div><p>
   There are three different ways to update software using Zypper: by
   installing patches, by installing a new version of a package or by updating
   the entire distribution. The latter is achieved with <code class="command">zypper
   dist-upgrade</code>. Upgrading <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> is discussed in
   <span class="phrase"><span class="intraxref">Book “Upgrade Guide”, Chapter 2 “Upgrading SUSE Linux Enterprise”</span></span>
   .
  </p><div class="sect3 " id="sec.zypper.softup.patch"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softup.patch"><span class="number">6.1.3.1 </span><span class="name">Installing All Needed Patches</span> <a title="Permalink" class="permalink" href="#sec.zypper.softup.patch">#</a></h4></div></div></div><p>
    To install all officially released patches that apply to your system, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch</pre></div><p>
    All patches available from repositories configured on your computer are
    checked for their relevance to your installation. If they are relevant (and
    not classified as <code class="literal">optional</code> or
    <code class="literal">feature</code>), they are installed immediately.
    <span class="phrase">Note that the official update repository is only
    available after registering your <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> installation.</span>
   </p><p>
    If a patch that is about to be installed includes changes that require a
    system reboot, you will be warned before.
   </p><p>
    The plain <code class="command">zypper patch</code> command does not apply patches
    from third party repositories. To update also the third party repositories,
    use the <code class="literal">with-update</code> command option as follows:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --with update</pre></div><p>
    To install also optional patches, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --with-optional</pre></div><p>
    To install all patches relating to a specific Bugzilla issue, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --bugzilla=<em class="replaceable ">NUMBER</em></pre></div><p>
    To install all patches relating to a specific CVE database entry, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --cve=<em class="replaceable ">NUMBER</em></pre></div><p>
    For example, to install a security patch with the CVE number
    <code class="literal">CVE-2010-2713</code>, execute:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --cve=CVE-2010-2713</pre></div><p>
    To install only patches which affect Zypper and the package management
    itself, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper patch --updatestack-only</pre></div><p>
    Bear in mind that other command options that would also update other
    repositories will be dropped if you use the
    <code class="literal">updatestack-only</code> command option.
   </p></div><div class="sect3 " id="sec.zypper.softup.listpatch"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softup.listpatch"><span class="number">6.1.3.2 </span><span class="name">Listing Patches</span> <a title="Permalink" class="permalink" href="#sec.zypper.softup.listpatch">#</a></h4></div></div></div><p>
    To find out whether patches are available, Zypper allows viewing the
    following information:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752888272"><span class="term ">Number of Needed Patches</span></dt><dd><p>
       To list the number of needed patches (patches that apply to your system
       but are not yet installed), use <code class="command">patch-check</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</pre></div><p>
       This command can be combined with the
       <code class="option">--updatestack-only</code> option to list only the patches
       which affect Zypper and the package management itself.
      </p></dd><dt id="idm139698752884128"><span class="term ">List of Needed Patches</span></dt><dd><p>
       To list all needed patches (patches that apply to your system but are
       not yet installed), use <code class="command">list-patches</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper list-patches
Loading repository data...
Reading installed packages...

Repository     | Name        | Version | Category | Status  | Summary
---------------+-------------+---------+----------+---------+---------
SLES12-Updates | SUSE-2014-8 | 1       | security | needed  | openssl: Update for OpenSSL</pre></div></dd><dt id="idm139698752880176"><span class="term ">List of All Patches</span></dt><dd><p>
       To list all patches available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, regardless of whether
       they are already installed or apply to your installation, use
       <code class="command">zypper patches</code>.
      </p></dd></dl></div><p>
    It is also possible to list and install patches relevant to specific
    issues. To list specific patches, use the <code class="command">zypper
    list-patches</code> command with the following options:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752875200"><span class="term ">By Bugzilla Issues</span></dt><dd><p>
       To list all needed patches that relate to Bugzilla issues, use the
       option <code class="option">--bugzilla</code>.
      </p><p>
       To list patches for a specific bug, you can also specify a bug number:
       <code class="option">--bugzilla=<em class="replaceable ">NUMBER</em></code>. To search
       for patches relating to multiple Bugzilla issues, add commas between the
       bug numbers, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper list-patches --bugzilla=972197,956917</pre></div></dd><dt id="idm139698752870752"><span class="term ">By CVE Number</span></dt><dd><p>
       To list all needed patches that relate to an entry in the CVE database
       (Common Vulnerabilities and Exposures), use the option
       <code class="option">--cve</code>.
      </p><p>
       To list patches for a specific CVE database entry, you can also specify
       a CVE number: <code class="option">--cve=<em class="replaceable ">NUMBER</em></code>.
       To search for patches relating to multiple CVE database entries, add
       commas between the CVE numbers, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper list-patches --bugzilla=CVE-2016-2315,CVE-2016-2324</pre></div></dd></dl></div><p>
    To list all patches regardless of whether they are needed, use the option
    <code class="option">--all</code> additionally. For example, to list all patches with
    a CVE number assigned, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper list-patches --all --cve
Issue | No.           | Patch             | Category    | Severity  | Status
------+---------------+-------------------+-------------+-----------+----------
cve   | CVE-2015-0287 | SUSE-SLE-Module.. | recommended | moderate  | needed
cve   | CVE-2014-3566 | SUSE-SLE-SERVER.. | recommended | moderate  | not needed
[...]</pre></div></div><div class="sect3 " id="sec.zypper.softup.update"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softup.update"><span class="number">6.1.3.3 </span><span class="name">Installing New Package Versions</span> <a title="Permalink" class="permalink" href="#sec.zypper.softup.update">#</a></h4></div></div></div><p>
    If a repository contains only new packages, but does not provide patches,
    <code class="command">zypper patch</code> does not show any effect. To update
    all installed packages with newer available versions (while maintaining
    system integrity), use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper update</pre></div><p>
    To update individual packages, specify the package with either the update
    or install command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper update <em class="replaceable ">PACKAGE_NAME</em>
sudo zypper install <em class="replaceable ">PACKAGE_NAME</em></pre></div><p>
    A list of all new installable packages can be obtained with the command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper list-updates</pre></div><p>
    Note that this command only lists packages that match the following
    criteria:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      has the same vendor like the already installed package,
     </p></li><li class="listitem "><p>
      is provided by repositories with at least the same priority than the
      already installed package,
     </p></li><li class="listitem "><p>
      is installable (all dependencies are satisfied).
     </p></li></ul></div><p>
    A list of <span class="emphasis"><em>all</em></span> new available packages (regardless
    whether installable or not) can be obtained with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper list-updates --all</pre></div><p>
    To find out why a new package cannot be installed, use the <code class="command">zypper
    install</code> or <code class="command">zypper update</code> command as described
    above.
   </p></div><div class="sect3 " id="sec.zypper.softup.orphaned"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.softup.orphaned"><span class="number">6.1.3.4 </span><span class="name">Identifying Orphaned Packages</span> <a title="Permalink" class="permalink" href="#sec.zypper.softup.orphaned">#</a></h4></div></div></div><p>
    Whenever you remove a repository from Zypper or upgrade your system, some
    packages can get in an <span class="quote">“<span class="quote">orphaned</span>”</span> state. These
    <span class="emphasis"><em>orphaned</em></span> packages belong to no active repository
    anymore. The following command gives you a list of these:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper packages --orphaned</pre></div><p>
    With this list, you can decide if a package is still needed or can be
    removed safely.
   </p></div></div><div class="sect2 " id="sec.zypper.ps"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.ps"><span class="number">6.1.4 </span><span class="name">Identifying Processes and Services Using Deleted Files</span> <a title="Permalink" class="permalink" href="#sec.zypper.ps">#</a></h3></div></div></div><p>
   When patching, updating or removing packages, there may be running processes
   on the system which continue to use files having been deleted by the update
   or removal. Use <code class="command">zypper ps</code> to list processes using deleted
   files. In case the process belongs to a known service, the service name is
   listed, making it easy to restart the service. By default <code class="command">zypper
   ps</code> shows a table:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper ps
PID   | PPID | UID | User  | Command      | Service      | Files
------+------+-----+-------+--------------+--------------+-------------------
814   | 1    | 481 | avahi | avahi-daemon | avahi-daemon | /lib64/ld-2.19.s-&gt;
      |      |     |       |              |              | /lib64/libdl-2.1-&gt;
      |      |     |       |              |              | /lib64/libpthrea-&gt;
      |      |     |       |              |              | /lib64/libc-2.19-&gt;
[...]</pre></div><table border="0" summary="Simple list" class="simplelist "><tr><td><span class="bold"><strong>PID</strong></span>: ID of the process
   </td></tr><tr><td><span class="bold"><strong>PPID</strong></span>: ID of the parent process
   </td></tr><tr><td><span class="bold"><strong>UID</strong></span>: ID of the user running the
    process
   </td></tr><tr><td><span class="bold"><strong>Login</strong></span>: Login name of the user
    running the process
   </td></tr><tr><td><span class="bold"><strong>Command</strong></span>: Command used to
    execute the process
   </td></tr><tr><td><span class="bold"><strong>Service</strong></span>: Service name (only if command
    is associated with a system service)
   </td></tr><tr><td><span class="bold"><strong>Files</strong></span>: The list of the deleted
    files
   </td></tr></table><p>
   The output format of <code class="command">zypper ps</code> can be controlled as
   follows:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752831280"><span class="term "><code class="command">zypper ps</code><code class="option">-s</code>
    </span></dt><dd><p>
      Create a short table not showing the deleted files.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper ps -s
PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix
2031  | 2027 | 1000 | tux     | bash         |</pre></div></dd><dt id="idm139698752827312"><span class="term "><code class="command">zypper ps</code><code class="option">-ss</code>
    </span></dt><dd><p>
      Show only processes associated with a system service.
     </p><div class="verbatim-wrap"><pre class="screen">PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix</pre></div></dd><dt id="idm139698752824016"><span class="term "><code class="command">zypper ps</code><code class="option">-sss</code>
    </span></dt><dd><p>
      Only show system services using deleted files.
     </p><div class="verbatim-wrap"><pre class="screen">avahi-daemon
irqbalance
postfix
sshd</pre></div></dd><dt id="idm139698752821136"><span class="term "><code class="command">zypper ps</code><code class="option">--print "systemctl status
     %s"</code>
    </span></dt><dd><p>
      Show the commands to retrieve status information for services which might
      need a restart.
     </p><div class="verbatim-wrap"><pre class="screen">systemctl status avahi-daemon
systemctl status irqbalance
systemctl status postfix
systemctl status sshd</pre></div></dd></dl></div><p>
   For more information about service handling refer to
   <a class="xref" href="#cha.systemd" title="Chapter 14. The systemd Daemon">Chapter 14, <em>The <code class="systemitem">systemd</code> Daemon</em></a>.
  </p></div><div class="sect2 " id="sec.zypper.instrepo"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.instrepo"><span class="number">6.1.5 </span><span class="name">Managing Repositories with Zypper</span> <a title="Permalink" class="permalink" href="#sec.zypper.instrepo">#</a></h3></div></div></div><p>
   All installation or patch commands of Zypper rely on a list of known
   repositories. To list all repositories known to the system, use the command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper repos</pre></div><p>
   The result will look similar to the following output:
  </p><div class="example" id="ex.zypper.repos"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 6.1: </span><span class="name">Zypper—List of Known Repositories </span><a title="Permalink" class="permalink" href="#ex.zypper.repos">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper repos
# | Alias        | Name          | Enabled | Refresh
--+--------------+---------------+---------+--------
1 | SLEHA-12-GEO | SLEHA-12-GEO  | Yes     | No
2 | SLEHA-12     | SLEHA-12      | Yes     | No
3 | SLES12       | SLES12        | Yes     | No</pre></div></div></div><p>
   When specifying repositories in various commands, an alias, URI or
   repository number from the <code class="command">zypper repos</code> command output
   can be used. A repository alias is a short version of the repository name
   for use in repository handling commands. Note that the repository numbers
   can change after modifying the list of repositories. The alias will never
   change by itself.
  </p><p>
   By default, details such as the URI or the priority of the repository are
   not displayed. Use the following command to list all details:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper repos -d</pre></div><div class="sect3 " id="sec.zypper.instrepo.add"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.instrepo.add"><span class="number">6.1.5.1 </span><span class="name">Adding Repositories</span> <a title="Permalink" class="permalink" href="#sec.zypper.instrepo.add">#</a></h4></div></div></div><p>
    To add a repository, run
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper addrepo <em class="replaceable ">URI</em> <em class="replaceable ">ALIAS</em></pre></div><p>
    <em class="replaceable ">URI</em> can either be an Internet repository, a
    network resource, a directory or a CD or DVD (see
    <a class="link" href="http://en.opensuse.org/openSUSE:Libzypp_URIs" target="_blank">http://en.opensuse.org/openSUSE:Libzypp_URIs</a> for
    details). The <em class="replaceable ">ALIAS</em> is a shorthand and unique
    identifier of the repository. You can freely choose it, with the only
    exception that it needs to be unique. Zypper will issue a warning if you
    specify an alias that is already in use.
   </p></div><div class="sect3 " id="sec.zypper.instrepo.refresh"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.instrepo.refresh"><span class="number">6.1.5.2 </span><span class="name">Refreshing Repositories</span> <a title="Permalink" class="permalink" href="#sec.zypper.instrepo.refresh">#</a></h4></div></div></div><p>
    <code class="command">zypper</code> enables you to fetch changes in packages from
    configured repositories. To fetch the changes, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper refresh</pre></div><div id="idm139698752799424" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Default Behavior of <code class="command">zypper</code></h6><p>
     By default, some commands perform <code class="command">refresh</code>
     automatically, so you do not need to run the command explicitly.
    </p></div><p>
    The <code class="command">refresh</code> command enables you to view changes also in
    disabled repositories, by using the <code class="literal">--plus-content</code>
    option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper --plus-content refresh</pre></div><p>
    This option fetches changes in repositories, but keeps the disabled
    repositories in the same state—disabled.
   </p></div><div class="sect3 " id="sec.zypper.instrepo.rm"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.instrepo.rm"><span class="number">6.1.5.3 </span><span class="name">Removing Repositories</span> <a title="Permalink" class="permalink" href="#sec.zypper.instrepo.rm">#</a></h4></div></div></div><p>
    To remove a repository from the list, use the command
    <code class="command">zypper removerepo</code> together with the alias or number of
    the repository you want to delete. For example, to remove the repository
    <code class="literal">SLEHA-12-GEO</code> from <a class="xref" href="#ex.zypper.repos" title="Zypper—List of Known Repositories">Example 6.1, “Zypper—List of Known Repositories”</a>,
    use one of the following commands:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper removerepo 1
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper removerepo "SLEHA-12-GEO"</pre></div></div><div class="sect3 " id="sec.zypper.instrepo.mofify"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.instrepo.mofify"><span class="number">6.1.5.4 </span><span class="name">Modifying Repositories</span> <a title="Permalink" class="permalink" href="#sec.zypper.instrepo.mofify">#</a></h4></div></div></div><p>
    Enable or disable repositories with <code class="command">zypper modifyrepo</code>.
    You can also alter the repository's properties (such as refreshing
    behavior, name or priority) with this command. The following command will
    enable the repository named <code class="literal">updates</code>, turn on
    auto-refresh and set its priority to 20:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper modifyrepo -er -p 20 'updates'</pre></div><p>
    Modifying repositories is not limited to a single repository—you can
    also operate on groups:
   </p><table border="0" summary="Simple list" class="simplelist "><tr><td><code class="option">-a</code>: all repositories</td></tr><tr><td><code class="option">-l</code>: local repositories</td></tr><tr><td><code class="option">-t</code>: remote repositories</td></tr><tr><td><code class="option">-m <em class="replaceable ">TYPE</em></code>: repositories
     of a certain type (where <em class="replaceable ">TYPE</em> can be one of the
     following: <code class="literal">http</code>, <code class="literal">https</code>, <code class="literal">ftp</code>,
     <code class="literal">cd</code>, <code class="literal">dvd</code>, <code class="literal">dir</code>, <code class="literal">file</code>,
     <code class="literal">cifs</code>, <code class="literal">smb</code>, <code class="literal">nfs</code>, <code class="literal">hd</code>,
     <code class="literal">iso</code>) </td></tr></table><p>
    To rename a repository alias, use the <code class="literal">renamerepo</code>
    command. The following example changes the alias from <code class="literal">Mozilla
    Firefox</code> to <code class="literal">firefox</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper renamerepo 'Mozilla Firefox' firefox</pre></div></div></div><div class="sect2 " id="sec.zypper.query"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.query"><span class="number">6.1.6 </span><span class="name">Querying Repositories and Packages with Zypper</span> <a title="Permalink" class="permalink" href="#sec.zypper.query">#</a></h3></div></div></div><p>
   Zypper offers various methods to query repositories or packages. To get
   lists of all products, patterns, packages or patches available, use the
   following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper products
<code class="prompt user">tux &gt; </code>zypper patterns
<code class="prompt user">tux &gt; </code>zypper packages
<code class="prompt user">tux &gt; </code>zypper patches</pre></div><p>
   To query all repositories for certain packages, use
   <code class="literal">search</code>. To get information regarding particular packages,
   use the <code class="literal">info</code> command.
  </p><div class="sect3 " id="sec.zypper.query.search"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.query.search"><span class="number">6.1.6.1 </span><span class="name">Searching for Software</span> <a title="Permalink" class="permalink" href="#sec.zypper.query.search">#</a></h4></div></div></div><p>
    The <code class="command">zypper search</code> command works on package names, or,
    optionally, on package summaries and descriptions. Strings wrapped in
    <code class="literal">/</code> are interpreted as regular expressions. By default,
    the search is not case-sensitive.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752763056"><span class="term ">Simple search for a package name containing <code class="literal">fire</code>
     </span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper search "fire"</pre></div></dd><dt id="idm139698752760496"><span class="term ">Simple search for the exact package <code class="literal">MozillaFirefox</code>
     </span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper search --match-exact "MozillaFirefox"</pre></div></dd><dt id="idm139698752757920"><span class="term ">Also search in package descriptions and summaries</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper search -d fire</pre></div></dd><dt id="idm139698752755808"><span class="term ">Only display packages not already installed</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper search -u fire</pre></div></dd><dt id="idm139698752753696"><span class="term ">Display packages containing the string <code class="literal">fir</code> not
    followed be <code class="literal">e</code>
     </span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper se "/fir[^e]/"</pre></div></dd></dl></div></div><div class="sect3 " id="sec.zypper.query.what-provides"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.query.what-provides"><span class="number">6.1.6.2 </span><span class="name">Searching for Specific Capability</span> <a title="Permalink" class="permalink" href="#sec.zypper.query.what-provides">#</a></h4></div></div></div><p>
    To search for packages which provide a special capability, use the command
    <code class="literal">what-provides</code>. For example, if you want to know which
    package provides the Perl module <code class="literal">SVN::Core</code>, use the
    following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper what-provides 'perl(SVN::Core)'</pre></div><p>
    The <code class="literal">what-provides
    <em class="replaceable ">PACKAGE_NAME</em></code> is similar to
    <code class="command">rpm -q --whatprovides</code>
    <em class="replaceable ">PACKAGE_NAME</em>, but RPM is only able to query the
    RPM database (that is the database of all installed packages). Zypper, on
    the other hand, will tell you about providers of the capability from any
    repository, not only those that are installed.
   </p></div><div class="sect3 " id="sec.zypper.query.info"><div class="titlepage"><div><div><h4 class="title" id="sec.zypper.query.info"><span class="number">6.1.6.3 </span><span class="name">Showing Package Information</span> <a title="Permalink" class="permalink" href="#sec.zypper.query.info">#</a></h4></div></div></div><p>
    To query single packages, use <code class="command">info</code> with an exact package
    name as an argument. This displays detailed information about a package. In
    case the package name does not match any package name from repositories,
    the command outputs detailed information for non-package matches. If you
    request a specific type (by using the <code class="literal">-t</code> option) and the
    type does not exist, the command outputs other available matches but
    without detailed information.
   </p><p>
    If you specify a source package, the command displays binary packages built
    from the source package. If you specify a binary package, the command
    outputs the source packages used to build the binary package.
   </p><p>
    To also show what is required/recommended by the package, use the options
    <code class="option">--requires</code> and <code class="option">--recommends</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper info --requires MozillaFirefox</pre></div></div></div><div class="sect2 " id="sec.zypper.lifecycle"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.lifecycle"><span class="number">6.1.7 </span><span class="name">Showing Life Cycle Information</span> <a title="Permalink" class="permalink" href="#sec.zypper.lifecycle">#</a></h3></div></div></div><p>
   SUSE products are generally supported for 10 years. Often, you
   can extend that standard life cycle by using the extended support
   offerings of SUSE which add 3 years of support.
   Depending on your product find the exact support life cycle at
   <a class="link" href="https://www.suse.com/lifecycle" target="_blank">https://www.suse.com/lifecycle</a>.
  </p><p>
   To check the lifecycle of your product and supported package, use the
   <code class="command">zypper lifecycle</code> command as shown below:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">zypper lifecycle</code>
Product end of support
Codestream: SUSE Linux Enterprise Server 15             2028-04-23
    SUSE Linux Enterprise Server 15                     n/a*

Module end of support
Basesystem Module                                       2021-07-31

No packages with end of support different from product.

*) See https://www.suse.com/lifecycle for latest information</pre></div></div><div class="sect2 " id="sec.zypper.configure"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.configure"><span class="number">6.1.8 </span><span class="name">Configuring Zypper</span> <a title="Permalink" class="permalink" href="#sec.zypper.configure">#</a></h3></div></div></div><p>
   Zypper now comes with a configuration file, allowing you to permanently
   change Zypper's behavior (either system-wide or user-specific). For
   system-wide changes, edit <code class="filename">/etc/zypp/zypper.conf</code>. For
   user-specific changes, edit <code class="filename">~/.zypper.conf</code>. If
   <code class="filename">~/.zypper.conf</code> does not yet exist, you can use
   <code class="filename">/etc/zypp/zypper.conf</code> as a template: copy it to
   <code class="filename">~/.zypper.conf</code> and adjust it to your liking. Refer to
   the comments in the file for help about the available options.
  </p></div><div class="sect2 " id="sec.zypper.trouble"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.trouble"><span class="number">6.1.9 </span><span class="name">Troubleshooting</span> <a title="Permalink" class="permalink" href="#sec.zypper.trouble">#</a></h3></div></div></div><p>
   If you have trouble accessing packages from configured repositories
   (for example, Zypper cannot find a certain package even though you know it
   exists in one the repositories), refreshing the repositories may help:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper refresh</pre></div><p>
   If that does not help, try
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper refresh -fdb</pre></div><p>
   This forces a complete refresh and rebuild of the database, including a
   forced download of raw metadata.
  </p></div><div class="sect2 " id="sec.zypper.rollback"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.rollback"><span class="number">6.1.10 </span><span class="name">Zypper Rollback Feature on Btrfs File System</span> <a title="Permalink" class="permalink" href="#sec.zypper.rollback">#</a></h3></div></div></div><p>
   If the Btrfs file system is used on the root partition and
   <code class="command">snapper</code> is installed, Zypper automatically calls
   <code class="command">snapper</code> when committing changes to the file system to
   create appropriate file system snapshots. These snapshots can be used to revert any changes made by Zypper. See <a class="xref" href="#cha.snapper" title="Chapter 7. System Recovery and Snapshot Management with Snapper">Chapter 7, <em>System Recovery and Snapshot Management with Snapper</em></a> for
   more information.
  </p></div><div class="sect2 " id="sec.zypper.more"><div class="titlepage"><div><div><h3 class="title" id="sec.zypper.more"><span class="number">6.1.11 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.zypper.more">#</a></h3></div></div></div><p>
   For more information on managing software from the command line, enter
   <code class="command">zypper help</code>, <code class="command">zypper help </code>
   <em class="replaceable ">COMMAND</em> or refer to the
   <code class="command">zypper(8)</code> man page. For a complete and detailed command
   reference, <code class="literal">cheat sheets</code> with the most important
   commands, and information on how to use Zypper in scripts and applications,
   refer to <a class="link" href="http://en.opensuse.org/SDB:Zypper_usage" target="_blank">http://en.opensuse.org/SDB:Zypper_usage</a>. A
   list of software changes for the latest <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> version can be found
   at <a class="link" href="http://en.opensuse.org/openSUSE:Zypper versions" target="_blank">http://en.opensuse.org/openSUSE:Zypper versions</a>.
  </p></div></div><div class="sect1 " id="sec.rpm"><div class="titlepage"><div><div><h2 class="title" id="sec.rpm"><span class="number">6.2 </span><span class="name">RPM—the Package Manager</span> <a title="Permalink" class="permalink" href="#sec.rpm">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>rpm.xml</li><li><span class="ds-label">ID: </span>sec.rpm</li></ul></div></div></div></div><p>
  RPM (RPM Package Manager) is used for managing software packages. Its main
  commands are <code class="command">rpm</code> and <code class="command">rpmbuild</code>. The
  powerful RPM database can be queried by the users, system administrators and
  package builders for detailed information about the installed software.
 </p><p>
  Essentially, <code class="command">rpm</code> has five modes: installing, uninstalling
  (or updating) software packages, rebuilding the RPM database, querying RPM
  bases or individual RPM archives, integrity checking of packages and signing
  packages. <code class="command">rpmbuild</code> can be used to build installable
  packages from pristine sources.
 </p><p>
  Installable RPM archives are packed in a special binary format. These
  archives consist of the program files to install and certain meta information
  used during the installation by <code class="command">rpm</code> to configure the
  software package or stored in the RPM database for documentation purposes.
  RPM archives normally have the extension <code class="filename">.rpm</code>.
 </p><div id="idm139698752704976" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Software Development Packages</h6><p>
   For several packages, the components needed for software development
   (libraries, headers, include files, etc.) have been put into separate
   packages. These development packages are only needed if you want to compile
   software yourself (for example, the most recent GNOME packages). They can
   be identified by the name extension <code class="literal">-devel</code>, such as the
   packages <code class="systemitem">alsa-devel</code> and
   <code class="systemitem">gimp-devel</code>.
  </p></div><div class="sect2 " id="sec.rpm.package_auth"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.package_auth"><span class="number">6.2.1 </span><span class="name">Verifying Package Authenticity</span> <a title="Permalink" class="permalink" href="#sec.rpm.package_auth">#</a></h3></div></div></div><p>
   RPM packages have a GPG signature. To verify the signature of an RPM
   package, use the command <code class="command">rpm --checksig </code>
   <em class="replaceable ">PACKAGE</em>-1.2.3.rpm to determine whether the
   package originates from SUSE or from another trustworthy facility. This is
   especially recommended for update packages from the Internet.
  </p><p>
   While fixing issues in the operating system, you might need to install a
   Problem Temporary Fix (PTF) into a production system. The packages provided
   by SUSE are signed against a special PTF key. However, in contrast to
   SUSE Linux Enterprise 11, this key is not imported by default on SUSE Linux Enterprise 12 systems. To
   manually import the key, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm --import \
/usr/share/doc/packages/suse-build-key/suse_ptf_key.asc</pre></div><p>
   After importing the key, you can install PTF packages on your system.
  </p></div><div class="sect2 " id="sec.rpm.packages_manage"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.packages_manage"><span class="number">6.2.2 </span><span class="name">Managing Packages: Install, Update, and Uninstall</span> <a title="Permalink" class="permalink" href="#sec.rpm.packages_manage">#</a></h3></div></div></div><p>
   Normally, the installation of an RPM archive is quite simple: <code class="command">rpm
   -i</code> <em class="replaceable ">PACKAGE</em>.rpm. With this command the
   package is installed, but only if its dependencies are fulfilled and if
   there are no conflicts with other packages. With an error message,
   <code class="command">rpm</code> requests those packages that need to be installed to
   meet dependency requirements. In the background, the RPM database ensures
   that no conflicts arise—a specific file can only belong to one
   package. By choosing different options, you can force <code class="command">rpm</code>
   to ignore these defaults, but this is only for experts. Otherwise, you risk
   compromising the integrity of the system and possibly jeopardize the ability
   to update the system.
  </p><p>
   The options <code class="option">-U</code> or <code class="option">--upgrade</code> and
   <code class="option">-F</code> or <code class="option">--freshen</code> can be used to update a
   package (for example, <code class="command">rpm -F</code>
   <em class="replaceable ">PACKAGE</em>.rpm). This command removes the files of
   the old version and immediately installs the new files. The difference
   between the two versions is that <code class="option">-U</code> installs packages that
   previously did not exist in the system, while <code class="option">-F</code> merely
   updates previously installed packages. When updating, <code class="command">rpm</code>
   updates configuration files carefully using the following strategy:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     If a configuration file was not changed by the system administrator,
     <code class="command">rpm</code> installs the new version of the appropriate file.
     No action by the system administrator is required.
    </p></li><li class="listitem "><p>
     If a configuration file was changed by the system administrator before the
     update, <code class="command">rpm</code> saves the changed file with the extension
     <code class="filename">.rpmorig</code> or <code class="filename">.rpmsave</code> (backup
     file) and installs the version from the new package. This is done only if
     the originally installed file and the newer version are different. If this is
     the case, compare the backup file (<code class="filename">.rpmorig</code> or
     <code class="filename">.rpmsave</code>) with the newly installed file and make your
     changes again in the new file. Afterward, delete all
     <code class="filename">.rpmorig</code> and <code class="filename">.rpmsave</code> files to
     avoid problems with future updates.
    </p></li><li class="listitem "><p>
     <code class="filename">.rpmnew</code> files appear if the configuration file
     already exists <span class="emphasis"><em>and</em></span> if the <code class="option">noreplace</code>
     label was specified in the <code class="filename">.spec</code> file.
    </p></li></ul></div><p>
   Following an update, <code class="filename">.rpmsave</code> and
   <code class="filename">.rpmnew</code> files should be removed after comparing them,
   so they do not obstruct future updates. The <code class="filename">.rpmorig</code>
   extension is assigned if the file has not previously been recognized by the
   RPM database.
  </p><p>
   Otherwise, <code class="filename">.rpmsave</code> is used. In other words,
   <code class="filename">.rpmorig</code> results from updating from a foreign format to
   RPM. <code class="filename">.rpmsave</code> results from updating from an older RPM
   to a newer RPM. <code class="filename">.rpmnew</code> does not disclose any
   information to whether the system administrator has made any changes to the
   configuration file. A list of these files is available in
   <code class="filename">/var/adm/rpmconfigcheck</code>. Some configuration files (like
   <code class="filename">/etc/httpd/httpd.conf</code>) are not overwritten to allow
   continued operation.
  </p><p>
   The <code class="option">-U</code> switch is <span class="emphasis"><em>not</em></span> just an
   equivalent to uninstalling with the <code class="option">-e</code> option and
   installing with the <code class="option">-i</code> option. Use <code class="option">-U</code>
   whenever possible.
  </p><p>
   To remove a package, enter <code class="command">rpm -e</code>
   <em class="replaceable ">PACKAGE</em>. This command only deletes the package if
   there are no unresolved dependencies. It is theoretically impossible to
   delete Tcl/Tk, for example, as long as another application requires it. Even
   in this case, RPM calls for assistance from the database. If such a deletion
   is, for whatever reason, impossible (even if <span class="emphasis"><em>no</em></span>
   additional dependencies exist), it may be helpful to rebuild the RPM
   database using the option <code class="option">--rebuilddb</code>.
  </p></div><div class="sect2 " id="sec.rpm.delta"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.delta"><span class="number">6.2.3 </span><span class="name">Delta RPM Packages</span> <a title="Permalink" class="permalink" href="#sec.rpm.delta">#</a></h3></div></div></div><p>
   Delta RPM packages contain the difference between an old and a new version
   of an RPM package. Applying a delta RPM onto an old RPM results in a
   completely new RPM. It is not necessary to have a copy of the old RPM
   because a delta RPM can also work with an installed RPM. The delta RPM
   packages are even smaller in size than patch RPMs, which is an advantage
   when transferring update packages over the Internet. The drawback is that
   update operations with delta RPMs involved consume considerably more CPU
   cycles than plain or patch RPMs.
  </p><p>
   The <code class="command">makedeltarpm</code> and <code class="command">applydelta</code>
   binaries are part of the delta RPM suite (package
   <code class="systemitem">deltarpm</code>) and help you create and apply delta RPM
   packages. With the following commands, you can create a delta RPM called
   <code class="filename">new.delta.rpm</code>. The following command assumes that
   <code class="filename">old.rpm</code> and <code class="filename">new.rpm</code> are present:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> makedeltarpm old.rpm new.rpm new.delta.rpm</pre></div><p>
   Using <code class="command">applydeltarpm</code>, you can reconstruct the new RPM from
   the file system if the old package is already installed:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> applydeltarpm new.delta.rpm new.rpm</pre></div><p>
   To derive it from the old RPM without accessing the file system, use the
   <code class="option">-r</code> option:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> applydeltarpm -r old.rpm new.delta.rpm new.rpm</pre></div><p>
   See <code class="filename">/usr/share/doc/packages/deltarpm/README</code> for
   technical details.
  </p></div><div class="sect2 " id="sec.rpm.query"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.query"><span class="number">6.2.4 </span><span class="name">RPM Queries</span> <a title="Permalink" class="permalink" href="#sec.rpm.query">#</a></h3></div></div></div><p>
   With the <code class="option">-q</code> option <code class="command">rpm</code> initiates
   queries, making it possible to inspect an RPM archive (by adding the option
   <code class="option">-p</code>) and to query the RPM database of installed packages.
   Several switches are available to specify the type of information required.
   See <a class="xref" href="#tab.rpm.query" title="The Most Important RPM Query Options">Table 6.1, “The Most Important RPM Query Options”</a>.
  </p><div class="table" id="tab.rpm.query"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 6.1: </span><span class="name">The Most Important RPM Query Options </span><a title="Permalink" class="permalink" href="#tab.rpm.query">#</a></h6></div><div class="table-contents"><table summary="The Most Important RPM Query Options" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>
       <p>
        <code class="option">-i</code>
       </p>
      </td><td>
       <p>
        Package information
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-l</code>
       </p>
      </td><td>
       <p>
        File list
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-f FILE</code>
       </p>
      </td><td>
       <p>
        Query the package that contains the file
        <em class="replaceable ">FILE</em> (the full path must be specified with
        <em class="replaceable ">FILE</em>)
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-s</code>
       </p>
      </td><td>
       <p>
        File list with status information (implies <code class="option">-l</code>)
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-d</code>
       </p>
      </td><td>
       <p>
        List only documentation files (implies <code class="literal">-l</code>)
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-c</code>
       </p>
      </td><td>
       <p>
        List only configuration files (implies <code class="option">-l</code>)
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">--dump</code>
       </p>
      </td><td>
       <p>
        File list with complete details (to be used with <code class="option">-l</code>,
        <code class="option">-c</code>, or <code class="option">-d</code>)
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">--provides</code>
       </p>
      </td><td>
       <p>
        List features of the package that another package can request with
        <code class="option">--requires</code>
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">--requires</code>, <code class="option">-R</code>
       </p>
      </td><td>
       <p>
        Capabilities the package requires
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">--scripts</code>
       </p>
      </td><td>
       <p>
        Installation scripts (preinstall, postinstall, uninstall)
       </p>
      </td></tr></tbody></table></div></div><p>
   For example, the command <code class="command">rpm -q -i wget</code> displays the
   information shown in <a class="xref" href="#aus.update.rpm-i" title="rpm -q -i wget">Example 6.2, “<code class="command">rpm -q -i wget</code>”</a>.
  </p><div class="example" id="aus.update.rpm-i"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 6.2: </span><span class="name"><code class="command">rpm -q -i wget</code> </span><a title="Permalink" class="permalink" href="#aus.update.rpm-i">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">Name        : wget
Version     : 1.14
Release     : 17.1
Architecture: x86_64
Install Date: Mon 30 Jan 2017 14:01:29 CET
Group       : Productivity/Networking/Web/Utilities
Size        : 2046483
License     : GPL-3.0+
Signature   : RSA/SHA256, Thu 08 Dec 2016 07:48:44 CET, Key ID 70af9e8139db7c82
Source RPM  : wget-1.14-17.1.src.rpm
Build Date  : Thu 08 Dec 2016 07:48:34 CET
Build Host  : sheep09
Relocations : (not relocatable)
Packager    : https://www.suse.com/
Vendor      : SUSE LLC &lt;https://www.suse.com/&gt;
URL         : http://www.gnu.org/software/wget/
Summary     : A Tool for Mirroring FTP and HTTP Servers
Description :
Wget enables you to retrieve WWW documents or FTP files from a server.
This can be done in script files or via the command line.
Distribution: SUSE Linux Enterprise 12</pre></div></div></div><p>
   The option <code class="option">-f</code> only works if you specify the complete file
   name with its full path. Provide as many file names as desired. For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rpm -q -f /bin/rpm /usr/bin/wget
rpm-4.11.2-15.1.x86_64
wget-1.14-17.1.x86_64</pre></div><p>
   If only part of the file name is known, use a shell script as shown in
   <a class="xref" href="#dat.rpm.search" title="Script to Search for Packages">Example 6.3, “Script to Search for Packages”</a>. Pass the partial file name to the script
   shown as a parameter when running it.
  </p><div class="example" id="dat.rpm.search"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 6.3: </span><span class="name">Script to Search for Packages </span><a title="Permalink" class="permalink" href="#dat.rpm.search">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">#! /bin/sh
for i in $(rpm -q -a -l | grep $1); do
    echo "\"$i\" is in package:"
    rpm -q -f $i
    echo ""
done</pre></div></div></div><p>
   The command <code class="command">rpm -q --changelog</code>
   <em class="replaceable ">PACKAGE</em> displays a detailed list of change
   information about a specific package, sorted by date.
  </p><p>
   With the installed RPM database, verification checks can be made. Initiate
   these with <code class="option">-V</code>, or <code class="option">--verify</code>. With this
   option, <code class="command">rpm</code> shows all files in a package that have been
   changed since installation. <code class="command">rpm</code> uses eight character
   symbols to give some hints about the following changes:
  </p><div class="table" id="tab.rpm.verify"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 6.2: </span><span class="name">RPM Verify Options </span><a title="Permalink" class="permalink" href="#tab.rpm.verify">#</a></h6></div><div class="table-contents"><table summary="RPM Verify Options" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>
       <p>
        <code class="option">5</code>
       </p>
      </td><td>
       <p>
        MD5 check sum
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">S</code>
       </p>
      </td><td>
       <p>
        File size
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">L</code>
       </p>
      </td><td>
       <p>
        Symbolic link
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">T</code>
       </p>
      </td><td>
       <p>
        Modification time
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">D</code>
       </p>
      </td><td>
       <p>
        Major and minor device numbers
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">U</code>
       </p>
      </td><td>
       <p>
        Owner
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">G</code>
       </p>
      </td><td>
       <p>
        Group
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">M</code>
       </p>
      </td><td>
       <p>
        Mode (permissions and file type)
       </p>
      </td></tr></tbody></table></div></div><p>
   In the case of configuration files, the letter <code class="option">c</code> is
   printed. For example, for changes to <code class="filename">/etc/wgetrc</code>
   (<code class="systemitem">wget</code> package):
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rpm -V wget
S.5....T c /etc/wgetrc</pre></div><p>
   The files of the RPM database are placed in
   <code class="filename">/var/lib/rpm</code>. If the partition
   <code class="filename">/usr</code> has a size of 1 GB, this database can occupy
   nearly 30 MB, especially after a complete update. If the database is
   much larger than expected, it is useful to rebuild the database with the
   option <code class="option">--rebuilddb</code>. Before doing this, make a backup of the
   old database. The <code class="command">cron</code> script
   <code class="command">cron.daily</code> makes daily copies of the database (packed
   with gzip) and stores them in <code class="filename">/var/adm/backup/rpmdb</code>.
   The number of copies is controlled by the variable
   <code class="systemitem">MAX_RPMDB_BACKUPS</code> (default: <code class="option">5</code>) in
   <code class="filename">/etc/sysconfig/backup</code>. The size of a single backup is
   approximately 1 MB for 1 GB in <code class="filename">/usr</code>.
  </p></div><div class="sect2 " id="sec.rpm.sources"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.sources"><span class="number">6.2.5 </span><span class="name">Installing and Compiling Source Packages</span> <a title="Permalink" class="permalink" href="#sec.rpm.sources">#</a></h3></div></div></div><p>
   All source packages carry a <code class="filename">.src.rpm</code> extension (source
   RPM).
  </p><div id="idm139698752568416" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Installed Source Packages</h6><p>
    Source packages can be copied from the installation medium to the hard disk
    and unpacked with YaST. They are not, however, marked as installed
    (<code class="literal">[i]</code>) in the package manager. This is because the source
    packages are not entered in the RPM database. Only
    <span class="emphasis"><em>installed</em></span> operating system software is listed in the
    RPM database. When you <span class="quote">“<span class="quote">install</span>”</span> a source package, only the
    source code is added to the system.
   </p></div><p>
   The following directories must be available for <code class="command">rpm</code> and
   <code class="command">rpmbuild</code> in <code class="filename">/usr/src/packages</code>
   (unless you specified custom settings in a file like
   <code class="filename">/etc/rpmrc</code>):
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752562768"><span class="term "><code class="filename">SOURCES</code>
    </span></dt><dd><p>
      for the original sources (<code class="filename">.tar.bz2</code> or
      <code class="filename">.tar.gz</code> files, etc.) and for distribution-specific
      adjustments (mostly <code class="filename">.diff</code> or
      <code class="filename">.patch</code> files)
     </p></dd><dt id="idm139698752558832"><span class="term "><code class="filename">SPECS</code>
    </span></dt><dd><p>
      for the <code class="filename">.spec</code> files, similar to a meta Makefile,
      which control the <span class="emphasis"><em>build</em></span> process
     </p></dd><dt id="idm139698752555808"><span class="term "><code class="filename">BUILD</code>
    </span></dt><dd><p>
      all the sources are unpacked, patched and compiled in this directory
     </p></dd><dt id="idm139698752553664"><span class="term "><code class="filename">RPMS</code>
    </span></dt><dd><p>
      where the completed binary packages are stored
     </p></dd><dt id="idm139698752551536"><span class="term "><code class="filename">SRPMS</code>
    </span></dt><dd><p>
      here are the source RPMs
     </p></dd></dl></div><p>
   When you install a source package with YaST, all the necessary components
   are installed in <code class="filename">/usr/src/packages</code>: the sources and the
   adjustments in <code class="filename">SOURCES</code> and the relevant
   <code class="filename">.spec</code> file in <code class="filename">SPECS</code>.
  </p><div id="idm139698752546928" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: System Integrity</h6><p>
    Do not experiment with system components
    (<code class="systemitem">glibc</code>,
    <code class="systemitem">rpm</code>, etc.), because this
    endangers the stability of your system.
   </p></div><p>
   The following example uses the <code class="filename">wget.src.rpm</code> package.
   After installing the source package, you should have files similar to those
   in the following list:
  </p><div class="verbatim-wrap"><pre class="screen">/usr/src/packages/SOURCES/wget-1.11.4.tar.bz2
/usr/src/packages/SOURCES/wgetrc.patch
/usr/src/packages/SPECS/wget.spec</pre></div><p>
   <code class="command">rpmbuild</code> <code class="option">-b<em class="replaceable ">X</em></code>
   <code class="filename">/usr/src/packages/SPECS/wget.spec</code> starts the
   compilation. <em class="replaceable ">X</em> is a wild card for various stages
   of the build process (see the output of <code class="option">--help</code> or the RPM
   documentation for details). The following is merely a brief explanation:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752539072"><span class="term "><code class="option">-bp</code>
    </span></dt><dd><p>
      Prepare sources in <code class="filename">/usr/src/packages/BUILD</code>: unpack
      and patch.
     </p></dd><dt id="idm139698752536512"><span class="term "><code class="option">-bc</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bp</code>, but with additional compilation.
     </p></dd><dt id="idm139698752533952"><span class="term "><code class="option">-bi</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bp</code>, but with additional installation of
      the built software. Caution: if the package does not support the
      BuildRoot feature, you might overwrite configuration files.
     </p></dd><dt id="idm139698752531264"><span class="term "><code class="option">-bb</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bi</code>, but with the additional creation of
      the binary package. If the compile was successful, the binary should be
      in <code class="filename">/usr/src/packages/RPMS</code>.
     </p></dd><dt id="idm139698752528176"><span class="term "><code class="option">-ba</code>
    </span></dt><dd><p>
      Do the same as <code class="option">-bb</code>, but with the additional creation of
      the source RPM. If the compilation was successful, the binary should be
      in <code class="filename">/usr/src/packages/SRPMS</code>.
     </p></dd><dt id="idm139698752525088"><span class="term "><code class="option">--short-circuit</code>
    </span></dt><dd><p>
      Skip some steps.
     </p></dd></dl></div><p>
   The binary RPM created can now be installed with <code class="command">rpm</code>
   <code class="option">-i</code> or, preferably, with <code class="command">rpm</code>
   <code class="option">-U</code>. Installation with <code class="command">rpm</code> makes it
   appear in the RPM database.
  </p><p>
   Keep in mind, the <code class="literal">BuildRoot</code> directive in the spec file is
   deprecated since <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> <span class="phrase">12</span>. If you still need this feature, use the
   <code class="option">--buildroot</code> option as a workaround.<span class="phrase">For a more detailed background, see the support database at
   <a class="link" href="https://www.suse.com/support/kb/doc?id=7017104" target="_blank">https://www.suse.com/support/kb/doc?id=7017104</a>.</span>
  </p></div><div class="sect2 " id="sec.rpm.build"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.build"><span class="number">6.2.6 </span><span class="name">Compiling RPM Packages with build</span> <a title="Permalink" class="permalink" href="#sec.rpm.build">#</a></h3></div></div></div><p>
   The danger with many packages is that unwanted files are added to the
   running system during the build process. To prevent this use
   <code class="systemitem">build</code>, which creates a defined environment in which
   the package is built. To establish this chroot environment, the
   <code class="command">build</code> script must be provided with a complete package
   tree. This tree can be made available on the hard disk, via NFS, or from
   DVD. Set the position with <code class="command">build --rpms</code>
   <em class="replaceable ">DIRECTORY</em>. Unlike <code class="command">rpm</code>, the
   <code class="command">build</code> command looks for the <code class="filename">.spec</code>
   file in the source directory. To build <code class="filename">wget</code> (like in
   the above example) with the DVD mounted in the system under
   <code class="filename">/media/dvd</code>, use the following commands as
   <code class="systemitem">root</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cd /usr/src/packages/SOURCES/
<code class="prompt root">root # </code>mv ../SPECS/wget.spec .
<code class="prompt root">root # </code>build --rpms /media/dvd/suse/ wget.spec</pre></div><p>
   Subsequently, a minimum environment is established at
   <code class="filename">/var/tmp/build-root</code>. The package is built in this
   environment. Upon completion, the resulting packages are located in
   <code class="filename">/var/tmp/build-root/usr/src/packages/RPMS</code>.
  </p><p>
   The <code class="command">build</code> script offers several additional options. For
   example, cause the script to prefer your own RPMs, omit the initialization
   of the build environment or limit the <code class="command">rpm</code> command to one
   of the above-mentioned stages. Access additional information with
   <code class="command">build</code> <code class="option">--help</code> and by reading the
   <code class="command">build</code> man page.
  </p></div><div class="sect2 " id="sec.rpm.tools"><div class="titlepage"><div><div><h3 class="title" id="sec.rpm.tools"><span class="number">6.2.7 </span><span class="name">Tools for RPM Archives and the RPM Database</span> <a title="Permalink" class="permalink" href="#sec.rpm.tools">#</a></h3></div></div></div><p>
   Midnight Commander (<code class="command">mc</code>) can display the contents of RPM
   archives and copy parts of them. It represents archives as virtual file
   systems, offering all usual menu options of Midnight Commander. Display the
   <code class="filename">HEADER</code> with <span class="keycap">F3</span>. View the archive
   structure with the cursor keys and <span class="keycap">Enter</span>. Copy archive
   components with <span class="keycap">F5</span>.
  </p><p>
   A full-featured package manager is available as a YaST module. For
   details, see <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 12 “Installing or Removing Software”</span>.
  </p></div></div></div><div class="chapter " id="cha.snapper"><div class="titlepage"><div><div><h2 class="title"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span> <a title="Permalink" class="permalink" href="#cha.snapper">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>snapper.xml</li><li><span class="ds-label">ID: </span>cha.snapper</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698752491568">#</a></h6></div><p>
    Being able to do file system snapshots providing the ability to do
    rollbacks on Linux is a feature that was often requested in the past.
    Snapper, with the <code class="literal">Btrfs</code> file system or thin-provisioned
    LVM volumes now fills that gap.
   </p><p>
    <code class="literal">Btrfs</code>, a new copy-on-write file system for Linux,
    supports file system snapshots (a copy of the state of a subvolume at a
    certain point of time) of subvolumes (one or more separately mountable file
    systems within each physical partition). Snapshots are also supported on
    thin-provisioned LVM volumes formatted with XFS, Ext4 or Ext3. Snapper lets
    you create and manage these snapshots. It comes with a command line and a
    YaST interface. Starting with <span class="phrase">SUSE Linux Enterprise Server
    12</span> it is also possible
    to boot from <code class="literal">Btrfs</code> snapshots—see <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a> for more information.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.snapper.setup"><span class="number">7.1 </span><span class="name">Default Setup</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.undo"><span class="number">7.2 </span><span class="name">Using Snapper to Undo Changes</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.snapshot-boot"><span class="number">7.3 </span><span class="name">System Rollback by Booting from Snapshots</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.config"><span class="number">7.4 </span><span class="name">Creating and Modifying Snapper Configurations</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.manage"><span class="number">7.5 </span><span class="name">Manually Creating and Managing Snapshots</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.clean-up"><span class="number">7.6 </span><span class="name">Automatic Snapshot Clean-Up</span></a></span></dt><dt><span class="sect1"><a href="#sec.snapper.faqs"><span class="number">7.7 </span><span class="name">Frequently Asked Questions</span></a></span></dt></dl></div></div><p>
  Using Snapper you can perform the following tasks:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Undo system changes made by <code class="command">zypper</code> and YaST. See
    <a class="xref" href="#sec.snapper.undo" title="7.2. Using Snapper to Undo Changes">Section 7.2, “Using Snapper to Undo Changes”</a> for details.
   </p></li><li class="listitem "><p>
    Restore files from previous snapshots. See
    <a class="xref" href="#sec.snapper.undo.delete_file" title="7.2.2. Using Snapper to Restore Files">Section 7.2.2, “Using Snapper to Restore Files”</a> for details.
   </p></li><li class="listitem "><p>
    Do a system rollback by booting from a snapshot. See
    <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a> for details.
   </p></li><li class="listitem "><p>
    Manually create snapshots on the fly and manage existing snapshots. See
    <a class="xref" href="#sec.snapper.manage" title="7.5. Manually Creating and Managing Snapshots">Section 7.5, “Manually Creating and Managing Snapshots”</a> for details.
   </p></li></ul></div><div class="sect1 " id="sec.snapper.setup"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.setup"><span class="number">7.1 </span><span class="name">Default Setup</span> <a title="Permalink" class="permalink" href="#sec.snapper.setup">#</a></h2></div></div></div><p>
   Snapper on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> is set up to serve as an <span class="quote">“<span class="quote">undo and recovery
   tool</span>”</span> for system changes. By default, the root partition
   (<code class="filename">/</code>) of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> is formatted with
   <code class="literal">Btrfs</code>. Taking snapshots is automatically enabled if the
   root partition (<code class="filename">/</code>) is big enough (approximately more
   than 16 GB). Taking snapshots on partitions other than
   <code class="filename">/</code> is not enabled by default.
  </p><div id="idm139698752472480" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Enabling Snapper in the Installed System</h6><p>
    If you disabled Snapper during the installation, you can enable it at
    any time later. To do so, create a default Snapper configuration for the
    root file system by running
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c root create-config /</pre></div><p>
    Afterward enable the different snapshot types as described in <a class="xref" href="#sec.snapper.setup.customize.auto_snapshots" title="7.1.3.1. Disabling/Enabling Snapshots">Section 7.1.3.1, “Disabling/Enabling Snapshots”</a>.
   </p><p>
    Keep in mind that snapshots require a Btrfs root file system with
    subvolumes set up as proposed by the installer and a partition size of at
    least 16 GB.
   </p></div><p>
   When a snapshot is created, both the snapshot and the original point to the
   same blocks in the file system. So, initially a snapshot does not occupy
   additional disk space. If data in the original file system is modified,
   changed data blocks are copied while the old data blocks are kept for the
   snapshot. Therefore, a snapshot occupies the same amount of space as the
   data modified. So, over time, the amount of space a snapshot allocates,
   constantly grows. As a consequence, deleting files from a
   <code class="literal">Btrfs</code> file system containing snapshots may
   <span class="emphasis"><em>not</em></span> free disk space!
  </p><div id="idm139698752466304" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Snapshot Location</h6><p>
    Snapshots always reside on the same partition or subvolume on which the
    snapshot has been taken. It is not possible to store snapshots on a
    different partition or subvolume.
   </p></div><p>
   As a result, partitions containing snapshots need to be larger than
   <span class="quote">“<span class="quote">normal</span>”</span> partitions. The exact amount strongly depends on the
   number of snapshots you keep and the amount of data modifications. As a rule
   of thumb you should consider using twice the size than you normally would.
   To prevent disks from running out of space, old snapshots are automatically
   cleaned up. Refer to
   <a class="xref" href="#sec.snapper.setup.customize.archiving" title="7.1.3.4. Controlling Snapshot Archiving">Section 7.1.3.4, “Controlling Snapshot Archiving”</a> for details.
  </p><div class="sect2 " id="snapper.snapshot-type"><div class="titlepage"><div><div><h3 class="title" id="snapper.snapshot-type"><span class="number">7.1.1 </span><span class="name">Types of Snapshots</span> <a title="Permalink" class="permalink" href="#snapper.snapshot-type">#</a></h3></div></div></div><p>
    Although snapshots themselves do not differ in a technical sense, we
    distinguish between three types of snapshots, based on the events that trigger them:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752460896"><span class="term ">Timeline Snapshots</span></dt><dd><p>
       A single snapshot is created every hour. Old snapshots are automatically
       deleted. By default, the first snapshot of the last ten days, months,
       and years are kept. Timeline snapshots are disabled by default.
      </p></dd><dt id="idm139698752458880"><span class="term ">Installation Snapshots</span></dt><dd><p>
       Whenever one or more packages are installed with YaST or Zypper, a
       pair of snapshots is created: one before the installation starts
       (<span class="quote">“<span class="quote">Pre</span>”</span>) and another one after the installation has finished
       (<span class="quote">“<span class="quote">Post</span>”</span>). In case an important system component such as the
       kernel has been installed, the snapshot pair is marked as important
       (<code class="literal">important=yes</code>). Old snapshots are automatically
       deleted. By default the last ten important snapshots and the last ten
       <span class="quote">“<span class="quote">regular</span>”</span> (including administration snapshots) snapshots
       are kept. Installation snapshots are enabled by default.
      </p></dd><dt id="idm139698752454784"><span class="term ">Administration Snapshots</span></dt><dd><p>
       Whenever you administrate the system with YaST, a pair of snapshots is
       created: one when a YaST module is started (<span class="quote">“<span class="quote">Pre</span>”</span>) and
       another when the module is closed (<span class="quote">“<span class="quote">Post</span>”</span>). Old snapshots
       are automatically deleted. By default the last ten important snapshots
       and the last ten <span class="quote">“<span class="quote">regular</span>”</span> snapshots (including
       installation snapshots) are kept. Administration snapshots are enabled
       by default.
      </p></dd></dl></div></div><div class="sect2 " id="snapper.dir-excludes"><div class="titlepage"><div><div><h3 class="title" id="snapper.dir-excludes"><span class="number">7.1.2 </span><span class="name">Directories That Are Excluded from Snapshots</span> <a title="Permalink" class="permalink" href="#snapper.dir-excludes">#</a></h3></div></div></div><p>
    Some directories need to be excluded from snapshots for different reasons.
    The following list shows all directories that are excluded:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752446048"><span class="term "><code class="filename">/boot/grub2/i386-pc</code>,
   <code class="filename">/boot/grub2/x86_64-efi</code>,
   <code class="filename">/boot/grub2/powerpc-ieee1275</code>,
   <code class="filename">/boot/grub2/s390x-emu</code>
  </span></dt><dd><p>
    A rollback of the boot loader configuration is not supported. The
    directories listed above are architecture-specific. The first two
    directories are present on AMD64/Intel 64 machines, the latter two on IBM
    POWER and on IBM z Systems, respectively.
   </p></dd><dt id="idm139698752442352"><span class="term "><code class="filename">/home</code>
  </span></dt><dd><p>
    If <code class="filename">/home</code> does not reside on a separate partition, it
    is excluded to avoid data loss on rollbacks.
   </p></dd><dt id="idm139698752439744"><span class="term "><code class="filename">/opt</code>, <code class="filename">/var/opt</code>
  </span></dt><dd><p>
    Third-party products usually get installed to <code class="filename">/opt</code>. It
    is excluded to avoid uninstalling these applications on rollbacks.
   </p></dd><dt id="idm139698752436672"><span class="term "><code class="filename">/srv</code>
  </span></dt><dd><p>
    Contains data for Web and FTP servers. It is excluded to avoid data loss on
    rollbacks.
   </p></dd><dt id="idm139698752434512"><span class="term "><code class="filename">/tmp</code>, <code class="filename">/var/tmp</code>,
   <code class="filename">/var/cache</code>, <code class="filename">/var/crash</code>
  </span></dt><dd><p>
    All directories containing temporary files and caches are excluded from
    snapshots.
   </p></dd><dt id="idm139698752431008"><span class="term "><code class="filename">/usr/local</code>
  </span></dt><dd><p>
    This directory is used when manually installing software. It is excluded to
    avoid uninstalling these installations on rollbacks.
   </p></dd><dt id="idm139698752428800"><span class="term "><code class="filename">/var/lib/libvirt/images</code>
  </span></dt><dd><p>
    The default location for virtual machine images managed with libvirt.
    Excluded to ensure virtual machine images are not replaced with older
    versions during a rollback. By default, this subvolume is created with the
    option <code class="literal">no copy on write</code>.
   </p></dd><dt id="idm139698752426048"><span class="term "><code class="filename">/var/lib/mailman</code>, <code class="filename">/var/spool</code>
  </span></dt><dd><p>
    Directories containing mails or mail queues are excluded to avoid a loss of
    mails after a rollback.
   </p></dd><dt id="idm139698752423424"><span class="term "><code class="filename">/var/lib/named</code>
  </span></dt><dd><p>
    Contains zone data for the DNS server. Excluded from snapshots to ensure a
    name server can operate after a rollback.
   </p></dd><dt id="idm139698752421232"><span class="term "><code class="filename">/var/lib/mariadb</code>,
   <code class="filename">/var/lib/mysql</code>, <code class="filename">/var/lib/pgqsl</code>
  </span></dt><dd><p>
    These directories contain database data. By default, these subvolumes are
    created with the option <code class="literal">no copy on write</code>.
   </p></dd><dt id="idm139698752417712"><span class="term "><code class="filename">/var/log</code>
  </span></dt><dd><p>
    Log file location. Excluded from snapshots to allow log file analysis after
    the rollback of a broken system.
   </p></dd></dl></div></div><div class="sect2 " id="sec.snapper.setup.customize"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.setup.customize"><span class="number">7.1.3 </span><span class="name">Customizing the Setup</span> <a title="Permalink" class="permalink" href="#sec.snapper.setup.customize">#</a></h3></div></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> comes with a reasonable default setup, which should be
    sufficient for most use cases. However, all aspects of taking automatic
    snapshots and snapshot keeping can be configured according to your needs.
   </p><div class="sect3 " id="sec.snapper.setup.customize.auto_snapshots"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.setup.customize.auto_snapshots"><span class="number">7.1.3.1 </span><span class="name">Disabling/Enabling Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.setup.customize.auto_snapshots">#</a></h4></div></div></div><p>
     Each of the three snapshot types (timeline, installation, administration)
     can be enabled or disabled independently.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752410000"><span class="term ">Disabling/Enabling Timeline Snapshots</span></dt><dd><p><span class="formalpara-title">Enabling. </span>
         <code class="command">snapper -c root set-config "TIMELINE_CREATE=yes"</code>
        </p><p><span class="formalpara-title">Disabling. </span>
         <code class="command">snapper -c root set-config "TIMELINE_CREATE=no"</code>
        </p><p>
        Timeline snapshots are enabled by default, except for the root
        partition.
       </p></dd><dt id="idm139698752404528"><span class="term ">Disabling/Enabling Installation Snapshots</span></dt><dd><p><span class="formalpara-title">Enabling: </span>
         Install the package
         <code class="systemitem">snapper-zypp-plugin</code>
        </p><p><span class="formalpara-title">Disabling: </span>
         Uninstall the package
         <code class="systemitem">snapper-zypp-plugin</code>
        </p><p>
        Installation snapshots are enabled by default.
       </p></dd><dt id="idm139698752398480"><span class="term ">Disabling/Enabling Administration Snapshots</span></dt><dd><p><span class="formalpara-title">Enabling: </span>
         Set <code class="envar">USE_SNAPPER</code> to <code class="literal">yes</code> in
         <code class="filename">/etc/sysconfig/yast2</code>.
        </p><p><span class="formalpara-title">Disabling: </span>
         Set <code class="envar">USE_SNAPPER</code> to <code class="literal">no</code> in
         <code class="filename">/etc/sysconfig/yast2</code>.
        </p><p>
        Administration snapshots are enabled by default.
       </p></dd></dl></div></div><div class="sect3 " id="sec.snapper.setup.customize.inst_snapshots"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.setup.customize.inst_snapshots"><span class="number">7.1.3.2 </span><span class="name">Controlling Installation Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.setup.customize.inst_snapshots">#</a></h4></div></div></div><p>
     Taking snapshot pairs upon installing packages with YaST or Zypper is
     handled by the
     <code class="systemitem">snapper-zypp-plugin</code>. An XML
     configuration file, <code class="filename">/etc/snapper/zypp-plugin.conf</code>
     defines, when to make snapshots. By default the file looks like the
     following:
    </p><div class="verbatim-wrap"><pre class="screen"> 1 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 2 &lt;snapper-zypp-plugin-conf&gt;
 3  &lt;solvables&gt;
 4   &lt;solvable match="w"<span id="zypp-conf.match"></span><span class="callout">1</span> important="true"<span id="zypp-conf.important"></span><span class="callout">2</span>&gt;kernel-*<span id="zypp-conf.kernel"></span><span class="callout">3</span>&lt;/solvable&gt;
 5   &lt;solvable match="w" important="true"&gt;dracut&lt;/solvable&gt;
 6   &lt;solvable match="w" important="true"&gt;glibc&lt;/solvable&gt;
 7   &lt;solvable match="w" important="true"&gt;systemd*&lt;/solvable&gt;
 8   &lt;solvable match="w" important="true"&gt;udev&lt;/solvable&gt;
 9   &lt;solvable match="w"&gt;*&lt;/solvable&gt;<span id="zypp-conf.packages"></span><span class="callout">4</span>
10  &lt;/solvables&gt;
11 &lt;/snapper-zypp-plugin-conf&gt;</pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#zypp-conf.match"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
       The match attribute defines whether the pattern is a Unix shell-style
       wild card (<code class="literal">w</code>) or a Python regular expression
       (<code class="literal">re</code>).
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#zypp-conf.important"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
       If the given pattern matches and the corresponding package is marked as
       important (for example kernel packages), the snapshot will also be
       marked as important.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#zypp-conf.kernel"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
       Pattern to match a package name. Based on the setting of the
       <code class="literal">match</code> attribute, special characters are either
       interpreted as shell wild cards or regular expressions. This pattern
       matches all package names starting with <code class="literal">kernel-</code>.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#zypp-conf.packages"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
       This line unconditionally matches all packages.
      </p></td></tr></table></div><p>
     With this configuration snapshot, pairs are made whenever a package is
     installed (line 9). When the kernel, dracut, glibc, systemd, or udev packages
     marked as important are installed, the snapshot pair will also be marked
     as important (lines 4 to 8). All rules are evaluated.
    </p><p>
     To disable a rule, either delete it or deactivate it using XML comments.
     To prevent the system from making snapshot pairs for every package
     installation for example, comment line 9:
    </p><div class="verbatim-wrap"><pre class="screen"> 1 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 2 &lt;snapper-zypp-plugin-conf&gt;
 3  &lt;solvables&gt;
 4   &lt;solvable match="w" important="true"&gt;kernel-*&lt;/solvable&gt;
 5   &lt;solvable match="w" important="true"&gt;dracut&lt;/solvable&gt;
 6   &lt;solvable match="w" important="true"&gt;glibc&lt;/solvable&gt;
 7   &lt;solvable match="w" important="true"&gt;systemd*&lt;/solvable&gt;
 8   &lt;solvable match="w" important="true"&gt;udev&lt;/solvable&gt;
 9   &lt;!-- &lt;solvable match="w"&gt;*&lt;/solvable&gt; --&gt;
10  &lt;/solvables&gt;
11 &lt;/snapper-zypp-plugin-conf&gt;</pre></div></div><div class="sect3 " id="sec.snapper.setup.customizing.new_subvolume"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.setup.customizing.new_subvolume"><span class="number">7.1.3.3 </span><span class="name">Creating and Mounting New Subvolumes</span> <a title="Permalink" class="permalink" href="#sec.snapper.setup.customizing.new_subvolume">#</a></h4></div></div></div><p>
     Creating a new subvolume underneath the <code class="filename">/</code> hierarchy
     and permanently mounting it is supported. Such a subvolume will be
     excluded from snapshots. You need to make sure not to create it inside an
     existing snapshot, since you would not be able to delete snapshots anymore
     after a rollback.
    </p><p>
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> is configured with the <code class="filename">/@/</code> subvolume
     which serves as an independent root for permanent subvolumes such as
     <code class="filename">/opt</code>, <code class="filename">/srv</code>,
     <code class="filename">/home</code> and others. Any new subvolumes you create and
     permanently mount need to be created in this initial root file system.
    </p><p>
     To do so, run the following commands. In this example, a new subvolume
     <code class="filename">/usr/important</code> is created from
     <code class="filename">/dev/sda2</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount /dev/sda2 -o subvol=@ /mnt
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> btrfs subvolume create /mnt/usr/important
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> umount /mnt</pre></div><p>
     The corresponding entry in <code class="filename">/etc/fstab</code> needs to look
     like the following:
    </p><div class="verbatim-wrap"><pre class="screen">/dev/sda2 /usr/important btrfs subvol=@/usr/important 0 0</pre></div><div id="idm139698752363008" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Disable Copy-On-Write (cow)</h6><p>
      A subvolume may contain files that constantly change, such as
      virtualized disk images, database files, or log files. If so, consider
      disabling the copy-on-write feature for this volume, to avoid duplication
      of disk blocks. Use the <code class="option">nodatacow</code> mount option in
      <code class="filename">/etc/fstab</code> to do so:
     </p><div class="verbatim-wrap"><pre class="screen">/dev/sda2 /usr/important btrfs nodatacow,subvol=@/usr/important 0 0</pre></div><p>
      To alternatively disable copy-on-write for single files or directories,
      use the command <code class="command">chattr +C
      <em class="replaceable ">PATH</em></code>.
     </p></div></div><div class="sect3 " id="sec.snapper.setup.customize.archiving"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.setup.customize.archiving"><span class="number">7.1.3.4 </span><span class="name">Controlling Snapshot Archiving</span> <a title="Permalink" class="permalink" href="#sec.snapper.setup.customize.archiving">#</a></h4></div></div></div><p>
     Snapshots occupy disk space. To prevent disks from running out of space
     and thus causing system outages, old snapshots are automatically deleted.
     By default, up to ten important installation and administration snapshots
     and up to ten regular installation and administration snapshots are kept.
     If these snapshots occupy more than 50% of the root file system size,
     additional snapshots will be deleted. A minimum of four important and two
     regular snapshots are always kept.
    </p><p>
     Refer to <a class="xref" href="#sec.snapper.config.modify" title="7.4.1. Managing Existing Configurations">Section 7.4.1, “Managing Existing Configurations”</a> for instructions on
     how to change these values.
    </p></div><div class="sect3 " id="sec.snapper.lvm"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.lvm"><span class="number">7.1.3.5 </span><span class="name">Using Snapper on Thin-Provisioned LVM Volumes</span> <a title="Permalink" class="permalink" href="#sec.snapper.lvm">#</a></h4></div></div></div><p>
     Apart from snapshots on <code class="literal">Btrfs</code> file systems, Snapper
     also supports taking snapshots on thin-provisioned LVM volumes (snapshots
     on regular LVM volumes are <span class="emphasis"><em>not</em></span> supported) formatted
     with XFS, Ext4 or Ext3. For more information and setup instructions on LVM
     volumes, refer to <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 11 “Advanced Disk Setup”, Section 11.2 “LVM Configuration”</span>.
    </p><p>
     To use Snapper on a thin-provisioned LVM volume you need to create a
     Snapper configuration for it. On LVM it is required to specify the file
     system with
     <code class="option">--fstype=lvm(<em class="replaceable ">FILESYSTEM</em>)</code>.
     <code class="literal">ext3</code>, <code class="literal">etx4</code> or <code class="literal">xfs</code>
     are valid values for <em class="replaceable ">FILESYSTEM</em>. Example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c lvm create-config --fstype="lvm(xfs)" /thin_lvm</pre></div><p>
     You can adjust this configuration according to your needs as described in
     <a class="xref" href="#sec.snapper.config.modify" title="7.4.1. Managing Existing Configurations">Section 7.4.1, “Managing Existing Configurations”</a>.
    </p></div></div></div><div class="sect1 " id="sec.snapper.undo"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.undo"><span class="number">7.2 </span><span class="name">Using Snapper to Undo Changes</span> <a title="Permalink" class="permalink" href="#sec.snapper.undo">#</a></h2></div></div></div><p>
   Snapper on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> is preconfigured to serve as a tool that lets you
   undo changes made by <code class="command">zypper</code> and YaST. For this purpose,
   Snapper is configured to create a pair of snapshots before and after each
   run of <code class="command">zypper</code> and YaST. Snapper also lets you restore
   system files that have been accidentally deleted or modified. Timeline
   snapshots for the root partition need to be enabled for this
   purpose—see
   <a class="xref" href="#sec.snapper.setup.customize.auto_snapshots" title="7.1.3.1. Disabling/Enabling Snapshots">Section 7.1.3.1, “Disabling/Enabling Snapshots”</a> for details.
  </p><p>
   By default, automatic snapshots as described above are configured for the
   root partition and its subvolumes. To make snapshots available for other
   partitions such as <code class="filename">/home</code> for example, you can create
   custom configurations.
  </p><div id="idm139698752340400" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Undoing Changes Compared to Rollback</h6><p>
    When working with snapshots to restore data, it is important to know that
    there are two fundamentally different scenarios Snapper can handle:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752338768"><span class="term ">Undoing Changes</span></dt><dd><p>
       When undoing changes as described in the following, two snapshots are
       being compared and the changes between these two snapshots are made
       undone. Using this method also allows to explicitly select the files
       that should be restored.
      </p></dd><dt id="idm139698752336720"><span class="term ">Rollback</span></dt><dd><p>
       When doing rollbacks as described in
       <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a>, the system is reset to the
       state at which the snapshot was taken.
      </p></dd></dl></div><p>
    When undoing changes, it is also possible to compare a snapshot against the
    current system. When restoring <span class="emphasis"><em>all</em></span> files from such a
    comparison, this will have the same result as doing a rollback. However,
    using the method described in <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a>
    for rollbacks should be preferred, since it is faster and allows you to
    review the system before doing the rollback.
   </p></div><div id="idm139698752332144" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Data Consistency</h6><p>
    There is no mechanism to ensure data consistency when creating a snapshot.
    Whenever a file (for example, a database) is written at the same time as
    the snapshot is being created, it will result in a corrupted or partly written
    file. Restoring such a file will cause problems. Furthermore, some system
    files such as <code class="filename">/etc/mtab</code> must never be restored.
    Therefore it is strongly recommended to <span class="emphasis"><em>always</em></span> closely
    review the list of changed files and their diffs. Only restore files that
    really belong to the action you want to revert.
   </p></div><div class="sect2 " id="sec.snapper.undo.yast"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.undo.yast"><span class="number">7.2.1 </span><span class="name">Undoing YaST and Zypper Changes</span> <a title="Permalink" class="permalink" href="#sec.snapper.undo.yast">#</a></h3></div></div></div><p>
    If you set up the root partition with <code class="literal">Btrfs</code> during the
    installation, Snapper—preconfigured for doing rollbacks of YaST or
    Zypper changes—will automatically be installed. Every time you start
    a YaST module or a Zypper transaction, two snapshots are created: a
    <span class="quote">“<span class="quote">pre-snapshot</span>”</span> capturing the state of the file system before
    the start of the module and a <span class="quote">“<span class="quote">post-snapshot</span>”</span> after the module
    has been finished.
   </p><p>
    Using the YaST Snapper module or the <code class="command">snapper</code> command
    line tool, you can undo the changes made by YaST/Zypper by restoring
    files from the <span class="quote">“<span class="quote">pre-snapshot</span>”</span>. Comparing two snapshots the
    tools also allow you to see which files have been changed. You can also
    display the differences between two versions of a file (diff).
   </p><div class="procedure " id="proc.snapper.undo.yast"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 7.1: </span><span class="name">Undoing Changes Using the YaST <span class="guimenu">Snapper</span> Module </span><a title="Permalink" class="permalink" href="#proc.snapper.undo.yast">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start the <span class="guimenu">Snapper</span> module from the
      <span class="guimenu">Miscellaneous</span> section in YaST or by entering
      <code class="command">yast2 snapper</code>.
     </p></li><li class="step "><p>
      Make sure <span class="guimenu">Current Configuration</span> is set to
      <span class="guimenu">root</span>. This is always the case unless you have manually
      added own Snapper configurations.
     </p></li><li class="step "><p>
      Choose a pair of pre- and post-snapshots from the list. Both, YaST and
      Zypper snapshot pairs are of the type <span class="guimenu">Pre &amp; Post</span>.
      YaST snapshots are labeled as <code class="literal">zypp(y2base)</code> in the
      <span class="guimenu">Description column</span>; Zypper snapshots are labeled
      <code class="literal">zypp(zypper)</code>.
     </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/snapper_yast2_list.png"><img src="images/snapper_yast2_list.png" width="" /></a></div></div></li><li class="step "><p>
      Click <span class="guimenu">Show Changes</span> to open the list of files that
      differ between the two snapshots.
     </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/snapper_yast2_changes.png"><img src="images/snapper_yast2_changes.png" width="" /></a></div></div></li><li class="step "><p>
      Review the list of files. To display a <span class="quote">“<span class="quote">diff</span>”</span> between the
      pre- and post-version of a file, select it from the list.
     </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/snapper_yast2_diff.png"><img src="images/snapper_yast2_diff.png" width="" /></a></div></div></li><li class="step "><p>
      To restore one or more files, select the relevant files or directories by
      activating the respective check box. Click <span class="guimenu">Restore
      Selected</span> and confirm the action by clicking
      <span class="guimenu">Yes</span>.
     </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/snapper_yast2_restore.png"><img src="images/snapper_yast2_restore.png" width="" /></a></div></div><p>
      To restore a single file, activate its diff view by clicking its name.
      Click <span class="guimenu">Restore From First</span> and confirm your choice with
      <span class="guimenu">Yes</span>.
     </p></li></ol></div></div><div class="procedure " id="proc.snapper.yast.cmdline"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 7.2: </span><span class="name">Undoing Changes Using the <code class="command">snapper</code> Command </span><a title="Permalink" class="permalink" href="#proc.snapper.yast.cmdline">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Get a list of YaST and Zypper snapshots by running <code class="command">snapper
      list -t pre-post</code>. YaST snapshots are labeled
      as <code class="literal">yast <em class="replaceable ">MODULE_NAME</em></code> in the
      <span class="guimenu">Description column</span>; Zypper snapshots are labeled
      <code class="literal">zypp(zypper)</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper list -t pre-post
Pre # | Post # | Pre Date                      | Post Date                     | Description
------+--------+-------------------------------+-------------------------------+--------------
311   | 312    | Tue 06 May 2014 14:05:46 CEST | Tue 06 May 2014 14:05:52 CEST | zypp(y2base)
340   | 341    | Wed 07 May 2014 16:15:10 CEST | Wed 07 May 2014 16:15:16 CEST | zypp(zypper)
342   | 343    | Wed 07 May 2014 16:20:38 CEST | Wed 07 May 2014 16:20:42 CEST | zypp(y2base)
344   | 345    | Wed 07 May 2014 16:21:23 CEST | Wed 07 May 2014 16:21:24 CEST | zypp(zypper)
346   | 347    | Wed 07 May 2014 16:41:06 CEST | Wed 07 May 2014 16:41:10 CEST | zypp(y2base)
348   | 349    | Wed 07 May 2014 16:44:50 CEST | Wed 07 May 2014 16:44:53 CEST | zypp(y2base)
350   | 351    | Wed 07 May 2014 16:46:27 CEST | Wed 07 May 2014 16:46:38 CEST | zypp(y2base)</pre></div></li><li class="step "><p>
      Get a list of changed files for a snapshot pair with <code class="command">snapper
      status</code>
      <em class="replaceable ">PRE</em>..<em class="replaceable ">POST</em>. Files
      with content changes are marked with <span class="guimenu">c</span>, files that
      have been added are marked with <span class="guimenu">+</span> and deleted files
      are marked with <span class="guimenu">-</span>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper status 350..351
+..... /usr/share/doc/packages/mikachan-fonts
+..... /usr/share/doc/packages/mikachan-fonts/COPYING
+..... /usr/share/doc/packages/mikachan-fonts/dl.html
c..... /usr/share/fonts/truetype/fonts.dir
c..... /usr/share/fonts/truetype/fonts.scale
+..... /usr/share/fonts/truetype/みかちゃん-p.ttf
+..... /usr/share/fonts/truetype/みかちゃん-pb.ttf
+..... /usr/share/fonts/truetype/みかちゃん-ps.ttf
+..... /usr/share/fonts/truetype/みかちゃん.ttf
c..... /var/cache/fontconfig/7ef2298fde41cc6eeb7af42e48b7d293-x86_64.cache-4
c..... /var/lib/rpm/Basenames
c..... /var/lib/rpm/Dirnames
c..... /var/lib/rpm/Group
c..... /var/lib/rpm/Installtid
c..... /var/lib/rpm/Name
c..... /var/lib/rpm/Packages
c..... /var/lib/rpm/Providename
c..... /var/lib/rpm/Requirename
c..... /var/lib/rpm/Sha1header
c..... /var/lib/rpm/Sigmd5</pre></div></li><li class="step "><p>
      To display the diff for a certain file, run <code class="command">snapper
      diff</code>
      <em class="replaceable ">PRE</em>..<em class="replaceable ">POST</em>
      <em class="replaceable ">FILENAME</em>. If you do not specify
      <em class="replaceable ">FILENAME</em>, a diff for all files will be
      displayed.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper diff 350..351 /usr/share/fonts/truetype/fonts.scale
--- /.snapshots/350/snapshot/usr/share/fonts/truetype/fonts.scale       2014-04-23 15:58:57.000000000 +0200
+++ /.snapshots/351/snapshot/usr/share/fonts/truetype/fonts.scale       2014-05-07 16:46:31.000000000 +0200
@@ -1,4 +1,4 @@
-1174
+1486
 ds=y:ai=0.2:luximr.ttf -b&amp;h-luxi mono-bold-i-normal--0-0-0-0-c-0-iso10646-1
 ds=y:ai=0.2:luximr.ttf -b&amp;h-luxi mono-bold-i-normal--0-0-0-0-c-0-iso8859-1
[...]</pre></div></li><li class="step "><p>
      To restore one or more files run <code class="command">snapper -v undochange</code>
      <em class="replaceable ">PRE</em>..<em class="replaceable ">POST</em>
      <em class="replaceable ">FILENAMES</em>. If you do not specify a
      <em class="replaceable ">FILENAMES</em>, all changed files will be restored.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -v undochange 350..351
     create:0 modify:13 delete:7
     undoing change...
     deleting /usr/share/doc/packages/mikachan-fonts
     deleting /usr/share/doc/packages/mikachan-fonts/COPYING
     deleting /usr/share/doc/packages/mikachan-fonts/dl.html
     deleting /usr/share/fonts/truetype/みかちゃん-p.ttf
     deleting /usr/share/fonts/truetype/みかちゃん-pb.ttf
     deleting /usr/share/fonts/truetype/みかちゃん-ps.ttf
     deleting /usr/share/fonts/truetype/みかちゃん.ttf
     modifying /usr/share/fonts/truetype/fonts.dir
     modifying /usr/share/fonts/truetype/fonts.scale
     modifying /var/cache/fontconfig/7ef2298fde41cc6eeb7af42e48b7d293-x86_64.cache-4
     modifying /var/lib/rpm/Basenames
     modifying /var/lib/rpm/Dirnames
     modifying /var/lib/rpm/Group
     modifying /var/lib/rpm/Installtid
     modifying /var/lib/rpm/Name
     modifying /var/lib/rpm/Packages
     modifying /var/lib/rpm/Providename
     modifying /var/lib/rpm/Requirename
     modifying /var/lib/rpm/Sha1header
     modifying /var/lib/rpm/Sigmd5
     undoing change done</pre></div></li></ol></div></div><div id="idm139698752268608" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Reverting User Additions</h6><p>
     Reverting user additions via undoing changes with Snapper is not
     recommended. Since certain directories are excluded from snapshots, files
     belonging to these users will remain in the file system. If a user with
     the same user ID as a deleted user is created, this user will inherit the
     files. Therefore it is strongly recommended to use the YaST
     <span class="guimenu">User and Group Management</span> tool to remove users.
    </p></div></div><div class="sect2 " id="sec.snapper.undo.delete_file"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.undo.delete_file"><span class="number">7.2.2 </span><span class="name">Using Snapper to Restore Files</span> <a title="Permalink" class="permalink" href="#sec.snapper.undo.delete_file">#</a></h3></div></div></div><p>
    Apart from the installation and administration snapshots, Snapper creates
    timeline snapshots. You can use these backup snapshots to restore files
    that have accidentally been deleted or to restore a previous version of a
    file. By using Snapper's diff feature you can also find out which
    modifications have been made at a certain point of time.
   </p><p>
    Being able to restore files is especially interesting for data, which may
    reside on subvolumes or partitions for which snapshots are not taken by
    default. To be able to restore files from home directories, for example,
    create a separate Snapper configuration for <code class="filename">/home</code>
    doing automatic timeline snapshots. See
    <a class="xref" href="#sec.snapper.config" title="7.4. Creating and Modifying Snapper Configurations">Section 7.4, “Creating and Modifying Snapper Configurations”</a> for instructions.
   </p><div id="idm139698752262528" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Restoring Files Compared to Rollback</h6><p>
     Snapshots taken from the root file system (defined by Snapper's root
     configuration), can be used to do a system rollback. The recommended way
     to do such a rollback is to boot from the snapshot and then perform the
     rollback. See <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a> for details.
    </p><p>
     Performing a rollback would also be possible by restoring all files from a
     root file system snapshot as described below. However, this is not
     recommended. You may restore single files, for example a configuration
     file from the <code class="systemitem">/etc</code> directory, but not the
     complete list of files from the snapshot.
    </p><p>
     This restriction only affects snapshots taken from the root file system!
    </p></div><div class="procedure " id="proc.snapper.restore.yast"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 7.3: </span><span class="name">Restoring Files Using the YaST <span class="guimenu">Snapper</span> Module </span><a title="Permalink" class="permalink" href="#proc.snapper.restore.yast">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start the <span class="guimenu">Snapper</span> module from the
      <span class="guimenu">Miscellaneous</span> section in YaST or by entering
      <code class="command">yast2 snapper</code>.
     </p></li><li class="step "><p>
      Choose the <span class="guimenu">Current Configuration</span> from which to choose
      a snapshot.
     </p></li><li class="step "><p>
      Select a timeline snapshot from which to restore a file and choose
      <span class="guimenu">Show Changes</span>. Timeline snapshots are of the type
      <span class="guimenu">Single</span> with a description value of
      <span class="guimenu">timeline</span>.
     </p></li><li class="step "><p>
      Select a file from the text box by clicking the file name. The difference
      between the snapshot version and the current system is shown. Activate
      the check box to select the file for restore. Do so for all files you
      want to restore.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Restore Selected</span> and confirm the action by
      clicking <span class="guimenu">Yes</span>.
     </p></li></ol></div></div><div class="procedure " id="proc.snapper.restore.cmdl"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 7.4: </span><span class="name">Restoring Files Using the <code class="command">snapper</code> Command </span><a title="Permalink" class="permalink" href="#proc.snapper.restore.cmdl">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Get a list of timeline snapshots for a specific configuration by running
      the following command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> list -t single | grep timeline</pre></div><p>
      <em class="replaceable ">CONFIG</em> needs to be replaced by an existing
      Snapper configuration. Use <code class="command">snapper list-configs</code> to
      display a list.
     </p></li><li class="step "><p>
      Get a list of changed files for a given snapshot by running the following
      command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> status <em class="replaceable ">SNAPSHOT_ID</em>..0</pre></div><p>
      Replace <em class="replaceable ">SNAPSHOT_ID</em> by the ID for the snapshot
      from which you want to restore the file(s).
     </p></li><li class="step "><p>
      Optionally list the differences between the current file version and the
      one from the snapshot by running
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> diff <em class="replaceable ">SNAPSHOT_ID</em>..0 <em class="replaceable ">FILE NAME</em></pre></div><p>
      If you do not specify <em class="replaceable ">&lt;FILE NAME&gt;</em>, the
      difference for all files are shown.
     </p></li><li class="step "><p>
      To restore one or more files, run
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> -v undochange <em class="replaceable ">SNAPSHOT_ID</em>..0 <em class="replaceable ">FILENAME1</em> <em class="replaceable ">FILENAME2</em></pre></div><p>
      If you do not specify file names, all changed files will be restored.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.snapper.snapshot-boot"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.snapshot-boot"><span class="number">7.3 </span><span class="name">System Rollback by Booting from Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.snapshot-boot">#</a></h2></div></div></div><p>
   The GRUB 2 version included on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> can boot from Btrfs snapshots.
   Together with Snapper's rollback feature, this allows to recover a
   misconfigured system. Only snapshots created for the default Snapper
   configuration (<code class="literal">root</code>) are bootable.
  </p><div id="idm139698752226336" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Supported Configuration</h6><p>

    As of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> <span class="productnumber"><span class="phrase">15</span></span> system rollbacks are only supported if
    the default subvolume configuration of the root partition has not been
    changed.
   </p></div><p>
   When booting a snapshot, the parts of the file system included in the
   snapshot are mounted read-only; all other file systems and parts that are
   excluded from snapshots are mounted read-write and can be modified.
  </p><div id="idm139698752221968" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Undoing Changes Compared to Rollback</h6><p>
    When working with snapshots to restore data, it is important to know that
    there are two fundamentally different scenarios Snapper can handle:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752220336"><span class="term ">Undoing Changes</span></dt><dd><p>
       When undoing changes as described in <a class="xref" href="#sec.snapper.undo" title="7.2. Using Snapper to Undo Changes">Section 7.2, “Using Snapper to Undo Changes”</a>,
       two snapshots are compared and the changes between these two snapshots
       are reverted. Using this method also allows to explicitly exclude
       selected files from being restored.
      </p></dd><dt id="idm139698752217760"><span class="term ">Rollback</span></dt><dd><p>
       When doing rollbacks as described in the following, the system is reset
       to the state at which the snapshot was taken.
      </p></dd></dl></div></div><p>
   To do a rollback from a bootable snapshot, the following requirements must
   be met. When doing a default installation, the system is set up accordingly.
  </p><div class="itemizedlist "><div class="itemizedlist-title-wrap"><h6 class="itemizedlist-title"><span class="name">Requirements for a Rollback from a Bootable Snapshot </span><a title="Permalink" class="permalink" href="#idm139698752214928">#</a></h6></div><ul class="itemizedlist"><li class="listitem "><p>
     The root file system needs to be Btrfs. Booting from LVM volume snapshots
     is not supported.
    </p></li><li class="listitem "><p>
     The root file system needs to be on a single device, a single partition
     and a single subvolume. Directories that are excluded from snapshots such
     as <code class="filename">/srv</code> (see <a class="xref" href="#snapper.dir-excludes" title="7.1.2. Directories That Are Excluded from Snapshots">Section 7.1.2, “Directories That Are Excluded from Snapshots”</a>
     for a full list) may reside on separate partitions.
    </p></li><li class="listitem "><p>
     The system needs to be bootable via the installed boot loader.
    </p></li></ul></div><p>
   To perform a rollback from a bootable snapshot, do as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Boot the system. In the boot menu choose <span class="guimenu">Bootable
     snapshots</span> and select the snapshot you want to boot. The list of
     snapshots is listed by date—the most recent snapshot is listed
     first.
    </p></li><li class="step "><p>
     Log in to the system. Carefully check whether everything works as
     expected. Note that you cannot write to any directory that is part of the
     snapshot. Data you write to other directories will
     <span class="emphasis"><em>not</em></span> get lost, regardless of what you do next.
    </p></li><li class="step "><p>
     Depending on whether you want to perform the rollback or not, choose your
     next step:
    </p><ol type="a" class="substeps "><li class="step "><p>
       If the system is in a state where you do not want to do a rollback,
       reboot to boot into the current system state. You can then choose a different
       snapshot, or start the rescue system.
      </p></li><li class="step "><p>
       To perform the rollback, run
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper rollback</pre></div><p>
       and reboot afterward. On the boot screen, choose the default boot entry
       to reboot into the reinstated system. A snapshot of the file system status
       before the rollback is created. The default subvolume for root will
       be replaced with a fresh read-write snapshot.
       For details, see <a class="xref" href="#sec.snapper.snapshot-boot.rollback" title="7.3.1. Snapshots after Rollback">Section 7.3.1, “Snapshots after Rollback”</a>.
       </p><p>
        It is useful to add a description for the snapshot with the <code class="option">-d</code> option.
        For example:
       </p><div class="verbatim-wrap"><pre class="screen">New file system root since rollback on <em class="replaceable ">DATE</em> <em class="replaceable ">TIME</em></pre></div></li></ol></li></ol></div></div><div id="idm139698752197168" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Rolling Back to a Specific Installation State</h6><p>
    If snapshots are not disabled during installation, an initial bootable
    snapshot is created at the end of the initial system installation. You can
    go back to that state at any time by booting this snapshot. The snapshot
    can be identified by the description <code class="literal">after installation</code>.
   </p><p>
    A bootable snapshot is also created when starting a system upgrade to a
    service pack or a new major release (provided snapshots are not disabled).
   </p></div><div class="sect2 " id="sec.snapper.snapshot-boot.rollback"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.snapshot-boot.rollback"><span class="number">7.3.1 </span><span class="name">Snapshots after Rollback</span> <a title="Permalink" class="permalink" href="#sec.snapper.snapshot-boot.rollback">#</a></h3></div></div></div><p>
    Before a rollback is performed, a snapshot of the running file system
    is created. The description references the ID of the snapshot that
    was restored in the rollback.
   </p><p>
    Snapshots created by rollbacks receive the value <code class="literal">number</code>
    for the <code class="literal">Cleanup</code> attribute. The rollback snapshots are
    therefore automatically deleted when the set number of snapshots is reached.
    Refer to <a class="xref" href="#sec.snapper.clean-up" title="7.6. Automatic Snapshot Clean-Up">Section 7.6, “Automatic Snapshot Clean-Up”</a> for details.
    If the snapshot contains important data, extract the data from the snapshot
    before it is removed.
   </p><div class="sect3 " id="sec.snapper.snapshot-boot.rollback.example"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.snapshot-boot.rollback.example"><span class="number">7.3.1.1 </span><span class="name">Example of Rollback Snapshot</span> <a title="Permalink" class="permalink" href="#sec.snapper.snapshot-boot.rollback.example">#</a></h4></div></div></div><p>
     For example, after a fresh installation the following snapshots are
     available on the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">snapper</code> --iso list
Type   | # |     | Cleanup | Description           | Userdata
-------+---+ ... +---------+-----------------------+--------------
single | 0 |     |         | current               |
single | 1 |     |         | first root filesystem |
single | 2 |     | number  | after installation    | important=yes</pre></div><p>
     After running <code class="command">sudo snapper rollback</code> snapshot
     <code class="literal">3</code> is created and contains the state of the system
     before the rollback was executed. Snapshot <code class="literal">4</code> is
     the new default Btrfs subvolume and thus the system after a reboot.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">snapper</code> --iso list
Type   | # |     | Cleanup | Description           | Userdata
-------+---+ ... +---------+-----------------------+--------------
single | 0 |     |         | current               |
single | 1 |     | number  | first root filesystem |
single | 2 |     | number  | after installation    | important=yes
single | 3 |     | number  | rollback backup of #1 | important=yes
single | 4 |     |         |                       |</pre></div></div></div><div class="sect2 " id="sec.snapper.snapshot-boot.identify"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.snapshot-boot.identify"><span class="number">7.3.2 </span><span class="name">Accessing and Identifying Snapshot Boot Entries</span> <a title="Permalink" class="permalink" href="#sec.snapper.snapshot-boot.identify">#</a></h3></div></div></div><p>
    To boot from a snapshot, reboot your machine and choose <span class="guimenu">Start
    Bootloader from a read-only snapshot</span>. A screen listing all
    bootable snapshots opens. The most recent snapshot is listed first, the
    oldest last. Use the keys <span class="keycap">↓</span> and
    <span class="keycap">↑</span> to navigate and press <span class="keycap">Enter</span> to
    activate the selected snapshot. Activating a snapshot from the boot menu
    does not reboot the machine immediately, but rather opens the boot loader
    of the selected snapshot.
   </p><div class="figure" id="fig.snapper.snapshot-boot.identify"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/boot_snapshots.png"><img src="images/boot_snapshots.png" width="" alt="Boot Loader: Snapshots" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 7.1: </span><span class="name">Boot Loader: Snapshots </span><a title="Permalink" class="permalink" href="#fig.snapper.snapshot-boot.identify">#</a></h6></div></div><p>
    Each snapshot entry in the boot loader follows a naming scheme which makes
    it possible to identify it easily:
   </p><div class="verbatim-wrap"><pre class="screen">[*]<span id="snapper.boot.important"></span><span class="callout">1</span><em class="replaceable ">OS</em><span id="snapper.boot.os"></span><span class="callout">2</span> (<em class="replaceable ">KERNEL</em><span id="snapper.boot.kernel"></span><span class="callout">3</span>,<em class="replaceable ">DATE</em><span id="snapper.boot.date"></span><span class="callout">4</span>T<em class="replaceable ">TIME</em><span id="snapper.boot.time"></span><span class="callout">5</span>,<em class="replaceable ">DESCRIPTION</em><span id="snapper.boot.description"></span><span class="callout">6</span>)</pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.boot.important"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      If the snapshot was marked <code class="literal">important</code>, the entry is
      marked with a <code class="literal">*</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.boot.os"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Operating system label.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.boot.date"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      Date in the format <code class="literal">YYYY-MM-DD</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.boot.time"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
      Time in the format <code class="literal">HH:MM</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.boot.description"><span class="callout">6</span></a> </p></td><td valign="top" align="left"><p>
      This field contains a description of the snapshot. In case of a manually
      created snapshot this is the string created with the option
      <code class="option">--description</code> or a custom string (see
      <a class="xref" href="#tip.snapper.snapshot-boot.custom_descr" title="Tip: Setting a Custom Description for Boot Loader Snapshot Entries">Tip: Setting a Custom Description for Boot Loader Snapshot Entries</a>). In case
      of an automatically created snapshot, it is the tool that was called, for
      example <code class="literal">zypp(zypper)</code> or
      <code class="literal">yast_sw_single</code>. Long descriptions may be truncated,
      depending on the size of the boot screen.
     </p></td></tr></table></div><div id="tip.snapper.snapshot-boot.custom_descr" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Setting a Custom Description for Boot Loader Snapshot Entries</h6><p>
     It is possible to replace the default string in the description field of a
     snapshot with a custom string. This is for example useful if an
     automatically created description is not sufficient, or a user-provided
     description is too long. To set a custom string
     <em class="replaceable ">STRING</em> for snapshot
     <em class="replaceable ">NUMBER</em>, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper modify --userdata "bootloader=<em class="replaceable ">STRING</em>" <em class="replaceable ">NUMBER</em></pre></div><p>
     The description should be no longer than 25 characters—everything
     that exceeds this size will not be readable on the boot screen.
    </p></div></div><div class="sect2 " id="sec.snapper.snapshot-boot.limits"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.snapshot-boot.limits"><span class="number">7.3.3 </span><span class="name">Limitations</span> <a title="Permalink" class="permalink" href="#sec.snapper.snapshot-boot.limits">#</a></h3></div></div></div><p>
    A <span class="emphasis"><em>complete</em></span> system rollback, restoring the complete
    system to the identical state as it was in when a snapshot was taken, is
    not possible.
   </p><div class="sect3 " id="sec.snapper.limits.snapshot-boot.excludes"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.limits.snapshot-boot.excludes"><span class="number">7.3.3.1 </span><span class="name">Directories Excluded from Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.limits.snapshot-boot.excludes">#</a></h4></div></div></div><p>
     Root file system snapshots do not contain all directories. See
     <a class="xref" href="#snapper.dir-excludes" title="7.1.2. Directories That Are Excluded from Snapshots">Section 7.1.2, “Directories That Are Excluded from Snapshots”</a> for details and reasons. As a
     general consequence, data from these directories is not restored,
     resulting in the following limitations.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752145856"><span class="term ">
       Add-ons and Third Party Software may be Unusable after a Rollback
      </span></dt><dd><p>
        Applications and add-ons installing data in subvolumes excluded from
        the snapshot, such as <code class="filename">/opt</code>, may not work after a
        rollback, if others parts of the application data are also installed on
        subvolumes included in the snapshot. Re-install the application or the
        add-on to solve this problem.
       </p></dd><dt id="idm139698752143248"><span class="term ">File Access Problems</span></dt><dd><p>
        If an application had changed file permissions and/or ownership in
        between snapshot and current system, the application may not be able to
        access these files. Reset permissions and/or ownership for the affected
        files after the rollback.
       </p></dd><dt id="idm139698752141200"><span class="term ">Incompatible Data Formats</span></dt><dd><p>
        If a service or an application has established a new data format in
        between snapshot and current system, the application may not be able to
        read the affected data files after a rollback.
       </p></dd><dt id="idm139698752139184"><span class="term ">Subvolumes with a Mixture of Code and Data</span></dt><dd><p>
        Subvolumes like <code class="filename">/srv</code> may contain a mixture of code
        and data. A rollback may result in non-functional code. A downgrade of
        the PHP version, for example, may result in broken PHP scripts for the
        Web server.
       </p></dd><dt id="idm139698752136752"><span class="term ">User Data</span></dt><dd><p>
        If a rollback removes users from the system, data that is owned by
        these users in directories excluded from the snapshot, is not removed.
        If a user with the same user ID is created, this user will inherit the
        files. Use a tool like <code class="command">find</code> to locate and remove
        orphaned files.
       </p></dd></dl></div></div><div class="sect3 " id="sec.snapper.limits.snapshot-boot.grub"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.limits.snapshot-boot.grub"><span class="number">7.3.3.2 </span><span class="name">No Rollback of Boot Loader Data</span> <a title="Permalink" class="permalink" href="#sec.snapper.limits.snapshot-boot.grub">#</a></h4></div></div></div><p>
     A rollback of the boot loader is not possible, since all
     <span class="quote">“<span class="quote">stages</span>”</span> of the boot loader must fit together. This cannot be
     guaranteed when doing rollbacks of <code class="filename">/boot</code>.
    </p></div></div></div><div class="sect1 " id="sec.snapper.config"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.config"><span class="number">7.4 </span><span class="name">Creating and Modifying Snapper Configurations</span> <a title="Permalink" class="permalink" href="#sec.snapper.config">#</a></h2></div></div></div><p>
   The way Snapper behaves is defined in a configuration file that is specific
   for each partition or <code class="literal">Btrfs</code> subvolume. These
   configuration files reside under <code class="filename">/etc/snapper/configs/</code>.
  </p><p>
   In case the root file system is big enough (approximately 12 GB), snapshots
   are automatically enabled for the root file system <code class="filename">/</code>
   upon installation. The corresponding default configuration is named
   <code class="filename">root</code>. It creates and manages the YaST and Zypper
   snapshot. See <a class="xref" href="#sec.snapper.config.modify.values" title="7.4.1.1. Configuration Data">Section 7.4.1.1, “Configuration Data”</a> for a list
   of the default values.
  </p><div id="idm139698752125952" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Minimum Root File System Size for Enabling Snapshots</h6><p>
    As explained in <a class="xref" href="#sec.snapper.setup" title="7.1. Default Setup">Section 7.1, “Default Setup”</a>, enabling snapshots
    requires additional free space in the root file system. The amount depends
    on the amount of packages installed and the amount of changes made to the
    volume that is included in snapshots. The snapshot frequency and the number
    of snapshots that get archived also matter.
   </p><p>
    There is a minimum root file system size that is required in order to
    automatically enable snapshots during the installation. As of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>
    12 SP3 this size is approximately 12 GB. This value may change in the
    future, depending on architecture and the size of the base system. It
    depends on the values for the following tags in the file
    <code class="filename">/control.xml</code> from the installation media:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;root_base_size&gt;
&lt;btrfs_increase_percentage&gt;</pre></div><p>
    It is calculated with the following formula: <em class="replaceable ">ROOT_BASE_SIZE</em> * (1 + <em class="replaceable ">BTRFS_INCREASE_PERCENTAGE</em>/100)
   </p><p>
    Keep in mind that this value is a minimum size. Consider using more space
    for the root file system. As a rule of thumb, double the size you would use
    when not having enabled snapshots.
   </p></div><p>
   You may create your own configurations for other partitions formatted with
   <code class="literal">Btrfs</code> or existing subvolumes on a
   <code class="literal">Btrfs</code> partition. In the following example we will set up
   a Snapper configuration for backing up the Web server data residing on a
   separate, <code class="literal">Btrfs</code>-formatted partition mounted at
   <code class="filename">/srv/www</code>.
  </p><p>
   After a configuration has been created, you can either use
   <code class="command">snapper</code> itself or the YaST <span class="guimenu">Snapper</span>
   module to restore files from these snapshots. In YaST you need to select
   your <span class="guimenu">Current Configuration</span>, while you need to specify
   your configuration for <code class="command">snapper</code> with the global switch
   <code class="option">-c</code> (for example, <code class="command">snapper -c myconfig
   list</code>).
  </p><p>
   To create a new Snapper configuration, run <code class="command">snapper
   create-config</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c www-data<span id="snapper.create.name"></span><span class="callout">1</span> create-config /srv/www<span id="snapper.create.volume"></span><span class="callout">2</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.create.name"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
     Name of configuration file.
    </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#snapper.create.volume"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
     Mount point of the partition or <code class="literal">Btrfs</code> subvolume on
     which to take snapshots.
    </p></td></tr></table></div><p>
   This command will create a new configuration file
   <code class="filename">/etc/snapper/configs/www-data</code> with reasonable default
   values (taken from
   <code class="filename">/etc/snapper/config-templates/default</code>). Refer to
   <a class="xref" href="#sec.snapper.config.modify" title="7.4.1. Managing Existing Configurations">Section 7.4.1, “Managing Existing Configurations”</a> for instructions on how to
   adjust these defaults.
  </p><div id="idm139698752104512" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Configuration Defaults</h6><p>
    Default values for a new configuration are taken from
    <code class="filename">/etc/snapper/config-templates/default</code>. To use your own
    set of defaults, create a copy of this file in the same directory and
    adjust it to your needs. To use it, specify the <code class="option">-t</code> option
    with the create-config command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c www-data create-config -t <em class="replaceable ">MY_DEFAULTS</em> /srv/www</pre></div></div><div class="sect2 " id="sec.snapper.config.modify"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.config.modify"><span class="number">7.4.1 </span><span class="name">Managing Existing Configurations</span> <a title="Permalink" class="permalink" href="#sec.snapper.config.modify">#</a></h3></div></div></div><p>
    The <code class="command">snapper</code> offers several subcommands for managing
    existing configurations. You can list, show, delete and modify them:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752098064"><span class="term ">List Configurations</span></dt><dd><p>
       Use the command <code class="command">snapper list-configs</code> to get all
       existing configurations:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper list-configs
Config | Subvolume
-------+----------
root   | /
usr    | /usr
local  | /local</pre></div></dd><dt id="idm139698752094672"><span class="term ">Show a Configuration</span></dt><dd><p>
       Use the subcommand <code class="command">snapper -c
       <em class="replaceable ">CONFIG</em> get-config</code> to display the
       specified configuration. <em class="replaceable ">Config</em> needs to be
       replaced by a configuration name shown by <code class="command">snapper
       list-configs</code>. See
       <a class="xref" href="#sec.snapper.config.modify.values" title="7.4.1.1. Configuration Data">Section 7.4.1.1, “Configuration Data”</a> for more information
       on the configuration options.
      </p><p>
       To display the default configuration run
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c root get-config</pre></div></dd><dt id="idm139698752088832"><span class="term ">Modify a Configuration</span></dt><dd><p>
       Use the subcommand <code class="command">snapper -c <em class="replaceable ">CONFIG</em>
       set-config
       <em class="replaceable ">OPTION</em>=<em class="replaceable ">VALUE</em></code>
       to modify an option in the specified configuration.
       <em class="replaceable ">Config</em> needs to be replaced by a
       configuration name shown by <code class="command">snapper list-configs</code>.
       Possible values for <em class="replaceable ">OPTION</em> and
       <em class="replaceable ">VALUE</em> are listed in <a class="xref" href="#sec.snapper.config.modify.values" title="7.4.1.1. Configuration Data">Section 7.4.1.1, “Configuration Data”</a>.
      </p></dd><dt id="idm139698752082896"><span class="term ">Delete a Configuration</span></dt><dd><p>
       Use the subcommand <code class="command">snapper -c
       <em class="replaceable ">CONFIG</em> delete-config</code> to delete a
       configuration. <em class="replaceable ">Config</em> needs to be replaced by
       a configuration name shown by <code class="command">snapper list-configs</code>.
      </p></dd></dl></div><div class="sect3 " id="sec.snapper.config.modify.values"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.config.modify.values"><span class="number">7.4.1.1 </span><span class="name">Configuration Data</span> <a title="Permalink" class="permalink" href="#sec.snapper.config.modify.values">#</a></h4></div></div></div><p>
     Each configuration contains a list of options that can be modified from
     the command line. The following list provides details for each option. To
     change a value, run <code class="command">snapper -c <em class="replaceable ">CONFIG</em>
     set-config
     "<em class="replaceable ">KEY</em>=<em class="replaceable ">VALUE</em>"</code>.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752075200"><span class="term "><code class="literal">ALLOW_GROUPS</code>,
      <code class="literal">ALLOW_USERS</code>
      </span></dt><dd><p>
        Granting permissions to use snapshots to regular users. See
        <a class="xref" href="#sec.snapper.config.user" title="7.4.1.2. Using Snapper as Regular User">Section 7.4.1.2, “Using Snapper as Regular User”</a> for more information.
       </p><p>
        The default value is <code class="literal">""</code>.
       </p></dd><dt id="idm139698752071168"><span class="term "><code class="literal">BACKGROUND_COMPARISON</code>
      </span></dt><dd><p>
        Defines whether pre and post snapshots should be compared in the
        background after creation.
       </p><p>
        The default value is <code class="literal">"yes"</code>.
       </p></dd><dt id="idm139698752068080"><span class="term "><code class="literal">EMPTY_*</code>
      </span></dt><dd><p>
        Defines the clean-up algorithm for snapshots pairs with identical pre
        and post snapshots. See <a class="xref" href="#sec.snapper.clean-up.empty" title="7.6.3. Cleaning Up Snapshot Pairs That Do Not Differ">Section 7.6.3, “Cleaning Up Snapshot Pairs That Do Not Differ”</a>
        for details.
       </p></dd><dt id="idm139698752065312"><span class="term "><code class="literal">FSTYPE</code>
      </span></dt><dd><p>
        File system type of the partition. Do not change.
       </p><p>
        The default value is <code class="literal">"btrfs"</code>.
       </p></dd><dt id="idm139698752062272"><span class="term ">NUMBER_*</span></dt><dd><p>
        Defines the clean-up algorithm for installation and admin snapshots.
        See <a class="xref" href="#sec.snapper.clean-up.number" title="7.6.1. Cleaning Up Numbered Snapshots">Section 7.6.1, “Cleaning Up Numbered Snapshots”</a> for details.
       </p></dd><dt id="idm139698752059824"><span class="term "><code class="literal">QGROUP</code> / <code class="literal">SPACE_LIMIT</code>
      </span></dt><dd><p>
        Adds quota support to the clean-up algorithms. See
        <a class="xref" href="#sec.snapper.clean-up.quota" title="7.6.5. Adding Disk Quota Support">Section 7.6.5, “Adding Disk Quota Support”</a> for details.
       </p></dd><dt id="idm139698752056672"><span class="term "><code class="literal">SUBVOLUME</code>
      </span></dt><dd><p>
        Mount point of the partition or subvolume to snapshot. Do not change.
       </p><p>
        The default value is <code class="literal">"/"</code>.
       </p></dd><dt id="idm139698752053616"><span class="term "><code class="literal">SYNC_ACL</code>
      </span></dt><dd><p>
        If Snapper is used by regular users (see
        <a class="xref" href="#sec.snapper.config.user" title="7.4.1.2. Using Snapper as Regular User">Section 7.4.1.2, “Using Snapper as Regular User”</a>), the users must be able to
        access the <code class="filename">.snapshot</code> directories and to read files
        within them. If SYNC_ACL is set to <code class="literal">yes</code>, Snapper
        automatically makes them accessible using ACLs for users and groups
        from the ALLOW_USERS or ALLOW_GROUPS entries.
       </p><p>
        The default value is <code class="literal">"no"</code>.
       </p></dd><dt id="idm139698752048896"><span class="term "><code class="literal">TIMELINE_CREATE</code>
      </span></dt><dd><p>
        If set to <code class="literal">yes</code>, hourly snapshots are created. Valid
        values: <code class="literal">yes</code>, <code class="literal">no</code>.
       </p><p>
        The default value is <code class="literal">"no"</code>.
       </p></dd><dt id="idm139698752044528"><span class="term "><code class="literal">TIMELINE_CLEANUP</code> /
       <code class="literal">TIMELINE_LIMIT_*</code>
      </span></dt><dd><p>
        Defines the clean-up algorithm for timeline snapshots. See
        <a class="xref" href="#sec.snapper.clean-up.timeline" title="7.6.2. Cleaning Up Timeline Snapshots">Section 7.6.2, “Cleaning Up Timeline Snapshots”</a> for details.
       </p></dd></dl></div></div><div class="sect3 " id="sec.snapper.config.user"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.config.user"><span class="number">7.4.1.2 </span><span class="name">Using Snapper as Regular User</span> <a title="Permalink" class="permalink" href="#sec.snapper.config.user">#</a></h4></div></div></div><p>
     By default Snapper can only be used by <code class="systemitem">root</code>. However, there are
     cases in which certain groups or users need to be able to create snapshots
     or undo changes by reverting to a snapshot:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       Web site administrators who want to take snapshots of
       <code class="filename">/srv/www</code>
      </p></li><li class="listitem "><p>
       Users who want to take a snapshot of their home directory
      </p></li></ul></div><p>
     For these purposes Snapper configurations that grant permissions to users
     or/and groups can be created. The corresponding
     <code class="filename">.snapshots</code> directory needs to be readable and
     accessible by the specified users. The easiest way to achieve this is to
     set the SYNC_ACL option to <code class="literal">yes</code>.
    </p><div class="procedure " id="idm139698752033632"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 7.5: </span><span class="name">Enabling Regular Users to Use Snapper </span><a title="Permalink" class="permalink" href="#idm139698752033632">#</a></h6></div><div class="procedure-contents"><p>
      Note that all steps in this procedure need to be run by <code class="systemitem">root</code>.
     </p><ol class="procedure" type="1"><li class="step "><p>
       If not existing, create a Snapper configuration for the partition or
       subvolume on which the user should be able to use Snapper. Refer to
       <a class="xref" href="#sec.snapper.config" title="7.4. Creating and Modifying Snapper Configurations">Section 7.4, “Creating and Modifying Snapper Configurations”</a> for instructions. Example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper --config web_data create /srv/www</pre></div></li><li class="step "><p>
       The configuration file is created under
       <code class="filename">/etc/snapper/configs/<em class="replaceable ">CONFIG</em></code>,
       where CONFIG is the value you specified with
       <code class="option">-c/--config</code> in the previous step (for example
       <code class="filename">/etc/snapper/configs/web_data</code>). Adjust it according
       to your needs; see <a class="xref" href="#sec.snapper.config.modify" title="7.4.1. Managing Existing Configurations">Section 7.4.1, “Managing Existing Configurations”</a> for
       details.
      </p></li><li class="step "><p>
       Set values for <code class="envar">ALLOW_USERS</code> and/or
       <code class="envar">ALLOW_GROUPS</code> to grant permissions to users and/or groups,
       respectively. Multiple entries need to be separated by
       <span class="keycap">Space</span>. To grant permissions to the user
       <code class="systemitem">www_admin</code> for example, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c web_data set-config "ALLOW_USERS=www_admin" SYNC_ACL="yes"</pre></div></li><li class="step "><p>
       The given Snapper configuration can now be used by the specified user(s)
       and/or group(s). You can test it with the <code class="literal">list</code>
       command, for example:
      </p><div class="verbatim-wrap"><pre class="screen">www_admin:~ &gt; snapper -c web_data list</pre></div></li></ol></div></div></div></div></div><div class="sect1 " id="sec.snapper.manage"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.manage"><span class="number">7.5 </span><span class="name">Manually Creating and Managing Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage">#</a></h2></div></div></div><p>
   Snapper is not restricted to creating and managing snapshots automatically
   by configuration; you can also create snapshot pairs (<span class="quote">“<span class="quote">before and
   after</span>”</span>) or single snapshots manually using either the command-line
   tool or the YaST module.
  </p><p>
   All Snapper operations are carried out for an existing configuration (see
   <a class="xref" href="#sec.snapper.config" title="7.4. Creating and Modifying Snapper Configurations">Section 7.4, “Creating and Modifying Snapper Configurations”</a> for details). You can only take
   snapshots of partitions or volumes for which a configuration exists. By
   default the system configuration (<code class="literal">root</code>) is used. If you
   want to create or manage snapshots for your own configuration you need to
   explicitly choose it. Use the <span class="guimenu">Current Configuration</span>
   drop-down box in YaST or specify the <code class="option">-c</code> on the command
   line (<code class="command">snapper -c <em class="replaceable ">MYCONFIG</em>
   <em class="replaceable ">COMMAND</em></code>).
  </p><div class="sect2 " id="sec.snapper.manage.metadata"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.manage.metadata"><span class="number">7.5.1 </span><span class="name">Snapshot Metadata</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage.metadata">#</a></h3></div></div></div><p>
    Each snapshot consists of the snapshot itself and some metadata. When
    creating a snapshot you also need to specify the metadata. Modifying a
    snapshot means changing its metadata—you cannot modify its content.
    Use <code class="command">snapper list</code> to show existing snapshots and their
    metadata:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698752010096"><span class="term "><code class="command">snapper --config home list</code>
     </span></dt><dd><p>
       Lists snapshots for the configuration <code class="literal">home</code>. To list
       snapshots for the default configuration (root), use <code class="command">snapper -c
       root list</code> or <code class="command">snapper list</code>.
      </p></dd><dt id="idm139698752006608"><span class="term "><code class="command">snapper list -a</code>
     </span></dt><dd><p>
       Lists snapshots for all existing configurations.
      </p></dd><dt id="idm139698752004480"><span class="term "><code class="command">snapper list -t pre-post</code>
     </span></dt><dd><p>
       Lists all pre and post snapshot pairs for the default
       (<code class="literal">root</code>) configuration.
      </p></dd><dt id="idm139698752001888"><span class="term "><code class="command">snapper list -t single</code>
     </span></dt><dd><p>
       Lists all snapshots of the type <code class="literal">single</code> for the
       default (<code class="literal">root</code>) configuration.
      </p></dd></dl></div><p>
    The following metadata is available for each snapshot:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      <span class="bold"><strong>Type</strong></span>: Snapshot type, see
      <a class="xref" href="#sec.snapper.manage.metadata.type" title="7.5.1.1. Snapshot Types">Section 7.5.1.1, “Snapshot Types”</a> for details. This data
      cannot be changed.
     </p></li><li class="listitem "><p>
      <span class="bold"><strong>Number</strong></span>: Unique number of the snapshot.
      This data cannot be changed.
     </p></li><li class="listitem "><p>
      <span class="bold"><strong>Pre Number</strong></span>: Specifies the number of the
      corresponding pre snapshot. For snapshots of type post only. This data
      cannot be changed.
     </p></li><li class="listitem "><p>
      <span class="bold"><strong>Description</strong></span>: A description of the
      snapshot.
     </p></li><li class="listitem "><p>
      <span class="bold"><strong>Userdata</strong></span>: An extended description where
      you can specify custom data in the form of a comma-separated key=value
      list: <code class="literal">reason=testing, project=foo</code>. This field is also
      used to mark a snapshot as important (<code class="literal">important=yes</code>)
      and to list the user that created the snapshot
      (user=tux).
     </p></li><li class="listitem "><p>
      <span class="bold"><strong>Cleanup-Algorithm</strong></span>: Cleanup-algorithm for
      the snapshot, see <a class="xref" href="#sec.snapper.clean-up" title="7.6. Automatic Snapshot Clean-Up">Section 7.6, “Automatic Snapshot Clean-Up”</a> for details.
     </p></li></ul></div><div class="sect3 " id="sec.snapper.manage.metadata.type"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.manage.metadata.type"><span class="number">7.5.1.1 </span><span class="name">Snapshot Types</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage.metadata.type">#</a></h4></div></div></div><p>
     Snapper knows three different types of snapshots: pre, post, and single.
     Physically they do not differ, but Snapper handles them differently.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751982816"><span class="term "><code class="literal">pre</code>
      </span></dt><dd><p>
        Snapshot of a file system <span class="emphasis"><em>before</em></span> a modification.
        Each <code class="literal">pre</code> snapshot has got a corresponding
        <code class="literal">post</code> snapshot. Used for the automatic YaST/Zypper
        snapshots, for example.
       </p></dd><dt id="idm139698751979312"><span class="term "><code class="literal">post</code>
      </span></dt><dd><p>
        Snapshot of a file system <span class="emphasis"><em>after</em></span> a modification.
        Each <code class="literal">post</code> snapshot has got a corresponding
        <code class="literal">pre</code> snapshot. Used for the automatic YaST/Zypper
        snapshots, for example.
       </p></dd><dt id="idm139698751975760"><span class="term "><code class="literal">single</code>
      </span></dt><dd><p>
        Stand-alone snapshot. Used for the automatic hourly snapshots, for
        example. This is the default type when creating snapshots.
       </p></dd></dl></div></div><div class="sect3 " id="sec.snapper.manage.metadata.cleanup"><div class="titlepage"><div><div><h4 class="title" id="sec.snapper.manage.metadata.cleanup"><span class="number">7.5.1.2 </span><span class="name">Cleanup-algorithms</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage.metadata.cleanup">#</a></h4></div></div></div><p>
     Snapper provides three algorithms to clean up old snapshots. The
     algorithms are executed in a daily cron job. It is possible to define the
     number of different types of snapshots to keep in the Snapper
     configuration (see <a class="xref" href="#sec.snapper.config.modify" title="7.4.1. Managing Existing Configurations">Section 7.4.1, “Managing Existing Configurations”</a> for
     details).
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751970480"><span class="term ">number</span></dt><dd><p>
        Deletes old snapshots when a certain snapshot count is reached.
       </p></dd><dt id="idm139698751968624"><span class="term ">timeline</span></dt><dd><p>
        Deletes old snapshots having passed a certain age, but keeps several
        hourly, daily, monthly, and yearly snapshots.
       </p></dd><dt id="idm139698751966704"><span class="term ">empty-pre-post</span></dt><dd><p>
        Deletes pre/post snapshot pairs with empty diffs.
       </p></dd></dl></div></div></div><div class="sect2 " id="sec.snapper.manage.create"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.manage.create"><span class="number">7.5.2 </span><span class="name">Creating Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage.create">#</a></h3></div></div></div><p>
    Creating a snapshot is done by running <code class="command">snapper create</code> or
    by clicking <span class="guimenu">Create</span> in the YaST module
    <span class="guimenu">Snapper</span>. The following examples explain how to create
    snapshots from the command line. It should be easy to adopt them when using
    the YaST interface.
   </p><div id="idm139698751961264" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Snapshot Description</h6><p>
     You should always specify a meaningful description to later be able to
     identify its purpose. Even more information can be specified via the user
     data option.
    </p></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698751959184"><span class="term "><code class="command">snapper create --description "Snapshot for week 2
      2014"</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for the default
       (<code class="literal">root</code>) configuration with a description. Because no
       cleanup-algorithm is specified, the snapshot will never be deleted
       automatically.
      </p></dd><dt id="idm139698751956416"><span class="term "><code class="command">snapper --config home create --description "Cleanup in
     ~tux"</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for a custom configuration
       named <code class="literal">home</code> with a description. Because no
       cleanup-algorithm is specified, the snapshot will never be deleted
       automatically.
      </p></dd><dt id="idm139698751953648"><span class="term "><code class="command">snapper --config home create --description "Daily data
     backup" --cleanup-algorithm timeline</code>&gt;
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for a custom configuration
       named <code class="literal">home</code> with a description. The file will
       automatically be deleted when it meets the criteria specified for the
       timeline cleanup-algorithm in the configuration.
      </p></dd><dt id="idm139698751950800"><span class="term "><code class="command">snapper create --type pre --print-number --description
     "Before the Apache config cleanup" --userdata "important=yes"</code>
     </span></dt><dd><p>
       Creates a snapshot of the type <code class="literal">pre</code> and prints the
       snapshot number. First command needed to create a pair of snapshots used
       to save a <span class="quote">“<span class="quote">before</span>”</span> and <span class="quote">“<span class="quote">after</span>”</span> state. The
       snapshot is marked as important.
      </p></dd><dt id="idm139698751947104"><span class="term "><code class="command">snapper create --type post --pre-number 30 --description
     "After the Apache config cleanup" --userdata "important=yes"</code>
     </span></dt><dd><p>
       Creates a snapshot of the type <code class="literal">post</code> paired with the
       <code class="literal">pre</code> snapshot number <code class="literal">30</code>. Second
       command needed to create a pair of snapshots used to save a
       <span class="quote">“<span class="quote">before</span>”</span> and <span class="quote">“<span class="quote">after</span>”</span> state. The snapshot is
       marked as important.
      </p></dd><dt id="idm139698751942528"><span class="term "><code class="command">snapper create --command <em class="replaceable ">COMMAND</em>
     --description "Before and after COMMAND"</code>
     </span></dt><dd><p>
       Automatically creates a snapshot pair before and after running
       <em class="replaceable ">COMMAND</em>. This option is only available when
       using snapper on the command line.
      </p></dd></dl></div></div><div class="sect2 " id="sec.snapper.manage.modify"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.manage.modify"><span class="number">7.5.3 </span><span class="name">Modifying Snapshot Metadata</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage.modify">#</a></h3></div></div></div><p>
    Snapper allows you to modify the description, the cleanup algorithm, and
    the user data of a snapshot. All other metadata cannot be changed. The
    following examples explain how to modify snapshots from the command line.
    It should be easy to adopt them when using the YaST interface.
   </p><p>
    To modify a snapshot on the command line, you need to know its number. Use
    <code class="command">snapper list</code> to display all snapshots
    and their numbers.
   </p><p>
    The YaST <span class="guimenu">Snapper</span> module already lists all snapshots.
    Choose one from the list and click <span class="guimenu">Modify</span>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751934480"><span class="term "><code class="command">snapper modify --cleanup-algorithm "timeline"</code>
      10
     </span></dt><dd><p>
       Modifies the metadata of snapshot 10 for the default
       (<code class="literal">root</code>) configuration. The cleanup algorithm is set to
       <code class="literal">timeline</code>.
      </p></dd><dt id="idm139698751931376"><span class="term "><code class="command">snapper --config home modify --description "daily backup"
     -cleanup-algorithm "timeline" 120</code>
     </span></dt><dd><p>
       Modifies the metadata of snapshot 120 for a custom configuration named
       <code class="literal">home</code>. A new description is set and the cleanup
       algorithm is unset.
      </p></dd></dl></div></div><div class="sect2 " id="sec.snapper.manage.delete"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.manage.delete"><span class="number">7.5.4 </span><span class="name">Deleting Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.manage.delete">#</a></h3></div></div></div><p>
    To delete a snapshot with the YaST <span class="guimenu">Snapper</span> module,
    choose a snapshot from the list and click <span class="guimenu">Delete</span>.
   </p><p>
    To delete a snapshot with the command line tool, you need to know its
    number. Get it by running <code class="command">snapper list</code>. To delete a
    snapshot, run <code class="command">snapper delete</code>
    <em class="replaceable ">NUMBER</em>.
   </p><p>
    Deleting the current default subvolume snapshot is not allowed.
   </p><p>
    When deleting snapshots with Snapper, the freed space will be claimed by a
    Btrfs process running in the background. Thus the visibility and the
    availability of free space is delayed. In case you need space freed by
    deleting a snapshot to be available immediately, use the option
    <code class="option">--sync</code> with the delete command.
   </p><div id="idm139698751922096" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Deleting Snapshot Pairs</h6><p>
     When deleting a <code class="literal">pre</code> snapshot, you should always delete
     its corresponding <code class="literal">post</code> snapshot (and vice versa).
    </p></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698751919504"><span class="term "><code class="command">snapper delete 65</code>
     </span></dt><dd><p>
       Deletes snapshot 65 for the default (<code class="literal">root</code>)
       configuration.
      </p></dd><dt id="idm139698751916928"><span class="term "><code class="command">snapper -c home delete 89 90</code>
     </span></dt><dd><p>
       Deletes snapshots 89 and 90 for a custom configuration named
       <code class="literal">home</code>.
      </p></dd><dt id="idm139698751914320"><span class="term "><code class="command">snapper delete --sync 23</code></span></dt><dd><p>
       Deletes snapshot 23 for the default (<code class="literal">root</code>)
       configuration and makes the freed space available immediately.
      </p></dd></dl></div><div id="idm139698751911680" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Delete Unreferenced Snapshots</h6><p>
     Sometimes the Btrfs snapshot is present but the XML file containing the
     metadata for Snapper is missing. In this case the snapshot is not visible
     for Snapper and needs to be deleted manually:
    </p><div class="verbatim-wrap"><pre class="screen">btrfs subvolume delete /.snapshots/<em class="replaceable ">SNAPSHOTNUMBER</em>/snapshot
rm -rf /.snapshots/SNAPSHOTNUMBER</pre></div></div><div id="idm139698751909184" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Old Snapshots Occupy More Disk Space</h6><p>
     If you delete snapshots to free space on your hard disk, make sure to
     delete old snapshots first. The older a snapshot is, the more disk space
     it occupies.
    </p></div><p>
    Snapshots are also automatically deleted by a daily cron job. Refer to
    <a class="xref" href="#sec.snapper.manage.metadata.cleanup" title="7.5.1.2. Cleanup-algorithms">Section 7.5.1.2, “Cleanup-algorithms”</a> for details.
   </p></div></div><div class="sect1 " id="sec.snapper.clean-up"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.clean-up"><span class="number">7.6 </span><span class="name">Automatic Snapshot Clean-Up</span> <a title="Permalink" class="permalink" href="#sec.snapper.clean-up">#</a></h2></div></div></div><p>
   Snapshots occupy disk space and over time the amount of disk space occupied
   by the snapshots may become large. To prevent disks from running out of
   space, Snapper offers algorithms to automatically delete old snapshots.
   These algorithms differentiate between timeline snapshots and numbered
   snapshots (administration plus installation snapshot pairs). You can specify
   the number of snapshots to keep for each type.
  </p><p>
   In addition to that, you can optionally specify a disk space quota, defining
   the maximum amount of disk space the snapshots may occupy. It is also
   possible to automatically delete pre and post snapshots pairs that do not
   differ.
  </p><p>
   A clean-up algorithm is always bound to a single Snapper configuration, so
   you need to configure algorithms for each configuration. To
   prevent certain snapshots from being automatically deleted, refer to
   <a class="xref" href="#faq.snapper.permanent" title="Q:"><em>
      How to make a snapshot permanent?
     </em></a>.
  </p><p>
   The default setup (<code class="literal">root</code>) is configured to do clean-up
   for numbered snapshots and empty pre and post snapshot pairs. Quota support
   is enabled—snapshots may not occupy more than 50% of the available
   disk space of the root partition. Timeline snapshots are disabled by
   default, therefore the timeline clean-up algorithm is also disabled.
  </p><div class="sect2 " id="sec.snapper.clean-up.number"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.clean-up.number"><span class="number">7.6.1 </span><span class="name">Cleaning Up Numbered Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.clean-up.number">#</a></h3></div></div></div><p>
    Cleaning up numbered snapshots—administration plus installation
    snapshot pairs—is controlled by the following parameters of a Snapper
    configuration.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751899056"><span class="term "><code class="literal">NUMBER_CLEANUP</code>
     </span></dt><dd><p>
       Enables or disables clean-up of installation and admin snapshot pairs.
       If enabled, snapshot pairs are deleted when the total snapshot count
       exceeds a number specified with <code class="literal">NUMBER_LIMIT</code> and/or
       <code class="literal">NUMBER_LIMIT_IMPORTANT</code> <span class="emphasis"><em>and</em></span> an
       age specified with <code class="literal">NUMBER_MIN_AGE</code>. Valid values:
       <code class="literal">yes</code> (enable), <code class="literal">no</code> (disable).
      </p><p>
       The default value is <code class="literal">"yes"</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> set-config "NUMBER_CLEANUP=no"</pre></div></dd><dt id="idm139698751891216"><span class="term "><code class="literal">NUMBER_LIMIT</code> /
      <code class="literal">NUMBER_LIMIT_IMPORTANT</code>
     </span></dt><dd><p>
       Defines how many regular and/or important installation and
       administration snapshot pairs to keep. Only the youngest snapshots will
       be kept. Ignored if <code class="literal">NUMBER_CLEANUP</code> is set to
       <code class="literal">"no"</code>.
      </p><p>
       The default value is <code class="literal">"2-10"</code> for
       <code class="literal">NUMBER_LIMIT</code> and <code class="literal">"4-10"</code> for
       <code class="literal">NUMBER_LIMIT_IMPORTANT</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> set-config "NUMBER_LIMIT=10"</pre></div><div id="idm139698751883728" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Ranged Compared to Constant Values</h6><p>
        In case quota support is enabled (see
        <a class="xref" href="#sec.snapper.clean-up.quota" title="7.6.5. Adding Disk Quota Support">Section 7.6.5, “Adding Disk Quota Support”</a>) the limit needs
        to be specified as a minimum-maximum range, for example
        <code class="literal">2-10</code>. If quota support is disabled, a constant
        value, for example <code class="literal">10</code>, needs to be provided,
        otherwise cleaning-up will fail with an error.
       </p></div></dd><dt id="idm139698751880352"><span class="term "><code class="literal">NUMBER_MIN_AGE</code>
     </span></dt><dd><p>
       Defines the minimum age in seconds a snapshot must have before it can
       automatically be deleted. Snapshots younger than the value specified
       here will not be deleted, regardless of how many exist.
      </p><p>
       The default value is <code class="literal">"1800"</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> set-config "NUMBER_MIN_AGE=864000"</pre></div></dd></dl></div><div id="idm139698751875024" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Limit and Age</h6><p>
     <code class="literal">NUMBER_LIMIT</code>, <code class="literal">NUMBER_LIMIT_IMPORTANT</code>
     and <code class="literal">NUMBER_MIN_AGE</code> are always evaluated. Snapshots are
     only deleted when <span class="emphasis"><em>all</em></span> conditions are met.
    </p><p>
     If you always want to keep the number of snapshots defined with
     <code class="literal">NUMBER_LIMIT*</code> regardless of their age, set
     <code class="literal">NUMBER_MIN_AGE</code> to <code class="literal">0</code>.
    </p><p>
     The following example shows a configuration to keep the last 10 important
     and regular snapshots regardless of age:
    </p><div class="verbatim-wrap"><pre class="screen">NUMBER_CLEANUP=yes
NUMBER_LIMIT_IMPORTANT=10
NUMBER_LIMIT=10
NUMBER_MIN_AGE=0</pre></div><p>
     On the other hand, if you do not want to keep snapshots beyond a certain
     age, set <code class="literal">NUMBER_LIMIT*</code> to <code class="literal">0</code> and
     provide the age with <code class="literal">NUMBER_MIN_AGE</code>.
    </p><p>
     The following example shows a configuration to only keep snapshots younger
     than ten days:
    </p><div class="verbatim-wrap"><pre class="screen">NUMBER_CLEANUP=yes
NUMBER_LIMIT_IMPORTANT=0
NUMBER_LIMIT=0
NUMBER_MIN_AGE=864000</pre></div></div></div><div class="sect2 " id="sec.snapper.clean-up.timeline"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.clean-up.timeline"><span class="number">7.6.2 </span><span class="name">Cleaning Up Timeline Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.clean-up.timeline">#</a></h3></div></div></div><p>
    Cleaning up timeline snapshots is controlled by the following
    parameters of a Snapper configuration.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751863792"><span class="term "><code class="literal">TIMELINE_CLEANUP</code>
     </span></dt><dd><p>
       Enables or disables clean-up of timeline snapshots. If enabled,
       snapshots are deleted when the total snapshot count exceeds a number
       specified with <code class="literal">TIMELINE_LIMIT_*</code>
       <span class="emphasis"><em>and</em></span> an age specified with
       <code class="literal">TIMELINE_MIN_AGE</code>. Valid values:
       <code class="literal">yes</code>, <code class="literal">no</code>.
      </p><p>
       The default value is <code class="literal">"yes"</code>.
      </p><p>
       Example command to change or set:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c <em class="replaceable ">CONFIG</em> set-config "TIMELINE_CLEANUP=yes"</pre></div></dd><dt id="idm139698751856416"><span class="term "><code class="literal">TIMELINE_LIMIT_DAILY</code>,
      <code class="literal">TIMELINE_LIMIT_HOURLY</code>,
      <code class="literal">TIMELINE_LIMIT_MONTHLY</code>,
      <code class="literal">TIMELINE_LIMIT_WEEKLY</code>,
      <code class="literal">TIMELINE_LIMIT_YEARLY</code>
     </span></dt><dd><p>
       Number of snapshots to keep for hour, day, month, week, and year.
      </p><p>
       The default value for each entry is <code class="literal">"10"</code>, except for
       <code class="literal">TIMELINE_LIMIT_WEEKLY</code>, which is set to
       <code class="literal">"0"</code> by default.
      </p></dd><dt id="idm139698751850640"><span class="term "><code class="literal">TIMELINE_MIN_AGE</code>
     </span></dt><dd><p>
       Defines the minimum age in seconds a snapshot must have before it can
       automatically be deleted.
      </p><p>
       The default value is <code class="literal">"1800"</code>.
      </p></dd></dl></div><div class="complex-example"><div class="example" id="ex.snapper.config.timeline"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 7.1: </span><span class="name">Example timeline configuration </span><a title="Permalink" class="permalink" href="#ex.snapper.config.timeline">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">TIMELINE_CLEANUP="yes"
TIMELINE_CREATE="yes"
TIMELINE_LIMIT_DAILY="7"
TIMELINE_LIMIT_HOURLY="24"
TIMELINE_LIMIT_MONTHLY="12"
TIMELINE_LIMIT_WEEKLY="4"
TIMELINE_LIMIT_YEARLY="2"
TIMELINE_MIN_AGE="1800"</pre></div><p>
     This example configuration enables hourly snapshots which are
     automatically cleaned up. <code class="literal">TIMELINE_MIN_AGE</code> and
     <code class="literal">TIMELINE_LIMIT_*</code> are always both evaluated. In this
     example, the minimum age of a snapshot before it can be deleted is set to
     30 minutes (1800 seconds). Since we create hourly snapshots, this ensures
     that only the latest snapshots are kept. If
     <code class="literal">TIMELINE_LIMIT_DAILY</code> is set to not zero, this means
     that the first snapshot of the day is kept, too.
    </p><div class="itemizedlist "><div class="itemizedlist-title-wrap"><h6 class="itemizedlist-title"><span class="name">Snapshots to be Kept </span><a title="Permalink" class="permalink" href="#idm139698751843408">#</a></h6></div><ul class="itemizedlist"><li class="listitem "><p>
       Hourly: The last 24 snapshots that have been made.
      </p></li><li class="listitem "><p>
       Daily: The first daily snapshot that has been made is kept from the last
       seven days.
      </p></li><li class="listitem "><p>
       Monthly: The first snapshot made on the last day of the month is kept
       for the last twelve months.
      </p></li><li class="listitem "><p>
       Weekly: The first snapshot made on the last day of the week is kept from
       the last four weeks.
      </p></li><li class="listitem "><p>
       Yearly: The first snapshot made on the last day of the year is kept for
       the last two years.
      </p></li></ul></div></div></div></div></div><div class="sect2 " id="sec.snapper.clean-up.empty"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.clean-up.empty"><span class="number">7.6.3 </span><span class="name">Cleaning Up Snapshot Pairs That Do Not Differ</span> <a title="Permalink" class="permalink" href="#sec.snapper.clean-up.empty">#</a></h3></div></div></div><p>
    As explained in <a class="xref" href="#snapper.snapshot-type" title="7.1.1. Types of Snapshots">Section 7.1.1, “Types of Snapshots”</a>, whenever you run a
    YaST module or execute Zypper, a pre snapshot is created on start-up and
    a post snapshot is created when exiting. In case you have not made any
    changes there will be no difference between the pre and post snapshots.
    Such <span class="quote">“<span class="quote">empty</span>”</span> snapshot pairs can be automatically be deleted by
    setting the following parameters in a Snapper configuration:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751833440"><span class="term "><code class="literal">EMPTY_PRE_POST_CLEANUP</code>
     </span></dt><dd><p>
       If set to <code class="literal">yes</code>, pre and post snapshot pairs that do
       not differ will be deleted.
      </p><p>
       The default value is <code class="literal">"yes"</code>.
      </p></dd><dt id="idm139698751829984"><span class="term "><code class="literal">EMPTY_PRE_POST_MIN_AGE</code>
     </span></dt><dd><p>
       Defines the minimum age in seconds a pre and post snapshot pair that
       does not differ must have before it can automatically be deleted.
      </p><p>
       The default value is <code class="literal">"1800"</code>.
      </p></dd></dl></div></div><div class="sect2 " id="sec.snapper.clean-up.manual"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.clean-up.manual"><span class="number">7.6.4 </span><span class="name">Cleaning Up Manually Created Snapshots</span> <a title="Permalink" class="permalink" href="#sec.snapper.clean-up.manual">#</a></h3></div></div></div><p>
    Snapper does not offer custom clean-up algorithms for manually created
    snapshots. However, you can assign the number or timeline clean-up
    algorithm to a manually created snapshot. If you do so, the snapshot will
    join the <span class="quote">“<span class="quote">clean-up queue</span>”</span> for the algorithm you specified.
    You can specify a clean-up algorithm when creating a snapshot, or by
    modifying an existing snapshot:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751823840"><span class="term "><code class="command">snapper create --description "Test" --cleanup-algorithm number</code>
     </span></dt><dd><p>
       Creates a stand-alone snapshot (type single) for the default (root)
       configuration and assigns the <code class="literal">number</code> clean-up
       algorithm.
      </p></dd><dt id="idm139698751821152"><span class="term "><code class="command">snapper modify --cleanup-algorithm "timeline" 25</code>
     </span></dt><dd><p>
       Modifies the snapshot with the number 25 and assigns the clean-up
       algorithm <code class="literal">timeline</code>.
      </p></dd></dl></div></div><div class="sect2 " id="sec.snapper.clean-up.quota"><div class="titlepage"><div><div><h3 class="title" id="sec.snapper.clean-up.quota"><span class="number">7.6.5 </span><span class="name">Adding Disk Quota Support</span> <a title="Permalink" class="permalink" href="#sec.snapper.clean-up.quota">#</a></h3></div></div></div><p>
    In addition to the number and/or timeline clean-up algorithms described
    above, Snapper supports quotas. You can define what percentage of the
    available space snapshots are allowed to occupy. This percentage value
    always applies to the Btrfs subvolume defined in the respective Snapper
    configuration.
   </p><p>
    If Snapper was enabled during the installation, quota support is
    automatically enabled. In case you manually enable Snapper at a later point
    in time, you can enable quota support by running <code class="command">snapper
    setup-quota</code>. This requires a valid configuration (see
    <a class="xref" href="#sec.snapper.config" title="7.4. Creating and Modifying Snapper Configurations">Section 7.4, “Creating and Modifying Snapper Configurations”</a> for more information).
   </p><p>
    Quota support is controlled by the following parameters of a Snapper
    configuration.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751813712"><span class="term "><code class="literal">QGROUP</code>
     </span></dt><dd><p>
       The Btrfs quota group used by Snapper. If not set, run <code class="command">snapper
       setup-quota</code>. If already set, only change if you are familiar
       with <code class="command">man 8 btrfs-qgroup</code>. This value is set with
       <code class="command">snapper setup-quota</code> and should not be changed.
      </p></dd><dt id="idm139698751810144"><span class="term "><code class="literal">SPACE_LIMIT</code>
     </span></dt><dd><p>
       Limit of space snapshots are allowed to use in fractions of 1 (100%).
       Valid values range from 0 to 1 (0.1 = 10%, 0.2 = 20%, ...).
      </p></dd></dl></div><p>
    The following limitations and guidelines apply:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Quotas are only activated in <span class="emphasis"><em>addition</em></span> to an existing
      number and/or timeline clean-up algorithm. If no clean-up algorithm is
      active, quota restrictions are not applied.
     </p></li><li class="listitem "><p>
      With quota support enabled, Snapper will perform two clean-up runs if
      required. The first run will apply the rules specified for number and
      timeline snapshots. Only if the quota is exceeded after this run, the
      quota-specific rules will be applied in a second run.
     </p></li><li class="listitem "><p>
      Even if quota support is enabled, Snapper will always keep the number of
      snapshots specified with the <code class="literal">NUMBER_LIMIT*</code> and
      <code class="literal">TIMELINE_LIMIT*</code> values, even if the quota will be
      exceeded. It is therefore recommended to specify ranged values
      (<code class="literal"><em class="replaceable ">MIN</em>-<em class="replaceable ">MAX</em></code>)
      for <code class="literal">NUMBER_LIMIT*</code> and
      <code class="literal">TIMELINE_LIMIT*</code> to ensure the quota can be applied.
     </p><p>
      If, for example, <code class="literal">NUMBER_LIMIT=5-20</code> is set, Snapper
      will perform a first clean-up run and reduce the number of regular
      numbered snapshots to 20. In case these 20 snapshots exceed the
      quota, Snapper will delete the oldest ones in a second run until the
      quota is met. A minimum of five snapshots will always be kept, regardless
      of the amount of space they occupy.
     </p></li></ul></div></div></div><div class="sect1 " id="sec.snapper.faqs"><div class="titlepage"><div><div><h2 class="title" id="sec.snapper.faqs"><span class="number">7.7 </span><span class="name">Frequently Asked Questions</span> <a title="Permalink" class="permalink" href="#sec.snapper.faqs">#</a></h2></div></div></div><div class="qandaset" id="idm139698751797536"><div class="free-id" id="idm139698751796976"></div><dl class="qandaentry"><dt class="question" id="idm139698751796688">
      Why does Snapper Never Show Changes in <code class="filename">/var/log</code>,
      <code class="filename">/tmp</code> and Other Directories?
     </dt><dd class="answer" id="idm139698751794848"><p>
      For some directories we decided to exclude them from snapshots. See
      <a class="xref" href="#snapper.dir-excludes" title="7.1.2. Directories That Are Excluded from Snapshots">Section 7.1.2, “Directories That Are Excluded from Snapshots”</a> for a list and reasons. To exclude
      a path from snapshots we create a subvolume for that path.
     </p></dd></dl><div class="free-id" id="idm139698751793072"></div><dl class="qandaentry"><dt class="question" id="idm139698751792784">
      How much disk space is used by snapshots? How to free disk space?
     </dt><dd class="answer" id="idm139698751791824"><p>
      Displaying the amount of disk space a snapshot allocates is currently not
      supported by the <code class="literal">Btrfs</code> tools. However, if you have
      quota enabled, it is possible to determine how much space would be freed
      if <span class="emphasis"><em>all</em></span> snapshots would be deleted:
     </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Get the quota group ID (<code class="literal">1/0</code> in the following
        example):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c root get-config | grep QGROUP
QGROUP                 | 1/0</pre></div></li><li class="step "><p>
        Rescan the subvolume quotas:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> btrfs quota rescan -w /</pre></div></li><li class="step "><p>
        Show the data of the quota group (<code class="literal">1/0</code> in the
        following example):
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> btrfs qgroup show / | grep "1/0"
1/0           4.80GiB    108.82MiB</pre></div><p>
        The third column shows the amount of space that would be freed when
        deleting all snapshots (<code class="literal">108.82MiB</code>).
       </p></li></ol></div></div><p>
      To free space on a <code class="literal">Btrfs</code> partition containing
      snapshots you need to delete unneeded snapshots rather than files. Older
      snapshots occupy more space than recent ones. See
      <a class="xref" href="#sec.snapper.setup.customize.archiving" title="7.1.3.4. Controlling Snapshot Archiving">Section 7.1.3.4, “Controlling Snapshot Archiving”</a> for details.
     </p><p>
      Doing an upgrade from one service pack to another results in snapshots
      occupying a lot of disk space on the system subvolumes, because a lot of
      data gets changed (package updates). Manually deleting these snapshots
      after they are no longer needed is recommended. See
      <a class="xref" href="#sec.snapper.manage.delete" title="7.5.4. Deleting Snapshots">Section 7.5.4, “Deleting Snapshots”</a> for details.
     </p></dd></dl><div class="free-id" id="idm139698751778368"></div><dl class="qandaentry"><dt class="question" id="idm139698751778080">
      Can I Boot a Snapshot from the Boot Loader?
     </dt><dd class="answer" id="idm139698751777136"><p>
      Yes—refer to <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a> for
      details.
     </p></dd></dl><div class="free-id" id="faq.snapper.permanent"></div><dl class="qandaentry"><dt class="question" id="idm139698751774768">
      How to make a snapshot permanent?
     </dt><dd class="answer" id="idm139698751773840"><p>
      Currently Snapper does not offer means to prevent a snapshot from being
      deleted manually. However, you can prevent snapshots from being
      automatically deleted by clean-up algorithms. Manually created snapshots
      (see <a class="xref" href="#sec.snapper.manage.create" title="7.5.2. Creating Snapshots">Section 7.5.2, “Creating Snapshots”</a>) have no clean-up
      algorithm assigned unless you specify one with
      <code class="option">--cleanup-algorithm</code>. Automatically created snapshots
      always either have the <code class="literal">number</code> or
      <code class="literal">timeline</code> algorithm assigned. To remove such an
      assignment from one or more snapshots, proceed as follows:
     </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        List all available snapshots:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper list -a</pre></div></li><li class="step "><p>
        Memorize the number of the snapshot(s) you want to prevent from being
        deleted.
       </p></li><li class="step "><p>
        Run the following command and replace the number placeholders with the
        number(s) you memorized:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper modify --cleanup-algorithm "" <em class="replaceable ">#1</em> <em class="replaceable ">#2</em> <em class="replaceable ">#n</em></pre></div></li><li class="step "><p>
        Check the result by running <code class="command">snapper list -a</code> again.
        The entry in the column <code class="literal">Cleanup</code> should now be empty
        for the snapshots you modified.
       </p></li></ol></div></div></dd></dl><div class="free-id" id="idm139698751761936"></div><dl class="qandaentry"><dt class="question" id="idm139698751761648">
      Where can I get more information on Snapper?
     </dt><dd class="answer" id="idm139698751760704"><p>
      See the Snapper home page at <a class="link" href="http://snapper.io/" target="_blank">http://snapper.io/</a>.
     </p></dd></dl></div></div></div><div class="chapter " id="cha.vnc"><div class="titlepage"><div><div><h2 class="title"><span class="number">8 </span><span class="name">Remote Access with VNC</span> <a title="Permalink" class="permalink" href="#cha.vnc">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>vnc.xml</li><li><span class="ds-label">ID: </span>cha.vnc</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698751754608">#</a></h6></div><p>
    Virtual Network Computing (VNC) enables you to control a remote computer
    via a graphical desktop (as opposed to a remote shell access). VNC is
    platform-independent and lets you access the remote machine from any
    operating system.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> supports two different kinds of VNC sessions: One-time
    sessions that <span class="quote">“<span class="quote">live</span>”</span> as long as the VNC connection from the
    client is kept up, and persistent sessions that <span class="quote">“<span class="quote">live</span>”</span> until
    they are explicitly terminated.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.vnc.viewer"><span class="number">8.1 </span><span class="name">The <code class="command">vncviewer</code> Client</span></a></span></dt><dt><span class="sect1"><a href="#vnc.remmina"><span class="number">8.2 </span><span class="name">Remmina: the Remote Desktop Client</span></a></span></dt><dt><span class="sect1"><a href="#sec.vnc.one-time"><span class="number">8.3 </span><span class="name">One-time VNC Sessions</span></a></span></dt><dt><span class="sect1"><a href="#sec.vnc.persistent"><span class="number">8.4 </span><span class="name">Persistent VNC Sessions</span></a></span></dt><dt><span class="sect1"><a href="#sec.vnc.encrypt"><span class="number">8.5 </span><span class="name">Encrypted VNC Communication</span></a></span></dt></dl></div></div><div id="idm139698751750656" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Session Types</h6><p>
   A machine can offer both kinds of sessions simultaneously on different
   ports, but an open session cannot be converted from one type to the other.
  </p></div><div class="sect1 " id="sec.vnc.viewer"><div class="titlepage"><div><div><h2 class="title" id="sec.vnc.viewer"><span class="number">8.1 </span><span class="name">The <code class="command">vncviewer</code> Client</span> <a title="Permalink" class="permalink" href="#sec.vnc.viewer">#</a></h2></div></div></div><p>
   To connect to a VNC service provided by a server, a client is needed. The
   default in <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> is <code class="command">vncviewer</code>, provided by the
   <code class="systemitem">tigervnc</code> package.
  </p><div class="sect2 " id="sec.vnc.viewer.connectcli"><div class="titlepage"><div><div><h3 class="title" id="sec.vnc.viewer.connectcli"><span class="number">8.1.1 </span><span class="name">Connecting Using the vncviewer CLI</span> <a title="Permalink" class="permalink" href="#sec.vnc.viewer.connectcli">#</a></h3></div></div></div><p>
    To start your VNC viewer and initiate a session with the server, use the
    command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>vncviewer jupiter.example.com:1</pre></div><p>
    Instead of the VNC display number you can also specify the port number with
    two colons:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>vncviewer jupiter.example.com::5901</pre></div><div id="idm139698751741008" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Display and Port Number</h6><p>
     The actual display or port number you specify in the VNC client must be
     the same as the display or port number picked by the
     <code class="command">vncserver</code> command on the target machine. See
     <a class="xref" href="#sec.vnc.persistent" title="8.4. Persistent VNC Sessions">Section 8.4, “Persistent VNC Sessions”</a> for further info.
    </p></div></div><div class="sect2 " id="sec.vnc.viewer.connectgui"><div class="titlepage"><div><div><h3 class="title" id="sec.vnc.viewer.connectgui"><span class="number">8.1.2 </span><span class="name">Connecting Using the vncviewer GUI</span> <a title="Permalink" class="permalink" href="#sec.vnc.viewer.connectgui">#</a></h3></div></div></div><p>
    By running <code class="command">vncviewer</code> without specifying
    <code class="command">--listen</code> or a host to connect to, it will show a window
    to ask for connection details. Enter the host into the <span class="guimenu">VNC
    server</span> field like in <a class="xref" href="#sec.vnc.viewer.connectcli" title="8.1.1. Connecting Using the vncviewer CLI">Section 8.1.1, “Connecting Using the vncviewer CLI”</a>
    and click <span class="guimenu">Connect</span>.
   </p><div class="figure" id="fig.vnc.viewer.connectgui"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vnc_connect.png"><img src="images/vnc_connect.png" width="" alt="vncviewer asking for connection details" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.1: </span><span class="name">vncviewer </span><a title="Permalink" class="permalink" href="#fig.vnc.viewer.connectgui">#</a></h6></div></div></div><div class="sect2 " id="sec.vnc.viewer.encrypt"><div class="titlepage"><div><div><h3 class="title" id="sec.vnc.viewer.encrypt"><span class="number">8.1.3 </span><span class="name">Notification of Unencrypted Connections</span> <a title="Permalink" class="permalink" href="#sec.vnc.viewer.encrypt">#</a></h3></div></div></div><p>
    The VNC protocol supports different kinds of encrypted connections, not to
    be confused with password authentication. If a connection does not use TLS,
    the text <span class="quote">“<span class="quote">(Connection not encrypted!)</span>”</span> can be seen in the
    window title of the VNC viewer.
   </p></div></div><div class="sect1 " id="vnc.remmina"><div class="titlepage"><div><div><h2 class="title" id="vnc.remmina"><span class="number">8.2 </span><span class="name">Remmina: the Remote Desktop Client</span> <a title="Permalink" class="permalink" href="#vnc.remmina">#</a></h2></div></div></div><p>
   Remmina is a modern and feature rich remote desktop client. It supports
   several access methods, for example VNC, SSH, RDP, or Spice.
  </p><div class="sect2 " id="vnc.remmina.install"><div class="titlepage"><div><div><h3 class="title" id="vnc.remmina.install"><span class="number">8.2.1 </span><span class="name">Installation</span> <a title="Permalink" class="permalink" href="#vnc.remmina.install">#</a></h3></div></div></div><p>
    To use Remmina, verify whether the <span class="package">remmina</span> package is
    installed on your system, and install it if not. Remember to install the
    VNC plug-in for Remmina as well:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>zypper in remmina remmina-plugin-vnc</pre></div></div><div class="sect2 " id="vnc.remmina.usage"><div class="titlepage"><div><div><h3 class="title" id="vnc.remmina.usage"><span class="number">8.2.2 </span><span class="name">Main Window</span> <a title="Permalink" class="permalink" href="#vnc.remmina.usage">#</a></h3></div></div></div><p>
    Run Remmina by entering the <code class="command">remmina</code> command.
   </p><div class="figure" id="idm139698751718272"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/remmina.png"><img src="images/remmina.png" width="" alt="Remmina's Main Window" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.2: </span><span class="name">Remmina's Main Window </span><a title="Permalink" class="permalink" href="#idm139698751718272">#</a></h6></div></div><p>
    The main application window shows the list of stored remote sessions. Here
    you can add and save a new remote session, quick-start a new session
    without saving it, start a previously saved session, or set Remmina's
    global preferences.
   </p></div><div class="sect2 " id="vnc.remmina.addnew"><div class="titlepage"><div><div><h3 class="title" id="vnc.remmina.addnew"><span class="number">8.2.3 </span><span class="name">Adding Remote Sessions</span> <a title="Permalink" class="permalink" href="#vnc.remmina.addnew">#</a></h3></div></div></div><p>
    To add and save a new remote session, click <span class="inlinemediaobject"><img xmlns="" src="images/remmina_plus.png" width="" alt="Add new session" /></span> in the top left of the main window. The
    <span class="guimenu">Remote Desktop Preference</span> window opens.
   </p><div class="figure" id="idm139698751705248"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/remmina_session_details.png"><img src="images/remmina_session_details.png" width="" alt="Remote Desktop Preference" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.3: </span><span class="name">Remote Desktop Preference </span><a title="Permalink" class="permalink" href="#idm139698751705248">#</a></h6></div></div><p>
    Complete the fields that specify your newly added remote session profile.
    The most important are:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751699376"><span class="term ">Name</span></dt><dd><p>
       Name of the profile. It will be listed in the main window.
      </p></dd><dt id="idm139698751697520"><span class="term ">Protocol</span></dt><dd><p>
       The protocol to use when connection to the remote session, for example
       VNC.
      </p></dd><dt id="idm139698751695648"><span class="term ">Server</span></dt><dd><p>
       The IP or DNS address and display number of the remote server.
      </p></dd><dt id="idm139698751693792"><span class="term ">User name, Password</span></dt><dd><p>
       Credentials to use for remote authentication. Leave empty for no
       authentication.
      </p></dd><dt id="idm139698751691920"><span class="term ">Color depth, Quality</span></dt><dd><p>
       Select the best options according to you connection speed and quality.
      </p></dd></dl></div><p>
    Select the <span class="guimenu">Advanced</span> tab to enter more specific settings.
   </p><div id="idm139698751688976" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Disable Encryption</h6><p>
     If the communication between the client and the remote server is not
     encrypted, activate <span class="guimenu">Disable encryption</span>, otherwise the
     connection fails.
    </p></div><p>
    Select the <span class="guimenu">SSH</span> tab for advanced SSH tunneling and
    authentication options.
   </p><p>
    Confirm with <span class="guimenu">Save</span>. Your new profile will be listed in
    the main window.
   </p></div><div class="sect2 " id="vnc.remmina.start"><div class="titlepage"><div><div><h3 class="title" id="vnc.remmina.start"><span class="number">8.2.4 </span><span class="name">Starting Remote Sessions</span> <a title="Permalink" class="permalink" href="#vnc.remmina.start">#</a></h3></div></div></div><p>
    You can either start a previously saved session, or quick-start a remote
    session without saving the connection details.
   </p><div class="sect3 " id="vnc.remmina.quickstart"><div class="titlepage"><div><div><h4 class="title" id="vnc.remmina.quickstart"><span class="number">8.2.4.1 </span><span class="name">Quick-starting Remote Sessions</span> <a title="Permalink" class="permalink" href="#vnc.remmina.quickstart">#</a></h4></div></div></div><p>
     To start a remote session quickly without proper adding and saving
     connection details, use the drop-down box and text field at the top of the
     main window.
    </p><div class="figure" id="idm139698751681552"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/remmina_quickstart.png"><img src="images/remmina_quickstart.png" width="" alt="Quick-starting" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.4: </span><span class="name">Quick-starting </span><a title="Permalink" class="permalink" href="#idm139698751681552">#</a></h6></div></div><p>
     Select the communication protocol from the drop-down box, for example
     'VNC', then enter the VNC server DNS or IP address followed by a colon and
     a display number, and confirm with <span class="keycap">Enter</span>.
    </p></div><div class="sect3 " id="idm139698751675216"><div class="titlepage"><div><div><h4 class="title" id="idm139698751675216"><span class="number">8.2.4.2 </span><span class="name">Opening Saved Remote Sessions</span> <a title="Permalink" class="permalink" href="#idm139698751675216">#</a></h4></div></div></div><p>
     To open a specific remote session, double-click it from the list of
     sessions.
    </p></div><div class="sect3 " id="idm139698751673776"><div class="titlepage"><div><div><h4 class="title" id="idm139698751673776"><span class="number">8.2.4.3 </span><span class="name">Remote Sessions Window</span> <a title="Permalink" class="permalink" href="#idm139698751673776">#</a></h4></div></div></div><p>
     Remote sessions are opened in tabs of a separate window. Each tab hosts
     one session. The toolbar on the left of the window helps you manage the
     windows / sessions, such as toggle fullscreen mode, resize the window to
     match the display size of the session, send specific keystrokes to the
     session, take screenshots of the session, or set the image quality.
    </p><div class="figure" id="idm139698751672224"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/remmina_sle15inside.png"><img src="images/remmina_sle15inside.png" width="" alt="Remmina Viewing SLES 15 Remote Session" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.5: </span><span class="name">Remmina Viewing SLES 15 Remote Session </span><a title="Permalink" class="permalink" href="#idm139698751672224">#</a></h6></div></div></div></div><div class="sect2 " id="vnc.remmina.edit_delete_clone"><div class="titlepage"><div><div><h3 class="title" id="vnc.remmina.edit_delete_clone"><span class="number">8.2.5 </span><span class="name">Editing, Copying, and Deleting Saved Sessions</span> <a title="Permalink" class="permalink" href="#vnc.remmina.edit_delete_clone">#</a></h3></div></div></div><p>
    To <span class="emphasis"><em>edit</em></span> a saved remote session, right-click its name
    in the Remmina's main window and select <span class="guimenu">Edit</span>. Refer to
    <a class="xref" href="#vnc.remmina.addnew" title="8.2.3. Adding Remote Sessions">Section 8.2.3, “Adding Remote Sessions”</a> for the description of the relevant
    fields.
   </p><p>
    To <span class="emphasis"><em>copy</em></span> a saved remote session, right-click its name
    in the Remmina's main window and select <span class="guimenu">Copy</span>. In the
    <span class="guimenu">Remote Desktop Preference</span> window, change the name of the
    profile, optionally adjust relevant options, and confirm with
    <span class="guimenu">Save</span>.
   </p><p>
    To <span class="emphasis"><em>Delete</em></span> a saved remote session, right-click its name
    in the Remmina's main window and select <span class="guimenu">Delete</span>. Confirm
    with <span class="guimenu">Yes</span> in the next dialog.
   </p></div><div class="sect2 " id="vnc.remmina.cmdline"><div class="titlepage"><div><div><h3 class="title" id="vnc.remmina.cmdline"><span class="number">8.2.6 </span><span class="name">Running Remote Sessions from the Command Line</span> <a title="Permalink" class="permalink" href="#vnc.remmina.cmdline">#</a></h3></div></div></div><p>
    If you need to open a remote session from the command line or from a batch
    file without first opening the main application window, use the following
    syntax:
   </p><div class="verbatim-wrap"><pre class="screen"> <code class="prompt user">tux &gt; </code>remmina -c <em class="replaceable ">profile_name</em>.remmina</pre></div><p>
    Remmina's profile files are stored in the
    <code class="filename">.local/share/remmina/</code> directory in your home
    directory. To determine which profile file belongs to the session you want
    to open, run Remmina, click the session name in the main window, and read
    the path to the profile file in the window's status line at the bottom.
   </p><div class="figure" id="idm139698751654864"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/remmina_status.png"><img src="images/remmina_status.png" width="" alt="Reading Path to the Profile File" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.6: </span><span class="name">Reading Path to the Profile File </span><a title="Permalink" class="permalink" href="#idm139698751654864">#</a></h6></div></div><p>
    While Remmina is not running, you can rename the profile file to to a more
    reasonable file name, such as <code class="filename">sle15.remmina</code>. You can
    even copy the profile file to your custom directory and run it using the
    <code class="command">remmina -c</code> command from there.
   </p></div></div><div class="sect1 " id="sec.vnc.one-time"><div class="titlepage"><div><div><h2 class="title" id="sec.vnc.one-time"><span class="number">8.3 </span><span class="name">One-time VNC Sessions</span> <a title="Permalink" class="permalink" href="#sec.vnc.one-time">#</a></h2></div></div></div><p>
   A one-time session is initiated by the remote client. It starts a graphical
   login screen on the server. This way you can choose the user which starts
   the session and, if supported by the login manager, the desktop environment.
   When you terminate the client connection to such a VNC session, all
   applications started within that session will be terminated, too. One-time
   VNC sessions cannot be shared, but it is possible to have multiple sessions
   on a single host at the same time.
  </p><div class="procedure " id="pro.vnc.one-time.activate"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.1: </span><span class="name">Enabling One-time VNC Sessions </span><a title="Permalink" class="permalink" href="#pro.vnc.one-time.activate">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start <span class="guimenu">YaST</span> › <span class="guimenu">Network
     Services</span> › <span class="guimenu">Remote Administration (VNC)</span>.
    </p></li><li class="step "><p>
     Check <span class="guimenu">Allow Remote Administration Without Session
     Management</span>.
    </p></li><li class="step "><p>
     Activate <span class="guimenu">Enable access using a web browser</span> if you plan
     to access the VNC session in a Web browser window.
    </p></li><li class="step "><p>
     If necessary, also check <span class="guimenu">Open Port in Firewall</span> (for
     example, when your network interface is configured to be in the External
     Zone). If you have more than one network interface, restrict opening the
     firewall ports to a specific interface via <span class="guimenu">Firewall
     Details</span>.
    </p></li><li class="step "><p>
     Confirm your settings with <span class="guimenu">Next</span>.
    </p></li><li class="step "><p>
     In case not all needed packages are available yet, you need to approve the
     installation of missing packages.
    </p><div id="idm139698751635008" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Restart the Display Manager</h6><p>
      YaST makes changes to the display manager settings. You need to log out
      of your current graphical session and restart the display manager for the
      changes to take effect.
     </p></div></li></ol></div></div><div class="figure" id="idm139698751633152"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vnc_nosession.png"><img src="images/vnc_nosession.png" width="" alt="Remote Administration" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.7: </span><span class="name">Remote Administration </span><a title="Permalink" class="permalink" href="#idm139698751633152">#</a></h6></div></div><div class="sect2 " id="sec.vnc.one-time.configs"><div class="titlepage"><div><div><h3 class="title" id="sec.vnc.one-time.configs"><span class="number">8.3.1 </span><span class="name">Available Configurations</span> <a title="Permalink" class="permalink" href="#sec.vnc.one-time.configs">#</a></h3></div></div></div><p>
    The default configuration on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> serves sessions with a
    resolution of 1024x768 pixels at a color depth of 16-bit. The sessions are
    available on ports <code class="systemitem">5901</code> for
    <span class="quote">“<span class="quote">regular</span>”</span> VNC viewers (equivalent to VNC display
    <code class="literal">1</code>) and on port
    <code class="systemitem">5801</code> for Web browsers.
   </p><p>
    Other configurations can be made available on different
    ports.<span class="phrase"> Ask
    your system administrator for details if you need to modify the
    configuration.</span>
   </p><p>
    VNC display numbers and X display numbers are independent in one-time
    sessions. A VNC display number is manually assigned to every configuration
    that the server supports (:1 in the example above). Whenever a VNC session
    is initiated with one of the configurations, it automatically gets a free X
    display number.
   </p><p>
    By default, both the VNC client and server try to communicate securely via
    a self-signed SSL certificate, which is generated after installation. You
    can either use the default one, or replace it with your own. When using the
    self-signed certificate, you need to confirm its signature before the first
    connection.
   </p></div><div class="sect2 " id="sec.vnc.one-time.connect"><div class="titlepage"><div><div><h3 class="title" id="sec.vnc.one-time.connect"><span class="number">8.3.2 </span><span class="name">Initiating a One-time VNC Session</span> <a title="Permalink" class="permalink" href="#sec.vnc.one-time.connect">#</a></h3></div></div></div><p>
    To connect to a one-time VNC session, a VNC viewer must be installed, see
    also <a class="xref" href="#sec.vnc.viewer" title="8.1. The vncviewer Client">Section 8.1, “The <code class="command">vncviewer</code> Client”</a>.
   </p></div><div class="sect2 " id="sec.vnc.one-time.config"><div class="titlepage"><div><div><h3 class="title" id="sec.vnc.one-time.config"><span class="number">8.3.3 </span><span class="name">Configuring One-time VNC Sessions</span> <a title="Permalink" class="permalink" href="#sec.vnc.one-time.config">#</a></h3></div></div></div><p>
    You can skip this section, if you do not need or want to modify the default
    configuration.
   </p><p>
    One-time VNC sessions are started via the <code class="systemitem">systemd</code> socket
    <code class="systemitem">xvnc.socket</code>. By default it offers six
    configuration blocks: three for VNC viewers (<code class="literal">vnc1</code> to
    <code class="literal">vnc3</code>), and three serving a Java applet
    (<code class="literal">vnchttpd1</code> to <code class="literal">vnchttpd3</code>). By default
    only <code class="literal">vnc1</code> and <code class="literal">vnchttpd1</code> are active.
   </p><p>
    To activate the VNC server socket at boot time, run the following command:
   </p><div class="verbatim-wrap"><pre class="screen">sudo systemctl enable xvnc.socket</pre></div><p>
    To start the socket immediately, run:
   </p><div class="verbatim-wrap"><pre class="screen">sudo systemctl start xvnc.socket</pre></div><p>
    The <code class="command">Xvnc</code> server can be configured via the
    <code class="literal">server_args</code> option. For a list of options, see
    <code class="command">Xvnc --help</code>.
   </p><p>
    When adding custom configurations, make sure they are not using ports that
    are already in use by other configurations, other services, or existing
    persistent VNC sessions on the same host.
   </p><p>
    Activate configuration changes by entering the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl reload xvnc.socket</pre></div><div id="idm139698751605440" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Firewall and VNC Ports</h6><p>
     When activating Remote Administration as described in
     <a class="xref" href="#pro.vnc.one-time.activate" title="Enabling One-time VNC Sessions">Procedure 8.1, “Enabling One-time VNC Sessions”</a>, the ports
     <code class="systemitem">5801</code> and
     <code class="systemitem">5901</code> are opened in the firewall.
     If the network interface serving the VNC sessions is protected by a
     firewall, you need to manually open the respective ports when activating
     additional ports for VNC sessions. See
     <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 15 “Masquerading and Firewalls”</span> for instructions.
    </p></div></div></div><div class="sect1 " id="sec.vnc.persistent"><div class="titlepage"><div><div><h2 class="title" id="sec.vnc.persistent"><span class="number">8.4 </span><span class="name">Persistent VNC Sessions</span> <a title="Permalink" class="permalink" href="#sec.vnc.persistent">#</a></h2></div></div></div><p>
   A persistent session can be accessed from multiple clients simultaneously.
   This is ideal for demonstration purposes where one client has full access
   and all other clients have view-only access. Another use case are trainings
   where the trainer might need access to the trainee's desktop.
  </p><div id="sec.vnc.persistent.connect" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Connecting to a Persistent VNC Session</h6><p>
    To connect to a persistent VNC session, a VNC viewer must be installed.
    Refer to <a class="xref" href="#sec.vnc.viewer" title="8.1. The vncviewer Client">Section 8.1, “The <code class="command">vncviewer</code> Client”</a> for more details.
   </p></div><p>
   There are two types of persistent VNC sessions:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <a class="xref" href="#vnc.persistent.vncserver" title="8.4.1. VNC Session Initiated using vncserver">VNC Session Initiated using <code class="systemitem">vncserver</code></a>
    </p></li><li class="listitem "><p>
     <a class="xref" href="#vnc.persistent.vncmanager" title="8.4.2. VNC Session Initiated using vncmanager">VNC Session Initiated using <code class="systemitem">vncmanager</code></a>
    </p></li></ul></div><div class="sect2 " id="vnc.persistent.vncserver"><div class="titlepage"><div><div><h3 class="title" id="vnc.persistent.vncserver"><span class="number">8.4.1 </span><span class="name">VNC Session Initiated using <code class="systemitem">vncserver</code></span> <a title="Permalink" class="permalink" href="#vnc.persistent.vncserver">#</a></h3></div></div></div><p>
    This type of persistent VNC session is initiated on the server. The session
    and all applications started in this session run regardless of client
    connections until the session is terminated. Access to persistent sessions
    is protected by two possible types of passwords:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      a regular password that grants full access or
     </p></li><li class="listitem "><p>
      an optional view-only password that grants a non-interactive (view-only)
      access.
     </p></li></ul></div><p>
    A session can have multiple client connections of both kinds at once.
   </p><div class="procedure " id="pro.vnc.persistent.activate"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.2: </span><span class="name">Starting a Persistent VNC Session using <code class="command">vncserver</code> </span><a title="Permalink" class="permalink" href="#pro.vnc.persistent.activate">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open a shell and make sure you are logged in as the user that should own
      the VNC session.

     </p></li><li class="step "><p>
      If the network interface serving the VNC sessions is protected by a
      firewall, you need to manually open the port used by your session in the
      firewall. If starting multiple sessions you may alternatively open a
      range of ports. See <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 15 “Masquerading and Firewalls”</span> for details
      on how to configure the firewall.
     </p><p>
      <code class="command">vncserver</code> uses the ports
      <code class="systemitem">5901</code> for display
      <code class="literal">:1</code>, <code class="systemitem">5902</code> for
      display <code class="literal">:2</code>, and so on. For persistent sessions, the
      VNC display and the X display usually have the same number.
     </p></li><li class="step "><p>
      To start a session with a resolution of 1024x769 pixel and with a color
      depth of 16-bit, enter the following command:
     </p><div class="verbatim-wrap"><pre class="screen">vncserver -geometry 1024x768 -depth 16</pre></div><p>
      The <code class="command">vncserver</code> command picks an unused display number
      when none is given and prints its choice. See <code class="command">man 1
      vncserver</code> for more options.
     </p></li></ol></div></div><p>
    When running <code class="command">vncserver</code> for the first time, it asks for a
    password for full access to the session. If needed, you can also provide a
    password for view-only access to the session.
   </p><p>
    The password(s) you are providing here are also used for future sessions
    started by the same user. They can be changed with the
    <code class="command">vncpasswd</code> command.
   </p><div id="idm139698751573968" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Security Considerations</h6><p>
     Make sure to use strong passwords of significant length (eight or more
     characters). Do not share these passwords.
    </p></div><p>
    To terminate the session shut down the desktop environment that runs inside
    the VNC session from the VNC viewer as you would shut it down if it was a
    regular local X session.
   </p><p>
    If you prefer to manually terminate a session, open a shell on the VNC
    server and make sure you are logged in as the user that owns the VNC
    session you want to terminate. Run the following command to terminate the
    session that runs on display <code class="literal">:1</code>: <code class="command">vncserver
    -kill :1</code>
   </p><div class="sect3 " id="sec.vnc.persistent.configure"><div class="titlepage"><div><div><h4 class="title" id="sec.vnc.persistent.configure"><span class="number">8.4.1.1 </span><span class="name">Configuring Persistent VNC Sessions</span> <a title="Permalink" class="permalink" href="#sec.vnc.persistent.configure">#</a></h4></div></div></div><p>
     Persistent VNC sessions can be configured by editing
     <code class="filename">$HOME/.vnc/xstartup</code>. By default this shell script
     starts the same GUI/window manager it was started from. In <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>
     this will either be GNOME or IceWM. If you want to start your session
     with a window manager of your choice, set the variable
     <code class="envar">WINDOWMANAGER</code>:
    </p><div class="verbatim-wrap"><pre class="screen">WINDOWMANAGER=gnome vncserver -geometry 1024x768
WINDOWMANAGER=icewm vncserver -geometry 1024x768</pre></div><div id="idm139698751565888" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: One Configuration for Each User</h6><p>
      Persistent VNC sessions are configured in a single per-user
      configuration. Multiple sessions started by the same user will all use
      the same start-up and password files.
     </p></div></div></div><div class="sect2 " id="vnc.persistent.vncmanager"><div class="titlepage"><div><div><h3 class="title" id="vnc.persistent.vncmanager"><span class="number">8.4.2 </span><span class="name">VNC Session Initiated using <code class="systemitem">vncmanager</code></span> <a title="Permalink" class="permalink" href="#vnc.persistent.vncmanager">#</a></h3></div></div></div><div class="procedure " id="vnc.persistent.vncmanager.enable"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 8.3: </span><span class="name">Enabling Persistent VNC Sessions </span><a title="Permalink" class="permalink" href="#vnc.persistent.vncmanager.enable">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start <span class="guimenu">YaST</span> › <span class="guimenu">Network
      Services</span> › <span class="guimenu">Remote Administration (VNC)</span>.
     </p></li><li class="step "><p>
      Activate <span class="guimenu">Allow Remote Administration With Session
      Management</span>.
     </p></li><li class="step "><p>
      Activate <span class="guimenu">Enable access using a web browser</span> if you plan
      to access the VNC session in a Web browser window.
     </p></li><li class="step "><p>
      If necessary, also check <span class="guimenu">Open Port in Firewall</span> (for
      example, when your network interface is configured to be in the External
      Zone). If you have more than one network interface, restrict opening the
      firewall ports to a specific interface via <span class="guimenu">Firewall
      Details</span>.
     </p></li><li class="step "><p>
      Confirm your settings with <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      In case not all needed packages are available yet, you need to approve
      the installation of missing packages.
     </p><div id="idm139698751551296" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Restart the Display Manager</h6><p>
       YaST makes changes to the display manager settings. You need to log
       out of your current graphical session and restart the display manager
       for the changes to take effect.
      </p></div></li></ol></div></div><div class="sect3 " id="vnc.persistent.vncmanager.configure"><div class="titlepage"><div><div><h4 class="title" id="vnc.persistent.vncmanager.configure"><span class="number">8.4.2.1 </span><span class="name">Configuring Persistent VNC Sessions</span> <a title="Permalink" class="permalink" href="#vnc.persistent.vncmanager.configure">#</a></h4></div></div></div><p>
     After you enable the VNC session management as described in
     <a class="xref" href="#vnc.persistent.vncmanager.enable" title="Enabling Persistent VNC Sessions">Procedure 8.3, “Enabling Persistent VNC Sessions”</a>, you can normally
     connect to the remote session with your favorite VNC viewer, such as
     <code class="command">vncviewer</code> or Remmina. You will be presented with login
     screen. After you log in, the 'VNC' icon will appear in the system tray of
     your desktop environment. Click the icon to open the <span class="guimenu">VNC
     Session</span> window. If it does not appear or if your desktop
     environment does not support icons in the system tray, run
     <code class="command">vncmanager-controller</code> manually.
    </p><div class="figure" id="idm139698751545456"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vncmanager_session.png"><img src="images/vncmanager_session.png" width="" alt="VNC Session Settings" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.8: </span><span class="name">VNC Session Settings </span><a title="Permalink" class="permalink" href="#idm139698751545456">#</a></h6></div></div><p>
     There are several settings which influence the VNC session behavior:
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751539664"><span class="term "><span class="guimenu">Non-persistent, private</span>
      </span></dt><dd><p>
        This is equivalent to one-time session. Such session is not visible to
        others and will be terminated after you disconnect from it. Refer to
        <a class="xref" href="#sec.vnc.one-time" title="8.3. One-time VNC Sessions">Section 8.3, “One-time VNC Sessions”</a> for more information.
       </p></dd><dt id="idm139698751536864"><span class="term "><span class="guimenu">Persistent, visible</span>
      </span></dt><dd><p>
        The session is visible to other users and keeps running even after you
        disconnect from it.
       </p></dd><dt id="idm139698751534688"><span class="term "><span class="guimenu">Session name</span>
      </span></dt><dd><p>
        Here you can specify the name of the persistent session so that it is
        easily identified when reconnecting.
       </p></dd><dt id="idm139698751532496"><span class="term "><span class="guimenu">No password required</span>
      </span></dt><dd><p>
        The session will be freely accessible without having to log in under
        user credentials.
       </p></dd><dt id="idm139698751530320"><span class="term "><span class="guimenu">Require user login</span>
      </span></dt><dd><p>
        You need to log in with a valid user name and password to access the
        session. List the valid user names in the <span class="guimenu">Allowed
        users</span> text box.
       </p></dd><dt id="idm139698751527680"><span class="term "><span class="guimenu">Allow one client at time</span>
      </span></dt><dd><p>
        Disables joining the session by multiple users at the same time.
       </p></dd><dt id="idm139698751525520"><span class="term "><span class="guimenu">Allow multiple clients at time</span>
      </span></dt><dd><p>
        Allows multiple users to join the persistent session at the same time.
        Good for example for remote presentations or trainings.
       </p></dd></dl></div><p>
     Confirm with <span class="guimenu">OK</span>.
    </p></div><div class="sect3 " id="vnc.persistent.vncmanager.join"><div class="titlepage"><div><div><h4 class="title" id="vnc.persistent.vncmanager.join"><span class="number">8.4.2.2 </span><span class="name">Joining Persistent VNC Sessions</span> <a title="Permalink" class="permalink" href="#vnc.persistent.vncmanager.join">#</a></h4></div></div></div><p>
     After you set up a persistent VNC session as described in
     <a class="xref" href="#vnc.persistent.vncmanager.configure" title="8.4.2.1. Configuring Persistent VNC Sessions">Section 8.4.2.1, “Configuring Persistent VNC Sessions”</a>, you can join
     it with your VNC viewer. After the your VNC client connects to the server,
     you will be prompted to choose whether you want to create a new session,
     or join the existing one:
    </p><div class="figure" id="idm139698751519600"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/vncmanager_whether.png"><img src="images/vncmanager_whether.png" width="" alt="Joining a Persistent VNC Session" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.9: </span><span class="name">Joining a Persistent VNC Session </span><a title="Permalink" class="permalink" href="#idm139698751519600">#</a></h6></div></div><p>
     After you click the name of the existing session, you may be asked for
     login credentials, depending on the persistent session settings.
    </p></div></div></div><div class="sect1 " id="sec.vnc.encrypt"><div class="titlepage"><div><div><h2 class="title" id="sec.vnc.encrypt"><span class="number">8.5 </span><span class="name">Encrypted VNC Communication</span> <a title="Permalink" class="permalink" href="#sec.vnc.encrypt">#</a></h2></div></div></div><p>
   If the VNC server is set up properly, all communication between the VNC
   server and the client is encrypted. The authentication happens at the
   beginning of the session, the actual data transfer only begins afterward.
  </p><p>
   Whether for a one-time or a persistent VNC session, security options are
   configured via the <code class="option">-securitytypes</code> parameter of the
   <code class="command">/usr/bin/Xvnc</code> command located on the
   <code class="literal">server_args</code> line. The <code class="option">-securitytypes</code>
   parameter selects both authentication method and encryption. It has the
   following options:
  </p><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Authentications </span><a title="Permalink" class="permalink" href="#idm139698751509280">#</a></h6></div><dl class="variablelist"><dt id="idm139698751508544"><span class="term ">None, TLSNone, X509None</span></dt><dd><p>
      No authentication.
     </p></dd><dt id="idm139698751506736"><span class="term ">VncAuth, TLSVnc, X509Vnc</span></dt><dd><p>
      Authentication using custom password.
     </p></dd><dt id="idm139698751504896"><span class="term ">Plain, TLSPlain, X509Plain</span></dt><dd><p>
      Authentication using PAM to verify user's password.
     </p></dd></dl></div><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Encryptions </span><a title="Permalink" class="permalink" href="#idm139698751502880">#</a></h6></div><dl class="variablelist"><dt id="idm139698751502144"><span class="term ">None, VncAuth, Plain</span></dt><dd><p>
      No encryption.
     </p></dd><dt id="idm139698751500336"><span class="term ">TLSNone, TLSVnc, TLSPlain</span></dt><dd><p>
      Anonymous TLS encryption. Everything is encrypted, but there is no
      verification of the remote host. So you are protected against passive
      attackers, but not against man-in-the-middle attackers.
     </p></dd><dt id="idm139698751498320"><span class="term ">X509None, X509Vnc, X509Plain</span></dt><dd><p>
      TLS encryption with certificate. If you use a self-signed certificate,
      you will be asked to verify it on the first connection. On subsequent
      connections you will be warned only if the certificate changed. So you
      are protected against everything except man-in-the-middle on the first
      connection (similar to typical SSH usage). If you use a certificate
      signed by a certificate authority matching the machine name, then you get
      full security (similar to typical HTTPS usage).
     </p><div id="idm139698751496320" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Path to Certificate and Key</h6><p>
       With X509 based encryption, you need to specify the path to the X509
       certificate and the key with <code class="option">-X509Cert</code> and
       <code class="option">-X509Key</code> options.
      </p></div></dd></dl></div><p>
   If you select multiple security types separated by comma, the first one
   supported and allowed by both client and server will be used. That way you
   can configure opportunistic encryption on the server. This is useful if you
   need to support VNC clients that do not support encryption.
  </p><p>
   On the client, you can also specify the allowed security types to prevent a
   downgrade attack if you are connecting to a server which you know has
   encryption enabled (although our vncviewer will warn you with the
   "Connection not encrypted!" message in that case).
  </p></div></div><div class="chapter " id="cha.net.rsync"><div class="titlepage"><div><div><h2 class="title"><span class="number">9 </span><span class="name">File Copying with RSync</span> <a title="Permalink" class="permalink" href="#cha.net.rsync">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_sync.xml</li><li><span class="ds-label">ID: </span>cha.net.rsync</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698751489136">#</a></h6></div><p>
    Today, a typical user has several computers: home and workplace machines, a
    laptop, a smartphone or a tablet. This makes the task of keeping files and
    documents in sync across multiple devices all more important.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.net.rsync.overview"><span class="number">9.1 </span><span class="name">Conceptual Overview</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.syntax"><span class="number">9.2 </span><span class="name">Basic Syntax</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.local-copy"><span class="number">9.3 </span><span class="name">Copying Files and Directories Locally</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.remote-copy"><span class="number">9.4 </span><span class="name">Copying Files and Directories Remotely</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.server"><span class="number">9.5 </span><span class="name">Configuring and Using an Rsync Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.net.rsync.summary"><span class="number">9.6 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div id="idm139698751486544" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Risk of Data Loss</h6><p>
   Before you start using a synchronization tool, you should familiarize
   yourself with its features and functionality. Make sure to back up your
   important files.
  </p></div><div class="sect1 " id="sec.net.rsync.overview"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.overview"><span class="number">9.1 </span><span class="name">Conceptual Overview</span> <a title="Permalink" class="permalink" href="#sec.net.rsync.overview">#</a></h2></div></div></div><p>
   For synchronizing a large amount of data over a slow network connection,
   Rsync offers a reliable method of transmitting only changes within files.
   This applies not only to text files but also binary files. To detect the
   differences between files, Rsync subdivides the files into blocks and
   computes check sums over them.
  </p><p>
   Detecting changes requires some computing power. So make sure that machines
   on both ends have enough resources, including RAM.
  </p><p>
   Rsync can be particularly useful when large amounts of data containing only
   minor changes need to be transmitted regularly. This is often the case when
   working with backups. Rsync can also be useful for mirroring staging servers
   that store complete directory trees of Web servers to a Web server in a DMZ.
  </p><p>
   Despite its name, Rsync is not a synchronization tool. Rsync is a tool that
   copies data only in one direction at a time. It does not and cannot do the
   reverse. If you need a bidirectional tool which is able to synchronize both
   source and destination, use Csync.
  </p></div><div class="sect1 " id="sec.net.rsync.syntax"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.syntax"><span class="number">9.2 </span><span class="name">Basic Syntax</span> <a title="Permalink" class="permalink" href="#sec.net.rsync.syntax">#</a></h2></div></div></div><p>
   Rsync is a command-line tool that has the following basic syntax:
  </p><div class="verbatim-wrap"><pre class="screen">rsync [OPTION] SOURCE [SOURCE]... DEST</pre></div><p>
   You can use Rsync on any local or remote machine, provided you have access
   and write permissions. It is possible to have multiple
   <em class="replaceable ">SOURCE</em> entries. The
   <em class="replaceable ">SOURCE</em> and <em class="replaceable ">DEST</em>
   placeholders can be paths, URLs, or both.
  </p><p>
   Below are the most common Rsync options:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751476176"><span class="term "><code class="option">-v</code>
    </span></dt><dd><p>
      Outputs more verbose text
     </p></dd><dt id="idm139698751474080"><span class="term "><code class="option">-a</code>
    </span></dt><dd><p>
      Archive mode; copies files recursively and preserves timestamps,
      user/group ownership, file permissions, and symbolic links
     </p></dd><dt id="idm139698751471872"><span class="term "><code class="option">-z</code>
    </span></dt><dd><p>
      Compresses the transmitted data
     </p></dd></dl></div><div id="idm139698751469600" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Trailing Slashes Count</h6><p>
    When working with Rsync, you should pay particular attention to trailing
    slashes. A trailing slash after the directory denotes the
    <span class="emphasis"><em>content</em></span> of the directory. No trailing slash denotes
    the <span class="emphasis"><em>directory itself</em></span>.
   </p></div></div><div class="sect1 " id="sec.net.rsync.local-copy"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.local-copy"><span class="number">9.3 </span><span class="name">Copying Files and Directories Locally</span> <a title="Permalink" class="permalink" href="#sec.net.rsync.local-copy">#</a></h2></div></div></div><p>
   The following description assumes that the current user has write
   permissions to the directory <code class="filename">/var/backup</code>. To copy a
   single file from one directory on your machine to another path, use the
   following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz backup.tar.xz /var/backup/</pre></div><p>
   The file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup/</code>; the absolute path will be
   <code class="filename">/var/backup/backup.tar.xz</code>.
  </p><p>
   Do not forget to add the <span class="emphasis"><em>trailing slash</em></span> after the
   <code class="filename">/var/backup/</code> directory! If you do not insert the slash,
   the file <code class="filename">backup.tar.xz</code> is copied to
   <code class="filename">/var/backup</code> (file) <span class="emphasis"><em>not</em></span> inside the
   directory <code class="filename">/var/backup/</code>!
  </p><p>
   Copying a directory is similar to copying a single file. The following
   example copies the directory <code class="filename">tux/</code> and
   its content into the directory <code class="filename">/var/backup/</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz tux /var/backup/</pre></div><p>
   Find the copy in the absolute path
   <code class="filename">/var/backup/tux/</code>.
  </p></div><div class="sect1 " id="sec.net.rsync.remote-copy"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.remote-copy"><span class="number">9.4 </span><span class="name">Copying Files and Directories Remotely</span> <a title="Permalink" class="permalink" href="#sec.net.rsync.remote-copy">#</a></h2></div></div></div><p>
   The Rsync tool is required on both machines. To copy files from or to remote
   directories requires an IP address or a domain name. A user name is optional
   if your current user names on the local and remote machine are the same.
  </p><p>
   To copy the file <code class="filename">file.tar.xz</code> from your local host to
   the remote host
   <code class="systemitem">192.168.1.1</code> with
   same users (being local and remote), use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz file.tar.xz  tux@192.168.1.1:</pre></div><p>
   Depending on what you prefer, these commands are also possible and
   equivalent:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:~
<code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz file.tar.xz 192.168.1.1:/home/tux</pre></div><p>
   In all cases with standard configuration, you will be prompted to enter your
   passphrase of the remote user. This command will copy
   <code class="filename">file.tar.xz</code> to the home directory of user <code class="systemitem">tux</code>
   (usually <code class="filename">/home/tux</code>).
  </p><p>
   Copying a directory remotely is similar to copying a directory locally. The
   following example copies the directory
   <code class="filename">tux/</code> and its content into the remote
   directory <code class="filename">/var/backup/</code> on the
   <code class="systemitem">192.168.1.1</code> host:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> -avz tux 192.168.1.1:/var/backup/</pre></div><p>
   Assuming you have write permissions on the host
   <code class="systemitem">192.168.1.1</code>, you will
   find the copy in the absolute path
   <code class="filename">/var/backup/tux</code>.
  </p></div><div class="sect1 " id="sec.net.rsync.server"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.server"><span class="number">9.5 </span><span class="name">Configuring and Using an Rsync Server</span> <a title="Permalink" class="permalink" href="#sec.net.rsync.server">#</a></h2></div></div></div><p>
   Rsync can run as a daemon
   (<code class="systemitem">rsyncd</code>) listing on default
   port 873 for incoming connections. This daemon can receive <span class="quote">“<span class="quote">copying
   targets</span>”</span>.
  </p><p>
   The following description explains how to create an Rsync server on
   <code class="systemitem">jupiter</code> with a <span class="emphasis"><em>backup</em></span> target.
   This target can be used to store your backups. To create an Rsync server, do
   the following:
  </p><div class="procedure " id="idm139698751436592"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 9.1: </span><span class="name">Setting Up an Rsync Server </span><a title="Permalink" class="permalink" href="#idm139698751436592">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step " id="st.rsync.server.mkdir"><p>
     On jupiter, create a directory to store all your backup files. In this
     example, we use <code class="filename">/var/backup</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">mkdir</code> /var/backup</pre></div></li><li class="step "><p>
     Specify ownership. In this case, the directory is owned by user
     <code class="systemitem">tux</code> in group
     <code class="systemitem">users</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chown</code> tux.users /var/backup</pre></div></li><li class="step "><p>
     Configure the rsyncd daemon.
    </p><p>
     We will separate the configuration file into a main file and some
     <span class="quote">“<span class="quote">modules</span>”</span> which hold your backup target. This makes it easier
     to add additional targets later. Global values can be stored in
     <code class="filename">/etc/rsyncd.d/*.inc</code> files, whereas your modules are
     placed in <code class="filename">/etc/rsyncd.d/*.conf</code> files:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Create a directory <code class="filename">/etc/rsyncd.d/</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">mkdir</code> /etc/rsyncd.d/</pre></div></li><li class="step "><p>
       In the main configuration file <code class="filename">/etc/rsyncd.conf</code>,
       add the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># rsyncd.conf main configuration file
log file = /var/log/rsync.log
pid file = /var/lock/rsync.lock

&amp;merge /etc/rsyncd.d <span id="co.rsync.conf.merge"></span><span class="callout">1</span>
&amp;include /etc/rsyncd.d <span id="co.rsync.conf.include"></span><span class="callout">2</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.merge"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
         Merges global values from <code class="filename">/etc/rsyncd.d/*.inc</code>
         files into the main configuration file.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.include"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
         Loads any modules (or targets) from
         <code class="filename">/etc/rsyncd.d/*.conf</code> files. These files should
         not contain any references to global values.
        </p></td></tr></table></div></li><li class="step "><p>
       Create your module (your backup target) in the file
       <code class="filename">/etc/rsyncd.d/backup.conf</code> with the following lines:
      </p><div class="verbatim-wrap"><pre class="screen"># backup.conf: backup module
[backup] <span id="co.rsync.conf.target"></span><span class="callout">1</span>
   uid = tux <span id="co.rsync.conf.uid-gid"></span><span class="callout">2</span>
   gid = users <a class="xref" href="#co.rsync.conf.uid-gid"><span class="callout">2</span></a>
   path = /var/backup <span id="co.rsync.conf.path"></span><span class="callout">3</span>
   auth users = tux  <span id="co.rsync.conf.authusers"></span><span class="callout">4</span>
   secrets file = /etc/rsyncd.secrets <span id="co.rsync.conf.secretfiles"></span><span class="callout">5</span>
   comment = Our backup target</pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.target"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
         The <span class="emphasis"><em>backup</em></span> target. You can use any name you like.
         However, it is a good idea to name a target according to its purpose
         and use the same name in your <code class="filename">*.conf</code> file.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.uid-gid"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
         Specifies the user name or group name that is used when the file
         transfer takes place.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.path"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
         Defines the path to store your backups (from
         <a class="xref" href="#st.rsync.server.mkdir" title="Step 1">Step 1</a>).
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.authusers"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
         Specifies a comma-separated list of allowed users. In its simplest
         form, it contains the user names that are allowed to connect to this
         module. In our case, only user <code class="systemitem">tux</code> is allowed.
        </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.rsync.conf.secretfiles"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
         Specifies the path of a file that contains lines with user names and
         plain passwords.
        </p></td></tr></table></div></li><li class="step "><p>
       Create the <code class="filename">/etc/rsyncd.secrets</code> file with the
       following content and replace <em class="replaceable ">PASSPHRASE</em>:
      </p><div class="verbatim-wrap"><pre class="screen"># user:passwd
tux:<em class="replaceable ">PASSPHRASE</em></pre></div></li><li class="step "><p>
       Make sure the file is only readable by <code class="systemitem">root</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chmod</code> 0600 /etc/rsyncd.secrets</pre></div></li></ol></li><li class="step "><p>
     Start and enable the rsyncd daemon with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">systemctl</code> enable rsyncd
<code class="prompt root">root # </code><code class="command">systemctl</code> start rsyncd</pre></div></li><li class="step "><p>
     Test the access to your Rsync server:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">rsync</code> jupiter::</pre></div><p>
     You should see a response that looks like this:
    </p><div class="verbatim-wrap"><pre class="screen">backup          Our backup target</pre></div><p>
     Otherwise, check your configuration file, firewall and network settings.
    </p></li></ol></div></div><p>
   The above steps create an Rsync server that can now be used to store
   backups. The example also creates a log file listing all connections. This
   file is stored in <code class="filename">/var/log/rsyncd.log</code>. This is useful
   if you want to debug your transfers.
  </p><p>
   To list the content of your backup target, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rsync -avz jupiter::backup</pre></div><p>
   This command lists all files present in the directory
   <code class="filename">/var/backup</code> on the server. This request is also logged
   in the log file <code class="filename">/var/log/rsyncd.log</code>. To start an actual
   transfer, provide a source directory. Use <code class="literal">.</code> for the
   current directory. For example, the following command copies the current
   directory to your Rsync backup server:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rsync -avz . jupiter::backup</pre></div><p>
   By default, Rsync does not delete files and directories when it runs. To
   enable deletion, the additional option <code class="option">--delete</code> must be
   stated. To ensure that no newer files are deleted, the option
   <code class="option">--update</code> can be used instead. Any conflicts that arise must
   be resolved manually.
  </p></div><div class="sect1 " id="sec.net.rsync.summary"><div class="titlepage"><div><div><h2 class="title" id="sec.net.rsync.summary"><span class="number">9.6 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.net.rsync.summary">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698751380352"><span class="term ">CSync</span></dt><dd><p>
      Bidirectional file synchronizer, see
      <a class="link" href="https://www.csync.org/" target="_blank">https://www.csync.org/</a>.
     </p></dd><dt id="idm139698751377968"><span class="term ">RSnapshot</span></dt><dd><p>
      Creates incremental backups, see
      <a class="link" href="http://rsnapshot.org" target="_blank">http://rsnapshot.org</a>.
     </p></dd><dt id="idm139698751375584"><span class="term ">Unison</span></dt><dd><p>
      A file synchronizer similar to CSync but with a graphical interface, see
      <a class="link" href="http://www.seas.upenn.edu/~bcpierce/unison/" target="_blank">http://www.seas.upenn.edu/~bcpierce/unison/</a>.
     </p></dd><dt id="idm139698751373136"><span class="term ">Rear</span></dt><dd><p>
      A disaster recovery framework, see the <em class="citetitle ">Administration
      Guide</em> of the SUSE Linux Enterprise High Availability Extension
      <a class="link" href="https://www.suse.com/documentation/sle-ha-12/" target="_blank">https://www.suse.com/documentation/sle-ha-12/</a>.
     </p></dd></dl></div></div></div><div class="chapter " id="cha.gnome.gconf"><div class="titlepage"><div><div><h2 class="title"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span> <a title="Permalink" class="permalink" href="#cha.gnome.gconf">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>gnome_admin.xml</li><li><span class="ds-label">ID: </span>cha.gnome.gconf</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.gnome.gconf.autostart"><span class="number">10.1 </span><span class="name">Starting Applications Automatically</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.automount"><span class="number">10.2 </span><span class="name">Automounting and Managing Media Devices</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.pref_app"><span class="number">10.3 </span><span class="name">Changing Preferred Applications</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.templates"><span class="number">10.4 </span><span class="name">Adding Document Templates</span></a></span></dt><dt><span class="sect1"><a href="#sec.gnome.gconf.info"><span class="number">10.5 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><p>
  This chapter introduces GNOME configuration options which administrators
  can use to adjust system-wide settings, such as customizing menus,
  installing themes, configuring fonts, changing preferred applications, and
  locking down capabilities.
 </p><p>
  These configuration options are stored in the GConf system. Access the
  GConf system with tools such as the <code class="command">gconftool-2</code> command
  line interface or the <code class="command">gconf-editor</code> GUI tool.
 </p><div class="sect1 " id="sec.gnome.gconf.autostart"><div class="titlepage"><div><div><h2 class="title" id="sec.gnome.gconf.autostart"><span class="number">10.1 </span><span class="name">Starting Applications Automatically</span> <a title="Permalink" class="permalink" href="#sec.gnome.gconf.autostart">#</a></h2></div></div></div><p>
   To automatically start applications in GNOME, use one of the following
   methods:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><span class="formalpara-title">To run applications for each user: </span>
      Put <code class="filename">.desktop</code> files in
      <code class="filename">/usr/share/gnome/autostart</code>.
     </p></li><li class="listitem "><p><span class="formalpara-title">To run applications for an individual user: </span>
      Put <code class="filename">.desktop</code> files in
      <code class="filename">~/.config/autostart</code>.
     </p></li></ul></div><p>
   To disable an application that starts automatically, add
   <code class="literal">X-Autostart-enabled=false</code> to the
   <code class="filename">.desktop</code> file.
  </p></div><div class="sect1 " id="sec.gnome.gconf.automount"><div class="titlepage"><div><div><h2 class="title" id="sec.gnome.gconf.automount"><span class="number">10.2 </span><span class="name">Automounting and Managing Media Devices</span> <a title="Permalink" class="permalink" href="#sec.gnome.gconf.automount">#</a></h2></div></div></div><p>
   GNOME Files (<code class="command">nautilus</code>) monitors volume-related events and
   responds with a user-specified policy. You can use GNOME Files to
   automatically mount hotplugged drives and inserted removable media,
   automatically run programs, and play audio CDs or video DVDs. GNOME Files
   can also automatically import photos from a digital camera.
  </p><p>
   System administrators can set system-wide defaults. For more information,
   see <a class="xref" href="#sec.gnome.gconf.pref_app" title="10.3. Changing Preferred Applications">Section 10.3, “Changing Preferred Applications”</a>.
  </p></div><div class="sect1 " id="sec.gnome.gconf.pref_app"><div class="titlepage"><div><div><h2 class="title" id="sec.gnome.gconf.pref_app"><span class="number">10.3 </span><span class="name">Changing Preferred Applications</span> <a title="Permalink" class="permalink" href="#sec.gnome.gconf.pref_app">#</a></h2></div></div></div><p>
   To change users' preferred applications, edit
   <code class="filename">/etc/gnome_defaults.conf</code>. Find further hints within
   this file.
  </p><p>
   For more information about MIME types, see
   <a class="link" href="http://www.freedesktop.org/Standards/shared-mime-info-spec" target="_blank">http://www.freedesktop.org/Standards/shared-mime-info-spec</a>.
  </p></div><div class="sect1 " id="sec.gnome.gconf.templates"><div class="titlepage"><div><div><h2 class="title" id="sec.gnome.gconf.templates"><span class="number">10.4 </span><span class="name">Adding Document Templates</span> <a title="Permalink" class="permalink" href="#sec.gnome.gconf.templates">#</a></h2></div></div></div><p>
   To add document templates for users, fill in the
   <code class="filename">Templates</code> directory in a user's home directory. You
   can do this manually for each user by copying the files into
   <code class="filename">~/Templates</code>, or system-wide by adding a
   <code class="filename">Templates</code> directory with documents to
   <code class="filename">/etc/skel</code> before the user is created.
  </p><p>
   A user creates a new document from a template by right-clicking the
   desktop and selecting <span class="guimenu">Create Document</span>.
  </p></div><div class="sect1 " id="sec.gnome.gconf.info"><div class="titlepage"><div><div><h2 class="title" id="sec.gnome.gconf.info"><span class="number">10.5 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.gnome.gconf.info">#</a></h2></div></div></div><p>
   For more information, see
   <a class="link" href="http://help.gnome.org/admin/" target="_blank">http://help.gnome.org/admin/</a>.
  </p></div></div></div><div class="part" id="part.boot"><div class="titlepage"><div><div><h1 class="title"><span class="number">Part II </span><span class="name">Booting a Linux System </span><a title="Permalink" class="permalink" href="#part.boot">#</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.boot"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span></a></span></dt><dd class="toc-abstract"><p>
    Booting a Linux system involves different components and tasks. The
    hardware itself is initialized by the BIOS or the UEFI, which starts the
    kernel by means of a boot loader. After this point, the boot process is
    completely controlled by the operating system and handled by <code class="systemitem">systemd</code>.
    <code class="systemitem">systemd</code> provides a set of <span class="quote">“<span class="quote">targets</span>”</span> that boot setups for
    everyday usage, maintenance or emergencies.
   </p></dd><dt><span class="chapter"><a href="#cha.uefi"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></span></dt><dd class="toc-abstract"><p>
  UEFI (Unified Extensible Firmware Interface) is the interface between the
  firmware that comes with the system hardware, all the hardware components of
  the system, and the operating system.
 </p></dd><dt><span class="chapter"><a href="#cha.grub2"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span></a></span></dt><dd class="toc-abstract"><p>
    This chapter describes how to configure GRUB 2, the boot loader used in
    <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span>. It is the successor to the traditional GRUB boot
    loader—now called <span class="quote">“<span class="quote">GRUB Legacy</span>”</span>.
    <span class="phrase">GRUB 2 has been the default boot loader in
    <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> since version 12.</span> A YaST module is available
    for configuring the most important settings. The boot procedure as a whole
    is outlined in <a class="xref" href="#cha.boot" title="Chapter 11. Introduction to the Booting Process">Chapter 11, <em>Introduction to the Booting Process</em></a>. For details on Secure Boot
    support for UEFI machines, see <a class="xref" href="#cha.uefi" title="Chapter 12. UEFI (Unified Extensible Firmware Interface)">Chapter 12, <em>UEFI (Unified Extensible Firmware Interface)</em></a>.
   </p></dd><dt><span class="chapter"><a href="#cha.systemd"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span></a></span></dt><dd class="toc-abstract"><p>The program systemd is the process with process ID 1. It is responsible for initializing the system in the required way. systemd is started directly by the kernel and resists signal 9, which normally terminates processes. All other programs are either started directly by systemd or by one of its chi…</p></dd></dl></div><div class="chapter " id="cha.boot"><div class="titlepage"><div><div><h2 class="title"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span> <a title="Permalink" class="permalink" href="#cha.boot">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>bootconcept.xml</li><li><span class="ds-label">ID: </span>cha.boot</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698751335296">#</a></h6></div><p>
    Booting a Linux system involves different components and tasks. The
    hardware itself is initialized by the BIOS or the UEFI, which starts the
    kernel by means of a boot loader. After this point, the boot process is
    completely controlled by the operating system and handled by <code class="systemitem">systemd</code>.
    <code class="systemitem">systemd</code> provides a set of <span class="quote">“<span class="quote">targets</span>”</span> that boot setups for
    everyday usage, maintenance or emergencies.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.boot.proc"><span class="number">11.1 </span><span class="name">The Linux Boot Process</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.initrd"><span class="number">11.2 </span><span class="name"><code class="systemitem">initramfs</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.linuxrc"><span class="number">11.3 </span><span class="name">Init on <code class="systemitem">initramfs</code></span></a></span></dt></dl></div></div><div class="sect1 " id="sec.boot.proc"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.proc"><span class="number">11.1 </span><span class="name">The Linux Boot Process</span> <a title="Permalink" class="permalink" href="#sec.boot.proc">#</a></h2></div></div></div><p>
   The Linux boot process consists of several stages, each represented by a
   different component. The following list briefly summarizes the boot process
   and features all the major components involved:
  </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p><span class="formalpara-title">BIOS/UEFI. </span>
      After turning on the computer, the BIOS or the UEFI initializes the
      screen and keyboard, and tests the main memory. Up to this stage, the
      machine does not access any mass storage media. Subsequently, the
      information about the current date, time, and the most important
      peripherals are loaded from the CMOS values. When the first hard disk and
      its geometry are recognized, the system control passes from the BIOS to
      the boot loader. If the BIOS supports network booting, it is also
      possible to configure a boot server that provides the boot loader. On
      AMD64/Intel 64 systems, PXE boot is needed. Other architectures
      commonly use the BOOTP protocol to get the boot loader.
      For more information on UEFI, refer to <a class="xref" href="#cha.uefi" title="Chapter 12. UEFI (Unified Extensible Firmware Interface)">Chapter 12, <em>UEFI (Unified Extensible Firmware Interface)</em></a>.
     </p></li><li class="listitem "><p><span class="formalpara-title">Boot Loader. </span>
      The first physical 512-byte data sector of the first hard disk is loaded
      into the main memory and the <span class="emphasis"><em>boot loader</em></span> that
      resides at the beginning of this sector takes over. The commands executed
      by the boot loader determine the remaining part of the boot process.
      Therefore, the first 512 bytes on the first hard disk are called the
      <span class="emphasis"><em>Master Boot Record</em></span> (MBR). The boot loader then
      passes control to the actual operating system, in this case, the Linux
      kernel. More information about GRUB 2, the Linux boot loader, can be
      found in <a class="xref" href="#cha.grub2" title="Chapter 13. The Boot Loader GRUB 2">Chapter 13, <em>The Boot Loader GRUB 2</em></a>. For a network boot, the BIOS acts
      as the boot loader. It gets the boot image from the boot server and
      starts the system. This is completely independent of local hard disks.
     </p><p>
     If the root file system fails to mount from within the boot environment,
     it must be checked and repaired before the boot can continue. The file
     system checker will be automatically started for Ext3 and Ext4 file
     systems. The repair process is not automated for XFS and Btrfs file
     systems, and the user is be presented with information describing the
     options available to repair the file system. When the file system has been
     successfully repaired, exiting the boot environment will cause the system
     to retry mounting the root file system. If successful, the boot will
     continue normally.
    </p></li><li class="listitem "><p><span class="formalpara-title">Kernel and <code class="systemitem">initramfs</code>. </span>
      To pass system control, the boot loader loads both the kernel and an
      initial RAM-based file system (<code class="systemitem">initramfs</code>) into
      memory. The contents of the <code class="systemitem">initramfs</code> can be
      used by the kernel directly. <code class="systemitem">initramfs</code> contains
      a small executable called <code class="systemitem">init</code> that handles the
      mounting of the real root file system. If special hardware drivers are
      needed before the mass storage can be accessed, they must be in
      <code class="systemitem">initramfs</code>. For more information about
      <code class="systemitem">initramfs</code>, refer to
      <a class="xref" href="#sec.boot.initrd" title="11.2. initramfs">Section 11.2, “<code class="systemitem">initramfs</code>”</a>. If the system does not have a
      local hard disk, the <code class="systemitem">initramfs</code> must provide the
      root file system for the kernel. This can be done using a network block
      device like iSCSI or SAN, but it is also possible to use NFS as the root
      device.
     </p><div id="idm139698751314000" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: The <code class="systemitem">init</code> Process Naming</h6><p>
      Two different programs are commonly named <span class="quote">“<span class="quote">init</span>”</span>:
     </p><div class="orderedlist "><ol class="orderedlist" type="a"><li class="listitem "><p>
        the <code class="systemitem">initramfs</code> process mounting the root file
        system
       </p></li><li class="listitem "><p>
        the operating system process setting up the system
       </p></li></ol></div><p>
      In this chapter we will therefore refer to them as
      <span class="quote">“<span class="quote"><code class="systemitem">init</code> on
      <code class="systemitem">initramfs</code></span>”</span> and <span class="quote">“<span class="quote"><code class="systemitem">systemd</code></span>”</span>,
      respectively.
     </p></div></li><li class="listitem "><p><span class="formalpara-title"><code class="systemitem">init</code> on <code class="systemitem">initramfs</code>. </span>
      This program performs all actions needed to mount the proper root file
      system. It provides kernel functionality for the needed file system and
      device drivers for mass storage controllers with
      <code class="systemitem">udev</code>. After the root file system
      has been found, it is checked for errors and mounted. If this is
      successful, the <code class="systemitem">initramfs</code> is cleaned and the
      <code class="systemitem">systemd</code> daemon on the root file system is executed. For more
      information about <code class="systemitem">init</code> on
      <code class="systemitem">initramfs</code>, refer to
      <a class="xref" href="#sec.boot.linuxrc" title="11.3. Init on initramfs">Section 11.3, “Init on <code class="systemitem">initramfs</code>”</a>. Find more information about
      <code class="systemitem">udev</code> in
      <a class="xref" href="#cha.udev" title="Chapter 23. Dynamic Kernel Device Management with udev">Chapter 23, <em>Dynamic Kernel Device Management with <code class="systemitem">udev</code></em></a>.
     </p></li><li class="listitem "><p><span class="formalpara-title"><code class="systemitem">systemd</code>. </span>
      By starting services and mounting file systems, <code class="systemitem">systemd</code> handles the
      actual booting of the system. <code class="systemitem">systemd</code> is described in
      <a class="xref" href="#cha.systemd" title="Chapter 14. The systemd Daemon">Chapter 14, <em>The <code class="systemitem">systemd</code> Daemon</em></a>.
     </p></li></ol></div></div><div class="sect1 " id="sec.boot.initrd"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.initrd"><span class="number">11.2 </span><span class="name"><code class="systemitem">initramfs</code></span> <a title="Permalink" class="permalink" href="#sec.boot.initrd">#</a></h2></div></div></div><p>
   <code class="systemitem">initramfs</code> is a small cpio archive that the kernel
   can load into a RAM disk. It provides a minimal Linux environment that
   enables the execution of programs before the actual root file system is
   mounted. This minimal Linux environment is loaded into memory by BIOS or
   UEFI routines and does not have specific hardware requirements other than
   sufficient memory. The <code class="systemitem">initramfs</code> archive must
   always provide an executable named <code class="systemitem">init</code> that
   executes the <code class="systemitem">systemd</code> daemon on the root file system for the boot process
   to proceed.
  </p><p>
   Before the root file system can be mounted and the operating system can be
   started, the kernel needs the corresponding drivers to access the device on
   which the root file system is located. These drivers may include special
   drivers for certain kinds of hard disks or even network drivers to access a
   network file system. The needed modules for the root file system may be
   loaded by <code class="systemitem">init</code> on
   <code class="systemitem">initramfs</code>. After the modules are loaded,
   <code class="systemitem">udev</code> provides the
   <code class="systemitem">initramfs</code> with the needed devices. Later in the
   boot process, after changing the root file system, it is necessary to
   regenerate the devices. This is done by the <code class="systemitem">systemd</code> unit
   <code class="filename">udev.service</code> with the command
   <code class="command">udevtrigger</code>.
  </p><p>
   If you need to change hardware (for example, hard disks), and this hardware requires different drivers to be in the kernel at
   boot time, you must update the <code class="systemitem">initramfs</code> file. This
   is done by calling <code class="command">dracut</code> <code class="option">-f</code> (the option
   <code class="option">-f</code> overwrites the existing initramfs file). To add a driver
   for the new hardware, edit
   <code class="filename">/etc/dracut.conf.d/01-dist.conf</code> and add the following
   line. If the file does not exist, create it.
  </p><div class="verbatim-wrap"><pre class="screen">force_drivers+="<em class="replaceable ">DRIVER1</em>"</pre></div><p>
   Replace <em class="replaceable ">DRIVER1</em> with the module name of the
   driver. If you need to add more than one driver, list them space-separated
   (<code class="literal"><em class="replaceable ">DRIVER1</em>
   <em class="replaceable ">DRIVER2</em></code>).
  </p><div id="idm139698751279328" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Updating <code class="systemitem">initramfs</code> or <code class="systemitem">init</code></h6><p>
    The boot loader loads <code class="systemitem">initramfs</code> or
    <code class="systemitem">init</code> in the same way as the kernel. It is not
    necessary to re-install GRUB 2 after updating
    <code class="systemitem">initramfs</code> or <code class="systemitem">init</code>,
    because GRUB 2 searches the directory for the right file when booting.
   </p></div><div id="idm139698751275296" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Changing Kernel Variables</h6><p>
    If you change the values of kernel variables via the
    <code class="command">sysctl</code> interface by editing related files
    (<code class="filename">/etc/sysctl.conf</code> or
    <code class="filename">/etc/sysctl.d/*.conf</code>), the change will be lost on the
    next system reboot. Even if you load the values with <code class="command">sysctl
    --system</code> at runtime, the changes are not saved into the initramfs
    file. You need to update it by calling <code class="command">dracut</code>
    <code class="option">-f</code> (the option <code class="option">-f</code> overwrites the existing
    initramfs file).
   </p></div></div><div class="sect1 " id="sec.boot.linuxrc"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.linuxrc"><span class="number">11.3 </span><span class="name">Init on <code class="systemitem">initramfs</code></span> <a title="Permalink" class="permalink" href="#sec.boot.linuxrc">#</a></h2></div></div></div><p>
   The main purpose of <code class="systemitem">init</code> on
   <code class="systemitem">initramfs</code> is to prepare the mounting of and access
   to the real root file system. Depending on your system configuration,
   <code class="systemitem">init</code> on <code class="systemitem">initramfs</code> is
   responsible for the following tasks.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751266240"><span class="term ">Loading Kernel Modules</span></dt><dd><p>
      Depending on your hardware configuration, special drivers may be needed
      to access the hardware components of your computer (the most important
      component being your hard disk). To access the final root file system,
      the kernel needs to load the proper file system drivers.
     </p></dd><dt id="idm139698751264160"><span class="term ">Providing Block Special Files</span></dt><dd><p>
      For each loaded module, the kernel generates device events.
      <code class="systemitem">udev</code> handles these events and
      generates the required special block files on a RAM file system in
      <code class="filename">/dev</code>. Without those special files, the file system
      and other devices would not be accessible.
     </p></dd><dt id="idm139698751260944"><span class="term ">Managing RAID and LVM Setups</span></dt><dd><p>
      If you configured your system to hold the root file system under RAID or
      LVM, <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>
      sets up LVM or RAID to enable access to the root file system later.
     </p><p>
      To change your <code class="filename">/usr</code> or
      <code class="systemitem">swap</code> partitions directly without the help of
      YaST, further actions are needed. If you forget these steps, your
      system will start in emergency mode. To avoid starting in emergency mode,
      perform the following steps:
     </p><div class="procedure " id="pro.boot.linuxrc.lvm"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 11.1: </span><span class="name">Updating Init RAM Disk When Switching to Logical Volumes </span><a title="Permalink" class="permalink" href="#pro.boot.linuxrc.lvm">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Edit the corresponding entry in <code class="filename">/etc/fstab</code> and
        replace your previous partitions with the logical volume.
       </p></li><li class="step "><p>
        Execute the following commands:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">mount</code> -a
<code class="prompt root">root # </code><code class="command">swapon</code> -a</pre></div></li><li class="step "><p>
        Regenerate your initial RAM disk (initramfs) with
        <code class="command">mkinitrd</code> or <code class="command">dracut</code>.
       </p></li><li class="step "><p>
        For z Systems, additionally run <code class="command">grub2-install</code>.
       </p></li></ol></div></div><p>
      Find more information about RAID and LVM in
      <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 11 “Advanced Disk Setup”</span>.
     </p></dd><dt id="ve.net"><span class="term ">Managing Network Configuration</span></dt><dd><p>
      If you configured your system to use a network-mounted root file system
      (mounted via NFS), <code class="systemitem">init</code> on
      <code class="systemitem">initramfs</code> must make sure that the proper network
      drivers are loaded and that they are set up to allow access to the root
      file system.
     </p><p>
      If the file system resides on a network block device like iSCSI or SAN,
      the connection to the storage server is also set up by
      <code class="systemitem">init</code> on <code class="systemitem">initramfs</code>.
      <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> supports booting from a secondary iSCSI target if the
      primary target is not available. .
     </p></dd></dl></div><p>
   When <code class="systemitem">init</code> on <code class="systemitem">initramfs</code> is
   called during the initial boot as part of the installation process, its
   tasks differ from those mentioned above:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751238320"><span class="term ">Finding the Installation Medium</span></dt><dd><p>
      When starting the installation process, your machine loads an
      installation kernel and a special <code class="systemitem">init</code>
      containing the YaST installer. The YaST installer is running in a RAM
      file system and needs to have information about the location of the
      installation medium to access it for installing the operating system.
     </p></dd><dt id="idm139698751235744"><span class="term ">
      Initiating Hardware Recognition and Loading Appropriate Kernel Modules
     </span></dt><dd><p>
      As mentioned in <a class="xref" href="#sec.boot.initrd" title="11.2. initramfs">Section 11.2, “<code class="systemitem">initramfs</code>”</a>, the boot process
      starts with a minimum set of drivers that can be used with most hardware
      configurations. <code class="systemitem">init</code> starts an initial hardware
      scanning process that determines the set of drivers suitable for your
      hardware configuration. These drivers are used to generate a custom
      <code class="systemitem">initramfs</code> that is needed to boot the system. If
      the modules are not needed for boot but for coldplug, the modules can be
      loaded with <code class="systemitem">systemd</code>; for more information, see
      <a class="xref" href="#sec.boot.systemd.advanced.kernel_modules" title="14.6.4. Loading Kernel Modules">Section 14.6.4, “Loading Kernel Modules”</a>.

     </p></dd><dt id="idm139698751230688"><span class="term ">Loading the Installation System</span></dt><dd><p>
      When the hardware is properly recognized, the appropriate drivers are
      loaded. The <code class="systemitem">udev</code> program creates
      the special device files and <code class="systemitem">init</code> starts the
      installation system with the YaST installer.
     </p></dd><dt id="idm139698751227552"><span class="term ">Starting YaST</span></dt><dd><p>
      Finally, <code class="systemitem">init</code> starts YaST, which starts
      package installation and system configuration.
     </p></dd></dl></div></div></div><div class="chapter " id="cha.uefi"><div class="titlepage"><div><div><h2 class="title"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span> <a title="Permalink" class="permalink" href="#cha.uefi">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>uefi.xml</li><li><span class="ds-label">ID: </span>cha.uefi</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.uefi.secboot"><span class="number">12.1 </span><span class="name">Secure Boot</span></a></span></dt><dt><span class="sect1"><a href="#sec.uefi.moreinfo"><span class="number">12.2 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><p>
  UEFI (Unified Extensible Firmware Interface) is the interface between the
  firmware that comes with the system hardware, all the hardware components of
  the system, and the operating system.
 </p><p>
  UEFI is becoming more and more available on PC systems and thus is replacing
  the traditional PC-BIOS. UEFI, for example, properly supports 64-bit systems
  and offers secure booting (<span class="quote">“<span class="quote">Secure Boot</span>”</span>, firmware version
  2.3.1c or better required), which is one of its most important features.
  Lastly, with UEFI a standard firmware will become available on all x86
  platforms.
 </p><p>
  UEFI additionally offers the following advantages:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Booting from large disks (over 2 TiB) with a GUID Partition Table (GPT).
   </p></li><li class="listitem "><p>
    CPU-independent architecture and drivers.
   </p></li><li class="listitem "><p>
    Flexible pre-OS environment with network capabilities.
   </p></li><li class="listitem "><p>
    CSM (Compatibility Support Module) to support booting legacy operating
    systems via a PC-BIOS-like emulation.
   </p></li></ul></div><p>
  For more information, see
  <a class="link" href="http://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface" target="_blank">http://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface</a>.
  The following sections are not meant as a general UEFI overview; these are
  only hints about how some features are implemented in <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
 </p><div class="sect1 " id="sec.uefi.secboot"><div class="titlepage"><div><div><h2 class="title" id="sec.uefi.secboot"><span class="number">12.1 </span><span class="name">Secure Boot</span> <a title="Permalink" class="permalink" href="#sec.uefi.secboot">#</a></h2></div></div></div><p>
   In the world of UEFI, securing the bootstrapping process means establishing
   a chain of trust. The <span class="quote">“<span class="quote">platform</span>”</span> is the root of this chain of
   trust; in the context of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, the mainboard and the on-board firmware
   could be considered the <span class="quote">“<span class="quote">platform</span>”</span>. In other words, it is the hardware vendor, and the chain of trust flows from
   that hardware vendor to the component manufacturers, the OS vendors, etc.
  </p><p>
   The trust is expressed via public key cryptography. The hardware vendor puts
   a so-called Platform Key (PK) into the firmware, representing the root of
   trust. The trust relationship with operating system vendors and others is
   documented by signing their keys with the Platform Key.
  </p><p>
   Finally, security is established by requiring that no code will be executed
   by the firmware unless it has been signed by one of these
   <span class="quote">“<span class="quote">trusted</span>”</span> keys—be it an OS boot loader, some driver
   located in the flash memory of some PCI Express card or on disk, or be it an
   update of the firmware itself.
  </p><p>
   To use Secure Boot, you need to have your OS loader signed with
   a key trusted by the firmware, and you need the OS loader to verify that the
   kernel it loads can be trusted.
  </p><p>

   Key Exchange Keys (KEK) can be added to the UEFI key database. This way, you
   can use other certificates, as long as they are signed with the private part
   of the PK.

  </p><div class="sect2 " id="sec.uefi.secboot.sle"><div class="titlepage"><div><div><h3 class="title" id="sec.uefi.secboot.sle"><span class="number">12.1.1 </span><span class="name">Implementation on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <a title="Permalink" class="permalink" href="#sec.uefi.secboot.sle">#</a></h3></div></div></div><p>
    Microsoft’s Key Exchange Key (KEK) is installed by default.
   </p><div id="idm139698751201408" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: GUID Partitioning Table (GPT) Required</h6><p>
     The Secure Boot feature is enabled by default on UEFI/x86_64
     installations. You can find the <span class="guimenu">Enable Secure Boot
     Support</span> option in the <span class="guimenu">Boot Code Options</span> tab
     of the <span class="guimenu">Boot Loader Settings</span> dialog. It supports booting
     when the secure boot is activated in the firmware, while making it
     possible to boot when it is deactivated.
    </p><div class="figure" id="idm139698751198624"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_bootloader_boot_code_efi.png"><img src="images/yast2_bootloader_boot_code_efi.png" width="" alt="Secure Boot Support" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 12.1: </span><span class="name">Secure Boot Support </span><a title="Permalink" class="permalink" href="#idm139698751198624">#</a></h6></div></div><p>
     The Secure Boot feature requires that a GUID Partitioning Table (GPT)
     replaces the old partitioning with a Master Boot Record (MBR). If YaST
     detects EFI mode during the installation, it will try to create a GPT
     partition. UEFI expects to find the EFI programs on a FAT-formatted EFI
     System Partition (ESP).
    </p></div><p>
    Supporting UEFI Secure Boot essentially requires having a boot loader with
    a digital signature that the firmware recognizes as a trusted key. That key
    is trusted by the firmware a priori, without requiring any manual
    intervention.
   </p><p>
    There are two ways of getting there. One is to work with hardware vendors
    to have them endorse a SUSE key, which SUSE then signs the boot loader
    with. The other way is to go through Microsoft’s Windows Logo
    Certification program to have the boot loader certified and have Microsoft
    recognize the SUSE signing key (that is, have it signed with their KEK). By
    now, SUSE got the loader signed by UEFI Signing Service (that is Microsoft
    in this case).
   </p><div class="figure" id="fig.uefi.secure.boot.mok2"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/uefi-secure-boot-mok2.png"><img src="images/uefi-secure-boot-mok2.png" width="" alt="UEFI: Secure Boot Process" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 12.2: </span><span class="name">UEFI: Secure Boot Process </span><a title="Permalink" class="permalink" href="#fig.uefi.secure.boot.mok2">#</a></h6></div></div><p>
    At the implementation layer, SUSE uses the <code class="systemitem">shim</code>
    loader which is installed by default. It is a smart solution that avoids
    legal issues, and simplifies the certification and signing step
    considerably. The <code class="systemitem">shim</code> loader’s job is to load a
    boot loader such as GRUB 2 and verify it; this boot loader in
    turn will load kernels signed by a SUSE key only. <span class="phrase">SUSE provides this
    functionality since SLE11 SP3 on fresh installations with UEFI Secure Boot
    enabled.</span>
   </p><p>
    There are two types of trusted users:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      First, those who hold the keys. The Platform Key (PK) allows almost
      everything. The Key Exchange Key (KEK) allows all a PK can except
      changing the PK.
     </p></li><li class="listitem "><p>
      Second, anyone with physical access to the machine. A user with physical
      access can reboot the machine, and configure UEFI.
     </p></li></ul></div><p>
    UEFI offers two types of variables to fulfill the needs of those users:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      The first is the so-called <span class="quote">“<span class="quote">Authenticated Variables</span>”</span>, which
      can be updated from both within the boot process (the so-called Boot
      Services Environment) and the running OS. This can be done only when the new value of
      the variable is signed with the same key that the old value of the
      variable was signed with. And they can only be appended to or changed to
      a value with a higher serial number.
     </p></li><li class="listitem "><p>
      The second is the so-called <span class="quote">“<span class="quote">Boot Services Only Variables</span>”</span>.
      These variables are accessible to any code that runs during the boot
      process. After the boot process ends and before the OS starts, the boot
      loader must call the <code class="literal">ExitBootServices</code> call. After
      that, these variables are no longer accessible, and the OS cannot touch
      them.
     </p></li></ul></div><p>
    The various UEFI key lists are of the first type, as this allows online
    updating, adding, and blacklisting of keys, drivers, and firmware
    fingerprints. It is the second type of variable, the <span class="quote">“<span class="quote">Boot Services
    Only Variable</span>”</span>, that helps to implement Secure Boot in a secure and
    open source-friendly manner, and thus compatible with
    GPLv3.
   </p><p>
    SUSE starts with <code class="systemitem">shim</code>—a small and simple EFI
    boot loader signed by SUSE and Microsoft.
   </p><p>
    This allows <code class="systemitem">shim</code> to load and execute.
   </p><p>
    <code class="systemitem">shim</code> then goes on to verify that the boot loader
    it wants to load is trusted.

    In a default situation <code class="systemitem">shim</code> will use an
    independent SUSE certificate embedded in its body. In addition,
    <code class="systemitem">shim</code> will allow to <span class="quote">“<span class="quote">enroll</span>”</span>
    additional keys, overriding the default SUSE key. In the following, we call
    them <span class="quote">“<span class="quote">Machine Owner Keys</span>”</span> or MOKs for short.
   </p><p>
    Next the boot loader will verify and then boot the kernel, and the kernel
    will do the same on the modules.
   </p></div><div class="sect2 " id="sec.uefi.secboot.mok"><div class="titlepage"><div><div><h3 class="title" id="sec.uefi.secboot.mok"><span class="number">12.1.2 </span><span class="name">MOK (Machine Owner Key)</span> <a title="Permalink" class="permalink" href="#sec.uefi.secboot.mok">#</a></h3></div></div></div><p>
    If the user (<span class="quote">“<span class="quote">machine owner</span>”</span>) wants to replace any components
    of the boot process, Machine Owner Keys (MOKs) are to be used. The
    <code class="systemitem">mokutils</code> tool will help with signing components
    and managing MOKs.
   </p><p>
    The enrollment process begins with rebooting the machine and interrupting
    the boot process (for example, pressing a key) when
    <code class="systemitem">shim</code> loads. <code class="systemitem">shim</code> will
    then go into enrollment mode, allowing the user to replace the default SUSE
    key with keys from a file on the boot partition. If the user chooses to do
    so, <code class="systemitem">shim</code> will then calculate a hash of that file
    and put the result in a <span class="quote">“<span class="quote">Boot Services Only</span>”</span> variable. This
    allows <code class="systemitem">shim</code> to detect any change of the file made
    outside of Boot Services and thus avoid tampering with the list of
    user-approved MOKs.
   </p><p>
    All of this happens during boot time—only verified code is executing
    now. Therefore, only a user present at the console can use the machine
    owner's set of keys. It cannot be malware or a hacker with remote access to
    the OS because hackers or malware can only change the file, but not the
    hash stored in the <span class="quote">“<span class="quote">Boot Services Only</span>”</span> variable.
   </p><p>
    The boot loader, after having been loaded and verified by
    <code class="systemitem">shim</code>, will call back to
    <code class="systemitem">shim</code> when it wants to verify the kernel—to
    avoid duplication of the verification code. <code class="systemitem">Shim</code>
    will use the same list of MOKs for this and tell the boot loader whether it
    can load the kernel.
   </p><p>
    This way, you can install your own kernel or boot loader. It is only
    necessary to install a new set of keys and authorize them by being
    physically present during the first reboot. Because MOKs are a list and not
    not a single MOK, you can make <code class="systemitem">shim</code> trust keys
    from several vendors, allowing dual- and multi-boot from the boot loader.
   </p></div><div class="sect2 " id="sec.uefi.secboot.custom"><div class="titlepage"><div><div><h3 class="title" id="sec.uefi.secboot.custom"><span class="number">12.1.3 </span><span class="name">Booting a Custom Kernel</span> <a title="Permalink" class="permalink" href="#sec.uefi.secboot.custom">#</a></h3></div></div></div><p>
    The following is based on
    <a class="link" href="http://en.opensuse.org/openSUSE:UEFI#Booting_a_custom_kernel" target="_blank">http://en.opensuse.org/openSUSE:UEFI#Booting_a_custom_kernel</a>.
   </p><p>
    Secure Boot does not prevent you from using a self-compiled kernel. You
    must sign it with your own certificate and make that certificate known to
    the firmware or MOK.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create a custom X.509 key and certificate used for signing:
     </p><div class="verbatim-wrap"><pre class="screen">openssl req -new -x509 -newkey rsa:2048 -keyout key.asc \
  -out cert.pem -nodes -days 666 -subj "/CN=$USER/"</pre></div><p>

      For more information about creating certificates, see
      <a class="link" href="http://en.opensuse.org/openSUSE:UEFI_Image_File_Sign_Tools#Create_Your_Own_Certificate" target="_blank">http://en.opensuse.org/openSUSE:UEFI_Image_File_Sign_Tools#Create_Your_Own_Certificate</a>.
     </p></li><li class="step "><p>
      Package the key and the certificate as a PKCS#12 structure:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>openssl pkcs12 -export -inkey key.asc -in cert.pem \
  -name kernel_cert -out cert.p12</pre></div></li><li class="step "><p>
      Generate an NSS database for use with <code class="command">pesign</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>certutil -d . -N</pre></div></li><li class="step "><p>
      Import the key and the certificate contained in PKCS#12 into the NSS
      database:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>pk12util -d . -i cert.p12</pre></div></li><li class="step "><p>
      <span class="quote">“<span class="quote">Bless</span>”</span> the kernel with the new signature using
      <code class="command">pesign</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>pesign -n . -c kernel_cert -i arch/x86/boot/bzImage \
  -o vmlinuz.signed -s</pre></div></li><li class="step "><p>
      List the signatures on the kernel image:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>pesign -n . -S -i vmlinuz.signed</pre></div><p>
      At that point, you can install the kernel in <code class="filename">/boot</code>
      as usual. Because the kernel now has a custom signature the certificate
      used for signing needs to be imported into the UEFI firmware or MOK.
     </p></li><li class="step "><p>
      Convert the certificate to the DER format for import into the firmware or
      MOK:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>openssl x509 -in cert.pem -outform der -out cert.der</pre></div></li><li class="step "><p>
      Copy the certificate to the ESP for easier access:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cp cert.der /boot/efi/</pre></div></li><li class="step "><p>
      Use <code class="command">mokutil</code> to launch the MOK list automatically.
     </p><ul class="stepalternatives ">
      <li class="step "><ol type="a" class="substeps "><li class="step "><p>
          Import the certificate to MOK:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mokutil --root-pw --import cert.der</pre></div><p>
          The <code class="option">--root-pw</code> option enables usage of the <code class="systemitem">root</code>
          user directly.
         </p></li><li class="step "><p>
          Check the list of certificates that are prepared to be enrolled:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mokutil --list-new</pre></div></li><li class="step "><p>
          Reboot the system; <code class="systemitem">shim</code> should launch
          MokManager. You need to enter the <code class="systemitem">root</code> password to confirm the
          import of the certificate to the MOK list.
         </p></li><li class="step "><p>
          Check if the newly imported key was enrolled:
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mokutil --list-enrolled</pre></div></li></ol></li>
      <li class="step "><ol type="a" class="substeps "><li class="step "><p>
          Alternatively, this is the procedure if you want to launch MOK
          manually:
         </p><p>
          Reboot
         </p></li><li class="step "><p>
          In the GRUB 2 menu press the '<code class="literal">c</code>' key.
         </p></li><li class="step "><p>
          Type:
         </p><div class="verbatim-wrap"><pre class="screen">chainloader $efibootdir/MokManager.efi
boot</pre></div></li><li class="step "><p>
          Select <span class="guimenu">Enroll key from disk</span>.
         </p></li><li class="step "><p>
          Navigate to the <code class="filename">cert.der</code> file and press
          <span class="keycap">Enter</span>.
         </p></li><li class="step "><p>
          Follow the instructions to enroll the key. Normally this should be
          pressing '<code class="literal">0</code>' and then '<code class="literal">y</code>' to
          confirm.
         </p><p>
          Alternatively, the firmware menu may provide ways to add a new key to
          the Signature Database.
         </p></li></ol></li>
     </ul></li></ol></div></div></div><div class="sect2 " id="sec.uefi.secboot.non-inbox"><div class="titlepage"><div><div><h3 class="title" id="sec.uefi.secboot.non-inbox"><span class="number">12.1.4 </span><span class="name">Using Non-Inbox Drivers</span> <a title="Permalink" class="permalink" href="#sec.uefi.secboot.non-inbox">#</a></h3></div></div></div><p>
    There is no support for adding non-inbox drivers (that is, drivers that do
    not come with <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>) during installation with Secure Boot enabled. The
    signing key used for SolidDriver/PLDP is not trusted by default.
   </p><p>
    It is possible to install third party drivers during installation with
    Secure Boot enabled in two different ways. In both cases:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Add the needed keys to the firmware database via firmware/system
      management tools before the installation. This option depends on the
      specific hardware you are using. Consult your hardware vendor for more
      information.
     </p></li><li class="listitem "><p>
      Use a bootable driver ISO from
      <a class="link" href="https://drivers.suse.com/" target="_blank">https://drivers.suse.com/</a> or your hardware vendor to
      enroll the needed keys in the MOK list at first boot.
     </p></li></ul></div><p>
    To use the bootable driver ISO to enroll the driver keys to the MOK list,
    follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Burn the ISO image above to an empty CD/DVD medium.
     </p></li><li class="step "><p>
      Start the installation using the new CD/DVD medium, having the standard
      installation media at hand or a URL to a network installation
      server.
     </p><p>
      If doing a network installation, enter the URL of the network
      installation source on the boot command line using the
      <code class="option">install=</code> option.
     </p><p>
      If doing installation from optical media, the installer will first boot
      from the driver kit and then ask to insert the first installation disk of
      the product.
     </p></li><li class="step "><p>
      An initrd containing updated drivers will be used for installation.
     </p></li></ol></div></div><p>
    For more information, see
    <a class="link" href="https://drivers.suse.com/doc/Usage/Secure_Boot_Certificate.html" target="_blank">https://drivers.suse.com/doc/Usage/Secure_Boot_Certificate.html</a>.
   </p></div><div class="sect2 " id="sec.uefi.secboot.feats"><div class="titlepage"><div><div><h3 class="title" id="sec.uefi.secboot.feats"><span class="number">12.1.5 </span><span class="name">Features and Limitations</span> <a title="Permalink" class="permalink" href="#sec.uefi.secboot.feats">#</a></h3></div></div></div><p>
    When booting in Secure Boot mode, the following features apply:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Installation to UEFI default boot loader location, a mechanism to keep or
      restore the EFI boot entry.
     </p></li><li class="listitem "><p>
      Reboot via UEFI.
     </p></li><li class="listitem "><p>
      Xen hypervisor will boot with UEFI when there is no legacy BIOS to fall
      back to.
     </p></li><li class="listitem "><p>
      UEFI IPv6 PXE boot support.
     </p></li><li class="listitem "><p>
      UEFI videomode support, the kernel can retrieve video mode from UEFI
      to configure KMS mode with the same parameters.
     </p></li><li class="listitem "><p>
      UEFI booting from USB devices is supported.
     </p></li></ul></div><p>
    When booting in Secure Boot mode, the following limitations apply:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      To ensure that Secure Boot cannot be easily circumvented, some kernel
      features are disabled when running under Secure Boot.
     </p></li><li class="listitem "><p>
      Boot loader, kernel, and kernel modules must be signed.
     </p></li><li class="listitem "><p>
      Kexec and Kdump are disabled.
     </p></li><li class="listitem "><p>
      Hibernation (suspend on disk) is disabled.
     </p></li><li class="listitem "><p>
      Access to <code class="filename">/dev/kmem</code> and
      <code class="filename">/dev/mem</code> is not possible, not even as root user.
     </p></li><li class="listitem "><p>
      Access to the I/O port is not possible, not even as root user. All X11
      graphical drivers must use a kernel driver.
     </p></li><li class="listitem "><p>
      PCI BAR access through sysfs is not possible.
     </p></li><li class="listitem "><p>
      <code class="literal">custom_method</code> in ACPI is not available.
     </p></li><li class="listitem "><p>
      debugfs for asus-wmi module is not available.
     </p></li><li class="listitem "><p>
      the <code class="literal">acpi_rsdp</code> parameter does not have any effect on
      the kernel.
     </p></li></ul></div></div></div><div class="sect1 " id="sec.uefi.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.uefi.moreinfo"><span class="number">12.2 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.uefi.moreinfo">#</a></h2></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <a class="link" href="http://www.uefi.org" target="_blank">http://www.uefi.org</a> —UEFI home page where you
     can find the current UEFI specifications.
    </p></li><li class="listitem "><p>
     Blog posts by Olaf Kirch and Vojtěch Pavlík (the chapter above is
     heavily based on these posts):
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       <a class="link" href="http://www.suse.com/blogs/uefi-secure-boot-plan/" target="_blank">http://www.suse.com/blogs/uefi-secure-boot-plan/</a>
      </p></li><li class="listitem "><p>
       <a class="link" href="http://www.suse.com/blogs/uefi-secure-boot-overview/" target="_blank">http://www.suse.com/blogs/uefi-secure-boot-overview/</a>
      </p></li><li class="listitem "><p>
       <a class="link" href="http://www.suse.com/blogs/uefi-secure-boot-details/" target="_blank">http://www.suse.com/blogs/uefi-secure-boot-details/</a>
      </p></li></ul></div></li><li class="listitem "><p>
     <a class="link" href="http://en.opensuse.org/openSUSE:UEFI" target="_blank">http://en.opensuse.org/openSUSE:UEFI</a> —UEFI with
     openSUSE.
    </p></li></ul></div></div></div><div class="chapter " id="cha.grub2"><div class="titlepage"><div><div><h2 class="title"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span> <a title="Permalink" class="permalink" href="#cha.grub2">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>grub2.xml</li><li><span class="ds-label">ID: </span>cha.grub2</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698751064416">#</a></h6></div><p>
    This chapter describes how to configure GRUB 2, the boot loader used in
    <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span>. It is the successor to the traditional GRUB boot
    loader—now called <span class="quote">“<span class="quote">GRUB Legacy</span>”</span>.
    <span class="phrase">GRUB 2 has been the default boot loader in
    <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> since version 12.</span> A YaST module is available
    for configuring the most important settings. The boot procedure as a whole
    is outlined in <a class="xref" href="#cha.boot" title="Chapter 11. Introduction to the Booting Process">Chapter 11, <em>Introduction to the Booting Process</em></a>. For details on Secure Boot
    support for UEFI machines, see <a class="xref" href="#cha.uefi" title="Chapter 12. UEFI (Unified Extensible Firmware Interface)">Chapter 12, <em>UEFI (Unified Extensible Firmware Interface)</em></a>.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.grub2.new.features"><span class="number">13.1 </span><span class="name">Main Differences between GRUB Legacy and GRUB 2</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.file_structure"><span class="number">13.2 </span><span class="name">Configuration File Structure</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.yast2.config"><span class="number">13.3 </span><span class="name">Configuring the Boot Loader with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.zseries"><span class="number">13.4 </span><span class="name">Differences in Terminal Usage on z Systems</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.commands"><span class="number">13.5 </span><span class="name">Helpful GRUB 2 Commands</span></a></span></dt><dt><span class="sect1"><a href="#sec.grub2.info"><span class="number">13.6 </span><span class="name">More Information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.grub2.new.features"><div class="titlepage"><div><div><h2 class="title" id="sec.grub2.new.features"><span class="number">13.1 </span><span class="name">Main Differences between GRUB Legacy and GRUB 2</span> <a title="Permalink" class="permalink" href="#sec.grub2.new.features">#</a></h2></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     The configuration is stored in different files.
    </p></li><li class="listitem "><p>
     More file systems are supported (for example, Btrfs).
    </p></li><li class="listitem "><p>
     Can directly read files stored on LVM or RAID devices.
    </p></li><li class="listitem "><p>
     The user interface can be translated and altered with themes.
    </p></li><li class="listitem "><p>
     Includes a mechanism for loading modules to support additional features,
     such as file systems, etc.
    </p></li><li class="listitem "><p>
     Automatically searches for and generates boot entries for other kernels
     and operating systems, such as Windows.
    </p></li><li class="listitem "><p>
     Includes a minimal Bash-like console.
    </p></li></ul></div></div><div class="sect1 " id="sec.grub2.file_structure"><div class="titlepage"><div><div><h2 class="title" id="sec.grub2.file_structure"><span class="number">13.2 </span><span class="name">Configuration File Structure</span> <a title="Permalink" class="permalink" href="#sec.grub2.file_structure">#</a></h2></div></div></div><p>
   The configuration of GRUB 2 is based on the following files:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698751046144"><span class="term "><code class="filename">/boot/grub2/grub.cfg</code>
    </span></dt><dd><p>
      This file contains the configuration of the GRUB 2 menu items. It
      replaces <code class="filename">menu.lst</code> used in GRUB Legacy.
      <code class="filename">grub.cfg</code> is automatically generated by the
      <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> command, and should not be edited.
     </p></dd><dt id="idm139698751042448"><span class="term "><code class="filename">/boot/grub2/custom.cfg</code>
    </span></dt><dd><p>
      This optional file is directly sourced by <code class="filename">grub.cfg</code>
      at boot time and can be used to add custom items to the boot menu.
      Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>  these entries will also
      be parsed when using <code class="command">grub-once</code>.
     </p></dd><dt id="idm139698751038192"><span class="term "><code class="filename">/etc/default/grub</code>
    </span></dt><dd><p>
      This file controls the user settings of GRUB 2 and usually includes
      additional environmental settings such as backgrounds and themes.
     </p></dd><dt id="idm139698751035968"><span class="term ">Scripts under <code class="filename">/etc/grub.d/</code>
    </span></dt><dd><p>
      The scripts in this directory are read during execution of the
      <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> command. Their instructions are
      integrated into the main configuration file
      <code class="filename">/boot/grub/grub.cfg</code>.
     </p></dd><dt id="vle.grub2.sysconfig"><span class="term "><code class="filename">/etc/sysconfig/bootloader</code>
    </span></dt><dd><p>
      This configuration file is used when configuring the boot loader with
      YaST and every time a new kernel is installed. It is evaluated by the
      perl-bootloader which modifies the boot loader configuration file (for
      example <code class="filename">/boot/grub2/grub.cfg</code> for GRUB 2)
      accordingly. <code class="filename">/etc/sysconfig/bootloader</code> is not a
      GRUB 2-specific configuration file—the values are applied to any
      boot loader installed on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
     </p></dd><dt id="idm139698751027728"><span class="term "><code class="filename">/boot/grub2/x86_64-efi</code>,
     <code class="filename">/boot/grub2/power-ieee1275</code>,
     <code class="filename">/boot/grub2/s390x</code>
    </span></dt><dd><p>
      These configuration files contain architecture-specific options.
     </p></dd></dl></div><p>
   GRUB 2 can be controlled in various ways. Boot entries from an existing
   configuration can be selected from the graphical menu (splash screen). The
   configuration is loaded from the file
   <code class="filename">/boot/grub2/grub.cfg</code> which is compiled from other
   configuration files (see below). All GRUB 2 configuration files are
   considered system files, and you need <code class="systemitem">root</code> privileges to edit them.
  </p><div id="idm139698751021760" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Activating Configuration Changes</h6><p>
    After having manually edited GRUB 2 configuration files, you need to run
    <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> to activate the changes. However, this
    is not necessary when changing the configuration with YaST, since it will
    automatically run <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a>.
   </p></div><div class="sect2 " id="sec.grub2.cfg"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.cfg"><span class="number">13.2.1 </span><span class="name">The File <code class="filename">/boot/grub2/grub.cfg</code></span> <a title="Permalink" class="permalink" href="#sec.grub2.cfg">#</a></h3></div></div></div><p>
    The graphical splash screen with the boot menu is based on the GRUB 2
    configuration file <code class="filename">/boot/grub2/grub.cfg</code>, which
    contains information about all partitions or operating systems that can be
    booted by the menu.
   </p><p>
    Every time the system is booted, GRUB 2 loads the menu file directly from
    the file system. For this reason, GRUB 2 does not need to be re-installed
    after changes to the configuration file. <code class="filename">grub.cfg</code> is
    automatically rebuilt with kernel installations or removals.
   </p><p>
    <code class="filename">grub.cfg</code> is compiled by the
    <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> from the file
    <code class="filename">/etc/default/grub</code> and scripts found in the
    <code class="filename">/etc/grub.d/</code> directory. Therefore you should never
    edit the file manually. Instead, edit the related source files or use the
    YaST <span class="guimenu">Boot Loader</span> module to modify the configuration as
    described in <a class="xref" href="#sec.grub2.yast2.config" title="13.3. Configuring the Boot Loader with YaST">Section 13.3, “Configuring the Boot Loader with YaST”</a>.
   </p></div><div class="sect2 " id="sec.grub2.etc_default_grub"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.etc_default_grub"><span class="number">13.2.2 </span><span class="name">The File <code class="filename">/etc/default/grub</code></span> <a title="Permalink" class="permalink" href="#sec.grub2.etc_default_grub">#</a></h3></div></div></div><p>
    More general options of GRUB 2 belong here, such as the time the menu is
    displayed, or the default OS to boot. To list all available options, see
    the output of the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>grep "export GRUB_DEFAULT" -A50 /usr/sbin/grub2-mkconfig | grep GRUB_</pre></div><p>
    In addition to already defined variables, the user may introduce their own
    variables, and use them later in the scripts found in the
    <code class="filename">/etc/grub.d</code> directory.
   </p><p>
    After having edited <code class="filename">/etc/default/grub</code>, run
    <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> to update the main configuration file.
   </p><div id="idm139698751006320" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Scope</h6><p>
     All options set in this file are general options that affect all boot
     entries. Specific options for Xen kernels or the Xen hypervisor can be
     set via the GRUB_*_XEN_* configuration options. See below for details.
    </p></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698751003952"><span class="term "><code class="literal">GRUB_DEFAULT</code>
     </span></dt><dd><p>
       Sets the boot menu entry that is booted by default. Its value can be a
       numeric value, the complete name of a menu entry, or
       <span class="quote">“<span class="quote">saved</span>”</span>.
      </p><p>
       <code class="literal">GRUB_DEFAULT=2</code> boots the third (counted from zero)
       boot menu entry.
      </p><p>
       <code class="literal">GRUB_DEFAULT="2&gt;0"</code> boots the first submenu entry
       of the third top-level menu entry.
      </p><p>
       <code class="literal">GRUB_DEFAULT="Example boot menu entry"</code> boots the menu
       entry with the title <span class="quote">“<span class="quote">Example boot menu entry</span>”</span>.
      </p><p>
       <code class="literal">GRUB_DEFAULT=saved</code> boots the entry specified by the
       <code class="command">grub2-once</code> or <code class="command">grub2-set-default</code>
       commands. While <code class="command">grub2-reboot</code> sets the
       default boot entry for the next reboot only,
       <code class="command">grub2-set-default</code> sets the default boot entry until
       changed. <code class="command">grub2-editenv list</code> lists next boot entry.
      </p></dd><dt id="idm139698750994720"><span class="term "><code class="literal">GRUB_HIDDEN_TIMEOUT</code>
     </span></dt><dd><p>
       Waits the specified number of seconds for the user to press a key.
       During the period no menu is shown unless the user presses a key. If no
       key is pressed during the time specified, the control is passed to
       <code class="literal">GRUB_TIMEOUT</code>.
       <code class="literal">GRUB_HIDDEN_TIMEOUT=0</code> first checks whether
       <span class="keycap">Shift</span> is pressed and shows the boot menu if yes,
       otherwise immediately boots the default menu entry. This is the default
       when only one bootable OS is identified by GRUB 2.
      </p></dd><dt id="idm139698750990768"><span class="term "><code class="literal">GRUB_HIDDEN_TIMEOUT_QUIET</code>
     </span></dt><dd><p>
       If <code class="literal">false</code> is specified, a countdown timer is displayed
       on a blank screen when the <code class="literal">GRUB_HIDDEN_TIMEOUT</code>
       feature is active.
      </p></dd><dt id="idm139698750987696"><span class="term "><code class="literal">GRUB_TIMEOUT</code>
     </span></dt><dd><p>
       Time period in seconds the boot menu is displayed before automatically
       booting the default boot entry. If you press a key, the timeout is
       cancelled and GRUB 2 waits for you to make the selection manually.
       <code class="literal">GRUB_TIMEOUT=-1</code> will cause the menu to be displayed
       until you select the boot entry manually.
      </p></dd><dt id="idm139698750984864"><span class="term "><code class="literal">GRUB_CMDLINE_LINUX</code>
     </span></dt><dd><p>
       Entries on this line are added at the end of the boot entries for normal
       and recovery mode. Use it to add kernel parameters to the boot entry.
      </p></dd><dt id="idm139698750982640"><span class="term "><code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code>
     </span></dt><dd><p>
       Same as <code class="literal">GRUB_CMDLINE_LINUX</code> but the entries are
       appended in the normal mode only.
      </p></dd><dt id="idm139698750980048"><span class="term "><code class="literal">GRUB_CMDLINE_LINUX_RECOVERY</code>
     </span></dt><dd><p>
       Same as <code class="literal">GRUB_CMDLINE_LINUX</code> but the entries are
       appended in the recovery mode only.
      </p></dd><dt id="idm139698750977456"><span class="term "><code class="literal">GRUB_CMDLINE_LINUX_XEN_REPLACE</code>
     </span></dt><dd><p>
       This entry will completely replace the
       <code class="literal">GRUB_CMDLINE_LINUX</code> parameters for all Xen boot
       entries.
      </p></dd><dt id="idm139698750974848"><span class="term "><code class="literal">GRUB_CMDLINE_LINUX_XEN_REPLACE_DEFAULT</code>
     </span></dt><dd><p>
       Same as <code class="literal">GRUB_CMDLINE_LINUX_XEN_REPLACE</code> but it will
       only replace parameters of<code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code>.
      </p></dd><dt id="idm139698750971792"><span class="term "><code class="literal">GRUB_CMDLINE_XEN</code>
     </span></dt><dd><p>
       This entry specifies the kernel parameters for the Xen guest kernel
       only—the operation principle is the same as for
       <code class="literal">GRUB_CMDLINE_LINUX</code>.
      </p></dd><dt id="idm139698750969136"><span class="term "><code class="literal">GRUB_CMDLINE_XEN_DEFAULT</code>
     </span></dt><dd><p>
       Same as <code class="literal">GRUB_CMDLINE_XEN</code>—the operation
       principle is the same as for
       <code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code>.
      </p></dd><dt id="idm139698750966080"><span class="term "><code class="literal">GRUB_TERMINAL</code>
     </span></dt><dd><p>
       Enables and specifies an input/output terminal device. Can be
       <code class="literal">console</code> (PC BIOS and EFI consoles),
       <code class="literal">serial</code> (serial terminal),
       <code class="literal">ofconsole</code> (Open Firmware console), or the default
       <code class="literal">gfxterm</code> (graphics-mode output). It is also possible
       to enable more than one device by quoting the required options, for
       example <code class="literal">GRUB_TERMINAL="console serial"</code>.
      </p></dd><dt id="idm139698750961504"><span class="term "><code class="literal">GRUB_GFXMODE</code>
     </span></dt><dd><p>
       The resolution used for the <code class="literal">gfxterm</code> graphical
       terminal. Note that you can only use modes supported by your graphics
       card (VBE). The default is ‘auto’, which tries to select a preferred
       resolution. You can display the screen resolutions available to GRUB 2
       by typing <code class="command">videoinfo</code> in the GRUB 2 command line. The
       command line is accessed by typing <span class="keycap">C</span> when the GRUB 2
       boot menu screen is displayed.
      </p><p>
       You can also specify a color depth by appending it to the resolution
       setting, for example <code class="literal">GRUB_GFXMODE=1280x1024x24</code>.
      </p></dd><dt id="idm139698750956688"><span class="term "><code class="literal">GRUB_BACKGROUND</code>
     </span></dt><dd><p>
       Set a background image for the <code class="literal">gfxterm</code> graphical
       terminal. The image must be a file readable by GRUB 2 at boot time, and
       it must end with the <code class="literal">.png</code>, <code class="literal">.tga</code>,
       <code class="literal">.jpg</code>, or <code class="literal">.jpeg</code> suffix. If
       necessary, the image will be scaled to fit the screen.
      </p></dd><dt id="idm139698750952192"><span class="term "><code class="literal">GRUB_DISABLE_OS_PROBER</code>
     </span></dt><dd><p>
       If this option is set to <code class="literal">true</code>, automatic searching
       for other operating systems is disabled. Only the kernel images in
       <code class="filename">/boot/</code> and the options from your own scripts in
       <code class="filename">/etc/grub.d/</code> are detected.
      </p></dd><dt id="idm139698750948640"><span class="term "><code class="literal">SUSE_BTRFS_SNAPSHOT_BOOTING</code>
     </span></dt><dd><p>
       If this option is set to <code class="literal">true</code>, GRUB 2 can boot
       directly into Snapper snapshots. For more information, see
       <a class="xref" href="#sec.snapper.snapshot-boot" title="7.3. System Rollback by Booting from Snapshots">Section 7.3, “System Rollback by Booting from Snapshots”</a>.
      </p></dd></dl></div><p>
    For a complete list of options, see the
    <a class="link" href="http://www.gnu.org/software/grub/manual/grub.html#Simple-configuration" target="_blank">
    GNU GRUB manual</a>. For a complete list of possible parameters, see
    <a class="link" href="http://en.opensuse.org/Linuxrc" target="_blank">http://en.opensuse.org/Linuxrc</a>.
   </p></div><div class="sect2 " id="sec.grub2.etc_grub_d"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.etc_grub_d"><span class="number">13.2.3 </span><span class="name">Scripts in <code class="filename">/etc/grub.d</code></span> <a title="Permalink" class="permalink" href="#sec.grub2.etc_grub_d">#</a></h3></div></div></div><p>
    The scripts in this directory are read during execution of the
    <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> command, and their instructions are
    incorporated into <code class="filename">/boot/grub2/grub.cfg</code>. The order of
    menu items in <code class="filename">grub.cfg</code> is determined by the order in
    which the files in this directory are run. Files with a leading numeral are
    executed first, beginning with the lowest number.
    <code class="filename">00_header</code> is run before <code class="filename">10_linux</code>,
    which would run before <code class="filename">40_custom</code>. If files with
    alphabetic names are present, they are executed after the numerically-named
    files. Only executable files generate output to
    <code class="filename">grub.cfg</code> during execution of
    <code class="command">grub2-mkconfig</code>. By default all files in the
    <code class="filename">/etc/grub.d</code> directory are executable.
   </p><div id="idm139698750936704" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Persistent Custom Content in <code class="filename">grub.cfg</code></h6><p>
     Because <code class="filename">/boot/grub2/grub.cfg</code> is recompiled each time
     <code class="command">grub2-mkconfig</code> is run, any custom content is lost.
     If you want to insert your lines directly into
     <code class="filename">/boot/grub2/grub.cfg</code> without losing them after
     <code class="command">grub2-mkconfig</code> is run, insert it between
    </p><div class="verbatim-wrap"><pre class="screen">### BEGIN /etc/grub.d/90_persistent ###</pre></div><p>
     and
    </p><div class="verbatim-wrap"><pre class="screen">### END /etc/grub.d/90_persistent ###</pre></div><p>
     lines. The <code class="filename">90_persistent</code> script ensures that such
     content will be preserved.
    </p><p>
     A list of the most important scripts follows:
    </p></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698750930032"><span class="term "><code class="filename">00_header</code>
     </span></dt><dd><p>
       Sets environmental variables such as system file locations, display
       settings, themes, and previously saved entries. It also imports
       preferences stored in the <code class="filename">/etc/default/grub</code>.
       Normally you do not need to make changes to this file.
      </p></dd><dt id="idm139698750927296"><span class="term "><code class="filename">10_linux</code>
     </span></dt><dd><p>
       Identifies Linux kernels on the root device and creates relevant menu
       entries. This includes the associated recovery mode option if enabled.
       Only the latest kernel is displayed on the main menu page, with
       additional kernels included in a submenu.
      </p></dd><dt id="idm139698750924944"><span class="term "><code class="filename">30_os-prober</code>
     </span></dt><dd><p>
       This script uses <code class="command">os-prober</code> to search for Linux and
       other operating systems and places the results in the GRUB 2 menu. There
       are sections to identify specific other operating systems, such as
       Windows or macOS.
      </p></dd><dt id="idm139698750922208"><span class="term "><code class="filename">40_custom</code>
     </span></dt><dd><p>
       This file provides a simple way to include custom boot entries into
       <code class="filename">grub.cfg</code>. Make sure that you do not change the
       <code class="literal">exec tail -n +3 $0</code> part at the beginning.
      </p></dd></dl></div><p>
    The processing sequence is set by the preceding numbers with the lowest
    number being executed first. If scripts are preceded by the same number the
    alphabetical order of the complete name decides the order.
   </p><div id="idm139698750918304" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: <code class="filename">/boot/grub2/custom.cfg</code></h6><p>
     If you create <code class="filename">/boot/grub2/custom.cfg</code> and fill it with
     a custom content, it will be automatically included into
     <code class="filename">/boot/grub2/grub.cfg</code> at boot time.
    </p></div></div><div class="sect2 " id="sec.grub2.map"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.map"><span class="number">13.2.4 </span><span class="name">Mapping between BIOS Drives and Linux Devices</span> <a title="Permalink" class="permalink" href="#sec.grub2.map">#</a></h3></div></div></div><p>
    In GRUB Legacy, the <code class="filename">device.map</code> configuration file was
    used to derive Linux device names from BIOS drive numbers. The mapping
    between BIOS drives and Linux devices cannot always be guessed correctly.
    For example, GRUB Legacy would get a wrong order if the boot sequence of
    IDE and SCSI drives is exchanged in the BIOS configuration.
   </p><p>
    GRUB 2 avoids this problem by using device ID strings (UUIDs) or file
    system labels when generating <code class="filename">grub.cfg</code>. GRUB 2
    utilities create a temporary device map on the fly, which is usually
    sufficient, particularly in the case of single-disk systems.
   </p><p>
    However, if you need to override the GRUB 2's automatic device mapping
    mechanism, create your custom mapping file
    <code class="filename">/boot/grub2/device.map</code>. The following example changes
    the mapping to make <code class="literal">DISK 3</code> the boot disk. Note that
    GRUB 2 partition numbers start with <code class="literal">1</code> and not with
    <code class="literal">0</code> as in GRUB Legacy.
   </p><div class="verbatim-wrap"><pre class="screen">(hd1)  /dev/disk-by-id/<em class="replaceable ">DISK3 ID</em>
(hd2)  /dev/disk-by-id/<em class="replaceable ">DISK1 ID</em>
(hd3)  /dev/disk-by-id/<em class="replaceable ">DISK2 ID</em></pre></div></div><div class="sect2 " id="sec.grub2.menu_change"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.menu_change"><span class="number">13.2.5 </span><span class="name">Editing Menu Entries during the Boot Procedure</span> <a title="Permalink" class="permalink" href="#sec.grub2.menu_change">#</a></h3></div></div></div><p>
    Being able to directly edit menu entries is useful when the system does not
    boot anymore because of a faulty configuration. It can also be used to test
    new settings without altering the system configuration.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      In the graphical boot menu, select the entry you want to edit with the
      arrow keys.
     </p></li><li class="step "><p>
      Press <span class="keycap">E</span> to open the text-based editor.
     </p></li><li class="step "><p>
      Use the arrow keys to move to the line you want to edit.
     </p><div class="figure" id="fig.grub2.boot.editor"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/grub2_edit_config.png"><img src="images/grub2_edit_config.png" width="" alt="GRUB 2 Boot Editor" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 13.1: </span><span class="name">GRUB 2 Boot Editor </span><a title="Permalink" class="permalink" href="#fig.grub2.boot.editor">#</a></h6></div></div><p>
      Now you have two options:
     </p><ol type="a" class="substeps "><li class="step "><p>
        Add space-separated parameters to the end of the line starting with
        <code class="literal">linux</code> or <code class="literal">linuxefi</code> to edit the
        kernel parameters. A complete list of parameters is available at
        <a class="link" href="http://en.opensuse.org/Linuxrc" target="_blank">http://en.opensuse.org/Linuxrc</a>.
       </p></li><li class="step "><p>
        Or edit the general options to change for example the kernel version.
        The <span class="keycap">→|</span> key suggests all possible completions.
       </p></li></ol></li><li class="step "><p>
      Press <span class="keycap">F10</span> to boot the system with the changes you made
      or press <span class="keycap">Esc</span> to discard your edits and return to
      the GRUB 2 menu.
     </p></li></ol></div></div><p>
    Changes made this way only apply to the current boot process and are not
    saved permanently.
   </p><div id="idm139698750889152" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Keyboard Layout During the Boot Procedure</h6><p>
     The US keyboard layout is the only one available when booting. See
     <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 7 “Troubleshooting”, Section 7.3 “Booting from Installation Media Fails”, US Keyboard Layout</span>.
    </p></div><div id="idm139698750887136" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Boot Loader on the Installation Media</h6><p>
     The Boot Loader of the installation media on systems with a traditional
     BIOS is still GRUB Legacy. To add boot options, select an entry and start
     typing. Additions you make to the installation boot entry will be
     permanently saved in the installed system.
    </p></div><div id="idm139698750885232" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Editing GRUB 2 Menu Entries on z Systems</h6><p>
     Cursor movement and editing commands on IBM z Systems differ—see
     <a class="xref" href="#sec.grub2.zseries" title="13.4. Differences in Terminal Usage on z Systems">Section 13.4, “Differences in Terminal Usage on z Systems”</a> for details.
    </p></div></div><div class="sect2 " id="sec.grub2.password"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.password"><span class="number">13.2.6 </span><span class="name">Setting a Boot Password</span> <a title="Permalink" class="permalink" href="#sec.grub2.password">#</a></h3></div></div></div><p>
    Even before the operating system is booted, GRUB 2 enables access to file
    systems. Users without root permissions can access files in your Linux
    system to which they have no access after the system is booted. To block
    this kind of access or to prevent users from booting certain menu entries,
    set a boot password.
   </p><div id="idm139698750880864" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Booting Requires Password</h6><p>
     If set, the boot password is required on every boot, which means the
     system does not boot automatically.
    </p></div><p>
    Proceed as follows to set a boot password. Alternatively use YaST
    (<a class="xref" href="#vle.grub2.yast2.boot.password"><span class="guimenu">Protect Boot Loader with Password</span>
     </a>).
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Encrypt the password using <code class="command">grub2-mkpasswd-pbkdf2:</code>
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> grub2-mkpasswd-pbkdf2
Password: ****
Reenter password: ****
PBKDF2 hash of your password is grub.pbkdf2.sha512.10000.9CA4611006FE96BC77A...</pre></div></li><li class="step "><p>
      Paste the resulting string into the file
      <code class="filename">/etc/grub.d/40_custom</code> together with the <code class="command">set
      superusers</code> command.
     </p><div class="verbatim-wrap"><pre class="screen">set superusers="root"
password_pbkdf2 root grub.pbkdf2.sha512.10000.9CA4611006FE96BC77A...</pre></div></li><li class="step "><p>
      Run <a class="xref" href="#vle.grub2.mkconfig"><code class="command">grub2-mkconfig</code>
    </a> to import the changes into the
      main configuration file.
     </p></li></ol></div></div><p>
    After you reboot, you will be prompted for a user name and a password when
    trying to boot a menu entry. Enter <code class="literal">root</code> and the password
    you typed during the <code class="command">grub2-mkpasswd-pbkdf2</code> command. If
    the credentials are correct, the system will boot the selected boot entry.
   </p><p>
    For more information, see
    <a class="link" href="https://www.gnu.org/software/grub/manual/grub.html#Security" target="_blank">https://www.gnu.org/software/grub/manual/grub.html#Security</a>.
   </p></div></div><div class="sect1 " id="sec.grub2.yast2.config"><div class="titlepage"><div><div><h2 class="title" id="sec.grub2.yast2.config"><span class="number">13.3 </span><span class="name">Configuring the Boot Loader with YaST</span> <a title="Permalink" class="permalink" href="#sec.grub2.yast2.config">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>grub2_yast_i.xml</li><li><span class="ds-label">ID: </span>sec.grub2.yast2.config</li></ul></div></div></div></div><p>
  The easiest way to configure general options of the boot loader in your
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> system is to use the YaST module. In the <span class="guimenu">YaST Control Center</span>, select
  <span class="guimenu">System</span> › <span class="guimenu">Boot
  Loader</span>. The module shows the current boot loader
  configuration of your system and allows you to make changes.
 </p><p>
  Use the <span class="guimenu">Boot Code Options</span> tab to view and change settings
  related to type, location and advanced loader settings. You can choose
  whether to use GRUB 2 in standard or EFI mode.
 </p><div class="figure" id="fig.grub2.yast.boot.code.options0"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_bootloader_boot_code.png"><img src="images/yast2_bootloader_boot_code.png" width="" alt="Boot Code Options" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 13.2: </span><span class="name">Boot Code Options </span><a title="Permalink" class="permalink" href="#fig.grub2.yast.boot.code.options0">#</a></h6></div></div><div id="idm139698750854640" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: EFI Systems require GRUB2-EFI</h6><p>
   If you have an EFI system you can only install GRUB2-EFI, otherwise your
   system is no longer bootable.
  </p></div><div id="idm139698750853184" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Reinstalling the Boot Loader</h6><p>
   To reinstall the boot loader, make sure to change a setting in YaST and
   then change it back. For example, to reinstall GRUB2-EFI, select
   <span class="guimenu">GRUB2</span> first and then immediately switch back to
   <span class="guimenu">GRUB2-EFI</span>.
  </p><p>
   Otherwise, the boot loader may only be partially reinstalled.
  </p></div><div id="idm139698750850272" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Custom Boot Loader</h6><p>
   To use a boot loader other than the ones listed, select <span class="guimenu">Do Not
   Install Any Boot Loader</span>. Read the documentation of your boot
   loader carefully before choosing this option.
  </p></div><div class="sect2 " id="sec.grub2.yast2.location"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.yast2.location"><span class="number">13.3.1 </span><span class="name">Boot Loader Location and Boot Code Options</span> <a title="Permalink" class="permalink" href="#sec.grub2.yast2.location">#</a></h3></div></div></div><p>
   The default location of the boot loader depends on the partition setup and
   is either the Master Boot Record (MBR) or the boot sector of the
   <code class="filename">/</code> partition. To modify the location of the boot loader,
   follow these steps:
  </p><div class="procedure " id="pro.sec.grub2.yast2.location"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 13.1: </span><span class="name">Changing the Boot Loader Location </span><a title="Permalink" class="permalink" href="#pro.sec.grub2.yast2.location">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Select the <span class="guimenu">Boot Code Options</span> tab and then choose one of
     the following options for <span class="guimenu">Boot Loader Location</span>:
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750842896"><span class="term "><span class="guimenu">Boot from Master Boot Record</span>
      </span></dt><dd><p>
        This installs the boot loader in the MBR of the disk containing the
        directory <code class="filename">/boot</code>. Usually this will be the disk
        mounted to <code class="filename">/</code>, but if <code class="filename">/boot</code> is
        mounted to a separate partition on a different disk, the MBR of that
        disk will be used.
       </p></dd><dt id="idm139698750839248"><span class="term "><span class="guimenu">Boot from Root Partition</span>
      </span></dt><dd><p>
        This installs the boot loader in the boot sector of the
        <code class="filename">/</code> partition.
       </p></dd><dt id="idm139698750836640"><span class="term "><span class="guimenu">Custom Boot Partition</span>
      </span></dt><dd><p>
        Use this option to specify the location of the boot loader manually.
       </p></dd></dl></div></li><li class="step "><p>
     Click <span class="guimenu">OK</span> to apply your changes.
    </p></li></ol></div></div><div class="figure" id="fig.grub2.yast.boot.code.options"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_bootloader_boot_code.png"><img src="images/yast2_bootloader_boot_code.png" width="" alt="Code Options" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 13.3: </span><span class="name">Code Options </span><a title="Permalink" class="permalink" href="#fig.grub2.yast.boot.code.options">#</a></h6></div></div><p>
   The <span class="guimenu">Boot Code Options</span> tab includes the following
   additional options:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750826016"><span class="term "><span class="guimenu">Set Active Flag in Partition Table for Boot
      Partition</span>
     </span></dt><dd><p>
       Activates <span class="phrase">the partition that contains the
        <code class="filename">/boot</code> directory</span><span class="phrase">the
        PReP partition</span>. Use this option on systems with old BIOS and/or
       legacy operating systems because they may fail to boot from a non-active
       partition. It is safe to leave this option active.
      </p></dd><dt id="idm139698750821936"><span class="term "><span class="guimenu">Write Generic Boot Code to MBR</span>
     </span></dt><dd><p>
       If MBR contains a custom 'non-GRUB' code, this option replaces it with a
       generic, operating system independent code. If you deactivate this
       option, the system may become unbootable.
      </p></dd><dt id="idm139698750819648"><span class="term "><span class="guimenu">Enable Trusted Boot Support</span>
     </span></dt><dd><p>
       Starts TrustedGRUB2 which supports trusted computing functionality
       (Trusted Platform Module (TPM)). For more information refer to
       <a class="link" href="https://github.com/Sirrix-AG/TrustedGRUB2" target="_blank">https://github.com/Sirrix-AG/TrustedGRUB2</a>.
      </p></dd></dl></div></div><div class="sect2 " id="sec.grub2.yast2.config.order"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.yast2.config.order"><span class="number">13.3.2 </span><span class="name">Adjusting the Disk Order</span> <a title="Permalink" class="permalink" href="#sec.grub2.yast2.config.order">#</a></h3></div></div></div><p>
   If your computer has more than one hard disk, you can specify the boot
   sequence of the disks. The first disk in the list is where GRUB 2 will be
   installed in the case of booting from MBR. It is the disk where <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>
   is installed by default. The rest of the list is a hint for
   GRUB 2's device mapper (see <a class="xref" href="#sec.grub2.map" title="13.2.4. Mapping between BIOS Drives and Linux Devices">Section 13.2.4, “Mapping between BIOS Drives and Linux Devices”</a>).
  </p><div id="idm139698750812848" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Unbootable System</h6><p>
    The default value is usually valid for almost all deployments. If you change
    the boot order of disks wrongly, the system may become unbootable on the
    next reboot. For example, if the first disk in the list is not part of BIOS
    boot order, and the other disk in the list have empty MBRs.
   </p></div><div class="procedure " id="pro.sec.grub2.yast2.config.order"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 13.2: </span><span class="name">Setting the Disk Order </span><a title="Permalink" class="permalink" href="#pro.sec.grub2.yast2.config.order">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Open the <span class="guimenu">Boot Code Options</span> tab.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Edit Disk Boot Order</span>.
    </p></li><li class="step "><p>
     If more than one disk is listed, select a disk and click
     <span class="guimenu">Up</span> or <span class="guimenu">Down</span> to reorder the displayed
     disks.
    </p></li><li class="step "><p>
     Click <span class="guimenu">OK</span> two times to save the changes.
    </p></li></ol></div></div></div><div class="sect2 " id="sec.grub2.yast2.config.advanced"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.yast2.config.advanced"><span class="number">13.3.3 </span><span class="name">Configuring Advanced Options</span> <a title="Permalink" class="permalink" href="#sec.grub2.yast2.config.advanced">#</a></h3></div></div></div><p>
   Advanced boot options can be configured via the <span class="guimenu">Boot Loader
   Options</span> tab.
  </p><div class="sect3 " id="sec.grub2.yast2.config.advanced.boot-loader"><div class="titlepage"><div><div><h4 class="title" id="sec.grub2.yast2.config.advanced.boot-loader"><span class="number">13.3.3.1 </span><span class="name"><span class="guimenu">Boot Loader Options</span> Tab</span> <a title="Permalink" class="permalink" href="#sec.grub2.yast2.config.advanced.boot-loader">#</a></h4></div></div></div><div class="figure" id="fig.grub2.yast.bootloader.options"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_bootloader_options.png"><img src="images/yast2_bootloader_options.png" width="" alt="Boot loader Options" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 13.4: </span><span class="name">Boot loader Options </span><a title="Permalink" class="permalink" href="#fig.grub2.yast.bootloader.options">#</a></h6></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698750794464"><span class="term "><span class="guimenu">Boot Loader Time-Out</span>
     </span></dt><dd><p>
       Change the value of <span class="guimenu">Time-Out in Seconds</span> by typing in
       a new value and clicking the appropriate arrow key with your mouse.
      </p></dd><dt id="idm139698750791840"><span class="term "><span class="guimenu">Probe Foreign OS</span>
     </span></dt><dd><p>
       When selected, the boot loader searches for other systems like Windows
       or other Linux installations.
      </p></dd><dt id="idm139698750789648"><span class="term "><span class="guimenu">Hide Menu on Boot</span>
     </span></dt><dd><p>
       Hides the boot menu and boots the default entry.
      </p></dd><dt id="idm139698750787520"><span class="term "><span class="guimenu">Adjusting the Default Boot Entry</span>
     </span></dt><dd><p>
       Select the desired entry from the <span class="quote">“<span class="quote">Default Boot Section</span>”</span>
       list. Note that the <span class="quote">“<span class="quote">&gt;</span>”</span> sign in the boot entry name
       delimits the boot section and its subsection.
      </p></dd><dt id="vle.grub2.yast2.boot.password"><span class="term "><span class="guimenu">Protect Boot Loader with Password</span>
     </span></dt><dd><p>
       Protects the boot loader and the system with an additional password. For
       more information, see <a class="xref" href="#sec.grub2.password" title="13.2.6. Setting a Boot Password">Section 13.2.6, “Setting a Boot Password”</a>.
      </p></dd></dl></div></div><div class="sect3 " id="sec.grub2.yast2.config.advanced.kernel_parameters"><div class="titlepage"><div><div><h4 class="title" id="sec.grub2.yast2.config.advanced.kernel_parameters"><span class="number">13.3.3.2 </span><span class="name"><span class="guimenu">Kernel Parameters</span> Tab</span> <a title="Permalink" class="permalink" href="#sec.grub2.yast2.config.advanced.kernel_parameters">#</a></h4></div></div></div><div class="figure" id="fig.grub2.yast.kernel.parameters"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_bootloader_kernel_parameters.png"><img src="images/yast2_bootloader_kernel_parameters.png" width="" alt="Kernel Parameters" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 13.5: </span><span class="name">Kernel Parameters </span><a title="Permalink" class="permalink" href="#fig.grub2.yast.kernel.parameters">#</a></h6></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698750773568"><span class="term "><span class="guimenu">Console resolution</span>
     </span></dt><dd><p>
       The <span class="guimenu">Console resolution</span> option specifies the default
       screen resolution during the boot process.
      </p></dd><dt id="idm139698750770976"><span class="term "><span class="guimenu">Kernel Command Line Parameter</span>
     </span></dt><dd><p>
       The optional kernel parameters are added at the end of the default
       parameters. For a list of all possible parameters, see
       <a class="link" href="http://en.opensuse.org/Linuxrc" target="_blank">http://en.opensuse.org/Linuxrc</a>.
      </p></dd><dt id="idm139698750768176"><span class="term "><span class="guimenu">Use graphical console</span>
     </span></dt><dd><p>
       When checked, the boot menu appears on a graphical splash screen rather
       than in a text mode. The resolution of the boot screen can be then set
       from the <span class="guimenu">Console resolution</span> list, and graphical theme
       definition file can be specified with the <span class="guimenu">Console
       theme</span> file-chooser.
      </p></dd><dt id="idm139698750764976"><span class="term "><span class="guimenu">Use Serial Console</span>
     </span></dt><dd><p>
       If your machine is controlled via a serial console, activate this option
       and specify which COM port to use at which speed. See <code class="command">info
       grub</code> or
       <a class="link" href="http://www.gnu.org/software/grub/manual/grub.html#Serial-terminal" target="_blank">http://www.gnu.org/software/grub/manual/grub.html#Serial-terminal</a>
      </p></dd></dl></div></div></div></div><div class="sect1 " id="sec.grub2.zseries"><div class="titlepage"><div><div><h2 class="title" id="sec.grub2.zseries"><span class="number">13.4 </span><span class="name">Differences in Terminal Usage on z Systems</span> <a title="Permalink" class="permalink" href="#sec.grub2.zseries">#</a></h2></div></div></div><p>
   On 3215 and 3270 terminals there are some differences and limitations on how
   to move the cursor and how to issue editing commands within GRUB 2.
  </p><div class="sect2 " id="sec.grub2.zseries.limitations"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.zseries.limitations"><span class="number">13.4.1 </span><span class="name">Limitations</span> <a title="Permalink" class="permalink" href="#sec.grub2.zseries.limitations">#</a></h3></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698750757680"><span class="term ">Interactivity</span></dt><dd><p>
       Interactivity is strongly limited. Typing often does not result in
       visual feedback. To see where the cursor is, type an underscore
       (<span class="keycap">_</span>).
      </p><div id="idm139698750755616" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: 3270 Compared to 3215</h6><p>
        The 3270 terminal is much better at displaying and refreshing screens
        than the 3215 terminal.
       </p></div></dd><dt id="idm139698750753856"><span class="term ">Cursor Movement</span></dt><dd><p>
       <span class="quote">“<span class="quote">Traditional</span>”</span> cursor movement is not possible.
       <span class="keycap">Alt</span>, <span class="keycap">Meta</span>,
       <span class="keycap">Ctrl</span> and the cursor keys do not work. To move
       the cursor, use the key combinations listed in
       <a class="xref" href="#sec.grub2.zseries.keys" title="13.4.2. Key Combinations">Section 13.4.2, “Key Combinations”</a>.
      </p></dd><dt id="idm139698750749264"><span class="term ">Caret</span></dt><dd><p>
       The caret (<span class="keycap">^</span>) is used as a control character. To type a
       literal <span class="keycap">^</span> followed by a letter, type
       <span class="keycap">^</span>, <span class="keycap">^</span>,
       <em class="replaceable ">LETTER</em>.
      </p></dd><dt id="idm139698750745216"><span class="term ">Enter</span></dt><dd><p>
       The <span class="keycap">Enter</span> key does not work, use
       <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">J</span> instead.
      </p></dd></dl></div></div><div class="sect2 " id="sec.grub2.zseries.keys"><div class="titlepage"><div><div><h3 class="title" id="sec.grub2.zseries.keys"><span class="number">13.4.2 </span><span class="name">Key Combinations</span> <a title="Permalink" class="permalink" href="#sec.grub2.zseries.keys">#</a></h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><tbody><tr><td rowspan="3" valign="top">
        <p>
         Common Substitutes:
        </p>
       </td><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">J</span>
        </p>
       </td><td>
        <p>
         engage (<span class="quote">“<span class="quote">Enter</span>”</span>)
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">L</span>
        </p>
       </td><td>
        <p>
         abort, return to previous <span class="quote">“<span class="quote">state</span>”</span>
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">I</span>
        </p>
       </td><td>
        <p>
         tab completion (in edit and shell mode)
        </p>
       </td></tr><tr><td rowspan="9" valign="top">
        <p>
         Keys Available in Menu Mode:
        </p>
       </td><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">A</span>
        </p>
       </td><td>
        <p>
         first entry
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">E</span>
        </p>
       </td><td>
        <p>
         last entry
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">P</span>
        </p>
       </td><td>
        <p>
         previous entry
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">N</span>
        </p>
       </td><td>
        <p>
         next entry
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">G</span>
        </p>
       </td><td>
        <p>
         previous page
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">C</span>
        </p>
       </td><td>
        <p>
         next page
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">F</span>
        </p>
       </td><td>
        <p>
         boot selected entry or enter submenu (same as
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">J</span>)
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">E</span>
        </p>
       </td><td>
        <p>
         edit selected entry
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">C</span>
        </p>
       </td><td>
        <p>
         enter GRUB-Shell
        </p>
       </td></tr><tr><td rowspan="14" valign="top">
        <p>
         Keys Available in Edit Mode:
        </p>
       </td><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">P</span>
        </p>
       </td><td>
        <p>
         previous line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">N</span>
        </p>
       </td><td>
        <p>
         next line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">B</span>
        </p>
       </td><td>
        <p>
         backward char
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">F</span>
        </p>
       </td><td>
        <p>
         forward char
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">A</span>
        </p>
       </td><td>
        <p>
         beginning of line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">E</span>
        </p>
       </td><td>
        <p>
         end of line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">H</span>
        </p>
       </td><td>
        <p>
         backspace
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">D</span>
        </p>
       </td><td>
        <p>
         delete
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">K</span>
        </p>
       </td><td>
        <p>
         kill line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">Y</span>
        </p>
       </td><td>
        <p>
         yank
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">O</span>
        </p>
       </td><td>
        <p>
         open line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">L</span>
        </p>
       </td><td>
        <p>
         refresh screen
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">X</span>
        </p>
       </td><td>
        <p>
         boot entry
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">C</span>
        </p>
       </td><td>
        <p>
         enter GRUB-Shell
        </p>
       </td></tr><tr><td rowspan="11" valign="top">
        <p>
         Keys Available in Command Line Mode:
        </p>
       </td><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">P</span>
        </p>
       </td><td>
        <p>
         previous command
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">N</span>
        </p>
       </td><td>
        <p>
         next command from history
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">A</span>
        </p>
       </td><td>
        <p>
         beginning of line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">E</span>
        </p>
       </td><td>
        <p>
         end of line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">B</span>
        </p>
       </td><td>
        <p>
         backward char
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">F</span>
        </p>
       </td><td>
        <p>
         forward char
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">H</span>
        </p>
       </td><td>
        <p>
         backspace
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">D</span>
        </p>
       </td><td>
        <p>
         delete
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">K</span>
        </p>
       </td><td>
        <p>
         kill line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">U</span>
        </p>
       </td><td>
        <p>
         discard line
        </p>
       </td></tr><tr><td>
        <p>
         <span class="keycap">^</span><span class="key-connector">–</span><span class="keycap">Y</span>
        </p>
       </td><td>
        <p>
         yank
        </p>
       </td></tr></tbody></table></div></div></div><div class="sect1 " id="sec.grub2.commands"><div class="titlepage"><div><div><h2 class="title" id="sec.grub2.commands"><span class="number">13.5 </span><span class="name">Helpful GRUB 2 Commands</span> <a title="Permalink" class="permalink" href="#sec.grub2.commands">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="vle.grub2.mkconfig"><span class="term "><code class="command">grub2-mkconfig</code>
    </span></dt><dd><p>
      Generates a new <code class="filename">/boot/grub2/grub.cfg</code> based on
      <code class="filename">/etc/default/grub</code> and the scripts from
      <code class="filename">/etc/grub.d/</code>.
     </p><div class="example" id="idm139698750610816"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 13.1: </span><span class="name">Usage of grub2-mkconfig </span><a title="Permalink" class="permalink" href="#idm139698750610816">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></div></div><div id="idm139698750609456" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Syntax Check</h6><p>
       Running <code class="command">grub2-mkconfig</code> without any parameters prints
       the configuration to STDOUT where it can be reviewed. Use
       <a class="xref" href="#vle.grub2.script_check"><code class="command">grub2-script-check</code>
    </a> after
       <code class="filename">/boot/grub2/grub.cfg</code> has been written to check its
       syntax.
      </p></div><div id="idm139698750606544" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: <code class="command">grub2-mkconfig</code> Cannot Repair UEFI Secure Boot Tables</h6><p>
       If you are using UEFI Secure Boot and your system is not reaching GRUB 2
       correctly anymore, you may need to additionally reinstall Shim and
       regenerate the UEFI boot table. To do so, use:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>shim-install --config-file=/boot/grub2/grub.cfg</pre></div></div></dd><dt id="vle.grub2.mkrescue"><span class="term "><code class="command">grub2-mkrescue</code></span></dt><dd><p>
      Creates a bootable rescue image of your installed GRUB 2 configuration.
     </p><div class="example" id="idm139698750601232"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 13.2: </span><span class="name">Usage of grub2-mkrescue </span><a title="Permalink" class="permalink" href="#idm139698750601232">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-mkrescue -o save_path/name.iso iso</pre></div></div></div></dd><dt id="vle.grub2.script_check"><span class="term "><code class="command">grub2-script-check</code>
    </span></dt><dd><p>
      Checks the given file for syntax errors.
     </p><div class="example" id="idm139698750597376"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 13.3: </span><span class="name">Usage of grub2-script-check </span><a title="Permalink" class="permalink" href="#idm139698750597376">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-script-check /boot/grub2/grub.cfg</pre></div></div></div></dd><dt id="idm139698750595680"><span class="term "><code class="command">grub2-once</code>
    </span></dt><dd><p>
      Set the default boot entry for the next boot only. To get the list of
      available boot entries use the <code class="option">--list</code> option.
     </p><div class="example" id="idm139698750593376"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 13.4: </span><span class="name">Usage of grub2-once </span><a title="Permalink" class="permalink" href="#idm139698750593376">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">grub2-once number_of_the_boot_entry</pre></div></div></div><div id="idm139698750592016" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: <code class="command">grub2-once</code> Help</h6><p>
       Call the program without any option to get a full list of all possible
       options.
      </p></div></dd></dl></div></div><div class="sect1 " id="sec.grub2.info"><div class="titlepage"><div><div><h2 class="title" id="sec.grub2.info"><span class="number">13.6 </span><span class="name">More Information</span> <a title="Permalink" class="permalink" href="#sec.grub2.info">#</a></h2></div></div></div><p>
   Extensive information about GRUB 2 is available at <a class="link" href="http://www.gnu.org/software/grub/" target="_blank">http://www.gnu.org/software/grub/</a>. Also refer to the
   <code class="command">grub</code> info page. <span class="phrase">You can also
   search for the keyword <span class="quote">“<span class="quote">GRUB 2</span>”</span> in the Technical Information
   Search at <a class="link" href="http://www.suse.com/support" target="_blank">http://www.suse.com/support</a> to get
   information about special issues.</span>
  </p></div></div><div class="chapter " id="cha.systemd"><div class="titlepage"><div><div><h2 class="title"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span> <a title="Permalink" class="permalink" href="#cha.systemd">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>systemd.xml</li><li><span class="ds-label">ID: </span>cha.systemd</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.boot.systemd.concept"><span class="number">14.1 </span><span class="name">The systemd Concept</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.basics"><span class="number">14.2 </span><span class="name">Basic Usage</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.boot"><span class="number">14.3 </span><span class="name">System Start and Target Management</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.runlevel.edit"><span class="number">14.4 </span><span class="name">Managing Services with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.custom"><span class="number">14.5 </span><span class="name">Customization of <code class="systemitem">systemd</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.advanced"><span class="number">14.6 </span><span class="name">Advanced Usage</span></a></span></dt><dt><span class="sect1"><a href="#sec.boot.systemd.info"><span class="number">14.7 </span><span class="name">More Information</span></a></span></dt></dl></div></div><p>
  The program <code class="systemitem">systemd</code> is the process with process ID 1. It is responsible for
  initializing the system in the required way. <code class="systemitem">systemd</code> is started directly by
  the kernel and resists signal 9, which normally terminates processes.
  All other programs are either started directly by systemd or by one of its
  child processes.
 </p><p>
  Starting with <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> 12 systemd is a replacement for the popular
  System V init daemon. <code class="systemitem">systemd</code> is fully compatible with System V init (by
  supporting init scripts). One of the main advantages of systemd is that it
  considerably speeds up boot time by aggressively paralleling service starts.
  Furthermore, systemd only starts a service when it is really needed. Daemons
  are not started unconditionally at boot time, but rather when being required
  for the first time. systemd also supports Kernel Control Groups (cgroups),
  snapshotting and restoring the system state and more. See
  <a class="link" href="http://www.freedesktop.org/wiki/Software/systemd/" target="_blank">http://www.freedesktop.org/wiki/Software/systemd/</a> for
  details.
 </p><div class="sect1 " id="sec.boot.systemd.concept"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.concept"><span class="number">14.1 </span><span class="name">The systemd Concept</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.concept">#</a></h2></div></div></div><p>
   This section will go into detail about the concept behind systemd.
  </p><div class="sect2 " id="sec.boot.systemd.whatissystemd"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.whatissystemd"><span class="number">14.1.1 </span><span class="name">What Is systemd</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.whatissystemd">#</a></h3></div></div></div><p>
    systemd is a system and session manager for Linux, compatible with System V
    and LSB init scripts. The main features are:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      provides aggressive parallelization capabilities
     </p></li><li class="listitem "><p>
      uses socket and D-Bus activation for starting services
     </p></li><li class="listitem "><p>
      offers on-demand starting of daemons
     </p></li><li class="listitem "><p>
      keeps track of processes using Linux cgroups
     </p></li><li class="listitem "><p>
      supports snapshotting and restoring of the system state
     </p></li><li class="listitem "><p>
      maintains mount and automount points
     </p></li><li class="listitem "><p>
      implements an elaborate transactional dependency-based service control
      logic
     </p></li></ul></div></div><div class="sect2 " id="sec.boot.systemd.unitfile"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.unitfile"><span class="number">14.1.2 </span><span class="name">Unit File</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.unitfile">#</a></h3></div></div></div><p>
    A unit configuration file contains information about a service, a socket, a
    device, a mount point, an automount point, a swap file or partition, a
    start-up target, a watched file system path, a timer controlled and
    supervised by systemd, a temporary system state snapshot, a resource
    management slice or a group of externally created processes. <span class="quote">“<span class="quote">Unit
    file</span>”</span> is a generic term used by systemd for the following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><span class="formalpara-title">Service. </span>
       Information about a process (for example running a daemon); file ends
       with .service
      </p></li><li class="listitem "><p><span class="formalpara-title">Targets. </span>
       Used for grouping units and as synchronization points during start-up;
       file ends with .target
      </p></li><li class="listitem "><p><span class="formalpara-title">Sockets. </span>
       Information about an IPC or network socket or a file system FIFO, for
       socket-based activation (like
       <code class="systemitem">inetd</code>); file ends with .socket
      </p></li><li class="listitem "><p><span class="formalpara-title">Path. </span>
       Used to trigger other units (for example running a service when files
       change); file ends with .path
      </p></li><li class="listitem "><p><span class="formalpara-title">Timer. </span>
       Information about a timer controlled, for timer-based activation; file
       ends with .timer
      </p></li><li class="listitem "><p><span class="formalpara-title">Mount point. </span>
       Usually auto-generated by the fstab generator; file ends with .mount
      </p></li><li class="listitem "><p><span class="formalpara-title">Automount point. </span>
       Information about a file system automount point; file ends with
       .automount
      </p></li><li class="listitem "><p><span class="formalpara-title">Swap. </span>
       Information about a swap device or file for memory paging; file ends
       with .swap
      </p></li><li class="listitem "><p><span class="formalpara-title">Device. </span>
       Information about a device unit as exposed in the sysfs/udev(7) device
       tree; file ends with .device
      </p></li><li class="listitem "><p><span class="formalpara-title">Scope / Slice. </span>
       A concept for hierarchically managing resources of a group of processes;
       file ends with .scope/.slice
      </p></li></ul></div><p>
    For more information about systemd.unit see
    <a class="link" href="http://www.freedesktop.org/software/systemd/man/systemd.unit.html" target="_blank">http://www.freedesktop.org/software/systemd/man/systemd.unit.html</a>
   </p></div></div><div class="sect1 " id="sec.boot.systemd.basics"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.basics"><span class="number">14.2 </span><span class="name">Basic Usage</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.basics">#</a></h2></div></div></div><p>
   The System V init system uses several commands to handle services—the
   init scripts, <code class="command">insserv</code>, <code class="command">telinit</code> and
   others. systemd makes it easier to manage services, since there is only one
   command to memorize for the majority of service-handling tasks:
   <code class="command">systemctl</code>. It uses the <span class="quote">“<span class="quote">command plus
   subcommand</span>”</span> notation like <code class="command">git</code> or
   <code class="command">zypper</code>:
  </p><div class="verbatim-wrap"><pre class="screen">systemctl <em class="replaceable ">GENERAL OPTIONS</em> <em class="replaceable ">SUBCOMMAND</em> <em class="replaceable ">SUBCOMMAND OPTIONS</em></pre></div><p>
   See <code class="command">man 1 systemctl</code> for a complete manual.
  </p><div id="idm139698750531616" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Terminal Output and Bash Completion</h6><p>
    If the output goes to a terminal (and not to a pipe or a file, for example)
    systemd commands send long output to a pager by default. Use the
    <code class="option">--no-pager</code> option to turn off paging mode.
   </p><p>
    systemd also supports bash-completion, allowing you to enter the first
    letters of a subcommand and then press <span class="keycap">→|</span> to
    automatically complete it. This feature is only available in the
    <code class="systemitem">bash</code> shell and requires the installation of the
    package <code class="systemitem">bash-completion</code>.
   </p></div><div class="sect2 " id="sec.boot.systemd.basics.services"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.basics.services"><span class="number">14.2.1 </span><span class="name">Managing Services in a Running System</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.basics.services">#</a></h3></div></div></div><p>
    Subcommands for managing services are the same as for managing a service
    with System V init (<code class="command">start</code>, <code class="command">stop</code>,
    ...). The general syntax for service management commands is as follows:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750524336"><span class="term ">systemd</span></dt><dd><div class="verbatim-wrap"><pre class="screen">systemctl reload|restart|start|status|stop|<em class="replaceable ">...</em> <em class="replaceable ">MY_SERVICE(S)</em></pre></div></dd><dt id="idm139698750521776"><span class="term ">System V init</span></dt><dd><div class="verbatim-wrap"><pre class="screen">rc<em class="replaceable ">MY_SERVICE(S)</em> reload|restart|start|status|stop|<em class="replaceable ">...</em></pre></div></dd></dl></div><p>
    systemd allows you to manage several services in one go. Instead of
    executing init scripts one after the other as with System V init, execute a
    command like the following:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl start <em class="replaceable ">MY_1ST_SERVICE</em> <em class="replaceable ">MY_2ND_SERVICE</em></pre></div><p>
    To list all services available on the system:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl list-unit-files --type=service</pre></div><p>
    The following table lists the most important service management commands
    for systemd and System V init:
   </p><div class="table" id="idm139698750514608"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.1: </span><span class="name">Service Management Commands </span><a title="Permalink" class="permalink" href="#idm139698750514608">#</a></h6></div><div class="table-contents"><table summary="Service Management Commands" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
        <p>
         Task
        </p>
       </th><th>
        <p>
         systemd Command
        </p>
       </th><th>
        <p>
         System V init Command
        </p>
       </th></tr></thead><tbody><tr><td>
        <p><span class="formalpara-title">Starting. </span></p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">start</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">start</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Stopping. </span></p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">stop</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">stop</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Restarting. </span>
          Shuts down services and starts them afterward. If a service is not
          yet running it will be started.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">restart</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Restarting conditionally. </span>
          Restarts services if they are currently running. Does nothing for
          services that are not running.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">try-restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">try-restart</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Reloading. </span>
          Tells services to reload their configuration files without
          interrupting operation. Use case: Tell Apache to reload a modified
          <code class="filename">httpd.conf</code> configuration file. Note that not all
          services support reloading.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Reloading or restarting. </span>
          Reloads services if reloading is supported, otherwise restarts them.
          If a service is not yet running it will be started.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload-or-restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">n/a</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Reloading or restarting conditionally. </span>
          Reloads services if reloading is supported, otherwise restarts them
          if currently running. Does nothing for services that are not running.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">reload-or-try-restart</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">n/a</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Getting detailed status information. </span>
          Lists information about the status of services. The <code class="systemitem">systemd</code> command
          shows details such as description, executable, status, cgroup, and
          messages last issued by a service (see
          <a class="xref" href="#sec.boot.systemd.basics.services_debugging" title="14.6.8. Debugging Services">Section 14.6.8, “Debugging Services”</a>). The
          level of details displayed with the System V init differs from
          service to service.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
       </td></tr><tr><td>
        <p><span class="formalpara-title">Getting short status information. </span>
          Shows whether services are active or not.
         </p>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">is-active</pre></div>
       </td><td>
<div class="verbatim-wrap"><pre class="screen">status</pre></div>
       </td></tr></tbody></table></div></div></div><div class="sect2 " id="sec.boot.systemd.basics.services_enabling"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.basics.services_enabling"><span class="number">14.2.2 </span><span class="name">Permanently Enabling/Disabling Services</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.basics.services_enabling">#</a></h3></div></div></div><p>
    The service management commands mentioned in the previous section let you
    manipulate services for the current session. systemd also lets you
    permanently enable or disable services, so they are automatically started
    when requested or are always unavailable. You can either do this by using
    YaST, or on the command line.
   </p><div class="sect3 " id="sec.boot.systemd.basics.services_enabling.cmd"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.basics.services_enabling.cmd"><span class="number">14.2.2.1 </span><span class="name">Enabling/Disabling Services on the Command Line</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.basics.services_enabling.cmd">#</a></h4></div></div></div><p>
     The following table lists enabling and disabling commands for systemd and
     System V init:
    </p><div id="idm139698750454464" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Service Start</h6><p>
      When enabling a service on the command line, it is not started
      automatically. It is scheduled to be started with the next system
      start-up or runlevel/target change. To immediately start a service after
      having enabled it, explicitly run <code class="command">systemctl start
      <em class="replaceable ">MY_SERVICE</em></code> or <code class="command">rc
      <em class="replaceable ">MY_SERVICE</em> start</code>.
     </p></div><div class="table" id="idm139698750451248"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.2: </span><span class="name">Commands for Enabling and Disabling Services </span><a title="Permalink" class="permalink" href="#idm139698750451248">#</a></h6></div><div class="table-contents"><table summary="Commands for Enabling and Disabling Services" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
         <p>
          Task
         </p>
        </th><th>
         <p>
          <code class="systemitem">systemd</code> Command
         </p>
        </th><th>
         <p>
          System V init Command
         </p>
        </th></tr></thead><tbody><tr><td>
         <p><span class="formalpara-title">Enabling. </span></p>
        </td><td>
         <p>
          <code class="command">systemctl enable
          <em class="replaceable ">MY_SERVICE(S)</em></code>
         </p>
        </td><td>
         <p>
          <code class="command">insserv <em class="replaceable ">MY_SERVICE(S)</em></code>,
          <code class="command">chkconfig -a
          <em class="replaceable ">MY_SERVICE(S)</em></code>
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Disabling. </span></p>
        </td><td>
         <p>
          <code class="command">systemctl disable
          <em class="replaceable ">MY_SERVICE(S)</em>.service</code>
         </p>
        </td><td>
         <p>
          <code class="command">insserv -r
          <em class="replaceable ">MY_SERVICE(S)</em></code>,
          <code class="command">chkconfig -d
          <em class="replaceable ">MY_SERVICE(S)</em></code>
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Checking. </span>
           Shows whether a service is enabled or not.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl is-enabled
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          <code class="command">chkconfig <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Re-enabling. </span>
           Similar to restarting a service, this command first disables and
           then enables a service. Useful to re-enable a service with its
           defaults.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl reenable
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Masking. </span>
           After <span class="quote">“<span class="quote">disabling</span>”</span> a service, it can still be started
           manually. To completely disable a service, you need to mask it. Use
           with care.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl mask
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr><tr><td>
         <p><span class="formalpara-title">Unmasking. </span>
           A service that has been masked can only be used again after it has
           been unmasked.
          </p>
        </td><td>
         <p>
          <code class="command">systemctl unmask
          <em class="replaceable ">MY_SERVICE</em></code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr></tbody></table></div></div></div></div></div><div class="sect1 " id="sec.boot.systemd.boot"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.boot"><span class="number">14.3 </span><span class="name">System Start and Target Management</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.boot">#</a></h2></div></div></div><p>
   The entire process of starting the system and shutting it down is maintained
   by systemd. From this point of view, the kernel can be considered a
   background process to maintain all other processes and adjust CPU time and
   hardware access according to requests from other programs.
  </p><div class="sect2 " id="sec.boot.systemd.targets"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.targets"><span class="number">14.3.1 </span><span class="name">Targets Compared to Runlevels</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.targets">#</a></h3></div></div></div><p>
    With System V init the system was booted into a so-called
    <span class="quote">“<span class="quote">Runlevel</span>”</span>. A runlevel defines how the system is started and
    what services are available in the running system. Runlevels are numbered;
    the most commonly known ones are <code class="literal">0</code> (shutting down the
    system), <code class="literal">3</code> (multiuser with network) and
    <code class="literal">5</code> (multiuser with network and display manager).
   </p><p>
    systemd introduces a new concept by using so-called <span class="quote">“<span class="quote">target
    units</span>”</span>. However, it remains fully compatible with the runlevel
    concept. Target units are named rather than numbered and serve specific
    purposes. For example, the targets <code class="systemitem">local-fs.target</code>
    and <code class="systemitem">swap.target</code> mount local file systems and swap
    spaces.
   </p><p>
    The target <code class="systemitem">graphical.target</code> provides a multiuser
    system with network and display manager capabilities and is equivalent to
    runlevel 5. Complex targets, such as
    <code class="systemitem">graphical.target</code> act as <span class="quote">“<span class="quote">meta</span>”</span>
    targets by combining a subset of other targets. Since systemd makes it easy
    to create custom targets by combining existing targets, it offers great
    flexibility.
   </p><p>
    The following list shows the most important systemd target units. For a
    full list refer to <code class="command">man 7 systemd.special</code>.
   </p><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Selected systemd Target Units </span><a title="Permalink" class="permalink" href="#idm139698750391296">#</a></h6></div><dl class="variablelist"><dt id="idm139698750390544"><span class="term "><code class="systemitem">default.target</code>
     </span></dt><dd><p>
       The target that is booted by default. Not a <span class="quote">“<span class="quote">real</span>”</span> target,
       but rather a symbolic link to another target like
       <code class="systemitem">graphic.target</code>. Can be permanently changed via
       YaST (see <a class="xref" href="#sec.boot.runlevel.edit" title="14.4. Managing Services with YaST">Section 14.4, “Managing Services with YaST”</a>). To change it for
       a session, use the kernel parameter
       <code class="literal">systemd.unit=<em class="replaceable ">MY_TARGET.target</em></code>
       at the boot prompt.
      </p></dd><dt id="idm139698750386080"><span class="term "><code class="systemitem">emergency.target</code>
     </span></dt><dd><p>
       Starts an emergency shell on the console. Only use it at the boot prompt
       as <code class="literal">systemd.unit=emergency.target</code>.
      </p></dd><dt id="idm139698750383456"><span class="term "><code class="systemitem">graphical.target</code>
     </span></dt><dd><p>
       Starts a system with network, multiuser support and a display manager.
      </p></dd><dt id="idm139698750381312"><span class="term "><code class="systemitem">halt.target</code>
     </span></dt><dd><p>
       Shuts down the system.
      </p></dd><dt id="idm139698750379216"><span class="term "><code class="systemitem">mail-transfer-agent.target</code>
     </span></dt><dd><p>
       Starts all services necessary for sending and receiving mails.
      </p></dd><dt id="idm139698750377056"><span class="term "><code class="systemitem">multi-user.target</code>
     </span></dt><dd><p>
       Starts a multiuser system with network.
      </p></dd><dt id="idm139698750374944"><span class="term "><code class="systemitem">reboot.target</code>
     </span></dt><dd><p>
       Reboots the system.
      </p></dd><dt id="idm139698750372848"><span class="term "><code class="systemitem">rescue.target</code>
     </span></dt><dd><p>
       Starts a single-user system without network.
      </p></dd></dl></div><p>
    To remain compatible with the System V init runlevel system, systemd
    provides special targets named
    <code class="literal">runlevel<em class="replaceable ">X</em>.target</code> mapping the
    corresponding runlevels numbered <em class="replaceable ">X</em>.
   </p><p>
    If you want to know the current target, use the command: <code class="command">systemctl
    get-default</code>
   </p><div class="table" id="idm139698750367680"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.3: </span><span class="name">System V Runlevels and <code class="systemitem">systemd</code> Target Units </span><a title="Permalink" class="permalink" href="#idm139698750367680">#</a></h6></div><div class="table-contents"><table summary="System V Runlevels and systemd Target Units" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
        <p>
         System V runlevel
        </p>
       </th><th>
        <p>
         <code class="systemitem">systemd</code> target
        </p>
       </th><th>
        <p>
         Purpose
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         0
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel0.target</code>,
         <code class="systemitem">halt.target</code>,
         <code class="systemitem">poweroff.target</code>
        </p>
       </td><td>
        <p>
         System shutdown
        </p>
       </td></tr><tr><td>
        <p>
         1, S
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel1.target</code>,
         <code class="systemitem">rescue.target</code>,
        </p>
       </td><td>
        <p>
         Single-user mode
        </p>
       </td></tr><tr><td>
        <p>
         2
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel2.target</code>,
         <code class="systemitem">multi-user.target</code>,
        </p>
       </td><td>
        <p>
         Local multiuser without remote network
        </p>
       </td></tr><tr><td>
        <p>
         3
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel3.target</code>,
         <code class="systemitem">multi-user.target</code>,
        </p>
       </td><td>
        <p>
         Full multiuser with network
        </p>
       </td></tr><tr><td>
        <p>
         4
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel4.target</code>
        </p>
       </td><td>
        <p>
         Unused/User-defined
        </p>
       </td></tr><tr><td>
        <p>
         5
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel5.target</code>,
         <code class="systemitem">graphical.target</code>,
        </p>
       </td><td>
        <p>
         Full multiuser with network and display manager
        </p>
       </td></tr><tr><td>
        <p>
         6
        </p>
       </td><td>
        <p>
         <code class="systemitem">runlevel6.target</code>,
         <code class="systemitem">reboot.target</code>,
        </p>
       </td><td>
        <p>
         System reboot
        </p>
       </td></tr></tbody></table></div></div><div id="idm139698750328560" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: systemd Ignores <code class="filename">/etc/inittab</code></h6><p>
     The runlevels in a System V init system are configured in
     <code class="filename">/etc/inittab</code>. systemd does <span class="emphasis"><em>not</em></span>
     use this configuration. Refer to
     <a class="xref" href="#sec.boot.systemd.custom.targets" title="14.5.3. Creating Custom Targets">Section 14.5.3, “Creating Custom Targets”</a> for instructions on how
     to create your own bootable target.
    </p></div><div class="sect3 " id="sec.boot.systemd.targets.commands"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.targets.commands"><span class="number">14.3.1.1 </span><span class="name">Commands to Change Targets</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.targets.commands">#</a></h4></div></div></div><p>
     Use the following commands to operate with target units:
    </p><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><thead><tr><th>
         <p>
          Task
         </p>
        </th><th>
         <p>
          systemd Command
         </p>
        </th><th>
         <p>
          System V init Command
         </p>
        </th></tr></thead><tbody><tr><td>
         <p>
          Change the current target/runlevel
         </p>
        </td><td>
         <p>
          <code class="command">systemctl isolate</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
        </td><td>
         <p>
          <code class="command">telinit</code> <em class="replaceable ">X</em>
         </p>
        </td></tr><tr><td>
         <p>
          Change to the default target/runlevel
         </p>
        </td><td>
         <p>
          <code class="command">systemctl default</code>
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr><tr><td>
         <p>
          Get the current target/runlevel
         </p>
        </td><td>
         <p>
          <code class="command">systemctl list-units --type=target</code>
         </p>
         <p>
          With systemd there is usually more than one active target. The
          command lists all currently active targets.
         </p>
        </td><td>
         <p>
          <code class="command">who -r</code>
         </p>
         <p>
          or
         </p>
         <p>
          <code class="command">runlevel</code>
         </p>
        </td></tr><tr><td>
         <p>
          persistently change the default runlevel
         </p>
        </td><td>
         <p>
          Use the Services Manager or run the following command:
         </p>
         <p>
          <code class="command">ln -sf /usr/lib/systemd/system/</code>
          <em class="replaceable ">MY_TARGET</em>.target
          /etc/systemd/system/default.target
         </p>
        </td><td>
         <p>
          Use the Services Manager or change the line
         </p>
         <p>
          <code class="command">id:</code> <em class="replaceable ">X</em>:initdefault:
         </p>
         <p>
          in <code class="filename">/etc/inittab</code>
         </p>
        </td></tr><tr><td>
         <p>
          Change the default runlevel for the current boot process
         </p>
        </td><td>
         <p>
          Enter the following option at the boot prompt
         </p>
         <p>
          <code class="command">systemd.unit=</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
        </td><td>
         <p>
          Enter the desired runlevel number at the boot prompt.
         </p>
        </td></tr><tr><td>
         <p>
          Show a target's/runlevel's dependencies
         </p>
        </td><td>
         <p>
          <code class="command">systemctl show -p "Requires"</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
         <p>
          <code class="command">systemctl show -p "Wants"</code>
          <em class="replaceable ">MY_TARGET</em>.target
         </p>
         <p>
          <span class="quote">“<span class="quote">Requires</span>”</span> lists the hard dependencies (the ones that
          must be resolved), whereas <span class="quote">“<span class="quote">Wants</span>”</span> lists the soft
          dependencies (the ones that get resolved if possible).
         </p>
        </td><td>
         <p>
          n/a
         </p>
        </td></tr></tbody></table></div></div></div><div class="sect2 " id="sec.boot.systemd.debug"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.debug"><span class="number">14.3.2 </span><span class="name">Debugging System Start-Up</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.debug">#</a></h3></div></div></div><p>
    systemd offers the means to analyze the system start-up process. You can
    review the list of all services and their status (rather than having to
    parse <code class="filename">/varlog/</code>). systemd also allows you to scan the
    start-up procedure to find out how much time each service start-up
    consumes.
   </p><div class="sect3 " id="sec.boot.systemd.debug.review"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.debug.review"><span class="number">14.3.2.1 </span><span class="name">Review Start-Up of Services</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.debug.review">#</a></h4></div></div></div><p>
     To review the complete list of services that have been started since
     booting the system, enter the command <code class="command">systemctl</code>. It
     lists all active services like shown below (shortened). To get more
     information on a specific service, use <code class="command">systemctl status
     <em class="replaceable ">MY_SERVICE</em></code>.
    </p><div class="example" id="idm139698750270240"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 14.1: </span><span class="name">List Active Services </span><a title="Permalink" class="permalink" href="#idm139698750270240">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl
UNIT                        LOAD   ACTIVE SUB       JOB DESCRIPTION
[...]
iscsi.service               loaded active exited    Login and scanning of iSC+
kmod-static-nodes.service   loaded active exited    Create list of required s+
libvirtd.service            loaded active running   Virtualization daemon
nscd.service                loaded active running   Name Service Cache Daemon
chronyd.service             loaded active running   NTP Server Daemon
polkit.service              loaded active running   Authorization Manager
postfix.service             loaded active running   Postfix Mail Transport Ag+
rc-local.service            loaded active exited    /etc/init.d/boot.local Co+
rsyslog.service             loaded active running   System Logging Service
[...]
LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

161 loaded units listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.</pre></div></div></div><p>
     To restrict the output to services that failed to start, use the
     <code class="option">--failed</code> option:
    </p><div class="example" id="idm139698750266256"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 14.2: </span><span class="name">List Failed Services </span><a title="Permalink" class="permalink" href="#idm139698750266256">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl --failed
UNIT                   LOAD   ACTIVE SUB    JOB DESCRIPTION
apache2.service        loaded failed failed     apache
NetworkManager.service loaded failed failed     Network Manager
plymouth-start.service loaded failed failed     Show Plymouth Boot Screen

[...]</pre></div></div></div></div><div class="sect3 " id="sec.boot.systemd.debug.time"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.debug.time"><span class="number">14.3.2.2 </span><span class="name">Debug Start-Up Time</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.debug.time">#</a></h4></div></div></div><p>
     To debug system start-up time, systemd offers the
     <code class="command">systemd-analyze</code> command. It shows the total start-up
     time, a list of services ordered by start-up time and can also generate an
     SVG graphic showing the time services took to start in relation to the
     other services.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750261312"><span class="term ">Listing the System Start-Up Time</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-analyze
Startup finished in 2666ms (kernel) + 21961ms (userspace) = 24628ms</pre></div></dd><dt id="idm139698750258928"><span class="term ">Listing the Services Start-Up Time</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-analyze blame
  6472ms systemd-modules-load.service
  5833ms remount-rootfs.service
  4597ms network.service
  4254ms systemd-vconsole-setup.service
  4096ms postfix.service
  2998ms xdm.service
  2483ms localnet.service
  2470ms SuSEfirewall2_init.service
  2189ms avahi-daemon.service
  2120ms systemd-logind.service
  1080ms chronyd.service
[...]
    75ms fbset.service
    72ms purge-kernels.service
    47ms dev-vda1.swap
    38ms bluez-coldplug.service
    35ms splash_early.service</pre></div></dd><dt id="idm139698750256080"><span class="term ">Services Start-Up Time Graphics</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-analyze plot &gt; jupiter.example.com-startup.svg</pre></div><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/systemd_startup.png"><img src="images/systemd_startup.png" width="" /></a></div></div></dd></dl></div></div><div class="sect3 " id="sec.boot.systemd.debug.complete"><div class="titlepage"><div><div><h4 class="title" id="sec.boot.systemd.debug.complete"><span class="number">14.3.2.3 </span><span class="name">Review the Complete Start-Up Process</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.debug.complete">#</a></h4></div></div></div><p>
     The above-mentioned commands let you review the services that started and
     the time it took to start them. If you need to know more details, you can
     tell <code class="systemitem">systemd</code> to verbosely log the complete start-up procedure by
     entering the following parameters at the boot prompt:
    </p><div class="verbatim-wrap"><pre class="screen">systemd.log_level=debug systemd.log_target=kmsg</pre></div><p>
     Now <code class="systemitem">systemd</code> writes its log messages into the kernel ring buffer. View
     that buffer with <code class="command">dmesg</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>dmesg -T | less</pre></div></div></div><div class="sect2 " id="sec.boot.systemd.sysv_compatibility"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.sysv_compatibility"><span class="number">14.3.3 </span><span class="name">System V Compatibility</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.sysv_compatibility">#</a></h3></div></div></div><p>
    systemd is compatible with System V, allowing you to still use existing
    System V init scripts. However, there is at least one known issue where a
    System V init script does not work with systemd out of the box: starting a
    service as a different user via <code class="command">su</code> or
    <code class="command">sudo</code> in init scripts will result in a failure of the
    script, producing an <span class="quote">“<span class="quote">Access denied</span>”</span> error.
   </p><p>
    When changing the user with <code class="command">su</code> or
    <code class="command">sudo</code>, a PAM session is started. This session will be
    terminated after the init script is finished. As a consequence, the service
    that has been started by the init script will also be terminated. To work
    around this error, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create a service file wrapper with the same name as the init script plus
      the file name extension <code class="filename">.service</code>:
     </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Description=<em class="replaceable ">DESCRIPTION</em>
After=network.target

[Service]
User=<em class="replaceable ">USER</em>
Type=forking<span id="co.service_wrapper.type"></span><span class="callout">1</span>
PIDFile=<em class="replaceable ">PATH TO PID FILE</em><a class="xref" href="#co.service_wrapper.type"><span class="callout">1</span></a>
ExecStart=<em class="replaceable ">PATH TO INIT SCRIPT</em> start
ExecStop=<em class="replaceable ">PATH TO INIT SCRIPT</em> stop
ExecStopPost=/usr/bin/rm -f <em class="replaceable ">PATH TO PID FILE</em><a class="xref" href="#co.service_wrapper.type"><span class="callout">1</span></a>

[Install]
WantedBy=multi-user.target<span id="co.service_wrapper.target"></span><span class="callout">2</span></pre></div><p>
      Replace all values written in <em class="replaceable ">UPPERCASE
      LETTERS</em> with appropriate values.
     </p><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.service_wrapper.type"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
        Optional—only use if the init script starts a daemon.
       </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.service_wrapper.target"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
        <code class="literal">multi-user.target</code> also starts the init script when
        booting into <code class="literal">graphical.target</code>. If it should only be
        started when booting into the display manager, user
        <code class="literal">graphical.target</code> here.
       </p></td></tr></table></div></li><li class="step "><p>
      Start the daemon with <code class="command">systemctl start
      <em class="replaceable ">APPLICATION</em></code>.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.boot.runlevel.edit"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.runlevel.edit"><span class="number">14.4 </span><span class="name">Managing Services with YaST</span> <a title="Permalink" class="permalink" href="#sec.boot.runlevel.edit">#</a></h2></div></div></div><p>
   Basic service management can also be done with the YaST Services Manager
   module. It supports starting, stopping, enabling and disabling services. It
   also lets you show a service's status and change the default target. Start
   the YaST module with <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Services Manager</span>.
  </p><div class="figure" id="fig.yast2.runlevel"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_runlevel.png"><img src="images/yast2_runlevel.png" width="" alt="Services Manager" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 14.1: </span><span class="name">Services Manager </span><a title="Permalink" class="permalink" href="#fig.yast2.runlevel">#</a></h6></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698750213856"><span class="term ">Changing the <span class="guimenu">Default System Target</span>
    </span></dt><dd><p>
      To change the target the system boots into, choose a target from the
      <span class="guimenu">Default System Target</span> drop-down box. The most often
      used targets are <span class="guimenu">Graphical Interface</span> (starting a
      graphical login screen) and <span class="guimenu">Multi-User</span> (starting the
      system in command line mode).
     </p></dd><dt id="idm139698750210096"><span class="term ">Starting or Stopping a Service</span></dt><dd><p>
      Select a service from the table. The <span class="guimenu">Active</span> column
      shows whether it is currently running (<span class="guimenu">Active</span>) or not
      (<span class="guimenu">Inactive</span>). Toggle its status by choosing
      <span class="guimenu">Start/Stop</span>.
     </p><p>
      Starting or stopping a service changes its status for the currently
      running session. To change its status throughout a reboot, you need to
      enable or disable it.
     </p></dd><dt id="idm139698750205792"><span class="term ">Enabling or Disabling a Service</span></dt><dd><p>
      Select a service from the table. The <span class="guimenu">Enabled</span> column
      shows whether it is currently <span class="guimenu">Enabled</span> or
      <span class="guimenu">Disabled</span>. Toggle its status by choosing
      <span class="guimenu">Enable/Disable</span>.
     </p><p>
      By enabling or disabling a service you configure whether it is started
      during booting (<span class="guimenu">Enabled</span>) or not
      (<span class="guimenu">Disabled</span>). This setting will not affect the current
      session. To change its status in the current session, you need to start
      or stop it.
     </p></dd><dt id="idm139698750200560"><span class="term ">View a Status Messages</span></dt><dd><p>
      To view the status message of a service, select it from the list and
      choose <span class="guimenu">Show Details</span>. The output you will see is
      identical to the one generated by the command
      <code class="command">systemctl</code> <code class="option">-l</code> status
      <em class="replaceable ">MY_SERVICE</em>.
     </p></dd></dl></div><div id="idm139698750196672" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Faulty Runlevel Settings May Damage Your System</h6><p>
    Faulty runlevel settings may make your system unusable. Before applying
    your changes, make absolutely sure that you know their consequences.
   </p></div></div><div class="sect1 " id="sec.boot.systemd.custom"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.custom"><span class="number">14.5 </span><span class="name">Customization of <code class="systemitem">systemd</code></span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.custom">#</a></h2></div></div></div><p>
   The following sections contain some examples for
   <code class="systemitem">systemd</code> customization.
  </p><div id="idm139698750192592" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Avoiding Overwritten Customization</h6><p>
    Always do systemd customization in <code class="filename">/etc/systemd/</code>,
    <span class="emphasis"><em>never</em></span> in <code class="filename">/usr/lib/systemd/</code>.
    Otherwise your changes will be overwritten by the next update of systemd.
   </p></div><div class="sect2 " id="sec.boot.systemd.custom.service"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.custom.service"><span class="number">14.5.1 </span><span class="name">Customizing Unit Files</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.custom.service">#</a></h3></div></div></div><p>
    The systemd unit files are located in
    <code class="filename">/usr/lib/systemd/system</code>. If you want to customize
    them, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Copy the files you want to modify from
      <code class="filename">/usr/lib/systemd/system</code> to
      <code class="filename">/etc/systemd/system</code>. Keep the file names identical
      to the original ones.
     </p></li><li class="step "><p>
      Modify the copies in <code class="filename">/etc/systemd/system</code> according
      to your needs.
     </p></li><li class="step "><p>
      For an overview of your configuration changes, use the
      <code class="command">systemd-delta</code> command. It can compare and identify
      configuration files that override other configuration files. For details,
      refer to the <code class="command">systemd-delta</code> man page.
     </p></li></ol></div></div><p>
    The modified files in <code class="filename">/etc/systemd</code> will take
    precedence over the original files in
    <code class="filename">/usr/lib/systemd/system</code>, provided that their file name
    is the same.
   </p><div class="sect3 " id="systemd.xinetd_conversion"><div class="titlepage"><div><div><h4 class="title" id="systemd.xinetd_conversion"><span class="number">14.5.1.1 </span><span class="name">Converting <code class="systemitem">xinetd</code> Services to <code class="systemitem">systemd</code></span> <a title="Permalink" class="permalink" href="#systemd.xinetd_conversion">#</a></h4></div></div></div><p>
     Since the release of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> 15, the <code class="systemitem">xinetd</code>
     infrastructure has been removed. This section outlines how to convert
     existing custom <code class="systemitem">xinetd</code> service files to <code class="systemitem">systemd</code>
     sockets.
    </p><p>
     For each <code class="systemitem">xinetd</code> service file, you need at least
     two <code class="systemitem">systemd</code> unit files: the socket file (<code class="filename">*.socket</code>)
     and an associated service file (<code class="filename">*.service</code>). The
     socket file tells <code class="systemitem">systemd</code> which socket to create, and the service file
     tells what executable to start.
    </p><p>
     Consider the following example <code class="systemitem">xinetd</code> service
     file:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cat /etc/xinetd.d/example
service example
{
  socket_type = stream
  protocol = tcp
  port = 10085
  wait = no
  user = user
  group = users
  groups = yes
  server = /usr/libexec/example/exampled
  server_args = -auth=bsdtcp exampledump
  disable = no
}</pre></div><p>
     To convert it to <code class="systemitem">systemd</code>, you need the following two matching files:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cat /usr/lib/systemd/system/example.socket
[Socket]
ListenStream=0.0.0.0:10085
Accept=false

[Install]
WantedBy=sockets.target</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>cat /usr/lib/systemd/system/example.service
[Unit]
Description=example

[Service]
ExecStart=/usr/libexec/example/exampled -auth=bsdtcp exampledump
User=user
Group=users
StandardInput=socket</pre></div><p>
     For a complete list of the <code class="systemitem">systemd</code> 'socket' and 'service' file options,
     refer to systemd.socket and systemd.service manual pages (<code class="command">man 5
     systemd.socket</code>, <code class="command">man 5 systemd.service</code>).
    </p></div></div><div class="sect2 " id="sec.boot.systemd.custom.drop-in"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.custom.drop-in"><span class="number">14.5.2 </span><span class="name">Creating <span class="quote">“<span class="quote">Drop-in</span>”</span> Files</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.custom.drop-in">#</a></h3></div></div></div><p>
    If you only want to add a few lines to a configuration file or modify a
    small part of it, you can use so-called <span class="quote">“<span class="quote">drop-in</span>”</span> files.
    Drop-in files let you extend the configuration of unit files without having
    to edit or override the unit files themselves.
   </p><p>
    For example, to change one value for the <em class="replaceable ">FOOBAR</em>
    service located in
    <code class="filename">/usr/lib/systemd/system/<em class="replaceable ">FOOBAR.SERVICE</em></code>,
    proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Create a directory called
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_SERVICE</em>.service.d/</code>.
     </p><p>
      Note the <code class="literal">.d</code> suffix. The directory must otherwise be
      named like the service that you want to patch with the drop-in file.
     </p></li><li class="step "><p>
      In that directory, create a file
      <code class="filename"><em class="replaceable ">WHATEVERMODIFICATION</em>.conf</code>.
     </p><p>
      Make sure it only contains the line with the value that you want to
      modify.
     </p></li><li class="step "><p>
      Save your changes to the file. It will be used as an extension of the
      original file.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.boot.systemd.custom.targets"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.custom.targets"><span class="number">14.5.3 </span><span class="name">Creating Custom Targets</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.custom.targets">#</a></h3></div></div></div><p>
    On System V init SUSE systems, runlevel 4 is unused to allow
    administrators to create their own runlevel configuration. systemd allows
    you to create any number of custom targets. It is suggested to start by
    adapting an existing target such as
    <code class="systemitem">graphical.target</code>.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Copy the configuration file
      <code class="filename">/usr/lib/systemd/system/graphical.target</code> to
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_TARGET</em>.target</code>
      and adjust it according to your needs.
     </p></li><li class="step "><p>
      The configuration file copied in the previous step already covers the
      required (<span class="quote">“<span class="quote">hard</span>”</span>) dependencies for the target. To also cover
      the wanted (<span class="quote">“<span class="quote">soft</span>”</span>) dependencies, create a directory
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_TARGET</em>.target.wants</code>.
     </p></li><li class="step "><p>
      For each wanted service, create a symbolic link from
      <code class="filename">/usr/lib/systemd/system</code> into
      <code class="filename">/etc/systemd/system/<em class="replaceable ">MY_TARGET</em>.target.wants</code>.
     </p></li><li class="step "><p>
      Once you have finished setting up the target, reload the systemd
      configuration to make the new target available:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl daemon-reload</pre></div></li></ol></div></div></div></div><div class="sect1 " id="sec.boot.systemd.advanced"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.advanced"><span class="number">14.6 </span><span class="name">Advanced Usage</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced">#</a></h2></div></div></div><p>
   The following sections cover advanced topics for system administrators. For
   even more advanced systemd documentation, refer to Lennart Pöttering's
   series about systemd for administrators at
   <a class="link" href="http://0pointer.de/blog/projects" target="_blank">http://0pointer.de/blog/projects</a>.
  </p><div class="sect2 " id="sec.boot.systemd.advanced.tmp"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.tmp"><span class="number">14.6.1 </span><span class="name">Cleaning Temporary Directories</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.tmp">#</a></h3></div></div></div><p>
    <code class="systemitem">systemd</code> supports cleaning temporary directories regularly. The
    configuration from the previous system version is automatically migrated
    and active. <code class="literal">tmpfiles.d</code>—which is responsible for
    managing temporary files—reads its configuration from
    <code class="filename">/etc/tmpfiles.d/*.conf</code> ,
    <code class="filename">/run/tmpfiles.d/*.conf</code>, and
    <code class="filename">/usr/lib/tmpfiles.d/*.conf</code> files. Configuration placed
    in <code class="filename">/etc/tmpfiles.d/*.conf</code> overrides related
    configurations from the other two directories
    (<code class="filename">/usr/lib/tmpfiles.d/*.conf</code> is where packages store
    their configuration files).
   </p><p>
    The configuration format is one line per path containing action and path,
    and optionally mode, ownership, age and argument fields, depending on the
    action. The following example unlinks the X11 lock files:
   </p><div class="verbatim-wrap"><pre class="screen">Type Path               Mode UID  GID  Age Argument
r    /tmp/.X[0-9]*-lock</pre></div><p>
    To get the status the tmpfile timer:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl status systemd-tmpfiles-clean.timer
systemd-tmpfiles-clean.timer - Daily Cleanup of Temporary Directories
 Loaded: loaded (/usr/lib/systemd/system/systemd-tmpfiles-clean.timer; static)
 Active: active (waiting) since Tue 2014-09-09 15:30:36 CEST; 1 weeks 6 days ago
   Docs: man:tmpfiles.d(5)
         man:systemd-tmpfiles(8)

Sep 09 15:30:36 jupiter systemd[1]: Starting Daily Cleanup of Temporary Directories.
Sep 09 15:30:36 jupiter systemd[1]: Started Daily Cleanup of Temporary Directories.</pre></div><p>
    For more information on temporary files handling, see <code class="command">man 5
    tmpfiles.d</code>.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.logging"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.logging"><span class="number">14.6.2 </span><span class="name">System Log</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.logging">#</a></h3></div></div></div><p>
    <a class="xref" href="#sec.boot.systemd.basics.services_debugging" title="14.6.8. Debugging Services">Section 14.6.8, “Debugging Services”</a> explains how
    to view log messages for a given service. However, displaying log messages
    is not restricted to service logs. You can also access and query the
    complete log messages written by <code class="systemitem">systemd</code>—the so-called
    <span class="quote">“<span class="quote">Journal</span>”</span>. Use the command
    <code class="command">systemd-journalctl</code> to display the complete log messages
    starting with the oldest entries. Refer to <code class="command">man 1
    systemd-journalctl</code> for options such as applying filters or
    changing the output format.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.snapshots"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.snapshots"><span class="number">14.6.3 </span><span class="name">Snapshots</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.snapshots">#</a></h3></div></div></div><p>
    You can save the current state of <code class="systemitem">systemd</code> to a named snapshot and later
    revert to it with the <code class="command">isolate</code> subcommand. This is useful
    when testing services or custom targets, because it allows you to return to
    a defined state at any time. A snapshot is only available in the current
    session and will automatically be deleted on reboot. A snapshot name must
    end in <code class="filename">.snapshot</code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750118928"><span class="term ">Create a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl snapshot <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="idm139698750116112"><span class="term ">Delete a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl delete <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="idm139698750113296"><span class="term ">View a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl show <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd><dt id="idm139698750110480"><span class="term ">Activate a Snapshot</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl isolate <em class="replaceable ">MY_SNAPSHOT</em>.snapshot</pre></div></dd></dl></div></div><div class="sect2 " id="sec.boot.systemd.advanced.kernel_modules"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.kernel_modules"><span class="number">14.6.4 </span><span class="name">Loading Kernel Modules</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.kernel_modules">#</a></h3></div></div></div><p>
    With <code class="systemitem">systemd</code>, kernel modules can automatically be loaded at boot time via
    a configuration file in <code class="filename">/etc/modules-load.d</code>. The file
    should be named <em class="replaceable ">MODULE</em>.conf and have the
    following content:
   </p><div class="verbatim-wrap"><pre class="screen"># load module <em class="replaceable ">MODULE</em> at boot time
<em class="replaceable ">MODULE</em></pre></div><p>
    In case a package installs a configuration file for loading a kernel
    module, the file gets installed to
    <code class="filename">/usr/lib/modules-load.d</code>. If two configuration files
    with the same name exist, the one in
    <code class="filename">/etc/modules-load.d</code> tales precedence.
   </p><p>
    For more information, see the <code class="systemitem">modules-load.d(5)</code>
    man page.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.before.local"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.before.local"><span class="number">14.6.5 </span><span class="name">Performing Actions before Loading a Service</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.before.local">#</a></h3></div></div></div><p>
    With System V init actions that need to be performed before loading a
    service, needed to be specified in <code class="filename">/etc/init.d/before.local
    </code>. This procedure is no longer supported with systemd. If you
    need to do actions before starting services, do the following:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750097584"><span class="term ">Loading Kernel Modules</span></dt><dd><p>
       Create a drop-in file in <code class="filename">/etc/modules-load.d</code>
       directory (see <code class="command">man modules-load.d</code> for the syntax)
      </p></dd><dt id="idm139698750094880"><span class="term ">
     Creating Files or Directories, Cleaning-up Directories, Changing
     Ownership
     </span></dt><dd><p>
       Create a drop-in file in <code class="filename">/etc/tmpfiles.d</code> (see
       <code class="command">man tmpfiles.d</code> for the syntax)
      </p></dd><dt id="idm139698750092096"><span class="term ">Other Tasks</span></dt><dd><p>
       Create a system service file, for example
       <code class="filename">/etc/systemd/system/before.service</code>, from the
       following template:
      </p><div class="verbatim-wrap"><pre class="screen">[Unit]
Before=<em class="replaceable ">NAME OF THE SERVICE YOU WANT THIS SERVICE TO BE STARTED BEFORE</em>
[Service]
Type=oneshot
RemainAfterExit=true
ExecStart=<em class="replaceable ">YOUR_COMMAND</em>
# beware, executable is run directly, not through a shell, check the man pages
# systemd.service and systemd.unit for full syntax
[Install]
# target in which to start the service
WantedBy=multi-user.target
#WantedBy=graphical.target</pre></div><p>
       When the service file is created, you should run the following commands
       (as <code class="systemitem">root</code>):
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl daemon-reload
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl enable before</pre></div><p>
       Every time you modify the service file, you need to run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl daemon-reload</pre></div></dd></dl></div></div><div class="sect2 " id="sec.boot.systemd.advanced.cgroups"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.cgroups"><span class="number">14.6.6 </span><span class="name">Kernel Control Groups (cgroups)</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.cgroups">#</a></h3></div></div></div><p>
    On a traditional System V init system it is not always possible to clearly
    assign a process to the service that spawned it. Some services, such as
    Apache, spawn a lot of third-party processes (for example CGI or Java
    processes), which themselves spawn more processes. This makes a clear
    assignment difficult or even impossible. Additionally, a service may not
    terminate correctly, leaving some children alive.
   </p><p>
    systemd solves this problem by placing each service into its own cgroup.
    cgroups are a kernel feature that allows aggregating processes and all
    their children into hierarchical organized groups. systemd names each
    cgroup after its service. Since a non-privileged process is not allowed to
    <span class="quote">“<span class="quote">leave</span>”</span> its cgroup, this provides an effective way to label
    all processes spawned by a service with the name of the service.
   </p><p>
    To list all processes belonging to a service, use the command
    <code class="command">systemd-cgls</code>. The result will look like the following
    (shortened) example:
   </p><div class="example" id="idm139698750078912"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 14.3: </span><span class="name">List all Processes Belonging to a Service </span><a title="Permalink" class="permalink" href="#idm139698750078912">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemd-cgls --no-pager
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 20
├─user.slice
│ └─user-1000.slice
│   ├─session-102.scope
│   │ ├─12426 gdm-session-worker [pam/gdm-password]
│   │ ├─15831 gdm-session-worker [pam/gdm-password]
│   │ ├─15839 gdm-session-worker [pam/gdm-password]
│   │ ├─15858 /usr/lib/gnome-terminal-server

[...]

└─system.slice
  ├─systemd-hostnamed.service
  │ └─17616 /usr/lib/systemd/systemd-hostnamed
  ├─cron.service
  │ └─1689 /usr/sbin/cron -n
  ├─postfix.service
  │ ├─ 1676 /usr/lib/postfix/master -w
  │ ├─ 1679 qmgr -l -t fifo -u
  │ └─15590 pickup -l -t fifo -u
  ├─sshd.service
  │ └─1436 /usr/sbin/sshd -D

[...]</pre></div></div></div><p>
    See <span class="intraxref">Book “<em class="citetitle ">System Analysis and Tuning Guide</em>”, Chapter 9 “Kernel Control Groups”</span> for more information about
    cgroups.
   </p></div><div class="sect2 " id="sec.boot.systemd.advanced.kill"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.advanced.kill"><span class="number">14.6.7 </span><span class="name">Terminating Services (Sending Signals)</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.advanced.kill">#</a></h3></div></div></div><p>
    As explained in <a class="xref" href="#sec.boot.systemd.advanced.cgroups" title="14.6.6. Kernel Control Groups (cgroups)">Section 14.6.6, “Kernel Control Groups (cgroups)”</a>, it is
    not always possible to assign a process to its parent service process in a
    System V init system. This makes it difficult to terminate a service and
    all of its children. Child processes that have not been terminated will
    remain as zombie processes.
   </p><p>
    systemd's concept of confining each service into a cgroup makes it possible
    to clearly identify all child processes of a service and therefore allows
    you to send a signal to each of these processes. Use <code class="command">systemctl
    kill</code> to send signals to services. For a list of available signals
    refer to <code class="command">man 7 signals</code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750070608"><span class="term ">Sending <code class="systemitem">SIGTERM</code> to a Service</span></dt><dd><p>
       <code class="systemitem">SIGTERM</code> is the default signal that is sent.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl kill <em class="replaceable ">MY_SERVICE</em></pre></div></dd><dt id="idm139698750066576"><span class="term ">Sending <em class="replaceable ">SIGNAL</em> to a Service</span></dt><dd><p>
       Use the <code class="option">-s</code> option to specify the signal that should be
       sent.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl kill -s <em class="replaceable ">SIGNAL</em> <em class="replaceable ">MY_SERVICE</em></pre></div></dd><dt id="idm139698750062080"><span class="term ">Selecting Processes</span></dt><dd><p>
       By default the <code class="command">kill</code> command sends the signal to
       <code class="option">all</code> processes of the specified cgroup. You can restrict
       it to the <code class="option">control</code> or the <code class="option">main</code> process.
       The latter is for example useful to force a service to reload its
       configuration by sending <code class="systemitem">SIGHUP</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl kill -s SIGHUP --kill-who=main <em class="replaceable ">MY_SERVICE</em></pre></div></dd></dl></div><div id="idm139698750056384" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Terminating or Restarting the D-Bus Service is Not Supported</h6><p>
     The D-Bus service is the message bus for communication between systemd
     clients and the systemd manager that is running as pid 1. Even though
     <code class="systemitem">dbus</code> is a stand-alone daemon, it
     is an integral part of the init infrastructure.
    </p><p>
     Terminating <code class="systemitem">dbus</code> or
     restarting it in the running system is similar to an attempt to terminate
     or restart pid 1. It will break systemd client/server communication and
     make most systemd functions unusable.
    </p><p>
     Therefore, terminating or restarting
     <code class="systemitem">dbus</code> is neither recommended
     nor supported.
    </p></div></div><div class="sect2 " id="sec.boot.systemd.basics.services_debugging"><div class="titlepage"><div><div><h3 class="title" id="sec.boot.systemd.basics.services_debugging"><span class="number">14.6.8 </span><span class="name">Debugging Services</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.basics.services_debugging">#</a></h3></div></div></div><p>
    By default, systemd is not overly verbose. If a service was started
    successfully, no output will be produced. In case of a failure, a short
    error message will be displayed. However, <code class="command">systemctl
    status</code> provides means to debug start-up and operation of a
    service.
   </p><p>
    systemd comes with its own logging mechanism (<span class="quote">“<span class="quote">The Journal</span>”</span>)
    that logs system messages. This allows you to display the service messages
    together with status messages. The <code class="command">status</code> command works
    similar to <code class="command">tail</code> and can also display the log messages in
    different formats, making it a powerful debugging tool.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750046624"><span class="term ">Show Service Start-Up Failure</span></dt><dd><p>
       Whenever a service fails to start, use <code class="command">systemctl status
       <em class="replaceable ">MY_SERVICE</em></code> to get a detailed error
       message:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl start apache2
Job failed. See system journal and 'systemctl status' for details.
<code class="prompt root">root # </code>systemctl status apache2
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: failed (Result: exit-code) since Mon, 04 Jun 2012 16:52:26 +0200; 29s ago
   Process: 3088 ExecStart=/usr/sbin/start_apache2 -D SYSTEMD -k start (code=exited, status=1/FAILURE)
   CGroup: name=systemd:/system/apache2.service

Jun 04 16:52:26 g144 start_apache2[3088]: httpd2-prefork: Syntax error on line
205 of /etc/apache2/httpd.conf: Syntax error on li...alHost&gt;</pre></div></dd><dt id="idm139698750041744"><span class="term ">Show Last <em class="replaceable ">N</em> Service Messages</span></dt><dd><p>
       The default behavior of the <code class="command">status</code> subcommand is to
       display the last ten messages a service issued. To change the number of
       messages to show, use the
       <code class="option">--lines=<em class="replaceable ">N</em></code> parameter:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl status chronyd
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl --lines=20 status chronyd</pre></div></dd><dt id="idm139698750036384"><span class="term ">Show Service Messages in Append Mode</span></dt><dd><p>
       To display a <span class="quote">“<span class="quote">live stream</span>”</span> of service messages, use the
       <code class="option">--follow</code> option, which works like
       <code class="command">tail</code> <code class="option">-f</code>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl --follow status chronyd</pre></div></dd><dt id="idm139698750031712"><span class="term ">Messages Output Format</span></dt><dd><p>
       The <code class="option">--output=<em class="replaceable ">MODE</em></code> parameter
       allows you to change the output format of service messages. The most
       important modes available are:
      </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750029104"><span class="term "><code class="option">short</code>
        </span></dt><dd><p>
          The default format. Shows the log messages with a human readable time
          stamp.
         </p></dd><dt id="idm139698750026928"><span class="term "><code class="option">verbose</code>
        </span></dt><dd><p>
          Full output with all fields.
         </p></dd><dt id="idm139698750024816"><span class="term "><code class="option">cat</code>
        </span></dt><dd><p>
          Terse output without time stamps.
         </p></dd></dl></div></dd></dl></div></div></div><div class="sect1 " id="sec.boot.systemd.info"><div class="titlepage"><div><div><h2 class="title" id="sec.boot.systemd.info"><span class="number">14.7 </span><span class="name">More Information</span> <a title="Permalink" class="permalink" href="#sec.boot.systemd.info">#</a></h2></div></div></div><p>
   For more information on systemd refer to the following online resources:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698750019840"><span class="term ">Homepage</span></dt><dd><p>
      <a class="link" href="http://www.freedesktop.org/wiki/Software/systemd" target="_blank">http://www.freedesktop.org/wiki/Software/systemd</a>
     </p></dd><dt id="idm139698750017456"><span class="term ">systemd for Administrators</span></dt><dd><p>
      Lennart Pöttering, one of the systemd authors, has written a series of
      blog entries (13 at the time of writing this chapter). Find them at
      <a class="link" href="http://0pointer.de/blog/projects" target="_blank">http://0pointer.de/blog/projects</a>.
     </p></dd></dl></div></div></div></div><div class="part" id="part.system"><div class="titlepage"><div><div><h1 class="title"><span class="number">Part III </span><span class="name">System </span><a title="Permalink" class="permalink" href="#part.system">#</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.64bit"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span></a></span></dt><dd class="toc-abstract"><p>SUSE® Linux Enterprise Desktop is available for 64-bit platforms. This does not necessarily mean that all the applications included have already been ported to 64-bit platforms. SUSE Linux Enterprise Desktop supports the use of 32-bit applications in a 64-bit system environment. This chapter offers …</p></dd><dt><span class="chapter"><a href="#cha.journalctl"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span></a></span></dt><dd class="toc-abstract"><p>
  When <code class="systemitem">systemd</code> replaced traditional init scripts in <span class="phrase">SUSE Linux Enterprise 12</span>
  (see <a class="xref" href="#cha.systemd" title="Chapter 14. The systemd Daemon">Chapter 14, <em>The <code class="systemitem">systemd</code> Daemon</em></a>), it introduced its own logging system
  called <span class="emphasis"><em>journal</em></span>. There is no need to run a
  <code class="systemitem">syslog</code> based service anymore, as all system events
  are written in the journal.
 </p></dd><dt><span class="chapter"><a href="#cha.update-alternative"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span></a></span></dt><dd class="toc-abstract"><p>
    Often, there are several versions of the same tool installed on a
    system.
    To give administrators a choice and to make it possible to install and
    use different versions side by side, the alternatives system allows
    managing such versions consistently.
   </p></dd><dt><span class="chapter"><a href="#cha.network"><span class="number">18 </span><span class="name">Basic Networking</span></a></span></dt><dd class="toc-abstract"><p>
    Linux offers the necessary networking tools and features for integration
    into all types of network structures. Network access using a network card
    can be configured with YaST. Manual configuration is also possible. In
    this chapter only the fundamental mechanisms and the relevant network
    configuration files are covered.
   </p></dd><dt><span class="chapter"><a href="#cha.print"><span class="number">19 </span><span class="name">Printer Operation</span></a></span></dt><dd class="toc-abstract"><p>SUSE® Linux Enterprise Desktop supports printing with many types of printers, including remote network printers. Printers can be configured manually or with YaST. For configuration instructions, refer to Book “Deployment Guide”, Chapter 10 “Setting Up Hardware Components with YaST”, Section 10.3 “Se…</p></dd><dt><span class="chapter"><a href="#cha.x11"><span class="number">20 </span><span class="name">The X Window System</span></a></span></dt><dd class="toc-abstract"><p>The X Window System (X11) is the de facto standard for graphical user interfaces in Unix. X is network-based, enabling applications started on one host to be displayed on another host connected over any kind of network (LAN or Internet). This chapter provides basic information on the X configuration…</p></dd><dt><span class="chapter"><a href="#cha.fuse"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span></a></span></dt><dd class="toc-abstract"><p>
    FUSE is the acronym for <span class="emphasis"><em>file system in user space</em></span>.
    This means you can configure and mount a file system as an unprivileged
    user. Normally, you need to be
    <code class="systemitem">root</code> for this task. FUSE alone is
    a kernel module. Combined with plug-ins, it allows you to extend FUSE to
    access almost all file systems like remote SSH connections, ISO images, and
    more.
   </p></dd><dt><span class="chapter"><a href="#cha.mod"><span class="number">22 </span><span class="name">Managing Kernel Modules</span></a></span></dt><dd class="toc-abstract"><p>Although Linux is a monolithic kernel, it can be extended using kernel modules. These are special objects that can be inserted into the kernel and removed on demand. In practical terms, kernel modules make it possible to add and remove drivers and interfaces that are not included in the kernel itsel…</p></dd><dt><span class="chapter"><a href="#cha.udev"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span></a></span></dt><dd class="toc-abstract"><p>The kernel can add or remove almost any device in a running system. Changes in the device state (whether a device is plugged in or removed) need to be propagated to user space. Devices need to be configured when they are plugged in and recognized. Users of a certain device need to be informed about …</p></dd><dt><span class="chapter"><a href="#cha.kgraft"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span></a></span></dt><dd class="toc-abstract"><p>
    This document describes the basic principles of the kGraft live patching
    technology and provides usage guidelines for the SLE Live Patching service.
   </p></dd><dt><span class="chapter"><a href="#cha.suse"><span class="number">25 </span><span class="name">Special System Features</span></a></span></dt><dd class="toc-abstract"><p>
    This chapter starts with information about various software packages, the
    virtual consoles and the keyboard layout. We talk about software components
    like <code class="systemitem">bash</code>,
    <code class="systemitem">cron</code> and
    <code class="systemitem">logrotate</code>, because they were
    changed or enhanced during the last release cycles. Even if they are small
    or considered of minor importance, users should change their default
    behavior, because these components are often closely coupled with the
    system. The chapter concludes with a section about language and
    country-specific settings (I18N and L10N).
   </p></dd><dt><span class="chapter"><a href="#cha.nm"><span class="number">26 </span><span class="name">Using NetworkManager</span></a></span></dt><dd class="toc-abstract"><p>NetworkManager is the ideal solution for laptops and other portable computers. It supports state-of-the-art encryption types and standards for network connections, including connections to 802.1X protected networks. 802.1X is the “IEEE Standard for Local and Metropolitan Area Networks—Port-Based Net…</p></dd><dt><span class="chapter"><a href="#cha.power-mgmt"><span class="number">27 </span><span class="name">Power Management</span></a></span></dt><dd class="toc-abstract"><p>Power management is especially important on laptop computers, but is also useful on other systems. ACPI (Advanced Configuration and Power Interface) is available on all modern computers (laptops, desktops, and servers). Power management technologies require suitable hardware and BIOS routines. Most …</p></dd></dl></div><div class="chapter " id="cha.64bit"><div class="titlepage"><div><div><h2 class="title"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span> <a title="Permalink" class="permalink" href="#cha.64bit">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>64bit_issues.xml</li><li><span class="ds-label">ID: </span>cha.64bit</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.64bit.runt"><span class="number">15.1 </span><span class="name">Runtime Support</span></a></span></dt><dt><span class="sect1"><a href="#sec.64bit.devel"><span class="number">15.2 </span><span class="name">Software Development</span></a></span></dt><dt><span class="sect1"><a href="#sec.64bit.biarch"><span class="number">15.3 </span><span class="name">Software Compilation on Biarch Platforms</span></a></span></dt><dt><span class="sect1"><a href="#sec.64bit.kernel"><span class="number">15.4 </span><span class="name">Kernel Specifications</span></a></span></dt></dl></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> is available for  64-bit
  platforms. This does not necessarily mean that all the applications included
  have already been ported to 64-bit platforms. <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> supports the use
  of 32-bit applications in a 64-bit system environment. This chapter offers a
  brief overview of how this support is implemented on 64-bit <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>
  platforms. It explains how 32-bit applications are executed and how 32-bit applications should be compiled to enable them to run both in
  32-bit and 64-bit system environments. Additionally, find information about
  the kernel API and an explanation of how 32-bit applications can run under a
  64-bit kernel.
 </p><p>
  <span class="phrase"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> for the
  64-bit platforms amd64 and Intel 64</span> is designed so that existing
  32-bit applications run in the 64-bit environment
  <span class="quote">“<span class="quote">out-of-the-box.</span>”</span>  This
  support means that you can continue to use your preferred 32-bit applications
  without waiting for a corresponding 64-bit port to become
  available.
 </p><div class="sect1 " id="sec.64bit.runt"><div class="titlepage"><div><div><h2 class="title" id="sec.64bit.runt"><span class="number">15.1 </span><span class="name">Runtime Support</span> <a title="Permalink" class="permalink" href="#sec.64bit.runt">#</a></h2></div></div></div><div id="idm139698750000544" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Conflicts Between Application Versions</h6><p>
    If an application is available both for 32-bit and 64-bit environments,
    parallel installation of both versions is bound to lead to problems. In
    such cases, decide on one of the two versions and install and use this.
   </p><p>
    An exception to this rule is PAM (pluggable authentication modules).
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> uses PAM in the authentication process as a layer that
    mediates between user and application. On a 64-bit operating system that
    also runs 32-bit applications it is necessary to always install both
    versions of a PAM module.
   </p></div><p>
   To be executed correctly, every application requires a range of libraries.
   Unfortunately, the names for the 32-bit and 64-bit versions of these
   libraries are identical. They must be differentiated from each other in
   another way.
  </p><p>
   To retain compatibility with the 32-bit version, the libraries are stored at
   the same place in the system as in the 32-bit environment. The 32-bit
   version of <code class="filename">libc.so.6</code> is located under
   <code class="filename">/lib/libc.so.6</code> in both the 32-bit and 64-bit
   environments.
  </p><p>
   All 64-bit libraries and object files are located in directories called
   <code class="filename">lib64</code>. The 64-bit object files that you would normally
   expect to find under <code class="filename">/lib</code> and
   <code class="filename">/usr/lib</code> are now found under
   <code class="filename">/lib64</code> and <code class="filename">/usr/lib64</code>. This means
   that there is space for the 32-bit libraries under <code class="filename">/lib</code>
   and <code class="filename">/usr/lib</code>, so the file name for both versions can
   remain unchanged.
  </p><p>
   Subdirectories of 32-bit <code class="filename">/lib</code> directories which contain
   data content that does not depend on the word size are not moved. This
   scheme conforms to LSB (Linux Standards Base) and FHS (File System Hierarchy
   Standard).
  </p></div><div class="sect1 " id="sec.64bit.devel"><div class="titlepage"><div><div><h2 class="title" id="sec.64bit.devel"><span class="number">15.2 </span><span class="name">Software Development</span> <a title="Permalink" class="permalink" href="#sec.64bit.devel">#</a></h2></div></div></div><p>
   Both 32-bit and 64-bit objects can be generated with a biarch development
   toolchain. A biarch development toolchain allows generation of 32-bit and
   64-bit objects. The compilation of 64-bit objects is the default on almost
   all platforms. 32-bit objects can be generated if special flags are used.
   This special flag is <code class="option">-m32</code> for GCC. The flags for the
   binutils are architecture-dependent, but GCC transfers the correct flags to
   linkers and assemblers. A biarch development toolchain currently exists for
   amd64 (supports development for x86 and amd64 instructions), for z Systems
   and for POWER. 32-bit objects are normally created on the POWER
   platform. The <code class="literal">-m64</code> flag must be used to generate 64-bit
   objects.
  </p><p>
   A biarch development toolchain allows generation of 32-bit and 64-bit
   objects. The default is to compile 64-bit objects. It is possible to
   generate 32-bit objects by using special flags. For GCC, this special flag
   is <code class="option">-m32</code>.
  </p><p>
   All header files must be written in an architecture-independent form. The
   installed 32-bit and 64-bit libraries must have an API (application
   programming interface) that matches the installed header files. The normal
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> environment is designed according to this principle. In the
   case of manually updated libraries, resolve these issues yourself.
  </p></div><div class="sect1 " id="sec.64bit.biarch"><div class="titlepage"><div><div><h2 class="title" id="sec.64bit.biarch"><span class="number">15.3 </span><span class="name">Software Compilation on Biarch Platforms</span> <a title="Permalink" class="permalink" href="#sec.64bit.biarch">#</a></h2></div></div></div><p>
   To develop binaries for the other architecture on a biarch architecture, the
   respective libraries for the second architecture must additionally be
   installed. These packages are called
   <code class="systemitem">rpmname-32bit</code>. You also need the respective
   headers and libraries from the
   <code class="systemitem">rpmname-devel</code> packages and the
   development libraries for the second architecture from
   <code class="systemitem">rpmname-devel-32bit</code>.
  </p><p>
   Most open source programs use an <code class="command">autoconf</code>-based program
   configuration. To use <code class="command">autoconf</code> for configuring a program
   for the second architecture, overwrite the normal compiler and linker
   settings of <code class="command">autoconf</code> by running the
   <code class="command">configure</code> script with additional environment variables.
  </p><p>
   The following example refers to an x86_64 system with x86 as the second
   architecture. 
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Use the 32-bit compiler:
    </p><div class="verbatim-wrap"><pre class="screen">CC="gcc -m32"</pre></div></li><li class="step "><p>
     Instruct the linker to process 32-bit objects (always use
     <code class="command">gcc</code> as the linker front-end):
    </p><div class="verbatim-wrap"><pre class="screen">LD="gcc -m32"</pre></div></li><li class="step "><p>
     Set the assembler to generate 32-bit objects:
    </p><div class="verbatim-wrap"><pre class="screen">AS="gcc -c -m32"</pre></div></li><li class="step "><p>
     Specify linker flags, such as the location of 32-bit libraries, for
     example:
    </p><div class="verbatim-wrap"><pre class="screen">LDFLAGS="-L/usr/lib"</pre></div></li><li class="step "><p>
     Specify the location for the 32-bit object code libraries:
    </p><div class="verbatim-wrap"><pre class="screen">--libdir=/usr/lib</pre></div></li><li class="step "><p>
     Specify the location for the 32-bit X libraries:
    </p><div class="verbatim-wrap"><pre class="screen">--x-libraries=/usr/lib</pre></div></li></ol></div></div><p>
   Not all of these variables are needed for every program. Adapt them to the
   respective program.
  </p><p>
   An example <code class="command">configure</code> call to compile a native 32-bit
   application on x86_64 could
   appear as follows:
  </p><div class="verbatim-wrap"><pre class="screen">CC="gcc -m32"
LDFLAGS="-L/usr/lib;"
./configure --prefix=/usr --libdir=/usr/lib --x-libraries=/usr/lib
make
make install</pre></div></div><div class="sect1 " id="sec.64bit.kernel"><div class="titlepage"><div><div><h2 class="title" id="sec.64bit.kernel"><span class="number">15.4 </span><span class="name">Kernel Specifications</span> <a title="Permalink" class="permalink" href="#sec.64bit.kernel">#</a></h2></div></div></div><p>
   The 64-bit kernels for AMD64/Intel 64 offer both a 64-bit and a 32-bit kernel ABI (application
   binary interface). The latter is identical with the ABI for the
   corresponding 32-bit kernel. This means that the 32-bit application can
   communicate with the 64-bit kernel in the same way as with the 32-bit
   kernel.
  </p><p>
   The 32-bit emulation of system calls for a 64-bit kernel does not support
   all the APIs used by system programs. This depends on the platform. For this
   reason, few applications, like <code class="command">lspci</code>, must be
   compiled.
  </p><p>
   A 64-bit kernel can only load 64-bit kernel modules that have been specially
   compiled for this kernel. It is not possible to use 32-bit kernel modules.
  </p><div id="idm139698749960624" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Kernel-loadable Modules</h6><p>
    Some applications require separate kernel-loadable modules. If you intend
    to use such a 32-bit application in a 64-bit system environment, contact
    the provider of this application and SUSE to make sure that the 64-bit
    version of the kernel-loadable module and the 32-bit compiled version of
    the kernel API are available for this module.
   </p></div></div></div><div class="chapter " id="cha.journalctl"><div class="titlepage"><div><div><h2 class="title"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span> <a title="Permalink" class="permalink" href="#cha.journalctl">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>journalctl.xml</li><li><span class="ds-label">ID: </span>cha.journalctl</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.journalctl.persistent"><span class="number">16.1 </span><span class="name">Making the Journal Persistent</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.switches"><span class="number">16.2 </span><span class="name"><code class="command">journalctl</code> Useful Switches</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.filter"><span class="number">16.3 </span><span class="name">Filtering the Journal Output</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.investigate"><span class="number">16.4 </span><span class="name">Investigating <code class="systemitem">systemd</code> Errors</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.config"><span class="number">16.5 </span><span class="name">Journald Configuration</span></a></span></dt><dt><span class="sect1"><a href="#sec.journalctl.yast"><span class="number">16.6 </span><span class="name">Using YaST to Filter the <code class="systemitem">systemd</code> Journal</span></a></span></dt></dl></div></div><p>
  When <code class="systemitem">systemd</code> replaced traditional init scripts in <span class="phrase">SUSE Linux Enterprise 12</span>
  (see <a class="xref" href="#cha.systemd" title="Chapter 14. The systemd Daemon">Chapter 14, <em>The <code class="systemitem">systemd</code> Daemon</em></a>), it introduced its own logging system
  called <span class="emphasis"><em>journal</em></span>. There is no need to run a
  <code class="systemitem">syslog</code> based service anymore, as all system events
  are written in the journal.
 </p><p>
  The journal itself is a system service managed by <code class="systemitem">systemd</code>. Its full name is
  <code class="literal">systemd-journald.service</code>. It collects and stores logging
  data by maintaining structured indexed journals based on logging information
  received from the kernel, user processes, standard input, and system service errors. The <code class="literal">systemd-journald</code> service is on
  by default:
 </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl status systemd-journald
systemd-journald.service - Journal Service
   Loaded: loaded (/usr/lib/systemd/system/systemd-journald.service; static)
   Active: active (running) since Mon 2014-05-26 08:36:59 EDT; 3 days ago
     Docs: man:systemd-journald.service(8)
           man:journald.conf(5)
 Main PID: 413 (systemd-journal)
   Status: "Processing requests..."
   CGroup: /system.slice/systemd-journald.service
           └─413 /usr/lib/systemd/systemd-journald
[...]</pre></div><div class="sect1 " id="sec.journalctl.persistent"><div class="titlepage"><div><div><h2 class="title" id="sec.journalctl.persistent"><span class="number">16.1 </span><span class="name">Making the Journal Persistent</span> <a title="Permalink" class="permalink" href="#sec.journalctl.persistent">#</a></h2></div></div></div><p>
   The journal stores log data in <code class="filename">/run/log/journal/</code> by
   default. Because the <code class="filename">/run/</code> directory is volatile by
   nature, log data is lost at reboot. To make the log data persistent, the
   directory <code class="filename">/var/log/journal/</code> with correct ownership and
   permissions must exist, where the systemd-journald service can store its
   data. <code class="systemitem">systemd</code> will create the directory for you—and switch to
   persistent logging—if you do the following:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     As <code class="systemitem">root</code>, open <code class="filename">/etc/systemd/journald.conf</code> for
     editing.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>vi /etc/systemd/journald.conf</pre></div></li><li class="step "><p>
     Uncomment the line containing <code class="literal">Storage=</code> and change it to
    </p><div class="verbatim-wrap"><pre class="screen">[...]
[Journal]
Storage=persistent
#Compress=yes
[...]</pre></div></li><li class="step "><p>
     Save the file and restart systemd-journald:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl restart systemd-journald</pre></div></li></ol></div></div></div><div class="sect1 " id="sec.journalctl.switches"><div class="titlepage"><div><div><h2 class="title" id="sec.journalctl.switches"><span class="number">16.2 </span><span class="name"><code class="command">journalctl</code> Useful Switches</span> <a title="Permalink" class="permalink" href="#sec.journalctl.switches">#</a></h2></div></div></div><p>
   This section introduces several common useful options to enhance the default
   <code class="command">journalctl</code> behavior. All switches are described in the
   <code class="command">journalctl</code> manual page, <code class="command">man 1
   journalctl</code>.
  </p><div id="idm139698749931344" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Messages Related to a Specific Executable</h6><p>
    To show all journal messages related to a specific executable, specify the
    full path to the executable:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl /usr/lib/systemd/systemd</pre></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698749928544"><span class="term ">-f</span></dt><dd><p>
      Shows only the most recent journal messages, and prints new log entries
      as they are added to the journal.
     </p></dd><dt id="idm139698749926640"><span class="term ">-e</span></dt><dd><p>
      Prints the messages and jumps to the end of the journal, so that the
      latest entries are visible within the pager.
     </p></dd><dt id="idm139698749924736"><span class="term ">-r</span></dt><dd><p>
      Prints the messages of the journal in reverse order, so that the latest
      entries are listed first.
     </p></dd><dt id="idm139698749922848"><span class="term ">-k</span></dt><dd><p>
      Shows only kernel messages. This is equivalent to the field match
      <code class="literal">_TRANSPORT=kernel</code> (see
      <a class="xref" href="#sec.journalctl.filter.fields" title="16.3.3. Filtering Based on Fields">Section 16.3.3, “Filtering Based on Fields”</a>).
     </p></dd><dt id="idm139698749919968"><span class="term ">-u</span></dt><dd><p>
      Shows only messages for the specified <code class="systemitem">systemd</code> unit. This is equivalent
      to the field match
      <code class="literal">_SYSTEMD_UNIT=<em class="replaceable ">UNIT</em></code> (see
      <a class="xref" href="#sec.journalctl.filter.fields" title="16.3.3. Filtering Based on Fields">Section 16.3.3, “Filtering Based on Fields”</a>).
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl -u apache2
[...]
Jun 03 10:07:11 pinkiepie systemd[1]: Starting The Apache Webserver...
Jun 03 10:07:12 pinkiepie systemd[1]: Started The Apache Webserver.</pre></div></dd></dl></div></div><div class="sect1 " id="sec.journalctl.filter"><div class="titlepage"><div><div><h2 class="title" id="sec.journalctl.filter"><span class="number">16.3 </span><span class="name">Filtering the Journal Output</span> <a title="Permalink" class="permalink" href="#sec.journalctl.filter">#</a></h2></div></div></div><p>
   When called without switches, <code class="command">journalctl</code> shows the full
   content of the journal, the oldest entries listed first. The output can be
   filtered by specific switches and fields.
  </p><div class="sect2 " id="sec.journalctl.filter.boot"><div class="titlepage"><div><div><h3 class="title" id="sec.journalctl.filter.boot"><span class="number">16.3.1 </span><span class="name">Filtering Based on a Boot Number</span> <a title="Permalink" class="permalink" href="#sec.journalctl.filter.boot">#</a></h3></div></div></div><p>
    <code class="command">journalctl</code> can filter messages based on a specific
    system boot. To list all available boots, run
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl --list-boots
-1 097ed2cd99124a2391d2cffab1b566f0 Mon 2014-05-26 08:36:56 EDT—Fri 2014-05-30 05:33:44 EDT
 0 156019a44a774a0bb0148a92df4af81b Fri 2014-05-30 05:34:09 EDT—Fri 2014-05-30 06:15:01 EDT</pre></div><p>
    The first column lists the boot offset: <code class="literal">0</code> for the
    current boot, <code class="literal">-1</code> for the previous one,
    <code class="literal">-2</code> for the one prior to that, etc. The second column
    contains the boot ID followed by the limiting time stamps of the specific
    boot.
   </p><p>
    Show all messages from the current boot:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl -b</pre></div><p>
    If you need to see journal messages from the previous boot, add an offset
    parameter. The following example outputs the previous boot messages:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl -b -1</pre></div><p>
    Another way is to list boot messages based on the boot ID. For this
    purpose, use the _BOOT_ID field:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _BOOT_ID=156019a44a774a0bb0148a92df4af81b</pre></div></div><div class="sect2 " id="sec.journalctl.filter.time"><div class="titlepage"><div><div><h3 class="title" id="sec.journalctl.filter.time"><span class="number">16.3.2 </span><span class="name">Filtering Based on Time Interval</span> <a title="Permalink" class="permalink" href="#sec.journalctl.filter.time">#</a></h3></div></div></div><p>
    You can filter the output of <code class="command">journalctl</code> by specifying
    the starting and/or ending date. The date specification should be of the
    format "2014-06-30 9:17:16". If the time part is omitted, midnight is
    assumed. If seconds are omitted, ":00" is assumed. If the date part is
    omitted, the current day is assumed. Instead of numeric expression, you can
    specify the keywords "yesterday", "today", or "tomorrow". They refer to
    midnight of the day before the current day, of the current day, or of the
    day after the current day. If you specify "now", it refers to the current
    time. You can also specify relative times prefixed with
    <code class="literal">-</code> or <code class="literal">+</code>, referring to times before or
    after the current time.
   </p><p>
    Show only new messages since now, and update the output continuously:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl --since "now" -f</pre></div><p>
    Show all messages since last midnight till 3:20am:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl --since "today" --until "3:20"</pre></div></div><div class="sect2 " id="sec.journalctl.filter.fields"><div class="titlepage"><div><div><h3 class="title" id="sec.journalctl.filter.fields"><span class="number">16.3.3 </span><span class="name">Filtering Based on Fields</span> <a title="Permalink" class="permalink" href="#sec.journalctl.filter.fields">#</a></h3></div></div></div><p>
    You can filter the output of the journal by specific fields. The syntax of
    a field to be matched is <code class="literal">FIELD_NAME=MATCHED_VALUE</code>, such
    as <code class="literal">_SYSTEMD_UNIT=httpd.service</code>. You can specify multiple
    matches in a single query to filter the output messages even more. See
    <code class="command">man 7 systemd.journal-fields</code> for a list of default
    fields.
   </p><p>
    Show messages produced by a specific process ID:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _PID=1039</pre></div><p>
    Show messages belonging to a specific user ID:
   </p><div class="verbatim-wrap"><pre class="screen"># journalctl _UID=1000</pre></div><p>
    Show messages from the kernel ring buffer (the same as
    <code class="command">dmesg</code> produces):
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _TRANSPORT=kernel</pre></div><p>
    Show messages from the service's standard or error output:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _TRANSPORT=stdout</pre></div><p>
    Show messages produced by a specified service only:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service</pre></div><p>
    If two different fields are specified, only entries that match both
    expressions at the same time are shown:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=1488</pre></div><p>
    If two matches refer to the same field, all entries matching either
    expression are shown:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service _SYSTEMD_UNIT=dbus.service</pre></div><p>
    You can use the '+' separator to combine two expressions in a logical 'OR'.
    The following example shows all messages from the Avahi service process
    with the process ID 1480 together with all messages from the D-Bus service:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=1480 + _SYSTEMD_UNIT=dbus.service</pre></div></div></div><div class="sect1 " id="sec.journalctl.investigate"><div class="titlepage"><div><div><h2 class="title" id="sec.journalctl.investigate"><span class="number">16.4 </span><span class="name">Investigating <code class="systemitem">systemd</code> Errors</span> <a title="Permalink" class="permalink" href="#sec.journalctl.investigate">#</a></h2></div></div></div><p>
   This section introduces a simple example to illustrate how to find and fix
   the error reported by <code class="systemitem">systemd</code> during <code class="command">apache2</code> start-up.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Try to start the apache2 service:
    </p><div class="verbatim-wrap"><pre class="screen"># systemctl start apache2
Job for apache2.service failed. See 'systemctl status apache2' and 'journalctl -xn' for details.</pre></div></li><li class="step "><p>
     Let us see what the service's status says:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl status apache2
apache2.service - The Apache Webserver
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: failed (Result: exit-code) since Tue 2014-06-03 11:08:13 CEST; 7min ago
  Process: 11026 ExecStop=/usr/sbin/start_apache2 -D SYSTEMD -DFOREGROUND \
           -k graceful-stop (code=exited, status=1/FAILURE)</pre></div><p>
     The ID of the process causing the failure is 11026.
    </p></li><li class="step "><p>
     Show the verbose version of messages related to process ID 11026:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> journalctl -o verbose _PID=11026
[...]
MESSAGE=AH00526: Syntax error on line 6 of /etc/apache2/default-server.conf:
[...]
MESSAGE=Invalid command 'DocumenttRoot', perhaps misspelled or defined by a module
[...]</pre></div></li><li class="step "><p>
     Fix the typo inside <code class="filename">/etc/apache2/default-server.conf</code>,
     start the apache2 service, and print its status:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl start apache2 &amp;&amp; systemctl status apache2
apache2.service - The Apache Webserver
   Loaded: loaded (/usr/lib/systemd/system/apache2.service; disabled)
   Active: active (running) since Tue 2014-06-03 11:26:24 CEST; 4ms ago
  Process: 11026 ExecStop=/usr/sbin/start_apache2 -D SYSTEMD -DFOREGROUND
           -k graceful-stop (code=exited, status=1/FAILURE)
 Main PID: 11263 (httpd2-prefork)
   Status: "Processing requests..."
   CGroup: /system.slice/apache2.service
           ├─11263 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11280 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11281 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11282 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           ├─11283 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]
           └─11285 /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -D [...]</pre></div></li></ol></div></div></div><div class="sect1 " id="sec.journalctl.config"><div class="titlepage"><div><div><h2 class="title" id="sec.journalctl.config"><span class="number">16.5 </span><span class="name">Journald Configuration</span> <a title="Permalink" class="permalink" href="#sec.journalctl.config">#</a></h2></div></div></div><p>
   The behavior of the systemd-journald service can be adjusted by modifying
   <code class="filename">/etc/systemd/journald.conf</code>. This section introduces
   only basic option settings. For a complete file description, see
   <code class="command">man 5 journald.conf</code>. Note that you need to restart the
   journal for the changes to take effect with
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart systemd-journald</pre></div><div class="sect2 " id="sec.journalctl.config.systemmaxuse"><div class="titlepage"><div><div><h3 class="title" id="sec.journalctl.config.systemmaxuse"><span class="number">16.5.1 </span><span class="name">Changing the Journal Size Limit</span> <a title="Permalink" class="permalink" href="#sec.journalctl.config.systemmaxuse">#</a></h3></div></div></div><p>
    If the journal log data is saved to a persistent location (see
    <a class="xref" href="#sec.journalctl.persistent" title="16.1. Making the Journal Persistent">Section 16.1, “Making the Journal Persistent”</a>), it uses up to 10% of the file
    system the <code class="filename">/var/log/journal</code> resides on. For example,
    if <code class="filename">/var/log/journal</code> is located on a 30 GB
    <code class="filename">/var</code> partition, the journal may use up to 3 GB of the
    disk space. To change this limit, change (and uncomment) the
    <code class="option">SystemMaxUse</code> option:
   </p><div class="verbatim-wrap"><pre class="screen">SystemMaxUse=50M</pre></div></div><div class="sect2 " id="sec.journalctl.config.ttypath"><div class="titlepage"><div><div><h3 class="title" id="sec.journalctl.config.ttypath"><span class="number">16.5.2 </span><span class="name">Forwarding the Journal to <code class="filename">/dev/ttyX</code></span> <a title="Permalink" class="permalink" href="#sec.journalctl.config.ttypath">#</a></h3></div></div></div><p>
    You can forward the journal to a terminal device to inform you about system
    messages on a preferred terminal screen, for example
    <code class="literal">/dev/tty12</code>. Change the following journald options to
   </p><div class="verbatim-wrap"><pre class="screen">ForwardToConsole=yes
TTYPath=/dev/tty12</pre></div></div><div class="sect2 " id="sec.journalctl.config.forwardtosyslog"><div class="titlepage"><div><div><h3 class="title" id="sec.journalctl.config.forwardtosyslog"><span class="number">16.5.3 </span><span class="name">Forwarding the Journal to Syslog Facility</span> <a title="Permalink" class="permalink" href="#sec.journalctl.config.forwardtosyslog">#</a></h3></div></div></div><p>
    Journald is backward compatible with traditional syslog implementations
    such as <code class="systemitem">rsyslog</code>. Make sure the following is valid:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      rsyslog is installed.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> rpm -q rsyslog
rsyslog-7.4.8-2.16.x86_64</pre></div></li><li class="listitem "><p>
      rsyslog service is enabled.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl is-enabled rsyslog
enabled</pre></div></li><li class="listitem "><p>
      Forwarding to syslog is enabled in
      <code class="filename">/etc/systemd/journald.conf</code>.
     </p><div class="verbatim-wrap"><pre class="screen">ForwardToSyslog=yes</pre></div></li></ul></div></div></div><div class="sect1 " id="sec.journalctl.yast"><div class="titlepage"><div><div><h2 class="title" id="sec.journalctl.yast"><span class="number">16.6 </span><span class="name">Using YaST to Filter the <code class="systemitem">systemd</code> Journal</span> <a title="Permalink" class="permalink" href="#sec.journalctl.yast">#</a></h2></div></div></div><p>
   For an easy way of filtering the systemd journal (without having to deal
   with the journalctl syntax), you can use the YaST journal module. After
   installing it with <code class="command">sudo zypper in yast2-journal</code>, start it
   from YaST by selecting <span class="guimenu">System</span> › <span class="guimenu">Systemd Journal</span>. Alternatively, start it
   from command line by entering <code class="command">sudo yast2 journal</code>.
  </p><div class="figure" id="fig.journalctl.yast"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_journal.png"><img src="images/yast2_journal.png" width="" alt="YaST systemd Journal" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 16.1: </span><span class="name">YaST systemd Journal </span><a title="Permalink" class="permalink" href="#fig.journalctl.yast">#</a></h6></div></div><p>
   The module displays the log entries in a table. The search box on top allows
   you to search for entries that contain certain characters, similar to using
   <code class="command">grep</code>. To filter the entries by date and time, unit, file,
   or priority, click <span class="guimenu">Change filters</span> and set the respective
   options.
  </p></div></div><div class="chapter " id="cha.update-alternative"><div class="titlepage"><div><div><h2 class="title"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span> <a title="Permalink" class="permalink" href="#cha.update-alternative">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>update-alternatives.xml</li><li><span class="ds-label">ID: </span>cha.update-alternative</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698749828288">#</a></h6></div><p>
    Often, there are several versions of the same tool installed on a
    system.
    To give administrators a choice and to make it possible to install and
    use different versions side by side, the alternatives system allows
    managing such versions consistently.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.ua.concept"><span class="number">17.1 </span><span class="name">Conceptual Overview</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.use-cases"><span class="number">17.2 </span><span class="name">Use Cases</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.view"><span class="number">17.3 </span><span class="name">Viewing Alternatives</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.set"><span class="number">17.4 </span><span class="name">Setting the Default Version of Alternatives</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.install"><span class="number">17.5 </span><span class="name">Installing Custom Alternatives</span></a></span></dt><dt><span class="sect1"><a href="#sec.ua.slave"><span class="number">17.6 </span><span class="name">Defining Dependent Alternatives</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.ua.concept"><div class="titlepage"><div><div><h2 class="title" id="sec.ua.concept"><span class="number">17.1 </span><span class="name">Conceptual Overview</span> <a title="Permalink" class="permalink" href="#sec.ua.concept">#</a></h2></div></div></div><p>
    On <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, some programs perform the same or similar tasks. For example,
    if Java 1.7 and Java 1.8 are both installed on the system, the alternatives system script
    (<code class="command">update-alternatives</code>) is called from inside the RPM package.
    By default, the alternatives system will refer to version 1.8: Higher versions also have a
    higher priority. However, the administrator can change the default and
    can point the generic name to version 1.7.
   </p><p>
    The following terminology is used in this chapter:
   </p><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Terminology </span><a title="Permalink" class="permalink" href="#idm139698749822960">#</a></h6></div><dl class="variablelist"><dt id="idm139698749822224"><span class="term ">Administrative directory</span></dt><dd><p>
       The default <code class="filename">/var/lib/rpm/alternatives</code> directory contains information
       about current state of alternatives.
      </p></dd><dt id="idm139698749819616"><span class="term ">Alternative</span></dt><dd><p>
       The name of a specific file in the file system, which can be made
       accessible via a generic name using the alternatives system.
      </p></dd><dt id="idm139698749817696"><span class="term ">Alternatives directory</span></dt><dd><p>
       The default <code class="filename">/etc/alternatives</code>
       directory containing symbolic links.
      </p></dd><dt id="idm139698749815152"><span class="term ">Generic name</span></dt><dd><p>
       A name (for example, <code class="command">/usr/bin/edit</code>) that refers to
       one file out of several available using the alternatives system.
      </p></dd><dt id="idm139698749812816"><span class="term ">Link group</span></dt><dd><p>
       A set of related symbolic links that can be updated as a group.
      </p></dd><dt id="idm139698749810960"><span class="term ">Master link</span></dt><dd><p>
       The link in a link group that determines how the other links in the
       group are configured.
      </p></dd><dt id="idm139698749809072"><span class="term ">Slave link</span></dt><dd><p>
       A link in a link group controlled by the master link.
      </p></dd><dt id="idm139698749807232"><span class="term ">Symbolic link (Symlink)</span></dt><dd><p>
       A file that is a reference to another file in the same file system.
       The alternatives system uses symbolic links in the alternatives directory to switch
       between version of a file.
      </p><p>
       Symbolic links in the alternatives directory can be modified by the
       administrator through the <code class="command">update-alternatives</code>
       command.
      </p></dd></dl></div><p>
    The alternatives system provides the <code class="command">update-alternatives</code> command to
    create, remove, maintain, and show information about symbolic links.
    While these symbolic links usually point to commands, they can also point
    to JAR archives, man pages, and other files.
    Examples in this chapter use commands and man pages, but they are
    applicable to other file types.
   </p><p>
    The alternatives system uses the alternatives directory to collect links to possible
    alternatives. When a new package with an alternative is installed,
    the new alternative is added to the system. Whether the new package's
    alternative is selected as the default, depends on its priority and on the
    mode that is set. Usually, packages
    with a higher version also have a higher priority. The alternatives system can operate
    in two modes:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><span class="formalpara-title">Automatic Mode. </span>
       In this mode, the alternatives system ensures that the links in the group point to
       the highest priority alternatives appropriate for the group.
      </p></li><li class="listitem "><p><span class="formalpara-title">Manual Mode. </span>
       In this mode, the alternatives system does not make any changes to the system
       administrator's settings.
      </p></li></ul></div><p>
    For example, the <code class="command">java</code> command has the following link
    hierarchy in the alternatives system:
   </p><div class="example" id="idm139698749796720"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 17.1: </span><span class="name">Alternatives System of the <code class="command">java</code> Command </span><a title="Permalink" class="permalink" href="#idm139698749796720">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">/usr/bin/java <span id="co.ua.java.name"></span><span class="callout">1</span>
 -&gt; /etc/alternatives/java <span id="co.ua.java.symbolic-link"></span><span class="callout">2</span>
     -&gt; /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java <span id="co.ua.java.alternatives"></span><span class="callout">3</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.java.name"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
       The generic name.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.java.symbolic-link"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
       The symbolic link in the alternatives directory.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.java.alternatives"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
       One of the alternatives.
      </p></td></tr></table></div></div></div></div><div class="sect1 " id="sec.ua.use-cases"><div class="titlepage"><div><div><h2 class="title" id="sec.ua.use-cases"><span class="number">17.2 </span><span class="name">Use Cases</span> <a title="Permalink" class="permalink" href="#sec.ua.use-cases">#</a></h2></div></div></div><p>
    By default, the <code class="command">update-alternatives</code> script is called
    from inside an RPM package. When a package is installed or removed, the
    script takes care of all its symbolic links.
    But you can run it manually from the command line:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Displaying the current alternatives for a generic name.
     </p></li><li class="listitem "><p>
      Changing the defaults of an alternatives.
     </p></li><li class="listitem "><p>
     Creating a set of related files for an alternatives.
     </p></li></ul></div></div><div class="sect1 " id="sec.ua.view"><div class="titlepage"><div><div><h2 class="title" id="sec.ua.view"><span class="number">17.3 </span><span class="name">Viewing Alternatives</span> <a title="Permalink" class="permalink" href="#sec.ua.view">#</a></h2></div></div></div><p>
    The easiest way to check the alternatives is to follow the symbolic links of
    your command.
    For example, if you want to know what the <code class="command">java</code>
    command is referring to, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">readlink</code> --canonicalize /usr/bin/java
/usr/lib64/jvm/jre-1.8.0-openjdk/bin/java</pre></div><p>
    If you see the same path (in our example, it is
    <code class="filename">/usr/bin/java</code>),
    there are no alternatives available for this command.
   </p><p>
    To see the full alternatives (including slaves), use the
    <code class="option">--display</code> option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">update-alternatives</code> --display java
java - auto mode
  link best version is /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java
  link currently points to /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java
  link java is /usr/bin/java
  slave java.1.gz is /usr/share/man/man1/java.1.gz
  slave jre is /usr/lib64/jvm/jre
  slave jre_exports is /usr/lib64/jvm-exports/jre
  slave keytool is /usr/bin/keytool
  slave keytool.1.gz is /usr/share/man/man1/keytool.1.gz
  slave orbd is /usr/bin/orbd
  slave orbd.1.gz is /usr/share/man/man1/orbd.1.gz
[...]</pre></div></div><div class="sect1 " id="sec.ua.set"><div class="titlepage"><div><div><h2 class="title" id="sec.ua.set"><span class="number">17.4 </span><span class="name">Setting the Default Version of Alternatives</span> <a title="Permalink" class="permalink" href="#sec.ua.set">#</a></h2></div></div></div><p>
    By default, commands in <code class="filename">/usr/bin</code> refer to the
    alternatives directory with the highest priority. For example,
    by default, the command <code class="command">java</code> shows the following
    version number:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">java</code> -version
openjdk version "1.8.0_151"
OpenJDK Runtime Environment (IcedTea 3.6.0) (build 1.8.0_151-b12 suse-10.18.2-x86_64)
OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</pre></div><p>
    To change the default <code class="command">java</code> command to refer
    to a previous version, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> update-alternatives --config java
root's password:
There are 2 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                       Priority   Status
------------------------------------------------------------
* 0            /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java   1805      auto mode
  1            /usr/lib64/jvm/jre-1.7.0-openjdk/bin/java   1705      manual mode
  2            /usr/lib64/jvm/jre-1.8.0-openjdk/bin/java   1805      manual mode

Press &lt;enter&gt; to keep the current choice[*], or type selection number:</pre></div><p>
    Depending on your system and installed versions, the exact Java version
    number will be different.
    After you have selected <code class="literal">1</code>, <code class="command">java</code> now
    shows the following version number:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">java</code> -version
java version "1.7.0_141"
OpenJDK Runtime Environment (IcedTea 2.6.10) (suse-42.3.1-x86_64)
OpenJDK 64-Bit Server VM (build 24.141-b02, mixed mode)</pre></div><p>
    Also, keep in mind the following points:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      When working in manual mode and installing another Java
      version, the alternatives system neither touches the links nor changes the
      generic name.
     </p></li><li class="listitem "><p>
      When working in automatic mode and installing another Java version,
      the alternatives system changes the Java master link and all slave links (as you can
      see in <a class="xref" href="#sec.ua.view" title="17.3. Viewing Alternatives">Section 17.3, “Viewing Alternatives”</a>).
      To check the master-slave relationships, use:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>update-alternatives --display java</pre></div></li></ul></div><p>
    You can return to the previous state.
   </p></div><div class="sect1 " id="sec.ua.install"><div class="titlepage"><div><div><h2 class="title" id="sec.ua.install"><span class="number">17.5 </span><span class="name">Installing Custom Alternatives</span> <a title="Permalink" class="permalink" href="#sec.ua.install">#</a></h2></div></div></div><p>
    This section describes how to set up custom alternatives on a system.
    The example makes the following assumptions:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      There are two scripts, <code class="command">foo-2</code> and <code class="command">foo-3</code>,
      with similar functionality.
     </p></li><li class="listitem "><p>
      The scripts are stored in the <code class="filename">/usr/local/bin</code>
      directory to avoid any conflicts with the system tools in
      <code class="filename">/usr/bin</code>.
     </p></li><li class="listitem "><p>
      There is a master link <code class="command">foo</code> that points to either
      <code class="command">foo-2</code> or <code class="command">foo-3</code>.
     </p></li></ul></div><p>
    To provide alternatives on your system, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Copy your scripts into the <code class="filename">/usr/local/bin</code> directory.
     </p></li><li class="step "><p>
      Make the scripts executable:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chmod</code> +x /usr/local/bin/foo-{2,3}</pre></div></li><li class="step "><p>
      Run <code class="command">update-alternatives</code> for both scripts:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">update-alternatives</code> --install \
   /usr/local/bin/foo <span id="co.ua.ua-install.usr-local-bin-foo"></span><span class="callout">1</span>\
   foo <span id="co.ua.ua-install.foo"></span><span class="callout">2</span>\
   /usr/local/bin/foo-2 <span id="co.ua.ua-install.usr-local-bin-foo.path"></span><span class="callout">3</span>\
   200 <span id="co.ua.ua-install.prio"></span><span class="callout">4</span>
<code class="prompt root">root # </code><code class="command">update-alternatives</code> --install \
   /usr/local/bin/foo <a class="xref" href="#co.ua.ua-install.usr-local-bin-foo"><span class="callout">1</span></a>\
   foo <a class="xref" href="#co.ua.ua-install.foo"><span class="callout">2</span></a>\
   /usr/local/bin/foo-3 <a class="xref" href="#co.ua.ua-install.usr-local-bin-foo.path"><span class="callout">3</span></a>\
   300 <a class="xref" href="#co.ua.ua-install.prio"><span class="callout">4</span></a></pre></div><p>
      The options after <code class="option">--install</code> have the following meanings:
     </p><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.ua-install.usr-local-bin-foo"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
        The generic name. To avoid confusion, this is usually the script
        name without any version numbers.
       </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.ua-install.foo"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
        The name of the master link. Must be the same.
       </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.ua-install.usr-local-bin-foo.path"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
        The path to the original script(s) located in
        <code class="filename">/usr/local/bin</code>.
       </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.ua.ua-install.prio"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
        The priority.
        We give <code class="command">foo-2</code> a lower priority than
        <code class="command">foo-3</code>.
        It is good practice to use a significant number increase to separate
        priorities. For example, a priority of 200 for <code class="command">foo-2</code>
        and 300 for <code class="command">foo-2</code>.
       </p></td></tr></table></div></li><li class="step "><p>
      Check the master link:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">update-alternatives</code> --display foo
foo - auto mode
  link best version is /usr/local/bin/foo-3
  link currently points to /usr/local/bin/foo-3
  link foo is /usr/local/bin/foo
/usr/local/bin/foo-2 - priority 200
/usr/local/bin/foo-3 - priority 300</pre></div></li></ol></div></div><p>
    After you completed the described steps, you can use the master link
    <code class="command">/usr/local/bin/foo</code>.
   </p><p>
    If needed, you can install additional alternatives.
    To remove an alternative, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">update-alternatives</code> --remove foo /usr/local/bin/foo-2</pre></div><p>
    After this script has been removed, the alternatives system for the foo group looks
    like this:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">update-alternatives</code> --display foo
foo - auto mode
  link best version is /usr/local/bin/foo-3
  link currently points to /usr/local/bin/foo-3
  link foo is /usr/local/bin/foo
/usr/local/bin/foo-3 - priority 300</pre></div></div><div class="sect1 " id="sec.ua.slave"><div class="titlepage"><div><div><h2 class="title" id="sec.ua.slave"><span class="number">17.6 </span><span class="name">Defining Dependent Alternatives</span> <a title="Permalink" class="permalink" href="#sec.ua.slave">#</a></h2></div></div></div><p>
    If you have alternatives, the script itself is not enough. Most commands
    are not completely stand-alone: They usually ship with additional files,
    such as extensions, configuration, or man pages.
    To create alternatives which are dependent on a master
    link, use <span class="emphasis"><em>slave alternatives</em></span>.
   </p><p>
    Let us assume we want to extend our example in <a class="xref" href="#sec.ua.install" title="17.5. Installing Custom Alternatives">Section 17.5, “Installing Custom Alternatives”</a>
    and provide man pages and configuration files:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Two man pages, <code class="filename">foo-2.1.gz</code> and <code class="filename">foo-3.1.gz</code>
      stored in the <code class="filename">/usr/local/man/man1</code> directory.
     </p></li><li class="listitem "><p>
      Two configuration files, <code class="filename">foo-2.conf</code> and
      <code class="filename">foo-3.conf</code>, stored in <code class="filename">/etc</code>.
     </p></li></ul></div><p>
    Follow these steps to add the additional files to your alternatives:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Copy the configuration files into <code class="filename">/etc</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">cp</code> foo-{2,3}.conf /etc</pre></div></li><li class="step "><p>
      Copy the man pages into the <code class="filename">/usr/local/man/man1</code>
      directory:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">cp</code> foo-{2,3}.1.gz /usr/local/man/man1/</pre></div></li><li class="step "><p>
      Add the slave links to the main scripts with the <code class="option">--slave</code>
      option:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">update-alternatives</code> --install \
   /usr/local/bin/foo foo /usr/local/bin/foo-2 200 \
   --slave /usr/local/man/man1/foo.1.gz \
   foo.1.gz \
   /usr/local/man/man1/foo-2.1.gz \
   --slave /etc/foo.conf \
   foo.conf \
   /etc/foo-2.conf
<code class="prompt root">root # </code><code class="command">update-alternatives</code> --install \
   /usr/local/bin/foo foo /usr/local/bin/foo-3 300 \
   --slave /usr/local/man/man1/foo.1.gz \
   foo.1.gz \
   /usr/local/man/man1/foo-3.1.gz \
   --slave /etc/foo.conf \
   foo.conf \
   /etc/foo-3.conf</pre></div></li><li class="step "><p>Check the master link:</p><div class="verbatim-wrap"><pre class="screen">foo - auto mode
  link best version is /usr/local/bin/foo-3
  link currently points to /usr/local/bin/foo-3
  link foo is /usr/local/bin/foo
  slave foo.1.gz is /usr/local/man/man1/foo.1.gz
  slave foo.conf is /etc/foo.conf
/usr/local/bin/foo-2 - priority 200
  slave foo.1.gz: /usr/local/man/man1/foo-2.1.gz
  slave foo.conf: /etc/foo-2.conf
/usr/local/bin/foo-3 - priority 300
  slave foo.1.gz: /usr/local/man/man1/foo-3.1.gz
  slave foo.conf: /etc/foo-3.conf</pre></div></li></ol></div></div><p>
    If you change the links with <code class="command">update-alternatives --config foo</code>
    to <code class="command">foo-2</code>, then all slave links will change as well.
   </p></div></div><div class="chapter " id="cha.network"><div class="titlepage"><div><div><h2 class="title"><span class="number">18 </span><span class="name">Basic Networking</span> <a title="Permalink" class="permalink" href="#cha.network">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_basic.xml</li><li><span class="ds-label">ID: </span>cha.network</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698749699712">#</a></h6></div><p>
    Linux offers the necessary networking tools and features for integration
    into all types of network structures. Network access using a network card
    can be configured with YaST. Manual configuration is also possible. In
    this chapter only the fundamental mechanisms and the relevant network
    configuration files are covered.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.network.addresses"><span class="number">18.1 </span><span class="name">IP Addresses and Routing</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.ipv6"><span class="number">18.2 </span><span class="name">IPv6—The Next Generation Internet</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.nameres"><span class="number">18.3 </span><span class="name">Name Resolution</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.yast"><span class="number">18.4 </span><span class="name">Configuring a Network Connection with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.nm"><span class="number">18.5 </span><span class="name">NetworkManager</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.manconf"><span class="number">18.6 </span><span class="name">Configuring a Network Connection Manually</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.iface-bonding"><span class="number">18.7 </span><span class="name">Setting Up Bonding Devices</span></a></span></dt><dt><span class="sect1"><a href="#sec.network.iface-teaming"><span class="number">18.8 </span><span class="name">Setting Up Team Devices for Network Teaming</span></a></span></dt></dl></div></div><p>
  Linux and other Unix operating systems use the TCP/IP protocol. It is not a
  single network protocol, but a family of network protocols that offer various
  services. The protocols listed in <a class="xref" href="#tab.net.basic.tcpproto" title="Several Protocols in the TCP/IP Protocol Family">Several Protocols in the TCP/IP Protocol Family</a>,
  are provided for exchanging data between two machines via TCP/IP. Networks
  combined by TCP/IP, comprising a worldwide network, are also called
  <span class="quote">“<span class="quote">the Internet.</span>”</span>
 </p><p>
  RFC stands for <span class="emphasis"><em>Request for Comments</em></span>. RFCs are documents
  that describe various Internet protocols and implementation procedures for
  the operating system and its applications. The RFC documents describe the
  setup of Internet protocols. For more information about RFCs, see
  <a class="link" href="http://www.ietf.org/rfc.html" target="_blank">http://www.ietf.org/rfc.html</a>.
 </p><div class="variablelist " id="tab.net.basic.tcpproto"><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Several Protocols in the TCP/IP Protocol Family </span><a title="Permalink" class="permalink" href="#tab.net.basic.tcpproto">#</a></h6></div><dl class="variablelist"><dt id="idm139698749692336"><span class="term ">TCP</span></dt><dd><p>
     Transmission Control Protocol: a connection-oriented secure protocol. The
     data to transmit is first sent by the application as a stream of data and
     converted into the appropriate format by the operating system. The data
     arrives at the respective application on the destination host in the
     original data stream format it was initially sent. TCP determines whether
     any data has been lost or jumbled during the transmission. TCP is
     implemented wherever the data sequence matters.
    </p></dd><dt id="idm139698749690048"><span class="term ">UDP</span></dt><dd><p>
     User Datagram Protocol: a connectionless, insecure protocol. The data to
     transmit is sent in the form of packets generated by the application. The
     order in which the data arrives at the recipient is not guaranteed and
     data loss is possible. UDP is suitable for record-oriented applications.
     It features a smaller latency period than TCP.
    </p></dd><dt id="idm139698749687904"><span class="term ">ICMP</span></dt><dd><p>
     Internet Control Message Protocol: This is not a protocol for
     the end user, but a special control protocol that issues error reports and
     can control the behavior of machines participating in TCP/IP data
     transfer. In addition, it provides a special echo mode that can be viewed
     using the program ping.
    </p></dd><dt id="idm139698749685792"><span class="term ">IGMP</span></dt><dd><p>
     Internet Group Management Protocol: This protocol controls machine
     behavior when implementing IP multicast.
    </p></dd></dl></div><p>
  As shown in <a class="xref" href="#fig.net.basic.OSI" title="Simplified Layer Model for TCP/IP">Figure 18.1, “Simplified Layer Model for TCP/IP”</a>, data exchange takes place in
  different layers. The actual network layer is the insecure data transfer via
  IP (Internet protocol). On top of IP, TCP (transmission control protocol)
  guarantees, to a certain extent, security of the data transfer. The IP layer
  is supported by the underlying hardware-dependent protocol, such as Ethernet.
 </p><div class="figure" id="fig.net.basic.OSI"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/net_basic_osi.png"><img src="images/net_basic_osi.png" width="" alt="Simplified Layer Model for TCP/IP" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 18.1: </span><span class="name">Simplified Layer Model for TCP/IP </span><a title="Permalink" class="permalink" href="#fig.net.basic.OSI">#</a></h6></div></div><p>
  The diagram provides one or two examples for each layer. The layers are
  ordered according to <span class="emphasis"><em>abstraction levels</em></span>. The lowest
  layer is very close to the hardware. The uppermost layer, however, is almost
  a complete abstraction from the hardware. Every layer has its own special
  function. The special functions of each layer are mostly implicit in their
  description. The data link and physical layers represent the physical network
  used, such as Ethernet.
 </p><p>
  Almost all hardware protocols work on a packet-oriented basis. The data to
  transmit is collected into <span class="emphasis"><em>packets</em></span> (it cannot be sent
  all at once). The maximum size of a TCP/IP packet is approximately 64 KB.
  Packets are normally quite smaller, as the network hardware can be a limiting
  factor. The maximum size of a data packet on an Ethernet is about fifteen
  hundred bytes. The size of a TCP/IP packet is limited to this amount when the
  data is sent over an Ethernet. If more data is transferred, more data packets
  need to be sent by the operating system.
 </p><p>
  For the layers to serve their designated functions, additional information
  regarding each layer must be saved in the data packet. This takes place in
  the <span class="emphasis"><em>header</em></span> of the packet. Every layer attaches a small
  block of data, called the protocol header, to the front of each emerging
  packet. A sample TCP/IP data packet traveling over an Ethernet cable is
  illustrated in <a class="xref" href="#fig.net.basic.TCPPaket" title="TCP/IP Ethernet Packet">Figure 18.2, “TCP/IP Ethernet Packet”</a>. The proof sum is
  located at the end of the packet, not at the beginning. This simplifies
  things for the network hardware.
 </p><div class="figure" id="fig.net.basic.TCPPaket"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/net_basic_tcppacket.png"><img src="images/net_basic_tcppacket.png" width="" alt="TCP/IP Ethernet Packet" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 18.2: </span><span class="name">TCP/IP Ethernet Packet </span><a title="Permalink" class="permalink" href="#fig.net.basic.TCPPaket">#</a></h6></div></div><p>
  When an application sends data over the network, the data passes through each
  layer, all implemented in the Linux kernel except the physical layer. Each
  layer is responsible for preparing the data so it can be passed to the next
  layer. The lowest layer is ultimately responsible for sending the data. The
  entire procedure is reversed when data is received. Like the layers of an
  onion, in each layer the protocol headers are removed from the transported
  data. Finally, the transport layer is responsible for making the data
  available for use by the applications at the destination. In this manner, one
  layer only communicates with the layer directly above or below it. For
  applications, it is irrelevant whether data is transmitted via a 100 Mbit/s
  FDDI network or via a 56-Kbit/s modem line. Likewise, it is irrelevant for
  the data line which kind of data is transmitted, as long as packets are in
  the correct format.
 </p><div class="sect1 " id="sec.network.addresses"><div class="titlepage"><div><div><h2 class="title" id="sec.network.addresses"><span class="number">18.1 </span><span class="name">IP Addresses and Routing</span> <a title="Permalink" class="permalink" href="#sec.network.addresses">#</a></h2></div></div></div><p>
   The discussion in this section is limited to IPv4 networks. For information
   about IPv6 protocol, the successor to IPv4, refer to
   <a class="xref" href="#sec.network.ipv6" title="18.2. IPv6—The Next Generation Internet">Section 18.2, “IPv6—The Next Generation Internet”</a>.
  </p><div class="sect2 " id="sec.network.addresses.ip"><div class="titlepage"><div><div><h3 class="title" id="sec.network.addresses.ip"><span class="number">18.1.1 </span><span class="name">IP Addresses</span> <a title="Permalink" class="permalink" href="#sec.network.addresses.ip">#</a></h3></div></div></div><p>
    Every computer on the Internet has a unique 32-bit address. These 32 bits
    (or 4 bytes) are normally written as illustrated in the second row in
    <a class="xref" href="#aus.net.basic.ipaddress" title="Writing IP Addresses">Example 18.1, “Writing IP Addresses”</a>.
   </p><div class="example" id="aus.net.basic.ipaddress"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.1: </span><span class="name">Writing IP Addresses </span><a title="Permalink" class="permalink" href="#aus.net.basic.ipaddress">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">IP Address (binary):  11000000 10101000 00000000 00010100
IP Address (decimal):      192.     168.       0.      20</pre></div></div></div><p>
    In decimal form, the four bytes are written in the decimal number system,
    separated by periods. The IP address is assigned to a host or a network
    interface. It can be used only once throughout the world. There are
    exceptions to this rule, but these are not relevant to the following
    passages.
   </p><p>
    The points in IP addresses indicate the hierarchical system. Until the
    1990s, IP addresses were strictly categorized in classes. However, this
    system proved too inflexible and was discontinued. Now, <span class="emphasis"><em>classless
    routing</em></span> (CIDR, classless interdomain routing) is used.
   </p></div><div class="sect2 " id="sec.network.addresses.route"><div class="titlepage"><div><div><h3 class="title" id="sec.network.addresses.route"><span class="number">18.1.2 </span><span class="name">Netmasks and Routing</span> <a title="Permalink" class="permalink" href="#sec.network.addresses.route">#</a></h3></div></div></div><p>
    Netmasks are used to define the address range of a subnet. If two hosts are
    in the same subnet, they can reach each other directly. If they are not in
    the same subnet, they need the address of a gateway that handles all the
    traffic for the subnet. To check if two IP addresses are in the same
    subnet, simply <span class="quote">“<span class="quote">AND</span>”</span> both addresses with the netmask. If the
    result is identical, both IP addresses are in the same local network. If
    there are differences, the remote IP address, and thus the remote
    interface, can only be reached over a gateway.
   </p><p>
    To understand how the netmask works, look at
    <a class="xref" href="#tab.net.basic.netmask" title="Linking IP Addresses to the Netmask">Example 18.2, “Linking IP Addresses to the Netmask”</a>. The netmask consists of 32 bits
    that identify how much of an IP address belongs to the network. All those
    bits that are <code class="literal">1</code> mark the corresponding bit in the IP
    address as belonging to the network. All bits that are <code class="literal">0</code>
    mark bits inside the subnet. This means that the more bits are
    <code class="literal">1</code>, the smaller the subnet is. Because the netmask always
    consists of several successive <code class="literal">1</code> bits, it is also
    possible to count the number of bits in the netmask. In
    <a class="xref" href="#tab.net.basic.netmask" title="Linking IP Addresses to the Netmask">Example 18.2, “Linking IP Addresses to the Netmask”</a> the first net with 24 bits could
    also be written as <code class="literal">192.168.0.0/24</code>.
   </p><div class="example" id="tab.net.basic.netmask"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.2: </span><span class="name">Linking IP Addresses to the Netmask </span><a title="Permalink" class="permalink" href="#tab.net.basic.netmask">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">IP address (192.168.0.20):  11000000 10101000 00000000 00010100
Netmask   (255.255.255.0):  11111111 11111111 11111111 00000000
---------------------------------------------------------------
Result of the link:         11000000 10101000 00000000 00000000
In the decimal system:           192.     168.       0.       0

IP address (213.95.15.200): 11010101 10111111 00001111 11001000
Netmask    (255.255.255.0): 11111111 11111111 11111111 00000000
---------------------------------------------------------------
Result of the link:         11010101 10111111 00001111 00000000
In the decimal system:           213.      95.      15.       0</pre></div></div></div><p>
    To give another example: all machines connected with the same Ethernet
    cable are usually located in the same subnet and are directly accessible.
    Even when the subnet is physically divided by switches or bridges, these
    hosts can still be reached directly.
   </p><p>
    IP addresses outside the local subnet can only be reached if a gateway is
    configured for the target network. In the most common case, there is only
    one gateway that handles all traffic that is external. However, it is also
    possible to configure several gateways for different subnets.
   </p><p>
    If a gateway has been configured, all external IP packets are sent to the
    appropriate gateway. This gateway then attempts to forward the packets in
    the same manner—from host to host—until it reaches the
    destination host or the packet's TTL (time to live) expires.
   </p><div class="variablelist " id="net.basic.spezial.net"><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Specific Addresses </span><a title="Permalink" class="permalink" href="#net.basic.spezial.net">#</a></h6></div><dl class="variablelist"><dt id="idm139698749644496"><span class="term ">
      Base Network Address
     </span></dt><dd><p>
       This is the netmask AND any address in the network, as shown in
       <a class="xref" href="#tab.net.basic.netmask" title="Linking IP Addresses to the Netmask">Example 18.2, “Linking IP Addresses to the Netmask”</a> under <code class="literal">Result</code>.
       This address cannot be assigned to any hosts.
      </p></dd><dt id="idm139698749641568"><span class="term ">
      Broadcast Address
     </span></dt><dd><p>
       This could be paraphrased as: <span class="quote">“<span class="quote">Access all hosts in this
       subnet.</span>”</span> To generate this, the netmask is inverted in binary form
       and linked to the base network address with a logical OR. The above
       example therefore results in 192.168.0.255. This address cannot be
       assigned to any hosts.
      </p></dd><dt id="idm139698749639056"><span class="term ">
      Local Host
     </span></dt><dd><p>
       The address <code class="systemitem">127.0.0.1</code> is
       assigned to the <span class="quote">“<span class="quote">loopback device</span>”</span> on each host. A
       connection can be set up to your own machine with this address and with
       all addresses from the complete
       <code class="systemitem">127.0.0.0/8</code> loopback network
       as defined with IPv4. With IPv6 there is only one loopback address
       (<code class="systemitem">::1</code>).
      </p></dd></dl></div><p>
    Because IP addresses must be unique all over the world, you cannot select
    random addresses. There are three address domains to use if you want to set
    up a private IP-based network. These cannot get any connection from the
    rest of the Internet, because they cannot be transmitted over the Internet.
    These address domains are specified in RFC 1597 and listed in
    <a class="xref" href="#tab.net.basic.privat.net" title="Private IP Address Domains">Table 18.1, “Private IP Address Domains”</a>.
   </p><div class="table" id="tab.net.basic.privat.net"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 18.1: </span><span class="name">Private IP Address Domains </span><a title="Permalink" class="permalink" href="#tab.net.basic.privat.net">#</a></h6></div><div class="table-contents"><table summary="Private IP Address Domains" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
        <p>
         Network/Netmask
        </p>
       </th><th>
        <p>
         Domain
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         <code class="systemitem">10.0.0.0</code>/<code class="systemitem">255.0.0.0</code>
        </p>
       </td><td>
        <p>
         <code class="systemitem">10.x.x.x</code>
        </p>
       </td></tr><tr><td>
        <p>
         <code class="systemitem">172.16.0.0</code>/<code class="systemitem">255.240.0.0</code>
        </p>
       </td><td>
        <p>
         <code class="systemitem">172.16.x.x</code> –
         <code class="systemitem">172.31.x.x</code>
        </p>
       </td></tr><tr><td>
        <p>
         <code class="systemitem">192.168.0.0</code>/<code class="systemitem">255.255.0.0</code>
        </p>
       </td><td>
        <p>
         <code class="systemitem">192.168.x.x</code>
        </p>
       </td></tr></tbody></table></div></div></div></div><div class="sect1 " id="sec.network.ipv6"><div class="titlepage"><div><div><h2 class="title" id="sec.network.ipv6"><span class="number">18.2 </span><span class="name">IPv6—The Next Generation Internet</span> <a title="Permalink" class="permalink" href="#sec.network.ipv6">#</a></h2></div></div></div><p>
   Due to the emergence of the World Wide Web (WWW), the Internet has
   experienced explosive growth, with an increasing number of computers
   communicating via TCP/IP in the past fifteen years. Since Tim Berners-Lee at
   CERN (<a class="link" href="http://public.web.cern.ch" target="_blank">http://public.web.cern.ch</a>) invented the WWW in
   1990, the number of Internet hosts has grown from a few thousand to about a
   hundred million.
  </p><p>
   As mentioned, an IPv4 address consists of only 32 bits. Also, quite a few
   IP addresses are lost—they cannot be used because of the way in which
   networks are organized. The number of addresses available in your subnet is
   two to the power of the number of bits, minus two. A subnet has, for
   example, 2, 6, or 14 addresses available. To connect 128 hosts to the
   Internet, for example, you need a subnet with 256 IP addresses, from which
   only 254 are usable, because two IP addresses are needed for the structure
   of the subnet itself: the broadcast and the base network address.
  </p><p>
   Under the current IPv4 protocol, DHCP or NAT (network address translation)
   are the typical mechanisms used to circumvent the potential address
   shortage. Combined with the convention to keep private and public address
   spaces separate, these methods can certainly mitigate the shortage. The
   problem with them lies in their configuration, which is a chore to set up
   and a burden to maintain. To set up a host in an IPv4 network, you need
   several address items, such as the host's own IP address, the subnetmask,
   the gateway address and maybe a name server address. All these items need to
   be known and cannot be derived from somewhere else.
  </p><p>
   With IPv6, both the address shortage and the complicated configuration
   should be a thing of the past. The following sections tell more about the
   improvements and benefits brought by IPv6 and about the transition from the
   old protocol to the new one.
  </p><div class="sect2 " id="sec.network.ipv6.adv"><div class="titlepage"><div><div><h3 class="title" id="sec.network.ipv6.adv"><span class="number">18.2.1 </span><span class="name">Advantages</span> <a title="Permalink" class="permalink" href="#sec.network.ipv6.adv">#</a></h3></div></div></div><p>
    The most important and most visible improvement brought by the new protocol
    is the enormous expansion of the available address space. An IPv6 address
    is made up of 128 bit values instead of the traditional 32 bits. This
    provides for as many as several quadrillion IP addresses.
   </p><p>
    However, IPv6 addresses are not only different from their predecessors with
    regard to their length. They also have a different internal structure that
    may contain more specific information about the systems and the networks to
    which they belong. More details about this are found in
    <a class="xref" href="#sec.network.ipv6.address" title="18.2.2. Address Types and Structure">Section 18.2.2, “Address Types and Structure”</a>.
   </p><p>
    The following is a list of other advantages of the new protocol:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749603968"><span class="term ">Autoconfiguration</span></dt><dd><p>
       IPv6 makes the network <span class="quote">“<span class="quote">plug and play</span>”</span> capable, which means
       that a newly set up system integrates into the (local) network without
       any manual configuration. The new host uses its automatic configuration
       mechanism to derive its own address from the information made available
       by the neighboring routers, relying on a protocol called the
       <span class="emphasis"><em>neighbor discovery</em></span> (ND) protocol. This method does
       not require any intervention on the administrator's part and there is no
       need to maintain a central server for address allocation—an
       additional advantage over IPv4, where automatic address allocation
       requires a DHCP server.
      </p><p>
       Nevertheless if a router is connected to a switch, the router should
       send periodic advertisements with flags telling the hosts of a network
       how they should interact with each other. For more information, see
       RFC 2462 and the <code class="systemitem">radvd.conf(5)</code> man page, and
       RFC 3315.
      </p></dd><dt id="idm139698749599520"><span class="term ">Mobility</span></dt><dd><p>
       IPv6 makes it possible to assign several addresses to one network
       interface at the same time. This allows users to access several networks
       easily, something that could be compared with the international roaming
       services offered by mobile phone companies. When you take your mobile
       phone abroad, the phone automatically logs in to a foreign service when
       it enters the corresponding area, so you can be reached under the same
       number everywhere and can place an outgoing call, as you would in your
       home area.
      </p></dd><dt id="idm139698749597168"><span class="term ">Secure Communication</span></dt><dd><p>
       With IPv4, network security is an add-on function. IPv6 includes IPsec
       as one of its core features, allowing systems to communicate over a
       secure tunnel to avoid eavesdropping by outsiders on the Internet.
      </p></dd><dt id="idm139698749595152"><span class="term ">Backward Compatibility</span></dt><dd><p>
       Realistically, it would be impossible to switch the entire Internet from
       IPv4 to IPv6 at one time. Therefore, it is crucial that both protocols
       can coexist not only on the Internet, but also on one system. This is
       ensured by compatible addresses (IPv4 addresses can easily be translated
       into IPv6 addresses) and by using several tunnels. See
       <a class="xref" href="#sec.network.ipv6.coexist" title="18.2.3. Coexistence of IPv4 and IPv6">Section 18.2.3, “Coexistence of IPv4 and IPv6”</a>. Also, systems can rely on a
       <span class="emphasis"><em>dual stack IP</em></span> technique to support both protocols
       at the same time, meaning that they have two network stacks that are
       completely separate, such that there is no interference between the two
       protocol versions.
      </p></dd><dt id="idm139698749591744"><span class="term ">Custom Tailored Services through Multicasting</span></dt><dd><p>
       With IPv4, some services, such as SMB, need to broadcast their packets
       to all hosts in the local network. IPv6 allows a much more fine-grained
       approach by enabling servers to address hosts through
       <span class="emphasis"><em>multicasting</em></span>, that is by addressing several hosts as
       parts of a group. This is different from addressing all hosts through
       <span class="emphasis"><em>broadcasting</em></span> or each host individually through
       <span class="emphasis"><em>unicasting</em></span>). Which hosts are addressed as a group
       may depend on the concrete application. There are some predefined groups
       to address all name servers (the <span class="emphasis"><em>all name servers multicast
       group</em></span>), for example, or all routers (the <span class="emphasis"><em>all
       routers multicast group</em></span>).
      </p></dd></dl></div></div><div class="sect2 " id="sec.network.ipv6.address"><div class="titlepage"><div><div><h3 class="title" id="sec.network.ipv6.address"><span class="number">18.2.2 </span><span class="name">Address Types and Structure</span> <a title="Permalink" class="permalink" href="#sec.network.ipv6.address">#</a></h3></div></div></div><p>
    As mentioned, the current IP protocol has two major limitations:
    there is an increasing shortage of IP addresses, and configuring the network
    and maintaining the routing tables is becoming a more complex and
    burdensome task. IPv6 solves the first problem by expanding the address
    space to 128 bits. The second one is mitigated by introducing a
    hierarchical address structure combined with sophisticated techniques to
    allocate network addresses, and <span class="emphasis"><em>multihoming</em></span> (the
    ability to assign several addresses to one device, giving access to several
    networks).
   </p><p>
    When dealing with IPv6, it is useful to know about three different types of
    addresses:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749583328"><span class="term ">Unicast</span></dt><dd><p>
       Addresses of this type are associated with exactly one network
       interface. Packets with such an address are delivered to only one
       destination. Accordingly, unicast addresses are used to transfer packets
       to individual hosts on the local network or the Internet.
      </p></dd><dt id="idm139698749581264"><span class="term ">Multicast</span></dt><dd><p>
       Addresses of this type relate to a group of network interfaces. Packets
       with such an address are delivered to all destinations that belong to
       the group. Multicast addresses are mainly used by certain network
       services to communicate with certain groups of hosts in a well-directed
       manner.
      </p></dd><dt id="idm139698749579152"><span class="term ">Anycast</span></dt><dd><p>
       Addresses of this type are related to a group of interfaces. Packets
       with such an address are delivered to the member of the group that is
       closest to the sender, according to the principles of the underlying
       routing protocol. Anycast addresses are used to make it easier for hosts
       to find out about servers offering certain services in the given network
       area. All servers of the same type have the same anycast address.
       Whenever a host requests a service, it receives a reply from the server
       with the closest location, as determined by the routing protocol. If
       this server should fail for some reason, the protocol automatically
       selects the second closest server, then the third one, and so forth.
      </p></dd></dl></div><p>
    An IPv6 address is made up of eight four-digit fields, each representing 16
    bits, written in hexadecimal notation. They are separated by colons
    (<code class="literal">:</code>). Any leading zero bytes within a given field may be
    dropped, but zeros within the field or at its end may not. Another
    convention is that more than four consecutive zero bytes may be collapsed
    into a double colon. However, only one such <code class="literal">::</code> is
    allowed per address. This kind of shorthand notation is shown in
    <a class="xref" href="#aus.netz.ipv6.add" title="Sample IPv6 Address">Example 18.3, “Sample IPv6 Address”</a>, where all three lines represent the
    same address.
   </p><div class="example" id="aus.netz.ipv6.add"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.3: </span><span class="name">Sample IPv6 Address </span><a title="Permalink" class="permalink" href="#aus.netz.ipv6.add">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">fe80 : 0000 : 0000 : 0000 : 0000 : 10 : 1000 : 1a4
fe80 :    0 :    0 :    0 :    0 : 10 : 1000 : 1a4
fe80 :                           : 10 : 1000 : 1a4</pre></div></div></div><p>
    Each part of an IPv6 address has a defined function. The first bytes form
    the prefix and specify the type of address. The center part is the network
    portion of the address, but it may be unused. The end of the address forms
    the host part. With IPv6, the netmask is defined by indicating the length
    of the prefix after a slash at the end of the address. An address, as shown
    in <a class="xref" href="#aus.netz.ipv6.addpre" title="IPv6 Address Specifying the Prefix Length">Example 18.4, “IPv6 Address Specifying the Prefix Length”</a>, contains the information that
    the first 64 bits form the network part of the address and the last 64 form
    its host part. In other words, the <code class="literal">64</code> means that the
    netmask is filled with 64 1-bit values from the left. As with IPv4, the IP
    address is combined with AND with the values from the netmask to determine
    whether the host is located in the same subnet or in another one.
   </p><div class="example" id="aus.netz.ipv6.addpre"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.4: </span><span class="name">IPv6 Address Specifying the Prefix Length </span><a title="Permalink" class="permalink" href="#aus.netz.ipv6.addpre">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">fe80::10:1000:1a4/64</pre></div></div></div><p>
    IPv6 knows about several predefined types of prefixes. Some are shown in
    <a class="xref" href="#list.net.basic.ipv6.prefix" title="Various IPv6 Prefixes">Various IPv6 Prefixes</a>.
   </p><div class="variablelist " id="list.net.basic.ipv6.prefix"><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Various IPv6 Prefixes </span><a title="Permalink" class="permalink" href="#list.net.basic.ipv6.prefix">#</a></h6></div><dl class="variablelist"><dt id="idm139698749565792"><span class="term "><code class="systemitem">00</code>
     </span></dt><dd><p>
       IPv4 addresses and IPv4 over IPv6 compatibility addresses. These are
       used to maintain compatibility with IPv4. Their use still requires a
       router able to translate IPv6 packets into IPv4 packets. Several special
       addresses, such as the one for the loopback device, have this prefix as
       well.
      </p></dd><dt id="idm139698749563120"><span class="term "><code class="systemitem">2</code> or
      <code class="systemitem">3</code> as the
      first digit
     </span></dt><dd><p>
       Aggregatable global unicast addresses. As is the case with IPv4, an
       interface can be assigned to form part of a certain subnet. Currently,
       there are the following address spaces:
       <code class="systemitem">2001::/16</code> (production quality
       address space) and <code class="systemitem">2002::/16</code>
       (6to4 address space).
      </p></dd><dt id="idm139698749558400"><span class="term "><code class="systemitem">fe80::/10</code>
     </span></dt><dd><p>
       Link-local addresses. Addresses with this prefix should not be routed
       and should therefore only be reachable from within the same subnet.
      </p></dd><dt id="idm139698749555904"><span class="term "><code class="systemitem">fec0::/10</code>
     </span></dt><dd><p>
       Site-local addresses. These may be routed, but only within the network
       of the organization to which they belong. In effect, they are the IPv6
       equivalent of the current private network address space, such as
       <code class="systemitem">10.x.x.x</code>.
      </p></dd><dt id="idm139698749552608"><span class="term "><code class="systemitem">ff</code>
     </span></dt><dd><p>
       These are multicast addresses.
      </p></dd></dl></div><p>
    A unicast address consists of three basic components:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749549280"><span class="term ">Public Topology</span></dt><dd><p>
       The first part (which also contains one of the prefixes mentioned above)
       is used to route packets through the public Internet. It includes
       information about the company or institution that provides the Internet
       access.
      </p></dd><dt id="idm139698749547248"><span class="term ">Site Topology</span></dt><dd><p>
       The second part contains routing information about the subnet to which
       to deliver the packet.
      </p></dd><dt id="idm139698749545360"><span class="term ">Interface ID</span></dt><dd><p>
       The third part identifies the interface to which to deliver the packet.
       This also allows for the MAC to form part of the address. Given that the
       MAC is a globally unique, fixed identifier coded into the device by the
       hardware maker, the configuration procedure is substantially simplified.
       In fact, the first 64 address bits are consolidated to form the
       <code class="literal">EUI-64</code> token, with the last 48 bits taken from the
       MAC, and the remaining 24 bits containing special information about the
       token type. This also makes it possible to assign an
       <code class="literal">EUI-64</code> token to interfaces that do not have a MAC,
       such as those based on PPP.
      </p></dd></dl></div><p>
    On top of this basic structure, IPv6 distinguishes between five different
    types of unicast addresses:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749541056"><span class="term "><code class="systemitem">::</code> (unspecified) </span></dt><dd><p>
       This address is used by the host as its source address when the
       interface is initialized for the first time (at which point, the address
       cannot yet be determined by other means).
      </p></dd><dt id="idm139698749538512"><span class="term "><code class="systemitem">::1</code> (loopback) </span></dt><dd><p>
       The address of the loopback device.
      </p></dd><dt id="idm139698749536128"><span class="term ">IPv4 Compatible Addresses</span></dt><dd><p>
       The IPv6 address is formed by the IPv4 address and a prefix consisting
       of 96 zero bits. This type of compatibility address is used for
       tunneling (see <a class="xref" href="#sec.network.ipv6.coexist" title="18.2.3. Coexistence of IPv4 and IPv6">Section 18.2.3, “Coexistence of IPv4 and IPv6”</a>) to allow
       IPv4 and IPv6 hosts to communicate with others operating in a pure IPv4
       environment.
      </p></dd><dt id="idm139698749533488"><span class="term ">IPv4 Addresses Mapped to IPv6</span></dt><dd><p>
       This type of address specifies a pure IPv4 address in IPv6 notation.
      </p></dd><dt id="idm139698749531616"><span class="term ">Local Addresses</span></dt><dd><p>
       There are two address types for local use:
      </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749529808"><span class="term ">link-local</span></dt><dd><p>
          This type of address can only be used in the local subnet. Packets
          with a source or target address of this type should not be routed to
          the Internet or other subnets. These addresses contain a special
          prefix (<code class="systemitem">fe80::/10</code>) and the
          interface ID of the network card, with the middle part consisting of
          zero bytes. Addresses of this type are used during automatic
          configuration to communicate with other hosts belonging to the same
          subnet.
         </p></dd><dt id="idm139698749526800"><span class="term ">site-local</span></dt><dd><p>
          Packets with this type of address may be routed to other subnets, but
          not to the wider Internet—they must remain inside the
          organization's own network. Such addresses are used for intranets and
          are an equivalent of the private address space defined by IPv4. They
          contain a special prefix
          (<code class="systemitem">fec0::/10</code>), the interface
          ID, and a 16 bit field specifying the subnet ID. Again, the rest is
          filled with zero bytes.
         </p></dd></dl></div></dd></dl></div><p>
    As a completely new feature introduced with IPv6, each network interface
    normally gets several IP addresses, with the advantage that several
    networks can be accessed through the same interface. One of these networks
    can be configured completely automatically using the MAC and a known prefix
    with the result that all hosts on the local network can be reached when
    IPv6 is enabled (using the link-local address). With the MAC forming part
    of it, any IP address used in the world is unique. The only variable parts
    of the address are those specifying the <span class="emphasis"><em>site topology</em></span>
    and the <span class="emphasis"><em>public topology</em></span>, depending on the actual
    network in which the host is currently operating.
   </p><p>
    For a host to go back and forth between different networks, it needs at
    least two addresses. One of them, the <span class="emphasis"><em>home address</em></span>,
    not only contains the interface ID but also an identifier of the home
    network to which it normally belongs (and the corresponding prefix). The
    home address is a static address and, as such, it does not normally change.
    Still, all packets destined to the mobile host can be delivered to it,
    regardless of whether it operates in the home network or somewhere outside.
    This is made possible by the completely new features introduced with IPv6,
    such as <span class="emphasis"><em>stateless autoconfiguration</em></span> and
    <span class="emphasis"><em>neighbor discovery</em></span>. In addition to its home address, a
    mobile host gets one or more additional addresses that belong to the
    foreign networks where it is roaming. These are called
    <span class="emphasis"><em>care-of</em></span> addresses. The home network has a facility
    that forwards any packets destined to the host when it is roaming outside.
    In an IPv6 environment, this task is performed by the <span class="emphasis"><em>home
    agent</em></span>, which takes all packets destined to the home address and
    relays them through a tunnel. On the other hand, those packets destined to
    the care-of address are directly transferred to the mobile host without any
    special detours.
   </p></div><div class="sect2 " id="sec.network.ipv6.coexist"><div class="titlepage"><div><div><h3 class="title" id="sec.network.ipv6.coexist"><span class="number">18.2.3 </span><span class="name">Coexistence of IPv4 and IPv6</span> <a title="Permalink" class="permalink" href="#sec.network.ipv6.coexist">#</a></h3></div></div></div><p>
    The migration of all hosts connected to the Internet from IPv4 to IPv6 is a
    gradual process. Both protocols will coexist for some time to come. The
    coexistence on one system is guaranteed where there is a <span class="emphasis"><em>dual
    stack</em></span> implementation of both protocols. That still leaves the
    question of how an IPv6 enabled host should communicate with an IPv4 host
    and how IPv6 packets should be transported by the current networks, which
    are predominantly IPv4-based. The best solutions offer tunneling and
    compatibility addresses (see <a class="xref" href="#sec.network.ipv6.address" title="18.2.2. Address Types and Structure">Section 18.2.2, “Address Types and Structure”</a>).
   </p><p>
    IPv6 hosts that are more or less isolated in the (worldwide) IPv4 network
    can communicate through tunnels: IPv6 packets are encapsulated as IPv4
    packets to move them across an IPv4 network. Such a connection between two
    IPv4 hosts is called a <span class="emphasis"><em>tunnel</em></span>. To achieve this,
    packets must include the IPv6 destination address (or the corresponding
    prefix) and the IPv4 address of the remote host at the receiving end of the
    tunnel. A basic tunnel can be configured manually according to an agreement
    between the hosts' administrators. This is also called <span class="emphasis"><em>static
    tunneling</em></span>.
   </p><p>
    However, the configuration and maintenance of static tunnels is often too
    labor-intensive to use them for daily communication needs. Therefore, IPv6
    provides for three different methods of <span class="emphasis"><em>dynamic
    tunneling</em></span>:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749510768"><span class="term ">6over4</span></dt><dd><p>
       IPv6 packets are automatically encapsulated as IPv4 packets and sent
       over an IPv4 network capable of multicasting. IPv6 is tricked into
       seeing the whole network (Internet) as a huge local area network (LAN).
       This makes it possible to determine the receiving end of the IPv4 tunnel
       automatically. However, this method does not scale very well and is also
       hampered because IP multicasting is far from widespread on the Internet.
       Therefore, it only provides a solution for smaller corporate or
       institutional networks where multicasting can be enabled. The
       specifications for this method are laid down in RFC 2529.
      </p></dd><dt id="idm139698749508304"><span class="term ">6to4</span></dt><dd><p>
       With this method, IPv4 addresses are automatically generated from IPv6
       addresses, enabling isolated IPv6 hosts to communicate over an IPv4
       network. However, several problems have been reported regarding the
       communication between those isolated IPv6 hosts and the Internet. The
       method is described in RFC 3056.
      </p></dd><dt id="idm139698749506176"><span class="term ">IPv6 Tunnel Broker</span></dt><dd><p>
       This method relies on special servers that provide dedicated tunnels for
       IPv6 hosts. It is described in RFC 3053.
      </p></dd></dl></div></div><div class="sect2 " id="sec.network.ipv6.config"><div class="titlepage"><div><div><h3 class="title" id="sec.network.ipv6.config"><span class="number">18.2.4 </span><span class="name">Configuring IPv6</span> <a title="Permalink" class="permalink" href="#sec.network.ipv6.config">#</a></h3></div></div></div><p>
    To configure IPv6, you normally do not need to make any changes on the
    individual workstations. IPv6 is enabled by default. To disable or enable
    IPv6 on an installed system, use the YaST <span class="guimenu">Network
    Settings</span> module. On the <span class="guimenu">Global Options</span> tab,
    check or uncheck the <span class="guimenu">Enable IPv6</span> option as necessary.

    To enable it temporarily until the next reboot, enter
    <code class="command">modprobe</code> <code class="option">-i ipv6</code> as
    <code class="systemitem">root</code>. It is impossible to unload
    the IPv6 module after it has been loaded.
   </p><p>
    Because of the autoconfiguration concept of IPv6, the network card is
    assigned an address in the <span class="emphasis"><em>link-local</em></span> network.
    Normally, no routing table management takes place on a workstation. The
    network routers can be queried by the workstation, using the
    <span class="emphasis"><em>router advertisement protocol</em></span>, for what prefix and
    gateways should be implemented. The radvd program can be used to set up an
    IPv6 router. This program informs the workstations which prefix to use for
    the IPv6 addresses and which routers. Alternatively, use zebra/quagga for
    automatic configuration of both addresses and routing.
   </p><p>
    For information about how to set up various types of tunnels using the
    <code class="filename">/etc/sysconfig/network</code> files, see the man page of
    <code class="literal">ifcfg-tunnel</code> (<code class="command">man ifcfg-tunnel</code>).
   </p></div><div class="sect2 " id="sec.network.ipv6.moreinfo"><div class="titlepage"><div><div><h3 class="title" id="sec.network.ipv6.moreinfo"><span class="number">18.2.5 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.network.ipv6.moreinfo">#</a></h3></div></div></div><p>
    The above overview does not cover the topic of IPv6 comprehensively. For a
    more in-depth look at the new protocol, refer to the following online
    documentation and books:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749492944"><span class="term "><a class="link" href="http://www.ipv6.org/" target="_blank">http://www.ipv6.org/</a>
     </span></dt><dd><p>
       The starting point for everything about IPv6.
      </p></dd><dt id="idm139698749490704"><span class="term "><a class="link" href="http://www.ipv6day.org" target="_blank">http://www.ipv6day.org</a>
     </span></dt><dd><p>
       All information needed to start your own IPv6 network.
      </p></dd><dt id="idm139698749488464"><span class="term "><a class="link" href="http://www.ipv6-to-standard.org/" target="_blank">http://www.ipv6-to-standard.org/</a>
     </span></dt><dd><p>
       The list of IPv6-enabled products.
      </p></dd><dt id="idm139698749486272"><span class="term "><a class="link" href="http://www.bieringer.de/linux/IPv6/" target="_blank">http://www.bieringer.de/linux/IPv6/</a>
     </span></dt><dd><p>
       Here, find the Linux IPv6-HOWTO and many links related to the topic.
      </p></dd><dt id="idm139698749484000"><span class="term ">RFC 2460</span></dt><dd><p>
       The fundamental RFC about IPv6.
      </p></dd><dt id="idm139698749482176"><span class="term ">IPv6 Essentials</span></dt><dd><p>
       A book describing all the important aspects of the topic is
       <span class="emphasis"><em>IPv6 Essentials</em></span> by Silvia Hagen (ISBN
       0-596-00125-8).
      </p></dd></dl></div></div></div><div class="sect1 " id="sec.network.nameres"><div class="titlepage"><div><div><h2 class="title" id="sec.network.nameres"><span class="number">18.3 </span><span class="name">Name Resolution</span> <a title="Permalink" class="permalink" href="#sec.network.nameres">#</a></h2></div></div></div><p>
   DNS assists in assigning an IP address to one or more names and assigning a
   name to an IP address. In Linux, this conversion is usually carried out by a
   special type of software known as bind. The machine that takes care of this
   conversion is called a <span class="emphasis"><em>name server</em></span>. The names make up a
   hierarchical system in which each name component is separated by a period.
   The name hierarchy is, however, independent of the IP address hierarchy
   described above.
  </p><p>
   Consider a complete name, such as
   <code class="systemitem">jupiter.example.com</code>, written in the
   format <code class="systemitem">hostname.domain</code>. A full
   name, called a <span class="emphasis"><em>fully qualified domain name</em></span> (FQDN),
   consists of a host name and a domain name
   (<code class="systemitem">example.com</code>). The latter
   also includes the <span class="emphasis"><em>top level domain</em></span> or TLD
   (<code class="systemitem">com</code>).
  </p><p>
   TLD assignment has become quite confusing for historical reasons.
   Traditionally, three-letter domain names are used in the USA. In the rest of
   the world, the two-letter ISO national codes are the standard. In addition
   to that, longer TLDs were introduced in 2000 that represent certain spheres
   of activity (for example, <code class="systemitem">.info</code>,
   <code class="systemitem">.name</code>,
   <code class="systemitem">.museum</code>).
  </p><p>
   In the early days of the Internet (before 1990), the file
   <code class="filename">/etc/hosts</code> was used to store the names of all the
   machines represented over the Internet. This quickly proved to be
   impractical in the face of the rapidly growing number of computers connected
   to the Internet. For this reason, a decentralized database was developed to
   store the host names in a widely distributed manner. This database, similar
   to the name server, does not have the data pertaining to all hosts in the
   Internet readily available, but can dispatch requests to other name servers.
  </p><p>
   The top of the hierarchy is occupied by <span class="emphasis"><em>root name
   servers</em></span>. These root name servers manage the top level domains and
   are run by the Network Information Center (NIC). Each root name server knows
   about the name servers responsible for a given top level domain. Information
   about top level domain NICs is available at
   <a class="link" href="http://www.internic.net" target="_blank">http://www.internic.net</a>.
  </p><p>
   DNS can do more than resolve host names. The name server also knows which
   host is receiving e-mails for an entire domain—the <span class="emphasis"><em>mail
   exchanger (MX)</em></span>.
  </p><p>
   For your machine to resolve an IP address, it must know about at least one
   name server and its IP address. Easily specify such a name server using
   YaST. 
  </p><p>
   The protocol <code class="literal">whois</code> is closely related to DNS. With this
   program, quickly find out who is responsible for a given domain.
  </p><div id="idm139698749463856" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: MDNS and .local Domain Names</h6><p>
    The <code class="literal">.local</code> top level domain is treated as link-local
    domain by the resolver. DNS requests are send as multicast DNS requests
    instead of normal DNS requests. If you already use the
    <code class="literal">.local</code> domain in your name server configuration, you
    must switch this option off in <code class="filename">/etc/host.conf</code>. For
    more information, see the <code class="filename">host.conf</code> manual page.
   </p><p>
    If you want to switch off MDNS during installation, use
    <code class="literal">nomdns=1</code> as a boot parameter.
   </p><p>
    For more information on multicast DNS, see
    <a class="link" href="http://www.multicastdns.org" target="_blank">http://www.multicastdns.org</a>.
   </p></div></div><div class="sect1 " id="sec.network.yast"><div class="titlepage"><div><div><h2 class="title" id="sec.network.yast"><span class="number">18.4 </span><span class="name">Configuring a Network Connection with YaST</span> <a title="Permalink" class="permalink" href="#sec.network.yast">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_yast.xml</li><li><span class="ds-label">ID: </span>sec.network.yast</li></ul></div></div></div></div><p>
  There are many supported networking types on Linux. Most of them use
  different device names and the configuration files are spread over several
  locations in the file system. For a detailed overview of the aspects of
  manual network configuration, see <a class="xref" href="#sec.network.manconf" title="18.6. Configuring a Network Connection Manually">Section 18.6, “Configuring a Network Connection Manually”</a>.
 </p><p>
  <span class="phrase">On <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, where NetworkManager is active by default, all
  network cards are configured. If NetworkManager is not active, only the first interface
  with link up (with a network cable connected) is automatically
  configured.</span>
  Additional hardware can be configured any time on the installed system. The
  following sections describe the network configuration for all types of
  network connections supported by <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
 </p><div class="sect2 " id="sec.network.yast.netcard"><div class="titlepage"><div><div><h3 class="title" id="sec.network.yast.netcard"><span class="number">18.4.1 </span><span class="name">Configuring the Network Card with YaST</span> <a title="Permalink" class="permalink" href="#sec.network.yast.netcard">#</a></h3></div></div></div><p>
   To configure your Ethernet or Wi-Fi/Bluetooth card in YaST, select
   <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>. After starting the module, YaST displays the
   <span class="guimenu">Network Settings</span> dialog with four tabs: <span class="guimenu">Global
   Options</span>, <span class="guimenu">Overview</span>,
   <span class="guimenu">Hostname/DNS</span> and <span class="guimenu">Routing</span>.
  </p><p>
   The <span class="guimenu">Global Options</span> tab allows you to set general
   networking options such as the network setup method, IPv6, and general DHCP
   options. For more information, see
   <a class="xref" href="#sec.network.yast.netcard.global" title="18.4.1.1. Configuring Global Networking Options">Section 18.4.1.1, “Configuring Global Networking Options”</a>.
  </p><p>
   The <span class="guimenu">Overview</span> tab contains information about installed
   network interfaces and configurations. Any properly detected network card is
   listed with its name. You can manually configure new cards, remove or change
   their configuration in this dialog. To manually configure a card
   that was not automatically detected, see
   <a class="xref" href="#sec.network.yast.netcard.man" title="18.4.1.3. Configuring an Undetected Network Card">Section 18.4.1.3, “Configuring an Undetected Network Card”</a>. If you want to change the
   configuration of an already configured card, see
   <a class="xref" href="#sec.network.yast.netcard.change" title="18.4.1.2. Changing the Configuration of a Network Card">Section 18.4.1.2, “Changing the Configuration of a Network Card”</a>.
  </p><p>
   The <span class="guimenu">Hostname/DNS</span> tab allows to set the host name of the
   machine and name the servers to be used. For more information, see
   <a class="xref" href="#sec.network.yast.change.host" title="18.4.1.4. Configuring Host Name and DNS">Section 18.4.1.4, “Configuring Host Name and DNS”</a>.
  </p><p>
   The <span class="guimenu">Routing</span> tab is used for the configuration of routing.
   See <a class="xref" href="#sec.network.yast.change.route" title="18.4.1.5. Configuring Routing">Section 18.4.1.5, “Configuring Routing”</a> for more information.
  </p><div class="figure" id="fig.yast2.neticard"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_net_icard.png"><img src="images/yast2_net_icard.png" width="" alt="Configuring Network Settings" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 18.3: </span><span class="name">Configuring Network Settings </span><a title="Permalink" class="permalink" href="#fig.yast2.neticard">#</a></h6></div></div><div class="sect3 " id="sec.network.yast.netcard.global"><div class="titlepage"><div><div><h4 class="title" id="sec.network.yast.netcard.global"><span class="number">18.4.1.1 </span><span class="name">Configuring Global Networking Options</span> <a title="Permalink" class="permalink" href="#sec.network.yast.netcard.global">#</a></h4></div></div></div><p>
    The <span class="guimenu">Global Options</span> tab of the YaST <span class="guimenu">Network
    Settings</span> module allows you to set important global networking
    options, such as the use of NetworkManager, IPv6 and DHCP client options. These
    settings are applicable for all network interfaces.
   </p><p>
    In the <span class="guimenu">Network Setup Method</span> choose the way network
    connections are managed. If you want a NetworkManager desktop applet to manage
    connections for all interfaces, choose <span class="guimenu">NetworkManager Service</span>.
    NetworkManager is well suited for switching between multiple wired and wireless
    networks. If you do not run a desktop environment, or if your computer is a
    Xen server, virtual system, or provides network services such as DHCP or
    DNS in your network, use the <span class="guimenu">Wicked Service</span> method. If
    NetworkManager is used, <code class="command">nm-applet</code> should be used to configure
    network options and the <span class="guimenu">Overview</span>,
    <span class="guimenu">Hostname/DNS</span> and <span class="guimenu">Routing</span> tabs of the
    <span class="guimenu">Network Settings</span> module are disabled.
    <span class="phrase">For more information on NetworkManager, see
    <a class="xref" href="#cha.nm" title="Chapter 26. Using NetworkManager">Chapter 26, <em>Using NetworkManager</em></a>.</span> 
   </p><p>
    In the <span class="guimenu">IPv6 Protocol Settings</span> choose whether to use the
    IPv6 protocol. It is possible to use IPv6 together with IPv4. By default,
    IPv6 is enabled. However, in networks not using IPv6 protocol, response
    times can be faster with IPv6 protocol disabled. To disable IPv6,
    deactivate <span class="guimenu">Enable IPv6</span>. If IPv6 is disabled, the kernel
    no longer loads the IPv6 module automatically. This setting will be applied
    after reboot.
   </p><p>
    In the <span class="guimenu">DHCP Client Options</span> configure options for the
    DHCP client.


    The <span class="guimenu">DHCP Client Identifier</span> must be different for each
    DHCP client on a single network. If left empty, it defaults to the hardware
    address of the network interface. However, if you are running several
    virtual machines using the same network interface and, therefore, the same
    hardware address, specify a unique free-form identifier here.
   </p><p>
    The <span class="guimenu">Hostname to Send</span> specifies a string used for the
    host name option field when the DHCP client sends messages to DHCP server.
    Some DHCP servers update name server zones (forward and reverse records)
    according to this host name (Dynamic DNS). Also, some DHCP servers require
    the <span class="guimenu">Hostname to Send</span> option field to contain a specific
    string in the DHCP messages from clients. Leave <code class="literal">AUTO</code> to
    send the current host name (that is the one defined in
    <code class="filename">/etc/HOSTNAME</code>). Make the option field empty for not
    sending any host name.
   </p><p>
    If you do not want to change the default route according to the information
    from DHCP, deactivate <span class="guimenu">Change Default Route via DHCP</span>.
   </p></div><div class="sect3 " id="sec.network.yast.netcard.change"><div class="titlepage"><div><div><h4 class="title" id="sec.network.yast.netcard.change"><span class="number">18.4.1.2 </span><span class="name">Changing the Configuration of a Network Card</span> <a title="Permalink" class="permalink" href="#sec.network.yast.netcard.change">#</a></h4></div></div></div><p>
    To change the configuration of a network card, select a card from the list
    of the detected cards in <span class="guimenu">Network Settings</span> › <span class="guimenu">Overview</span> in YaST and click
    <span class="guimenu">Edit</span>. The <span class="guimenu">Network Card Setup</span> dialog
    appears in which to adjust the card configuration using the
    <span class="guimenu">General</span>, <span class="guimenu">Address</span> and
    <span class="guimenu">Hardware</span> tabs.
   </p><div class="sect4 " id="sec.network.yast.change.address"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.address"><span class="number">18.4.1.2.1 </span><span class="name">Configuring IP Addresses</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.address">#</a></h5></div></div></div><p>
     You can set the IP address of the network card or the way its IP address
     is determined in the <span class="guimenu">Address</span> tab of the
     <span class="guimenu">Network Card Setup</span> dialog. Both IPv4 and IPv6 addresses
     are supported. The network card can have <span class="guimenu">No IP Address</span>
     (which is useful for bonding devices), a <span class="guimenu">Statically Assigned IP
     Address</span> (IPv4 or IPv6) or a <span class="guimenu">Dynamic Address</span>
     assigned via <span class="guimenu">DHCP</span> or <span class="guimenu">Zeroconf</span> or
     both.
    </p><p>
     If using <span class="guimenu">Dynamic Address</span>, select whether to use
     <span class="guimenu">DHCP Version 4 Only</span> (for IPv4), <span class="guimenu">DHCP Version 6
     Only</span> (for IPv6) or <span class="guimenu">DHCP Both Version 4 and 6</span>.
    </p><p>
     If possible, the first network card with link that is available during the
     installation is automatically configured to use automatic address setup
     via DHCP. <span class="phrase">On SUSE Linux Enterprise Desktop, where NetworkManager is active by default,
     all network cards are configured.</span>
    </p><p>
     DHCP should also be used if you are using a DSL line but with no static IP
     assigned by the ISP (Internet Service Provider). If you decide to use
     DHCP, configure the details in <span class="guimenu">DHCP Client Options</span> in
     the <span class="guimenu">Global Options</span> tab of the <span class="guimenu">Network
     Settings</span> dialog of the YaST network card configuration module.
     If you have a virtual host setup where different hosts communicate through
     the same interface, an <span class="guimenu">DHCP Client Identifier</span> is
     necessary to distinguish them.
    </p><p>
     DHCP is a good choice for client configuration but it is not ideal for
     server configuration. To set a static IP address, proceed as follows:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST network card configuration
       module and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       In the <span class="guimenu">Address</span> tab, choose <span class="guimenu">Statically
       Assigned IP Address</span>.
      </p></li><li class="step "><p>
       Enter the <span class="guimenu">IP Address</span>. Both IPv4 and IPv6 addresses
       can be used. Enter the network mask in <span class="guimenu">Subnet Mask</span>.
       If the IPv6 address is used, use <span class="guimenu">Subnet Mask</span> for
       prefix length in format <code class="literal">/64</code>.
      </p><p>
       Optionally, you can enter a fully qualified <span class="guimenu">Hostname</span>
       for this address, which will be written to the
       <code class="filename">/etc/hosts</code> configuration file.
      </p></li><li class="step "><p>
       Click <span class="guimenu">Next</span>.
      </p></li><li class="step "><p>
       To activate the configuration, click <span class="guimenu">OK</span>.
      </p></li></ol></div></div><div id="idm139698749387088" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Interface Activation and Link Detection</h6><p>
      During activation of a network interface, <code class="command">wicked</code>
      checks for a carrier and only applies the IP configuration when a link
      has been detected. If you need to apply the configuration regardless of
      the link status (for example, when you want to test a service listening to a
      certain address), you can skip link detection by adding the variable
      <code class="literal">LINK_REQUIRED=no</code> to the configuration file of the
      interface in <code class="filename">/etc/sysconfig/network/ifcfg</code>.
     </p><p>
      Additionally, you can use the variable
      <code class="literal">LINK_READY_WAIT=<em class="replaceable ">5</em></code> to
      specify the timeout for waiting for a link in seconds.
     </p><p>
      For more information about the <code class="filename">ifcfg-*</code> configuration
      files, refer to <a class="xref" href="#sec.network.manconf.files.ifcfg" title="18.6.2.5. /etc/sysconfig/network/ifcfg-*">Section 18.6.2.5, “<code class="filename">/etc/sysconfig/network/ifcfg-*</code>”</a> and
      <code class="command">man 5 ifcfg</code>.
     </p></div><p>
     If you use the static address, the name servers and default gateway are
     not configured automatically. To configure name servers, proceed as
     described in <a class="xref" href="#sec.network.yast.change.host" title="18.4.1.4. Configuring Host Name and DNS">Section 18.4.1.4, “Configuring Host Name and DNS”</a>. To configure
     a gateway, proceed as described in
     <a class="xref" href="#sec.network.yast.change.route" title="18.4.1.5. Configuring Routing">Section 18.4.1.5, “Configuring Routing”</a>.
    </p></div><div class="sect4 " id="sec.network.yast.configure.addresses"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.configure.addresses"><span class="number">18.4.1.2.2 </span><span class="name">Configuring Multiple Addresses</span> <a title="Permalink" class="permalink" href="#sec.network.yast.configure.addresses">#</a></h5></div></div></div><p>
     One network device can have multiple IP addresses.
    </p><div id="idm139698749377168" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Aliases Are a Compatibility Feature</h6><p>
      These so-called aliases or labels, respectively, work with IPv4 only.
      With IPv6 they will be ignored. Using <code class="command">iproute2</code> network
      interfaces can have one or more addresses.
     </p></div><p>
     Using YaST to set additional addresses for your network card, proceed as
     follows:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST <span class="guimenu">Network
       Settings</span> dialog and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       In the <span class="guimenu">Address</span> › <span class="guimenu">Additional
       Addresses</span> tab, click <span class="guimenu">Add</span>.
      </p></li><li class="step "><p>
       Enter <span class="guimenu">IPv4 Address Label</span>, <span class="guimenu">IP
       Address</span>, and <span class="guimenu">Netmask</span>. Do not include the
       interface name in the alias name.
      </p></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></div><div class="sect4 " id="sec.network.yast.change.udev"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.udev"><span class="number">18.4.1.2.3 </span><span class="name">Changing the Device Name and Udev Rules</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.udev">#</a></h5></div></div></div><p>
     It is possible to change the device name of the network card when it is
     used. It is also possible to determine whether the network card should be
     identified by udev via its hardware (MAC) address or via the bus ID. The
     later option is preferable in large servers to simplify hotplugging of
     cards. To set these options with YaST, proceed as follows:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST <span class="guimenu">Network
       Settings</span> dialog and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       Go to the <span class="guimenu">Hardware</span> tab. The current device name is
       shown in <span class="guimenu">Udev Rules</span>. Click <span class="guimenu">Change</span>.
      </p></li><li class="step "><p>
       Select whether udev should identify the card by its <span class="guimenu">MAC
       Address</span> or <span class="guimenu">Bus ID</span>. The current MAC address
       and bus ID of the card are shown in the dialog.
      </p></li><li class="step "><p>
       To change the device name, check the <span class="guimenu">Change Device
       Name</span> option and edit the name.
      </p></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></div><div class="sect4 " id="sec.network.yast.change.driver"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.driver"><span class="number">18.4.1.2.4 </span><span class="name">Changing Network Card Kernel Driver</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.driver">#</a></h5></div></div></div><p>
     For some network cards, several kernel drivers may be available. If the
     card is already configured, YaST allows you to select a kernel driver to
     be used from a list of available suitable drivers. It is also possible to
     specify options for the kernel driver. To set these options with YaST,
     proceed as follows:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Select a card from the list of detected cards in the
       <span class="guimenu">Overview</span> tab of the YaST Network Settings module
       and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       Go to the <span class="guimenu">Hardware</span> tab.
      </p></li><li class="step "><p>
       Select the kernel driver to be used in <span class="guimenu">Module Name</span>.
       Enter any options for the selected driver in <span class="guimenu">Options</span>
       in the form

       <code class="command">=</code> =<em class="replaceable ">VALUE</em>. If more options
       are used, they should be space-separated.
      </p></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></div><div class="sect4 " id="sec.network.yast.change.start"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.start"><span class="number">18.4.1.2.5 </span><span class="name">Activating the Network Device</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.start">#</a></h5></div></div></div><p>
     If you use the method with <code class="command">wicked</code>, you can configure
     your device to either start during boot, on cable connection, on card
     detection, manually, or never. To change device start-up, proceed as
     follows:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       In YaST select a card from the list of detected cards in <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       In the <span class="guimenu">General</span> tab, select the desired entry from
       <span class="guimenu">Device Activation</span>.
      </p><p>
       Choose <span class="guimenu">At Boot Time</span> to start the device during the
       system boot. With <span class="guimenu">On Cable Connection</span>, the interface
       is watched for any existing physical connection. With <span class="guimenu">On
       Hotplug</span>, the interface is set when available. It is similar to
       the <span class="guimenu">At Boot Time</span> option, and only differs in that no
       error occurs if the interface is not present at boot time. Choose
       <span class="guimenu">Manually</span> to control the interface manually with
       <code class="command">ifup</code>. Choose <span class="guimenu">Never</span> to not start
       the device. The <span class="guimenu">On NFSroot</span> is similar to <span class="guimenu">At
       Boot Time</span>, but the interface does not shut down with the
       <code class="command">systemctl stop network</code> command; the
       <code class="option">network</code> service also cares about the
       <code class="option">wicked</code> service if <code class="command">wicked</code> is active.
       Use this if you use an NFS or iSCSI root file system.
      </p></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div><div id="idm139698749329968" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: NFS as a Root File System</h6><p>
      On (diskless) systems where the root partition is mounted via network as
      an NFS share, you need to be careful when configuring the network device
      with which the NFS share is accessible.
     </p><p>
      When shutting down or rebooting the system, the default processing order
      is to turn off network connections, then unmount the root partition. With
      NFS root, this order causes problems as the root partition cannot be
      cleanly unmounted as the network connection to the NFS share is already
      not activated. To prevent the system from deactivating the relevant
      network device, open the network device configuration tab as described in
      <a class="xref" href="#sec.network.yast.change.start" title="18.4.1.2.5. Activating the Network Device">Section 18.4.1.2.5, “Activating the Network Device”</a> and choose <span class="guimenu">On
      NFSroot</span> in the <span class="guimenu">Device Activation</span> pane.
     </p></div></div><div class="sect4 " id="sec.network.yast.change.mtu"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.mtu"><span class="number">18.4.1.2.6 </span><span class="name">Setting Up Maximum Transfer Unit Size</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.mtu">#</a></h5></div></div></div><p>
     You can set a maximum transmission unit (MTU) for the interface. MTU
     refers to the largest allowed packet size in bytes. A higher MTU brings
     higher bandwidth efficiency. However, large packets can block up a slow
     interface for some time, increasing the lag for further packets.
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       In YaST select a card from the list of detected cards in <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       In the <span class="guimenu">General</span> tab, select the desired entry from the
       <span class="guimenu">Set MTU</span> list.
      </p></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></div><div class="sect4 " id="sec.network.yast.change.pciemulti"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.pciemulti"><span class="number">18.4.1.2.7 </span><span class="name">PCIe Multifunction Devices</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.pciemulti">#</a></h5></div></div></div><p>
     Multifunction devices that support LAN, iSCSI, and FCoE are supported.
     YaST FCoE client (<code class="command">yast2 fcoe-client</code>) shows the private
     flags in additional columns to allow the user to select the device meant
     for FCoE. YaST network module (<code class="command">yast2 lan</code>) excludes
     <span class="quote">“<span class="quote">storage only devices</span>”</span> for network configuration.
    </p></div><div class="sect4 " id="sec.network.yast.change.infiniband"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.infiniband"><span class="number">18.4.1.2.8 </span><span class="name">Infiniband Configuration for IP-over-InfiniBand (IPoIB)</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.infiniband">#</a></h5></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       In YaST select the InfiniBand device in <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span> and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       In the <span class="guimenu">General</span> tab, select one of the
       <span class="guimenu">IP-over-InfiniBand</span> (IPoIB) modes:
       <span class="guimenu">connected</span> (default) or <span class="guimenu">datagram</span>.
      </p></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div><p>
     For more information about InfiniBand, see
     <code class="filename">/usr/src/linux/Documentation/infiniband/ipoib.txt</code>.
    </p></div><div class="sect4 " id="sec.network.yast.change.fire"><div class="titlepage"><div><div><h5 class="title" id="sec.network.yast.change.fire"><span class="number">18.4.1.2.9 </span><span class="name">Configuring the Firewall</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.fire">#</a></h5></div></div></div><p>
     Without having to perform the detailed firewall setup as described in
     <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 15 “Masquerading and Firewalls”, Section 15.4 “<code class="systemitem">firewalld</code>”</span>, you can determine the
     basic firewall configuration for your device as part of the device setup.
     Proceed as follows:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Open the YaST <span class="guimenu">System</span> › <span class="guimenu">Network
       Settings</span> module. In the
       <span class="guimenu">Overview</span> tab, select a card from the list of detected
       cards and click <span class="guimenu">Edit</span>.
      </p></li><li class="step "><p>
       Enter the <span class="guimenu">General</span> tab of the <span class="guimenu">Network
       Settings</span> dialog.
      </p></li><li class="step "><p>
       Determine the <span class="guimenu">Firewall Zone</span> to which your interface
       should be assigned. The following options are available:
      </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749296032"><span class="term ">Firewall Disabled</span></dt><dd><p>
          This option is available only if the firewall is disabled and the
          firewall does not run. Only use this option if your machine is part
          of a greater network that is protected by an outer firewall.
         </p></dd><dt id="idm139698749294016"><span class="term ">Automatically Assign Zone</span></dt><dd><p>
          This option is available only if the firewall is enabled. The
          firewall is running and the interface is automatically assigned to a
          firewall zone. The zone which contains the keyword
          <code class="literal">any</code> or the external zone will be used for such an
          interface.
         </p></dd><dt id="idm139698749291488"><span class="term ">Internal Zone (Unprotected)</span></dt><dd><p>
          The firewall is running, but does not enforce any rules to protect
          this interface. Use this option if your machine is part of a greater
          network that is protected by an outer firewall. It is also useful for
          the interfaces connected to the internal network, when the machine
          has more network interfaces.
         </p></dd><dt id="idm139698749289328"><span class="term ">Demilitarized Zone</span></dt><dd><p>
          A demilitarized zone is an additional line of defense in front of an
          internal network and the (hostile) Internet. Hosts assigned to this
          zone can be reached from the internal network and from the Internet,
          but cannot access the internal network.
         </p></dd><dt id="idm139698749287248"><span class="term ">External Zone</span></dt><dd><p>
          The firewall is running on this interface and fully protects it
          against other—presumably hostile—network traffic. This is
          the default option.
         </p></dd></dl></div></li><li class="step "><p>
       To activate the configuration, confirm the settings.
      </p></li></ol></div></div></div></div><div class="sect3 " id="sec.network.yast.netcard.man"><div class="titlepage"><div><div><h4 class="title" id="sec.network.yast.netcard.man"><span class="number">18.4.1.3 </span><span class="name">Configuring an Undetected Network Card</span> <a title="Permalink" class="permalink" href="#sec.network.yast.netcard.man">#</a></h4></div></div></div><p>
    If a network card is not detected correctly, the card is not included in
    the list of detected cards. If you are sure that your system includes a
    driver for your card, you can configure it manually. You can also configure
    special network device types, such as bridge, bond, TUN or TAP. To
    configure an undetected network card (or a special device) proceed as
    follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      In the <span class="guimenu">System</span> › <span class="guimenu">Network
      Settings</span> › <span class="guimenu">Overview</span> dialog in
      YaST click <span class="guimenu">Add</span>.
     </p></li><li class="step "><p>
      In the <span class="guimenu">Hardware</span> dialog, set the <span class="guimenu">Device
      Type</span> of the interface from the available options and
      <span class="guimenu">Configuration Name</span>. If the network card is an
      USB device, activate the respective check box and exit this dialog with
      <span class="guimenu">Next</span>. Otherwise, you can define the kernel
      <span class="guimenu">Module Name</span> to be used for the card and its
      <span class="guimenu">Options</span>, if necessary.
     </p><p>
      In <span class="guimenu">Ethtool Options</span>, you can set
      <code class="command">ethtool</code> options used by <code class="command">ifup</code> for
      the interface. For information about available options, see the
      <code class="command">ethtool</code> manual page.
     </p><p>
      If the option string starts with a
      <code class="literal">-</code> (for example, <code class="literal">-K
      <em class="replaceable ">INTERFACE_NAME</em> rx on</code>), the second
      word in the string is replaced with the current interface name. Otherwise
      (for example, <code class="literal">autoneg off speed 10</code>)
      <code class="command">ifup</code> adds <code class="literal">-s
      <em class="replaceable ">INTERFACE_NAME</em></code> to the beginning.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      Configure any needed options, such as the IP address, device activation
      or firewall zone for the interface in the <span class="guimenu">General</span>,
      <span class="guimenu">Address</span>, and <span class="guimenu">Hardware</span> tabs. For
      more information about the configuration options, see
      <a class="xref" href="#sec.network.yast.netcard.change" title="18.4.1.2. Changing the Configuration of a Network Card">Section 18.4.1.2, “Changing the Configuration of a Network Card”</a>.
     </p></li><li class="step "><p>
      If you selected <span class="guimenu">Wireless</span> as the device type of the
      interface, configure the wireless connection in the next dialog.
     </p></li><li class="step "><p>
      To activate the new network configuration, confirm the settings.
     </p></li></ol></div></div></div><div class="sect3 " id="sec.network.yast.change.host"><div class="titlepage"><div><div><h4 class="title" id="sec.network.yast.change.host"><span class="number">18.4.1.4 </span><span class="name">Configuring Host Name and DNS</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.host">#</a></h4></div></div></div><p>
    If you did not change the network configuration during installation and the
    Ethernet card was already available, a host name was automatically
    generated for your computer and DHCP was activated. The same applies to the
    name service information your host needs to integrate into a network
    environment. If DHCP is used for network address setup, the list of domain
    name servers is automatically filled with the appropriate data. If a static
    setup is preferred, set these values manually.
   </p><p>
    To change the name of your computer and adjust the name server search list,
    proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Go to the <span class="guimenu">Network Settings</span> › <span class="guimenu">Hostname/DNS</span> tab in the
      <span class="guimenu">System</span> module in YaST.
     </p></li><li class="step "><p>
      Enter the <span class="guimenu">Hostname</span> and, if needed, the <span class="guimenu">Domain
      Name</span>. The domain is especially important if the machine is a
      mail server. Note that the host name is global and applies to all set
      network interfaces.
     </p><p>
      If you are using DHCP to get an IP address, the host name of your
      computer will be automatically set by the DHCP. You should disable this
      behavior if you connect to different networks, because they may assign
      different host names and changing the host name at runtime may confuse
      the graphical desktop. To disable using DHCP to get an IP address
      deactivate <span class="guimenu">Change Hostname via DHCP</span>.
     </p><p>
      <span class="guimenu">Assign Hostname to Loopback IP</span> associates your host
      name with <code class="literal">127.0.0.2</code> (loopback) IP address in
      <code class="filename">/etc/hosts</code>. This is a useful option if you want to
      have the host name resolvable at all times, even without active network.
     </p></li><li class="step "><p>
      In <span class="guimenu">Modify DNS Configuration</span>, select the way the DNS
      configuration (name servers, search list, the content of the
      <code class="filename">/etc/resolv.conf</code> file) is modified.
     </p><p>
      If the <span class="guimenu">Use Default Policy</span> option is selected, the
      configuration is handled by the <code class="command">netconfig</code> script which
      merges the data defined statically (with YaST or in the configuration
      files) with data obtained dynamically (from the DHCP client or
      NetworkManager). This default policy is usually sufficient.
     </p><p>
      If the <span class="guimenu">Only Manually</span> option is selected,
      <code class="command">netconfig</code> is not allowed to modify the
      <code class="filename">/etc/resolv.conf</code> file. However, this file can be
      edited manually.
     </p><p>
      If the <span class="guimenu">Custom Policy</span> option is selected, a
      <span class="guimenu">Custom Policy Rule</span> string defining the merge policy
      should be specified. The string consists of a comma-separated list of
      interface names to be considered a valid source of settings. Except for
      complete interface names, basic wild cards to match multiple interfaces
      are allowed, as well. For example, <code class="literal">eth* ppp?</code> will
      first target all eth and then all ppp0-ppp9 interfaces. There are two
      special policy values that indicate how to apply the static settings
      defined in the <code class="filename">/etc/sysconfig/network/config</code> file:
     </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749242288"><span class="term "><code class="literal">STATIC</code>
       </span></dt><dd><p>
         The static settings need to be merged together with the dynamic
         settings.
        </p></dd><dt id="idm139698749240128"><span class="term "><code class="literal">STATIC_FALLBACK</code>
       </span></dt><dd><p>
         The static settings are used only when no dynamic configuration is
         available.
        </p></dd></dl></div><p>
      For more information, see the man page of <code class="command">netconfig</code>(8)
      (<code class="command">man 8 netconfig</code>).
     </p></li><li class="step "><p>
      Enter the <span class="guimenu">Name Servers</span> and fill in the <span class="guimenu">Domain
      Search</span> list. Name servers must be specified by IP addresses,
      such as 192.168.1.116, not by host names. Names specified in the
      <span class="guimenu">Domain Search</span> tab are domain names used for resolving
      host names without a specified domain. If more than one <span class="guimenu">Domain
      Search</span> is used, separate domains with commas or white space.
     </p></li><li class="step "><p>
      To activate the configuration, confirm the settings.
     </p></li></ol></div></div><p>
    It is also possible to edit the host name using YaST from the command
    line. The changes made by YaST take effect immediately (which is not the
    case when editing the <code class="filename">/etc/HOSTNAME</code> file manually). To
    change the host name, use the following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>yast dns edit hostname=<em class="replaceable ">HOSTNAME</em></pre></div><p>
    To change the name servers, use the following commands:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>yast dns edit nameserver1=192.168.1.116
<code class="prompt root">root # </code>yast dns edit nameserver2=192.168.1.117
<code class="prompt root">root # </code>yast dns edit nameserver3=192.168.1.118</pre></div></div><div class="sect3 " id="sec.network.yast.change.route"><div class="titlepage"><div><div><h4 class="title" id="sec.network.yast.change.route"><span class="number">18.4.1.5 </span><span class="name">Configuring Routing</span> <a title="Permalink" class="permalink" href="#sec.network.yast.change.route">#</a></h4></div></div></div><p>
    To make your machine communicate with other machines and other networks,
    routing information must be given to make network traffic take the correct
    path. If DHCP is used, this information is automatically provided. If a
    static setup is used, this data must be added manually.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      In YaST go to <span class="guimenu">Network Settings</span> › <span class="guimenu">Routing</span>.
     </p></li><li class="step "><p>
      Enter the IP address of the <span class="guimenu">Default Gateway</span> (IPv4 and
      IPv6 if necessary). The default gateway matches every possible
      destination, but if a routing table entry exists that matches the
      required address, this will be used instead of the default route via the
      Default Gateway.
     </p></li><li class="step "><p>
      More entries can be entered in the <span class="guimenu">Routing Table</span>.
      Enter the <span class="guimenu">Destination</span> network IP address,
      <span class="guimenu">Gateway</span> IP address and the <span class="guimenu">Netmask</span>.
      Select the <span class="guimenu">Device</span> through which the traffic to the
      defined network will be routed (the minus sign stands for any device).
      
      To omit any of these values, use the minus sign <code class="literal">-</code>. To
      enter a default gateway into the table, use <code class="literal">default</code> in
      the <span class="guimenu">Destination</span> field.
     </p><div id="idm139698749215504" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Route Prioritization</h6><p>
       If more default routes are used, it is possible to specify the metric
       option to determine which route has a higher priority. To specify the
       metric option, enter <code class="option">- metric
       <em class="replaceable ">NUMBER</em></code> in
       <span class="guimenu">Options</span>. The route with the highest metric is used as
       default. If the network device is disconnected, its route will be
       removed and the next one will be used. However, the current kernel does
       not use metric in static routing, only routing daemons like
       <code class="systemitem">multipathd</code> do.
      </p></div></li><li class="step "><p>
      If the system is a router, enable <span class="guimenu">IPv4 Forwarding</span> and
      <span class="guimenu">IPv6 Forwarding</span> in the <span class="guimenu">Network
      Settings</span> as needed.
     </p></li><li class="step "><p>
      To activate the configuration, confirm the settings.
     </p></li></ol></div></div></div></div></div><div class="sect1 " id="sec.network.nm"><div class="titlepage"><div><div><h2 class="title" id="sec.network.nm"><span class="number">18.5 </span><span class="name">NetworkManager</span> <a title="Permalink" class="permalink" href="#sec.network.nm">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>networkmanager.xml</li><li><span class="ds-label">ID: </span>sec.network.nm</li></ul></div></div></div></div><p>
  NetworkManager is the ideal solution for laptops and other portable computers.
  With NetworkManager, you do not need to worry about configuring network
  interfaces and switching between networks when you are moving.
 </p><div class="sect2 " id="sec.network.nm.comparison"><div class="titlepage"><div><div><h3 class="title" id="sec.network.nm.comparison"><span class="number">18.5.1 </span><span class="name">NetworkManager and <code class="command">wicked</code></span> <a title="Permalink" class="permalink" href="#sec.network.nm.comparison">#</a></h3></div></div></div><p>
   However, NetworkManager is not a suitable solution for all cases, so you can
   still choose between the <code class="command">wicked</code> controlled method for
   managing network connections and NetworkManager. If you want to manage your
   network connection with NetworkManager, enable NetworkManager in the YaST Network
   Settings module as described in <a class="xref" href="#sec.nm.activate" title="26.2. Enabling or Disabling NetworkManager">Section 26.2, “Enabling or Disabling NetworkManager”</a> and
   configure your network connections with NetworkManager. For a list of use cases
   and a detailed description of how to configure and use NetworkManager, refer to
   <a class="xref" href="#cha.nm" title="Chapter 26. Using NetworkManager">Chapter 26, <em>Using NetworkManager</em></a>.
  </p><p>
   Some differences between wicked and NetworkManager:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749198560"><span class="term "><code class="systemitem">root</code> Privileges</span></dt><dd><p>
      If you use NetworkManager for network setup, you can easily switch, stop or
      start your network connection at any time from within your desktop
      environment using an applet. NetworkManager also makes it possible to change
      and configure wireless card connections without requiring
      <code class="systemitem">root</code> privileges. For this reason, NetworkManager is the ideal
      solution for a mobile workstation.
     </p><p>
      <code class="command">wicked</code> also provides some ways to switch, stop or
      start the connection with or without user intervention, like
      user-managed devices. However, this always requires <code class="systemitem">root</code>
      privileges to change or configure a network device. This is often a
      problem for mobile computing, where it is not possible to preconfigure
      all the connection possibilities.
     </p></dd><dt id="idm139698749193184"><span class="term ">Types of Network Connections</span></dt><dd><p>
      Both <code class="command">wicked</code> and NetworkManager can handle network
      connections with a wireless network (with WEP, WPA-PSK, and
      WPA-Enterprise access) and wired networks using DHCP and static
      configuration. They also support connection through dial-up and VPN.
      With NetworkManager you can also connect a mobile broadband (3G) modem
      or set up a DSL connection, which is not possible with the traditional
      configuration.
     </p><p>
      NetworkManager tries to keep your computer connected at all times using the
      best connection available. If the network cable is accidentally
      disconnected, it tries to reconnect. It can find the network with the
      best signal strength from the list of your wireless connections and
      automatically use it to connect. To get the same functionality with
      <code class="command">wicked</code>, more configuration effort is required.
     </p></dd></dl></div></div><div class="sect2 " id="sec.network.nm.functionality"><div class="titlepage"><div><div><h3 class="title" id="sec.network.nm.functionality"><span class="number">18.5.2 </span><span class="name">NetworkManager Functionality and Configuration Files</span> <a title="Permalink" class="permalink" href="#sec.network.nm.functionality">#</a></h3></div></div></div><p>
   The individual network connection settings created with NetworkManager are
   stored in configuration profiles. The <span class="emphasis"><em>system</em></span>
   connections configured with either NetworkManager or YaST are saved in
   <code class="filename">/etc/NetworkManager/system-connections/*</code> or in
   <code class="filename">/etc/sysconfig/network/ifcfg-*</code>. For GNOME, all
   user-defined connections are stored in GConf.
  </p><p>
   In case no profile is configured, NetworkManager automatically creates one and
   names it <code class="literal">Auto $INTERFACE-NAME</code>. That is made in an
   attempt to work without any configuration for as many cases as (securely)
   possible. If the automatically created profiles do not suit your needs,
   use the network connection configuration dialogs provided by GNOME to
   modify them as desired. For more information, see
   <a class="xref" href="#sec.nm.configure" title="26.3. Configuring Network Connections">Section 26.3, “Configuring Network Connections”</a>.
  </p></div><div class="sect2 " id="sec.network.nm.policykit"><div class="titlepage"><div><div><h3 class="title" id="sec.network.nm.policykit"><span class="number">18.5.3 </span><span class="name">Controlling and Locking Down NetworkManager Features</span> <a title="Permalink" class="permalink" href="#sec.network.nm.policykit">#</a></h3></div></div></div><p>
   On centrally administered machines, certain NetworkManager features can be
   controlled or disabled with PolKit, for example if a user is allowed to
   modify administrator defined connections or if a user is allowed to
   define his own network configurations. To view or change the respective
   NetworkManager policies, start the graphical <span class="guimenu">Authorizations</span>
   tool for PolKit. In the tree on the left side, find them below the
   <span class="guimenu">network-manager-settings</span> entry. For an introduction to
   PolKit and details on how to use it, refer to
   <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 9 “Authorization with PolKit”</span>.
  </p></div></div><div class="sect1 " id="sec.network.manconf"><div class="titlepage"><div><div><h2 class="title" id="sec.network.manconf"><span class="number">18.6 </span><span class="name">Configuring a Network Connection Manually</span> <a title="Permalink" class="permalink" href="#sec.network.manconf">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_wicked.xml</li><li><span class="ds-label">ID: </span>sec.network.manconf</li></ul></div></div></div></div><p>
  Manual configuration of the network software should be the last alternative.
  Using YaST is recommended. However, this background information about the
  network configuration can also assist your work with YaST.
 </p><div class="sect2 " id="sec.network.manconf.wicked"><div class="titlepage"><div><div><h3 class="title" id="sec.network.manconf.wicked"><span class="number">18.6.1 </span><span class="name">The <code class="command">wicked</code> Network Configuration</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.wicked">#</a></h3></div></div></div><p>
   The tool and library called <code class="command">wicked</code> provides a new
   framework for network configuration.
  </p><p>
   One of the challenges with traditional network interface management is that
   different layers of network management get jumbled together into one single
   script, or at most two different scripts. These scripts interact with each other in a
   way that is not well-defined. This leads to unpredictable issues, obscure
   constraints and conventions, etc. Several layers of special hacks for a variety of different scenarios increase the maintenance
   burden. Address configuration protocols are being used that are implemented
   via daemons like dhcpcd, which interact rather poorly with the rest of the
   infrastructure. Funky interface naming schemes that require heavy udev
   support are introduced to achieve persistent identification of interfaces.
  </p><p>
   The idea of wicked is to decompose the problem in several ways. None of them
   is entirely novel, but trying to put ideas from different projects together
   is hopefully going to create a better solution overall.
  </p><p>
   One approach is to use a client/server model. This allows wicked to define
   standardized facilities for things like address configuration that are well
   integrated with the overall framework. For example, using a specific address
   configuration, the administrator may request that an interface should be
   configured via DHCP or IPv4 zeroconf. In this case, the address configuration
   service simply obtains the lease from its server and passes it on to the
   wicked server process that installs the requested addresses and routes.
  </p><p>
   The other approach to decomposing the problem is to enforce the layering
   aspect. For any type of network interface, it is possible to define a dbus
   service that configures the network interface's device layer—a VLAN, a
   bridge, a bonding, or a paravirtualized device. Common functionality, such
   as address configuration, is implemented by joint services that are layered
   on top of these device specific services without having to implement them
   specifically.
  </p><p>
   The wicked framework implements these two aspects by using a variety of dbus
   services, which get attached to a network interface depending on its type.
   Here is a rough overview of the current object hierarchy in wicked.
  </p><p>
   Each network interface is represented via a child object of
   <code class="systemitem">/org/opensuse/Network/Interfaces</code>. The name of the
   child object is given by its ifindex. For example, the loopback interface,
   which usually gets ifindex 1, is
   <code class="systemitem">/org/opensuse/Network/Interfaces/1</code>, the first
   Ethernet interface registered is
   <code class="systemitem">/org/opensuse/Network/Interfaces/2</code>.
  </p><p>
   Each network interface has a <span class="quote">“<span class="quote">class</span>”</span> associated with it, which
   is used to select the dbus interfaces it supports. By default, each network
   interface is of class <code class="literal">netif</code>, and
   <code class="systemitem">wickedd</code> will automatically
   attach all interfaces compatible with this class. In the current
   implementation, this includes the following interfaces:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698749163248"><span class="term ">org.opensuse.Network.Interface</span></dt><dd><p>
      Generic network interface functions, such as taking the link up or down,
      assigning an MTU, etc.
     </p></dd><dt id="idm139698749161344"><span class="term ">org.opensuse.Network.Addrconf.ipv4.dhcp, </span><span class="term ">org.opensuse.Network.Addrconf.ipv6.dhcp, </span><span class="term ">org.opensuse.Network.Addrconf.ipv4.auto</span></dt><dd><p>
      Address configuration services for DHCP,

      IPv4 zeroconf, etc.
     </p></dd></dl></div><p>
   Beyond this, network interfaces may require or offer special configuration
   mechanisms. For an Ethernet device, for example, you should be able to
   control the link speed, offloading of checksumming, etc. To achieve this,
   Ethernet devices have a class of their own, called
   <code class="literal">netif-ethernet</code>, which is a subclass of
   <code class="literal">netif</code>. As a consequence, the dbus interfaces assigned to
   an Ethernet interface include all the services listed above, plus the
   <code class="systemitem">org.opensuse.Network.Ethernet</code> service available only to objects belonging to the <code class="literal">netif-ethernet</code>
   class.
  </p><p>
   Similarly, there exist classes for interface types like bridges, VLANs,
   bonds, or infinibands.
  </p><p>
   How do you interact with an interface like VLAN (which is really a virtual network interface that
   sits on top of an Ethernet device) that needs to be created
   first? For this, wicked defines factory
   interfaces, such as
   <code class="systemitem">org.opensuse.Network.VLAN.Factory</code>. Such a factory
   interface offers a single function that lets you create an interface of the
   requested type. These factory interfaces are attached to the
   <code class="systemitem">/org/opensuse/Network/Interfaces</code> list node.
  </p><div class="sect3 " id="sec.network.manconf.supported"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.supported"><span class="number">18.6.1.1 </span><span class="name"><code class="literal">wicked</code> Architecture and Features</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.supported">#</a></h4></div></div></div><p>
    The <code class="literal">wicked</code> service comprises several parts as depicted
    in <a class="xref" href="#wicked.architecture" title="wicked architecture">Figure 18.4, “<code class="literal">wicked</code> architecture”</a>.
   </p><div class="figure" id="wicked.architecture"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/wicked_scheme.png"><img src="images/wicked_scheme.png" width="" alt="wicked architecture" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 18.4: </span><span class="name"><code class="literal">wicked</code> architecture </span><a title="Permalink" class="permalink" href="#wicked.architecture">#</a></h6></div></div><p>
    <code class="literal">wicked</code> currently supports the following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Configuration file back-ends to parse SUSE style
      <code class="filename">/etc/sysconfig/network</code> files.
     </p></li><li class="listitem "><p>
      An internal configuration back-end to represent network interface
      configuration in XML.


     </p></li><li class="listitem "><p>
      Bring up and shutdown of <span class="quote">“<span class="quote">normal</span>”</span> network interfaces such as
      Ethernet or InfiniBand, VLAN, bridge, bonds, tun, tap, dummy, macvlan,
      macvtap, hsi, qeth, iucv, and wireless (currently limited to one
      wpa-psk/eap network) devices.
     </p></li><li class="listitem "><p>
      A built-in DHCPv4 client and a built-in DHCPv6 client.
     </p></li><li class="listitem "><p>
      The nanny daemon (enabled by default) helps to automatically bring up
      configured interfaces when the device is available (interface
      hotplugging) and set up the IP configuration when a link (carrier) is
      detected. See <a class="xref" href="#sec.network.manconf.using_nanny" title="18.6.1.3. Nanny">Section 18.6.1.3, “Nanny”</a> for more
      information.
     </p></li><li class="listitem "><p>
      <code class="literal">wicked</code> was implemented as a group of DBus services
      that are integrated with systemd. So the usual
      <code class="command">systemctl</code> commands will apply to
      <code class="literal">wicked</code>.
     </p></li></ul></div></div><div class="sect3 " id="sec.network.manconf.using_wicked"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.using_wicked"><span class="number">18.6.1.2 </span><span class="name">Using <code class="literal">wicked</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.using_wicked">#</a></h4></div></div></div><p>
    On SUSE Linux Enterprise, <code class="literal">wicked</code> is running by default. If you want
    to check what is currently enabled and whether it is running, call:
   </p><p>
    On openSUSE Leap <code class="literal">wicked</code> is running by default on
    desktop or server hardware. On mobile hardware NetworkManager is running by
    default. If you want to check what is currently enabled and whether it is
    running, call:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl status network</pre></div><p>
    If <code class="literal">wicked</code> is enabled, you will see something along these
    lines:
   </p><div class="verbatim-wrap"><pre class="screen">wicked.service - wicked managed network interfaces
    Loaded: loaded (/usr/lib/systemd/system/wicked.service; enabled)
    ...</pre></div><p>
    In case something different is running (for example, NetworkManager) and you want to
    switch to <code class="literal">wicked</code>, first stop what is running and then
    enable <code class="literal">wicked</code>:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl is-active network &amp;&amp; \
systemctl stop      network
systemctl enable --force wicked</pre></div><p>
    This enables the wicked services, creates the
    <code class="filename">network.service</code> to <code class="filename">wicked.service</code>
    alias link, and starts the network at the next boot.
   </p><p>
    Starting the server process:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl start wickedd</pre></div><p>
    This starts <code class="command">wickedd</code> (the main server) and associated
    supplicants:
   </p><div class="verbatim-wrap"><pre class="screen">/usr/lib/wicked/bin/wickedd-auto4 --systemd --foreground
/usr/lib/wicked/bin/wickedd-dhcp4 --systemd --foreground
/usr/lib/wicked/bin/wickedd-dhcp6 --systemd --foreground
/usr/sbin/wickedd --systemd --foreground
/usr/sbin/wickedd-nanny --systemd --foreground</pre></div><p>
    Then bringing up the network:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl start wicked</pre></div><p>
    Alternatively use the <code class="filename">network.service</code> alias:
   </p><div class="verbatim-wrap"><pre class="screen">systemctl start network</pre></div><p>
    These commands are using the default or system configuration sources as
    defined in <code class="filename">/etc/wicked/client.xml</code>.
   </p><p>
    To enable debugging, set <code class="literal">WICKED_DEBUG</code> in
    <code class="filename">/etc/sysconfig/network/config</code>, for example:
   </p><div class="verbatim-wrap"><pre class="screen">WICKED_DEBUG="all"</pre></div><p>
    Or, to omit some:
   </p><div class="verbatim-wrap"><pre class="screen">WICKED_DEBUG="all,-dbus,-objectmodel,-xpath,-xml"</pre></div><p>
    Use the client utility to display interface information for all interfaces
    or the interface specified with <em class="replaceable ">IFNAME</em>:
   </p><div class="verbatim-wrap"><pre class="screen">wicked show all
wicked show <em class="replaceable ">IFNAME</em></pre></div><p>
    In XML output:
   </p><div class="verbatim-wrap"><pre class="screen">wicked show-xml all
wicked show-xml <em class="replaceable ">IFNAME</em></pre></div><p>
    Bringing up one interface:
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup eth0
wicked ifup wlan0
...</pre></div><p>
    Because there is no configuration source specified, the wicked client
    checks its default sources of configuration defined in
    <code class="filename">/etc/wicked/client.xml</code>:
   </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
      <code class="literal">firmware:</code> iSCSI Boot Firmware Table (iBFT)
     </p></li><li class="listitem "><p>
      <code class="literal">compat:</code> <code class="literal">ifcfg</code>
      files—implemented for compatibility
     </p></li></ol></div><p>
    Whatever <code class="literal">wicked</code> gets from those sources for a given
    interface is applied. The intended order of importance is
    <code class="literal">firmware</code>, then <code class="literal">compat</code>—this may
    be changed in the future.
   </p><p>
    For more information, see the <code class="command">wicked</code> man page.
   </p></div><div class="sect3 " id="sec.network.manconf.using_nanny"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.using_nanny"><span class="number">18.6.1.3 </span><span class="name">Nanny</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.using_nanny">#</a></h4></div></div></div><p>
    Nanny is an event and policy driven daemon that is responsible for
    asynchronous or unsolicited scenarios such as hotplugging devices. Thus the
    nanny daemon helps with starting or restarting delayed or temporarily gone
    devices. Nanny monitors device and link changes, and integrates new devices
    defined by the current policy set. Nanny continues to set up even if
    <code class="command">ifup</code> already exited because of specified timeout
    constraints.
   </p><p>
    By default, the nanny daemon is active on the system. It is enabled in the
    <code class="filename">/etc/wicked/common.xml</code> configuration file:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;config&gt;
  ...
  &lt;use-nanny&gt;true&lt;/use-nanny&gt;
&lt;/config&gt;</pre></div><p>
    This setting causes ifup and ifreload to apply a policy with the effective
    configuration to the nanny daemon; then, nanny configures
    <code class="systemitem">wickedd</code> and thus ensures
    hotplug support. It waits in the background for events or changes (such as
    new devices or carrier on).
   </p></div><div class="sect3 " id="sec.network.manconf.multiple"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.multiple"><span class="number">18.6.1.4 </span><span class="name">Bringing Up Multiple Interfaces</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.multiple">#</a></h4></div></div></div><p>
    For bonds and bridges, it may make sense to define the entire device
    topology in one file (ifcfg-bondX), and bring it up in one go. wicked then
    can bring up the whole configuration if you specify the top level interface
    names (of the bridge or bond):
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup br0</pre></div><p>
    This command automatically sets up the bridge and its dependencies in the
    appropriate order without the need to list the dependencies (ports, etc.)
    separately.
   </p><p>
    To bring up multiple interfaces in one command:
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup bond0 br0 br1 br2</pre></div><p>
    Or also all interfaces:
   </p><div class="verbatim-wrap"><pre class="screen">wicked ifup all</pre></div></div><div class="sect3 " id="sec.network.manconf.tunnel"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.tunnel"><span class="number">18.6.1.5 </span><span class="name">Using Tunnels with Wicked</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.tunnel">#</a></h4></div></div></div><p>
    When you need to use tunnels with Wicked, the <code class="envar">TUNNEL_DEVICE</code>
    is used for this. It permits to specify an optional device name to bind
    the tunnel to the device. The tunneled packets will only be routed via this
    device.
   </p><p>
    For more information, refer to <code class="command">man 5 ifcfg-tunnel</code>.
   </p></div><div class="sect3 " id="sec.network.manconf.incremental"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.incremental"><span class="number">18.6.1.6 </span><span class="name">Handling Incremental Changes</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.incremental">#</a></h4></div></div></div><p>
    With <code class="command">wicked</code>, there is no need to actually take down an
    interface to reconfigure it (unless it is required by the kernel). For
    example, to add another IP address or route to a statically configured
    network interface, add the IP address to the interface definition, and do
    another <span class="quote">“<span class="quote">ifup</span>”</span> operation. The server will try hard to update
    only those settings that have changed. This applies to link-level options
    such as the device MTU or the MAC address, and network-level settings, such
    as addresses, routes, or even the address configuration mode (for example,
    when moving from a static configuration to DHCP).
   </p><p>
    Things get tricky of course with virtual interfaces combining several real
    devices such as bridges or bonds. For bonded devices, it is not possible to
    change certain parameters while the device is up. Doing that will result in
    an error.
   </p><p>
    However, what should still work, is the act of adding or removing the child
    devices of a bond or bridge, or choosing a bond's primary interface.
   </p></div><div class="sect3 " id="sec.network.manconf.address_config"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.address_config"><span class="number">18.6.1.7 </span><span class="name">Wicked Extensions: Address Configuration</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.address_config">#</a></h4></div></div></div><p>
    <code class="command">wicked</code> is designed to be extensible with shell scripts.
    These extensions can be defined in the <code class="filename">config.xml</code>
    file.
   </p><p>
    Currently, several classes of extensions are supported:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      link configuration: these are scripts responsible for setting up a
      device's link layer according to the configuration provided by the
      client, and for tearing it down again.
     </p></li><li class="listitem "><p>
      address configuration: these are scripts responsible for managing a
      device's address configuration. Usually address configuration and DHCP
      are managed by <code class="command">wicked</code> itself, but can be implemented
      by means of extensions.
     </p></li><li class="listitem "><p>
      firewall extension: these scripts can apply firewall rules.
     </p></li></ul></div><p>
    Typically, extensions have a start and a stop command, an optional
    <span class="quote">“<span class="quote">pid file</span>”</span>, and a set of environment variables that get passed
    to the script.
   </p><p>
    To illustrate how this is supposed to work, look at a firewall extension
    defined in <code class="filename">etc/server.xml</code>:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;dbus-service interface="org.opensuse.Network.Firewall"&gt;
 &lt;action name="firewallUp"   command="/etc/wicked/extensions/firewall up"/&gt;
 &lt;action name="firewallDown" command="/etc/wicked/extensions/firewall down"/&gt;

 &lt;!-- default environment for all calls to this extension script --&gt;
 &lt;putenv name="WICKED_OBJECT_PATH" value="$object-path"/&gt;
 &lt;putenv name="WICKED_INTERFACE_NAME" value="$property:name"/&gt;
 &lt;putenv name="WICKED_INTERFACE_INDEX" value="$property:index"/&gt;
&lt;/dbus-service&gt;</pre></div><p>
    The extension is attached to the
    <code class="sgmltag-starttag">&lt;dbus-service&gt;</code>
    tag and defines commands to execute for the actions of this interface.
    Further, the declaration can define and initialize environment variables
    passed to the actions.
   </p></div><div class="sect3 " id="sec.network.manconf.configuration_files"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.configuration_files"><span class="number">18.6.1.8 </span><span class="name">Wicked Extensions: Configuration Files</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.configuration_files">#</a></h4></div></div></div><p>
    You can extend the handling of configuration files with scripts as well.
    For example, DNS updates from leases are ultimately handled by the
    <code class="filename">extensions/resolver</code> script, with behavior configured
    in <code class="filename">server.xml</code>:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;system-updater name="resolver"&gt;
 &lt;action name="backup" command="/etc/wicked/extensions/resolver backup"/&gt;
 &lt;action name="restore" command="/etc/wicked/extensions/resolver restore"/&gt;
 &lt;action name="install" command="/etc/wicked/extensions/resolver install"/&gt;
 &lt;action name="remove" command="/etc/wicked/extensions/resolver remove"/&gt;
&lt;/system-updater&gt;</pre></div><p>
    When an update arrives in <code class="systemitem">wickedd</code>, the system
    updater routines parse the lease and call the appropriate commands
    (<code class="literal">backup</code>, <code class="literal">install</code>, etc.) in the
    resolver script. This in turn configures the DNS settings using
    <code class="command">/sbin/netconfig</code>, or by manually writing
    <code class="filename">/etc/resolv.conf</code> as a fallback.
   </p></div></div><div class="sect2 " id="sec.network.manconf.files"><div class="titlepage"><div><div><h3 class="title" id="sec.network.manconf.files"><span class="number">18.6.2 </span><span class="name">Configuration Files</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_config_files.xml</li><li><span class="ds-label">ID: </span>sec.network.manconf.files</li></ul></div></div></div></div><p>
  This section provides an overview of the network configuration files and
  explains their purpose and the format used.
 </p><div class="sect3 " id="wicked.configuration.common.xml"><div class="titlepage"><div><div><h4 class="title" id="wicked.configuration.common.xml"><span class="number">18.6.2.1 </span><span class="name"><code class="filename">/etc/wicked/common.xml</code></span> <a title="Permalink" class="permalink" href="#wicked.configuration.common.xml">#</a></h4></div></div></div><p>
   The <code class="filename">/etc/wicked/common.xml</code> file contains common
   definitions that should be used by all applications. It is sourced/included
   by the other configuration files in this directory. Although you can use
   this file to enable debugging across all
   <code class="literal">wicked</code> components, we recommend to use the file
   <code class="filename">/etc/wicked/local.xml</code> for this purpose. After applying
   maintenance updates you might lose your changes as the
   <code class="filename">/etc/wicked/common.xml</code> might be overwritten. The
   <code class="filename">/etc/wicked/common.xml</code> file includes the
   <code class="filename">/etc/wicked/local.xml</code> in the default installation, thus
   you typically do not need to modify the
   <code class="filename">/etc/wicked/common.xml</code>.
  </p><p>
   In case you want to disable <code class="literal">nanny</code> by setting the
   <code class="literal">&lt;use-nanny&gt;</code> to <code class="literal">false</code>, restart
   the <code class="literal">wickedd.service</code> and then run the following command to
   apply all configurations and policies:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> wicked ifup all</pre></div><div id="idm139698749055296" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Configuration Files</h6><p>
    The <code class="literal">wickedd</code>, <code class="literal">wicked</code>, or
    <code class="literal">nanny</code> programs try to read
    <code class="filename">/etc/wicked/common.xml</code> if their own configuration
    files do not exist.
   </p></div></div><div class="sect3 " id="wicked.configuration.server.xml"><div class="titlepage"><div><div><h4 class="title" id="wicked.configuration.server.xml"><span class="number">18.6.2.2 </span><span class="name"><code class="filename">/etc/wicked/server.xml</code></span> <a title="Permalink" class="permalink" href="#wicked.configuration.server.xml">#</a></h4></div></div></div><p>
   The file <code class="filename">/etc/wicked/server.xml</code> is read by the
   <code class="literal">wickedd</code> server process at start-up. The file stores
   extensions to the <code class="filename">/etc/wicked/common.xml</code>. On top of
   that this file configures handling of a resolver and receiving information
   from <code class="literal">addrconf</code> supplicants, for example DHCP.
  </p><p>
   We recommend to add changes required to this file into a separate file
   <code class="filename">/etc/wicked/server-local.xml</code>, that gets included by
   <code class="filename">/etc/wicked/server.xml</code>. By using a separate file
   you avoid overwriting of your changes during maintenance updates.
  </p></div><div class="sect3 " id="wicked.configuration.client.xml"><div class="titlepage"><div><div><h4 class="title" id="wicked.configuration.client.xml"><span class="number">18.6.2.3 </span><span class="name"><code class="filename">/etc/wicked/client.xml</code></span> <a title="Permalink" class="permalink" href="#wicked.configuration.client.xml">#</a></h4></div></div></div><p>
   The <code class="filename">/etc/wicked/client.xml</code> is used by the
   <code class="command">wicked</code> command. The file specifies the location of a
   script used when discovering devices managed by ibft and configures
   locations of network interface configurations.
  </p><p>
   We recommend to add changes required to this file into a separate file
   <code class="filename">/etc/wicked/client-local.xml</code>, that gets included by
   <code class="filename">/etc/wicked/server.xml</code>. By using a separate file
   you avoid overwriting of your changes during maintenance updates.
  </p></div><div class="sect3 " id="wicked.configuration.nanny.xml"><div class="titlepage"><div><div><h4 class="title" id="wicked.configuration.nanny.xml"><span class="number">18.6.2.4 </span><span class="name"><code class="filename">/etc/wicked/nanny.xml</code></span> <a title="Permalink" class="permalink" href="#wicked.configuration.nanny.xml">#</a></h4></div></div></div><p>
   The <code class="filename">/etc/wicked/nanny.xml</code> configures types of link
   layers. We recommend to add specific configuration into a separate file:
   <code class="filename">/etc/wicked/nanny-local.xml</code> to avoid losing the changes
   during maintenance updates.
  </p></div><div class="sect3 " id="sec.network.manconf.files.ifcfg"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.ifcfg"><span class="number">18.6.2.5 </span><span class="name"><code class="filename">/etc/sysconfig/network/ifcfg-*</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.ifcfg">#</a></h4></div></div></div><p>
   These files contain the traditional configurations for network interfaces.
   In <span class="phrase">SUSE Linux Enterprise 11</span>, this was the only supported format besides iBFT firmware.
  </p><div id="idm139698749036416" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: <code class="command">wicked</code> and the <code class="filename">ifcfg-*</code> Files</h6><p>
    <code class="command">wicked</code> reads these files if you specify the
    <code class="literal">compat:</code> prefix. According to the <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> default
    configuration in <code class="filename">/etc/wicked/client.xml</code>,
    <code class="command">wicked</code> tries these files before the XML configuration
    files in <code class="filename">/etc/wicked/ifconfig</code>.
   </p><p>
    The <code class="option">--ifconfig</code> switch is provided mostly for testing only.
    If specified, default configuration sources defined in
    <code class="filename">/etc/wicked/ifconfig</code> are not applied.
   </p></div><p>
   The <code class="filename">ifcfg-*</code> files include information such as the start
   mode and the IP address. Possible parameters are described in the manual
   page of <code class="systemitem">ifup</code>. Additionally, most variables from the
   <code class="filename">dhcp</code> and <code class="filename">wireless</code> files can be
   used in the <code class="filename">ifcfg-*</code> files if a general setting should
   be used for only one interface. However, most of the
   <code class="filename">/etc/sysconfig/network/config</code> variables are global and
   cannot be overridden in ifcfg-files. For example,
   <code class="systemitem">NETCONFIG_*</code> variables are global.
  </p><p>

   For configuring <code class="systemitem">macvlan</code> and
   <code class="systemitem">macvtab</code> interfaces, see the
   <code class="systemitem">ifcfg-macvlan</code> and
   <code class="systemitem">ifcfg-macvtap</code> man pages. For example, for a macvlan
   interface provide a <code class="filename">ifcfg-macvlan0</code> with settings as
   follows:
  </p><div class="verbatim-wrap"><pre class="screen">STARTMODE='auto'
MACVLAN_DEVICE='eth0'
#MACVLAN_MODE='vepa'
#LLADDR=02:03:04:05:06:aa</pre></div><p>
   For <code class="filename">ifcfg.template</code>, see
   <a class="xref" href="#sec.network.manconf.files.config-etc" title="18.6.2.6. /etc/sysconfig/network/config, /etc/sysconfig/network/dhcp, and /etc/sysconfig/network/wireless">Section 18.6.2.6, “<code class="filename">/etc/sysconfig/network/config</code>, <code class="filename">/etc/sysconfig/network/dhcp</code>, and <code class="filename">/etc/sysconfig/network/wireless</code>”</a>.
  </p></div><div class="sect3 " id="sec.network.manconf.files.config-etc"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.config-etc"><span class="number">18.6.2.6 </span><span class="name"><code class="filename">/etc/sysconfig/network/config</code>, <code class="filename">/etc/sysconfig/network/dhcp</code>, and <code class="filename">/etc/sysconfig/network/wireless</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.config-etc">#</a></h4></div></div></div><p>
   The file <code class="filename">config</code> contains general settings for the
   behavior of <code class="command">ifup</code>, <code class="command">ifdown</code> and
   <code class="command">ifstatus</code>. <code class="filename">dhcp</code> contains settings for
   DHCP and <code class="filename">wireless</code> for wireless LAN cards. The variables
   in all three configuration files are commented. Some variables from
   <code class="filename">/etc/sysconfig/network/config</code> can also be used in
   <code class="filename">ifcfg-*</code> files, where they are given a higher priority.
   The <code class="filename">/etc/sysconfig/network/ifcfg.template</code> file lists
   variables that can be specified in a per interface scope. However, most of
   the <code class="filename">/etc/sysconfig/network/config</code> variables are global
   and cannot be overridden in ifcfg-files. For example,
   <code class="systemitem">NETWORKMANAGER</code> or
   <code class="systemitem">NETCONFIG_*</code> variables are global.
  </p><div id="idm139698749012144" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Using DHCPv6</h6><p>
    In <span class="phrase">SUSE Linux Enterprise 11</span>, DHCPv6 used to work even on networks where IPv6 Router
    Advertisements (RAs) were not configured properly. Starting with <span class="phrase">SUSE Linux Enterprise 12</span>,
    DHCPv6 will correctly require that at least one of the routers on the
    network sends out RAs that indicate that this network is managed by DHCPv6.
   </p><p>
    For networks where the router cannot be configured correctly, the <code class="literal">ifcfg</code> option allows the user to override this
    behavior by specifying <code class="literal">DHCLIENT6_MODE='managed'</code> in the
    <code class="literal">ifcfg</code> file.

    You can also activate this workaround with a boot parameter in the
    installation system:
   </p><div class="verbatim-wrap"><pre class="screen">ifcfg=eth0=dhcp6,DHCLIENT6_MODE=managed</pre></div></div></div><div class="sect3 " id="sec.network.manconf.files.routes"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.routes"><span class="number">18.6.2.7 </span><span class="name"><code class="filename">/etc/sysconfig/network/routes</code> and <code class="filename">/etc/sysconfig/network/ifroute-*</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.routes">#</a></h4></div></div></div><p>
   The static routing of TCP/IP packets is determined by the
   <code class="filename">/etc/sysconfig/network/routes</code> and
   <code class="filename">/etc/sysconfig/network/ifroute-*</code> files. All the static
   routes required by the various system tasks can be specified in
   <code class="filename">/etc/sysconfig/network/routes</code>: routes to a host, routes
   to a host via a gateway and routes to a network. For each interface that
   needs individual routing, define an additional configuration file:
   <code class="filename">/etc/sysconfig/network/ifroute-*</code>. Replace the wild card
   (<code class="literal">*</code>) with the name of the interface. The entries in the
   routing configuration files look like this:
  </p><div class="verbatim-wrap"><pre class="screen"># Destination     Gateway           Netmask            Interface  Options</pre></div><p>
   The route's destination is in the first column. This column may contain the
   IP address of a network or host or, in the case of
   <span class="emphasis"><em>reachable</em></span> name servers, the fully qualified network or
   host name. The network should be written in CIDR notation (address with the
   associated routing prefix-length) such as 10.10.0.0/16 for IPv4 or fc00::/7
   for IPv6 routes. The keyword <code class="literal">default</code> indicates that the
   route is the default gateway in the same address family as the gateway. For
   devices without a gateway use explicit 0.0.0.0/0 or ::/0 destinations.
  </p><p>
   The second column contains the default gateway or a gateway through which a
   host or network can be accessed.
  </p><p>
   The third column is deprecated; it used to contain the IPv4 netmask of the
   destination. For IPv6 routes, the default route, or when using a
   prefix-length (CIDR notation) in the first column, enter a dash
   (<code class="literal">-</code>) here.
  </p><p>
   The fourth column contains the name of the interface. If you leave it empty
   using a dash (<code class="literal">-</code>), it can cause unintended behavior in
   <code class="filename">/etc/sysconfig/network/routes</code>. For more information,
   see the <code class="systemitem">routes</code> man page.
  </p><p>
   An (optional) fifth column can be used to specify special options. For
   details, see the <code class="systemitem">routes</code> man page.
  </p><div class="example" id="idm139698748994576"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.5: </span><span class="name">Common Network Interfaces and Some Static Routes </span><a title="Permalink" class="permalink" href="#idm139698748994576">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># --- IPv4 routes in CIDR prefix notation:
# Destination     [Gateway]         -                  Interface
127.0.0.0/8       -                 -                  lo
204.127.235.0/24  -                 -                  eth0
default           204.127.235.41    -                  eth0
207.68.156.51/32  207.68.145.45     -                  eth1
192.168.0.0/16    207.68.156.51     -                  eth1

# --- IPv4 routes in deprecated netmask notation"
# Destination     [Dummy/Gateway]   Netmask            Interface
#
127.0.0.0         0.0.0.0           255.255.255.0      lo
204.127.235.0     0.0.0.0           255.255.255.0      eth0
default           204.127.235.41    0.0.0.0            eth0
207.68.156.51     207.68.145.45     255.255.255.255    eth1
192.168.0.0       207.68.156.51     255.255.0.0        eth1

# --- IPv6 routes are always using CIDR notation:
# Destination     [Gateway]                -           Interface
2001:DB8:100::/64 -                        -           eth0
2001:DB8:100::/32 fe80::216:3eff:fe6d:c042 -           eth0</pre></div></div></div></div><div class="sect3 " id="sec.network.manconf.files.resolv"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.resolv"><span class="number">18.6.2.8 </span><span class="name"><code class="filename">/etc/resolv.conf</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.resolv">#</a></h4></div></div></div><p>
   The domain to which the host belongs is specified in
   <code class="filename">/etc/resolv.conf</code> (keyword
   <code class="systemitem">search</code>). Up to six domains with a total of 256
   characters can be specified with the <code class="systemitem">search</code> option.
   When resolving a name that is not fully qualified, an attempt is made to
   generate one by attaching the individual <code class="systemitem">search</code>
   entries. Up to 3 name servers can be specified with the
   <code class="systemitem">nameserver</code> option, each on a line of its own.
   Comments are preceded by hash mark or semicolon signs (<code class="literal">#</code>
   or <code class="literal">;</code>). As an example, see
   <a class="xref" href="#dat.netz.etc.resolv.conf" title="/etc/resolv.conf">Example 18.6, “<code class="filename">/etc/resolv.conf</code>”</a>.
  </p><p>
   However, the <code class="filename">/etc/resolv.conf</code> should not be edited by
   hand. Instead, it is generated by the <code class="command">netconfig</code> script.
   To define static DNS configuration without using YaST, edit the
   appropriate variables manually in the
   <code class="filename">/etc/sysconfig/network/config</code> file:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748983888"><span class="term "><code class="systemitem">NETCONFIG_DNS_STATIC_SEARCHLIST</code>
    </span></dt><dd><p>
      list of DNS domain names used for host name lookup
     </p></dd><dt id="idm139698748981744"><span class="term "><code class="systemitem">NETCONFIG_DNS_STATIC_SERVERS</code>
    </span></dt><dd><p>
      list of name server IP addresses to use for host name lookup
     </p></dd><dt id="idm139698748979584"><span class="term "><code class="systemitem">NETCONFIG_DNS_FORWARDER</code>
    </span></dt><dd><p>
      the name of the DNS forwarder that needs to be configured, for example
      <code class="literal">bind</code> or <code class="literal">resolver</code>
     </p></dd><dt id="idm139698748976544"><span class="term "><code class="systemitem">NETCONFIG_DNS_RESOLVER_OPTIONS</code>
    </span></dt><dd><p>
      arbitrary options that will be written to
      <code class="filename">/etc/resolv.conf</code>, for example:
     </p><div class="verbatim-wrap"><pre class="screen">debug attempts:1 timeout:10</pre></div><p>
      For more information, see the <code class="literal">resolv.conf</code> man page.
     </p></dd><dt id="idm139698748972592"><span class="term "><code class="systemitem">NETCONFIG_DNS_RESOLVER_SORTLIST</code>
    </span></dt><dd><p>
      list of up to 10 items, for example:
     </p><div class="verbatim-wrap"><pre class="screen">130.155.160.0/255.255.240.0 130.155.0.0</pre></div><p>
      For more information, see the <code class="systemitem">resolv.conf</code> man
      page.
     </p></dd></dl></div><p>
   To disable DNS configuration using netconfig, set
   <code class="literal">NETCONFIG_DNS_POLICY=''</code>. For more information about
   <code class="command">netconfig</code>, see the <code class="systemitem">netconfig(8)</code>
   man page (<code class="command">man 8 netconfig</code>).
  </p><div class="example" id="dat.netz.etc.resolv.conf"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.6: </span><span class="name"><code class="filename">/etc/resolv.conf</code> </span><a title="Permalink" class="permalink" href="#dat.netz.etc.resolv.conf">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># Our domain
search example.com
#
# We use dns.example.com (192.168.1.116) as nameserver
nameserver 192.168.1.116</pre></div></div></div></div><div class="sect3 " id="sec.network.manconf.netconfig"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.netconfig"><span class="number">18.6.2.9 </span><span class="name"><code class="filename">/sbin/netconfig</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.netconfig">#</a></h4></div></div></div><p>
   <code class="command">netconfig</code> is a modular tool to manage additional network
   configuration settings. It merges statically defined settings with settings
   provided by autoconfiguration mechanisms as DHCP or PPP according to a
   predefined policy. The required changes are applied to the system by calling
   the netconfig modules that are responsible for modifying a configuration
   file and restarting a service or a similar action.
  </p><p>
   <code class="command">netconfig</code> recognizes three main actions. The
   <code class="command">netconfig modify</code> and <code class="command">netconfig remove</code>
   commands are used by daemons such as DHCP or PPP to provide or remove
   settings to netconfig. Only the <code class="command">netconfig update</code> command
   is available for the user:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748959200"><span class="term "><code class="command">modify</code>
    </span></dt><dd><p>
      The <code class="command">netconfig modify</code> command modifies the current
      interface and service specific dynamic settings and updates the network
      configuration. Netconfig reads settings from standard input or from a
      file specified with the <code class="option">--lease-file
      <em class="replaceable ">FILENAME</em></code> option and internally stores
      them until a system reboot (or the next modify or remove action). Already
      existing settings for the same interface and service combination are
      overwritten. The interface is specified by the <code class="option">-i
      <em class="replaceable ">INTERFACE_NAME</em></code> parameter. The service
      is specified by the <code class="option">-s
      <em class="replaceable ">SERVICE_NAME</em></code> parameter.
     </p></dd><dt id="idm139698748954016"><span class="term "><code class="command">remove</code>
    </span></dt><dd><p>
      The <code class="command">netconfig remove</code> command removes the dynamic
      settings provided by a modificatory action for the specified interface
      and service combination and updates the network configuration. The
      interface is specified by the <code class="option">-i
      <em class="replaceable ">INTERFACE_NAME</em></code> parameter. The service
      is specified by the <code class="option">-s
      <em class="replaceable ">SERVICE_NAME</em></code> parameter.
     </p></dd><dt id="idm139698748949792"><span class="term "><code class="command">update</code>
    </span></dt><dd><p>

      The <code class="command">netconfig update</code> command updates the network
      configuration using current settings. This is useful when the policy or
      the static configuration has changed. Use the <code class="option">-m
      <em class="replaceable ">MODULE_TYPE</em></code> parameter, if you want to
      update a specified service only (<code class="systemitem">dns</code>,
      <code class="systemitem">nis</code>, or <code class="systemitem">ntp</code>).
     </p></dd></dl></div><p>
   The netconfig policy and the static configuration settings are defined
   either manually or using YaST in the
   <code class="filename">/etc/sysconfig/network/config</code> file. The dynamic
   configuration settings provided by autoconfiguration tools such as DHCP or
   PPP are delivered directly by these tools with the <code class="command">netconfig
   modify</code> and <code class="command">netconfig remove</code> actions.

   When NetworkManager is enabled, netconfig (in policy mode <code class="literal">auto</code>)
   uses only NetworkManager settings, ignoring settings from any other interfaces
   configured using the traditional ifup method. If NetworkManager does not provide any
   setting, static settings are used as a fallback. A mixed usage of NetworkManager and
   the <code class="command">wicked</code> method is not supported.
  </p><p>
   For more information about <code class="command">netconfig</code>, see <code class="command">man 8
   netconfig</code>.
  </p></div><div class="sect3 " id="sec.network.manconf.hosts"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.hosts"><span class="number">18.6.2.10 </span><span class="name"><code class="filename">/etc/hosts</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.hosts">#</a></h4></div></div></div><p>
   In this file, shown in <a class="xref" href="#dat.netz.etc.hosts" title="/etc/hosts">Example 18.7, “<code class="filename">/etc/hosts</code>”</a>, IP addresses
   are assigned to host names. If no name server is implemented, all hosts to
   which an IP connection will be set up must be listed here. For each host,
   enter a line consisting of the IP address, the fully qualified host name,
   and the host name into the file. The IP address must be at the beginning of
   the line and the entries separated by blanks and tabs. Comments are always
   preceded by the <code class="literal">#</code> sign.
  </p><div class="example" id="dat.netz.etc.hosts"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.7: </span><span class="name"><code class="filename">/etc/hosts</code> </span><a title="Permalink" class="permalink" href="#dat.netz.etc.hosts">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">127.0.0.1 localhost
192.168.2.100 jupiter.example.com jupiter
192.168.2.101 venus.example.com venus</pre></div></div></div></div><div class="sect3 " id="sec.network.manconf.files.networks"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.networks"><span class="number">18.6.2.11 </span><span class="name"><code class="filename">/etc/networks</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.networks">#</a></h4></div></div></div><p>
   Here, network names are converted to network addresses. The format is
   similar to that of the <code class="filename">hosts</code> file, except the network
   names precede the addresses. See <a class="xref" href="#dat.netz.networks" title="/etc/networks">Example 18.8, “<code class="filename">/etc/networks</code>”</a>.
  </p><div class="example" id="dat.netz.networks"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.8: </span><span class="name"><code class="filename">/etc/networks</code> </span><a title="Permalink" class="permalink" href="#dat.netz.networks">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">loopback     127.0.0.0
localnet     192.168.0.0</pre></div></div></div></div><div class="sect3 " id="sec.network.manconf.files.host"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.host"><span class="number">18.6.2.12 </span><span class="name"><code class="filename">/etc/host.conf</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.host">#</a></h4></div></div></div><p>
   Name resolution—the translation of host and network names via the
   <span class="emphasis"><em>resolver</em></span> library—is controlled by this file. This
   file is only used for programs linked to libc4 or libc5. For current glibc
   programs, refer to the settings in <code class="filename">/etc/nsswitch.conf</code>.
   Each parameter must always be entered on a separate line. Comments are
   preceded by a <code class="literal">#</code> sign.
   <a class="xref" href="#tab.netz.param.hostconf" title="Parameters for /etc/host.conf">Table 18.2, “Parameters for /etc/host.conf”</a> shows the parameters available. A
   sample <code class="filename">/etc/host.conf</code> is shown in
   <a class="xref" href="#dat.netz.etc.hostconf" title="/etc/host.conf">Example 18.9, “<code class="filename">/etc/host.conf</code>”</a>.
  </p><div class="table" id="tab.netz.param.hostconf"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 18.2: </span><span class="name">Parameters for /etc/host.conf </span><a title="Permalink" class="permalink" href="#tab.netz.param.hostconf">#</a></h6></div><div class="table-contents"><table summary="Parameters for /etc/host.conf" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="left">
       <p>
        order <span class="emphasis"><em>hosts</em></span>, <span class="emphasis"><em>bind</em></span>
       </p>
      </td><td align="left">
       <p>
        Specifies in which order the services are accessed for the name
        resolution. Available arguments are (separated by blank spaces or
        commas):
       </p>
      </td></tr><tr><td align="left">
       
      </td><td align="left">
       <p>
        <span class="emphasis"><em>hosts</em></span>: searches the
        <code class="filename">/etc/hosts</code> file
       </p>
      </td></tr><tr><td align="left">
       
      </td><td align="left">
       <p>
        <span class="emphasis"><em>bind</em></span>: accesses a name server
       </p>
      </td></tr><tr><td align="left">
       
      </td><td align="left">
       <p>
        <span class="emphasis"><em>nis</em></span>: uses NIS
       </p>
      </td></tr><tr><td align="left">
       <p>
        multi <span class="emphasis"><em>on</em></span>/<span class="emphasis"><em>off</em></span>
       </p>
      </td><td align="left">
       <p>
        Defines if a host entered in <code class="filename">/etc/hosts</code> can have
        multiple IP addresses.
       </p>
      </td></tr><tr><td align="left">
       <p>
        nospoof <span class="emphasis"><em>on</em></span> spoofalert
        <span class="emphasis"><em>on</em></span>/<span class="emphasis"><em>off</em></span>
       </p>
      </td><td align="left">
       <p>
        These parameters influence the name server
        <span class="emphasis"><em>spoofing</em></span> but do not exert any influence on the
        network configuration.
       </p>
      </td></tr><tr><td align="left">
       <p>
        trim <span class="emphasis"><em>domainname</em></span>
       </p>
      </td><td align="left">
       <p>
        The specified domain name is separated from the host name after host
        name resolution (as long as the host name includes the domain name).
        This option is useful only if names from the local domain are in the
        <code class="filename">/etc/hosts</code> file, but should still be recognized
        with the attached domain names.
       </p>
      </td></tr></tbody></table></div></div><div class="example" id="dat.netz.etc.hostconf"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.9: </span><span class="name"><code class="filename">/etc/host.conf</code> </span><a title="Permalink" class="permalink" href="#dat.netz.etc.hostconf">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># We have named running
order hosts bind
# Allow multiple address
multi on</pre></div></div></div></div><div class="sect3 " id="sec.network.manconf.files.nsswitch"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.nsswitch"><span class="number">18.6.2.13 </span><span class="name"><code class="filename">/etc/nsswitch.conf</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.nsswitch">#</a></h4></div></div></div><p>
   The introduction of the GNU C Library 2.0 was accompanied by the
   introduction of the <span class="emphasis"><em>Name Service Switch</em></span> (NSS). Refer to
   the <code class="systemitem">nsswitch.conf(5)</code> man page and <span class="emphasis"><em>The GNU
   C Library Reference Manual</em></span> for details.
  </p><p>
   The order for queries is defined in the file
   <code class="filename">/etc/nsswitch.conf</code>. A sample
   <code class="filename">nsswitch.conf</code> is shown in
   <a class="xref" href="#dat.netz.nsswitchconf" title="/etc/nsswitch.conf">Example 18.10, “<code class="filename">/etc/nsswitch.conf</code>”</a>. Comments are preceded by
   <code class="literal">#</code> signs. In this example, the entry under the
   <code class="filename">hosts</code> database means that a request is sent to
   <code class="filename">/etc/hosts</code> (<code class="option">files</code>) via
   DNS.
  </p><div class="example" id="dat.netz.nsswitchconf"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.10: </span><span class="name"><code class="filename">/etc/nsswitch.conf</code> </span><a title="Permalink" class="permalink" href="#dat.netz.nsswitchconf">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">passwd:     compat
group:      compat

hosts:      files dns
networks:   files dns

services:   db files
protocols:  db files
rpc:        files
ethers:     files
netmasks:   files
netgroup:   files nis
publickey:  files

bootparams: files
automount:  files nis
aliases:    files nis
shadow:     compat</pre></div></div></div><p>
   The <span class="quote">“<span class="quote">databases</span>”</span> available over NSS are listed in
   <a class="xref" href="#tab.netz.nnswitch.db" title="Databases Available via /etc/nsswitch.conf">Table 18.3, “Databases Available via /etc/nsswitch.conf”</a>. The configuration options for NSS databases are listed in
   <a class="xref" href="#tab.netz.nnswitch.conf" title="Configuration Options for NSS “Databases”">Table 18.4, “Configuration Options for NSS <span class="quote">“<span class="quote">Databases</span>”</span>”</a>.
  </p><div class="table" id="tab.netz.nnswitch.db"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 18.3: </span><span class="name">Databases Available via /etc/nsswitch.conf </span><a title="Permalink" class="permalink" href="#tab.netz.nnswitch.db">#</a></h6></div><div class="table-contents"><table summary="Databases Available via /etc/nsswitch.conf" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="left">
       <p>
        <code class="option">aliases</code>
       </p>
      </td><td align="left">
       <p>
        Mail aliases implemented by <code class="filename">sendmail</code>; see
        <code class="command">man</code> <code class="option">5 aliases</code>.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">ethers</code>
       </p>
      </td><td align="left">
       <p>
        Ethernet addresses.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">netmasks</code>
       </p>
      </td><td align="left">
       <p>
        List of networks and their subnet masks. Only needed, if you use
        subnetting.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">group</code>
       </p>
      </td><td align="left">
       <p>
        User groups used by <code class="filename">getgrent</code>. See also the man
        page for <code class="command">group</code>.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">hosts</code>
       </p>
      </td><td align="left">
       <p>
        Host names and IP addresses, used by <code class="filename">gethostbyname</code>
        and similar functions.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">netgroup</code>
       </p>
      </td><td align="left">
       <p>
        Valid host and user lists in the network for controlling access
        permissions; see the <code class="systemitem">netgroup(5)</code> man page.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">networks</code>
       </p>
      </td><td align="left">
       <p>
        Network names and addresses, used by <code class="filename">getnetent</code>.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">publickey</code>
       </p>
      </td><td align="left">
       <p>
        Public and secret keys for Secure_RPC used by NFS and NIS+.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">passwd</code>
       </p>
      </td><td align="left">
       <p>
        User passwords, used by <code class="filename">getpwent</code>; see the
        <code class="systemitem">passwd(5)</code> man page.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">protocols</code>
       </p>
      </td><td align="left">
       <p>
        Network protocols, used by <code class="filename">getprotoent</code>; see the
        <code class="systemitem">protocols(5)</code> man page.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">rpc</code>
       </p>
      </td><td align="left">
       <p>
        Remote procedure call names and addresses, used by
        <code class="filename">getrpcbyname</code> and similar functions.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">services</code>
       </p>
      </td><td align="left">
       <p>
        Network services, used by <code class="filename">getservent</code>.
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">shadow</code>
       </p>
      </td><td align="left">
       <p>
        Shadow passwords of users, used by <code class="filename">getspnam</code>; see
        the <code class="option">shadow(5)</code> man page.
       </p>
      </td></tr></tbody></table></div></div><div class="table" id="tab.netz.nnswitch.conf"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 18.4: </span><span class="name">Configuration Options for NSS <span class="quote">“<span class="quote">Databases</span>”</span> </span><a title="Permalink" class="permalink" href="#tab.netz.nnswitch.conf">#</a></h6></div><div class="table-contents"><table summary="Configuration Options for NSS Databases" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="left">
       <p>
        <code class="option">files</code>
       </p>
      </td><td align="left">
       <p>
        directly access files, for example, <code class="filename">/etc/aliases</code>
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">db</code>
       </p>
      </td><td align="left">
       <p>
        access via a database
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">nis</code>, <code class="option">nisplus</code>
       </p>
      </td><td align="left">
       <p>
        NIS, see also <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 3 “Using NIS”</span>
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">dns</code>
       </p>
      </td><td align="left">
       <p>
        can only be used as an extension for <code class="option">hosts</code> and
        <code class="option">networks</code>
       </p>
      </td></tr><tr><td align="left">
       <p>
        <code class="option">compat</code>
       </p>
      </td><td align="left">
       <p>
        can only be used as an extension for <code class="option">passwd</code>,
        <code class="option">shadow</code> and <code class="option">group</code>
       </p>
      </td></tr></tbody></table></div></div></div><div class="sect3 " id="sec.network.manconf.files.nscd"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.nscd"><span class="number">18.6.2.14 </span><span class="name"><code class="filename">/etc/nscd.conf</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.nscd">#</a></h4></div></div></div><p>
   This file is used to configure nscd (name service cache daemon). See the
   <code class="systemitem">nscd(8)</code> and <code class="systemitem">nscd.conf(5)</code>
   man pages. By default, the system entries of <code class="option">passwd</code>,
   <code class="option">groups</code> and <code class="option">hosts</code>are cached by nscd. This is important for the
   performance of directory services, like NIS and LDAP, because otherwise the
   network connection needs to be used for every access to names, groups or
   hosts.
   
  </p><p>
   If the caching for <code class="option">passwd</code> is activated, it usually takes
   about fifteen seconds until a newly added local user is recognized. Reduce
   this waiting time by restarting nscd with:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart nscd</pre></div></div><div class="sect3 " id="sec.network.manconf.files.hostname"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.files.hostname"><span class="number">18.6.2.15 </span><span class="name"><code class="filename">/etc/HOSTNAME</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.files.hostname">#</a></h4></div></div></div><p>
   <code class="filename">/etc/HOSTNAME</code> contains the fully qualified host name
   (FQHN). The fully qualified host name is the host name with the domain name
   attached. This file must contain only one line (in which the host name is
   set). It is read while the machine is booting.
  </p></div></div><div class="sect2 " id="sec.network.manconf.testing"><div class="titlepage"><div><div><h3 class="title" id="sec.network.manconf.testing"><span class="number">18.6.3 </span><span class="name">Testing the Configuration</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.testing">#</a></h3></div></div></div><p>
   Before you write your configuration to the configuration files, you can test
   it. To set up a test configuration, use the <code class="command">ip</code> command.
   To test the connection, use the <code class="command">ping</code> command.
  </p><p>
   The command <code class="command">ip</code> changes the network configuration directly
   without saving it in the configuration file. Unless you enter your
   configuration in the correct configuration files, the changed network
   configuration is lost on reboot.
  </p><div id="idm139698748806816" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: <code class="command">ifconfig</code> and <code class="command">route</code> Are Obsolete</h6><p>
    The <code class="command">ifconfig</code> and <code class="command">route</code> tools are
    obsolete. Use <code class="command">ip</code> instead. <code class="command">ifconfig</code>,
    for example, limits interface names to 9 characters.
   </p></div><div class="sect3 " id="sec.network.manconf.ip"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.ip"><span class="number">18.6.3.1 </span><span class="name">Configuring a Network Interface with <code class="command">ip</code></span> <a title="Permalink" class="permalink" href="#sec.network.manconf.ip">#</a></h4></div></div></div><p>
    <code class="command">ip</code> is a tool to show and configure network devices,
    routing, policy routing, and tunnels.
   </p><p>
    <code class="command">ip</code> is a very complex tool. Its common syntax is
    <code class="command">ip</code> <code class="option"><em class="replaceable ">OPTIONS</em>
    <em class="replaceable ">OBJECT</em>
    <em class="replaceable ">COMMAND</em></code>. You can work with the
    following objects:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748794656"><span class="term ">link</span></dt><dd><p>
       This object represents a network device.
      </p></dd><dt id="idm139698748792832"><span class="term ">address</span></dt><dd><p>
       This object represents the IP address of device.
      </p></dd><dt id="idm139698748790992"><span class="term ">neighbor</span></dt><dd><p>
       This object represents an ARP or NDISC cache entry.
      </p></dd><dt id="idm139698748789152"><span class="term ">route</span></dt><dd><p>
       This object represents the routing table entry.
      </p></dd><dt id="idm139698748787312"><span class="term ">rule</span></dt><dd><p>
       This object represents a rule in the routing policy database.
      </p></dd><dt id="idm139698748785456"><span class="term ">maddress</span></dt><dd><p>
       This object represents a multicast address.
      </p></dd><dt id="idm139698748783616"><span class="term ">mroute</span></dt><dd><p>
       This object represents a multicast routing cache entry.
      </p></dd><dt id="idm139698748781776"><span class="term ">tunnel</span></dt><dd><p>
       This object represents a tunnel over IP.
      </p></dd></dl></div><p>
    If no command is given, the default command is used (usually
    <code class="command">list</code>).
   </p><p>
    Change the state of a device with the command <code class="command">ip link
    set</code> <code class="option"><em class="replaceable ">DEVICE_NAME</em></code> <code class="command"></code>
    . For example, to deactivate device eth0, enter <code class="command">ip link
    set</code> <code class="option">eth0 down</code>. To activate it again, use
    <code class="command">ip link set</code> <code class="option">eth0 up</code>.
   </p><p>
    After activating a device, you can configure it. To set the IP address, use
    <code class="command">ip addr
    add</code> <code class="option"><em class="replaceable ">IP_ADDRESS</em> + dev
    <em class="replaceable ">DEVICE_NAME</em></code>. For example, to set the
    address of the interface eth0 to 192.168.12.154/30 with standard broadcast
    (option <code class="option">brd</code>), enter <code class="command">ip
    addr</code> <code class="option">add 192.168.12.154/30 brd + dev eth0</code>.
   </p><p>
    To have a working connection, you must also configure the default gateway.
    To set a gateway for your system, enter <code class="command">ip route
    add</code> <code class="option">gateway_ip_address</code>. To translate one IP
    address to another, use <code class="command">nat</code>: <code class="command">ip route add
    nat</code> <code class="option">ip_address</code> <code class="command">via</code> <code class="option">other_ip_address</code>.
   </p><p>
    To display all devices, use <code class="command">ip link ls</code>. To display the
    running interfaces only, use <code class="command">ip link ls up</code>. To print
    interface statistics for a device, enter <code class="command">ip -s link
    ls</code> <code class="option">device_name</code>. To view addresses of your
    devices, enter <code class="command">ip addr</code>. In the output of the <code class="command">ip
    addr</code>, also find information about MAC addresses of your devices.
    To show all routes, use <code class="command">ip route show</code>.
   </p><p>
    For more information about using <code class="command">ip</code>, enter
    <code class="command">ip</code> <code class="option">help</code> or see the
    <code class="systemitem">ip(8)</code> man page. The <code class="option">help</code> option
    is also available for all <code class="command">ip</code> subcommands. If, for
    example, you need help for
    <code class="command">ip</code> <code class="option">addr</code>, enter
    <code class="command">ip</code> <code class="option">addr help</code>. Find the
    <code class="command">ip</code> manual in
    <code class="filename">/usr/share/doc/packages/iproute2/ip-cref.pdf</code>.
   </p></div><div class="sect3 " id="sec.network.manconf.testingping"><div class="titlepage"><div><div><h4 class="title" id="sec.network.manconf.testingping"><span class="number">18.6.3.2 </span><span class="name">Testing a Connection with ping</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.testingping">#</a></h4></div></div></div><p>
    The <code class="command">ping</code> command is the standard tool for testing
    whether a TCP/IP connection works. It uses the ICMP protocol to send a
    small data packet, ECHO_REQUEST datagram, to the destination host,
    requesting an immediate reply. If this works, <code class="command">ping</code>
    displays a message to that effect. This indicates that the network link is
    functioning.
   </p><p>
    <code class="command">ping</code> does more than only test the function of the
    connection between two computers: it also provides some basic information
    about the quality of the connection. In
    <a class="xref" href="#ex.basicnet.manconf.ping" title="Output of the Command ping">Example 18.11, “Output of the Command ping”</a>, you can see an example of the
    <code class="command">ping</code> output. The second-to-last line contains
    information about the number of transmitted packets, packet loss, and total
    time of <code class="command">ping</code> running.
   </p><p>
    As the destination, you can use a host name or IP address, for example,
    <code class="command">ping</code> <code class="option">example.com</code> or
    <code class="command">ping</code> <code class="option">192.168.3.100</code>. The program sends
    packets until you press
    <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">C</span>.
   </p><p>
    If you only need to check the functionality of the connection, you can
    limit the number of the packets with the <code class="option">-c</code> option. For
    example to limit ping to three packets, enter
    <code class="command">ping</code> <code class="option">-c 3 example.com</code>.
   </p><div class="example" id="ex.basicnet.manconf.ping"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.11: </span><span class="name">Output of the Command ping </span><a title="Permalink" class="permalink" href="#ex.basicnet.manconf.ping">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">ping -c 3 example.com
PING example.com (192.168.3.100) 56(84) bytes of data.
64 bytes from example.com (192.168.3.100): icmp_seq=1 ttl=49 time=188 ms
64 bytes from example.com (192.168.3.100): icmp_seq=2 ttl=49 time=184 ms
64 bytes from example.com (192.168.3.100): icmp_seq=3 ttl=49 time=183 ms
--- example.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2007ms
rtt min/avg/max/mdev = 183.417/185.447/188.259/2.052 ms</pre></div></div></div><p>
    The default interval between two packets is one second. To change the
    interval, ping provides the option <code class="option">-i</code>. For example, to
    increase the ping interval to ten seconds, enter
    <code class="command">ping</code> <code class="option">-i 10 example.com</code>.
   </p><p>
    In a system with multiple network devices, it is sometimes useful to send
    the ping through a specific interface address. To do so, use the
    <code class="option">-I</code> option with the name of the selected device, for
    example, <code class="command">ping</code> <code class="option">-I wlan1
    example.com</code>.
   </p><p>
    For more options and information about using ping, enter
    <code class="command">ping</code> <code class="option">-h</code> or see the
    <code class="systemitem">ping (8)</code> man page.
   </p><div id="idm139698748739328" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Pinging IPv6 Addresses</h6><p>
     For IPv6 addresses use the <code class="command">ping6</code> command. Note, to ping
     link-local addresses, you must specify the interface with
     <code class="option">-I</code>. The following command works, if the address is
     reachable via <code class="literal">eth1</code>:
    </p><div class="verbatim-wrap"><pre class="screen">ping6 -I eth1 fe80::117:21ff:feda:a425</pre></div></div></div></div><div class="sect2 " id="sec.network.manconf.scripts"><div class="titlepage"><div><div><h3 class="title" id="sec.network.manconf.scripts"><span class="number">18.6.4 </span><span class="name">Unit Files and Start-Up Scripts</span> <a title="Permalink" class="permalink" href="#sec.network.manconf.scripts">#</a></h3></div></div></div><p>
   Apart from the configuration files described above, there are also systemd
   unit files and various scripts that load the network services while the
   machine is booting. These are started when the system is switched to the
   <code class="systemitem">multi-user.target</code> target. Some of these unit files
   and scripts are described in <a class="xref" href="#var.net.start.scripts" title="Some Unit Files and Start-Up Scripts for Network Programs">Some Unit Files and Start-Up Scripts for Network Programs</a>. For
   more information about <code class="systemitem">systemd</code>, see
   <a class="xref" href="#cha.systemd" title="Chapter 14. The systemd Daemon">Chapter 14, <em>The <code class="systemitem">systemd</code> Daemon</em></a> and for more information about the
   <code class="systemitem">systemd</code> targets, see the man page of
   <code class="systemitem">systemd.special</code> (<code class="command">man
   systemd.special</code>).
  </p><div class="variablelist " id="var.net.start.scripts"><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Some Unit Files and Start-Up Scripts for Network Programs </span><a title="Permalink" class="permalink" href="#var.net.start.scripts">#</a></h6></div><dl class="variablelist"><dt id="idm139698748729216"><span class="term "><code class="systemitem">network.target</code>


    </span></dt><dd><p>
      <code class="systemitem">network.target</code> is the systemd target for
      networking, but its mean depends on the settings provided by the system
      administrator.
     </p><p>
      For more information, see
      <a class="link" href="http://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/" target="_blank">http://www.freedesktop.org/wiki/Software/systemd/NetworkTarget/</a>.
     </p></dd><dt id="idm139698748725504"><span class="term "><code class="systemitem">multi-user.target</code>
    </span></dt><dd><p>
      <code class="systemitem">multi-user.target</code> is the systemd target for a
      multiuser system with all required network services.
     </p></dd><dt id="idm139698748722896"><span class="term "><code class="systemitem">rpcbind</code>
    </span></dt><dd><p>
      Starts the rpcbind utility that converts RPC program numbers to universal
      addresses. It is needed for RPC services, such as an NFS server.
     </p></dd><dt id="idm139698748720672"><span class="term "><code class="systemitem">ypserv</code>
    </span></dt><dd><p>
      Starts the NIS server.
     </p></dd><dt id="idm139698748718576"><span class="term "><code class="systemitem">ypbind</code>
    </span></dt><dd><p>
      Starts the NIS client.
     </p></dd><dt id="idm139698748716480"><span class="term "><code class="filename">/etc/init.d/nfsserver</code>
    </span></dt><dd><p>
      Starts the NFS server.
     </p></dd><dt id="idm139698748714384"><span class="term "><code class="filename">/etc/init.d/postfix</code>
    </span></dt><dd><p>
      Controls the postfix process.
     </p></dd></dl></div></div></div><div class="sect1 " id="sec.network.iface-bonding"><div class="titlepage"><div><div><h2 class="title" id="sec.network.iface-bonding"><span class="number">18.7 </span><span class="name">Setting Up Bonding Devices</span> <a title="Permalink" class="permalink" href="#sec.network.iface-bonding">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_bonding.xml</li><li><span class="ds-label">ID: </span>sec.network.iface-bonding</li></ul></div></div></div></div><p>
  For some systems, there is a desire to implement network connections that
  comply to more than the standard data security or availability requirements
  of a typical Ethernet device. In these cases, several Ethernet devices can be
  aggregated to a single bonding device.
 </p><p>
  The configuration of the bonding device is done by means of bonding module
  options. The behavior is mainly affected by the mode of the bonding device.
  By default, this is <code class="systemitem">mode=active-backup</code> which means
  that a different slave device will become active if the active slave fails.
 </p><div id="idm139698748705760" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Bonding and Xen</h6><p>
   Using bonding devices is only of interest for machines where you have
   multiple real network cards available. In most configurations, this means
   that you should use the bonding configuration only in Dom0. Only if you
   have multiple network cards assigned to a VM Guest system it may also be
   useful to set up the bond in a VM Guest.
  </p></div><p>
  To configure a bonding device, use the following procedure:
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Run <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>.
   </p></li><li class="step "><p>
    Use <span class="guimenu">Add</span> and change the <span class="guimenu">Device Type</span> to
    <span class="guimenu">Bond</span>. Proceed with <span class="guimenu">Next</span>.
   </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/bond_configuration.png"><img src="images/bond_configuration.png" width="" /></a></div></div></li><li class="step "><p>
    Select how to assign the IP address to the bonding device. Three methods
    are at your disposal:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      No IP Address
     </p></li><li class="listitem "><p>
      Dynamic Address (with DHCP or Zeroconf)
     </p></li><li class="listitem "><p>
      Statically assigned IP Address
     </p></li></ul></div><p>
    Use the method that is appropriate for your environment.
   </p></li><li class="step "><p>
    In the <span class="guimenu">Bond Slaves</span> tab, select the Ethernet devices that
    should be included into the bond by activating the related check box.
   </p></li><li class="step "><p>
    Edit the <span class="guimenu">Bond Driver Options</span>. The modes that are
    available for configuration are the following:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      balance-rr
     </p></li><li class="listitem "><p>
      active-backup
     </p></li><li class="listitem "><p>
      balance-xor
     </p></li><li class="listitem "><p>
      broadcast
     </p></li><li class="listitem "><p>
      802.3ad
     </p><p>
      <code class="literal">802.3ad</code> is the standardized LACP <span class="quote">“<span class="quote">IEEE 802.3ad
      Dynamic link aggregation</span>”</span> mode.
     </p></li><li class="listitem "><p>
      balance-tlb
     </p></li><li class="listitem "><p>
      balance-alb
     </p></li></ul></div></li><li class="step "><p>
    Make sure that the parameter <code class="literal">miimon=100</code> is added to the
    <span class="guimenu">Bond Driver Options</span>. Without this parameter, the data
    integrity is not checked regularly.
   </p></li><li class="step "><p>
    Click <span class="guimenu">Next</span> and leave YaST with <span class="guimenu">OK</span>
    to create the device.
   </p></li></ol></div></div><p>
  All modes, and many more options are explained in detail in the
  <span class="guimenu">Linux Ethernet Bonding Driver HOWTO</span> found at
  <code class="filename">/usr/src/linux/Documentation/networking/bonding.txt</code>
  after installing the package <code class="systemitem">kernel-source</code>.
 </p><div class="sect2 " id="sec.network.iface-bonding.hotplug"><div class="titlepage"><div><div><h3 class="title" id="sec.network.iface-bonding.hotplug"><span class="number">18.7.1 </span><span class="name">Hotplugging of Bonding Slaves</span> <a title="Permalink" class="permalink" href="#sec.network.iface-bonding.hotplug">#</a></h3></div></div></div><p>
   In specific network environments (such as High Availability), there are
   cases when you need to replace a bonding slave interface with another one.
   The reason may be a constantly failing network device. The solution is to
   set up hotplugging of bonding slaves.
  </p><p>
   The bond is configured as usual (according to <code class="command">man 5
   ifcfg-bonding</code>), for example:
  </p><div class="verbatim-wrap"><pre class="screen">ifcfg-bond0
          STARTMODE='auto' # or 'onboot'
          BOOTPROTO='static'
          IPADDR='192.168.0.1/24'
          BONDING_MASTER='yes'
          BONDING_SLAVE_0='eth0'
          BONDING_SLAVE_1='eth1'
          BONDING_MODULE_OPTS='mode=active-backup miimon=100'</pre></div><p>
   The slaves are specified with <code class="literal">STARTMODE=hotplug</code> and
   <code class="literal">BOOTPROTO=none</code>:
  </p><div class="verbatim-wrap"><pre class="screen">ifcfg-eth0
          STARTMODE='hotplug'
          BOOTPROTO='none'

ifcfg-eth1
          STARTMODE='hotplug'
          BOOTPROTO='none'</pre></div><p>
   <code class="literal">BOOTPROTO=none</code> uses the <code class="command">ethtool</code>
   options (when provided), but does not set the link up on <code class="command">ifup
   eth0</code>. The reason is that the slave interface is controlled by the
   bond master.
  </p><p>
   <code class="literal">STARTMODE=hotplug</code> causes the slave interface to join the
   bond automatically when it is available.
  </p><p>
   The <code class="systemitem">udev</code> rules in
   <code class="filename">/etc/udev/rules.d/70-persistent-net.rules</code> need to be
   changed to match the device by bus ID (udev <code class="systemitem">KERNELS</code>
   keyword equal to "SysFS BusID" as visible in <code class="command">hwinfo
   --netcard</code>) instead of by MAC address. This allows replacement of
   defective hardware (a network card in the same slot but with a different
   MAC) and prevents confusion when the bond changes the MAC address of all its
   slaves.
  </p><p>
   For example:
  </p><div class="verbatim-wrap"><pre class="screen">SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*",
KERNELS=="0000:00:19.0", ATTR{dev_id}=="0x0", ATTR{type}=="1",
KERNEL=="eth*", NAME="eth0"</pre></div><p>
   At boot time, the systemd <code class="systemitem">network.service</code> does not
   wait for the hotplug slaves, but for the bond to become ready, which
   requires at least one available slave. When one of the slave interfaces gets
   removed (unbind from NIC driver, <code class="command">rmmod</code> of the NIC driver
   or true PCI hotplug remove) from the system, the kernel removes it from the
   bond automatically. When a new card is added to the system (replacement of
   the hardware in the slot), <code class="systemitem">udev</code> renames it using
   the bus-based persistent name rule to the name of the slave, and calls
   <code class="command">ifup</code> for it. The <code class="command">ifup</code> call
   automatically joins it into the bond.
   
  </p></div></div><div class="sect1 " id="sec.network.iface-teaming"><div class="titlepage"><div><div><h2 class="title" id="sec.network.iface-teaming"><span class="number">18.8 </span><span class="name">Setting Up Team Devices for Network Teaming</span> <a title="Permalink" class="permalink" href="#sec.network.iface-teaming">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_teaming.xml</li><li><span class="ds-label">ID: </span>sec.network.iface-teaming</li></ul></div></div></div></div><p>
  The term <span class="quote">“<span class="quote">link aggregation</span>”</span> is the general term which describes
  combining (or aggregating) a network connection to provide a logical layer.
  Sometimes you find the terms <span class="quote">“<span class="quote">channel teaming</span>”</span>, <span class="quote">“<span class="quote">Ethernet
  bonding</span>”</span>, <span class="quote">“<span class="quote">port truncating</span>”</span>, etc. which are synonyms and
  refer to the same concept.
 </p><p>
  This concept is widely known as <span class="quote">“<span class="quote">bonding</span>”</span> and was originally
  integrated into the Linux kernel (see <a class="xref" href="#sec.network.iface-bonding" title="18.7. Setting Up Bonding Devices">Section 18.7, “Setting Up Bonding Devices”</a> for the
  original implementation). The term <span class="emphasis"><em>Network Teaming</em></span> is used to
  refer to the new implementation of this concept.
 </p><p>
  The main difference between bonding and Network Teaming is that teaming supplies a
  set of small kernel modules responsible for providing an interface
  for teamd instances. Everything else is handled in user space. This is
  different from the original bonding implementation which contains all of its
  functionality exclusively in the kernel. For a comparison refer to <a class="xref" href="#tab.team.comparison" title="Feature Comparison between Bonding and Team">Table 18.5, “Feature Comparison between Bonding and Team”</a>.
 </p><div class="table" id="tab.team.comparison"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 18.5: </span><span class="name">Feature Comparison between Bonding and Team </span><a title="Permalink" class="permalink" href="#tab.team.comparison">#</a></h6></div><div class="table-contents"><table summary="Feature Comparison between Bonding and Team" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /></colgroup><thead><tr><th>Feature</th><th>Bonding</th><th>Team</th></tr></thead><tfoot><tr><th colspan="3">Source: <a class="link" href="http://libteam.org/files/teamdev.pp.pdf" target="_blank">http://libteam.org/files/teamdev.pp.pdf</a></th></tr></tfoot><tbody><tr><td>broadcast, round-robin TX policy</td><td>yes</td><td>yes</td></tr><tr><td>active-backup TX policy</td><td>yes</td><td>yes</td></tr><tr><td>LACP (802.3ad) support</td><td>yes</td><td>yes</td></tr><tr><td>hash-based TX policy</td><td>yes</td><td>yes</td></tr><tr><td>user can set hash function</td><td>no</td><td>yes</td></tr><tr><td>TX load-balancing support (TLB)</td><td>yes</td><td>yes</td></tr><tr><td>TX load-balancing support for LACP</td><td>no</td><td>yes</td></tr><tr><td>Ethtool link monitoring</td><td>yes</td><td>yes</td></tr><tr><td>ARP link monitoring</td><td>yes</td><td>yes</td></tr><tr><td>NS/NA (IPV6) link monitoring</td><td>no</td><td>yes</td></tr><tr><td>RCU locking on TX/RX paths</td><td>no</td><td>yes</td></tr><tr><td>port prio and stickiness</td><td>no</td><td>yes</td></tr><tr><td>separate per-port link monitoring setup</td><td>no</td><td>yes</td></tr><tr><td>multiple link monitoring setup</td><td>limited</td><td>yes</td></tr><tr><td>VLAN support</td><td>yes</td><td>yes</td></tr><tr><td>multiple device stacking</td><td>yes</td><td>yes</td></tr></tbody></table></div></div><p>
  Both implementations, bonding and Network Teaming, can be used in
  parallel. Network Teaming is an alternative to the existing bonding
  implementation. It does not replace bonding.
 </p><p>
  Network Teaming can be used for different use cases. The two most important use
  cases are explained later and involve:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Load balancing between different network devices.
   </p></li><li class="listitem "><p>
    Failover from one network device to another in case one of the devices
    should fail.
   </p></li></ul></div><p>
  
  Currently, there is no YaST module to support creating a teaming device.
  You need to configure Network Teaming manually. The general procedure is shown
  below which can be applied for all your Network Teaming configurations:
 </p><div class="procedure " id="pro.team.general"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 18.1: </span><span class="name">General Procedure </span><a title="Permalink" class="permalink" href="#pro.team.general">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Make sure you have all the necessary packages installed. Install the
    packages
    <span class="package">libteam-tools</span>,
    <span class="package">libteamdctl0</span>, and
    <span class="package">python-libteam</span>.
   </p></li><li class="step "><p>
    Create a configuration file under
    <code class="filename">/etc/sysconfig/network/</code>. Usually it will be
    <code class="filename">ifcfg-team0</code>. If you need more than one Network Teaming
    device, give them ascending numbers.
   </p><p>
    This configuration file contains several variables which are explained in
    the man pages (see <code class="command">man ifcfg</code> and <code class="command">man
    ifcfg-team</code>). An example configuration can be found in your
    system in the file <code class="filename">/etc/sysconfig/network/ifcfg.template</code>.
   </p></li><li class="step "><p>
    Remove the configuration files of the interfaces which will be used for the
    teaming device (usually <code class="filename">ifcfg-eth0</code> and
    <code class="filename">ifcfg-eth1</code>).
   </p><p>
    It is recommended to make a backup and remove both files. Wicked will
    re-create the configuration files with the necessary parameters for
    teaming.
   </p></li><li class="step "><p>
    Optionally, check if everything is included in Wicked's configuration file:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">wicked show-config</code></pre></div></li><li class="step "><p>
    Start the Network Teaming device <code class="systemitem">team0</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">wicked ifup all team0</code></pre></div><p>
    In case you need additional debug information, use the option
    <code class="option">--debug all</code> after the <code class="command">all</code> subcommand.
   </p></li><li class="step "><p>
    Check the status of the Network Teaming device. This can be done by the following
    commands:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Get the state of the teamd instance from Wicked:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">wicked ifstatus --verbose team0</code></pre></div></li><li class="listitem "><p>
      Get the state of the entire instance:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">teamdctl team0 state</code></pre></div></li><li class="listitem "><p>
      Get the systemd state of the teamd instance:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">systemctl status teamd@team0</code></pre></div></li></ul></div><p>
    Each of them shows a slightly different view depending on your needs.
   </p></li><li class="step "><p>
    In case you need to change something in the
    <code class="filename">ifcfg-team0</code> file afterward, reload its configuration
    with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">wicked ifreload team0</code></pre></div></li></ol></div></div><p>
  Do <span class="emphasis"><em>not</em></span> use <code class="command">systemctl</code> for starting or
  stopping the teaming device! Instead, use the <code class="command">wicked</code>
  command as shown above.
 </p><p>
  To completely remove the team device, use this procedure:
 </p><div class="procedure " id="idm139698748572272"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 18.2: </span><span class="name">Removing a Team Device </span><a title="Permalink" class="permalink" href="#idm139698748572272">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Stop the Network Teaming device <code class="systemitem">team0</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">wicked ifdown team0</code></pre></div></li><li class="step "><p>
    Rename the file <code class="filename">/etc/sysconfig/network/ifcfg-team0</code> to <code class="filename">/etc/sysconfig/network/.ifcfg-team0</code>.
    Inserting a dot in front of the file name makes it
    <span class="quote">“<span class="quote">invisible</span>”</span> for wicked. If you really do not need the
    configuration anymore, you can also remove the file.
   </p></li><li class="step "><p>Reload the configuration:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">wicked ifreload all</code></pre></div></li></ol></div></div><div class="sect2 " id="sec.network.iface-teaming.lb"><div class="titlepage"><div><div><h3 class="title" id="sec.network.iface-teaming.lb"><span class="number">18.8.1 </span><span class="name">Use Case: Loadbalancing with Network Teaming</span> <a title="Permalink" class="permalink" href="#sec.network.iface-teaming.lb">#</a></h3></div></div></div><p>
   Loadbalancing is used to improve bandwidth. Use the following configuration
   file to create a Network Teaming device with loadbalancing capabilities. Proceed
   with <a class="xref" href="#pro.team.general" title="General Procedure">Procedure 18.1, “General Procedure”</a> to set up the device. Check the
   output with <code class="command">teamdctl</code>.
  </p><div class="example" id="ex.team.lb"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.12: </span><span class="name">Configuration for Loadbalancing with Network Teaming </span><a title="Permalink" class="permalink" href="#ex.team.lb">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">STARTMODE=auto <span id="co.team.lb.startmode"></span><span class="callout">1</span>
BOOTPROTO=static <span id="co.team.lb.boot-and-ip"></span><span class="callout">2</span>
IPADDRESS="192.168.1.1/24" <a class="xref" href="#co.team.lb.boot-and-ip"><span class="callout">2</span></a>
IPADDR6="fd00:deca:fbad:50::1/64" <a class="xref" href="#co.team.lb.boot-and-ip"><span class="callout">2</span></a>

TEAM_RUNNER="loadbalance" <span id="co.team.lb.loadbalance"></span><span class="callout">3</span>
TEAM_LB_TX_HASH="ipv4,ipv6,eth,vlan"
TEAM_LB_TX_BALANCER_NAME="basic"
TEAM_LB_TX_BALANCER_INTERVAL="100"

TEAM_PORT_DEVICE_0="eth0" <span id="co.team.lb.dev"></span><span class="callout">4</span>
TEAM_PORT_DEVICE_1="eth1" <a class="xref" href="#co.team.lb.dev"><span class="callout">4</span></a>

TEAM_LW_NAME="ethtool" <span id="co.team.lb.name"></span><span class="callout">5</span>
TEAM_LW_ETHTOOL_DELAY_UP="10" <span id="co.team.lb.ethtool.delay"></span><span class="callout">6</span>
TEAM_LW_ETHTOOL_DELAY_DOWN="10" <a class="xref" href="#co.team.lb.ethtool.delay"><span class="callout">6</span></a></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.lb.startmode"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      Controls the start of the teaming device. The value of
      <code class="literal">auto</code> means, the interface will be set up when the
      network service is available and will be started automatically on every
      reboot.
     </p><p>
      In case you need to control the device yourself (and prevent it from
      starting automatically), set <code class="varname">STARTMODE</code> to
      <code class="literal">manual</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.lb.boot-and-ip"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Sets a static IP address (here
      <code class="systemitem">192.168.1.1</code>
      for IPv4 and
      <code class="systemitem">fd00:deca:fbad:50::1</code> for
      IPv6).
     </p><p>
      If the Network Teaming device should use a dynamic IP address, set
      <code class="literal">BOOTPROTO="dhcp"</code> and remove (or comment) the line with
      <code class="varname">IPADDRESS</code> and <code class="varname">IPADDR6</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.lb.loadbalance"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      Sets <code class="varname">TEAM_RUNNER</code> to <code class="literal">loadbalance</code> to
      activate the loadbalancing mode.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.lb.dev"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      Specifies one or more devices which should be aggregated to create the
      Network Teaming device.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.lb.name"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
      Defines a link watcher to monitor the state of subordinate devices. The
      default value <code class="literal">ethtool</code> checks only if the device is up
      and accessible. This makes this check fast enough. However, it does not
      check if the device can really send or receive packets.
     </p><p>
      If you need a higher confidence in the connection, use the
      <code class="literal">arp_ping</code> option. This sends pings to an arbitrary host
      (configured in the <code class="varname">TEAM_LW_ARP_PING_TARGET_HOST</code>
      variable). Only if the replies are received, the Network Teaming device is
      considered to be up.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.lb.ethtool.delay"><span class="callout">6</span></a> </p></td><td valign="top" align="left"><p>
      Defines the delay in milliseconds between the link coming up (or down)
      and the runner being notified.
     </p></td></tr></table></div></div></div></div><div class="sect2 " id="sec.network.iface-teaming.failover"><div class="titlepage"><div><div><h3 class="title" id="sec.network.iface-teaming.failover"><span class="number">18.8.2 </span><span class="name">Use Case: Failover with Network Teaming</span> <a title="Permalink" class="permalink" href="#sec.network.iface-teaming.failover">#</a></h3></div></div></div><p>
   Failover is used to ensure high availability of a critical Network Teaming device
   by involving a parallel backup network device. The backup network device is
   running all the time and takes over if and when the main device fails.
  </p><p>
   Use the following configuration file to create a Network Teaming device with
   failover capabilities. Proceed with <a class="xref" href="#pro.team.general" title="General Procedure">Procedure 18.1, “General Procedure”</a> to
   set up the device. Check the output with <code class="command">teamdctl</code>.
  </p><div class="example" id="ex.team.failover"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 18.13: </span><span class="name">Configuration for DHCP Network Teaming Device </span><a title="Permalink" class="permalink" href="#ex.team.failover">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">STARTMODE=auto <span id="co.team.failover.startmode"></span><span class="callout">1</span>
BOOTPROTO=static <span id="co.team.failover.boot-and-ip"></span><span class="callout">2</span>
IPADDR="192.168.1.2/24" <a class="xref" href="#co.team.failover.boot-and-ip"><span class="callout">2</span></a>
IPADDR6="fd00:deca:fbad:50::2/64" <a class="xref" href="#co.team.failover.boot-and-ip"><span class="callout">2</span></a>

TEAM_RUNNER=activebackup <span id="co.team.failover.activebackup"></span><span class="callout">3</span>
TEAM_PORT_DEVICE_0="eth0" <span id="co.team.failover.dev"></span><span class="callout">4</span>
TEAM_PORT_DEVICE_1="eth1" <a class="xref" href="#co.team.failover.dev"><span class="callout">4</span></a>

TEAM_LW_NAME=ethtool <span id="co.team.failover.name"></span><span class="callout">5</span>
TEAM_LW_ETHTOOL_DELAY_UP="10" <span id="co.team.failover.ethtool.delay"></span><span class="callout">6</span>
TEAM_LW_ETHTOOL_DELAY_DOWN="10" <a class="xref" href="#co.team.failover.ethtool.delay"><span class="callout">6</span></a></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.failover.startmode"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      Controls the start of the teaming device. The value of
      <code class="literal">auto</code> means, the interface will be set up when the
      network service is available and will be started automatically on every
      reboot.
     </p><p>
      In case you need to control the device yourself (and prevent it from
      starting automatically), set <code class="varname">STARTMODE</code> to
      <code class="literal">manual</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.failover.boot-and-ip"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Sets a static IP address (here
      <code class="systemitem">192.168.1.2</code>
      for IPv4 and
      <code class="systemitem">fd00:deca:fbad:50::2</code> for
      IPv6).
     </p><p>
      If the Network Teaming device should use a dynamic IP address, set
      <code class="literal">BOOTPROTO="dhcp"</code> and remove (or comment) the line with
      <code class="varname">IPADDRESS</code> and <code class="varname">IPADDR6</code>.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.failover.activebackup"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      Sets <code class="varname">TEAM_RUNNER</code> to <code class="literal">activebackup</code> to
      activate the failover mode.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.failover.dev"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      Specifies one or more devices which should be aggregated to create the
      Network Teaming device.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.failover.name"><span class="callout">5</span></a> </p></td><td valign="top" align="left"><p>
      Defines a link watcher to monitor the state of subordinate devices. The
      default value <code class="literal">ethtool</code> checks only if the device is up
      and accessible. This makes this check fast enough. However, it does not
      check if the device can really send or receive packets.
     </p><p>
      If you need a higher confidence in the connection, use the
      <code class="literal">arp_ping</code> option. This sends pings to an arbitrary host
      (configured in the <code class="varname">TEAM_LW_ARP_PING_TARGET_HOST</code>
      variable). Only if the replies are received, the Network Teaming device is
      considered to be up.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.failover.ethtool.delay"><span class="callout">6</span></a> </p></td><td valign="top" align="left"><p>
      Defines the delay in milliseconds between the link coming up (or down)
      and the runner being notified.
     </p></td></tr></table></div></div></div></div><div class="sect2 " id="sec.network.iface-teaming.vlan"><div class="titlepage"><div><div><h3 class="title" id="sec.network.iface-teaming.vlan"><span class="number">18.8.3 </span><span class="name">Use Case: VLAN over Team Device</span> <a title="Permalink" class="permalink" href="#sec.network.iface-teaming.vlan">#</a></h3></div></div></div><p>
   VLAN is an abbreviation of <span class="emphasis"><em>Virtual Local Area Network</em></span>.
   It allows the running of multiple <span class="emphasis"><em>logical</em></span> (virtual)
   ethernets over one single physical ethernet. It logically splits the
   network into different broadcast domains so that packets are only switched
   between ports that are designated for the same VLAN.
  </p><p>
   The following use case creates two static VLANs on top of a team device:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="systemitem">vlan0</code>,
      bound to the IP address <code class="systemitem">192.168.10.1</code></p></li><li class="listitem "><p><code class="systemitem">vlan1</code>,
      bound to the IP address <code class="systemitem">192.168.20.1</code></p></li></ul></div><p>Proceed as follows:</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Enable the VLAN tags on your switch. If you want to use loadbalancing
     for your team device, your switch needs to be capable of
     <span class="emphasis"><em>Link Aggregation Control Protocol</em></span> (LACP) (802.3ad).
     Consult your hardware manual about the details.
    </p></li><li class="step "><p>
     Decide if you want to use loadbalancing or failover for your team device.
     Set up your team device as described in <a class="xref" href="#sec.network.iface-teaming.lb" title="18.8.1. Use Case: Loadbalancing with Network Teaming">Section 18.8.1, “Use Case: Loadbalancing with Network Teaming”</a>
     or <a class="xref" href="#sec.network.iface-teaming.failover" title="18.8.2. Use Case: Failover with Network Teaming">Section 18.8.2, “Use Case: Failover with Network Teaming”</a>.
    </p></li><li class="step "><p>
     In <code class="filename">/etc/sysconfig/network</code> create a file
     <code class="filename">ifcfg-vlan0</code> with the following content:
    </p><div class="verbatim-wrap"><pre class="screen">STARTMODE="auto"
BOOTPROTO="static" <span id="co.team.vlan.bootproto"></span><span class="callout">1</span>
IPADDR='192.168.10.1/24' <span id="co.team.vlan.ipaddr"></span><span class="callout">2</span>
ETHERDEVICE="team0" <span id="co.team.vlan.etherdevice"></span><span class="callout">3</span>
VLAN_ID="0" <span id="co.team.vlan.vlan_id"></span><span class="callout">4</span>
VLAN='yes'</pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.vlan.bootproto"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
       Defines a fixed IP address, specified in <code class="varname">IPADDR</code>.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.vlan.ipaddr"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
       Defines the IP address, here with its netmask.
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.vlan.etherdevice"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
       Contains the real interface to use for the VLAN interface, here our
       team device (<code class="systemitem">team0</code>).
      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.team.vlan.vlan_id"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
       Specifies a unique ID for the VLAN. Preferably, the file name and the
       <code class="varname">VLAN_ID</code> corresponds to the name
       <code class="filename">ifcfg-vlan<em class="replaceable ">VLAN_ID</em></code>.
       In our case <code class="varname">VLAN_ID</code> is <code class="literal">0</code> which
       leads to the filename <code class="filename">ifcfg-vlan0</code>.
      </p></td></tr></table></div></li><li class="step "><p>
     Copy the file <code class="filename">/etc/sysconfig/network/ifcfg-vlan0</code> to
     <code class="filename">/etc/sysconfig/network/ifcfg-vlan1</code> and change the
     following values:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       <code class="varname">IPADDR</code> from <code class="systemitem">192.168.10.1/24</code> to <code class="systemitem">192.168.20.1/24</code>.</p></li><li class="listitem "><p>
       <code class="varname">VLAN_ID</code> from <code class="literal">0</code> to
      <code class="literal">1</code>.
      </p></li></ul></div></li><li class="step "><p>
     Start the two VLANs:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">wicked</code> ifup vlan0 vlan1</pre></div></li><li class="step "><p>
     Check the output of <code class="command">ifconfig</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">ifconfig</code> -a
[...]
vlan0     Link encap:Ethernet  HWaddr 08:00:27:DC:43:98
          inet addr:192.168.10.1 Bcast:192.168.10.255 Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fedc:4398/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 b)  TX bytes:816 (816.0 b)

vlan1     Link encap:Ethernet  HWaddr 08:00:27:DC:43:98
          inet addr:192.168.20.1 Bcast:192.168.20.255 Mask:255.255.255.0
          inet6 addr: fe80::a00:27ff:fedc:4398/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 b)  TX bytes:816 (816.0 b)</pre></div></li></ol></div></div></div></div></div><div class="chapter " id="cha.print"><div class="titlepage"><div><div><h2 class="title"><span class="number">19 </span><span class="name">Printer Operation</span> <a title="Permalink" class="permalink" href="#cha.print">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>printing.xml</li><li><span class="ds-label">ID: </span>cha.print</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.print.workflow"><span class="number">19.1 </span><span class="name">The CUPS Workflow</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.method"><span class="number">19.2 </span><span class="name">Methods and Protocols for Connecting Printers</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.software"><span class="number">19.3 </span><span class="name">Installing the Software</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.net"><span class="number">19.4 </span><span class="name">Network Printers</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.net.config_cmdl"><span class="number">19.5 </span><span class="name">Configuring CUPS with Command Line Tools</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.appl.commandline"><span class="number">19.6 </span><span class="name">Printing from the Command Line</span></a></span></dt><dt><span class="sect1"><a href="#sec.print.special"><span class="number">19.7 </span><span class="name">Special Features in <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span></a></span></dt><dt><span class="sect1"><a href="#sec.print.prob"><span class="number">19.8 </span><span class="name">Troubleshooting</span></a></span></dt></dl></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> supports printing with many types of printers, including
  remote network printers. Printers can be configured manually or with YaST.
  For configuration instructions, refer to <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 10 “Setting Up Hardware Components with YaST”, Section 10.3 “Setting Up a Printer”</span>.
  Both graphical and command line utilities are available for starting and
  managing print jobs. If your printer does not work as expected, refer to
  <a class="xref" href="#sec.print.prob" title="19.8. Troubleshooting">Section 19.8, “Troubleshooting”</a>.
 </p><p>
  CUPS (Common Unix Printing System) is the standard print system in
  <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
 </p><p>
  Printers can be distinguished by interface, such as USB or network, and
  printer language. When buying a printer, make sure that the printer has an
  interface that is supported (USB, Ethernet, or Wi-Fi) and a suitable printer
  language. Printers can be categorized on the basis of the following three
  classes of printer languages:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748457184"><span class="term ">PostScript Printers</span></dt><dd><p>
     PostScript is the printer language in which most print jobs in Linux and
     Unix are generated and processed by the internal print system. If
     PostScript documents can be processed directly by the printer and do not
     need to be converted in additional stages in the print system, the number
     of potential error sources is reduced.
    </p><p>
     Currently PostScript is being replaced by PDF as the standard print job
     format. PostScript+PDF printers that can directly print PDF (in addition
     to PostScript) already exist. For traditional PostScript printers PDF
     needs to be converted to PostScript in the printing workflow.
    </p></dd><dt id="idm139698748454320"><span class="term ">Standard Printers (Languages Like PCL and ESC/P)</span></dt><dd><p>
     In the case of known printer languages, the print system can convert
     PostScript jobs to the respective printer language with Ghostscript. This
     processing stage is called interpreting. The best-known languages are PCL
     (which is mostly used by HP printers and their clones) and ESC/P (which is
     used by Epson printers). These printer languages are usually supported by
     Linux and produce an adequate print result. Linux may not be able to
     address some special printer functions. Except for HP and Epson, there are
     currently no printer manufacturers who develop Linux drivers and make them
     available to Linux distributors under an open source license.
    </p></dd><dt id="sec.print.prep.gdi"><span class="term ">Proprietary Printers (Also Called GDI Printers)</span></dt><dd><p>
     These printers do not support any of the common printer languages. They
     use their own undocumented printer languages, which are subject to change
     when a new edition of a model is released. Usually only Windows drivers
     are available for these printers. See <a class="xref" href="#sec.print.gdi" title="19.8.1. Printers without Standard Printer Language Support">Section 19.8.1, “Printers without Standard Printer Language Support”</a>
     for more information.
    </p></dd></dl></div><p>
  Before you buy a new printer, refer to the following sources to check how
  well the printer you intend to buy is supported:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748447712"><span class="term "><a class="link" href="http://www.linuxfoundation.org/OpenPrinting/" target="_blank">http://www.linuxfoundation.org/OpenPrinting/</a>
   </span></dt><dd><p>
     The OpenPrinting home page with the printer database. The database shows
     the latest Linux support status. However, a Linux distribution can only
     integrate the drivers available at production time. Accordingly, a printer
     currently rated as <span class="quote">“<span class="quote">perfectly supported</span>”</span> may not have had
     this status when the latest <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> version was released. Thus, the
     databases may not necessarily indicate the correct status, but only
     provide an approximation.
    </p></dd><dt id="idm139698748443504"><span class="term "><a class="link" href="http://pages.cs.wisc.edu/~ghost/" target="_blank">http://pages.cs.wisc.edu/~ghost/</a>
   </span></dt><dd><p>
     The Ghostscript Web page.
    </p></dd><dt id="idm139698748441280"><span class="term "><code class="filename">/usr/share/doc/packages/ghostscript/catalog.devices</code>
   </span></dt><dd><p>
     List of built-in Ghostscript drivers.
    </p></dd></dl></div><div class="sect1 " id="sec.print.workflow"><div class="titlepage"><div><div><h2 class="title" id="sec.print.workflow"><span class="number">19.1 </span><span class="name">The CUPS Workflow</span> <a title="Permalink" class="permalink" href="#sec.print.workflow">#</a></h2></div></div></div><p>
   The user creates a print job. The print job consists of the data to print
   plus information for the spooler. This includes the name of the printer or the
   name of the print queue, and optionally, information for the filter, such as
   printer-specific options.
  </p><p>
   At least one dedicated print queue exists for every printer. The spooler
   holds the print job in the queue until the desired printer is ready to
   receive data. When the printer is ready, the spooler sends the data through
   the filter and back-end to the printer.
  </p><p>
   The filter converts the data generated by the application that is printing
   (usually PostScript or PDF, but also ASCII, JPEG, etc.) into
   printer-specific data (PostScript, PCL, ESC/P, etc.). The features of the
   printer are described in the PPD files. A PPD file contains printer-specific
   options with the parameters needed to enable them on the printer. The filter
   system makes sure that options selected by the user are enabled.
  </p><p>
   If you use a PostScript printer, the filter system converts the data into
   printer-specific PostScript. This does not require a printer driver. If you
   use a non-PostScript printer, the filter system converts the data into
   printer-specific data. This requires a printer driver suitable for your
   printer. The back-end receives the printer-specific data from the filter
   then passes it to the printer.
  </p></div><div class="sect1 " id="sec.print.method"><div class="titlepage"><div><div><h2 class="title" id="sec.print.method"><span class="number">19.2 </span><span class="name">Methods and Protocols for Connecting Printers</span> <a title="Permalink" class="permalink" href="#sec.print.method">#</a></h2></div></div></div><p>
   There are various possibilities for connecting a printer to the system. The
   configuration of CUPS does not distinguish between a local printer and a
   printer connected to the system over the network. For more information about
   the printer connection, read the article <span class="emphasis"><em>CUPS in a
   Nutshell</em></span> at
   <a class="link" href="http://en.opensuse.org/SDB:CUPS_in_a_Nutshell" target="_blank">http://en.opensuse.org/SDB:CUPS_in_a_Nutshell</a>.
  </p><div id="idm139698748431552" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Changing Cable Connections in a Running System</h6><p>
    When connecting the printer to the machine, do not forget that only USB
    devices can be plugged in or unplugged during operation. To avoid damaging
    your system or printer, shut down the system before changing any
    connections that are not USB.
   </p></div></div><div class="sect1 " id="sec.print.software"><div class="titlepage"><div><div><h2 class="title" id="sec.print.software"><span class="number">19.3 </span><span class="name">Installing the Software</span> <a title="Permalink" class="permalink" href="#sec.print.software">#</a></h2></div></div></div><p>
   PPD (PostScript printer description) is the computer language that describes
   the properties, like resolution, and options, such as the availability of a
   duplex unit. These descriptions are required for using various printer
   options in CUPS. Without a PPD file, the print data would be forwarded to
   the printer in a <span class="quote">“<span class="quote">raw</span>”</span> state, which is usually not desired.
  </p><p>
   To configure a PostScript printer, the best approach is to get a suitable
   PPD file. Many PPD files are available in the packages
   <code class="systemitem">manufacturer-PPDs</code> and
   <code class="systemitem">OpenPrintingPPDs-postscript</code>. See
   <a class="xref" href="#sec.print.special.ppd" title="19.7.3. PPD Files in Various Packages">Section 19.7.3, “PPD Files in Various Packages”</a> and
   <a class="xref" href="#sec.print.prob.ppd" title="19.8.2. No Suitable PPD File Available for a PostScript Printer">Section 19.8.2, “No Suitable PPD File Available for a PostScript Printer”</a>.
  </p><p>
   New PPD files can be stored in the directory
   <code class="filename">/usr/share/cups/model/</code> or added to the print system
   with YaST as described in <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 10 “Setting Up Hardware Components with YaST”, Section 10.3.1.1 “Adding Drivers with YaST”</span>.
   Subsequently, the PPD file can be selected during the printer setup.
  </p><p>
   Be careful if a printer manufacturer wants you to install entire software
   packages. This kind of installation may result in the loss of the
   support provided by <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>. Also, print commands may work
   differently and the system may no longer be able to address devices of other
   manufacturers. For this reason, the installation of manufacturer software is
   not recommended.
  </p></div><div class="sect1 " id="sec.print.net"><div class="titlepage"><div><div><h2 class="title" id="sec.print.net"><span class="number">19.4 </span><span class="name">Network Printers</span> <a title="Permalink" class="permalink" href="#sec.print.net">#</a></h2></div></div></div><p>
   A network printer can support various protocols, some even concurrently.
   Although most of the supported protocols are standardized, some
   manufacturers modify the standard. Manufacturers then provide drivers for
   only a few operating systems. Unfortunately, Linux drivers are rarely
   provided. The current situation is such that you cannot act on the
   assumption that every protocol works smoothly in Linux. Therefore, you may
   need to experiment with various options to achieve a functional
   configuration.
  </p><p>
   CUPS supports the <code class="systemitem">socket</code>,
   <code class="systemitem">LPD</code>, <code class="systemitem">IPP</code> and
   <code class="systemitem">smb</code> protocols.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748416448"><span class="term ">socket</span></dt><dd><p>
      <span class="emphasis"><em>Socket</em></span> refers to a connection in which the plain
      print data is sent directly to a TCP socket. Some socket port numbers
      that are commonly used are <code class="option">9100</code> or <code class="option">35</code>.
      The device URI (uniform resource identifier) syntax is:
      socket://<em class="replaceable ">IP.OF.THE.PRINTER</em>:<em class="replaceable ">PORT</em>,
      for example: <code class="systemitem">socket://192.168.2.202:9100/</code>.
     </p></dd><dt id="idm139698748411744"><span class="term ">LPD (Line Printer Daemon)</span></dt><dd><p>
      The LPD protocol is described in RFC 1179. Under this protocol, some
      job-related data, such as the ID of the print queue, is sent before the
      actual print data is sent. Therefore, a print queue must be specified
      when configuring the LPD protocol. The implementations of diverse printer
      manufacturers are flexible enough to accept any name as the print queue.
      If necessary, the printer manual should indicate what name to use. LPT,
      LPT1, LP1 or similar names are often used. The port number for an LPD
      service is <code class="option">515</code>. An example device URI is
      <code class="systemitem">lpd://192.168.2.202/LPT1</code>.
     </p></dd><dt id="idm139698748408464"><span class="term ">IPP (Internet Printing Protocol)</span></dt><dd><p>
      IPP is a relatively new protocol (1999) based on the HTTP protocol. With
      IPP, more job-related data is transmitted than with the other protocols.
      CUPS uses IPP for internal data transmission. The name of the print queue
      is necessary to configure IPP correctly. The port number for IPP is
      <code class="literal">631</code>. Example device URIs are
      <code class="systemitem">ipp://192.168.2.202/ps</code> and
      <code class="systemitem">ipp://192.168.2.202/printers/ps</code>.
     </p></dd><dt id="idm139698748404976"><span class="term ">SMB (Windows Share)</span></dt><dd><p>
      CUPS also supports printing on printers connected to Windows shares. The
      protocol used for this purpose is SMB. SMB uses the port numbers
      <code class="option">137</code>, <code class="option">138</code> and <code class="option">139</code>.
      Example device URIs are
      <code class="systemitem">smb://user:password@workgroup/smb.example.com/printer</code>,
      <code class="systemitem">smb://user:password@smb.example.com/printer</code>, and
      <code class="systemitem">smb://smb.example.com/printer</code>.
     </p></dd></dl></div><p>
   The protocol supported by the printer must be determined before
   configuration. If the manufacturer does not provide the needed information,
   the command <code class="command">nmap</code> (which comes with the
   <code class="systemitem">nmap</code> package) can be used to ascertain the
   protocol. <code class="command">nmap</code> checks a host for open ports. For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>nmap -p 35,137-139,515,631,9100-10000 <em class="replaceable ">IP.OF.THE.PRINTER</em></pre></div></div><div class="sect1 " id="sec.print.net.config_cmdl"><div class="titlepage"><div><div><h2 class="title" id="sec.print.net.config_cmdl"><span class="number">19.5 </span><span class="name">Configuring CUPS with Command Line Tools</span> <a title="Permalink" class="permalink" href="#sec.print.net.config_cmdl">#</a></h2></div></div></div><p>
   CUPS can be configured with command line tools like
   <code class="command">lpinfo</code>, <code class="command">lpadmin</code> and
   <code class="command">lpoptions</code>. You need a device URI consisting of a
   back-end, such as USB, and parameters. To determine valid device URIs on
   your system use the command <code class="command">lpinfo -v | grep ":/"</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpinfo -v | grep ":/"
direct usb://ACME/FunPrinter%20XL
network socket://192.168.2.253</pre></div><p>
   With <code class="command">lpadmin</code> the CUPS server administrator can add,
   remove or manage print queues. To add a print queue, use the following
   syntax:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpadmin -p <em class="replaceable ">QUEUE</em> -v <em class="replaceable ">DEVICE-URI</em> -P <em class="replaceable ">PPD-FILE</em> -E</pre></div><p>
   Then the device (<code class="option">-v</code>) is available as
   <em class="replaceable ">QUEUE</em> (<code class="option">-p</code>), using the specified
   PPD file (<code class="option">-P</code>). This means that you must know the PPD file
   and the device URI to configure the printer manually.
  </p><p>
   Do not use <code class="option">-E</code> as the first option. For all CUPS commands,
   <code class="option">-E</code> as the first argument sets use of an encrypted
   connection. To enable the printer, <code class="option">-E</code> must be used as shown
   in the following example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpadmin -p ps -v usb://ACME/FunPrinter%20XL -P \
/usr/share/cups/model/Postscript.ppd.gz -E</pre></div><p>
   The following example configures a network printer:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpadmin -p ps -v socket://192.168.2.202:9100/ -P \
/usr/share/cups/model/Postscript-level1.ppd.gz -E</pre></div><p>
   For more options of <code class="command">lpadmin</code>, see the man page of
   <code class="systemitem">lpadmin(8)</code>.
  </p><p>
   During printer setup, certain options are set as default. These options can
   be modified for every print job (depending on the print tool used). Changing
   these default options with YaST is also possible. Using command line
   tools, set default options as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     First, list all options:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpoptions -p <em class="replaceable ">QUEUE</em> -l</pre></div><p>
     Example:
    </p><div class="verbatim-wrap"><pre class="screen">Resolution/Output Resolution: 150dpi *300dpi 600dpi</pre></div><p>
     The activated default option is identified by a preceding asterisk
     (<code class="literal">*</code>).
    </p></li><li class="step "><p>
     Change the option with <code class="command">lpadmin</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpadmin -p <em class="replaceable ">QUEUE</em> -o Resolution=600dpi</pre></div></li><li class="step "><p>
     Check the new setting:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> lpoptions -p <em class="replaceable ">QUEUE</em> -l

Resolution/Output Resolution: 150dpi 300dpi *600dpi</pre></div></li></ol></div></div><p>
   When a normal user runs <code class="command">lpoptions</code>, the settings are
   written to <code class="filename">~/.cups/lpoptions</code>. However,
   <code class="systemitem">root</code> settings are written to
   <code class="filename">/etc/cups/lpoptions</code>.
  </p></div><div class="sect1 " id="sec.print.appl.commandline"><div class="titlepage"><div><div><h2 class="title" id="sec.print.appl.commandline"><span class="number">19.6 </span><span class="name">Printing from the Command Line</span> <a title="Permalink" class="permalink" href="#sec.print.appl.commandline">#</a></h2></div></div></div><p>
   To print from the command line, enter <code class="command">lp -d</code>
   <em class="replaceable ">QUEUENAME</em> <em class="replaceable ">FILENAME</em>,
   substituting the corresponding names for
   <em class="replaceable ">QUEUENAME</em> and
   <em class="replaceable ">FILENAME</em>.
  </p><p>
   Some applications rely on the <code class="command">lp</code> command for printing. In
   this case, enter the correct command in the application's print dialog,
   usually without specifying <em class="replaceable ">FILENAME</em>, for example,
   <code class="command">lp -d</code> <em class="replaceable ">QUEUENAME</em>.
  </p></div><div class="sect1 " id="sec.print.special"><div class="titlepage"><div><div><h2 class="title" id="sec.print.special"><span class="number">19.7 </span><span class="name">Special Features in <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <a title="Permalink" class="permalink" href="#sec.print.special">#</a></h2></div></div></div><p>
   Several CUPS features have been adapted for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>. Some of the most
   important changes are covered here.
  </p><div class="sect2 " id="sec.print.special.cupsfire"><div class="titlepage"><div><div><h3 class="title" id="sec.print.special.cupsfire"><span class="number">19.7.1 </span><span class="name">CUPS and Firewall</span> <a title="Permalink" class="permalink" href="#sec.print.special.cupsfire">#</a></h3></div></div></div><p>
    After having performed a default installation of <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>,
    <code class="systemitem">firewalld</code> is active and the network interfaces are configured to be in
    the <code class="literal">public</code> zone which blocks incoming traffic. More
    information about the <code class="systemitem">firewalld</code> configuration is available in
    <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 15 “Masquerading and Firewalls”, Section 15.4 “<code class="systemitem">firewalld</code>”</span> and at
    <a class="link" href="http://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings" target="_blank">http://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings</a>.
   </p><div class="sect3 " id="sec.print.special.cupsfire.client"><div class="titlepage"><div><div><h4 class="title" id="sec.print.special.cupsfire.client"><span class="number">19.7.1.1 </span><span class="name">CUPS Client</span> <a title="Permalink" class="permalink" href="#sec.print.special.cupsfire.client">#</a></h4></div></div></div><p>
     Normally, a CUPS client runs on a regular workstation located in a trusted
     network environment behind a firewall. In this case it is recommended to
     configure the network interface to be in the <code class="literal">Internal
     Zone</code>, so the workstation is reachable from within the network.
    </p></div><div class="sect3 " id="sec.print.special.cupsfire.server"><div class="titlepage"><div><div><h4 class="title" id="sec.print.special.cupsfire.server"><span class="number">19.7.1.2 </span><span class="name">CUPS Server</span> <a title="Permalink" class="permalink" href="#sec.print.special.cupsfire.server">#</a></h4></div></div></div><p>
     If the CUPS server is part of a trusted network environment protected by a
     firewall, the network interface should be configured to be in the
     <code class="literal">Internal Zone</code> of the firewall. It is not recommended to
     set up a CUPS server in an untrusted network environment unless you ensure
     that it is protected by special firewall rules and secure settings in
     the CUPS configuration.
    </p></div></div><div class="sect2 " id="sec.print.special.browsing"><div class="titlepage"><div><div><h3 class="title" id="sec.print.special.browsing"><span class="number">19.7.2 </span><span class="name">Browsing for Network Printers</span> <a title="Permalink" class="permalink" href="#sec.print.special.browsing">#</a></h3></div></div></div><p>
    CUPS servers regularly announce the availability and status information of
    shared printers over the network. Clients can access this information to
    display a list of available printers in printing dialogs, for example. This
    is called <span class="quote">“<span class="quote">browsing</span>”</span>.
   </p><p>
    CUPS servers announce their print queues over the network either via the
    traditional CUPS browsing protocol or via Bonjour/DNS-SD. To be able to
    browse network print queues, the service
    <code class="systemitem">cups-browsed</code> needs to run on all
    clients that print via CUPS servers.
    <code class="systemitem">cups-browsed</code> is not started by
    default. To start it for the active session, use <code class="command">sudo systemctl
    start cups-browsed</code>. To ensure it is automatically started after
    booting, enable it with <code class="command">sudo systemctl enable
    cups-browsed</code> on all clients.
   </p><p>
    In case browsing does not work after having started
    <code class="systemitem">cups-browsed</code>, the CUPS server(s)
    probably announce the network print queues via Bonjour/DNS-SD. In this case
    you need to additionally install the package
    <code class="systemitem">avahi</code> and start the associated
    service with <code class="command">sudo systemctl start avahi-daemon</code> on all
    clients.
   </p></div><div class="sect2 " id="sec.print.special.ppd"><div class="titlepage"><div><div><h3 class="title" id="sec.print.special.ppd"><span class="number">19.7.3 </span><span class="name">PPD Files in Various Packages</span> <a title="Permalink" class="permalink" href="#sec.print.special.ppd">#</a></h3></div></div></div><p>
    The YaST printer configuration sets up the queues for CUPS using the PPD
    files installed in <code class="filename">/usr/share/cups/model</code>. To find the
    suitable PPD files for the printer model, YaST compares the vendor and
    model determined during hardware detection with the vendors and models in
    all PPD files. For this purpose, the YaST printer configuration generates
    a database from the vendor and model information extracted from the PPD
    files.
   </p><p>
    The configuration using only PPD files and no other information sources has
    the advantage that the PPD files in
    <code class="filename">/usr/share/cups/model</code> can be modified freely. For
    example, if you have PostScript printers the PPD files can be copied
    directly to <code class="filename">/usr/share/cups/model</code> (if they do not
    already exist in the <code class="systemitem">manufacturer-PPDs</code> or
    <code class="systemitem">OpenPrintingPPDs-postscript</code> packages) to achieve
    an optimum configuration for your printers.
   </p><p>
    Additional PPD files are provided by the following packages:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      gutenprint: the Gutenprint driver and its matching PPDs
     </p></li><li class="listitem "><p>
      splix: the SpliX driver and its matching PPDs
     </p></li><li class="listitem "><p>
      OpenPrintingPPDs-ghostscript: PPDs for Ghostscript built-in drivers
     </p></li><li class="listitem "><p>
      OpenPrintingPPDs-hpijs: PPDs for the HPIJS driver for non-HP printers
     </p></li></ul></div></div></div><div class="sect1 " id="sec.print.prob"><div class="titlepage"><div><div><h2 class="title" id="sec.print.prob"><span class="number">19.8 </span><span class="name">Troubleshooting</span> <a title="Permalink" class="permalink" href="#sec.print.prob">#</a></h2></div></div></div><p>
   The following sections cover some of the most frequently encountered printer
   hardware and software problems and ways to solve or circumvent these
   problems. Among the topics covered are GDI printers, PPD files and port
   configuration. Common network printer problems, defective printouts, and
   queue handling are also addressed.
  </p><div class="sect2 " id="sec.print.gdi"><div class="titlepage"><div><div><h3 class="title" id="sec.print.gdi"><span class="number">19.8.1 </span><span class="name">Printers without Standard Printer Language Support</span> <a title="Permalink" class="permalink" href="#sec.print.gdi">#</a></h3></div></div></div><p>
    These printers do not support any common printer language and can only be
    addressed with special proprietary control sequences. Therefore they can
    only work with the operating system versions for which the manufacturer
    delivers a driver. GDI is a programming interface developed by Microsoft*
    for graphics devices. Usually the manufacturer delivers drivers only for
    Windows, and since the Windows driver uses the GDI interface these printers
    are also called <span class="emphasis"><em>GDI printers</em></span>. The actual problem is
    not the programming interface, but that these printers can only be
    addressed with the proprietary printer language of the respective printer
    model.
   </p><p>
    Some GDI printers can be switched to operate either in GDI mode or in one
    of the standard printer languages. See the manual of the printer whether
    this is possible. Some models require special Windows software to do the
    switch (note that the Windows printer driver may always switch the printer
    back into GDI mode when printing from Windows). For other GDI printers
    there are extension modules for a standard printer language available.
   </p><p>
    Some manufacturers provide proprietary drivers for their printers. The
    disadvantage of proprietary printer drivers is that there is no guarantee
    that these work with the installed print system or that they are suitable
    for the various hardware platforms. In contrast, printers that support a
    standard printer language do not depend on a special print system version
    or a special hardware platform.
   </p><p>
    Instead of spending time trying to make a proprietary Linux driver work, it
    may be more cost-effective to purchase a printer which supports a standard
    printer language (preferably PostScript). This would solve the driver
    problem once and for all, eliminating the need to install and configure
    special driver software and obtain driver updates that may be required
    because of new developments in the print system.
   </p></div><div class="sect2 " id="sec.print.prob.ppd"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.ppd"><span class="number">19.8.2 </span><span class="name">No Suitable PPD File Available for a PostScript Printer</span> <a title="Permalink" class="permalink" href="#sec.print.prob.ppd">#</a></h3></div></div></div><p>
    If the <code class="systemitem">manufacturer-PPDs</code> or
    <code class="systemitem">OpenPrintingPPDs-postscript</code> packages do not
    contain a suitable PPD file for a PostScript printer, it should be possible
    to use the PPD file from the driver CD of the printer manufacturer or
    download a suitable PPD file from the Web page of the printer manufacturer.
   </p><p>
    If the PPD file is provided as a zip archive (.zip) or a self-extracting
    zip archive (<code class="filename">.exe</code>), unpack it with
    <code class="command">unzip</code>. First, review the license terms of the PPD file.
    Then use the <code class="command">cupstestppd</code> utility to check if the PPD
    file complies with <span class="quote">“<span class="quote">Adobe PostScript Printer Description File Format
    Specification, version 4.3.</span>”</span> If the utility returns
    <span class="quote">“<span class="quote">FAIL,</span>”</span> the errors in the PPD files are serious and are likely
    to cause major problems. The problem spots reported by
    <code class="command">cupstestppd</code> should be eliminated. If necessary, ask the
    printer manufacturer for a suitable PPD file.
   </p></div><div class="sect2 " id="sec.print.prob.netconnect"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.netconnect"><span class="number">19.8.3 </span><span class="name">Network Printer Connections</span> <a title="Permalink" class="permalink" href="#sec.print.prob.netconnect">#</a></h3></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698748310832"><span class="term ">Identifying Network Problems</span></dt><dd><p>
       Connect the printer directly to the computer. For test purposes,
       configure the printer as a local printer. If this works, the problems
       are related to the network.
      </p></dd><dt id="idm139698748308848"><span class="term ">Checking the TCP/IP Network</span></dt><dd><p>
       The TCP/IP network and name resolution must be functional.
      </p></dd><dt id="idm139698748306976"><span class="term ">Checking a Remote <code class="command">lpd</code>
     </span></dt><dd><p>
       Use the following command to test if a TCP connection can be established
       to <code class="command">lpd</code> (port <code class="literal">515</code>) on
       <em class="replaceable ">HOST</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>netcat -z <em class="replaceable ">HOST</em> 515 &amp;&amp; echo ok || echo failed</pre></div><p>
       If the connection to <code class="command">lpd</code> cannot be established,
       <code class="command">lpd</code> may not be active or there may be basic network
       problems.
      </p><p>
       Provided that the respective
       <code class="command">lpd</code> is active and the host accepts queries, run the following command as <code class="systemitem">root</code> to query a status report for
       <em class="replaceable ">QUEUE</em> on remote
       <em class="replaceable ">HOST</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>echo -e "\004queue" \
| netcat -w 2 -p 722 <em class="replaceable ">HOST</em> 515</pre></div><p>
       If <code class="command">lpd</code> does not respond, it may not be active or
       there may be basic network problems. If <code class="command">lpd</code> responds,
       the response should show why printing is not possible on the
       <code class="literal">queue</code> on <code class="literal">host</code>. If you receive a
       response like that shown in <a class="xref" href="#aus.d.lpd" title="Error Message from lpd">Example 19.1, “Error Message from <code class="command">lpd</code>”</a>, the problem is
       caused by the remote <code class="command">lpd</code>.
      </p><div class="example" id="aus.d.lpd"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 19.1: </span><span class="name">Error Message from <code class="command">lpd</code> </span><a title="Permalink" class="permalink" href="#aus.d.lpd">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">lpd: your host does not have line printer access
lpd: queue does not exist
printer: spooling disabled
printer: printing disabled</pre></div></div></div></dd><dt id="idm139698748290944"><span class="term ">Checking a Remote <code class="command">cupsd</code>
     </span></dt><dd><p>
       A CUPS network server can broadcast its queues by default every 30
       seconds on UDP port <code class="literal">631</code>. Accordingly, the following
       command can be used to test whether there is a broadcasting CUPS network
       server in the network. Make sure to stop your local CUPS daemon before
       executing the command.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>netcat -u -l -p 631 &amp; PID=$! ; sleep 40 ; kill $PID</pre></div><p>
       If a broadcasting CUPS network server exists, the output appears as
       shown in <a class="xref" href="#aus.d.bcast" title="Broadcast from the CUPS Network Server">Example 19.2, “Broadcast from the CUPS Network Server”</a>.
      </p><div class="example" id="aus.d.bcast"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 19.2: </span><span class="name">Broadcast from the CUPS Network Server </span><a title="Permalink" class="permalink" href="#aus.d.bcast">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">ipp://192.168.2.202:631/printers/queue</pre></div></div></div><p>
       The following command can be used to test if a TCP connection can be
       established to <code class="command">cupsd</code> (port <code class="literal">631</code>) on
       <em class="replaceable ">HOST</em>:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>netcat -z <em class="replaceable ">HOST</em> 631 &amp;&amp; echo ok || echo failed</pre></div><p>
       If the connection to <code class="command">cupsd</code> cannot be established,
       <code class="command">cupsd</code> may not be active or there may be basic network
       problems. <code class="command">lpstat -h</code> <em class="replaceable ">HOST</em>
       -l -t returns a (possibly very long) status report for all queues on
       <em class="replaceable ">HOST</em>, provided the respective
       <code class="command">cupsd</code> is active and the host accepts queries.
      </p><p>
       The next command can be used to test if the
       <em class="replaceable ">QUEUE</em> on <em class="replaceable ">HOST</em>
       accepts a print job consisting of a single carriage-return character.
       Nothing should be printed. Possibly, a blank page may be ejected.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>echo -en "\r" \
| lp -d queue -h <em class="replaceable ">HOST</em></pre></div></dd><dt id="idm139698748275328"><span class="term ">
      Troubleshooting a Network Printer or Print Server Machine
     </span></dt><dd><p>
       Spoolers running in a print server machine sometimes cause problems when
       they need to deal with multiple print jobs. Since this is caused by the
       spooler in the print server machine, there no way to resolve this issue. As
       a work-around, circumvent the spooler in the print server machine by
       addressing the printer connected to the print server machine directly with
       the TCP socket. See <a class="xref" href="#sec.print.net" title="19.4. Network Printers">Section 19.4, “Network Printers”</a>.
      </p><p>
       In this way, the print server machine is reduced to a converter between the
       various forms of data transfer (TCP/IP network and local printer
       connection). To use this method, you need to know the TCP port on the
       print server machine. If the printer is connected to the print server machine
       and turned on, this TCP port can usually be determined with the
       <code class="command">nmap</code> utility from the <code class="systemitem">nmap</code>
       package some time after the print server machine is powered up. For example,
       <code class="command">nmap </code> <em class="replaceable ">IP-address</em> may
       deliver the following output for a print server machine:
      </p><div class="verbatim-wrap"><pre class="screen">Port       State       Service
23/tcp     open        telnet
80/tcp     open        http
515/tcp    open        printer
631/tcp    open        cups
9100/tcp   open        jetdirect</pre></div><p>
       This output indicates that the printer connected to the print server machine
       can be addressed via TCP socket on port <code class="literal">9100</code>. By
       default, <code class="command">nmap</code> only checks several commonly known
       ports listed in <code class="filename">/usr/share/nmap/nmap-services</code>. To
       check all possible ports, use the command <code class="command">nmap
       -p </code>
       <em class="replaceable ">FROM_PORT</em>-<em class="replaceable ">TO_PORT</em> <em class="replaceable ">IP_ADDRESS</em>.
       This may take some time. For further information, refer to the man page
       of <code class="command">nmap</code>.
      </p><p>
       Enter a command like
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>echo -en "\rHello\r\f" | netcat -w 1 IP-address port
cat file | netcat -w 1 IP-address port</pre></div><p>
       to send character strings or files directly to the respective port to
       test if the printer can be addressed on this port.
      </p></dd></dl></div></div><div class="sect2 " id="sec.print.prob.defective_printouts"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.defective_printouts"><span class="number">19.8.4 </span><span class="name">Defective Printouts without Error Message</span> <a title="Permalink" class="permalink" href="#sec.print.prob.defective_printouts">#</a></h3></div></div></div><p>
    For the print system, the print job is completed when the CUPS back-end
    completes the data transfer to the recipient (printer). If further
    processing on the recipient fails (for example, if the printer is not able
    to print the printer-specific data) the print system does not notice this.
    If the printer cannot print the printer-specific data, select a PPD file
    that is more suitable for the printer.
   </p></div><div class="sect2 " id="sec.print.prob.disabled_queues"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.disabled_queues"><span class="number">19.8.5 </span><span class="name">Disabled Queues</span> <a title="Permalink" class="permalink" href="#sec.print.prob.disabled_queues">#</a></h3></div></div></div><p>
    If the data transfer to the recipient fails entirely after several
    attempts, the CUPS back-end, such as <code class="literal">USB</code> or
    <code class="literal">socket</code>, reports an error to the print system (to
    <code class="command">cupsd</code>). The back-end determines how many unsuccessful
    attempts are appropriate until the data transfer is reported as impossible.
    As further attempts would be in vain, <code class="command">cupsd</code> disables
    printing for the respective queue. After eliminating the cause of the
    problem, the system administrator must re-enable printing with the command
    <code class="command">cupsenable</code>.
   </p></div><div class="sect2 " id="sec.print.prob.deleting_jobs"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.deleting_jobs"><span class="number">19.8.6 </span><span class="name">CUPS Browsing: Deleting Print Jobs</span> <a title="Permalink" class="permalink" href="#sec.print.prob.deleting_jobs">#</a></h3></div></div></div><p>
    If a CUPS network server broadcasts its queues to the client hosts via
    browsing and a suitable local <code class="command">cupsd</code> is active on the
    client hosts, the client <code class="command">cupsd</code> accepts print jobs from
    applications and forwards them to the <code class="command">cupsd</code> on the
    server. When <code class="command">cupsd</code> on the server accepts a print job, it
    is assigned a new job number. Therefore, the job number on the client host
    is different from the job number on the server. As a print job is usually
    forwarded immediately, it cannot be deleted with the job number on the
    client host This is because the client <code class="command">cupsd</code> regards the
    print job as completed when it has been forwarded to the server
    <code class="command">cupsd</code>.
   </p><p>
    To delete the print job on the server, use a
    command such as <code class="command">lpstat -h cups.example.com -o</code> to determine the
    job number on the server. This assumes that the server has not already
    completed the print job (that is, sent it completely to the printer). Use
    the obtained job
    number to delete the print job on the server as follows:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>cancel -h cups.example.com <em class="replaceable ">QUEUE-JOBNUMBER</em></pre></div></div><div class="sect2 " id="sec.print.prob.brokenjobs"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.brokenjobs"><span class="number">19.8.7 </span><span class="name">Defective Print Jobs and Data Transfer Errors</span> <a title="Permalink" class="permalink" href="#sec.print.prob.brokenjobs">#</a></h3></div></div></div><p>
    If you switch the printer off or shut down the computer during the printing
    process, print jobs remain in the queue. Printing resumes when the computer
    (or the printer) is switched back on. Defective print jobs must be removed
    from the queue with <code class="command">cancel</code>.
   </p><p>
    If a print job is corrupted or an error occurs in the communication between
    the host and the printer, the printer cannot process the data correctly and
    prints numerous sheets of paper with
    unintelligible characters. To
    fix the problem, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To stop printing, remove all paper from ink jet printers or open the
      paper trays of laser printers. High-quality printers have a button for
      canceling the current printout.
     </p></li><li class="step "><p>
      The print job may still be in the queue, because jobs are only removed
      after they are sent completely to the printer. Use <code class="command">lpstat
      -o</code> or <code class="command">lpstat -h cups.example.com -o</code> to check which
      queue is currently printing. Delete the print job with
      <code class="command">cancel</code>
      <em class="replaceable ">QUEUE</em>-<em class="replaceable ">JOBNUMBER</em> or
      <code class="command">cancel -h cups.example.com</code>
      <em class="replaceable ">QUEUE</em>-<em class="replaceable ">JOBNUMBER</em>.
     </p></li><li class="step "><p>
      Some data may still be transferred to the printer even though the print
      job has been deleted from the queue. Check if a CUPS back-end process is
      still running for the respective queue and terminate it.
     </p></li><li class="step "><p>
      Reset the printer completely by switching it off for some time. Then
      insert the paper and turn on the printer.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.print.prob.debugging"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.debugging"><span class="number">19.8.8 </span><span class="name">Debugging CUPS</span> <a title="Permalink" class="permalink" href="#sec.print.prob.debugging">#</a></h3></div></div></div><p>
    Use the following generic procedure to locate problems in CUPS:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Set <code class="command">LogLevel debug</code> in
      <code class="filename">/etc/cups/cupsd.conf</code>.
     </p></li><li class="step "><p>
      Stop <code class="command">cupsd</code>.
     </p></li><li class="step "><p>
      Remove <code class="filename">/var/log/cups/error_log*</code> to avoid having to
      search through very large log files.
     </p></li><li class="step "><p>
      Start <code class="command">cupsd</code>.
     </p></li><li class="step "><p>
      Repeat the action that led to the problem.
     </p></li><li class="step "><p>
      Check the messages in <code class="filename">/var/log/cups/error_log*</code> to
      identify the cause of the problem.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.print.prob.more_information"><div class="titlepage"><div><div><h3 class="title" id="sec.print.prob.more_information"><span class="number">19.8.9 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.print.prob.more_information">#</a></h3></div></div></div><p>
    In-depth information about printing on SUSE Linux is presented in the
    openSUSE Support Database at <a class="link" href="http://en.opensuse.org/Portal:Printing" target="_blank">http://en.opensuse.org/Portal:Printing</a>. <span class="phrase">Solutions to many specific problems are presented in the
    SUSE Knowledgebase (<a class="link" href="http://www.suse.com/support/" target="_blank">http://www.suse.com/support/</a>). Locate the relevant articles
    with a text search for <code class="literal">CUPS</code>.</span>
   </p></div></div></div><div class="chapter " id="cha.x11"><div class="titlepage"><div><div><h2 class="title"><span class="number">20 </span><span class="name">The X Window System</span> <a title="Permalink" class="permalink" href="#cha.x11">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>x11.xml</li><li><span class="ds-label">ID: </span>cha.x11</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.x11.fontsys"><span class="number">20.1 </span><span class="name">Installing and Configuring Fonts</span></a></span></dt><dt><span class="sect1"><a href="#sec.x11.moreinfo"><span class="number">20.2 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><p>
  The X Window System (X11) is the de facto standard for graphical user
  interfaces in Unix. X is network-based, enabling applications started on one
  host to be displayed on another host connected over any kind of network (LAN
  or Internet). This chapter provides basic information on the X configuration,
  and background information about the use of fonts in <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span>.
 </p><p>
  Usually, the X Window System needs no configuration. The hardware is
  dynamically detected during X start-up. The use of
  <code class="filename">xorg.conf</code> is therefore deprecated. If you still need to
  specify custom options to change the way X behaves, you can still do so by
  modifying configuration files under
  <code class="filename">/etc/X11/xorg.conf.d/</code>.
 </p><div class="sect1 " id="sec.x11.fontsys"><div class="titlepage"><div><div><h2 class="title" id="sec.x11.fontsys"><span class="number">20.1 </span><span class="name">Installing and Configuring Fonts</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>x11_fonts.xml</li><li><span class="ds-label">ID: </span>sec.x11.fontsys</li></ul></div></div></div></div><p>
  Fonts in Linux can be categorized into two parts:
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748209392"><span class="term ">Outline or Vector Fonts</span></dt><dd><p>
     Contains a mathematical description as drawing instructions about the
     shape of a glyph. As such, each glyph can be scaled to arbitrary sizes
     without loss of quality. Before such a font (or glyph) can be used, the
     mathematical descriptions need to be transformed into a raster (grid).
     This process is called <span class="emphasis"><em>font rasterization</em></span>.
     <span class="emphasis"><em>Font hinting</em></span> (embedded inside the font) improves and
     optimizes the rendering result for a particular size. Rasterization and
     hinting is done with the FreeType library.
    </p><p>
     Common formats under Linux are PostScript Type 1 and Type 2, TrueType, and
     OpenType.
    </p></dd><dt id="idm139698748205696"><span class="term ">Bitmap or Raster Fonts</span></dt><dd><p>
     Consists of an array of pixels designed for a specific font size. Bitmap
     fonts are extremely fast and simple to render. However, compared to vector
     fonts, bitmap fonts cannot be scaled without losing quality. As such,
     these fonts are usually distributed in different sizes. These days, bitmap
     fonts are still used in the Linux console and sometimes in terminals.
    </p><p>
     Under Linux, Portable Compiled Format (PCF) or Glyph Bitmap Distribution
     Format (BDF) are the most common formats.
    </p></dd></dl></div><p>
  The appearance of these fonts can be influenced by two main aspects:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    choosing a suitable font family,
   </p></li><li class="listitem "><p>
    rendering the font with an algorithm that achieves results comfortable for
    the receiver's eyes.
   </p></li></ul></div><p>
  The last point is only relevant to vector fonts. Although the above two
  points are highly subjective, some defaults need to be created.
 </p><p>
  Linux font rendering systems consist of several libraries with different
  relations. The basic font rendering library is
  <a class="link" href="http://www.freetype.org/" target="_blank">FreeType</a>, which converts
  font glyphs of supported formats into optimized bitmap glyphs. The rendering
  process is controlled by an algorithm and its parameters (which may be
  subject to patent issues).
 </p><p>
  Every program or library which uses FreeType should consult the
  <a class="link" href="http://www.fontconfig.org/" target="_blank">Fontconfig</a> library. This
  library gathers font configuration from users and from the system. When a
  user amends his Fontconfig setting, this change will result in
  Fontconfig-aware applications.
 </p><p>
  More sophisticated OpenType shaping needed for scripts such as Arabic, Han or
  Phags-Pa and other higher level text processing is done using
  <a class="link" href="http://www.harfbuzz.org/" target="_blank">Harfbuzz</a> or
  <a class="link" href="http://www.pango.org/" target="_blank">Pango</a>.
 </p><div class="sect2 " id="sec.x11.fontsys.showing.fonts"><div class="titlepage"><div><div><h3 class="title" id="sec.x11.fontsys.showing.fonts"><span class="number">20.1.1 </span><span class="name">Showing Installed Fonts</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.showing.fonts">#</a></h3></div></div></div><p>
   To get an overview about which fonts are installed on your system, ask the
   commands <code class="command">rpm</code> or <code class="command">fc-list</code>. Both will
   give you a good answer, but may return a different list depending on system
   and user configuration:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748190816"><span class="term "><code class="command">rpm</code>
    </span></dt><dd><p>
      Invoke <code class="command">rpm</code> to see which software packages containing
      fonts are installed on your system:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>rpm -qa '*fonts*'</pre></div><p>
      Every font package should satisfy this expression. However, the command
      may return some false positives like <code class="literal">fonts-config</code>
      (which is neither a font nor does it contain fonts).
     </p></dd><dt id="idm139698748186416"><span class="term "><code class="command">fc-list</code>
    </span></dt><dd><p>
      Invoke <code class="command">fc-list</code> to get an overview about what font
      families can be accessed, whether they are installed on the system or in
      your home:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>fc-list ':' family</pre></div><div id="idm139698748183344" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Command <code class="command">fc-list</code></h6><p>
       The command <code class="command">fc-list</code> is a wrapper to the Fontconfig
       library. It is possible to query a lot of interesting information from
       Fontconfig—or, to be more precise, from its cache. See
       <code class="command">man 1 fc-list</code> for more details.
      </p></div></dd></dl></div></div><div class="sect2 " id="sec.x11.fontsys.viewing"><div class="titlepage"><div><div><h3 class="title" id="sec.x11.fontsys.viewing"><span class="number">20.1.2 </span><span class="name">Viewing Fonts</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.viewing">#</a></h3></div></div></div><p>
   If you want to know what an installed font family looks like, either use the
   command <code class="command">ftview</code> (package
   <code class="systemitem">ft2demos</code>) or visit
   <a class="link" href="http://fontinfo.opensuse.org/" target="_blank">http://fontinfo.opensuse.org/</a>. For example, to display
   the FreeMono font in 14 point, use <code class="command">ftview</code> like this:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>ftview 14 /usr/share/fonts/truetype/FreeMono.ttf</pre></div><p>
   If you need further information, go to
   <a class="link" href="http://fontinfo.opensuse.org/" target="_blank">http://fontinfo.opensuse.org/</a> to find out which styles
   (regular, bold, italic, etc.) and languages are supported.
  </p></div><div class="sect2 " id="sec.x11.fontsys.querying"><div class="titlepage"><div><div><h3 class="title" id="sec.x11.fontsys.querying"><span class="number">20.1.3 </span><span class="name">Querying Fonts</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.querying">#</a></h3></div></div></div><p>
   To query which font is used when a pattern is given, use the
   <code class="command">fc-match</code> command.
  </p><p>
   For example, if your pattern contains an already installed font,
   <code class="command">fc-match</code> returns the file name, font family, and the
   style:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>fc-match 'Liberation Serif'
LiberationSerif-Regular.ttf: "Liberation Serif" "Regular"</pre></div><p>
   If the desired font does not exist on your system, Fontconfig's matching
   rules take place and try to find the most similar fonts available. This
   means, your request is substituted:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>fc-match 'Foo Family'
DejaVuSans.ttf: "DejaVu Sans" "Book"</pre></div><p>
   Fontconfig supports <span class="emphasis"><em>aliases</em></span>: a name is substituted with
   another family name. A typical example are the generic names such as
   <span class="quote">“<span class="quote">sans-serif</span>”</span>, <span class="quote">“<span class="quote">serif</span>”</span>, and
   <span class="quote">“<span class="quote">monospace</span>”</span>. These alias names can be substituted by real
   family names or even a preference list of family names:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>for font in serif sans mono; do fc-match "$font" ; done
DejaVuSerif.ttf: "DejaVu Serif" "Book"
DejaVuSans.ttf: "DejaVu Sans" "Book"
DejaVuSansMono.ttf: "DejaVu Sans Mono" "Book"</pre></div><p>
   The result may vary on your system, depending on which fonts are currently
   installed.
  </p><div id="idm139698748165088" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Similarity Rules according to Fontconfig</h6><p>
    Fontconfig <span class="emphasis"><em>always</em></span> returns a real family (if at least
    one is installed) according to the given request, as similar as possible.
    <span class="quote">“<span class="quote">Similarity</span>”</span> depends on Fontconfig's internal metrics and on
    the user's or administrator's Fontconfig settings.
   </p></div></div><div class="sect2 " id="sec.x11.fontsys.install"><div class="titlepage"><div><div><h3 class="title" id="sec.x11.fontsys.install"><span class="number">20.1.4 </span><span class="name">Installing Fonts</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.install">#</a></h3></div></div></div><p>
   To install a new font there are these major methods:
  </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
     Manually install the font files such as <code class="filename">*.ttf</code> or
     <code class="filename">*.otf</code> to a known font directory. If it needs to be
     system-wide, use the standard directory
     <code class="filename">/usr/share/fonts</code>. For installation in your home
     directory, use <code class="filename">~/.config/fonts</code>.
    </p><p>
     If you want to deviate from the standard directories, Fontconfig allows
     you to choose another one. Let Fontconfig know by using the
     <code class="literal">&lt;dir&gt;</code> element, see
     <a class="xref" href="#sec.x11.fontsys.config.fontconfig" title="20.1.5.2. Diving into Fontconfig XML">Section 20.1.5.2, “Diving into Fontconfig XML”</a> for details.
    </p></li><li class="listitem "><p>
     Install fonts using <code class="command">zypper</code>. Lots of fonts are already
     available as a package, be it on your SUSE distribution or in the
     <a class="link" href="http://download.opensuse.org/repositories/M17N:/fonts/" target="_blank">M17N:fonts</a>
     repository. Add the repository to your list using the following command.
     For example, to add a repository for SLE 12:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper ar
     <span class="phrase">http://download.opensuse.org/repositories/M17N:/fonts/SLE_12_SP3/</span></pre></div><p>
     To search for your <em class="replaceable ">FONT_FAMILY_NAME</em> use this
     command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>zypper se '<em class="replaceable ">FONT_FAMILY_NAME</em>*fonts'</pre></div></li></ol></div></div><div class="sect2 " id="sec.x11.fontsys.config"><div class="titlepage"><div><div><h3 class="title" id="sec.x11.fontsys.config"><span class="number">20.1.5 </span><span class="name">Configuring the Appearance of Fonts</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.config">#</a></h3></div></div></div><p>
   Depending on the rendering medium, and font size, the result may be
   unsatisfactory. For example, an average monitor these days has a resolution
   of 100dpi which makes pixels too big and glyphs look clunky.
  </p><p>
   There are several algorithms available to deal with low resolutions, such as
   anti-aliasing (grayscale smoothing), hinting (fitting to the grid), or
   subpixel rendering (tripling resolution in one direction). These algorithms
   can also differ from one font format to another.
  </p><div id="idm139698748146864" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Patent Issues with Subpixel Rendering</h6><p>
    Subpixel rendering is not used in SUSE distributions.
    Although FreeType2 has support for this algorithm, it is covered by several
    patents expiring at the end of the year 2019. Therefore, setting subpixel
    rendering options in Fontconfig has no effect unless the system has a
    FreeType2 library with subpixel rendering compiled in.
   </p></div><p>
   Via Fontconfig, it is possible to select a rendering algorithms for every
   font individually or for a set of fonts.
  </p><div class="sect3 " id="sec.x11.fontsys.config.sysconfig"><div class="titlepage"><div><div><h4 class="title" id="sec.x11.fontsys.config.sysconfig"><span class="number">20.1.5.1 </span><span class="name">Configuring Fonts via <code class="literal">sysconfig</code></span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.config.sysconfig">#</a></h4></div></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> comes with a <code class="literal">sysconfig</code> layer above
    Fontconfig. This is a good starting point for experimenting with font
    configuration. To change the default settings, edit the configuration file
    <code class="filename">/etc/sysconfig/fonts-config</code>. (or use the YaST
    sysconfig module). After you have edited the file, run
    <code class="command">fonts-config</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> /usr/sbin/fonts-config</pre></div><p>
    Restart the application to make the effect visible. Keep in mind the
    following issues:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      A few applications do need not to be restarted. For example, Firefox
      re-reads Fontconfig configuration from time to time. Newly created or
      reloaded tabs get new font configurations later.
     </p></li><li class="listitem "><p>
      The <code class="command">fonts-config</code> script is called automatically after
      every package installation or removal (if not, it is a bug of the font
      software package).
     </p></li><li class="listitem "><p>
      Every sysconfig variable can be temporarily overridden by the
      <code class="command">fonts-config</code> command line option. See
      <code class="command">fonts-config --help</code> for details.
     </p></li></ul></div><p>
    There are several sysconfig variables which can be altered. See
    <code class="command">man 1 fonts-config</code> or the help page of the YaST
    sysconfig module. The following variables are examples:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748131648"><span class="term ">Usage of Rendering Algorithms</span></dt><dd><p>
       Consider <code class="varname">FORCE_HINTSTYLE</code>,
       <code class="varname">FORCE_AUTOHINT</code>, <code class="varname">FORCE_BW</code>,
       <code class="varname">FORCE_BW_MONOSPACE</code>,
       <code class="varname">USE_EMBEDDED_BITMAPS</code> and
       <code class="varname">EMBEDDED_BITMAP_LANGAGES</code>
      </p></dd><dt id="idm139698748127136"><span class="term ">Preference Lists of Generic Aliases</span></dt><dd><p>
       Use <code class="varname">PREFER_SANS_FAMILIES</code>,
       <code class="varname">PREFER_SERIF_FAMILIES</code>,
       <code class="varname">PREFER_MONO_FAMILIES</code> and
       <code class="varname">SEARCH_METRIC_COMPATIBLE</code>
      </p></dd></dl></div><p>
    The following list provides some configuration examples, sorted from the
    <span class="quote">“<span class="quote">most readable</span>”</span> fonts (more contrast) to <span class="quote">“<span class="quote">most
    beautiful</span>”</span> (more smoothed).
   </p><div class="variablelist "><dl class="variablelist"><dt id="vle.x11.fontsys.sysconfig.bitmap"><span class="term ">Bitmap Fonts</span></dt><dd><p>
       Prefer bitmap fonts via the <code class="varname">PREFER_*_FAMILIES</code>
       variables. Follow the example in the help section for these variables.
       Be aware that these fonts are rendered black and white, not smoothed and
       that bitmap fonts are available in several sizes only. Consider using
      </p><div class="verbatim-wrap"><pre class="screen">SEARCH_METRIC_COMPATIBLE="no"</pre></div><p>
       to disable metric compatibility-driven family name substitutions.
      </p></dd><dt id="vle.x11.fontsys.sysconfig.bw"><span class="term ">Scalable Fonts Rendered Black and White</span></dt><dd><p>
       Scalable fonts rendered without antialiasing can result in a similar
       outcome to bitmap fonts, while maintaining font scalability. Use well
       hinted fonts like the Liberation families. Unfortunately, there is a
       lack of well hinted fonts though. Set the following variable to force
       this method:
      </p><div class="verbatim-wrap"><pre class="screen">FORCE_BW="yes"</pre></div></dd><dt id="vle.x11.fontsys.sysconfig.bw_monospace"><span class="term ">Monospaced Fonts Rendered Black and White</span></dt><dd><p>
       Render monospaced fonts without antialiasing only, otherwise use default
       settings:
      </p><div class="verbatim-wrap"><pre class="screen">FORCE_BW_MONOSPACE="yes"</pre></div></dd><dt id="vle.x11.fontsys.sysconfig.default"><span class="term ">Default Settings</span></dt><dd><p>
       All fonts are rendered with antialiasing. Well hinted fonts will be
       rendered with the <span class="emphasis"><em>byte code interpreter</em></span> (BCI) and
       the rest with autohinter (<code class="literal">hintstyle=hintslight</code>).
       Leave all relevant sysconfig variables to the default setting.
      </p></dd><dt id="vle.x11.fontsys.sysconfig.cff"><span class="term ">CFF Fonts</span></dt><dd><p>
       Use fonts in CFF format. They can be considered also more readable than
       the default TrueType fonts given the current improvements in FreeType2.
       Try them out by following the example of
       <code class="literal">PREFER_*_FAMILIES</code>. Possibly make them more dark and
       bold with:
      </p><div class="verbatim-wrap"><pre class="screen">SEARCH_METRIC_COMPATIBLE="no"</pre></div><p>
       as they are rendered by <code class="literal">hintstyle=hintslight</code> by
       default. Also consider using:
      </p><div class="verbatim-wrap"><pre class="screen">SEARCH_METRIC_COMPATIBLE="no"</pre></div></dd><dt id="ex.x11.fontsys.sysconfig.autohint"><span class="term ">Autohinter Exclusively</span></dt><dd><p>
       Even for a well hinted font, use FreeType2's autohinter. That can lead
       to thicker, sometimes fuzzier letter shapes with lower contrast. Set the
       following variable to activate this:
      </p><div class="verbatim-wrap"><pre class="screen">FORCE_AUTOHINTER="yes"</pre></div><p>
       Use <code class="literal">FORCE_HINTSTYLE</code> to control the level of hinting.
      </p></dd></dl></div></div><div class="sect3 " id="sec.x11.fontsys.config.fontconfig"><div class="titlepage"><div><div><h4 class="title" id="sec.x11.fontsys.config.fontconfig"><span class="number">20.1.5.2 </span><span class="name">Diving into Fontconfig XML</span> <a title="Permalink" class="permalink" href="#sec.x11.fontsys.config.fontconfig">#</a></h4></div></div></div><p>
    Fontconfig's configuration format is the <span class="emphasis"><em>eXtensible Markup
    Language</em></span> (XML). These few examples are not a complete reference,
    but a brief overview. Details and other inspiration can be found in
    <code class="command">man 5 fonts-conf</code> or in
    <code class="filename">/etc/fonts/conf.d/</code>.
   </p><p>
    The central Fontconfig configuration file is
    <code class="filename">/etc/fonts/fonts.conf</code>, which—along other
    work—includes the whole <code class="filename">/etc/fonts/conf.d/</code>
    directory. To customize Fontconfig, there are two places where you can
    insert your changes:
   </p><div class="orderedlist " id="ol.x11.fontsys.configfiles"><div class="orderedlist-title-wrap"><h6 class="orderedlist-title"><span class="name">Fontconfig Configuration Files </span><a title="Permalink" class="permalink" href="#ol.x11.fontsys.configfiles">#</a></h6></div><ol class="orderedlist" type="1"><li class="listitem "><p><span class="formalpara-title">System-wide changes. </span>
       Edit the file <code class="filename">/etc/fonts/local.conf</code> (by default, it
       contains an empty <code class="literal">fontconfig</code> element).
      </p></li><li class="listitem "><p><span class="formalpara-title">User-specific changes. </span>
       Edit the file <code class="filename">~/.config/fontconfig/fonts.conf</code>.
       Place Fontconfig configuration files in the
       <code class="filename">~/.config/fontconfig/conf.d/</code> directory.
      </p></li></ol></div><p>
    User-specific changes overwrite any system-wide settings.
   </p><div id="idm139698748087232" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Deprecated User Configuration File</h6><p>
     The file <code class="filename">~/.fonts.conf</code> is marked as deprecated and
     should not be used anymore. Use
     <code class="filename">~/.config/fontconfig/fonts.conf</code> instead.
    </p></div><p>
    Every configuration file needs to have a <code class="literal">fontconfig</code>
    element. As such, the minimal file looks like this:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;?xml version="1.0"?&gt;
   &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
   &lt;fontconfig&gt;
   &lt;!-- Insert your changes here --&gt;
   &lt;/fontconfig&gt;</pre></div><p>
    If the default directories are not enough, insert the
    <code class="literal">dir</code> element with the respective directory:
   </p><div class="verbatim-wrap"><pre class="screen">&lt;dir&gt;/usr/share/fonts2&lt;/dir&gt;</pre></div><p>
    Fontconfig searches <span class="emphasis"><em>recursively</em></span> for fonts.
   </p><p>
    Font-rendering algorithms can be chosen with following Fontconfig snippet
    (see <a class="xref" href="#ex.x11.fontsys.fontconfig.rendering_algorithms" title="Specifying Rendering Algorithms">Example 20.1, “Specifying Rendering Algorithms”</a>):
   </p><div class="example" id="ex.x11.fontsys.fontconfig.rendering_algorithms"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 20.1: </span><span class="name">Specifying Rendering Algorithms </span><a title="Permalink" class="permalink" href="#ex.x11.fontsys.fontconfig.rendering_algorithms">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;match target="font"&gt;
 &lt;test name="family"&gt;
  &lt;string&gt;<em class="replaceable ">FAMILY_NAME</em>&lt;/string&gt;
 &lt;/test&gt;
 &lt;edit name="antialias" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hinting" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="autohint" mode="assign"&gt;
  &lt;bool&gt;false&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hintstyle" mode="assign"&gt;
  &lt;const&gt;hintfull&lt;/const&gt;
 &lt;/edit&gt;
&lt;/match&gt;</pre></div></div></div><p>
    Various properties of fonts can be tested. For example, the
    <code class="literal">&lt;test&gt;</code> element can test for the font family (as
    shown in the example), size interval, spacing, font format, and others.
    When abandoning <code class="literal">&lt;test&gt;</code> completely, all
    <code class="literal">&lt;edit&gt;</code> elements will be applied to every font
    (global change).
   </p><div class="complex-example"><div class="example" id="ex.x11.fontsys.fontconfig.aliases1"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 20.2: </span><span class="name">Aliases and Family Name Substitutions </span><a title="Permalink" class="permalink" href="#ex.x11.fontsys.fontconfig.aliases1">#</a></h6></div><div class="example-contents"><div class="variablelist "><dl class="variablelist"><dt id="vle.x11.fontsys.example.alias.default"><span class="term ">Rule 1</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;</pre></div></dd><dt id="vle.x11.fontsys.example.alias.prefer"><span class="term ">Rule 2</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</pre></div></dd><dt id="vle.x11.fontsys.example.alias.accept"><span class="term ">Rule 3</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</pre></div></dd></dl></div></div></div></div><p>
    The rules from <a class="xref" href="#ex.x11.fontsys.fontconfig.aliases1" title="Aliases and Family Name Substitutions">Example 20.2, “Aliases and Family Name Substitutions”</a> create
    a <span class="emphasis"><em>prioritized family list</em></span> (PFL). Depending on the
    element, different actions are performed:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698748064672"><span class="term "><code class="literal">&lt;default&gt;</code> from
     <a class="xref" href="#vle.x11.fontsys.example.alias.default">Rule 1</a>
     </span></dt><dd><p>
       This rule adds a <code class="literal">serif</code> family name <span class="emphasis"><em>at the
       end</em></span> of the PFL.
      </p></dd><dt id="idm139698748061104"><span class="term "><code class="literal">&lt;prefer&gt;</code> from
     <a class="xref" href="#vle.x11.fontsys.example.alias.prefer">Rule 2</a>
     </span></dt><dd><p>
       This rule adds <span class="quote">“<span class="quote">Droid Serif</span>”</span> <span class="emphasis"><em>just
       before</em></span> the first occurrence of <code class="literal">serif</code> in
       the PFL, whenever <code class="literal">Alegreya SC</code> is in PFL.
      </p></dd><dt id="idm139698748056624"><span class="term "><code class="literal">&lt;accept&gt;</code> from <a class="xref" href="#vle.x11.fontsys.example.alias.accept">Rule 3</a>
     </span></dt><dd><p>
       This rule adds a <span class="quote">“<span class="quote">STIXGeneral</span>”</span> family name <span class="emphasis"><em>just
       after</em></span> the first occurrence of the <code class="literal">serif</code>
       family name in the PFL.
      </p></dd></dl></div><p>
    Putting this together, when snippets occur in the order
    <a class="xref" href="#vle.x11.fontsys.example.alias.default">Rule 1</a> -
    <a class="xref" href="#vle.x11.fontsys.example.alias.prefer">Rule 2</a> -
    <a class="xref" href="#vle.x11.fontsys.example.alias.accept">Rule 3</a> and the user
    requests <span class="quote">“<span class="quote">Alegreya SC</span>”</span>, then the PFL is created as depicted in
    <a class="xref" href="#tab.x11.fontsys.example.alias" title="Generating PFL from Fontconfig rules">Table 20.1, “Generating PFL from Fontconfig rules”</a>.
   </p><div class="table" id="tab.x11.fontsys.example.alias"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 20.1: </span><span class="name">Generating PFL from Fontconfig rules </span><a title="Permalink" class="permalink" href="#tab.x11.fontsys.example.alias">#</a></h6></div><div class="table-contents"><table summary="Generating PFL from Fontconfig rules" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
        <p>
         Order
        </p>
       </th><th>
        <p>
         Current PFL
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         Request
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.default">Rule 1</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">serif</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.prefer">Rule 2</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.accept">Rule 3</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>, <code class="literal">STIXGeneral</code>
        </p>
       </td></tr></tbody></table></div></div><p>
    In Fontconfig's metrics, the family name has the highest priority over
    other patterns, like style, size, etc. Fontconfig checks which family is
    currently installed on the system. If <span class="quote">“<span class="quote">Alegreya SC</span>”</span> is
    installed, then Fontconfig returns it. If not, it asks for <span class="quote">“<span class="quote">Droid
    Serif</span>”</span>, etc.
   </p><p>
    Be careful. When the order of Fontconfig snippets is changed, Fontconfig
    can return different results, as depicted in
    <a class="xref" href="#tab.x11.fontsys.example.alias2" title="Results from Generating PFL from Fontconfig Rules with Changed Order">Table 20.2, “Results from Generating PFL from Fontconfig Rules with Changed Order”</a>.
   </p><div class="table" id="tab.x11.fontsys.example.alias2"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 20.2: </span><span class="name">Results from Generating PFL from Fontconfig Rules with Changed Order </span><a title="Permalink" class="permalink" href="#tab.x11.fontsys.example.alias2">#</a></h6></div><div class="table-contents"><table summary="Results from Generating PFL from Fontconfig Rules with Changed Order" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>
        <p>
         Order
        </p>
       </th><th>
        <p>
         Current PFL
        </p>
       </th><th>
        <p>
         Note
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         Request
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td><td>
        <p>
         Same request performed.
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.prefer">Rule 2</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td><td>
        <p>
         <code class="literal">serif</code> not in PFL, nothing is substituted
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.accept">Rule 3</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td><td>
        <p>
         <code class="literal">serif</code> not in PFL, nothing is substituted
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.default">Rule 1</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">serif</code>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code> present in PFL, substitution is
         performed
        </p>
       </td></tr></tbody></table></div></div><div id="idm139698748000704" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Implication</h6><p>
     Think of the <code class="literal">&lt;default&gt;</code> alias as a classification
     or inclusion of this group (if not installed). As the example shows,
     <code class="literal">&lt;default&gt;</code> should always precede the
     <code class="literal">&lt;prefer&gt;</code> and <code class="literal">&lt;accept&gt;</code>
     aliases of that group.
    </p><p>
     <code class="literal">&lt;default&gt;</code> classification is not limited to the
     generic aliases serif, sans-serif and monospace. See
     <code class="filename">/usr/share/fontconfig/conf.avail/30-metric-aliases.conf</code>
     for a complex example.
    </p></div><p>
    The following Fontconfig snippet in
    <a class="xref" href="#ex.x11.fontsys.fontconfig.aliases2" title="Aliases and Family Name Substitutions">Example 20.3, “Aliases and Family Name Substitutions”</a> creates a
    <code class="literal">serif</code> group. Every family in this group could substitute
    others when a former font is not installed.
   </p><div class="example" id="ex.x11.fontsys.fontconfig.aliases2"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 20.3: </span><span class="name">Aliases and Family Name Substitutions </span><a title="Permalink" class="permalink" href="#ex.x11.fontsys.fontconfig.aliases2">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
  &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</pre></div></div></div><p>
    Priority is given by the order in the <code class="literal">&lt;accept&gt;</code>
    alias. Similarly, stronger <code class="literal">&lt;prefer&gt;</code> aliases can be
    used.
   </p><p>
    <a class="xref" href="#ex.x11.fontsys.fontconfig.aliases1" title="Aliases and Family Name Substitutions">Example 20.2, “Aliases and Family Name Substitutions”</a> is expanded by
    <a class="xref" href="#ex.x11.fontsys.fontconfig.aliases3" title="Aliases and Family Names Substitutions">Example 20.4, “Aliases and Family Names Substitutions”</a>.
   </p><div class="complex-example"><div class="example" id="ex.x11.fontsys.fontconfig.aliases3"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 20.4: </span><span class="name">Aliases and Family Names Substitutions </span><a title="Permalink" class="permalink" href="#ex.x11.fontsys.fontconfig.aliases3">#</a></h6></div><div class="example-contents"><div class="variablelist "><dl class="variablelist"><dt id="vle.x11.fontsys.example.alias.accept2"><span class="term ">Rule 4</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Liberation Serif&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</pre></div></dd><dt id="vle.x11.fontsys.example.alias.prefer2"><span class="term ">Rule 5</span></dt><dd><div class="verbatim-wrap"><pre class="screen">&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;DejaVu Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</pre></div></dd></dl></div></div></div></div><p>
    The expanded configuration from
    <a class="xref" href="#ex.x11.fontsys.fontconfig.aliases3" title="Aliases and Family Names Substitutions">Example 20.4, “Aliases and Family Names Substitutions”</a> would lead to the
    following PFL evolution:
   </p><div class="table" id="tab.x11.fontsys.example.alias3"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 20.3: </span><span class="name">Results from Generating PFL from Fontconfig Rules </span><a title="Permalink" class="permalink" href="#tab.x11.fontsys.example.alias3">#</a></h6></div><div class="table-contents"><table summary="Results from Generating PFL from Fontconfig Rules" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
        <p>
         Order
        </p>
       </th><th>
        <p>
         Current PFL
        </p>
       </th></tr></thead><tbody><tr><td>
        <p>
         Request
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.default">Rule 1</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">serif</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.prefer">Rule 2</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.accept">Rule 3</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>, <code class="literal">STIXGeneral</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.accept2">Rule 4</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">serif</code>, <code class="literal">Liberation Serif</code>,
         <code class="literal">STIXGeneral</code>
        </p>
       </td></tr><tr><td>
        <p>
         <a class="xref" href="#vle.x11.fontsys.example.alias.prefer2">Rule 5</a>
        </p>
       </td><td>
        <p>
         <code class="literal">Alegreya SC</code>, <code class="literal">Droid Serif</code>,
         <code class="literal">DejaVu Serif</code>, <code class="literal">serif</code>,
         <code class="literal">Liberation Serif</code>, <code class="literal">STIXGeneral</code>
        </p>
       </td></tr></tbody></table></div></div><div id="idm139698747949456" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Implications.</h6><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       In case multiple <code class="literal">&lt;accept&gt;</code> declarations for the
       same generic name exist, the declaration that is parsed last
       <span class="quote">“<span class="quote">wins</span>”</span>. If possible, do not use
       <code class="literal">&lt;accept&gt;</code> <span class="bold"><strong>after</strong></span>
       user (<code class="filename">/etc/fonts/conf.d/*-user.conf</code>) when creating
       a system-wide configuration.
      </p></li><li class="listitem "><p>
       In case multiple <code class="literal">&lt;prefer</code> declarations for the same
       generic name exist, the declaration that is parsed last
       <span class="quote">“<span class="quote">wins</span>”</span>. If possible, do not use
       <code class="literal">&lt;prefer&gt;</code>
       <span class="bold"><strong>before</strong></span> user in the system-wide
       configuration.
      </p></li><li class="listitem "><p>
       Every <code class="literal">&lt;prefer&gt;</code> declaration overwrites
       <code class="literal">&lt;accept&gt;</code> declarations for the same generic
       name. If the administrator wants to allow the user to utilize even
       <code class="literal">&lt;accept&gt;</code> and not only
       <code class="literal">&lt;prefer&gt;</code>,the administrator should not use
       <code class="literal">&lt;prefer&gt;</code> in the system-wide configuration. On
       the other hand, as users mostly use <code class="literal">&lt;prefer&gt;</code>,
       this should not have any detrimental effect. We also see the use of
       <code class="literal">&lt;prefer&gt;</code> also in system wide configurations.
      </p></li></ul></div></div></div></div></div><div class="sect1 " id="sec.x11.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.x11.moreinfo"><span class="number">20.2 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.x11.moreinfo">#</a></h2></div></div></div><p>
   Install the packages <code class="systemitem">xorg-docs</code> to
   get more in-depth information about X11. <code class="command">man 5 xorg.conf</code>
   tells you more about the format of the manual configuration (if needed).
   More information on the X11 development can be found on the project's home
   page at <a class="link" href="http://www.x.org" target="_blank">http://www.x.org</a>.
  </p><p>
   Drivers are found in <code class="systemitem">xf86-video-*</code> packages, for
   example <code class="systemitem">xf86-video-nv</code>. Many of the drivers
   delivered with these packages are described in detail in the related manual
   page. For example, if you use the <code class="literal">nv</code> driver, find more
   information about this driver in <code class="command">man 4 nv</code>.
  </p><p>
   Information about third-party drivers should be available in
   <code class="filename">/usr/share/doc/packages/&lt;package_name&gt;</code>. For
   example, the documentation of
   <code class="systemitem">x11-video-nvidiaG03</code> is available
   in <code class="filename">/usr/share/doc/packages/x11-video-nvidiaG03</code> after
   the package was installed.
  </p></div></div><div class="chapter " id="cha.fuse"><div class="titlepage"><div><div><h2 class="title"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span> <a title="Permalink" class="permalink" href="#cha.fuse">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>fuse.xml</li><li><span class="ds-label">ID: </span>cha.fuse</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698747924832">#</a></h6></div><p>
    FUSE is the acronym for <span class="emphasis"><em>file system in user space</em></span>.
    This means you can configure and mount a file system as an unprivileged
    user. Normally, you need to be
    <code class="systemitem">root</code> for this task. FUSE alone is
    a kernel module. Combined with plug-ins, it allows you to extend FUSE to
    access almost all file systems like remote SSH connections, ISO images, and
    more.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.fuse.config"><span class="number">21.1 </span><span class="name">Configuring FUSE</span></a></span></dt><dt><span class="sect1"><a href="#sec.fuse.ntfs"><span class="number">21.2 </span><span class="name">Mounting an NTFS Partition</span></a></span></dt><dt><span class="sect1"><a href="#sec.fuse.moreinfo"><span class="number">21.3 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.fuse.config"><div class="titlepage"><div><div><h2 class="title" id="sec.fuse.config"><span class="number">21.1 </span><span class="name">Configuring FUSE</span> <a title="Permalink" class="permalink" href="#sec.fuse.config">#</a></h2></div></div></div><p>
   Before you can use FUSE, you need to install the package
   <code class="systemitem">fuse</code>. Depending which file system
   you want to use, you need additional plug-ins available as separate
   packages. 
  </p><p>
   Generally you do not need to configure FUSE. However, it is a good idea to
   create a directory where all your mount points are combined. For example,
   you can create a directory <code class="filename">~/mounts</code> and insert your
   subdirectories for your different file systems there.
  </p></div><div class="sect1 " id="sec.fuse.ntfs"><div class="titlepage"><div><div><h2 class="title" id="sec.fuse.ntfs"><span class="number">21.2 </span><span class="name">Mounting an NTFS Partition</span> <a title="Permalink" class="permalink" href="#sec.fuse.ntfs">#</a></h2></div></div></div><p>
   NTFS, the <span class="emphasis"><em>New Technology File System</em></span>, is the default
   file system of Windows. Since under normal circumstances the unprivileged user cannot mount NTFS block devices using the external FUSE library, the process of mounting a Windows partition described below requires root privileges.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Become <code class="systemitem">root</code> and install the
     package <code class="systemitem">ntfs-3g</code>. 
    </p></li><li class="step "><p>
     Create a directory that is to be used as a mount point, for example
     <code class="filename">~/mounts/windows</code>.
    </p></li><li class="step "><p>
     Find out which Windows partition you need. Use YaST and start the
     partitioner module to see which partition belongs to Windows, but do not
     modify anything. Alternatively, become <code class="systemitem">root</code> and execute
     <code class="command">/sbin/fdisk</code> <code class="option">-l</code>. Look for partitions
     with a partition type of <code class="literal">HPFS/NTFS</code>.
    </p></li><li class="step "><p>
     Mount the partition in read-write mode. Replace the placeholder
     <em class="replaceable ">DEVICE</em> with your respective Windows partition:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>ntfs-3g /dev/<em class="replaceable ">DEVICE</em> <em class="replaceable ">MOUNT POINT</em></pre></div><p>
     To use your Windows partition in read-only mode, append <code class="option">-o
     ro</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>ntfs-3g /dev/<em class="replaceable ">DEVICE</em> <em class="replaceable ">MOUNT POINT</em> -o ro</pre></div><p>
     The command <code class="command">ntfs-3g</code> uses the current user (UID) and
     group (GID) to mount the given device. If you want to set the write
     permissions to a different user, use the command <code class="command">id</code>
     <code class="option">USER</code> to get the output of the UID and GID values. Set it
     with:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>id tux
uid=1000(tux) gid=100(users) groups=100(users),16(dialout),33(video)
ntfs-3g /dev/<em class="replaceable ">DEVICE</em> <em class="replaceable ">MOUNT POINT</em> -o uid=1000,gid=100</pre></div><p>
     Find additional options in the man page.
    </p></li></ol></div></div><p>
   To unmount the resource, run <code class="command">fusermount -u</code>
   <em class="replaceable ">MOUNT POINT</em>.
  </p></div><div class="sect1 " id="sec.fuse.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.fuse.moreinfo"><span class="number">21.3 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.fuse.moreinfo">#</a></h2></div></div></div><p>
   See the home page <a class="link" href="http://fuse.sourceforge.net" target="_blank">http://fuse.sourceforge.net</a> of FUSE
   for more information.
  </p></div></div><div class="chapter " id="cha.mod"><div class="titlepage"><div><div><h2 class="title"><span class="number">22 </span><span class="name">Managing Kernel Modules</span> <a title="Permalink" class="permalink" href="#cha.mod">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>kernel_modules.xml</li><li><span class="ds-label">ID: </span>cha.mod</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.mod.lsmod"><span class="number">22.1 </span><span class="name">Listing Loaded Modules with lsmod and modinfo</span></a></span></dt><dt><span class="sect1"><a href="#sec.mod.modprobe"><span class="number">22.2 </span><span class="name">Adding and Removing Kernel Modules</span></a></span></dt></dl></div></div><p>
   Although Linux is a monolithic kernel, it can be extended using kernel
   modules. These are special objects that can be inserted into the kernel and
   removed on demand. In practical terms, kernel modules make it possible to
   add and remove drivers and interfaces that are not included in the kernel
   itself. Linux provides several commands for managing kernel modules.
 </p><div class="sect1 " id="sec.mod.lsmod"><div class="titlepage"><div><div><h2 class="title" id="sec.mod.lsmod"><span class="number">22.1 </span><span class="name">Listing Loaded Modules with lsmod and modinfo</span> <a title="Permalink" class="permalink" href="#sec.mod.lsmod">#</a></h2></div></div></div><p>
    Use the <code class="command">lsmod</code> command to view what kernel modules are
    currently loaded. The output of the command may look as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>lsmod
Module                  Size  Used by
snd_usb_audio         188416  2
snd_usbmidi_lib        36864  1 snd_usb_audio
hid_plantronics        16384  0
snd_rawmidi            36864  1 snd_usbmidi_lib
snd_seq_device         16384  1 snd_rawmidi
fuse                  106496  3
nfsv3                  45056  1
nfs_acl                16384  1 nfsv3</pre></div><p>
    The output is divided into three columns. The <code class="literal">Module</code> column lists the names
    of the loaded modules, while the <code class="literal">Size</code> column displays the size of each
    module. The <code class="literal">Used by</code> column shows the number of referring
    modules and their names. Note that this list may be incomplete.
  </p><p>
    To view detailed information about a specific kernel module, use the
    <code class="command">modinfo <em class="replaceable ">MODULE_NAME</em></code> command, where
    <em class="replaceable ">MODULE_NAME</em> is the name of the desired kernel
    module. Note that the <code class="command">modinfo</code> binary resides in the
    <code class="filename">/sbin</code> directory that is not in the user's PATH
    environment variable. This means that you must specify the full path to the
    binary when running <code class="command">modinfo</code> command as a regular user:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>/sbin/modinfo kvm
filename:       /lib/modules/4.4.57-18.3-default/kernel/arch/x86/kvm/kvm.ko
license:        GPL
author:         Qumranet
srcversion:     BDFD8098BEEA517CB75959B
depends:        irqbypass
intree:         Y
vermagic:       4.4.57-18.3-default SMP mod_unload modversions
signer:         openSUSE Secure Boot Signkey
sig_key:        03:32:FA:9C:BF:0D:88:BF:21:92:4B:0D:E8:2A:09:A5:4D:5D:EF:C8
sig_hashalgo:   sha256
parm:           ignore_msrs:bool
parm:           min_timer_period_us:uint
parm:           kvmclock_periodic_sync:bool
parm:           tsc_tolerance_ppm:uint
parm:           lapic_timer_advance_ns:uint
parm:           halt_poll_ns:uint
parm:           halt_poll_ns_grow:int
parm:           halt_poll_ns_shrink:int</pre></div></div><div class="sect1 " id="sec.mod.modprobe"><div class="titlepage"><div><div><h2 class="title" id="sec.mod.modprobe"><span class="number">22.2 </span><span class="name">Adding and Removing Kernel Modules</span> <a title="Permalink" class="permalink" href="#sec.mod.modprobe">#</a></h2></div></div></div><p>
      While it is possible to use <code class="systemitem">insmod</code> and
      <code class="systemitem">rmmod</code> to add and remove kernel modules, it is recommended to use the
      <code class="systemitem">modprobe</code> tool instead. <code class="systemitem">modprobe</code> offers several
      important advantages, including automatic dependency resolution and
      blacklisting.
    </p><p>
      When used without any parameters, the <code class="systemitem">modprobe</code>
      command installs a specified kernel module. <code class="systemitem">modprobe</code> must be run with root privileges:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> modprobe acpi</pre></div><p>
      To remove a kernel module, use the <code class="command">-r</code> parameter:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> modprobe -r acpi</pre></div><div class="sect2 " id="sec.mod.modprobe.d"><div class="titlepage"><div><div><h3 class="title" id="sec.mod.modprobe.d"><span class="number">22.2.1 </span><span class="name">Loading Kernel Modules Automatically on Boot</span> <a title="Permalink" class="permalink" href="#sec.mod.modprobe.d">#</a></h3></div></div></div><p>
      Instead of loading kernel modules manually, you can load them
      automatically during the boot process using the
    <code class="systemitem">system-modules-load.service</code> service. To enable a
    kernel module, add a <code class="filename">.conf</code> file to the
    <code class="filename">/etc/modules-load.d/</code> directory. It is good practice
    to give the configuration file the same name as the module, for example:</p><div class="verbatim-wrap"><pre class="screen">/etc/modules-load.d/rt2800usb.conf</pre></div><p>
      The configuration file must contain the name of the desired kernel
      module (for example, <code class="literal">rt2800usb</code>).
    </p><p>
      The described technique allows you to load kernel modules without any
      parameters. If you need to load a kernel module with specific options,
      add a configuration file to the <code class="filename">/etc/modprobe.d/</code>
      directory instead. The file must have the <code class="filename">.conf</code>
      extension. The name of the file should adhere to the following naming convention:
      <code class="literal">priority-modulename.conf</code>, for example:
      <code class="filename">50-thinkfan.conf</code>. The configuration file must
      contain the name of the kernel module and the desired parameters. You can use the
    example command below to create a configuration file containing the name of the kernel module and its parameters:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>echo "options thinkpad_acpi fan_control=1" | sudo tee /etc/modprobe.d/thinkfan.conf</pre></div><div id="idm139698747862160" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Loading Kernel Modules</h6><p>
          Most kernel modules are loaded by the system automatically when a
          device is detected or user space requests specific
          functionality. Thus, adding modules manually to
          <code class="filename">/etc/modules-load.d/</code> is rarely required.
         </p></div></div><div class="sect2 " id="sec.mod.modprobe.blacklist"><div class="titlepage"><div><div><h3 class="title" id="sec.mod.modprobe.blacklist"><span class="number">22.2.2 </span><span class="name">Blacklisting Kernel Modules with modprobe</span> <a title="Permalink" class="permalink" href="#sec.mod.modprobe.blacklist">#</a></h3></div></div></div><p>
      Blacklisting a kernel module prevents it from loading during the boot
      process. This can be useful when you want to disable a module that you
      suspect is causing problems on your system. Note that you can still load
      blacklisted kernel modules manually using the
      <code class="systemitem">insmod</code> or <code class="systemitem">modprobe</code> tools.
    </p><p>
      To blacklist a module, add the
      <code class="literal">blacklist <em class="replaceable ">MODULE_NAME</em></code> line
      to the <code class="filename">/etc/modprobe.d/50-blacklist.conf</code> file. For example:
    </p><div class="verbatim-wrap"><pre class="screen">blacklist nouveau</pre></div><p>
      Run the <code class="command">mkinitrd</code> command as root to generate a new <code class="systemitem">initrd</code>
      image, then reboot your machine. These steps can be performed using the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>su
echo "blacklist nouveau" &gt;&gt; /etc/modprobe.d/50-blacklist.conf &amp;&amp; mkinitrd &amp;&amp; reboot</pre></div><p>
      To disable a kernel module temporarily only,
      blacklist it on-the-fly during the boot. To do this, press the
      <span class="keycap">E</span> key when you see the boot screen. This drops you into
      a minimal editor that allows you to modify boot parameters. Locate the
      line that looks as follows:
    </p><div class="verbatim-wrap"><pre class="screen">linux /boot/vmlinuz...splash= silent quiet showopts</pre></div><p>
      Add the
      <code class="command">modprobe.blacklist=<em class="replaceable ">MODULE_NAME</em></code>
      command to the end of the line. For example:
    </p><div class="verbatim-wrap"><pre class="screen">linux /boot/vmlinuz...splash= silent quiet showopts modprobe.blacklist=nouveau</pre></div><p>
      Press <span class="keycap">F10</span> or <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">X</span> to boot with the
      specified configuration.
    </p><p>
      To blacklist a kernel module permanently via GRUB, open the
      <code class="filename">/etc/default/grub</code> file for editing, and add the
      <code class="command">modprobe.blacklist=<em class="replaceable ">MODULE_NAME</em></code>
      option to the <code class="command">GRUB_CMD_LINUX</code> command. Then run the
      <code class="command">sudo grub2-mkconfig -o /boot/grub2/grub.cfg</code> command to enable
      the changes.
    </p></div></div></div><div class="chapter " id="cha.udev"><div class="titlepage"><div><div><h2 class="title"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span> <a title="Permalink" class="permalink" href="#cha.udev">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>udev.xml</li><li><span class="ds-label">ID: </span>cha.udev</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.udev.devdir"><span class="number">23.1 </span><span class="name">The <code class="filename">/dev</code> Directory</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.kernel"><span class="number">23.2 </span><span class="name">Kernel <code class="systemitem">uevents</code> and <code class="systemitem">udev</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.drivers"><span class="number">23.3 </span><span class="name">Drivers, Kernel Modules and Devices</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.boot"><span class="number">23.4 </span><span class="name">Booting and Initial Device Setup</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.debug"><span class="number">23.5 </span><span class="name">Monitoring the Running <code class="systemitem">udev</code> Daemon</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.rules"><span class="number">23.6 </span><span class="name">Influencing Kernel Device Event Handling with <code class="systemitem">udev</code> Rules</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.persdev"><span class="number">23.7 </span><span class="name">Persistent Device Naming</span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.files"><span class="number">23.8 </span><span class="name">Files used by <code class="systemitem">udev</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.udev.moreinfo"><span class="number">23.9 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><p>
  The kernel can add or remove almost any device in a running system. Changes
  in the device state (whether a device is plugged in or removed) need to be
  propagated to user space. Devices need to be configured when they are
  plugged in and recognized. Users of a certain device need to be informed
  about any changes in this device's recognized state.
  <code class="systemitem">udev</code> provides the needed
  infrastructure to dynamically maintain the device node files and symbolic
  links in the <code class="filename">/dev</code> directory.
  <code class="systemitem">udev</code> rules provide a way to plug
  external tools into the kernel device event processing. This allows you to
  customize <code class="systemitem">udev</code> device handling by adding certain scripts to execute as part of kernel device
  handling, or request and import additional data to evaluate during device
  handling.
 </p><div class="sect1 " id="sec.udev.devdir"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.devdir"><span class="number">23.1 </span><span class="name">The <code class="filename">/dev</code> Directory</span> <a title="Permalink" class="permalink" href="#sec.udev.devdir">#</a></h2></div></div></div><p>
   The device nodes in the <code class="filename">/dev</code> directory provide access
   to the corresponding kernel devices. With
   <code class="systemitem">udev</code>, the <code class="filename">/dev</code>
   directory reflects the current state of the kernel. Every kernel device has
   one corresponding device file. If a device is disconnected from the system,
   the device node is removed.
  </p><p>
   The content of the <code class="filename">/dev</code> directory is kept on a
   temporary file system and all files are rendered at every system start-up.
   Manually created or modified files do not, by design, survive a reboot.
   Static files and directories that should always be in the
   <code class="filename">/dev</code> directory regardless of the state of the
   corresponding kernel device can be created with systemd-tmpfiles. The
   configuration files are found in <code class="filename">/usr/lib/tmpfiles.d/</code>
   and <code class="filename">/etc/tmpfiles.d/</code>; for more information, see the
   <code class="systemitem">systemd-tmpfiles(8)</code> man page.
  </p></div><div class="sect1 " id="sec.udev.kernel"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.kernel"><span class="number">23.2 </span><span class="name">Kernel <code class="systemitem">uevents</code> and <code class="systemitem">udev</code></span> <a title="Permalink" class="permalink" href="#sec.udev.kernel">#</a></h2></div></div></div><p>
   The required device information is exported by the
   <code class="systemitem">sysfs</code> file system. For every
   device the kernel has detected and initialized, a directory with the device
   name is created. It contains attribute files with device-specific
   properties.
  </p><p>
   Every time a device is added or removed, the kernel sends a uevent to notify
   <code class="systemitem">udev</code> of the change. The
   <code class="systemitem">udev</code> daemon reads and parses all
   provided rules from the <code class="filename">/etc/udev/rules.d/*.rules</code> files
   once at start-up and keeps them in memory. If rules files are changed, added
   or removed, the daemon can reload the in-memory representation of all rules
   with the command <code class="command">udevadm control --reload</code>. For more
   details on <code class="systemitem">udev</code> rules and their
   syntax, refer to <a class="xref" href="#sec.udev.rules" title="23.6. Influencing Kernel Device Event Handling with udev Rules">Section 23.6, “Influencing Kernel Device Event Handling with <code class="systemitem">udev</code> Rules”</a>.
  </p><p>
   Every received event is matched against the set of provides rules. The rules
   can add or change event environment keys, request a specific name for the
   device node to create, add symbolic links pointing to the node or add
   programs to run after the device node is created. The driver core
   <code class="systemitem">uevents</code> are received from a kernel
   netlink socket.
  </p></div><div class="sect1 " id="sec.udev.drivers"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.drivers"><span class="number">23.3 </span><span class="name">Drivers, Kernel Modules and Devices</span> <a title="Permalink" class="permalink" href="#sec.udev.drivers">#</a></h2></div></div></div><p>
   The kernel bus drivers probe for devices. For every detected device, the
   kernel creates an internal device structure while the driver core sends a
   uevent to the <code class="systemitem">udev</code> daemon. Bus
   devices identify themselves by a specially-formatted ID, which tells what
   kind of device it is. Usually these IDs consist of vendor and product ID and
   other subsystem-specific values. Every bus has its own scheme for these IDs,
   called <code class="envar">MODALIAS</code>. The kernel takes the device information,
   composes a <code class="envar">MODALIAS</code> ID string from it and sends that string
   along with the event. For a USB mouse, it looks like this:
  </p><div class="verbatim-wrap"><pre class="screen">MODALIAS=usb:v046DpC03Ed2000dc00dsc00dp00ic03isc01ip02</pre></div><p>
   Every device driver carries a list of known aliases for devices it can
   handle. The list is contained in the kernel module file itself. The program
   depmod reads the ID lists and creates the file
   <code class="filename">modules.alias</code> in the kernel's
   <code class="filename">/lib/modules</code> directory for all currently available
   modules. With this infrastructure, module loading is as easy as calling
   <code class="command">modprobe</code> for every event that carries a
   <code class="literal">MODALIAS</code> key. If <code class="command">modprobe $MODALIAS</code> is
   called, it matches the device alias composed for the device with the aliases
   provided by the modules. If a matching entry is found, that module is
   loaded. All this is automatically triggered by
   <code class="systemitem">udev</code>.
  </p></div><div class="sect1 " id="sec.udev.boot"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.boot"><span class="number">23.4 </span><span class="name">Booting and Initial Device Setup</span> <a title="Permalink" class="permalink" href="#sec.udev.boot">#</a></h2></div></div></div><p>
   All device events happening during the boot process before the
   <code class="systemitem">udev</code> daemon is running are lost,
   because the infrastructure to handle these events resides on the root file
   system and is not available at that time. To cover that loss, the kernel
   provides a <code class="filename">uevent</code> file located in the device directory
   of every device in the <code class="systemitem">sysfs</code>
   file system. By writing <code class="literal">add</code> to that file, the kernel
   resends the same event as the one lost during boot. A simple loop over all
   <code class="filename">uevent</code> files in <code class="filename">/sys</code> triggers all
   events again to create the device nodes and perform device setup.
  </p><p>
   As an example, a USB mouse present during boot may not be initialized by the
   early boot logic, because the driver is not available at that time. The
   event for the device discovery was lost and failed to find a kernel module
   for the device. Instead of manually searching for connected
   devices, <code class="systemitem">udev</code> requests all device
   events from the kernel after the root file system is available, so the event
   for the USB mouse device runs again. Now it finds the kernel module on the
   mounted root file system and the USB mouse can be initialized.
  </p><p>
   From user space, there is no visible difference between a device coldplug
   sequence and a device discovery during runtime. In both cases, the same
   rules are used to match and the same configured programs are run.
  </p></div><div class="sect1 " id="sec.udev.debug"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.debug"><span class="number">23.5 </span><span class="name">Monitoring the Running <code class="systemitem">udev</code> Daemon</span> <a title="Permalink" class="permalink" href="#sec.udev.debug">#</a></h2></div></div></div><p>
   The program <code class="command">udevadm monitor</code> can be used to visualize the
   driver core events and the timing of the
   <code class="systemitem">udev</code> event processes.
  </p><div class="verbatim-wrap"><pre class="screen">UEVENT[1185238505.276660] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1 (usb)
UDEV  [1185238505.279198] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1 (usb)
UEVENT[1185238505.279527] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0 (usb)
UDEV  [1185238505.285573] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0 (usb)
UEVENT[1185238505.298878] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10 (input)
UDEV  [1185238505.305026] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10 (input)
UEVENT[1185238505.305442] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/mouse2 (input)
UEVENT[1185238505.306440] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/event4 (input)
UDEV  [1185238505.325384] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/event4 (input)
UDEV  [1185238505.342257] add   /devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10/mouse2 (input)</pre></div><p>
   The <code class="literal">UEVENT</code> lines show the events the kernel has sent over
   netlink. The <code class="literal">UDEV</code> lines show the finished
   <code class="systemitem">udev</code> event handlers. The timing is
   printed in microseconds. The time between <code class="literal">UEVENT</code> and
   <code class="literal">UDEV</code> is the time
   <code class="systemitem">udev</code> took to process this event or
   the <code class="systemitem">udev</code> daemon has delayed its
   execution to synchronize this event with related and already running events.
   For example, events for hard disk partitions always wait for the main disk
   device event to finish, because the partition events may rely on the data
   that the main disk event has queried from the hardware.
  </p><p>
   <code class="command">udevadm monitor --env</code> shows the complete event
   environment:
  </p><div class="verbatim-wrap"><pre class="screen">ACTION=add
DEVPATH=/devices/pci0000:00/0000:00:1d.2/usb3/3-1/3-1:1.0/input/input10
SUBSYSTEM=input
SEQNUM=1181
NAME="Logitech USB-PS/2 Optical Mouse"
PHYS="usb-0000:00:1d.2-1/input0"
UNIQ=""
EV=7
KEY=70000 0 0 0 0
REL=103
MODALIAS=input:b0003v046DpC03Ee0110-e0,1,2,k110,111,112,r0,1,8,amlsfw</pre></div><p>
   <code class="systemitem">udev</code> also sends messages to syslog.
   The default syslog priority that controls which messages are sent to syslog
   is specified in the <code class="systemitem">udev</code>
   configuration file <code class="filename">/etc/udev/udev.conf</code>. The log
   priority of the running daemon can be changed with <code class="command">udevadm control
   --log_priority=</code><em class="replaceable ">LEVEL/NUMBER</em>.
  </p></div><div class="sect1 " id="sec.udev.rules"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.rules"><span class="number">23.6 </span><span class="name">Influencing Kernel Device Event Handling with <code class="systemitem">udev</code> Rules</span> <a title="Permalink" class="permalink" href="#sec.udev.rules">#</a></h2></div></div></div><p>
   A <code class="systemitem">udev</code> rule can match any property
   the kernel adds to the event itself or any information that the kernel
   exports to <code class="filename">sysfs</code>. The rule can also request additional
   information from external programs. Every event is matched against all
   provided rules. All rules are located in the
   <code class="filename">/etc/udev/rules.d</code> directory.
  </p><p>
   Every line in the rules file contains at least one key value pair. There are
   two kinds of keys, match and assignment keys. If all match keys match their
   values, the rule is applied and the assignment keys are assigned the
   specified value. A matching rule may specify the name of the device node,
   add symbolic links pointing to the node or run a specified program as part
   of the event handling. If no matching rule is found, the default device node
   name is used to create the device node. Detailed information about the rule
   syntax and the provided keys to match or import data are described in the
   <code class="systemitem">udev</code> man page. The following
   example rules provide a basic introduction to
   <code class="systemitem">udev</code> rule syntax. The example rules
   are all taken from the <code class="systemitem">udev</code> default
   rule set that is located under
   <code class="filename">/etc/udev/rules.d/50-udev-default.rules</code>.
  </p><div class="example" id="ex.rules"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 23.1: </span><span class="name">Example <code class="systemitem">udev</code> Rules </span><a title="Permalink" class="permalink" href="#ex.rules">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># console
KERNEL=="console", MODE="0600", OPTIONS="last_rule"

# serial devices
KERNEL=="ttyUSB*", ATTRS{product}=="[Pp]alm*Handheld*", SYMLINK+="pilot"

# printer
SUBSYSTEM=="usb", KERNEL=="lp*", NAME="usb/%k", SYMLINK+="usb%k", GROUP="lp"

# kernel firmware loader
SUBSYSTEM=="firmware", ACTION=="add", RUN+="firmware.sh"</pre></div></div></div><p>
   The <code class="systemitem">console</code> rule consists of three keys: one match
   key (<code class="literal">KERNEL</code>) and two assign keys
   (<code class="literal">MODE</code>, <code class="literal">OPTIONS</code>). The
   <code class="literal">KERNEL</code> match rule searches the device list for any items
   of the type <code class="literal">console</code>. Only exact matches are valid and
   trigger this rule to be executed. The <code class="literal">MODE</code> key assigns
   special permissions to the device node, in this case, read and write
   permissions to the owner of this device only. The <code class="literal">OPTIONS</code>
   key makes this rule the last rule to be applied to any device of this type.
   Any later rule matching this particular device type does not have any
   effect.
  </p><p>
   The <code class="systemitem">serial devices</code> rule is not available in
   <code class="filename">50-udev-default.rules</code> anymore, but it is still worth
   considering. It consists of two match keys (<code class="literal">KERNEL</code> and
   <code class="literal">ATTRS</code>) and one assign key (<code class="literal">SYMLINK</code>).
   The <code class="literal">KERNEL</code> key searches for all devices of the
   <code class="literal">ttyUSB</code> type. Using the <code class="literal">*</code> wild card,
   this key matches several of these devices. The second match key,
   <code class="literal">ATTRS</code>, checks whether the <code class="filename">product</code>
   attribute file in <code class="literal">sysfs</code> for any <code class="literal">ttyUSB</code>
   device contains a certain string. The assign key
   (<code class="literal">SYMLINK</code>) triggers the addition of a symbolic link to
   this device under <code class="filename">/dev/pilot</code>. The operator used in this
   key (<code class="literal">+=</code>) tells
   <code class="systemitem">udev</code> to additionally perform this
   action, even if previous or later rules add other symbolic links. As this
   rule contains two match keys, it is only applied if both conditions are met.
  </p><p>
   The <code class="systemitem">printer</code> rule deals with USB printers and
   contains two match keys which must both apply to get the entire rule applied
   (<code class="literal">SUBSYSTEM</code> and <code class="literal">KERNEL</code>). Three assign
   keys deal with the naming for this device type (<code class="literal">NAME</code>),
   the creation of symbolic device links (<code class="literal">SYMLINK</code>) and the
   group membership for this device type (<code class="literal">GROUP</code>). Using the
   <code class="literal">*</code> wild card in the <code class="literal">KERNEL</code> key makes it
   match several <code class="literal">lp</code> printer devices. Substitutions are used
   in both, the <code class="literal">NAME</code> and the <code class="literal">SYMLINK</code> keys
   to extend these strings by the internal device name. For example, the
   symbolic link to the first <code class="literal">lp</code> USB printer would read
   <code class="filename">/dev/usblp0</code>.
  </p><p>
   The <code class="systemitem">kernel firmware loader</code> rule makes
   <code class="systemitem">udev</code> load additional firmware by an
   external helper script during runtime. The <code class="literal">SUBSYSTEM</code>
   match key searches for the <code class="literal">firmware</code> subsystem. The
   <code class="literal">ACTION</code> key checks whether any device belonging to the
   <code class="literal">firmware</code> subsystem has been added. The
   <code class="literal">RUN+=</code> key triggers the execution of the
   <code class="literal">firmware.sh</code> script to locate the firmware that is to be
   loaded.
  </p><p>
   Some general characteristics are common to all rules:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Each rule consists of one or more key value pairs separated by a comma.
    </p></li><li class="listitem "><p>
     A key's operation is determined by the operator.
     <code class="systemitem">udev</code> rules support several
     operators.
    </p></li><li class="listitem "><p>
     Each given value must be enclosed by quotation marks.
    </p></li><li class="listitem "><p>
     Each line of the rules file represents one rule. If a rule is longer than
     one line, use <code class="literal">\</code> to join the different lines as you
     would do in shell syntax.
    </p></li><li class="listitem "><p>
     <code class="systemitem">udev</code> rules support a shell-style
     pattern that matches the <code class="literal">*</code>, <code class="literal">?</code>, and
     <code class="literal">[]</code> patterns.
    </p></li><li class="listitem "><p>
     <code class="systemitem">udev</code> rules support substitutions.
    </p></li></ul></div><div class="sect2 " id="sec.udev.rules.ops"><div class="titlepage"><div><div><h3 class="title" id="sec.udev.rules.ops"><span class="number">23.6.1 </span><span class="name">Using Operators in <code class="systemitem">udev</code> Rules</span> <a title="Permalink" class="permalink" href="#sec.udev.rules.ops">#</a></h3></div></div></div><p>
    Creating keys you can choose from several operators, depending on the type
    of key you want to create. Match keys will normally be used to find a value
    that either matches or explicitly mismatches the search value. Match keys
    contain either of the following operators:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747738944"><span class="term "><code class="literal">==</code>
     </span></dt><dd><p>
       Compare for equality. If the key contains a search pattern, all results
       matching this pattern are valid.
      </p></dd><dt id="idm139698747736752"><span class="term "><code class="literal">!=</code>
     </span></dt><dd><p>
       Compare for non-equality. If the key contains a search pattern, all
       results matching this pattern are valid.
      </p></dd></dl></div><p>
    Any of the following operators can be used with assign keys:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747733616"><span class="term "><code class="literal">=</code>
     </span></dt><dd><p>
       Assign a value to a key. If the key previously consisted of a list of
       values, the key resets and only the single value is assigned.
      </p></dd><dt id="idm139698747731392"><span class="term "><code class="literal">+=</code>
     </span></dt><dd><p>
       Add a value to a key that contains a list of entries.
      </p></dd><dt id="idm139698747729264"><span class="term "><code class="literal">:=</code>
     </span></dt><dd><p>
       Assign a final value. Disallow any later change by later rules.
      </p></dd></dl></div></div><div class="sect2 " id="sec.udev.rules.subst"><div class="titlepage"><div><div><h3 class="title" id="sec.udev.rules.subst"><span class="number">23.6.2 </span><span class="name">Using Substitutions in <code class="systemitem">udev</code> Rules</span> <a title="Permalink" class="permalink" href="#sec.udev.rules.subst">#</a></h3></div></div></div><p>
    <code class="systemitem">udev</code> rules support the use of
    placeholders and substitutions. Use them in a similar fashion as you would
    do in any other scripts. The following substitutions can be used with
    <code class="systemitem">udev</code> rules:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747722576"><span class="term "><code class="literal">%r</code>, <code class="literal">$root</code>
     </span></dt><dd><p>
       The device directory, <code class="filename">/dev</code> by default.
      </p></dd><dt id="idm139698747719584"><span class="term "><code class="literal">%p</code>, <code class="literal">$devpath</code>
     </span></dt><dd><p>
       The value of <code class="envar">DEVPATH</code>.
      </p></dd><dt id="idm139698747716608"><span class="term "><code class="literal">%k</code>, <code class="literal">$kernel</code>
     </span></dt><dd><p>
       The value of <code class="envar">KERNEL</code> or the internal device name.
      </p></dd><dt id="idm139698747713616"><span class="term "><code class="literal">%n</code>, <code class="literal">$number</code>
     </span></dt><dd><p>
       The device number.
      </p></dd><dt id="idm139698747711072"><span class="term "><code class="literal">%N</code>, <code class="literal">$tempnode</code>
     </span></dt><dd><p>
       The temporary name of the device file.
      </p></dd><dt id="idm139698747708512"><span class="term "><code class="literal">%M</code>, <code class="literal">$major</code>
     </span></dt><dd><p>
       The major number of the device.
      </p></dd><dt id="idm139698747705952"><span class="term "><code class="literal">%m</code>, <code class="literal">$minor</code>
     </span></dt><dd><p>
       The minor number of the device.
      </p></dd><dt id="idm139698747703392"><span class="term "><code class="literal">%s{<em class="replaceable ">ATTRIBUTE</em>}</code>,
     <code class="literal">$attr{<em class="replaceable ">ATTRIBUTE</em>}</code>
     </span></dt><dd><p>
       The value of a <code class="filename">sysfs</code> attribute (specified by
       <em class="replaceable ">ATTRIBUTE</em>).
      </p></dd><dt id="idm139698747699056"><span class="term "><code class="literal">%E{<em class="replaceable ">VARIABLE</em>}</code>,
     <code class="literal">$env{<em class="replaceable ">VARIABLE</em>}</code>
     </span></dt><dd><p>
       The value of an environment variable (specified by
       <em class="replaceable ">VARIABLE</em>).
      </p></dd><dt id="idm139698747695136"><span class="term "><code class="literal">%c</code>, <code class="literal">$result</code>
     </span></dt><dd><p>
       The output of <code class="envar">PROGRAM</code>.
      </p></dd><dt id="idm139698747692160"><span class="term "><code class="literal">%%</code>
     </span></dt><dd><p>
       The <code class="literal">%</code> character.
      </p></dd><dt id="idm139698747689632"><span class="term "><code class="literal">$$</code>
     </span></dt><dd><p>
       The <code class="literal">$</code> character.
      </p></dd></dl></div></div><div class="sect2 " id="sec.udev.rules.match"><div class="titlepage"><div><div><h3 class="title" id="sec.udev.rules.match"><span class="number">23.6.3 </span><span class="name">Using <code class="systemitem">udev</code> Match Keys</span> <a title="Permalink" class="permalink" href="#sec.udev.rules.match">#</a></h3></div></div></div><p>
    Match keys describe conditions that must be met before a
    <code class="systemitem">udev</code> rule can be applied. The
    following match keys are available:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747683344"><span class="term "><code class="literal">ACTION</code>
     </span></dt><dd><p>
       The name of the event action, for example, <code class="literal">add</code> or
       <code class="literal">remove</code> when adding or removing a device.
      </p></dd><dt id="idm139698747680304"><span class="term "><code class="literal">DEVPATH</code>
     </span></dt><dd><p>
       The device path of the event device, for example,
       <code class="literal">DEVPATH=/bus/pci/drivers/ipw3945</code> to search for all
       events related to the ipw3945 driver.
      </p></dd><dt id="idm139698747677664"><span class="term "><code class="literal">KERNEL</code>
     </span></dt><dd><p>
       The internal (kernel) name of the event device.
      </p></dd><dt id="idm139698747675536"><span class="term "><code class="literal">SUBSYSTEM</code>
     </span></dt><dd><p>
       The subsystem of the event device, for example,
       <code class="literal">SUBSYSTEM=usb</code> for all events related to USB devices.
      </p></dd><dt id="idm139698747672928"><span class="term "><code class="literal">ATTR{<em class="replaceable ">FILENAME</em>}</code>
     </span></dt><dd><p>
       <code class="systemitem">sysfs</code> attributes of the
       event device. To match a string contained in the
       <code class="filename">vendor</code> attribute file name, you could use
       <code class="literal">ATTR{vendor}=="On[sS]tream"</code>, for example.
      </p></dd><dt id="idm139698747668672"><span class="term "><code class="literal">KERNELS</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upwards for a matching device name.
      </p></dd><dt id="idm139698747665808"><span class="term "><code class="literal">SUBSYSTEMS</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upwards for a matching device subsystem name.
      </p></dd><dt id="idm139698747662944"><span class="term "><code class="literal">DRIVERS</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upwards for a matching device driver name.
      </p></dd><dt id="idm139698747660080"><span class="term "><code class="literal">ATTRS{<em class="replaceable ">FILENAME</em>}</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> search the device path
       upwards for a device with matching
       <code class="systemitem">sysfs</code> attribute values.
      </p></dd><dt id="idm139698747656032"><span class="term "><code class="literal">ENV{<em class="replaceable ">KEY</em>}</code>
     </span></dt><dd><p>
       The value of an environment variable, for example,
       <code class="literal">ENV{ID_BUS}="ieee1394</code> to search for all events
       related to the FireWire bus ID.
      </p></dd><dt id="idm139698747652960"><span class="term "><code class="literal">PROGRAM</code>
     </span></dt><dd><p>
       Let <code class="systemitem">udev</code> execute an external
       program. To be successful, the program must return with exit code zero.
       The program's output, printed to STDOUT, is available to the
       <code class="literal">RESULT</code> key.
      </p></dd><dt id="idm139698747649552"><span class="term "><code class="literal">RESULT</code>
     </span></dt><dd><p>
       Match the output string of the last <code class="literal">PROGRAM</code> call.
       Either include this key in the same rule as the
       <code class="literal">PROGRAM</code> key or in a later one.
      </p></dd></dl></div></div><div class="sect2 " id="sec.udev.rules.assign"><div class="titlepage"><div><div><h3 class="title" id="sec.udev.rules.assign"><span class="number">23.6.4 </span><span class="name">Using <code class="systemitem">udev</code> Assign Keys</span> <a title="Permalink" class="permalink" href="#sec.udev.rules.assign">#</a></h3></div></div></div><p>
    In contrast to the match keys described above, assign keys do not describe
    conditions that must be met. They assign values, names and actions to the
    device nodes maintained by <code class="systemitem">udev</code>.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747642640"><span class="term "><code class="literal">NAME</code>
     </span></dt><dd><p>
       The name of the device node to be created. After a rule has set a node
       name, all other rules with a <code class="literal">NAME</code> key for this node
       are ignored.
      </p></dd><dt id="idm139698747639984"><span class="term "><code class="literal">SYMLINK</code>
     </span></dt><dd><p>
       The name of a symbolic link related to the node to be created. Multiple
       matching rules can add symbolic links to be created with the device
       node. You can also specify multiple symbolic links for one node in one
       rule using the space character to separate the symbolic link names.
      </p></dd><dt id="idm139698747637600"><span class="term "><code class="literal">OWNER, GROUP, MODE</code>
     </span></dt><dd><p>
       The permissions for the new device node. Values specified here overwrite
       anything that has been compiled in.
      </p></dd><dt id="idm139698747635408"><span class="term "><code class="literal">ATTR{<em class="replaceable ">KEY</em>}</code>
     </span></dt><dd><p>
       Specify a value to be written to a
       <code class="systemitem">sysfs</code> attribute of the event
       device. If the <code class="literal">==</code> operator is used, this key is also
       used to match against the value of a
       <code class="systemitem">sysfs</code> attribute.
      </p></dd><dt id="idm139698747630864"><span class="term "><code class="literal">ENV{<em class="replaceable ">KEY</em>}</code>
     </span></dt><dd><p>
       Tell <code class="systemitem">udev</code> to export a variable
       to the environment. If the <code class="literal">==</code> operator is used, this
       key is also used to match against an environment variable.
      </p></dd><dt id="idm139698747627040"><span class="term "><code class="literal">RUN</code>
     </span></dt><dd><p>
       Tell <code class="systemitem">udev</code> to add a program to
       the list of programs to be executed for this device. Keep in mind to
       restrict this to very short tasks to avoid blocking further events for
       this device.
      </p></dd><dt id="idm139698747624048"><span class="term "><code class="literal">LABEL</code>
     </span></dt><dd><p>
       Add a label where a <code class="literal">GOTO</code> can jump to.
      </p></dd><dt id="idm139698747621504"><span class="term "><code class="literal">GOTO</code>
     </span></dt><dd><p>
       Tell <code class="systemitem">udev</code> to skip several
       rules and continue with the one that carries the label referenced by the
       <code class="literal">GOTO</code> key.
      </p></dd><dt id="idm139698747618160"><span class="term "><code class="literal">IMPORT{<em class="replaceable ">TYPE</em>}</code>
     </span></dt><dd><p>
       Load variables into the event environment such as the output of an
       external program. <code class="systemitem">udev</code> imports
       variables of several types. If no type is specified,
       <code class="systemitem">udev</code> tries to determine the
       type itself based on the executable bit of the file permissions.
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="literal">program</code> tells
         <code class="systemitem">udev</code> to execute an external
         program and import its output.
        </p></li><li class="listitem "><p>
         <code class="literal">file</code> tells
         <code class="systemitem">udev</code> to import a text file.
        </p></li><li class="listitem "><p>
         <code class="literal">parent</code> tells
         <code class="systemitem">udev</code> to import the stored
         keys from the parent device.
        </p></li></ul></div></dd><dt id="idm139698747606656"><span class="term "><code class="literal">WAIT_FOR_SYSFS</code>
     </span></dt><dd><p>
       Tells <code class="systemitem">udev</code> to wait for the
       specified <code class="systemitem">sysfs</code> file to be
       created for a certain device. For example,
       <code class="literal">WAIT_FOR_SYSFS="ioerr_cnt"</code> informs
       <code class="systemitem">udev</code> to wait until the
       <code class="filename">ioerr_cnt</code> file has been created.
      </p></dd><dt id="idm139698747601408"><span class="term "><code class="literal">OPTIONS</code>
     </span></dt><dd><p>
       The <code class="literal">OPTION</code> key may have several values:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="literal">last_rule</code> tells
         <code class="systemitem">udev</code> to ignore all later
         rules.
        </p></li><li class="listitem "><p>
         <code class="literal">ignore_device</code> tells
         <code class="systemitem">udev</code> to ignore this event
         completely.
        </p></li><li class="listitem "><p>
         <code class="literal">ignore_remove</code> tells
         <code class="systemitem">udev</code> to ignore all later
         remove events for the device.
        </p></li><li class="listitem "><p>
         <code class="literal">all_partitions</code> tells
         <code class="systemitem">udev</code> to create device nodes
         for all available partitions on a block device.
        </p></li></ul></div></dd></dl></div></div></div><div class="sect1 " id="sec.udev.persdev"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.persdev"><span class="number">23.7 </span><span class="name">Persistent Device Naming</span> <a title="Permalink" class="permalink" href="#sec.udev.persdev">#</a></h2></div></div></div><p>
   The dynamic device directory and the
   <code class="systemitem">udev</code> rules infrastructure make it
   possible to provide stable names for all disk devices—regardless of
   their order of recognition or the connection used for the device. Every
   appropriate block device the kernel creates is examined by tools with
   special knowledge about certain buses, drive types or file systems. Along
   with the dynamic kernel-provided device node name,
   <code class="systemitem">udev</code> maintains classes of
   persistent symbolic links pointing to the device:
  </p><div class="verbatim-wrap"><pre class="screen">/dev/disk
|-- by-id
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B -&gt; ../../sda
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B-part1 -&gt; ../../sda1
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B-part6 -&gt; ../../sda6
|   |-- scsi-SATA_HTS726060M9AT00_MRH453M4HWHG7B-part7 -&gt; ../../sda7
|   |-- usb-Generic_STORAGE_DEVICE_02773 -&gt; ../../sdd
|   `-- usb-Generic_STORAGE_DEVICE_02773-part1 -&gt; ../../sdd1
|-- by-label
|   |-- Photos -&gt; ../../sdd1
|   |-- SUSE10 -&gt; ../../sda7
|   `-- devel -&gt; ../../sda6
|-- by-path
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0 -&gt; ../../sda
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0-part1 -&gt; ../../sda1
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0-part6 -&gt; ../../sda6
|   |-- pci-0000:00:1f.2-scsi-0:0:0:0-part7 -&gt; ../../sda7
|   |-- pci-0000:00:1f.2-scsi-1:0:0:0 -&gt; ../../sr0
|   |-- usb-02773:0:0:2 -&gt; ../../sdd
|   |-- usb-02773:0:0:2-part1 -&gt; ../../sdd1
`-- by-uuid
    |-- 159a47a4-e6e6-40be-a757-a629991479ae -&gt; ../../sda7
    |-- 3e999973-00c9-4917-9442-b7633bd95b9e -&gt; ../../sda6
    `-- 4210-8F8C -&gt; ../../sdd1</pre></div></div><div class="sect1 " id="sec.udev.files"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.files"><span class="number">23.8 </span><span class="name">Files used by <code class="systemitem">udev</code></span> <a title="Permalink" class="permalink" href="#sec.udev.files">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698747581760"><span class="term "><code class="filename">/sys/*</code>
    </span></dt><dd><p>
      Virtual file system provided by the Linux kernel, exporting all currently
      known devices. This information is used by
      <code class="systemitem">udev</code> to create device nodes in
      <code class="filename">/dev</code>
     </p></dd><dt id="idm139698747578368"><span class="term "><code class="filename">/dev/*</code>
    </span></dt><dd><p>
      Dynamically created device nodes and static content created with
      systemd-tmpfiles; for more information, see the
      <code class="systemitem">systemd-tmpfiles(8)</code> man page.
     </p></dd></dl></div><p>
   The following files and directories contain the crucial elements of the
   <code class="systemitem">udev</code> infrastructure:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747574048"><span class="term "><code class="filename">/etc/udev/udev.conf</code>
    </span></dt><dd><p>
      Main <code class="systemitem">udev</code> configuration file.
     </p></dd><dt id="idm139698747571232"><span class="term "><code class="filename">/etc/udev/rules.d/*</code>
    </span></dt><dd><p>
      <code class="systemitem">udev</code> event matching rules.
     </p></dd><dt id="idm139698747568416"><span class="term "><code class="filename">/usr/lib/tmpfiles.d/</code> and
    <code class="filename">/etc/tmpfiles.d/</code>
    </span></dt><dd><p>
      Responsible for static <code class="filename">/dev</code> content.
     </p></dd><dt id="idm139698747565424"><span class="term "><code class="filename">/usr/lib/udev/*</code>
    </span></dt><dd><p>
      Helper programs called from <code class="systemitem">udev</code>
      rules.
     </p></dd></dl></div></div><div class="sect1 " id="sec.udev.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.udev.moreinfo"><span class="number">23.9 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.udev.moreinfo">#</a></h2></div></div></div><p>
   For more information about the <code class="systemitem">udev</code>
   infrastructure, refer to the following man pages:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747559600"><span class="term "><code class="systemitem">udev</code>
    </span></dt><dd><p>
      General information about <code class="systemitem">udev</code>,
      keys, rules and other important configuration issues.
     </p></dd><dt id="idm139698747556464"><span class="term "><code class="command">udevadm</code>
    </span></dt><dd><p>
      <code class="command">udevadm</code> can be used to control the runtime behavior of
      <code class="systemitem">udev</code>, request kernel events,
      manage the event queue and provide simple debugging mechanisms.
     </p></dd><dt id="idm139698747553104"><span class="term "><code class="systemitem">udevd</code>
    </span></dt><dd><p>
      Information about the <code class="systemitem">udev</code> event
      managing daemon.
     </p></dd></dl></div></div></div><div xml:lang="en" class="chapter " id="cha.kgraft" lang="en"><div class="titlepage"><div><div><h2 class="title"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span> <a title="Permalink" class="permalink" href="#cha.kgraft">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>kgraft.xml</li><li><span class="ds-label">ID: </span>cha.kgraft</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698747545232">#</a></h6></div><p>
    This document describes the basic principles of the kGraft live patching
    technology and provides usage guidelines for the SLE Live Patching service.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.kgraft.advantages"><span class="number">24.1 </span><span class="name">Advantages of kGraft</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.low-level"><span class="number">24.2 </span><span class="name">Low-level Function of kGraft</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.install_patch"><span class="number">24.3 </span><span class="name">Installing kGraft Patches</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.lifecycle"><span class="number">24.4 </span><span class="name">Patch Lifecycle</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.remove"><span class="number">24.5 </span><span class="name">Removing a kGraft Patch</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.exec_threads"><span class="number">24.6 </span><span class="name">Stuck Kernel Execution Threads</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.kgr"><span class="number">24.7 </span><span class="name">The <code class="command">kgr</code> Tool</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.scope"><span class="number">24.8 </span><span class="name">Scope of kGraft Technology</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.scope_patching"><span class="number">24.9 </span><span class="name">Scope of SLE Live Patching</span></a></span></dt><dt><span class="sect1"><a href="#sec.kgraft.support_interaction"><span class="number">24.10 </span><span class="name">Interaction with the Support Processes</span></a></span></dt></dl></div></div><p>
  kGraft is a live patching technology for runtime patching of the Linux
  kernel, without stopping the kernel. This maximizes system uptime, and thus
  system availability, which is important for mission-critical systems. By
  allowing dynamic patching of the kernel, the technology also encourages
  users to install critical security updates without deferring them to a
  scheduled downtime.
 </p><p>
  A kGraft patch is a kernel module, intended for replacing whole functions in
  the kernel. kGraft primarily offers in-kernel infrastructure for integration
  of the patched code with base kernel code at runtime.
 </p><p>
  SLE Live Patching is a service provided on top of regular SUSE Linux Enterprise Server
  maintenance. kGraft patches distributed through SLE Live
  Patching supplement regular SLES maintenance updates. Common update stack
  and procedures can be used for SLE Live Patching deployment.
 </p><p>
  The information provided in this document related to the AMD64/Intel 64
  and POWER architectures. If you are using a different architecture, procedures
  may vary.
 </p><div class="sect1 " id="sec.kgraft.advantages"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.advantages"><span class="number">24.1 </span><span class="name">Advantages of kGraft</span> <a title="Permalink" class="permalink" href="#sec.kgraft.advantages">#</a></h2></div></div></div><p>
   Live kernel patching using kGraft is especially useful for quick response in
   emergencies (when serious vulnerabilities are known and should be fixed when
   possible or there are serious system stability issues with a known fix). It
   is not used for scheduled updates where time is not critical.
  </p><p>
   Typical use cases for kGraft include systems like memory databases with huge
   amounts of RAM, where boot-up times of 15 minutes or more are not uncommon,
   large simulations that need weeks or months without a restart, or
   infrastructure building blocks providing continuous service to a many
   consumers.
  </p><p>
   The main advantage of kGraft is that it never requires stopping the kernel,
   not even for a short time period.
  </p><p>
   A kGraft patch is a <code class="filename">.ko</code> kernel module in a RPM
   package. It is inserted into the kernel using the <code class="command">insmod</code>
   command when the package is installed or updated. kGraft replaces whole
   functions in the kernel, even if they are being executed. An updated kGraft
   module can replace an existing patch if necessary.
  </p><p>
   kGraft is also lean—it contains only a small amount of code, because it
   leverages other standard Linux technologies.
  </p></div><div class="sect1 " id="sec.kgraft.low-level"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.low-level"><span class="number">24.2 </span><span class="name">Low-level Function of kGraft</span> <a title="Permalink" class="permalink" href="#sec.kgraft.low-level">#</a></h2></div></div></div><p>
   kGraft uses the ftrace infrastructure to perform patching. The following
   describes the implementation on the AMD64/Intel 64 architecture.
  </p><p>
   To patch a kernel function, kGraft needs some space at the start of the
   function to insert a jump to a new function. This space is allocated during
   kernel compilation by GCC with function profiling turned on. In particular,
   a 5-byte call instruction is injected to the start of kernel functions. When
   such instrumented kernel is booting, profiling calls are replaced by 5-byte
   NOP (no operation) instructions.
  </p><p>
   After patching starts, the first byte is replaced by the INT3 (breakpoint)
   instruction. This ensures atomicity of the 5-byte instruction replacement.
   The other four bytes are replaced by the address to the new function.
   Finally, the first byte is replaced by the JMP (long jump) opcode.
  </p><p>
   Inter-processor non-maskable interrupts (IPI NMI) are used throughout the
   process to flush speculative decoding queues of other CPUs in the system.
   This allows switching to the new function without ever stopping the kernel,
   not even for a very short moment. The interruptions by IPI NMIs can be
   measured in microseconds and are not considered service interruptions as
   they happen while the kernel is running in any case.
  </p><p>
   Callers are never patched. Instead, the callee's NOPs are replaced by a JMP
   to the new function. JMP instructions remain forever. This takes care of
   function pointers, including in structures, and does not require saving any
   old data for the possibility of un-patching.
  </p><p>
   However, these steps alone would not be good enough: since the functions
   would be replaced non-atomically, a new fixed function in one part of the
   kernel could still be calling an old function elsewhere or vice versa. If
   the semantics of the function interfaces changed in the patch, chaos would
   ensue.
  </p><p>
   Thus, until all functions are replaced, kGraft uses an approach based on
   trampolines and similar to RCU (read-copy-update), to ensure a consistent
   view of the world to each user space thread, kernel thread and kernel
   interrupt. A per-thread flag is set on each kernel entry and exit. This way,
   an old function would always call another old function and a new function
   always a new one. Once all processes have the "new universe" flag set,
   patching is complete, trampolines can be removed and the code can operate at
   full speed without performance impact other than an extra-long jump for each
   patched function.
  </p></div><div class="sect1 " id="sec.kgraft.install_patch"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.install_patch"><span class="number">24.3 </span><span class="name">Installing kGraft Patches</span> <a title="Permalink" class="permalink" href="#sec.kgraft.install_patch">#</a></h2></div></div></div><p>
   This section describes the activation of the SUSE Linux Enterprise Live
   Patching extension and the installation of kGraft patches.
  </p><div class="sect2 " id="sec.kgraft.install_patch.activate"><div class="titlepage"><div><div><h3 class="title" id="sec.kgraft.install_patch.activate"><span class="number">24.3.1 </span><span class="name">Activation of SLE Live Patching</span> <a title="Permalink" class="permalink" href="#sec.kgraft.install_patch.activate">#</a></h3></div></div></div><p>
    To activate SLE Live Patching on your system, follow these steps:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      If your SLES system is not yet registered, register it. Registration can
      be done during the system installation or later using the YaST
      <span class="guimenu">Product Registration</span> module (<code class="command">yast2
      registration</code>). After registration, click <span class="guimenu">Yes</span>
      to see the list of available online updates.
     </p><p>
      If your SLES system is already registered, but SLE Live Patching is not
      yet activated, open the YaST <span class="guimenu">Product Registration</span>
      module (<code class="command">yast2 registration</code>) and click <span class="guimenu">Select
      Extensions</span>.
     </p></li><li class="step "><p>
      Select <span class="guimenu">SUSE Linux Enterprise Live Patching 12</span> in the
      list of available extensions and click <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      Confirm the license terms and click <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      Enter the SLE Live Patching registration code and click
      <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      Check the <span class="guimenu">Installation Summary</span> and selected
      <span class="guimenu">Patterns</span>. The pattern <code class="systemitem">Live
      Patching</code> should be selected for installation.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Accept</span> to complete the installation. This will
      install the base kGraft components on your system together with the initial
      live patch.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.kgraft.install_patch.update"><div class="titlepage"><div><div><h3 class="title" id="sec.kgraft.install_patch.update"><span class="number">24.3.2 </span><span class="name">Updating System</span> <a title="Permalink" class="permalink" href="#sec.kgraft.install_patch.update">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      SLE Live Patching updates are distributed in a form that allows using
      standard SLE update stack for patch application. The initial live patch
      can be updated using <code class="command">zypper patch</code>, YaST Online
      Update or equivalent method.
     </p></li><li class="step "><p>
      The kernel is patched automatically during the package installation.
      However, invocations of the old kernel functions are not completely
      eliminated until all sleeping processes wake up and get out of the way.
      This can take a considerable amount of time. Despite this, sleeping
      processes that use the old kernel functions are not considered a security
      issue. Nevertheless, in the current version of kGraft, it is not possible
      to apply another kGraft patch until all processes cross the kernel-user
      space boundary to stop using patched functions from the previous patch.
     </p><p>
      To see the global status of patching, check the flag in
      <code class="filename">/sys/kernel/kgraft/in_progress</code>. The value
      <code class="literal">1</code> signifies the existence of sleeping processes that
      still need to be woken (the patching is still in progress). The value
      <code class="literal">0</code> signifies that all processes are using solely the
      patched functions and patching has finished already. Alternatively, use
      the <code class="command">kgr status</code> command to obtain the same information.
     </p><p>
      The flag can be checked on a per-process basis too. Check the number in
      <code class="filename">/proc/<em class="replaceable ">PROCESS_NUMBER</em>/kgr_in_progress</code>
      for each process individually. Again, the value <code class="literal">1</code>
      signifies sleeping process that still needs to be woken. Alternatively,
      use the <code class="command">kgr blocking</code> command to output the list of
      sleeping processes.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.kgraft.lifecycle"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.lifecycle"><span class="number">24.4 </span><span class="name">Patch Lifecycle</span> <a title="Permalink" class="permalink" href="#sec.kgraft.lifecycle">#</a></h2></div></div></div><p>Expiration dates of live patches can be accessed with <code class="command">zypper
   lifecycle</code>. Make sure that the package
   <span class="package">lifecycle-data-sle-live-patching</span> is installed.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">zypper lifecycle</code>

Product end of support
Codestream: SUSE Linux Enterprise Server 12             2024-10-31
SUSE Linux Enterprise Server 12 SP2                     n/a*

Extension end of support
SUSE Linux Enterprise Live Patching                     2017-10-31

Package end of support if different from product:
SUSEConnect                              Now, installed 0.2.41-18.1, update available 0.2.42-19.3.1
apache2-utils                            Now


*) See https://www.suse.com/lifecycle  for latest information</pre></div><p>When the expiration date of a patch is reached, no
   further live patches for this kernel version will be supplied.
   Plan an update of your kernel before the end of the live patch
   lifecycle period.</p></div><div class="sect1 " id="sec.kgraft.remove"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.remove"><span class="number">24.5 </span><span class="name">Removing a kGraft Patch</span> <a title="Permalink" class="permalink" href="#sec.kgraft.remove">#</a></h2></div></div></div><p>
   To remove a kGraft patch, use the following procedure:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     First remove the patch itself using Zypper:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper rm kgraft-patch-<em class="replaceable ">3_12_32-25-default</em></pre></div></li><li class="step "><p>
     Then reboot the machine.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.kgraft.exec_threads"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.exec_threads"><span class="number">24.6 </span><span class="name">Stuck Kernel Execution Threads</span> <a title="Permalink" class="permalink" href="#sec.kgraft.exec_threads">#</a></h2></div></div></div><p>
   Kernel threads need to be prepared to handle kGraft. Third-party software may
   not be ready for kGraft adoption and its kernel modules may spawn
   kernel execution threads. These threads will block the patching process
   indefinitely. As an emergency measure kGraft offers the possibility to force
   finishing of the patching process without waiting for all execution threads
   to cross the safety checkpoint. This can be achieved by writing
   <code class="literal">0</code> into
   <code class="filename">/sys/kernel/kgraft/in_progress</code>. Consult SUSE support
   before performing this procedure.
  </p></div><div class="sect1 " id="sec.kgraft.kgr"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.kgr"><span class="number">24.7 </span><span class="name">The <code class="command">kgr</code> Tool</span> <a title="Permalink" class="permalink" href="#sec.kgraft.kgr">#</a></h2></div></div></div><p>
   Several kGraft management tasks can be simplified with the
   <code class="command">kgr</code> tool. The available commands are:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747485600"><span class="term "><code class="command">kgr status</code>
    </span></dt><dd><p>
      Displays the overall status of kGraft patching (<code class="literal">ready</code> or
      <code class="literal">in_progress</code>).

     </p></dd><dt id="idm139698747482592"><span class="term "><code class="command">kgr patches</code>
    </span></dt><dd><p>
      Displays the list of loaded kGraft patches.
     </p></dd><dt id="idm139698747480464"><span class="term "><code class="command">kgr blocking</code>
    </span></dt><dd><p>
      Lists processes that are preventing kGraft patching from finishing. By
      default only the PIDs are listed. Specifying <code class="option">-v</code> prints
      command lines if available. Another <code class="option">-v</code> displays also
      stack traces.
     </p></dd></dl></div><p>
   For detailed information, see <code class="command">man kgr</code>.
  </p></div><div class="sect1 " id="sec.kgraft.scope"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.scope"><span class="number">24.8 </span><span class="name">Scope of kGraft Technology</span> <a title="Permalink" class="permalink" href="#sec.kgraft.scope">#</a></h2></div></div></div><p>
   kGraft is based on replacing functions. Data structure alteration can be
   accomplished only indirectly with kGraft. As a result, changes to kernel data
   structure require special care and, if the change is too large, rebooting
   might be required. kGraft also might not be able to handle situations where
   one compiler is used to compile the old kernel and another compiler is used
   for compiling the patch.
  </p><p>
   Because of the way kGraft works, support for third-party modules that are
   spawning kernel threads is limited.

  </p></div><div class="sect1 " id="sec.kgraft.scope_patching"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.scope_patching"><span class="number">24.9 </span><span class="name">Scope of SLE Live Patching</span> <a title="Permalink" class="permalink" href="#sec.kgraft.scope_patching">#</a></h2></div></div></div><p>
   Fixes for SUSE Common Vulnerability Scoring System (CVSS, SUSE CVSS is
   based on the CVSS v3.0 system) level 7+ vulnerabilities and bug fixes
   related to system stability or data corruption will be shipped in the
   scope of SLE Live Patching. It might not be possible to produce a live
   patch for all kinds of fixes fulfilling the above criteria. SUSE reserves
   the right to skip fixes where production of a kernel live patch is
   unviable because of technical reasons. For more information on CVSS,
   which is the base for the SUSE CVSS rating, see
   <a class="link" href="https://www.first.org/cvss/" target="_blank">https://www.first.org/cvss/</a>.
  </p></div><div class="sect1 " id="sec.kgraft.support_interaction"><div class="titlepage"><div><div><h2 class="title" id="sec.kgraft.support_interaction"><span class="number">24.10 </span><span class="name">Interaction with the Support Processes</span> <a title="Permalink" class="permalink" href="#sec.kgraft.support_interaction">#</a></h2></div></div></div><p>
   While resolving a technical difficulty with SUSE support, you may receive a
   so-called Program Temporary Fix (PTF). PTFs may be issued for various
   packages including those forming the base of SLE Live Patching.
  </p><p>
   kGraft PTFs complying with the conditions described in the previous section
   can be installed as usual and SUSE will ensure that the system in question
   does not need to be rebooted and that future live updates are applied
   cleanly.
  </p><p>
   PTFs issued for the base kernel disrupt the live patching process. First,
   installing the PTF kernel means a reboot as the kernel cannot be replaced as
   a whole at runtime. Second, another reboot is needed to replace the PTF with
   any regular maintenance updates for which the live patches are issued.
  </p><p>
   PTFs for other packages in SLE Live Patching can be treated like regular
   PTFs with the usual guarantees.
  </p></div></div><div class="chapter " id="cha.suse"><div class="titlepage"><div><div><h2 class="title"><span class="number">25 </span><span class="name">Special System Features</span> <a title="Permalink" class="permalink" href="#cha.suse">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_linux.xml</li><li><span class="ds-label">ID: </span>cha.suse</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698747463552">#</a></h6></div><p>
    This chapter starts with information about various software packages, the
    virtual consoles and the keyboard layout. We talk about software components
    like <code class="systemitem">bash</code>,
    <code class="systemitem">cron</code> and
    <code class="systemitem">logrotate</code>, because they were
    changed or enhanced during the last release cycles. Even if they are small
    or considered of minor importance, users should change their default
    behavior, because these components are often closely coupled with the
    system. The chapter concludes with a section about language and
    country-specific settings (I18N and L10N).
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.suse.packages"><span class="number">25.1 </span><span class="name">Information about Special Software Packages</span></a></span></dt><dt><span class="sect1"><a href="#sec.suse.virt.konsolen"><span class="number">25.2 </span><span class="name">Virtual Consoles</span></a></span></dt><dt><span class="sect1"><a href="#sec.suse.kb"><span class="number">25.3 </span><span class="name">Keyboard Mapping</span></a></span></dt><dt><span class="sect1"><a href="#sec.suse.l10n"><span class="number">25.4 </span><span class="name">Language and Country-Specific Settings</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.suse.packages"><div class="titlepage"><div><div><h2 class="title" id="sec.suse.packages"><span class="number">25.1 </span><span class="name">Information about Special Software Packages</span> <a title="Permalink" class="permalink" href="#sec.suse.packages">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_sw_packages.xml</li><li><span class="ds-label">ID: </span>sec.suse.packages</li></ul></div></div></div></div><p>
  The programs <code class="systemitem">bash</code>,
  <code class="systemitem">cron</code>,
  <code class="systemitem">logrotate</code>,
  <code class="systemitem">locate</code>,
  <code class="systemitem">ulimit</code> and
  <code class="systemitem">free</code> are very important for system
  administrators and many users. Man pages and info pages are two useful
  sources of information about commands, but both are not always available. GNU
  Emacs is a popular and very configurable text editor.
 </p><div class="sect2 " id="sec.suse.packages.bash"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.packages.bash"><span class="number">25.1.1 </span><span class="name">The <code class="systemitem">bash</code> Package and <code class="filename">/etc/profile</code></span> <a title="Permalink" class="permalink" href="#sec.suse.packages.bash">#</a></h3></div></div></div><p>
   Bash is the default system shell. When used as a login shell, it reads
   several initialization files. Bash processes them in the order they appear
   in this list:
  </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
     <code class="filename">/etc/profile</code>
    </p></li><li class="listitem "><p>
     <code class="filename">~/.profile</code>
    </p></li><li class="listitem "><p>
     <code class="filename">/etc/bash.bashrc</code>
    </p></li><li class="listitem "><p>
     <code class="filename">~/.bashrc</code>
    </p></li></ol></div><p>
   Make custom settings in <code class="filename">~/.profile</code> or
   <code class="filename">~/.bashrc</code>. To ensure the correct processing of these
   files, it is necessary to copy the basic settings from
   <code class="filename">/etc/skel/.profile</code> or
   <code class="filename">/etc/skel/.bashrc</code> into the home directory of the user.
   It is recommended to copy the settings from <code class="filename">/etc/skel</code>
   after an update. Execute the following shell commands to prevent the loss of
   personal adjustments:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mv ~/.bashrc ~/.bashrc.old
<code class="prompt user">tux &gt; </code>cp /etc/skel/.bashrc ~/.bashrc
<code class="prompt user">tux &gt; </code>mv ~/.profile ~/.profile.old
<code class="prompt user">tux &gt; </code>cp /etc/skel/.profile ~/.profile</pre></div><p>
   Then copy personal adjustments back from the <code class="literal">*.old</code> files.
  </p></div><div class="sect2 " id="sec.suse.packages.cron"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.packages.cron"><span class="number">25.1.2 </span><span class="name">The <span class="phrase">cron</span> Package</span> <a title="Permalink" class="permalink" href="#sec.suse.packages.cron">#</a></h3></div></div></div><p>
   Use <code class="systemitem">cron</code> to automatically run
   commands in the background at
   predefined times. <code class="systemitem">cron</code> uses specially
   formatted time tables, and the tool comes with several default ones. Users
   can also specify custom tables, if needed.
  </p><p>
   The cron tables are located in <code class="filename">/var/spool/cron/tabs</code>.
   <code class="filename">/etc/crontab</code> serves as a systemwide cron table. Enter
   the user name to run the command directly after the time table and before
   the command. In <a class="xref" href="#ex.suse.packages.cron" title="Entry in /etc/crontab">Example 25.1, “Entry in /etc/crontab”</a>,
   <code class="systemitem">root</code> is entered. Package-specific
   tables, located in <code class="filename">/etc/cron.d</code>, have the same format.
   See the <code class="command">cron</code> man page (<code class="command">man cron</code>).
  </p><div class="example" id="ex.suse.packages.cron"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 25.1: </span><span class="name">Entry in /etc/crontab </span><a title="Permalink" class="permalink" href="#ex.suse.packages.cron">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">1-59/5 * * * *   root   test -x /usr/sbin/atrun &amp;&amp; /usr/sbin/atrun</pre></div></div></div><p>
   You cannot edit <code class="filename">/etc/crontab</code> by calling the command
   <code class="command">crontab -e</code>. This file must be loaded directly into an
   editor, then modified and saved.
  </p><p>
   A number of packages install shell scripts to the directories
   <code class="filename">/etc/cron.hourly</code>, <code class="filename">/etc/cron.daily</code>,
   <code class="filename">/etc/cron.weekly</code> and
   <code class="filename">/etc/cron.monthly</code>, whose execution is controlled by
   <code class="filename">/usr/lib/cron/run-crons</code>.
   <code class="filename">/usr/lib/cron/run-crons</code> is run every 15 minutes from
   the main table (<code class="filename">/etc/crontab</code>). This guarantees that
   processes that may have been neglected can be run at the proper time.
  </p><p>
   To run the <code class="filename">hourly</code>, <code class="filename">daily</code> or other
   periodic maintenance scripts at custom times, remove the time stamp files
   regularly using <code class="filename">/etc/crontab</code> entries (see
   <a class="xref" href="#ex.suse.packages.cron.time" title="/etc/crontab: Remove Time Stamp Files">Example 25.2, “/etc/crontab: Remove Time Stamp Files”</a>, which removes the
   <code class="filename">hourly</code> one before every full hour, the
   <code class="filename">daily</code> one once a day at 2:14 a.m., etc.).
  </p><div class="example" id="ex.suse.packages.cron.time"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 25.2: </span><span class="name">/etc/crontab: Remove Time Stamp Files </span><a title="Permalink" class="permalink" href="#ex.suse.packages.cron.time">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">59 *  * * *     root  rm -f /var/spool/cron/lastrun/cron.hourly
14 2  * * *     root  rm -f /var/spool/cron/lastrun/cron.daily
29 2  * * 6     root  rm -f /var/spool/cron/lastrun/cron.weekly
44 2  1 * *     root  rm -f /var/spool/cron/lastrun/cron.monthly</pre></div></div></div><p>
   Or you can set <code class="literal">DAILY_TIME</code> in
   <code class="filename">/etc/sysconfig/cron</code> to the time at which
   <code class="filename">cron.daily</code> should start. The setting of
   <code class="literal">MAX_NOT_RUN</code> ensures that the daily tasks get triggered to
   run, even if the user did not turn on the computer at the specified
   <code class="literal">DAILY_TIME</code> for a longer time. The maximum value of
   <code class="literal">MAX_NOT_RUN</code> is 14 days.
  </p><p>
   The daily system maintenance jobs are distributed to various scripts for
   reasons of clarity. They are contained in the package
   <code class="systemitem">aaa_base</code>.
   <code class="filename">/etc/cron.daily</code> contains, for example, the components
   <code class="filename">suse.de-backup-rpmdb</code>,
   <code class="filename">suse.de-clean-tmp</code> or
   <code class="filename">suse.de-cron-local</code>.
   
  </p></div><div class="sect2 " id="sec.suse.packages.cronstatus"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.packages.cronstatus"><span class="number">25.1.3 </span><span class="name">Stopping Cron Status Messages</span> <a title="Permalink" class="permalink" href="#sec.suse.packages.cronstatus">#</a></h3></div></div></div><p>
   To avoid the mail-flood caused by cron status messages, the default value of
   <code class="literal">SEND_MAIL_ON_NO_ERROR</code> in
   <code class="filename">/etc/sysconfig/cron</code> is set to "<code class="literal">no</code>"
   for new installations. Even with this setting to "<code class="literal">no</code>",
   cron data output will still be sent to the <code class="literal">MAILTO</code>
   address, as documented in the cron man page.
  </p><p>
   In the update case it is recommended to set these values according to your
   needs.
  </p></div><div class="sect2 " id="sec.suse.log"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.log"><span class="number">25.1.4 </span><span class="name">Log Files: Package logrotate</span> <a title="Permalink" class="permalink" href="#sec.suse.log">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_logfiles.xml</li><li><span class="ds-label">ID: </span>sec.suse.log</li></ul></div></div></div></div><p>
  There are several system services (<span class="emphasis"><em>daemons</em></span>) that, along
  with the kernel itself, regularly record the system status and specific
  events onto log files. This way, the administrator can regularly check the
  status of the system at a certain point in time, recognize errors or faulty
  functions and troubleshoot them with pinpoint precision. These log files are
  normally stored in <code class="filename">/var/log</code> as specified by FHS and grow
  on a daily basis. The <code class="systemitem">logrotate</code> package helps
  control the growth of these files. For more details refer to <span class="intraxref">Book “<em class="citetitle ">System Analysis and Tuning Guide</em>”, Chapter 3 “Analyzing and Managing System Log Files”, Section 3.3 “Managing Log Files with <code class="command">logrotate</code>”</span>.
 </p></div><div class="sect2 " id="sec.suse.locate"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.locate"><span class="number">25.1.5 </span><span class="name">The <code class="command">locate</code> Command</span> <a title="Permalink" class="permalink" href="#sec.suse.locate">#</a></h3></div></div></div><p>
   <code class="command">locate</code>, a command for quickly finding files, is not
   included in the standard scope of installed software. If desired, install
   the package <code class="systemitem">mlocate</code>, the successor of the package
   <code class="systemitem">findutils-locate</code>. The
   <code class="systemitem">updatedb</code> process is started
   automatically every night or about 15 minutes after booting the system.
  </p></div><div class="sect2 " id="sec.suse.ulimit"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.ulimit"><span class="number">25.1.6 </span><span class="name">The <code class="command">ulimit</code> Command</span> <a title="Permalink" class="permalink" href="#sec.suse.ulimit">#</a></h3></div></div></div><p>
   With the <code class="command">ulimit</code> (<span class="emphasis"><em>user limits</em></span>)
   command, it is possible to set limits for the use of system resources and to
   have these displayed. <code class="command">ulimit</code> is especially useful for
   limiting available memory for applications. With this, an application can be
   prevented from co-opting too much of the system resources and slowing or
   even hanging up the operating system.
  </p><p>
   <code class="command">ulimit</code> can be used with various options. To limit memory
   usage, use the options listed in <a class="xref" href="#tab.suse.packages.ulimit" title="ulimit: Setting Resources for the User">Table 25.1, “<code class="command">ulimit</code>: Setting Resources for the User”</a>.
  </p><div class="table" id="tab.suse.packages.ulimit"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 25.1: </span><span class="name"><code class="command">ulimit</code>: Setting Resources for the User </span><a title="Permalink" class="permalink" href="#tab.suse.packages.ulimit">#</a></h6></div><div class="table-contents"><table summary="ulimit: Setting Resources for the User" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>
       <p>
        <code class="option">-m</code>
       </p>
      </td><td>
       <p>
        The maximum resident set size
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-v</code>
       </p>
      </td><td>
       <p>
        The maximum amount of virtual memory available to the shell
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-s</code>
       </p>
      </td><td>
       <p>
        The maximum size of the stack
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-c</code>
       </p>
      </td><td>
       <p>
        The maximum size of core files created
       </p>
      </td></tr><tr><td>
       <p>
        <code class="option">-a</code>
       </p>
      </td><td>
       <p>
        All current limits are reported
       </p>
      </td></tr></tbody></table></div></div><p>
   Systemwide default entries are set in <code class="filename">/etc/profile</code>.
   Editing this file directly is not recommended, because changes will be
   overwritten during system upgrades. To customize systemwide profile
   settings, use <code class="filename">/etc/profile.local</code>. Per-user settings
   should be made in
   <code class="filename">~<em class="replaceable ">USER</em>/.bashrc</code>.
  </p><div class="example" id="ex.u.ulimit.bashrc"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 25.3: </span><span class="name"><code class="command">ulimit</code>: Settings in <code class="filename">~/.bashrc</code> </span><a title="Permalink" class="permalink" href="#ex.u.ulimit.bashrc">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen"># Limits maximum resident set size (physical memory):
ulimit -m 98304

# Limits of virtual memory:
ulimit -v 98304</pre></div></div></div><p>
   Memory allocations must be specified in KB. For more detailed information,
   see <code class="command">man bash</code>.
  </p><div id="idm139698747362784" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: <code class="command">ulimit</code> Support</h6><p>
    Not all shells support <code class="command">ulimit</code> directives. PAM (for
    example, <code class="literal">pam_limits</code>) offers comprehensive adjustment
    possibilities as an alternative to <code class="command">ulimit</code>.
   </p></div></div><div class="sect2 " id="sec.suse.free"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.free"><span class="number">25.1.7 </span><span class="name">The <code class="command">free</code> Command</span> <a title="Permalink" class="permalink" href="#sec.suse.free">#</a></h3></div></div></div><p>
   The <code class="command">free</code> command displays the total amount of free and
   used physical memory as well as swap space in the system and the buffers and
   cache consumed by the kernel. The concept of <span class="emphasis"><em>available
   RAM</em></span> dates back to before the days of unified memory management.
   The slogan <span class="emphasis"><em>free memory is bad memory</em></span> applies well to
   Linux. As a result, Linux has always made the effort to balance out caches
   without actually allowing free or unused memory.
  </p><p>
   The kernel does not have direct knowledge of any applications or user data.
   Instead, it manages applications and user data in a <span class="emphasis"><em>page
   cache</em></span>. If memory runs short, parts of it are written to the swap
   partition or to files, from which they can initially be read using the
   <code class="command">mmap</code> command (see <code class="command">man mmap</code>).
  </p><p>
   The kernel also contains other caches, such as the <span class="emphasis"><em>slab
   cache</em></span>, where the caches used for network access are stored. This
   may explain the differences between the counters in
   <code class="filename">/proc/meminfo</code>. Most, but not all, of them can be
   accessed via <code class="filename">/proc/slabinfo</code>.
  </p><p>
   However, if your goal is to find out how much RAM is currently being used,
   find this information in <code class="filename">/proc/meminfo</code>.
  </p></div><div class="sect2 " id="sec.suse.manpages"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.manpages"><span class="number">25.1.8 </span><span class="name">Man Pages and Info Pages</span> <a title="Permalink" class="permalink" href="#sec.suse.manpages">#</a></h3></div></div></div><p>
   For some GNU applications (such as tar), the man pages are no longer
   maintained. For these commands, use the <code class="option">--help</code> option to
   get a quick overview of the info pages, which provide more in-depth
   instructions. Info

   is GNU's hypertext system. Read an introduction to this system by entering
   <code class="command">info</code> <code class="option">info</code>. Info pages can be viewed with
   Emacs by entering <code class="command">emacs</code> <code class="option">-f info</code> or
   directly in a console with <code class="command">info</code>. You can also use tkinfo,
   xinfo or the help system to view info pages.
  </p></div><div class="sect2 " id="sec.suse.packages.man"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.packages.man"><span class="number">25.1.9 </span><span class="name">Selecting Man Pages Using the <code class="command">man</code> Command</span> <a title="Permalink" class="permalink" href="#sec.suse.packages.man">#</a></h3></div></div></div><p>
   To read a man page enter <code class="command">man</code>
   <em class="replaceable ">MAN_PAGE</em>. If a man page with the same name exists
   in different sections, they will all be listed with the corresponding
   section numbers. Select the one to display. If you do not enter a section
   number within a few seconds, the first man page will be displayed.
  </p><p>
   To change this to the default system behavior, set
   <code class="literal">MAN_POSIXLY_CORRECT=1</code> in a shell initialization file such
   as <code class="filename">~/.bashrc</code>.
  </p></div><div class="sect2 " id="sec.suse.emacs"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.emacs"><span class="number">25.1.10 </span><span class="name">Settings for GNU Emacs</span> <a title="Permalink" class="permalink" href="#sec.suse.emacs">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_emacs.xml</li><li><span class="ds-label">ID: </span>sec.suse.emacs</li></ul></div></div></div></div><p>
  GNU Emacs is a complex work environment. The following sections cover the
  configuration files processed when GNU Emacs is started. More information is
  available at <a class="link" href="http://www.gnu.org/software/emacs/" target="_blank">http://www.gnu.org/software/emacs/</a>.
 </p><p>
  On start-up, Emacs reads several files containing the settings of the user,
  system administrator and distributor for customization or preconfiguration.
  The initialization file <code class="filename">~/.emacs</code> is installed to the
  home directories of the individual users from <code class="filename">/etc/skel</code>.
  <code class="filename">.emacs</code>, in turn, reads the file
  <code class="filename">/etc/skel/.gnu-emacs</code>. To customize the program, copy
  <code class="filename">.gnu-emacs</code> to the home directory (with <code class="command">cp
  /etc/skel/.gnu-emacs ~/.gnu-emacs</code>) and make the desired settings
  there.
 </p><p>
  <code class="filename">.gnu-emacs</code> defines the file
  <code class="filename">~/.gnu-emacs-custom</code> as <code class="literal">custom-file</code>.
  If users make settings with the <code class="literal">customize</code> options in
  Emacs, the settings are saved to <code class="filename">~/.gnu-emacs-custom</code>.
 </p><p>
  With <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>, the <code class="systemitem">emacs</code>
  package installs the file <code class="filename">site-start.el</code> in the directory
  <code class="filename">/usr/share/emacs/site-lisp</code>. The file
  <code class="filename">site-start.el</code> is loaded before the initialization file
  <code class="filename">~/.emacs</code>. Among other things,
  <code class="filename">site-start.el</code> ensures that special configuration files
  distributed with Emacs add-on packages, such as
  <code class="systemitem">psgml</code>, are loaded automatically.
  Configuration files of this type are located in
  <code class="filename">/usr/share/emacs/site-lisp</code>, too, and always begin with
  <code class="filename">suse-start-</code>. The local system administrator can specify
  systemwide settings in <code class="filename">default.el</code>.
 </p><p>
  More information about these files is available in the Emacs info file under
  <span class="emphasis"><em>Init File</em></span>: <code class="literal">info:/emacs/InitFile</code>.
  Information about how to disable the loading of these files (if necessary) is
  also provided at this location.
 </p><p>
  The components of Emacs are divided into several packages:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    The base package <code class="systemitem">emacs</code>.
   </p></li><li class="listitem "><p>
    <code class="systemitem">emacs-x11</code> (usually installed):
    the program <span class="emphasis"><em>with</em></span> X11 support.
   </p></li><li class="listitem "><p>
    <code class="systemitem">emacs-nox</code>: the program
    <span class="emphasis"><em>without</em></span> X11 support.
   </p></li><li class="listitem "><p>
    <code class="systemitem">emacs-info</code>: online documentation
    in info format.
   </p></li><li class="listitem "><p>
    <code class="systemitem">emacs-el</code>: the uncompiled library
    files in Emacs Lisp. These are not required at runtime.
   </p></li><li class="listitem "><p>
    Numerous add-on packages can be installed if needed:
    <code class="systemitem">emacs-auctex</code> (LaTeX),
    <code class="systemitem">psgml</code> (SGML and XML),
    <code class="systemitem">gnuserv</code> (client and server
    operation) and others.
   </p></li></ul></div></div></div><div class="sect1 " id="sec.suse.virt.konsolen"><div class="titlepage"><div><div><h2 class="title" id="sec.suse.virt.konsolen"><span class="number">25.2 </span><span class="name">Virtual Consoles</span> <a title="Permalink" class="permalink" href="#sec.suse.virt.konsolen">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_vc.xml</li><li><span class="ds-label">ID: </span>sec.suse.virt.konsolen</li></ul></div></div></div></div><p>
  Linux is a multiuser and multitasking system. The advantages of these
  features can be appreciated even on a stand-alone PC system. In text mode,
  there are six virtual consoles available. Switch between them using
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> through
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>. The
  seventh console is reserved for X and the tenth console shows kernel
  messages.

 </p><p>
  To switch to a console from X without shutting it down, use <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>. To return to X,
  press <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F7</span>.
 </p></div><div class="sect1 " id="sec.suse.kb"><div class="titlepage"><div><div><h2 class="title" id="sec.suse.kb"><span class="number">25.3 </span><span class="name">Keyboard Mapping</span> <a title="Permalink" class="permalink" href="#sec.suse.kb">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_kb.xml</li><li><span class="ds-label">ID: </span>sec.suse.kb</li></ul></div></div></div></div><p>
  To standardize the keyboard mapping of programs, changes were made to the
  following files:
 </p><div class="verbatim-wrap"><pre class="screen">/etc/inputrc
/etc/X11/Xmodmap
/etc/skel/.emacs
/etc/skel/.gnu-emacs
/etc/skel/.vimrc
/etc/csh.cshrc
/etc/termcap
/usr/share/terminfo/x/xterm
/usr/share/X11/app-defaults/XTerm
/usr/share/emacs/<em class="replaceable ">VERSION</em>/site-lisp/term/*.el</pre></div><p>
  These changes only affect applications that use <code class="command">terminfo</code>
  entries or whose configuration files are changed directly
  (<code class="command">vi</code>, <code class="command">emacs</code>, etc.). Applications not
  shipped with the system should be adapted to these defaults.
 </p><p>
  Under X, the compose key (multikey) can be enabled as explained in
  <code class="filename">/etc/X11/Xmodmap</code>.
 </p><p>
  Further settings are possible using the X Keyboard Extension (XKB). This
  extension is also used by the desktop environment GNOME (gswitchit).
 </p><div id="idm139698747283792" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: For More Information</h6><p>
   Information about XKB is available in the documents listed in
   <code class="filename">/usr/share/doc/packages/xkeyboard-config</code> (part of the
   <code class="systemitem">xkeyboard-config</code> package).
  </p></div></div><div class="sect1 " id="sec.suse.l10n"><div class="titlepage"><div><div><h2 class="title" id="sec.suse.l10n"><span class="number">25.4 </span><span class="name">Language and Country-Specific Settings</span> <a title="Permalink" class="permalink" href="#sec.suse.l10n">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>suse_l10n.xml</li><li><span class="ds-label">ID: </span>sec.suse.l10n</li></ul></div></div></div></div><p>
  The system is, to a very large extent, internationalized and can be modified
  for local needs. Internationalization (<span class="emphasis"><em>I18N</em></span>) allows
  specific localization (<span class="emphasis"><em>L10N</em></span>). The abbreviations I18N and
  L10N are derived from the first and last letters of the words and, in
  between, the number of letters omitted.
 </p><p>
  Settings are made with <code class="systemitem">LC_</code> variables defined in the
  file <code class="filename">/etc/sysconfig/language</code>. This refers not only to
  <span class="emphasis"><em>native language support</em></span>, but also to the categories
  <span class="emphasis"><em>Messages</em></span> (Language), <span class="emphasis"><em>Character Set</em></span>,
  <span class="emphasis"><em>Sort Order</em></span>, <span class="emphasis"><em>Time and Date</em></span>,
  <span class="emphasis"><em>Numbers</em></span> and <span class="emphasis"><em>Money</em></span>. Each of these
  categories can be defined directly with its own variable or indirectly with a
  master variable in the file <code class="filename">language</code> (see the
  <code class="command">locale</code> man page).
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747269712"><span class="term "><code class="systemitem">RC_LC_MESSAGES</code>,
    <code class="systemitem">RC_LC_CTYPE</code>,
    <code class="systemitem">RC_LC_COLLATE</code>,
    <code class="systemitem">RC_LC_TIME</code>,
    <code class="systemitem">RC_LC_NUMERIC</code>,
    <code class="systemitem">RC_LC_MONETARY</code>
   </span></dt><dd><p>
     These variables are passed to the shell without the
     <code class="systemitem">RC_</code> prefix and represent the listed categories.
     The shell profiles concerned are listed below. The current setting can be
     shown with the command <code class="command">locale</code>.
    </p></dd><dt id="idm139698747264304"><span class="term "><code class="systemitem">RC_LC_ALL</code>
   </span></dt><dd><p>
     This variable, if set, overwrites the values of the variables already
     mentioned.
    </p></dd><dt id="idm139698747262144"><span class="term "><code class="systemitem">RC_LANG</code>
   </span></dt><dd><p>
     If none of the previous variables are set, this is the fallback. By
     default, only <code class="systemitem">RC_LANG</code> is set. This makes it
     easier for users to enter their own values.
    </p></dd><dt id="idm139698747259472"><span class="term "><code class="systemitem">ROOT_USES_LANG</code>
   </span></dt><dd><p>
     A <code class="literal">yes</code> or <code class="literal">no</code> variable. If set to
     <code class="literal">no</code>, <code class="systemitem">root</code>
     always works in the POSIX environment.
    </p></dd></dl></div><p>
  The variables can be set with the YaST sysconfig editor. The value of such
  a variable contains the language code, country code, encoding and modifier.
  The individual components are connected by special characters:
 </p><div class="verbatim-wrap"><pre class="screen">  LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]</pre></div><div class="sect2 " id="sec.suse.l10n.examples"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.l10n.examples"><span class="number">25.4.1 </span><span class="name">Some Examples</span> <a title="Permalink" class="permalink" href="#sec.suse.l10n.examples">#</a></h3></div></div></div><p>
   You should always set the language and country codes together. Language
   settings follow the standard ISO 639 available at
   <a class="link" href="http://www.evertype.com/standards/iso639/iso639-en.html" target="_blank">http://www.evertype.com/standards/iso639/iso639-en.html</a>
   and <a class="link" href="http://www.loc.gov/standards/iso639-2/" target="_blank">http://www.loc.gov/standards/iso639-2/</a>. Country
   codes are listed in ISO 3166, see
   <a class="link" href="http://en.wikipedia.org/wiki/ISO_3166" target="_blank">http://en.wikipedia.org/wiki/ISO_3166</a>.


  </p><p>
   It only makes sense to set values for which usable description files can be
   found in <code class="filename">/usr/lib/locale</code>. Additional description files
   can be created from the files in <code class="filename">/usr/share/i18n</code> using
   the command <code class="command">localedef</code>. The description files are part of
   the <code class="systemitem">glibc-i18ndata</code> package. A description file for
   <code class="literal">en_US.UTF-8</code> (for English and United States) can be
   created with:
  </p><div class="verbatim-wrap"><pre class="screen">localedef -i en_US -f UTF-8 en_US.UTF-8</pre></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698747245952"><span class="term ">
<code class="systemitem">LANG=en_US.UTF-8</code>
    </span></dt><dd><p>
      This is the default setting if American English is selected during
      installation. If you selected another language, that language is enabled
      but still with UTF-8 as the character encoding.
     </p></dd><dt id="idm139698747243520"><span class="term ">
<code class="systemitem">LANG=en_US.ISO-8859-1</code>
    </span></dt><dd><p>
      This sets the language to English, country to United States and the
      character set to <code class="literal">ISO-8859-1</code>. This character set does
      not support the Euro sign, but it can be useful sometimes for programs
      that have not been updated to support <code class="literal">UTF-8</code>. The
      string defining the charset (<code class="literal">ISO-8859-1</code> in this case)
      is then evaluated by programs like Emacs.
     </p></dd><dt id="idm139698747239648"><span class="term "><code class="systemitem">LANG=en_IE@euro</code>
    </span></dt><dd><p>
      The above example explicitly includes the Euro sign in a language
      setting. This setting is obsolete now, as UTF-8 also covers the Euro
      symbol. It is only useful if an application supports ISO-8859-15 and not
      UTF-8.
     </p></dd></dl></div><p>
   Changes to <code class="filename">/etc/sysconfig/language</code> are activated by the
   following process chain:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     For the Bash: <code class="filename">/etc/profile</code> reads
     <code class="filename">/etc/profile.d/lang.sh</code> which, in turn, analyzes
     <code class="filename">/etc/sysconfig/language</code>.
    </p></li><li class="listitem "><p>
     For tcsh: At login, <code class="filename">/etc/csh.login</code> reads
     <code class="filename">/etc/profile.d/lang.csh</code> which, in turn, analyzes
     <code class="filename">/etc/sysconfig/language</code>.
    </p></li></ul></div><p>
   This ensures that any changes to
   <code class="filename">/etc/sysconfig/language</code> are available at the next login
   to the respective shell, without having to manually activate
   them.
  </p><p>
   Users can override the system defaults by editing their
   <code class="filename">~/.bashrc</code> accordingly. For example, if you do not want
   to use the system-wide <code class="literal">en_US</code> for program messages,
   include <code class="systemitem">LC_MESSAGES=es_ES</code> so that messages are
   displayed in Spanish instead.
  </p></div><div class="sect2 " id="sec.suse.l10n.dot.i18n"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.l10n.dot.i18n"><span class="number">25.4.2 </span><span class="name">Locale Settings in <code class="filename">~/.i18n</code></span> <a title="Permalink" class="permalink" href="#sec.suse.l10n.dot.i18n">#</a></h3></div></div></div><p>
   If you are not satisfied with locale system defaults, change the settings in
   <code class="filename">~/.i18n</code> according to the Bash scripting syntax. Entries
   in <code class="filename">~/.i18n</code> override system defaults from
   <code class="filename">/etc/sysconfig/language</code>. Use the same variable names
   but without the <code class="literal">RC_</code> name space prefixes. For example, use
   <code class="literal">LANG</code> instead of <code class="literal">RC_LANG</code>:
  </p><div class="verbatim-wrap"><pre class="screen">LANG=cs_CZ.UTF-8
LC_COLLATE=C</pre></div></div><div class="sect2 " id="sec.suse.l10n.fallback"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.l10n.fallback"><span class="number">25.4.3 </span><span class="name">Settings for Language Support</span> <a title="Permalink" class="permalink" href="#sec.suse.l10n.fallback">#</a></h3></div></div></div><p>
   Files in the category <span class="emphasis"><em>Messages</em></span> are, as a rule, only
   stored in the corresponding language directory (like
   <code class="filename">en</code>) to have a fallback. If you set
   <code class="systemitem">LANG</code> to <code class="literal">en_US</code> and the message
   file in <code class="filename">/usr/share/locale/en_US/LC_MESSAGES</code> does not
   exist, it falls back to
   <code class="filename">/usr/share/locale/en/LC_MESSAGES</code>.
  </p><p>
   A fallback chain can also be defined, for example, for Breton to French or
   for Galician to Spanish to Portuguese:
  </p><p>
   <code class="systemitem">LANGUAGE="br_FR:fr_FR"</code>
  </p><p>
   <code class="systemitem">LANGUAGE="gl_ES:es_ES:pt_PT"</code>
  </p><p>
   If desired, use the Norwegian variants Nynorsk and Bokmål instead (with
   additional fallback to <code class="literal">no</code>):
  </p><p>
   <code class="systemitem">LANG="nn_NO"</code>
  </p><p>
   <code class="systemitem">LANGUAGE="nn_NO:nb_NO:no"</code>
  </p><p>
   or
  </p><p>
   <code class="systemitem">LANG="nb_NO"</code>
  </p><p>
   <code class="systemitem">LANGUAGE="nb_NO:nn_NO:no"</code>
  </p><p>
   Note that in Norwegian, <code class="systemitem">LC_TIME</code> is also treated
   differently.
  </p><p>
   One problem that can arise is a separator used to delimit groups of digits
   not being recognized properly. This occurs if <code class="systemitem">LANG</code>
   is set to only a two-letter language code like <code class="literal">de</code>, but
   the definition file glibc uses is located in
   <code class="filename">/usr/share/lib/de_DE/LC_NUMERIC</code>. Thus
   <code class="systemitem">LC_NUMERIC</code> must be set to <code class="literal">de_DE</code>
   to make the separator definition visible to the system.
  </p></div><div class="sect2 " id="sec.suse.l10n.info"><div class="titlepage"><div><div><h3 class="title" id="sec.suse.l10n.info"><span class="number">25.4.4 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.suse.l10n.info">#</a></h3></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <span class="emphasis"><em>The GNU C Library Reference Manual</em></span>, Chapter
     <span class="quote">“<span class="quote">Locales and Internationalization</span>”</span>. It is included in
     <code class="systemitem">glibc-info</code>.<span class="phrase"> The package is
     available from the SUSE Linux Enterprise SDK. The SDK is a module for SUSE Linux Enterprise and is
     available via an online channel from the SUSE Customer Center. Alternatively, go to <a class="link" href="http://download.suse.com/" target="_blank">http://download.suse.com/</a>, search for <code class="literal">SUSE Linux Enterprise
     Software Development Kit</code> and download it from there. Refer to
     <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 13 “Installing Modules, Extensions, and Third Party Add-On Products”</span> for details.</span>
    </p></li><li class="listitem "><p>
     Markus Kuhn, <span class="emphasis"><em>UTF-8 and Unicode FAQ for Unix/Linux</em></span>,
     currently at
     <a class="link" href="http://www.cl.cam.ac.uk/~mgk25/unicode.html" target="_blank">http://www.cl.cam.ac.uk/~mgk25/unicode.html</a>.
    </p></li><li class="listitem "><p>
     <span class="emphasis"><em>Unicode-HOWTO</em></span> by Bruno Haible, available at

     <a class="link" href="http://tldp.org/HOWTO/Unicode-HOWTO-1.html" target="_blank">http://tldp.org/HOWTO/Unicode-HOWTO-1.html</a>.
    </p></li></ul></div></div></div></div><div class="chapter " id="cha.nm"><div class="titlepage"><div><div><h2 class="title"><span class="number">26 </span><span class="name">Using NetworkManager</span> <a title="Permalink" class="permalink" href="#cha.nm">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>nm.xml</li><li><span class="ds-label">ID: </span>cha.nm</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.nm.usecase"><span class="number">26.1 </span><span class="name">Use Cases for NetworkManager</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.activate"><span class="number">26.2 </span><span class="name">Enabling or Disabling NetworkManager</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.configure"><span class="number">26.3 </span><span class="name">Configuring Network Connections</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.security"><span class="number">26.4 </span><span class="name">NetworkManager and Security</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.faq"><span class="number">26.5 </span><span class="name">Frequently Asked Questions</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.trouble"><span class="number">26.6 </span><span class="name">Troubleshooting</span></a></span></dt><dt><span class="sect1"><a href="#sec.nm.more"><span class="number">26.7 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><p>
  NetworkManager is the ideal solution for laptops and other portable computers. It
  supports state-of-the-art encryption types and standards for network
  connections, including connections to 802.1X protected networks. 802.1X is
  the <span class="quote">“<span class="quote">IEEE Standard for Local and Metropolitan Area
  Networks—Port-Based Network Access Control</span>”</span>. With NetworkManager, you need
  not worry about configuring network interfaces and switching between wired or
  wireless networks when you are moving. NetworkManager can automatically connect to
  known wireless networks or manage several network connections in
  parallel—the fastest connection is then used as default. Furthermore,
  you can manually switch between available networks and manage your network
  connection using an applet in the system tray.

 </p><p>
  Instead of only one connection being active, multiple connections may be
  active at once. This enables you to unplug your laptop from an Ethernet and
  remain connected via a wireless connection.
 </p><div class="sect1 " id="sec.nm.usecase"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.usecase"><span class="number">26.1 </span><span class="name">Use Cases for NetworkManager</span> <a title="Permalink" class="permalink" href="#sec.nm.usecase">#</a></h2></div></div></div><p>
   NetworkManager provides a sophisticated and intuitive user interface, which enables
   users to easily switch their network environment. However, NetworkManager is not a
   suitable solution in the following cases:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Your computer provides network services for other computers in your
     network, for example, it is a DHCP or DNS server.
    </p></li><li class="listitem "><p>
     Your computer is a Xen server or your system is a virtual system inside
     Xen.
    </p></li></ul></div></div><div class="sect1 " id="sec.nm.activate"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.activate"><span class="number">26.2 </span><span class="name">Enabling or Disabling NetworkManager</span> <a title="Permalink" class="permalink" href="#sec.nm.activate">#</a></h2></div></div></div><p>
   On laptop computers, NetworkManager is enabled by default. However, it can be at any
   time enabled or disabled in the YaST Network Settings module.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Run YaST and go to <span class="guimenu">System</span> › <span class="guimenu">Network Settings</span>.
    </p></li><li class="step "><p>
     The <span class="guimenu">Network Settings</span> dialog opens. Go to the
     <span class="guimenu">Global Options</span> tab.
    </p></li><li class="step "><p>
     To configure and manage your network connections with NetworkManager:
    </p><ol type="a" class="substeps "><li class="step "><p>
       In the <span class="guimenu">Network Setup Method</span> field, select
       <span class="guimenu">User Controlled with NetworkManager</span>.
      </p></li><li class="step "><p>
       Click <span class="guimenu">OK</span> and close YaST.
      </p></li><li class="step "><p>
       Configure your network connections with NetworkManager as described in
       <a class="xref" href="#sec.nm.configure" title="26.3. Configuring Network Connections">Section 26.3, “Configuring Network Connections”</a>.
      </p></li></ol></li><li class="step "><p>
     To deactivate NetworkManager and control the network with your own configuration
    </p><ol type="a" class="substeps "><li class="step "><p>
       In the <span class="guimenu">Network Setup Method</span> field, choose
       <span class="guimenu">Controlled by wicked</span>.
      </p></li><li class="step "><p>
       Click <span class="guimenu">OK</span>.
      </p></li><li class="step "><p>
       Set up your network card with YaST using automatic configuration via
       DHCP or a static IP address.
      </p><p>
       Find a detailed description of the network configuration with YaST in
       <a class="xref" href="#sec.network.yast" title="18.4. Configuring a Network Connection with YaST">Section 18.4, “Configuring a Network Connection with YaST”</a>.
      </p></li></ol></li></ol></div></div></div><div class="sect1 " id="sec.nm.configure"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.configure"><span class="number">26.3 </span><span class="name">Configuring Network Connections</span> <a title="Permalink" class="permalink" href="#sec.nm.configure">#</a></h2></div></div></div><p>
   After having enabled NetworkManager in YaST, configure your network connections with
   the NetworkManager front-end available in GNOME. It shows tabs for all types of
   network connections, such as wired, wireless, mobile broadband, DSL, and VPN
   connections.
  </p><p>
   To open the network configuration dialog in GNOME, open the settings menu
   via the status menu and click the <span class="guimenu">Network</span> entry.
  </p><div id="idm139698747160816" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Availability of Options</h6><p>
    Depending on your system setup, you may not be allowed to configure
    connections. In a secured environment, some options may be locked or
    require <code class="systemitem">root</code> permission. Ask your system administrator for details.
   </p></div><div class="figure" id="idm139698747158560"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/nm_gnome_tabs.png"><img src="images/nm_gnome_tabs.png" width="" alt="GNOME Network Connections Dialog" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 26.1: </span><span class="name">GNOME Network Connections Dialog </span><a title="Permalink" class="permalink" href="#idm139698747158560">#</a></h6></div></div><div class="procedure " id="pro.nm.configure.add"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 26.1: </span><span class="name">Adding and Editing Connections </span><a title="Permalink" class="permalink" href="#pro.nm.configure.add">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Open the NetworkManager configuration dialog.
    </p></li><li class="step "><p>
     To add a Connection:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Click the <span class="guimenu">+</span> icon in the lower left corner.
      </p></li><li class="step "><p>
       Select your preferred connection type and follow the instructions.
      </p></li><li class="step "><p>
       When you are finished click <span class="guimenu">Add</span>.
      </p></li><li class="step "><p>
       After having confirmed your changes, the newly configured network
       connection appears in the list of available networks you get by opening
       the Status Menu.
      </p></li></ol></li><li class="step "><p>
     To edit a connection:
    </p><ol type="a" class="substeps "><li class="step "><p>
       Select the entry to edit.
      </p></li><li class="step "><p>
       Click the gear icon to open the <span class="guimenu">Connection Settings</span>
       dialog.
      </p></li><li class="step "><p>
       Insert your changes and click <span class="guimenu">Apply</span> to save them.
      </p></li><li class="step "><p>
       To Make your connection available as system connection go to the
       <span class="guimenu">Identity</span> tab and set the check box <span class="guimenu">Make
       available to other users</span>. For more information about User and
       System Connections, see <a class="xref" href="#sec.nm.sec.types" title="26.4.1. User and System Connections">Section 26.4.1, “User and System Connections”</a>.
      </p></li></ol></li></ol></div></div><div class="sect2 " id="sec.nm.gome.applet.wired"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.gome.applet.wired"><span class="number">26.3.1 </span><span class="name">Managing Wired Network Connections</span> <a title="Permalink" class="permalink" href="#sec.nm.gome.applet.wired">#</a></h3></div></div></div><p>
    If your computer is connected to a wired network, use the NetworkManager applet to
    manage the connection.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open the Status Menu and click <span class="guimenu">Wired</span> to change the
      connection details or to switch it off.
     </p></li><li class="step "><p>
      To change the settings click <span class="guimenu">Wired Settings</span> and then
      click the gear icon.
     </p></li><li class="step "><p>
      To switch off all network connections, activate the <span class="guimenu">Airplane
      Mode</span> setting.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.nm.gnome.applet.wireless"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.gnome.applet.wireless"><span class="number">26.3.2 </span><span class="name">Managing Wireless Network Connections</span> <a title="Permalink" class="permalink" href="#sec.nm.gnome.applet.wireless">#</a></h3></div></div></div><p>
    Visible wireless networks are listed in the GNOME NetworkManager applet menu under
    <span class="guimenu">Wireless Networks</span>. The signal strength of each network
    is also shown in the menu. Encrypted wireless networks are marked with a
    shield icon.
   </p><div class="procedure " id="idm139698747128784"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 26.2: </span><span class="name">Connecting to a visible Wireless Network </span><a title="Permalink" class="permalink" href="#idm139698747128784">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To connect to a visible wireless network, open the Status Menu and click
      <span class="guimenu">Wi-Fi</span>.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Turn On</span> to enable it.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Select Network</span>, select your Wi-Fi Network and
      click <span class="guimenu">Connect</span>.
     </p></li><li class="step "><p>
      If the network is encrypted, a configuration dialog opens. It shows the
      type of encryption the network uses and text boxes for entering the login
      credentials.
     </p></li></ol></div></div><div class="procedure " id="idm139698747122224"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 26.3: </span><span class="name">Connecting to an Invisible Wireless Network </span><a title="Permalink" class="permalink" href="#idm139698747122224">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      To connect to a network that does not broadcast its service set
      identifier (SSID or ESSID) and therefore cannot be detected
      automatically, open the Status Menu and click <span class="guimenu">Wi-Fi</span>.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Wi-Fi Settings</span> to open the detailed settings
      menu.
     </p></li><li class="step "><p>
      Make sure your Wi-Fi is enabled and click <span class="guimenu">Connect to Hidden
      Network</span>.
     </p></li><li class="step "><p>
      In the dialog that opens, enter the SSID or ESSID in <span class="guimenu">Network
      Name</span> and set encryption parameters if necessary.
     </p></li></ol></div></div><p>
    A wireless network that has been chosen explicitly will remain connected as
    long as possible. If a network cable is plugged in during that time, any
    connections that have been set to <span class="guimenu">Stay connected when
    possible</span> will be connected, while the wireless connection remains
    up.
   </p></div><div class="sect2 " id="sec.nm.gnome.applet.captive-portal-detection"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.gnome.applet.captive-portal-detection"><span class="number">26.3.3 </span><span class="name">Enabling Wireless Captive Portal Detection</span> <a title="Permalink" class="permalink" href="#sec.nm.gnome.applet.captive-portal-detection">#</a></h3></div></div></div><p>
    On the initial connection, many public wireless hotspots force users to
    visit a landing page (the <span class="emphasis"><em>captive portal</em></span>). Before you
    have logged in or agreed to the terms and conditions, all your HTTP
    requests are redirected to the provider's captive portal.
   </p><p>
    When connecting to a wireless network with a captive portal, NetworkManager and GNOME
    will automatically show the login page as part of the connection process.
    This ensures that you always know when you are connected, and helps you to
    get set up as quickly as possible without using the browser to login.
   </p><p>
    To enable this feature, install the package
    <span class="package">NetworkManager-branding-SLE</span>
    and restart NetworkManager with:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart network</pre></div><p>
    Whenever you connect to a network with a captive portal, NetworkManager (or GNOME)
    will open the captive portal login page for you. Login with your
    credentials to get access to the Internet.
   </p></div><div class="sect2 " id="sec.nm.gnome.applet.accesspoint"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.gnome.applet.accesspoint"><span class="number">26.3.4 </span><span class="name">Configuring Your Wi-Fi/Bluetooth Card as an Access Point</span> <a title="Permalink" class="permalink" href="#sec.nm.gnome.applet.accesspoint">#</a></h3></div></div></div><p>
    If your Wi-Fi/Bluetooth card supports access point mode, you can use NetworkManager
    for the configuration.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open the Status Menu and click <span class="guimenu">Wi-Fi</span>.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Wi-Fi Settings</span> to open the detailed settings
      menu.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Use as Hotspot</span> and follow the instructions.
     </p></li><li class="step "><p>
      Use the credentials shown in the resulting dialog to connect to the
      hotspot from a remote machine.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.nm.vpn"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.vpn"><span class="number">26.3.5 </span><span class="name">NetworkManager and VPN</span> <a title="Permalink" class="permalink" href="#sec.nm.vpn">#</a></h3></div></div></div><p>
    NetworkManager supports several Virtual Private Network (VPN) technologies. For each
    technology, <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> comes with a base package providing the generic
    support for NetworkManager. In addition to that, you also need to install the
    respective desktop-specific package for your applet.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698747097264"><span class="term ">OpenVPN</span></dt><dd><p>
       To use this VPN technology, install:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="systemitem">NetworkManager-openvpn</code>
        </p></li><li class="listitem "><p>
         <code class="systemitem">NetworkManager-openvpn-gnome</code>
        </p></li></ul></div></dd><dt id="idm139698747091200"><span class="term ">openconnect</span></dt><dd><p>
       To use this VPN technology, install:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="systemitem">NetworkManager-openconnect</code>
        </p></li><li class="listitem "><p>
         <code class="systemitem">NetworkManager-openconnect-gnome</code>
        </p></li></ul></div></dd><dt id="idm139698747085120"><span class="term ">PPTP (Point-to-Point Tunneling Protocol)</span></dt><dd><p>
       To use this VPN technology, install:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="systemitem">NetworkManager-pptp</code>
        </p></li><li class="listitem "><p>
         <code class="systemitem">NetworkManager-pptp-gnome</code>
        </p></li></ul></div></dd></dl></div><p>
    The following procedure describes how to set up your computer as an OpenVPN
    client using NetworkManager. Setting up other types of VPNs works analogously.
   </p><p>
    Before you begin, make sure that the package
    <code class="systemitem">NetworkManager-openvpn-gnome</code> is
    installed and all dependencies have been resolved.
   </p><div class="procedure " id="idm139698747077008"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 26.4: </span><span class="name">Setting Up OpenVPN with NetworkManager </span><a title="Permalink" class="permalink" href="#idm139698747077008">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open the application <span class="guimenu">Settings</span> by clicking the status
      icons at the right end of the panel and clicking the <span class="guimenu">wrench and
      screwdriver</span> icon. In the window
      <span class="guimenu">All Settings</span>, choose <span class="guimenu">Network</span>.
     </p></li><li class="step "><p>
      Click the <span class="guimenu">+</span> icon.
     </p></li><li class="step "><p>
      Select <span class="guimenu">VPN</span> and then <span class="guimenu">OpenVPN</span>.
     </p></li><li class="step "><p>
      Choose the <span class="guimenu">Authentication</span> type. Depending on the
      setup of your OpenVPN server, choose <span class="guimenu">Certificates
      (TLS)</span> or <span class="guimenu">Password with Certificates (TLS)</span>.
     </p></li><li class="step "><p>
      Insert the necessary values into the respective text boxes. For our
      example configuration, these are:
     </p><div class="informaltable"><table border="1"><colgroup><col class="field" /><col class="desc" /></colgroup><tbody><tr><td>
          <p>
           <span class="guimenu">Gateway</span>
          </p>
         </td><td>
          <p>
           The remote endpoint of the VPN server
          </p>
         </td></tr><tr><td>
          <p>
           <span class="guimenu">User name</span>
          </p>
         </td><td>
          <p>
           The user (only available when you have selected <span class="guimenu">Password
           with Certificates (TLS)</span>)
          </p>
         </td></tr><tr><td>
          <p>
           <span class="guimenu">Password</span>
          </p>
         </td><td>
          <p>
           The password for the user (only available when you have selected
           <span class="guimenu">Password with Certificates (TLS)</span>)
          </p>
         </td></tr><tr><td>
          <p>
           <span class="guimenu">User Certificate</span>
          </p>
         </td><td>
          <p>
           <code class="filename">/etc/openvpn/client1.crt</code>
          </p>
         </td></tr><tr><td>
          <p>
           <span class="guimenu">CA Certificate</span>
          </p>
         </td><td>
          <p>
           <code class="filename">/etc/openvpn/ca.crt</code>
          </p>
         </td></tr><tr><td>
          <p>
           <span class="guimenu">Private Key</span>
          </p>
         </td><td>
          <p>
           <code class="filename">/etc/openvpn/client1.key</code>
          </p>
         </td></tr></tbody></table></div></li><li class="step "><p>
      Finish the configuration with <span class="guimenu">Add</span>.
     </p></li><li class="step "><p>
      To enable the connection, in the <span class="guimenu">Network</span> panel of the
      <span class="guimenu">Settings</span> application click the switch button.
      Alternatively, click the status icons at the right end of the panel, click
      the name of your VPN and then <span class="guimenu">Connect</span>.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.nm.security"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.security"><span class="number">26.4 </span><span class="name">NetworkManager and Security</span> <a title="Permalink" class="permalink" href="#sec.nm.security">#</a></h2></div></div></div><p>
   NetworkManager distinguishes two types of wireless connections, trusted and untrusted.
   A trusted connection is any network that you explicitly selected in the
   past. All others are untrusted. Trusted connections are identified by the
   name and MAC address of the access point. Using the MAC address ensures that
   you cannot use a different access point with the name of your trusted
   connection.
  </p><p>
   NetworkManager periodically scans for available wireless networks. If multiple trusted
   networks are found, the most recently used is automatically selected. NetworkManager
   waits for your selection in case that all networks are untrusted.
  </p><p>
   If the encryption setting changes but the name and MAC address remain the
   same, NetworkManager attempts to connect, but first you are asked to confirm the new
   encryption settings and provide any updates, such as a new key.
  </p><p>
   If you switch from using a wireless connection to offline mode,
   NetworkManager blanks the SSID or ESSID. This ensures that the card is
   disconnected.
  </p><div class="sect2 " id="sec.nm.sec.types"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.sec.types"><span class="number">26.4.1 </span><span class="name">User and System Connections</span> <a title="Permalink" class="permalink" href="#sec.nm.sec.types">#</a></h3></div></div></div><p>
    NetworkManager knows two types of connections: <code class="literal">user</code> and
    <code class="literal">system</code> connections. User connections are connections
    that become available to NetworkManager when the first user logs in. Any required
    credentials are asked from the user and when the user logs out, the
    connections are disconnected and removed from NetworkManager. Connections that are
    defined as system connection can be shared by all users and are made
    available right after NetworkManager is started—before any users log in. In
    case of system connections, all credentials must be provided at the time
    the connection is created. Such system connections can be used to
    automatically connect to networks that require authorization. For
    information how to configure user or system connections with NetworkManager, refer to
    <a class="xref" href="#sec.nm.configure" title="26.3. Configuring Network Connections">Section 26.3, “Configuring Network Connections”</a>.
   </p></div><div class="sect2 " id="sec.nm.sec.store"><div class="titlepage"><div><div><h3 class="title" id="sec.nm.sec.store"><span class="number">26.4.2 </span><span class="name">Storing Passwords and Credentials</span> <a title="Permalink" class="permalink" href="#sec.nm.sec.store">#</a></h3></div></div></div><p>
    If you do not want to re-enter your credentials each time you want to
    connect to an encrypted network, you can use the GNOME Keyring Manager to
    store your credentials encrypted on the disk, secured by a master password.
   </p><p>
    NetworkManager can also retrieve its certificates for secure connections (for
    example, encrypted wired, wireless or VPN connections) from the certificate
    store. For more information, refer to <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 12 “Certificate Store”</span>.
   </p></div></div><div class="sect1 " id="sec.nm.faq"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.faq"><span class="number">26.5 </span><span class="name">Frequently Asked Questions</span> <a title="Permalink" class="permalink" href="#sec.nm.faq">#</a></h2></div></div></div><p>
   In the following, find some frequently asked questions about configuring
   special network options with NetworkManager.
  </p><div class="qandaset" id="idm139698747027232"><div class="free-id" id="idm139698747026944"></div><dl class="qandaentry"><dt class="question" id="idm139698747026656">
      How to tie a connection to a specific device?
     </dt><dd class="answer" id="idm139698747025712"><p>
      By default, connections in NetworkManager are device type-specific: they apply to
      all physical devices with the same type. If more than one physical device
      per connection type is available (for example, your machine is equipped
      with two Ethernet cards), you can tie a connection to a certain device.

     </p><p>
      To do this in GNOME, first look up the MAC address of your device (use
      the <span class="guimenu">Connection Information</span> available from the applet,
      or use the output of command line tools like <code class="command">nm-tool</code>
      or <code class="command">wicked show all</code>). Then start the dialog for
      configuring network connections and choose the connection you want to
      modify. On the <span class="guimenu">Wired</span> or <span class="guimenu">Wireless</span>
      tab, enter the <span class="guimenu">MAC Address</span> of the device and confirm
      your changes.
     </p></dd></dl><div class="free-id" id="idm139698747020912"></div><dl class="qandaentry"><dt class="question" id="idm139698747020624">
      How to specify a certain access point in case multiple access points with
      the same ESSID are detected?
     </dt><dd class="answer" id="idm139698747019616"><p>
      When multiple access points with different wireless bands (a/b/g/n) are
      available, the access point with the strongest signal is automatically
      chosen by default. To override this, use the <span class="guimenu">BSSID</span>
      field when configuring wireless connections.
     </p><p>
      The Basic Service Set Identifier (BSSID) uniquely identifies each Basic
      Service Set. In an infrastructure Basic Service Set, the BSSID is the MAC
      address of the wireless access point. In an independent (ad-hoc) Basic
      Service Set, the BSSID is a locally administered MAC address generated
      from a 46-bit random number.
     </p><p>
      Start the dialog for configuring network connections as described in
      <a class="xref" href="#sec.nm.configure" title="26.3. Configuring Network Connections">Section 26.3, “Configuring Network Connections”</a>. Choose the wireless connection you
      want to modify and click <span class="guimenu">Edit</span>. On the
      <span class="guimenu">Wireless</span> tab, enter the BSSID.
     </p></dd></dl><div class="free-id" id="idm139698747015056"></div><dl class="qandaentry"><dt class="question" id="idm139698747014768">
      How to share network connections to other computers?
     </dt><dd class="answer" id="idm139698747013824"><p>
      The primary device (the device which is connected to the Internet) does
      not need any special configuration. However, you need to configure the
      device that is connected to the local hub or machine as follows:
     </p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>
        Start the dialog for configuring network connections as described in
        <a class="xref" href="#sec.nm.configure" title="26.3. Configuring Network Connections">Section 26.3, “Configuring Network Connections”</a>. Choose the connection you want to
        modify and click <span class="guimenu">Edit</span>. Switch to the <span class="guimenu">IPv4
        Settings</span> tab and from the <span class="guimenu">Method</span> drop-down
        box, activate <span class="guimenu">Shared to other computers</span>. That will
        enable IP traffic forwarding and run a DHCP server on the device.
        Confirm your changes in NetworkManager.
       </p></li><li class="listitem "><p>
        As the DCHP server uses port <code class="literal">67</code>, make sure that it
        is not blocked by the firewall: On the machine sharing the connections,
        start YaST and select <span class="guimenu">Security and
        Users</span> › <span class="guimenu">Firewall</span>. Switch to
        the <span class="guimenu">Allowed Services</span> category. If <span class="guimenu">DCHP
        Server</span> is not already shown as <span class="guimenu">Allowed
        Service</span>, select <span class="guimenu">DCHP Server</span> from
        <span class="guimenu">Services to Allow</span> and click <span class="guimenu">Add</span>.
        Confirm your changes in YaST.
       </p></li></ol></div></dd></dl><div class="free-id" id="idm139698747002720"></div><dl class="qandaentry"><dt class="question" id="idm139698747002432">
      How to provide static DNS information with automatic (DHCP, PPP, VPN)
      addresses?
     </dt><dd class="answer" id="idm139698747001456"><p>
      In case a DHCP server provides invalid DNS information (and/or routes),
      you can override it. Start the dialog for configuring network connections
      as described in <a class="xref" href="#sec.nm.configure" title="26.3. Configuring Network Connections">Section 26.3, “Configuring Network Connections”</a>. Choose the connection
      you want to modify and click <span class="guimenu">Edit</span>. Switch to the
      <span class="guimenu">IPv4 Settings</span> tab, and from the
      <span class="guimenu">Method</span> drop-down box, activate <span class="guimenu">Automatic
      (DHCP) addresses only</span>. Enter the DNS information in the
      <span class="guimenu">DNS Servers</span> and <span class="guimenu">Search Domains</span>
      fields. To <span class="guimenu">Ignore automatically obtained routes</span> click
      <span class="guimenu">Routes</span> and activate the respective check box. Confirm
      your changes.
     </p></dd></dl><div class="free-id" id="idm139698746995888"></div><dl class="qandaentry"><dt class="question" id="idm139698746995600">
      How to make NetworkManager connect to password protected networks before a user
      logs in?
     </dt><dd class="answer" id="idm139698746994608"><p>
      Define a <code class="literal">system connection</code> that can be used for such
      purposes. For more information, refer to
      <a class="xref" href="#sec.nm.sec.types" title="26.4.1. User and System Connections">Section 26.4.1, “User and System Connections”</a>.
     </p></dd></dl></div></div><div class="sect1 " id="sec.nm.trouble"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.trouble"><span class="number">26.6 </span><span class="name">Troubleshooting</span> <a title="Permalink" class="permalink" href="#sec.nm.trouble">#</a></h2></div></div></div><p>
   Connection problems can occur. Some common problems related to NetworkManager include
   the applet not starting or a missing VPN option. Methods for resolving and
   preventing these problems depend on the tool used.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746990048"><span class="term ">NetworkManager Desktop Applet Does Not Start</span></dt><dd><p>
      The applets starts automatically if the network is set up for NetworkManager
      control. If the applet does not start, check if NetworkManager is enabled in YaST
      as described in <a class="xref" href="#sec.nm.activate" title="26.2. Enabling or Disabling NetworkManager">Section 26.2, “Enabling or Disabling NetworkManager”</a>. Then make sure that
      the NetworkManager-gnome package is also installed.
     </p><p>
      If the desktop applet is installed but is not running for some reason,
      start it manually. If the desktop applet is installed but is not running
      for some reason, start it manually with the command
      <code class="command">nm-applet</code>.
     </p></dd><dt id="idm139698746986320"><span class="term ">NetworkManager Applet Does Not Include the VPN Option</span></dt><dd><p>
      Support for NetworkManager, applets, and VPN for NetworkManager is distributed in separate
      packages. If your NetworkManager applet does not include the VPN option, check if
      the packages with NetworkManager support for your VPN technology are installed. For
      more information, see <a class="xref" href="#sec.nm.vpn" title="26.3.5. NetworkManager and VPN">Section 26.3.5, “NetworkManager and VPN”</a>.
     </p></dd><dt id="idm139698746983648"><span class="term ">No Network Connection Available</span></dt><dd><p>
      If you have configured your network connection correctly and all other
      components for the network connection (router, etc.) are also up and
      running, it sometimes helps to restart the network interfaces on your
      computer. To do so, log in to a command line as <code class="systemitem">root</code> and run
      <code class="command">systemctl restart wickeds</code>.
     </p></dd></dl></div></div><div class="sect1 " id="sec.nm.more"><div class="titlepage"><div><div><h2 class="title" id="sec.nm.more"><span class="number">26.7 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.nm.more">#</a></h2></div></div></div><p>
   More information about NetworkManager can be found on the following Web sites and
   directories:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746978064"><span class="term ">NetworkManager Project Page</span></dt><dd><p>
      <a class="link" href="http://projects.gnome.org/NetworkManager/" target="_blank">http://projects.gnome.org/NetworkManager/</a>
     </p></dd><dt id="idm139698746975664"><span class="term ">Package Documentation</span></dt><dd><p>
      Also check out the information in the following directories for the
      latest information about NetworkManager and the GNOME applet:
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        <code class="filename">/usr/share/doc/packages/NetworkManager/</code>,
       </p></li><li class="listitem "><p>
        <code class="filename">/usr/share/doc/packages/NetworkManager-gnome/</code>.
       </p></li></ul></div></dd></dl></div></div></div><div class="chapter " id="cha.power-mgmt"><div class="titlepage"><div><div><h2 class="title"><span class="number">27 </span><span class="name">Power Management</span> <a title="Permalink" class="permalink" href="#cha.power-mgmt">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>powermanagement.xml</li><li><span class="ds-label">ID: </span>cha.power-mgmt</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.power-mgmt.save"><span class="number">27.1 </span><span class="name">Power Saving Functions</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.acpi"><span class="number">27.2 </span><span class="name">Advanced Configuration and Power Interface (ACPI)</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.silenthd"><span class="number">27.3 </span><span class="name">Rest for the Hard Disk</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.faq"><span class="number">27.4 </span><span class="name">Troubleshooting</span></a></span></dt><dt><span class="sect1"><a href="#sec.power-mgmt.info"><span class="number">27.5 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><p>
  Power management is especially important on laptop computers, but is also
  useful on other systems. ACPI (Advanced Configuration and Power Interface) is
  available on all modern computers (laptops, desktops, and servers). Power
  management technologies require suitable hardware and BIOS routines. Most
  laptops and many modern desktops and servers meet these requirements. It is
  also possible to control CPU frequency scaling to save power or decrease
  noise.
 </p><div class="sect1 " id="sec.power-mgmt.save"><div class="titlepage"><div><div><h2 class="title" id="sec.power-mgmt.save"><span class="number">27.1 </span><span class="name">Power Saving Functions</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.save">#</a></h2></div></div></div><p>
   Power saving functions are not only significant for the mobile use of
   laptops, but also for desktop systems. The main functions and their use in
   ACPI are:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746962432"><span class="term ">Standby</span></dt><dd><p>
      not supported.
     </p></dd><dt id="idm139698746960624"><span class="term ">Suspend (to memory)</span></dt><dd><p>
      This mode writes the entire system state to the RAM. Subsequently, the
      entire system except the RAM is put to sleep. In this state, the computer
      consumes very little power. The advantage of this state is the
      possibility of resuming work at the same point within a few seconds
      without having to boot and restart applications. This function
      corresponds to the ACPI state <code class="literal">S3</code>.

     </p></dd><dt id="idm139698746958000"><span class="term ">Hibernation (suspend to disk)
    </span></dt><dd><p>
      In this operating mode, the entire system state is written to the hard
      disk and the system is powered off. There must be a swap partition at
      least as big as the RAM to write all the active data. Reactivation from
      this state takes about 30 to 90 seconds. The state prior to the suspend
      is restored. Some manufacturers offer useful hybrid variants of this
      mode, such as RediSafe in IBM Thinkpads. The corresponding ACPI state is
      <code class="literal">S4</code>. In Linux, suspend to disk is performed by kernel
      routines that are independent from ACPI.
     </p><div id="idm139698746955536" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Changed UUID for Swap Partitions when Formatting via <code class="command">mkswap</code></h6><p>Do not reformat existing swap partitions with <code class="command">mkswap</code>
     if possible. Reformatting with <code class="command">mkswap</code> will change
     the UUID value of the swap partition. Either reformat via YaST (will
     update <code class="filename">/etc/fstab</code>) or adjust
     <code class="filename">/etc/fstab</code> manually.
  </p></div></dd><dt id="idm139698746951632"><span class="term ">Battery Monitor
    </span></dt><dd><p>
      ACPI checks the battery charge status and provides information about it.
      Additionally, it coordinates actions to perform when a critical charge
      status is reached.
     </p></dd><dt id="idm139698746949664"><span class="term ">Automatic Power-Off</span></dt><dd><p>
      Following a shutdown, the computer is powered off. This is especially
      important when an automatic shutdown is performed shortly before the
      battery is empty.
     </p></dd><dt id="idm139698746947712"><span class="term ">Processor Speed Control</span></dt><dd><p>
      In connection with the CPU, energy can be saved in three different ways:
      frequency and voltage scaling (also known as
      <span class="productname">PowerNow!</span> or
      <span class="productname">Speedstep</span>), throttling and putting
      the processor to sleep (C-states). Depending on the operating mode of the
      computer, these methods can also be combined.
     </p></dd></dl></div></div><div class="sect1 " id="sec.power-mgmt.acpi"><div class="titlepage"><div><div><h2 class="title" id="sec.power-mgmt.acpi"><span class="number">27.2 </span><span class="name">Advanced Configuration and Power Interface (ACPI)</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.acpi">#</a></h2></div></div></div><p>
   ACPI was designed to enable the operating system to set up and control the
   individual hardware components. ACPI supersedes both Power Management Plug
   and Play (PnP) and Advanced Power Management (APM). It delivers information
   about the battery, AC adapter, temperature, fan and system events, like
   <span class="quote">“<span class="quote">close lid</span>”</span> or <span class="quote">“<span class="quote">battery low.</span>”</span>
  </p><p>
   The BIOS provides tables containing information about the individual
   components and hardware access methods. The operating system uses this
   information for tasks like assigning interrupts or activating and
   deactivating components. Because the operating system executes commands
   stored in the BIOS, the functionality depends on the BIOS implementation.
   The tables ACPI can detect and load are reported in journald. See
   <a class="xref" href="#cha.journalctl" title="Chapter 16. journalctl: Query the systemd Journal">Chapter 16, <em><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</em></a> for more information on viewing the journal
   log messages. See <a class="xref" href="#sec.power-mgmt.acpi.trouble" title="27.2.2. Troubleshooting">Section 27.2.2, “Troubleshooting”</a> for more information
   about troubleshooting ACPI problems.
  </p><div class="sect2 " id="sec.power-mgmt.acpi.powernow"><div class="titlepage"><div><div><h3 class="title" id="sec.power-mgmt.acpi.powernow"><span class="number">27.2.1 </span><span class="name">Controlling the CPU Performance</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.acpi.powernow">#</a></h3></div></div></div><p>
    The CPU can save energy in three ways:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Frequency and Voltage Scaling
     </p></li><li class="listitem "><p>
      Throttling the Clock Frequency (T-states)
     </p></li><li class="listitem "><p>
      Putting the Processor to Sleep (C-states)
     </p></li></ul></div><p>
    Depending on the operating mode of the computer, these methods can be
    combined. Saving energy also means that the system heats up less and the
    fans are activated less frequently.
   </p><p>
    Frequency scaling and throttling are only relevant if the processor is
    busy, because the most economic C-state is applied anyway when the
    processor is idle. If the CPU is busy, frequency scaling is the recommended
    power saving method. Often the processor only works with a partial load. In
    this case, it can be run with a lower frequency. Usually, dynamic frequency
    scaling controlled by the kernel on-demand governor is the best approach.
   </p><p>
    Throttling should be used as the last resort, for example, to extend the
    battery operation time despite a high system load. However, some systems do
    not run smoothly when they are throttled too much. Moreover, CPU throttling
    does not make sense if the CPU has little to do.
   </p><p>
    For in-depth information, refer to <span class="intraxref">Book “<em class="citetitle ">System Analysis and Tuning Guide</em>”, Chapter 11 “Power Management”</span>.
   </p></div><div class="sect2 " id="sec.power-mgmt.acpi.trouble"><div class="titlepage"><div><div><h3 class="title" id="sec.power-mgmt.acpi.trouble"><span class="number">27.2.2 </span><span class="name">Troubleshooting</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.acpi.trouble">#</a></h3></div></div></div><p>
    There are two different types of problems. On one hand, the ACPI code of
    the kernel may contain bugs that were not detected in time. In this case, a
    solution will be made available for download. More often, the problems are
    caused by the BIOS. Sometimes, deviations from the ACPI specification are
    purposely integrated in the BIOS to circumvent errors in the ACPI
    implementation of other widespread operating systems. Hardware components
    that have serious errors in the ACPI implementation are recorded in a
    blacklist that prevents the Linux kernel from using ACPI for these
    components.
   </p><p>
    The first thing to do when problems are encountered is to update the BIOS.
    If the computer does not boot, one of the following boot parameters may be
    helpful:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746926816"><span class="term ">pci=noacpi</span></dt><dd><p>
       Do not use ACPI for configuring the PCI devices.
      </p></dd><dt id="idm139698746924976"><span class="term ">acpi=ht</span></dt><dd><p>
       Only perform a simple resource configuration. Do not use ACPI for other
       purposes.
      </p></dd><dt id="idm139698746923104"><span class="term ">acpi=off</span></dt><dd><p>
       Disable ACPI.
      </p></dd></dl></div><div id="idm139698746921184" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Problems Booting without ACPI</h6><p>
     Some newer machines (especially SMP systems and AMD64 systems) need ACPI
     for configuring the hardware correctly. On these machines, disabling ACPI
     can cause problems.
    </p></div><p>
    Sometimes, the machine is confused by hardware that is attached over USB or
    FireWire. If a machine refuses to boot, unplug all unneeded hardware and
    try again.
   </p><p>
    Monitor the boot messages of the system with the command <code class="command">dmesg
    -T</code> <code class="option">| grep -2i acpi</code> (or all messages, because the
    problem may not be caused by ACPI) after booting. If an error occurs while
    parsing an ACPI table, the most important table—the DSDT
    (<span class="emphasis"><em>Differentiated System Description Table</em></span>)—can be
    replaced with an improved version. In this case, the faulty DSDT of the
    BIOS is ignored. The procedure is described in
    <a class="xref" href="#sec.power-mgmt.faq" title="27.4. Troubleshooting">Section 27.4, “Troubleshooting”</a>.
   </p><p>
    In the kernel configuration, there is a switch for activating ACPI debug
    messages. If a kernel with ACPI debugging is compiled and installed,
    detailed information is issued.
   </p><p>
    If you experience BIOS or hardware problems, it is always advisable to
    contact the manufacturers. Especially if they do not always provide
    assistance for Linux, they should be confronted with the problems.
    Manufacturers will only take the issue seriously if they realize that an
    adequate number of their customers use Linux.
   </p><div class="sect3 " id="sec.power-mgmt.acpi.trouble.info"><div class="titlepage"><div><div><h4 class="title" id="sec.power-mgmt.acpi.trouble.info"><span class="number">27.2.2.1 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.acpi.trouble.info">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       <a class="link" href="http://tldp.org/HOWTO/ACPI-HOWTO/" target="_blank">http://tldp.org/HOWTO/ACPI-HOWTO/</a> (detailed ACPI
       HOWTO, contains DSDT patches)
      </p></li><li class="listitem "><p>
       <a class="link" href="http://www.acpi.info" target="_blank">http://www.acpi.info</a> (Advanced Configuration &amp;
       Power Interface Specification)
      </p></li><li class="listitem "><p>
       <a class="link" href="http://acpi.sourceforge.net/dsdt/index.php" target="_blank">http://acpi.sourceforge.net/dsdt/index.php</a> (DSDT
       patches by Bruno Ducrot)
      </p></li></ul></div></div></div></div><div class="sect1 " id="sec.power-mgmt.silenthd"><div class="titlepage"><div><div><h2 class="title" id="sec.power-mgmt.silenthd"><span class="number">27.3 </span><span class="name">Rest for the Hard Disk</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.silenthd">#</a></h2></div></div></div><p>
   In Linux, the hard disk can be put to sleep entirely if it is not needed or
   it can be run in a more economic or quieter mode. On modern laptops, you do
   not need to switch off the hard disks manually, because they automatically
   enter an economic operating mode whenever they are not needed. However, if
   you want to maximize power savings, test some of the following methods,
   using the <code class="command">hdparm</code> command.
  </p><p>
   It can be used to modify various hard disk settings. The option
   <code class="option">-y</code> instantly switches the hard disk to the standby mode.
   <code class="option">-Y</code> puts it to sleep. <code class="command">hdparm</code>
   <code class="option">-S</code> <em class="replaceable ">X</em> causes the hard disk to be
   spun down after a certain period of inactivity. Replace
   <em class="replaceable ">X</em> as follows: <code class="literal">0</code> disables this
   mechanism, causing the hard disk to run continuously. Values from
   <code class="literal">1</code> to <code class="literal">240</code> are multiplied by 5
   seconds. Values from <code class="literal">241</code> to <code class="literal">251</code>
   correspond to 1 to 11 times 30 minutes.
  </p><p>
   Internal power saving options of the hard disk can be controlled with the
   option <code class="literal">-B</code>. Select a value from <code class="literal">0</code> to
   <code class="literal">255</code> for maximum saving to maximum throughput. The result
   depends on the hard disk used and is difficult to assess. To make a hard
   disk quieter, use the option <code class="literal">-M</code>. Select a value from
   <code class="literal">128</code> to <code class="literal">254</code> for quiet to fast.
  </p><p>
   Often, it is not so easy to put the hard disk to sleep. In Linux, numerous
   processes write to the hard disk, waking it up repeatedly. Therefore, it is
   important to understand how Linux handles data that needs to be written to
   the hard disk. First, all data is buffered in the RAM. This buffer is
   monitored by the <code class="systemitem">pdflush</code> daemon.
   When the data reaches a certain age limit or when the buffer is filled to a
   certain degree, the buffer content is flushed to the hard disk. The buffer
   size is dynamic and depends on the size of the memory and the system load.
   By default, pdflush is set to short intervals to achieve maximum data
   integrity. It checks the buffer every 5 seconds and writes the data to the
   hard disk. The following variables are interesting:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746894000"><span class="term "><code class="filename">/proc/sys/vm/dirty_writeback_centisecs</code>
    </span></dt><dd><p>
      Contains the delay until a pdflush thread wakes up (in hundredths of a
      second).
     </p></dd><dt id="idm139698746891824"><span class="term "><code class="filename">/proc/sys/vm/dirty_expire_centisecs</code>
    </span></dt><dd><p>
      Defines after which timeframe a dirty page should be written out latest.
      Default is <code class="literal">3000</code>, which means 30 seconds.
     </p></dd><dt id="idm139698746889184"><span class="term "><code class="filename">/proc/sys/vm/dirty_background_ratio</code>
    </span></dt><dd><p>
      Maximum percentage of dirty pages until pdflush begins to write them.
      Default is <code class="literal">5</code>%.
     </p></dd><dt id="idm139698746886560"><span class="term "><code class="filename">/proc/sys/vm/dirty_ratio</code>
    </span></dt><dd><p>
      When the dirty page exceeds this percentage of the total memory,
      processes are forced to write dirty buffers during their time slice
      instead of continuing to write.
     </p></dd></dl></div><div id="idm139698746884128" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Impairment of the Data Integrity</h6><p>
    Changes to the <code class="systemitem">pdflush</code> daemon
    settings endanger the data integrity.
   </p></div><p>
   Apart from these processes, journaling file systems, like
   <code class="systemitem">Btrfs</code>,
   <code class="systemitem">Ext3</code>,
   <code class="systemitem">Ext4</code> and others write their
   metadata independently from <code class="systemitem">pdflush</code>,
   which also prevents the hard disk from spinning down.
   <span class="phrase">To avoid this, a special kernel extension has been
   developed for mobile devices. To use the extension, install the
   <code class="systemitem">laptop-mode-tools</code> package and
   see
   <code class="filename">/usr/src/linux/Documentation/laptops/laptop-mode.txt</code>
   for details.</span>
  </p><p>
   Another important factor is the way active programs behave. For example,
   good editors regularly write hidden backups of the currently modified file
   to the hard disk, causing the disk to wake up. Features like this can be
   disabled at the expense of data integrity.
  </p><p>
   In this connection, the mail daemon postfix uses the variable
   <code class="systemitem">POSTFIX_LAPTOP</code>. If this variable is set to
   <code class="literal">yes</code>, postfix accesses the hard disk far less frequently.
  </p><p>

   In <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> these technologies are controlled by
   <code class="systemitem">laptop-mode-tools</code>.
  </p></div><div class="sect1 " id="sec.power-mgmt.faq"><div class="titlepage"><div><div><h2 class="title" id="sec.power-mgmt.faq"><span class="number">27.4 </span><span class="name">Troubleshooting</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.faq">#</a></h2></div></div></div><p>
   All error messages and alerts are logged in the system journal that can be
   queried with the command <code class="command">journalctl</code> (see
   <a class="xref" href="#cha.journalctl" title="Chapter 16. journalctl: Query the systemd Journal">Chapter 16, <em><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</em></a> for more information). The following
   sections cover the most common problems.
  </p><div class="sect2 " id="sec.power-mgmt.faq.cpufreq"><div class="titlepage"><div><div><h3 class="title" id="sec.power-mgmt.faq.cpufreq"><span class="number">27.4.1 </span><span class="name">CPU Frequency Does Not Work</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.faq.cpufreq">#</a></h3></div></div></div><p>
    Refer to the kernel sources to see if your processor is supported. You may
    need a special kernel module or module option to activate CPU frequency
    control. If the <code class="systemitem">kernel-source</code>
    package is installed, this information is available in
    <code class="filename">/usr/src/linux/Documentation/cpu-freq/*</code>.
   </p></div></div><div class="sect1 " id="sec.power-mgmt.info"><div class="titlepage"><div><div><h2 class="title" id="sec.power-mgmt.info"><span class="number">27.5 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.power-mgmt.info">#</a></h2></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <a class="link" href="http://en.opensuse.org/SDB:Suspend_to_RAM" target="_blank">http://en.opensuse.org/SDB:Suspend_to_RAM</a>—How
     to get Suspend to RAM working
    </p></li><li class="listitem "><p>
     <a class="link" href="http://old-en.opensuse.org/Pm-utils" target="_blank">http://old-en.opensuse.org/Pm-utils</a>—How to
     modify the general suspend framework
    </p></li></ul></div></div></div></div><div class="part" id="part.services"><div class="titlepage"><div><div><h1 class="title"><span class="number">Part IV </span><span class="name">Services </span><a title="Permalink" class="permalink" href="#part.services">#</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.ntp"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span></a></span></dt><dd class="toc-abstract"><p>
    The NTP (network time protocol) mechanism is a protocol for synchronizing
    the system time over the network. First, a machine can obtain the time from
    a server that is a reliable time source. Second, a machine can itself act
    as a time source for other computers in the network. The goal is
    twofold—maintaining the absolute time and synchronizing the system
    time of all machines within a network.
   </p></dd><dt><span class="chapter"><a href="#cha.nfs"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span></a></span></dt><dd class="toc-abstract"><p>
    The <span class="emphasis"><em>Network File System</em></span> (<span class="emphasis"><em>NFS</em></span>)
    is a protocol that allows access to files on a server very similar to
    accessing local files.
   </p></dd><dt><span class="chapter"><a href="#cha.samba"><span class="number">30 </span><span class="name">Samba</span></a></span></dt><dd class="toc-abstract"><p>
    Using Samba, a Unix machine can be configured as a file and print server
    for macOS, Windows, and OS/2 machines. Samba has developed into a
    fully-fledged and rather complex product. Configure Samba with YaST, or
    by editing the configuration file manually.
   </p></dd><dt><span class="chapter"><a href="#cha.autofs"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span></a></span></dt><dd class="toc-abstract"><p>
    <code class="systemitem">autofs</code> is a program that automatically mounts
    specified directories on an on-demand basis. It is based on a kernel module
    for high efficiency, and can manage both local directories and network
    shares. These automatic mount points are mounted only when they are
    accessed, and unmounted after a certain period of inactivity. This
    on-demand behavior saves bandwidth and results in better performance than
    static mounts managed by <code class="filename">/etc/fstab</code>. While
    <code class="systemitem">autofs</code> is a control script,
    <code class="command">automount</code> is the command (daemon) that does the actual
    auto-mounting.
   </p></dd></dl></div><div class="chapter " id="cha.ntp"><div class="titlepage"><div><div><h2 class="title"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span> <a title="Permalink" class="permalink" href="#cha.ntp">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>chrony.xml</li><li><span class="ds-label">ID: </span>cha.ntp</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698746856320">#</a></h6></div><p>
    The NTP (network time protocol) mechanism is a protocol for synchronizing
    the system time over the network. First, a machine can obtain the time from
    a server that is a reliable time source. Second, a machine can itself act
    as a time source for other computers in the network. The goal is
    twofold—maintaining the absolute time and synchronizing the system
    time of all machines within a network.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.ntp.yast"><span class="number">28.1 </span><span class="name">Configuring an NTP Client with YaST</span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.netconf"><span class="number">28.2 </span><span class="name">Manually Configuring NTP in the Network</span></a></span></dt><dt><span class="sect1"><a href="#ntp.chronyc"><span class="number">28.3 </span><span class="name">Configure <code class="systemitem">chronyd</code> at Runtime using <code class="command">chronyc</code></span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.dynamic"><span class="number">28.4 </span><span class="name">Dynamic Time Synchronization at Runtime</span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.normal"><span class="number">28.5 </span><span class="name">Setting Up a Local Reference Clock</span></a></span></dt><dt><span class="sect1"><a href="#sec.netz.xntp.etr"><span class="number">28.6 </span><span class="name">Clock Synchronization to an External Time Reference (ETR)</span></a></span></dt></dl></div></div><p>
  Maintaining an exact system time is important in many situations. The
  built-in hardware clock does often not meet the requirements of applications
  such as databases or clusters. Manual correction of the system time would
  lead to severe problems because, for example, a backward leap can cause
  malfunction of critical applications. Within a network, it is usually
  necessary to synchronize the system time of all machines, but manual time
  adjustment is a bad approach. NTP provides a mechanism to solve these
  problems. The NTP service continuously adjusts the system time with reliable
  time servers in the network. It further enables the management of local
  reference clocks, such as radio-controlled clocks.
 </p><p>
  Since <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> 15, <code class="systemitem">chrony</code> is the default implementation of NTP.
  <code class="systemitem">chrony</code> includes two parts; <code class="systemitem">chronyd</code> is a daemon that can be started at
  boot time and <code class="command">chronyc</code> is a command line interface program to monitor the
  performance of <code class="systemitem">chronyd</code>, and to change various operating parameters at
  runtime.
 </p><div id="idm139698746847280" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>
   To enable time synchronization by means of active directory, follow the
   instructions found at <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 7 “Active Directory Support”, Section 7.3.3 “
    Joining Active Directory Using
    <span class="guimenu">Windows Domain Membership</span>
   ”, 
    Joining an Active Directory Domain Using <span class="guimenu">Windows Domain Membership</span>
   </span>.
  </p></div><div class="sect1 " id="sec.ntp.yast"><div class="titlepage"><div><div><h2 class="title" id="sec.ntp.yast"><span class="number">28.1 </span><span class="name">Configuring an NTP Client with YaST</span> <a title="Permalink" class="permalink" href="#sec.ntp.yast">#</a></h2></div></div></div><p>
   The NTP daemon (<code class="systemitem">chronyd</code>) coming with the <code class="systemitem">chrony</code>
   package is preset to use the local computer hardware clock as a time
   reference.  The precision of a hardware clock heavily depends on its time
   source. For example, an atomic clock or GPS receiver is a very precise time
   source, while a common RTC chip is not a reliable time source.  YaST
   simplifies the configuration of an NTP client.
  </p><p>
   In the YaST NTP client configuration (<span class="guimenu">Network
   Services</span> › <span class="guimenu">NTP Configuration</span>)
   window, you can specify when to start NTP daemon, the type of the
   configuration source, and add custom time servers.
  </p><div class="figure" id="idm139698746840720"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/ntp_client.png"><img src="images/ntp_client.png" width="" alt="NTP Configuration Window" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 28.1: </span><span class="name">NTP Configuration Window </span><a title="Permalink" class="permalink" href="#idm139698746840720">#</a></h6></div></div><div class="sect2 " id="idm139698746835712"><div class="titlepage"><div><div><h3 class="title" id="idm139698746835712"><span class="number">28.1.1 </span><span class="name">NTP Daemon Start</span> <a title="Permalink" class="permalink" href="#idm139698746835712">#</a></h3></div></div></div><p>
    You can choose from three options when to start the NTP daemon:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746834176"><span class="term "><span class="guimenu">Only Manually</span>
     </span></dt><dd><p>
       Select <span class="guimenu">Only Manually</span>, if you want to manually start
       the <code class="systemitem">chrony</code> daemon.
      </p></dd><dt id="idm139698746830896"><span class="term "><span class="guimenu">Synchronize without Daemon</span>
     </span></dt><dd><p>
       Select <span class="guimenu">Synchronize without Daemon</span> to set the system
       time periodically without a permanently running <code class="systemitem">chrony</code>. You can set
       the <span class="guimenu">Interval of the Synchronization in Minutes</span>.
      </p></dd><dt id="idm139698746827056"><span class="term "><span class="guimenu">Now and On Boot</span>
     </span></dt><dd><p>
       Select <span class="guimenu">Now and On Boot</span> to start <code class="systemitem">chronyd</code>
       automatically when the system is booted. This setting is recommended.
      </p></dd></dl></div></div><div class="sect2 " id="idm139698746823424"><div class="titlepage"><div><div><h3 class="title" id="idm139698746823424"><span class="number">28.1.2 </span><span class="name">Type of the Configuration Source</span> <a title="Permalink" class="permalink" href="#idm139698746823424">#</a></h3></div></div></div><p>
    In the <span class="guimenu">Configuration Source</span> drop-down list, select
    either <span class="guimenu">Dynamic</span> or <span class="guimenu">Static</span>. Set
    <span class="guimenu">Static</span> if your server uses only a fixed set of (public)
    NTP servers, while <span class="guimenu">Dynamic</span> is better if your internal
    network offers NTP servers via DHCP.
   </p></div><div class="sect2 " id="sec.net.ntp.yast.new_sync"><div class="titlepage"><div><div><h3 class="title" id="sec.net.ntp.yast.new_sync"><span class="number">28.1.3 </span><span class="name">Configure Time Servers</span> <a title="Permalink" class="permalink" href="#sec.net.ntp.yast.new_sync">#</a></h3></div></div></div><p>
    Time servers for the client to query are listed in the lower part of the
    <span class="guimenu">NTP Configuration</span> window. Modify this list as needed
    with <span class="guimenu">Add</span>, <span class="guimenu">Edit</span>, and
    <span class="guimenu">Delete</span>.
   </p><p>
    Click <span class="guimenu">Add</span> to add a new time server:
   </p><div class="figure" id="idm139698746815232"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/ntp_client_serveradd.png"><img src="images/ntp_client_serveradd.png" width="" alt="Adding a Time Server" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 28.2: </span><span class="name">Adding a Time Server </span><a title="Permalink" class="permalink" href="#idm139698746815232">#</a></h6></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      In the <span class="guimenu">Address</span> field, type the URL of the time server
      or pool of time servers with which you want to synchronize the machine
      time. After the URL is complete, click <span class="guimenu">Test</span> to verify
      that it points to a valid time source.
     </p></li><li class="step "><p>
      Activate <span class="guimenu">Quick Initial Sync</span> to speed up the time
      synchronization by sending more requests at the <code class="systemitem">chronyd</code> daemon start.
     </p></li><li class="step "><p>
      Activate <span class="guimenu">Start Offline</span> to speed up the boot time on
      systems that start the <code class="systemitem">chronyd</code> daemon automatically and may not have an
      internet connection at boot time. This option is useful for example for
      laptops whose network connection is managed by NetworkManager.
     </p></li><li class="step "><p>
      Confirm with <span class="guimenu">OK</span>
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.netz.xntp.netconf"><div class="titlepage"><div><div><h2 class="title" id="sec.netz.xntp.netconf"><span class="number">28.2 </span><span class="name">Manually Configuring NTP in the Network</span> <a title="Permalink" class="permalink" href="#sec.netz.xntp.netconf">#</a></h2></div></div></div><p>
   <code class="systemitem">chrony</code> reads its configuration from the
   <code class="filename">/etc/chrony.conf</code> file. To keep the computer clock
   synchronized, you need to tell <code class="systemitem">chrony</code> what time servers to use. You can
   use specific server names or IP addresses, for example:
  </p><div class="verbatim-wrap"><pre class="screen">server 0.europe.pool.ntp.org
server 1.europe.pool.ntp.org
server 2.europe.pool.ntp.org</pre></div><p>
   You can also specify a <span class="emphasis"><em>pool</em></span> name. Pool name resolves to
   several IP addresses:
  </p><div class="verbatim-wrap"><pre class="screen">pool pool.ntp.org</pre></div><div id="idm139698746796112" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Computers on the Same Network</h6><p>
    To synchronize time on multiple computers on the same network, we do not
    recommend to synchronize all of them with an external server. A good
    practice is to make one computer the time server which is synchronized with
    an external time server, and the other computers act as its clients. Add a
    <code class="literal">local</code> directive to the server's
    <code class="filename">/etc/chrony.conf</code> to distinguish it from an
    authoritative time server:
   </p><div class="verbatim-wrap"><pre class="screen">local stratum 10</pre></div></div><p>
   To start <code class="systemitem">chrony</code>, run:
  </p><div class="verbatim-wrap"><pre class="screen">systemctl start chronyd.service</pre></div><p>
   After initializing <code class="systemitem">chronyd</code>, it takes some time before the time is
   stabilized and the drift file for correcting the local computer clock is
   created. With the drift file, the systematic error of the hardware clock can
   be computed when the computer is powered on. The correction is used
   immediately, resulting in a higher stability of the system time.
  </p><p>
   To enable the service so that <code class="systemitem">chrony</code> starts automatically at boot time,
   run:
  </p><div class="verbatim-wrap"><pre class="screen">systemctl enable chronyd.service</pre></div></div><div class="sect1 " id="ntp.chronyc"><div class="titlepage"><div><div><h2 class="title" id="ntp.chronyc"><span class="number">28.3 </span><span class="name">Configure <code class="systemitem">chronyd</code> at Runtime using <code class="command">chronyc</code></span> <a title="Permalink" class="permalink" href="#ntp.chronyc">#</a></h2></div></div></div><p>
   You can use <code class="command">chronyc</code> to change the behavior of <code class="systemitem">chronyd</code> at runtime. It
   also generates status reports about the operation of <code class="systemitem">chronyd</code>.
  </p><p>
   You can run <code class="command">chronyc</code> either in interactive a or non-interactive mode. To
   run <code class="command">chronyc</code> interactively, enter <code class="command">chronyc</code> on the command line. It
   displays a prompt and waits for your command input. For example, to check
   how many NTP sources are online or offline, run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chronyc</code>
chronyc&gt; activity
200 OK
4 sources online
2 sources offline
1 sources doing burst (return to online)
1 sources doing burst (return to offline)
0 sources with unknown address</pre></div><p>
   To exit <code class="command">chronyc</code>'s prompt, enter <code class="command">quit</code> or
   <code class="command">exit</code>.
  </p><p>
   If you do not need to use the interactive prompt, enter the command
   directly:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">chronyc</code> activity</pre></div><div id="idm139698746776448" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Temporary Changes</h6><p>
    Changes made using <code class="command">chronyc</code> are not permanent. They will be lost after the
    next <code class="systemitem">chronyd</code> restart. For permanent changes, modify
    <code class="filename">/etc/chrony.conf</code>.
   </p></div><p>
   For a complete list of <code class="command">chronyc</code> commands, see its manual page (<code class="command">man
   1 chronyc</code>).
  </p></div><div class="sect1 " id="sec.netz.xntp.dynamic"><div class="titlepage"><div><div><h2 class="title" id="sec.netz.xntp.dynamic"><span class="number">28.4 </span><span class="name">Dynamic Time Synchronization at Runtime</span> <a title="Permalink" class="permalink" href="#sec.netz.xntp.dynamic">#</a></h2></div></div></div><p>
   If the system boots without network connection, <code class="systemitem">chronyd</code> starts up, but it
   cannot resolve DNS names of the time servers set in the configuration file.
   This can happen if you use NetworkManager with an encrypted Wi-Fi.
  </p><p>
   <code class="systemitem">chronyd</code> keeps trying to resolve the time server names specified by the
   <code class="option">server</code>, <code class="option">pool</code>, and <code class="option">peer</code>
   directives in an increasing time interval until it succeeds.
  </p><p>
   If the time server will not be reachable when <code class="systemitem">chronyd</code> is started, you can
   specify the <code class="option">offline</code> option:
  </p><div class="verbatim-wrap"><pre class="screen">server <em class="replaceable ">server_address</em> offline</pre></div><p>
   <code class="systemitem">chronyd</code> will then not try to poll the server until it is enabled using the
   following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>chronyc online <em class="replaceable ">server_address</em></pre></div><p>
   When the <code class="option">auto_offline</code> option is set, <code class="systemitem">chronyd</code> assumes that
   the time server has gone offline when 2 requests have been sent to it
   without receiving a response. This option avoids the need to run the
   'offline' command from <code class="command">chronyc</code> when disconnecting the network link.
  </p></div><div class="sect1 " id="sec.netz.xntp.normal"><div class="titlepage"><div><div><h2 class="title" id="sec.netz.xntp.normal"><span class="number">28.5 </span><span class="name">Setting Up a Local Reference Clock</span> <a title="Permalink" class="permalink" href="#sec.netz.xntp.normal">#</a></h2></div></div></div><p>
   The software package <code class="systemitem">chrony</code> relies on other programs (such as
   <code class="systemitem">gpsd</code>) to access the timing data via the SHM or SOCK
   driver. Use the <code class="option">refclock</code> directive in
   <code class="filename">/etc/chrony.conf</code> to specify a hardware reference clock
   to be used as a time source. It has two mandatory parameters; a driver name
   and a driver-specific parameter. The two parameters are followed by zero or
   more <code class="option">refclock</code> options. <code class="systemitem">chronyd</code> includes the following
   drivers:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     PPS - driver for the kernel 'pulse per second' API. For example:
    </p><div class="verbatim-wrap"><pre class="screen">refclock PPS /dev/pps0 lock NMEA refid GPS</pre></div></li><li class="listitem "><p>
     SHM - NTP shared memory driver. For example:
    </p><div class="verbatim-wrap"><pre class="screen">refclock SHM 0 poll 3 refid GPS1
refclock SHM 1:perm=0644 refid GPS2</pre></div></li><li class="listitem "><p>
     SOCK - Unix domain socket driver. For example:
    </p><div class="verbatim-wrap"><pre class="screen">refclock SOCK /var/run/chrony.ttyS0.sock</pre></div></li><li class="listitem "><p>
     PHC - PTP hardware clock driver. For example:
    </p><div class="verbatim-wrap"><pre class="screen">refclock PHC /dev/ptp0 poll 0 dpoll -2 offset -37
refclock PHC /dev/ptp1:nocrossts poll 3 pps</pre></div></li></ul></div><p>
   For more information on individual drivers' options, see <code class="command">man 8
   chrony.conf</code>.
  </p></div><div class="sect1 " id="sec.netz.xntp.etr"><div class="titlepage"><div><div><h2 class="title" id="sec.netz.xntp.etr"><span class="number">28.6 </span><span class="name">Clock Synchronization to an External Time Reference (ETR)</span> <a title="Permalink" class="permalink" href="#sec.netz.xntp.etr">#</a></h2></div></div></div><p>
   Support for clock synchronization to an external time reference (ETR) is
   available. The external time reference sends an oscillator signal and a
   synchronization signal every 2**20 (2 to the power of 20) microseconds to
   keep TOD clocks of all connected servers synchronized.
  </p><p>
   For availability two ETR units can be connected to a machine. If the clock
   deviates for more than the sync-check tolerance all CPUs get a machine check
   that indicates that the clock is out of sync. If this happens, all DASD I/O
   to XRC enabled devices is stopped until the clock is synchronized again.
  </p><p>
   The ETR support is activated via two <code class="literal">sysfs</code> attributes;
   run the following commands as <code class="systemitem">root</code>:
  </p><div class="verbatim-wrap"><pre class="screen">echo 1 &gt; /sys/devices/system/etr/etr0/online
echo 1 &gt; /sys/devices/system/etr/etr1/online</pre></div></div></div><div class="chapter " id="cha.nfs"><div class="titlepage"><div><div><h2 class="title"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span> <a title="Permalink" class="permalink" href="#cha.nfs">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_nfs.xml</li><li><span class="ds-label">ID: </span>cha.nfs</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698746738544">#</a></h6></div><p>
    The <span class="emphasis"><em>Network File System</em></span> (<span class="emphasis"><em>NFS</em></span>)
    is a protocol that allows access to files on a server very similar to
    accessing local files.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.nfs.overview"><span class="number">29.1 </span><span class="name">Overview</span></a></span></dt><dt><span class="sect1"><a href="#sec.nfs.installation-sled"><span class="number">29.2 </span><span class="name">Installing NFS Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.nfs.configuring-nfs-clients"><span class="number">29.3 </span><span class="name">Configuring Clients</span></a></span></dt><dt><span class="sect1"><a href="#sec.nfs.info"><span class="number">29.4 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.nfs.overview"><div class="titlepage"><div><div><h2 class="title" id="sec.nfs.overview"><span class="number">29.1 </span><span class="name">Overview</span> <a title="Permalink" class="permalink" href="#sec.nfs.overview">#</a></h2></div></div></div><p>
   The <span class="emphasis"><em>Network File System</em></span> (NFS) is a standardized,
   well-proven and widely supported network protocol that allows files to
   be shared between separate hosts.
  </p><p>
   The <span class="emphasis"><em>Network Information Service</em></span> (NIS) can be used
   to have a centralized user management in the network. Combining NFS
   and NIS allows using file and directory permissions for access control
   in the network. NFS with NIS makes a network transparent to the user.
  </p><p>
   In the default configuration, NFS completely trusts the network and
   thus any machine which is connected to a trusted network. Any user
   with administrator privileges on any computer with physical access to
   any network which the NFS server trusts at all, can access any files
   that the server makes available.
  </p><p>
   In many cases, this level of security is perfectly satisfactory, such
   as when the network that is trusted is truly private, often localized
   to a single cabinet or machine room, and no unauthorized access is
   possible. In other cases the need to trust a whole subnet as a unit
   is restrictive and there is a need for more fine-grained trust. To
   meet the need in these cases, NFS supports various security levels
   using the <span class="emphasis"><em>Kerberos</em></span> infrastructure. Kerberos requires
   NFSv4, which is used by default. For details, see
   <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 6 “Network Authentication with Kerberos”</span>.
  </p><p>
   The following are terms used in the YaST module.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746728352"><span class="term ">Exports</span></dt><dd><p>
      A directory <span class="emphasis"><em>exported</em></span> by an NFS server, which clients
      can integrate it into their system.
     </p></dd><dt id="idm139698746726048"><span class="term ">NFS Client</span></dt><dd><p>
      The NFS client is a system that uses NFS services from an NFS server over
      the Network File System protocol. The TCP/IP protocol is already
      integrated into the Linux kernel; there is no need to install any
      additional software.
     </p></dd><dt id="idm139698746724016"><span class="term ">NFS Server</span></dt><dd><p>
      The NFS server provides NFS services to clients. A running server depends
      on the following daemons: <code class="systemitem">nfsd</code>
      (worker), <code class="systemitem">idmapd</code> (ID-to-name
      mapping for NFSv4, needed for certain scenarios only), <code class="systemitem">statd</code> (file locking), and <code class="systemitem">mountd</code> (mount requests).
     </p></dd><dt id="idm139698746719168"><span class="term ">NFSv3</span></dt><dd><p>
      NFSv3 is the version 3 implementation, the <span class="quote">“<span class="quote">old</span>”</span> stateless
      NFS that supports client authentication.
     </p></dd><dt id="idm139698746716848"><span class="term ">NFSv4</span></dt><dd><p>
      NFSv4 is the new version 4 implementation that supports secure user
      authentication via kerberos. NFSv4 requires one single port only and thus
      is better suited for environments behind a firewall than NFSv3.
     </p><p>
      The protocol is specified as
      <a class="link" href="http://tools.ietf.org/html/rfc3530" target="_blank">http://tools.ietf.org/html/rfc3530</a>.
     </p></dd><dt id="idm139698746713792"><span class="term ">pNFS</span></dt><dd><p>
      Parallel NFS, a protocol extension of NFSv4. Any pNFS clients can
      directly access the data on an NFS server.
     </p></dd></dl></div></div><div class="sect1 " id="sec.nfs.installation-sled"><div class="titlepage"><div><div><h2 class="title" id="sec.nfs.installation-sled"><span class="number">29.2 </span><span class="name">Installing NFS Server</span> <a title="Permalink" class="permalink" href="#sec.nfs.installation-sled">#</a></h2></div></div></div><p>
   For installing and configuring an NFS server, see the SUSE Linux Enterprise Server documentation.
  </p></div><div class="sect1 " id="sec.nfs.configuring-nfs-clients"><div class="titlepage"><div><div><h2 class="title" id="sec.nfs.configuring-nfs-clients"><span class="number">29.3 </span><span class="name">Configuring Clients</span> <a title="Permalink" class="permalink" href="#sec.nfs.configuring-nfs-clients">#</a></h2></div></div></div><p>
   To configure your host as an NFS client, you do not need to install
   additional software. All needed packages are installed by default.
  </p><div class="sect2 " id="sec.nfs.import-yast2"><div class="titlepage"><div><div><h3 class="title" id="sec.nfs.import-yast2"><span class="number">29.3.1 </span><span class="name">Importing File Systems with YaST</span> <a title="Permalink" class="permalink" href="#sec.nfs.import-yast2">#</a></h3></div></div></div><p>
    Authorized users can mount NFS directories from an NFS server into the
    local file tree using the YaST NFS client module. Proceed as follows:
   </p><div class="procedure " id="pro.nfs.import-yast2"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 29.1: </span><span class="name">Importing NFS Directories </span><a title="Permalink" class="permalink" href="#pro.nfs.import-yast2">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start the YaST NFS client module.
     </p></li><li class="step "><p>
      Click <span class="guimenu">Add</span> in the <span class="guimenu">NFS Shares</span> tab.
      Enter the host name of the NFS server, the directory to import, and the
      mount point at which to mount this directory locally.
     </p></li><li class="step "><p>
      When using NFSv4, select <span class="guimenu">Enable NFSv4</span> in the
      <span class="guimenu">NFS Settings</span> tab. Additionally, the <span class="guimenu">NFSv4
      Domain Name</span> must contain the same value as used by the NFSv4
      server. The default domain is <code class="literal">localdomain</code>.
     </p></li><li class="step "><p>
      To use Kerberos authentication for NFS, GSS security must be enabled.
      Select <span class="guimenu">Enable GSS Security</span>.
     </p></li><li class="step "><p>
      Enable <span class="guimenu">Open Port in Firewall</span> in the <span class="guimenu">NFS
      Settings</span> tab if you use a Firewall and want to allow access to
      the service from remote computers. The firewall status is displayed next
      to the check box.
     </p></li><li class="step "><p>
      Click <span class="guimenu">OK</span> to save your changes.
     </p></li></ol></div></div><p>
    The configuration is written to <code class="filename">/etc/fstab</code> and the
    specified file systems are mounted. When you start the YaST configuration
    client at a later time, it also reads the existing configuration from this
    file.
   </p><div id="idm139698746693072" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: NFS as a Root File System</h6><p>
     On (diskless) systems, where the root partition is mounted via network as
     an NFS share, you need to be careful when configuring the network device
     with which the NFS share is accessible.
    </p><p>
     When shutting down or rebooting the system, the default processing order
     is to turn off network connections, then unmount the root partition. With
     NFS root, this order causes problems as the root partition cannot be
     cleanly unmounted as the network connection to the NFS share is already
     not activated. To prevent the system from deactivating the relevant
     network device, open the network device configuration tab as described in
     <a class="xref" href="#sec.network.yast.change.start" title="18.4.1.2.5. Activating the Network Device">Section 18.4.1.2.5, “Activating the Network Device”</a> and choose <span class="guimenu">On
     NFSroot</span> in the <span class="guimenu">Device Activation</span> pane.
    </p></div></div><div class="sect2 " id="sec.nfs.import"><div class="titlepage"><div><div><h3 class="title" id="sec.nfs.import"><span class="number">29.3.2 </span><span class="name">Importing File Systems Manually</span> <a title="Permalink" class="permalink" href="#sec.nfs.import">#</a></h3></div></div></div><p>
    The prerequisite for importing file systems manually from an NFS server is
    a running RPC port mapper. The <code class="option">nfs</code> service takes care to
    start it properly; thus, start it by entering <code class="command">systemctl start
    nfs</code> as <code class="systemitem">root</code>. Then
    remote file systems can be mounted in the file system like local partitions
    using <code class="command">mount</code>:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount <em class="replaceable ">HOST</em>:<em class="replaceable ">REMOTE-PATH</em><em class="replaceable ">LOCAL-PATH</em></pre></div><p>
    To import user directories from the <code class="systemitem">nfs.example.com</code>
    machine, for example, use:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount nfs.example.com:/home /home</pre></div><div class="sect3 " id="sec.nfs.automount"><div class="titlepage"><div><div><h4 class="title" id="sec.nfs.automount"><span class="number">29.3.2.1 </span><span class="name">Using the Automount Service</span> <a title="Permalink" class="permalink" href="#sec.nfs.automount">#</a></h4></div></div></div><p>
     The autofs daemon can be used to mount remote file systems automatically.
     Add the following entry to the <code class="filename">/etc/auto.master</code> file:
    </p><div class="verbatim-wrap"><pre class="screen">/nfsmounts /etc/auto.nfs</pre></div><p>
     Now the <code class="filename">/nfsmounts</code> directory acts as the root for all
     the NFS mounts on the client if the <code class="filename">auto.nfs</code> file is
     filled appropriately. The name <code class="filename">auto.nfs</code> is chosen for
     the sake of convenience—you can choose any name. In
     <code class="filename">auto.nfs</code> add entries for all the NFS mounts as
     follows:
    </p><div class="verbatim-wrap"><pre class="screen">localdata -fstype=nfs server1:/data
nfs4mount -fstype=nfs4 server2:/</pre></div><p>
     Activate the settings with <code class="command">systemctl start autofs</code> as
     <code class="systemitem">root</code>. In this example, <code class="filename">/nfsmounts/localdata</code>,
     the <code class="filename">/data</code> directory of
     <code class="systemitem">server1</code>, is mounted with NFS and
     <code class="filename">/nfsmounts/nfs4mount</code> from
     <code class="systemitem">server2</code> is mounted with NFSv4.
    </p><p>
     If the <code class="filename">/etc/auto.master</code> file is edited while the
     service autofs is running, the automounter must be restarted for the
     changes to take effect with <code class="command">systemctl restart autofs</code>.
    </p></div><div class="sect3 " id="sec.nfs.fstab"><div class="titlepage"><div><div><h4 class="title" id="sec.nfs.fstab"><span class="number">29.3.2.2 </span><span class="name">Manually Editing <code class="filename">/etc/fstab</code></span> <a title="Permalink" class="permalink" href="#sec.nfs.fstab">#</a></h4></div></div></div><p>
     A typical NFSv3 mount entry in <code class="filename">/etc/fstab</code> looks like
     this:
    </p><div class="verbatim-wrap"><pre class="screen">nfs.example.com:/data /local/path nfs rw,noauto 0 0</pre></div><p>
     For NFSv4 mounts, use <code class="literal">nfs4</code> instead of
     <code class="literal">nfs</code> in the third column:
    </p><div class="verbatim-wrap"><pre class="screen">nfs.example.com:/data /local/pathv4 nfs4 rw,noauto 0 0</pre></div><p>
     The <code class="literal">noauto</code> option prevents the file system from being
     mounted automatically at start-up. If you want to mount the respective
     file system manually, it is possible to shorten the mount command
     specifying the mount point only:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount /local/path</pre></div><div id="idm139698746663040" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Mounting at Start-Up</h6><p>
      If you do not enter the <code class="literal">noauto</code> option, the init
      scripts of the system will handle the mount of those file systems at
      start-up.
     </p></div></div></div><div class="sect2 " id="sec.nfs.pnfs"><div class="titlepage"><div><div><h3 class="title" id="sec.nfs.pnfs"><span class="number">29.3.3 </span><span class="name">Parallel NFS (pNFS)</span> <a title="Permalink" class="permalink" href="#sec.nfs.pnfs">#</a></h3></div></div></div><p>
    NFS is one of the oldest protocols, developed in the '80s. As such, NFS is
    usually sufficient if you want to share small files. However, when you want
    to transfer big files or large numbers of clients want to access data, an
    NFS server becomes a bottleneck and has a significant impact on the system
    performance. This is because of files quickly getting bigger, whereas the
    relative speed of your Ethernet has not fully kept up.
   </p><p>
    When you request a file from a regular NFS server, the server
    looks up the file metadata, collects all the data and transfers it over the
    network to your client. However, the performance bottleneck becomes
    apparent no matter how small or big the files are:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      With small files most of the time is spent collecting the metadata.
     </p></li><li class="listitem "><p>
      With big files most of the time is spent on transferring the data from
      server to client.
     </p></li></ul></div><p>
    pNFS, or parallel NFS, overcomes this limitation as it separates the file
    system metadata from the location of the data. As such, pNFS requires two
    types of servers:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      A <span class="emphasis"><em>metadata</em></span> or <span class="emphasis"><em>control server</em></span>
      that handles all the non-data traffic
     </p></li><li class="listitem "><p>
      One or more <span class="emphasis"><em>storage server(s)</em></span> that hold(s) the data
     </p></li></ul></div><p>
    The metadata and the storage servers form a single, logical NFS server.
    When a client wants to read or write, the metadata server tells the NFSv4
    client which storage server to use to access the file chunks. The client
    can access the data directly on the server.
   </p><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> supports pNFS on the client side only.
   </p><div class="sect3 " id="sec.nfs.pnfs.yast"><div class="titlepage"><div><div><h4 class="title" id="sec.nfs.pnfs.yast"><span class="number">29.3.3.1 </span><span class="name">Configuring pNFS Client With YaST</span> <a title="Permalink" class="permalink" href="#sec.nfs.pnfs.yast">#</a></h4></div></div></div><p>
     Proceed as described in <a class="xref" href="#pro.nfs.import-yast2" title="Importing NFS Directories">Procedure 29.1, “Importing NFS Directories”</a>, but click
     the <span class="guimenu">pNFS (v4.1)</span> check box and optionally <span class="guimenu">NFSv4
     share</span>. YaST will do all the necessary steps and will write all
     the required options in the file <code class="filename">/etc/exports</code>.
     
    </p></div><div class="sect3 " id="sec.nfs.pnfs.manual"><div class="titlepage"><div><div><h4 class="title" id="sec.nfs.pnfs.manual"><span class="number">29.3.3.2 </span><span class="name">Configuring pNFS Client Manually</span> <a title="Permalink" class="permalink" href="#sec.nfs.pnfs.manual">#</a></h4></div></div></div><p>
     Refer to <a class="xref" href="#sec.nfs.import" title="29.3.2. Importing File Systems Manually">Section 29.3.2, “Importing File Systems Manually”</a> to start. Most of the
     configuration is done by the NFSv4 server. For pNFS, the only difference
     is to add the <code class="option">minorversion</code> option and the metadata server
     <em class="replaceable ">MDS_SERVER</em> to your <code class="command">mount</code>
     command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount -t nfs4 -o minorversion=1 <em class="replaceable ">MDS_SERVER</em> <em class="replaceable ">MOUNTPOINT</em></pre></div><p>
     To help with debugging, change the value in the <code class="filename">/proc</code>
     file system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> echo 32767 &gt; /proc/sys/sunrpc/nfsd_debug
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> echo 32767 &gt; /proc/sys/sunrpc/nfs_debug</pre></div></div></div></div><div class="sect1 " id="sec.nfs.info"><div class="titlepage"><div><div><h2 class="title" id="sec.nfs.info"><span class="number">29.4 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.nfs.info">#</a></h2></div></div></div><p>
   In addition to the man pages of <code class="command">exports</code>,
   <code class="command">nfs</code>, and <code class="command">mount</code>, information about
   configuring an NFS server and client is available in
   <code class="filename">/usr/share/doc/packages/nfsidmap/README</code>. For further
   documentation online refer to the following Web sites:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     Find the detailed technical documentation online at
     <a class="link" href="http://nfs.sourceforge.net/" target="_blank">SourceForge</a>.
    </p></li><li class="listitem "><p>
     For instructions for setting up kerberized NFS, refer to
     <a class="link" href="http://www.citi.umich.edu/projects/nfsv4/linux/krb5-setup.html" target="_blank">NFS
     Version 4 Open Source Reference Implementation</a>.
    </p></li><li class="listitem "><p>
     If you have questions on NFSv4, refer to the
     <a class="link" href="http://www.citi.umich.edu/projects/nfsv4/linux/faq/" target="_blank">Linux
     NFSv4 FAQ</a>.
    </p></li></ul></div></div></div><div class="chapter " id="cha.samba"><div class="titlepage"><div><div><h2 class="title"><span class="number">30 </span><span class="name">Samba</span> <a title="Permalink" class="permalink" href="#cha.samba">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>net_samba.xml</li><li><span class="ds-label">ID: </span>cha.samba</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698746622352">#</a></h6></div><p>
    Using Samba, a Unix machine can be configured as a file and print server
    for macOS, Windows, and OS/2 machines. Samba has developed into a
    fully-fledged and rather complex product. Configure Samba with YaST, or
    by editing the configuration file manually.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.samba.term"><span class="number">30.1 </span><span class="name">Terminology</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.install"><span class="number">30.2 </span><span class="name">Installing a Samba Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.serv.inst"><span class="number">30.3 </span><span class="name">Configuring a Samba Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.client.inst"><span class="number">30.4 </span><span class="name">Configuring Clients</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.anmeld.serv"><span class="number">30.5 </span><span class="name">Samba as Login Server</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.advanced"><span class="number">30.6 </span><span class="name">Advanced Topics</span></a></span></dt><dt><span class="sect1"><a href="#sec.samba.info"><span class="number">30.7 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.samba.term"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.term"><span class="number">30.1 </span><span class="name">Terminology</span> <a title="Permalink" class="permalink" href="#sec.samba.term">#</a></h2></div></div></div><p>
   The following are some terms used in Samba documentation and in the YaST
   module.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746617728"><span class="term ">SMB protocol</span></dt><dd><p>
      Samba uses the SMB (server message block) protocol that is
      based on the <span class="productname">NetBIOS</span> services.
      Microsoft released the protocol so other software manufacturers could
      establish connections to a Microsoft domain network. With Samba, the SMB
      protocol works on top of the TCP/IP protocol, so the TCP/IP protocol must
      be installed on all clients.
     </p></dd><dt id="idm139698746614880"><span class="term ">CIFS protocol</span></dt><dd><p>
      CIFS (common Internet file system) protocol is another
      protocol supported by Samba. CIFS defines a standard remote file system
      access protocol for use over the network, enabling groups of users to
      work together and share documents across the network.
     </p></dd><dt id="idm139698746612816"><span class="term ">NetBIOS</span></dt><dd><p>
      NetBIOS is a software interface (API) designed for
      communication between machines providing a name service. It enables
      machines connected to the network to reserve names for themselves. After
      reservation, these machines can be addressed by name. There is no central
      process that checks names. Any machine on the network can reserve as many
      names as it wants as long as the names are not already in use. The
      NetBIOS interface can be implemented for different network architectures.
      An implementation that works relatively closely with network hardware is
      called <span class="productname">NetBEUI</span>, but this is often
      called <span class="productname">NetBIOS</span>. Network protocols
      implemented with NetBIOS are IPX from Novell (NetBIOS via TCP/IP) and
      TCP/IP.
     </p><p>
      The NetBIOS names sent via TCP/IP have nothing in common with the names
      used in <code class="filename">/etc/hosts</code> or those defined by DNS. NetBIOS
      uses its own, completely independent naming convention. However, it is
      recommended to use names that correspond to DNS host names to make
      administration easier or use DNS natively. This is the default used by
      Samba.
     </p></dd><dt id="idm139698746607632"><span class="term ">Samba server</span></dt><dd><p>
      Samba server provides SMB/CIFS services and NetBIOS over IP naming
      services to clients. For Linux, there are three daemons for Samba server:
      smbd for SMB/CIFS services, nmbd for naming services, and winbind for
      authentication.
     </p></dd><dt id="idm139698746605600"><span class="term ">Samba client</span></dt><dd><p>
      The Samba client is a system that uses Samba services from a Samba server
      over the SMB protocol. Common operating systems, such as Windows and
      macOS support the SMB protocol. The TCP/IP protocol must be
      installed on all computers. Samba provides a client for the different
      Unix flavors. For Linux, there is a kernel module for SMB that allows the
      integration of SMB resources on the Linux system level. You do not need
      to run any daemon for the Samba client.
     </p></dd><dt id="idm139698746603312"><span class="term ">Shares</span></dt><dd><p>
      SMB servers provide resources to the clients by means of
      shares. Shares are printers and directories with their subdirectories on
      the server. It is exported by means of a name and can be accessed by its
      name. The share name can be set to any name—it does not need to be
      the name of the export directory. A printer is also assigned a name.
      Clients can access the printer by its name.
     </p></dd><dt id="idm139698746601104"><span class="term ">DC</span></dt><dd><p>
      A domain controller (DC) is a server that handles accounts
      in a domain. For data replication, additional domain controllers are
      available in one domain.
     </p></dd></dl></div></div><div class="sect1 " id="sec.samba.install"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.install"><span class="number">30.2 </span><span class="name">Installing a Samba Server</span> <a title="Permalink" class="permalink" href="#sec.samba.install">#</a></h2></div></div></div><p>
   To install a Samba server, start YaST and select
   <span class="guimenu">Software</span> › <span class="guimenu">Software
   Management</span>. Choose
   <span class="guimenu">View</span> › <span class="guimenu">Patterns</span>
   and select <span class="guimenu">File Server</span>. Confirm the installation of the
   required packages to finish the installation process.
  </p></div><div class="sect1 " id="sec.samba.serv.inst"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.serv.inst"><span class="number">30.3 </span><span class="name">Configuring a Samba Server</span> <a title="Permalink" class="permalink" href="#sec.samba.serv.inst">#</a></h2></div></div></div><p>
   For configuring a Samba server, see the SUSE Linux Enterprise Server documentation.
  </p></div><div class="sect1 " id="sec.samba.client.inst"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.client.inst"><span class="number">30.4 </span><span class="name">Configuring Clients</span> <a title="Permalink" class="permalink" href="#sec.samba.client.inst">#</a></h2></div></div></div><p>
   Clients can only access the Samba server via TCP/IP. NetBEUI and NetBIOS via
   IPX cannot be used with Samba.
  </p><div class="sect2 " id="sec.samba.client.inst.yast"><div class="titlepage"><div><div><h3 class="title" id="sec.samba.client.inst.yast"><span class="number">30.4.1 </span><span class="name">Configuring a Samba Client with YaST</span> <a title="Permalink" class="permalink" href="#sec.samba.client.inst.yast">#</a></h3></div></div></div><p>
    Configure a Samba client to access resources (files or printers) on the
    Samba or Windows server. Enter the NT or Active Directory domain or
    workgroup in the dialog <span class="guimenu">Network Services</span> › <span class="guimenu">Windows Domain Membership</span>. If you activate
    <span class="guimenu">Also Use SMB Information for Linux Authentication</span>, the
    user authentication runs over the Samba, NT or Kerberos server.
   </p><p>
    Click <span class="guimenu">Expert Settings</span> for advanced configuration
    options. For example, use the <span class="guimenu">Mount Server Directories</span>
    table to enable mounting server home directory automatically with
    authentication. This way users can access their home directories when
    hosted on CIFS. For details, see the <code class="systemitem">pam_mount</code> man
    page.
   </p><p>
    After completing all settings, confirm the dialog to finish the
    configuration.
   </p></div></div><div class="sect1 " id="sec.samba.anmeld.serv"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.anmeld.serv"><span class="number">30.5 </span><span class="name">Samba as Login Server</span> <a title="Permalink" class="permalink" href="#sec.samba.anmeld.serv">#</a></h2></div></div></div><p>
   In networks where predominantly Windows clients are found, it is often
   preferable that users may only register with a valid account and password.
   In a Windows-based network, this task is handled by a primary domain
   controller (PDC). You can use a Windows NT server configured as PDC, but
   this task can also be done with a Samba server. The entries that must be
   made in the <code class="literal">[global]</code> section of
   <code class="filename">smb.conf</code> are shown in
   <a class="xref" href="#dat.samba.smb.conf.dom" title="Global Section in smb.conf">Example 30.1, “Global Section in smb.conf”</a>.
  </p><div class="example" id="dat.samba.smb.conf.dom"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 30.1: </span><span class="name">Global Section in smb.conf </span><a title="Permalink" class="permalink" href="#dat.samba.smb.conf.dom">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">[global]
    workgroup = WORKGROUP
    domain logons = Yes
    domain master = Yes</pre></div></div></div><p>
   It is necessary to prepare user accounts and passwords in an encryption
   format that conforms with Windows. Do this with the command
   <code class="command">smbpasswd</code> <code class="option">-a name</code>. Create the domain
   account for the computers, required by the Windows domain concept, with the
   following commands:
  </p><div class="verbatim-wrap"><pre class="screen">useradd hostname\$
smbpasswd -a -m hostname</pre></div><p>
   With the <code class="command">useradd</code> command, a dollar sign is added. The
   command <code class="command">smbpasswd</code> inserts this automatically when the
   parameter <code class="option">-m</code> is used. The commented configuration example
   (<code class="filename">/usr/share/doc/packages/samba/examples/smb.conf.SUSE</code>)
   contains settings that automate this task.
  </p><div class="verbatim-wrap"><pre class="screen">add machine script = /usr/sbin/useradd -g nogroup -c "NT Machine Account" \
-s /bin/false %m\$</pre></div><p>
   To make sure that Samba can execute this script correctly, choose a Samba
   user with the required administrator permissions and add it to the
   <code class="systemitem">ntadmin</code> group. Then all users
   belonging to this Linux group can be assigned <code class="literal">Domain
   Admin</code> status with the command:
  </p><div class="verbatim-wrap"><pre class="screen">net groupmap add ntgroup="Domain Admins" unixgroup=ntadmin</pre></div></div><div class="sect1 " id="sec.samba.advanced"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.advanced"><span class="number">30.6 </span><span class="name">Advanced Topics</span> <a title="Permalink" class="permalink" href="#sec.samba.advanced">#</a></h2></div></div></div><p>
   This section introduces more advanced techniques to manage both the client
   and server part of the Samba suite.
  </p><div class="sect2 " id="sec.samba.advanced.compress"><div class="titlepage"><div><div><h3 class="title" id="sec.samba.advanced.compress"><span class="number">30.6.1 </span><span class="name">Transparent File Compression on Btrfs</span> <a title="Permalink" class="permalink" href="#sec.samba.advanced.compress">#</a></h3></div></div></div><p>
    Samba allows clients to remotely manipulate file and directory compression
    flags for shares placed on the Btrfs file system. Windows Explorer provides
    the ability to flag files/directories for transparent compression via the
    <span class="guimenu">File</span> › <span class="guimenu">Properties</span> › <span class="guimenu">Advanced</span>
    dialog:
   </p><div class="figure" id="idm139698746566560"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/samba_win_expl_advattr.png"><img src="images/samba_win_expl_advattr.png" width="" alt="Windows Explorer Advanced Attributes Dialog" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 30.1: </span><span class="name">Windows Explorer <span class="guimenu">Advanced Attributes</span> Dialog </span><a title="Permalink" class="permalink" href="#idm139698746566560">#</a></h6></div></div><p>
    Files flagged for compression are transparently compressed and decompressed
    by the underlying file system when accessed or modified. This normally
    results in storage capacity savings at the expense of extra CPU overhead
    when accessing the file. New files and directories inherit the compression
    flag from the parent directory, unless created with the FILE_NO_COMPRESSION
    option.
   </p><p>
    Windows Explorer presents compressed files and directories visually
    differently to those that are not compressed:
   </p><div class="figure" id="idm139698746559696"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/samba_win_expl_view_compressed.png"><img src="images/samba_win_expl_view_compressed.png" width="" alt="Windows Explorer Directory Listing with Compressed Files" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 30.2: </span><span class="name">Windows Explorer Directory Listing with Compressed Files </span><a title="Permalink" class="permalink" href="#idm139698746559696">#</a></h6></div></div><p>
    You can enable Samba share compression either manually by adding
   </p><div class="verbatim-wrap"><pre class="screen">vfs objects = btrfs</pre></div><p>
    to the share configuration in <code class="filename">/etc/samba/smb.conf</code>, or
    using YaST: <span class="guimenu">Network Services</span> › <span class="guimenu">Samba
    Server</span> › <span class="guimenu">Add</span>, and checking
    <span class="guimenu">Utilize Btrfs Features</span>.
   </p></div><div class="sect2 " id="sec.samba.advanced.snapshots"><div class="titlepage"><div><div><h3 class="title" id="sec.samba.advanced.snapshots"><span class="number">30.6.2 </span><span class="name">Snapshots</span> <a title="Permalink" class="permalink" href="#sec.samba.advanced.snapshots">#</a></h3></div></div></div><p>
    Snapshots, also called Shadow Copies, are copies of the state of a file
    system subvolume at a certain point of time. Snapper is the tool to manage
    these snapshots in Linux. Snapshots are supported on the Btrfs file system
    or thin-provisioned LVM volumes. The Samba suite supports managing of
    remote snapshots through the FSRVP protocol on both the server and client
    side.
   </p><div class="sect3 " id="sec.samba.advanced.snapshots.client"><div class="titlepage"><div><div><h4 class="title" id="sec.samba.advanced.snapshots.client"><span class="number">30.6.2.1 </span><span class="name">Previous Versions</span> <a title="Permalink" class="permalink" href="#sec.samba.advanced.snapshots.client">#</a></h4></div></div></div><p>
     Snapshots on a Samba server can be exposed to remote Windows clients as
     file or directory previous versions.
    </p><p>
     To enable snapshots on a Samba server, the following conditions must be
     fulfilled:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       The SMB network share resides on a Btrfs subvolume.
      </p></li><li class="listitem "><p>
       The SMB network share path has a related snapper configuration file. You
       can create the snapper file with
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> snapper -c &lt;cfg_name&gt; create-config <code class="option">/path/to/share</code></pre></div><p>
       For more information on snapper, see <a class="xref" href="#cha.snapper" title="Chapter 7. System Recovery and Snapshot Management with Snapper">Chapter 7, <em>System Recovery and Snapshot Management with Snapper</em></a>.
      </p></li><li class="listitem "><p>
       The snapshot directory tree must allow access for relevant users. For
       more information, see the PERMISSIONS section of the vfs_snapper manual
       page (<code class="command">man 8 vfs_snapper</code>).
      </p></li></ul></div><p>
     To support remote snapshots, you need to modify the
     <code class="filename">/etc/samba/smb.conf</code> file. You can do it either with
     <span class="guimenu">YaST</span> › <span class="guimenu">Network
     Services</span> › <span class="guimenu">Samba Server</span>, or
     manually by enhancing the relevant share section with
    </p><div class="verbatim-wrap"><pre class="screen">vfs objects = snapper</pre></div><p>
     Note that you need to restart the Samba service for manual
     <code class="filename">smb.conf</code> changes to take effect:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart nmb smb</pre></div><div class="figure" id="fig.yast2.samba.snapshot"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/yast2_samba_snapshot.png"><img src="images/yast2_samba_snapshot.png" width="" alt="Adding a New Samba Share with Snapshotting Enabled" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 30.3: </span><span class="name">Adding a New Samba Share with Snapshotting Enabled </span><a title="Permalink" class="permalink" href="#fig.yast2.samba.snapshot">#</a></h6></div></div><p>
     After being configured, snapshots created by snapper for the Samba share
     path can be accessed from Windows Explorer from a file or directory's
     <span class="guimenu">Previous Versions</span> tab.
    </p><div class="figure" id="fig.samba.win_explorer"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/samba_winexpl_previous_versions.png"><img src="images/samba_winexpl_previous_versions.png" width="" alt="The Previous Versions tab in Windows Explorer" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 30.4: </span><span class="name">The <span class="guimenu">Previous Versions</span> tab in Windows Explorer </span><a title="Permalink" class="permalink" href="#fig.samba.win_explorer">#</a></h6></div></div></div><div class="sect3 " id="sec.samba.advanced.snapshots.server"><div class="titlepage"><div><div><h4 class="title" id="sec.samba.advanced.snapshots.server"><span class="number">30.6.2.2 </span><span class="name">Remote Share Snapshots</span> <a title="Permalink" class="permalink" href="#sec.samba.advanced.snapshots.server">#</a></h4></div></div></div><p>
     By default, snapshots can only be created and deleted on the Samba server
     locally, via the snapper command line utility, or using snapper's time
     line feature.
    </p><p>
     Samba can be configured to process share snapshot creation and deletion
     requests from remote hosts using the File Server Remote VSS Protocol
     (FSRVP).
    </p><p>
     In addition to the configuration and prerequisites documented in
     <a class="xref" href="#sec.samba.advanced.snapshots.client" title="30.6.2.1. Previous Versions">Section 30.6.2.1, “Previous Versions”</a>, the following global
     configuration is required in <code class="filename">/etc/samba/smb.conf</code>:
    </p><div class="verbatim-wrap"><pre class="screen">[global]
rpc_daemon:fssd = fork
registry shares = yes
include = registry</pre></div><p>
     FSRVP clients, including Samba's <code class="command">rpcclient</code> and Windows
     Server 2012 <code class="command">DiskShadow.exe</code>, can then instruct Samba to
     create or delete a snapshot for a given share, and expose the snapshot as
     a new share.
    </p></div><div class="sect3 " id="sec.samba.advanced.snapshots.client.linux"><div class="titlepage"><div><div><h4 class="title" id="sec.samba.advanced.snapshots.client.linux"><span class="number">30.6.2.3 </span><span class="name">Managing Snapshots Remotely from Linux with <code class="command">rpcclient</code></span> <a title="Permalink" class="permalink" href="#sec.samba.advanced.snapshots.client.linux">#</a></h4></div></div></div><p>
     The <code class="systemitem">samba-client</code> package contains an FSRVP client
     that can remotely request a Windows/Samba server to create and expose a
     snapshot of a given share. You can then use existing tools in
     <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> to mount the exposed share and back up its files. Requests
     to the server are sent using the <code class="command">rpcclient</code> binary.
    </p><div class="complex-example"><div class="example" id="idm139698746512176"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 30.2: </span><span class="name">Using <code class="command">rpcclient</code> to Request a Windows Server 2012 Share Snapshot </span><a title="Permalink" class="permalink" href="#idm139698746512176">#</a></h6></div><div class="example-contents"><p>
      Connect to <code class="literal">win-server.example.com</code> server as an
      administrator in an <code class="literal">EXAMPLE</code> domain:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient -U '<em class="replaceable ">EXAMPLE</em>\Administrator' ncacn_np:<em class="replaceable ">win-server.example.com</em>[ndr64,sign]
Enter EXAMPLE/Administrator's password:</pre></div><p>
      Check that the SMB share is visible for <code class="command">rpcclient</code>:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient $&gt; netshareenum
netname: windows_server_2012_share
remark:
path:   C:\Shares\windows_server_2012_share
password:       (null)</pre></div><p>
      Check that the SMB share supports snapshot creation:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient $&gt; fss_is_path_sup windows_server_2012_share \
UNC \\WIN-SERVER\windows_server_2012_share\ supports shadow copy requests</pre></div><p>
      Request the creation of a share snapshot:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient $&gt; fss_create_expose backup ro windows_server_2012_share
13fe880e-e232-493d-87e9-402f21019fb6: shadow-copy set created
13fe880e-e232-493d-87e9-402f21019fb6(1c26544e-8251-445f-be89-d1e0a3938777): \
\\WIN-SERVER\windows_server_2012_share\ shadow-copy added to set
13fe880e-e232-493d-87e9-402f21019fb6: prepare completed in 0 secs
13fe880e-e232-493d-87e9-402f21019fb6: commit completed in 1 secs
13fe880e-e232-493d-87e9-402f21019fb6(1c26544e-8251-445f-be89-d1e0a3938777): \
share windows_server_2012_share@{1C26544E-8251-445F-BE89-D1E0A3938777} \
exposed as a snapshot of \\WIN-SERVER\windows_server_2012_share\</pre></div><p>
      Confirm that the snapshot share is exposed by the server:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient $&gt; netshareenum
netname: windows_server_2012_share
remark:
path:   C:\Shares\windows_server_2012_share
password:       (null)

netname: windows_server_2012_share@{1C26544E-8251-445F-BE89-D1E0A3938777}
remark: (null)
path:   \\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy{F6E6507E-F537-11E3-9404-B8AC6F927453}\Shares\windows_server_2012_share\
password:       (null)</pre></div><p>
      Attempt to delete the snapshot share:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient $&gt; fss_delete windows_server_2012_share \
13fe880e-e232-493d-87e9-402f21019fb6 1c26544e-8251-445f-be89-d1e0a3938777
13fe880e-e232-493d-87e9-402f21019fb6(1c26544e-8251-445f-be89-d1e0a3938777): \
\\WIN-SERVER\windows_server_2012_share\ shadow-copy deleted</pre></div><p>
      Confirm that the snapshot share has been removed by the server:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>rpcclient $&gt; netshareenum
netname: windows_server_2012_share
remark:
path:   C:\Shares\windows_server_2012_share
password:       (null)</pre></div></div></div></div></div><div class="sect3 " id="sec.samba.advanced.snapshots.client.winserver"><div class="titlepage"><div><div><h4 class="title" id="sec.samba.advanced.snapshots.client.winserver"><span class="number">30.6.2.4 </span><span class="name">Managing Snapshots Remotely from Windows with <code class="command">DiskShadow.exe</code></span> <a title="Permalink" class="permalink" href="#sec.samba.advanced.snapshots.client.winserver">#</a></h4></div></div></div><p>
     You can manage snapshots of SMB shares on the Linux Samba server from the
     Windows environment acting as a client as well. Windows Server 2012
     includes the <code class="command">DiskShadow.exe</code> utility that can manage
     remote shares similar to the <code class="command">rpcclient</code> described in
     <a class="xref" href="#sec.samba.advanced.snapshots.client.linux" title="30.6.2.3. Managing Snapshots Remotely from Linux with rpcclient">Section 30.6.2.3, “Managing Snapshots Remotely from Linux with <code class="command">rpcclient</code>”</a>. Note that you
     need to carefully set up the Samba server first.
    </p><p>
     Following is an example procedure to set up the Samba server so that the
     Windows Server client can manage its share's snapshots. Note that <em class="replaceable ">EXAMPLE</em>
     is the Active Directory domain used in the testing environment,
     <code class="uri">fsrvp-server.example.com</code> is the host name of the Samba server, and
     <code class="filename">/srv/smb</code> is the path to the SMB share.
    </p><div class="procedure " id="idm139698746490528"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 30.1: </span><span class="name">Detailed Samba Server Configuration </span><a title="Permalink" class="permalink" href="#idm139698746490528">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Join Active Directory domain via YaST.
      </p></li><li class="step "><p>
       Ensure that the Active Domain DNS entry was correct:
      </p><div class="verbatim-wrap"><pre class="screen">fsrvp-server:~ # net -U 'Administrator' ads dns register \
fsrvp-server.example.com &lt;IP address&gt;
Successfully registered hostname with DNS</pre></div></li><li class="step "><p>
       Create Btrfs subvolume at <code class="filename">/srv/smb</code>
      </p><div class="verbatim-wrap"><pre class="screen">fsrvp-server:~ # btrfs subvolume create /srv/smb</pre></div></li><li class="step "><p>
       Create snapper configuration file for path <code class="filename">/srv/smb</code>
      </p><div class="verbatim-wrap"><pre class="screen">fsrvp-server:~ # snapper -c &lt;snapper_config&gt; create-config /srv/smb</pre></div></li><li class="step "><p>
       Create new share with path <code class="filename">/srv/smb</code>, and YaST
       <span class="guimenu">Expose Snapshots</span> check box enabled. Make sure to add
       the following snippets to the global section of
       <code class="filename">/etc/samba/smb.conf</code> as mentioned in
       <a class="xref" href="#sec.samba.advanced.snapshots.server" title="30.6.2.2. Remote Share Snapshots">Section 30.6.2.2, “Remote Share Snapshots”</a>:
      </p><div class="verbatim-wrap"><pre class="screen">[global]
 rpc_daemon:fssd = fork
 registry shares = yes
 include = registry</pre></div></li><li class="step "><p>
       Restart Samba with <code class="command">systemctl restart nmb smb</code>
      </p></li><li class="step "><p>
       Configure snapper permissions:
      </p><div class="verbatim-wrap"><pre class="screen">fsrvp-server:~ # snapper -c &lt;snapper_config&gt; set-config \
ALLOW_USERS="EXAMPLE\\\\Administrator EXAMPLE\\\\win-client$"</pre></div><p>
       Ensure that any ALLOW_USERS are also permitted traversal of the
       <code class="filename">.snapshots</code> subdirectory.
      </p><div class="verbatim-wrap"><pre class="screen">fsrvp-server:~ # snapper -c &lt;snapper_config&gt; set-config SYNC_ACL=yes</pre></div><div id="idm139698746476032" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Path Escaping</h6><p>
        Be careful about the '\' escapes! Escape twice to ensure that the value
        stored in
        <code class="filename">/etc/snapper/configs/&lt;snapper_config&gt;</code> is
        escaped once.
       </p></div><p>
       "EXAMPLE\win-client$" corresponds to the Windows client computer
       account. Windows issues initial FSRVP requests while authenticated with
       this account.
      </p></li><li class="step "><p>
       Grant Windows client account necessary privileges:
      </p><div class="verbatim-wrap"><pre class="screen">fsrvp-server:~ # net -U 'Administrator' rpc rights grant \
"EXAMPLE\\win-client$" SeBackupPrivilege
Successfully granted rights.</pre></div><p>
       The previous command is not needed for the "EXAMPLE\Administrator" user,
       which has privileges already granted.
      </p></li></ol></div></div><div class="procedure " id="idm139698746471120"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 30.2: </span><span class="name">Windows Client Setup and <code class="command">DiskShadow.exe</code> in Action </span><a title="Permalink" class="permalink" href="#idm139698746471120">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Boot Windows Server 2012 (example host name WIN-CLIENT).
      </p></li><li class="step "><p>
       Join the same Active Directory domain EXAMPLE as with the <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
      </p></li><li class="step "><p>
       Reboot.
      </p></li><li class="step "><p>
       Open Powershell.
      </p></li><li class="step "><p>
       Start <code class="command">DiskShadow.exe</code> and begin the backup procedure:
      </p><div class="verbatim-wrap"><pre class="screen">PS C:\Users\Administrator.EXAMPLE&gt; diskshadow.exe
Microsoft DiskShadow version 1.0
Copyright (C) 2012 Microsoft Corporation
On computer:  WIN-CLIENT,  6/17/2014 3:53:54 PM

DISKSHADOW&gt; begin backup</pre></div></li><li class="step "><p>
       Specify that shadow copy persists across program exit, reset or reboot:
      </p><div class="verbatim-wrap"><pre class="screen">DISKSHADOW&gt; set context PERSISTENT</pre></div></li><li class="step "><p>
       Check whether the specified share supports snapshots, and create one:
      </p><div class="verbatim-wrap"><pre class="screen">DISKSHADOW&gt; add volume \\fsrvp-server\sles_snapper

DISKSHADOW&gt; create
Alias VSS_SHADOW_1 for shadow ID {de4ddca4-4978-4805-8776-cdf82d190a4a} set as \
 environment variable.
Alias VSS_SHADOW_SET for shadow set ID {c58e1452-c554-400e-a266-d11d5c837cb1} \
 set as environment variable.

Querying all shadow copies with the shadow copy set ID \
 {c58e1452-c554-400e-a266-d11d5c837cb1}

 * Shadow copy ID = {de4ddca4-4978-4805-8776-cdf82d190a4a}     %VSS_SHADOW_1%
    - Shadow copy set: {c58e1452-c554-400e-a266-d11d5c837cb1}  %VSS_SHADOW_SET%
    - Original count of shadow copies = 1
    - Original volume name: \\FSRVP-SERVER\SLES_SNAPPER\ \
      [volume not on this machine]
    - Creation time: 6/17/2014 3:54:43 PM
    - Shadow copy device name:
      \\FSRVP-SERVER\SLES_SNAPPER@{31afd84a-44a7-41be-b9b0-751898756faa}
    - Originating machine: FSRVP-SERVER
    - Service machine: win-client.example.com
    - Not exposed
    - Provider ID: {89300202-3cec-4981-9171-19f59559e0f2}
    - Attributes:  No_Auto_Release Persistent FileShare

Number of shadow copies listed: 1</pre></div></li><li class="step "><p>
       Finish the backup procedure:
      </p><div class="verbatim-wrap"><pre class="screen">DISKSHADOW&gt; end backup</pre></div></li><li class="step "><p>
       After the snapshot was created, try to delete it and verify the
       deletion:
      </p><div class="verbatim-wrap"><pre class="screen">DISKSHADOW&gt; delete shadows volume \\FSRVP-SERVER\SLES_SNAPPER\
Deleting shadow copy {de4ddca4-4978-4805-8776-cdf82d190a4a} on volume \
 \\FSRVP-SERVER\SLES_SNAPPER\ from provider \
{89300202-3cec-4981-9171-19f59559e0f2} [Attributes: 0x04000009]...

Number of shadow copies deleted: 1

DISKSHADOW&gt; list shadows all

Querying all shadow copies on the computer ...
No shadow copies found in system.</pre></div></li></ol></div></div></div></div></div><div class="sect1 " id="sec.samba.info"><div class="titlepage"><div><div><h2 class="title" id="sec.samba.info"><span class="number">30.7 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.samba.info">#</a></h2></div></div></div><p>
   Documentation for Samba ships with the <code class="systemitem">samba-doc</code>
   package which is not installed by default. Install it with <code class="command">zypper
   install samba-doc</code>. Enter <code class="command">apropos</code>
   <code class="option">samba</code> at the command line to display some manual pages or
   browse the <code class="filename">/usr/share/doc/packages/samba</code> directory for
   more online documentation and examples. Find a commented example
   configuration (<code class="filename">smb.conf.SUSE</code>) in the
   <code class="filename">examples</code> subdirectory. Another file to look for Samba
   related information is
   <code class="filename">/usr/share/doc/packages/samba/README.SUSE</code>.
  </p><p>
   The Samba HOWTO (see <a class="link" href="https://wiki.samba.org" target="_blank">https://wiki.samba.org</a>) provided
   by the Samba team includes a section about troubleshooting. In addition to
   that, Part V of the document provides a step-by-step guide to checking your
   configuration.
  </p></div></div><div class="chapter " id="cha.autofs"><div class="titlepage"><div><div><h2 class="title"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span> <a title="Permalink" class="permalink" href="#cha.autofs">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>autofs.xml</li><li><span class="ds-label">ID: </span>cha.autofs</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698746444336">#</a></h6></div><p>
    <code class="systemitem">autofs</code> is a program that automatically mounts
    specified directories on an on-demand basis. It is based on a kernel module
    for high efficiency, and can manage both local directories and network
    shares. These automatic mount points are mounted only when they are
    accessed, and unmounted after a certain period of inactivity. This
    on-demand behavior saves bandwidth and results in better performance than
    static mounts managed by <code class="filename">/etc/fstab</code>. While
    <code class="systemitem">autofs</code> is a control script,
    <code class="command">automount</code> is the command (daemon) that does the actual
    auto-mounting.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.autofs.installation"><span class="number">31.1 </span><span class="name">Installation</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.configuration"><span class="number">31.2 </span><span class="name">Configuration</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.debugging"><span class="number">31.3 </span><span class="name">Operation and Debugging</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.nfs"><span class="number">31.4 </span><span class="name">Auto-Mounting an NFS Share</span></a></span></dt><dt><span class="sect1"><a href="#sec.autofs.advanced"><span class="number">31.5 </span><span class="name">Advanced Topics</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.autofs.installation"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.installation"><span class="number">31.1 </span><span class="name">Installation</span> <a title="Permalink" class="permalink" href="#sec.autofs.installation">#</a></h2></div></div></div><p>
   <code class="systemitem">autofs</code> is not installed on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> by
   default. To use its auto-mounting capabilities, first install it with
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> sudo zypper install autofs</pre></div></div><div class="sect1 " id="sec.autofs.configuration"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.configuration"><span class="number">31.2 </span><span class="name">Configuration</span> <a title="Permalink" class="permalink" href="#sec.autofs.configuration">#</a></h2></div></div></div><p>
   You need to configure <code class="systemitem">autofs</code> manually by editing
   its configuration files with a text editor, such as <code class="command">vim</code>.
   There are two basic steps to configure
   <code class="systemitem">autofs</code>—the <span class="emphasis"><em>master</em></span> map
   file, and specific map files.
  </p><div class="sect2 " id="sec.autofs.configuration.master_map"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.configuration.master_map"><span class="number">31.2.1 </span><span class="name">The Master Map File</span> <a title="Permalink" class="permalink" href="#sec.autofs.configuration.master_map">#</a></h3></div></div></div><p>
    The default master configuration file for <code class="systemitem">autofs</code>
    is <code class="filename">/etc/auto.master</code>. You can change its location by
    changing the value of the <code class="option">DEFAULT_MASTER_MAP_NAME</code> option
    in <code class="filename">/etc/sysconfig/autofs</code>. Here is the content of the
    default one for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>:
   </p><div class="verbatim-wrap"><pre class="screen">#
# Sample auto.master file
# This is an automounter map and it has the following format
# key [ -mount-options-separated-by-comma ] location
# For details of the format look at autofs(5).<span id="co.autofs.manpage"></span><span class="callout">1</span>
#
#/misc  /etc/auto.misc<span id="co.autofs.map"></span><span class="callout">2</span>
#/net -hosts
#
# Include /etc/auto.master.d/*.autofs<span id="co.autofs.include"></span><span class="callout">3</span>
#
#+dir:/etc/auto.master.d
#
# Include central master map if it can be found using
# nsswitch sources.
#
# Note that if there are entries for /net or /misc (as
# above) in the included master map any keys that are the
# same will not be seen as the first read key seen takes
# precedence.
#
+auto.master<span id="co.autofs.plus"></span><span class="callout">4</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.manpage"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The <code class="systemitem">autofs</code> manual page (<code class="command">man 5
      autofs</code>) offers a lot of valuable information on the format of
      the automounter maps.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.map"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Although commented out (#) by default, this is an example of a simple
      automounter mapping syntax.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.include"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      In case you need to split the master map into several files, uncomment
      the line, and put the mappings (suffixed with <code class="literal">.autofs</code>)
      in the <code class="filename">/etc/auto.master.d/</code> directory.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.plus"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      <code class="literal">+auto.master</code> ensures that those using NIS
       will still find their master map.
     </p></td></tr></table></div><p>
    Entries in <code class="filename">auto.master</code> have three fields with the
    following syntax:
   </p><div class="verbatim-wrap"><pre class="screen">mount point      map name      options</pre></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698746415184"><span class="term ">mount point</span></dt><dd><p>
       The base location where to mount the <code class="systemitem">autofs</code>
       file system, such as <code class="literal">/home</code>.
      </p></dd><dt id="idm139698746412448"><span class="term ">map name</span></dt><dd><p>
       The name of a map source to use for mounting. For the syntax of the maps
       files, see <a class="xref" href="#sec.autofs.mapfiles" title="31.2.2. Map Files">Section 31.2.2, “Map Files”</a>.
      </p></dd><dt id="idm139698746410016"><span class="term ">options</span></dt><dd><p>
       These options (if specified) will apply as defaults to all entries in
       the given map.
      </p></dd></dl></div><div id="idm139698746407968" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: For More Information</h6><p>
     For more detailed information on the specific values of the optional
     <code class="literal">map-type</code>, <code class="literal">format</code>, and
     <code class="literal">options</code>, see the <span class="guimenu">auto.master</span> manual
     page (<code class="command">man 5 auto.master</code>).
    </p></div><p>
    The following entry in <code class="filename">auto.master</code> tells
    <code class="systemitem">autofs</code> to look in
    <code class="filename">/etc/auto.smb</code>, and create mount points in the
    <code class="filename">/smb</code> directory.
   </p><div class="verbatim-wrap"><pre class="screen">/smb   /etc/auto.smb</pre></div><div class="sect3 " id="sec.autofs.directmount"><div class="titlepage"><div><div><h4 class="title" id="sec.autofs.directmount"><span class="number">31.2.1.1 </span><span class="name">Direct Mounts</span> <a title="Permalink" class="permalink" href="#sec.autofs.directmount">#</a></h4></div></div></div><p>
     Direct mounts create a mount point at the path specified inside the
     relevant map file. Instead of specifying the mount point in
     <code class="filename">auto.master</code>, replace the mount point field with
     <code class="literal">/-</code>. For example, the following line tells
     <code class="systemitem">autofs</code> to create a mount point at the place
     specified in <code class="filename">auto.smb</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/-        /etc/auto.smb</pre></div><div id="idm139698746397504" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Maps without Full Path</h6><p>
      If the map file is not specified with its full local or network path, it
      is located using the Name Service Switch (NSS) configuration:
     </p><div class="verbatim-wrap"><pre class="screen">/-        auto.smb</pre></div></div></div></div><div class="sect2 " id="sec.autofs.mapfiles"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.mapfiles"><span class="number">31.2.2 </span><span class="name">Map Files</span> <a title="Permalink" class="permalink" href="#sec.autofs.mapfiles">#</a></h3></div></div></div><div id="idm139698746394080" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Other Types of Maps</h6><p>
     Although <span class="emphasis"><em>files</em></span> are the most common types of maps for
     auto-mounting with <code class="systemitem">autofs</code>, there are other types
     as well. A map specification can be the output of a command, or a result
     of a query in LDAP or database. For more detailed information on map
     types, see the manual page <code class="command">man 5 auto.master</code>.
    </p></div><p>
    Map files specify the (local or network) source location, and the mount
    point where to mount the source locally. The general format of maps is
    similar to the master map. The difference is that the
    <span class="emphasis"><em>options</em></span> appear between the mount point and the
    location instead of at the end of the entry:
   </p><div class="verbatim-wrap"><pre class="screen">mount point      options      location</pre></div><div class="variablelist "><dl class="variablelist"><dt id="idm139698746389232"><span class="term ">mount point</span></dt><dd><p>
       Specifies where to mount the source location. This can be either a
       single directory name (so-called <span class="emphasis"><em>indirect</em></span> mount) to
       be added to the base mount point specified in
       <code class="filename">auto.master</code>, or the full path of the mount point
       (direct mount, see <a class="xref" href="#sec.autofs.directmount" title="31.2.1.1. Direct Mounts">Section 31.2.1.1, “Direct Mounts”</a>).
      </p></dd><dt id="idm139698746385792"><span class="term ">options</span></dt><dd><p>
       Specifies optional comma-separated list of mount options for the
       relevant entries. If <code class="filename">auto.master</code> contains options
       for this map file as well, theses are appended.
      </p></dd><dt id="idm139698746383408"><span class="term ">location</span></dt><dd><p>
       Specifies from where the file system is to be mounted. It is usually an
       NFS or SMB volume in the usual notation
       <code class="literal">host_name:path_name</code>. If the file system to be mounted
       begins with a '/' (such as local <code class="filename">/dev</code> entries or
       smbfs shares), a colon symbol ':' needs to be prefixed, such as
       <code class="literal">:/dev/sda1</code>.
      </p></dd></dl></div></div></div><div class="sect1 " id="sec.autofs.debugging"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.debugging"><span class="number">31.3 </span><span class="name">Operation and Debugging</span> <a title="Permalink" class="permalink" href="#sec.autofs.debugging">#</a></h2></div></div></div><p>
   This section introduces information on how to control the
   <code class="systemitem">autofs</code> service operation, and how to view more
   debugging information when tuning the automounter operation.
  </p><div class="sect2 " id="sec.autofs.debugging.service"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.debugging.service"><span class="number">31.3.1 </span><span class="name">Controlling the <code class="systemitem">autofs</code> Service</span> <a title="Permalink" class="permalink" href="#sec.autofs.debugging.service">#</a></h3></div></div></div><p>
    The operation of the <code class="systemitem">autofs</code> service is controlled
    by <code class="systemitem">systemd</code>. The general syntax of the <code class="command">systemctl</code>
    command for <code class="systemitem">autofs</code> is
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl <em class="replaceable ">SUB_COMMAND</em> autofs</pre></div><p>
    where <em class="replaceable ">SUB_COMMAND</em> is one of:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746370464"><span class="term ">enable</span></dt><dd><p>
       Starts the automounter daemon at boot.
      </p></dd><dt id="idm139698746368640"><span class="term ">start</span></dt><dd><p>
       Starts the automounter daemon.
      </p></dd><dt id="idm139698746366816"><span class="term ">stop</span></dt><dd><p>
       Stops the automounter daemon. Automatic mount points are not accessible.
      </p></dd><dt id="idm139698746364960"><span class="term ">status</span></dt><dd><p>
       Prints the current status of the <code class="systemitem">autofs</code> service
       together with a part of a relevant log file.
      </p></dd><dt id="idm139698746362640"><span class="term ">restart</span></dt><dd><p>
       Stops and starts the automounter, terminating all running daemons and
       starting new ones.
      </p></dd><dt id="idm139698746360752"><span class="term ">reload</span></dt><dd><p>
       Checks the current <code class="filename">auto.master</code> map, restarts those
       daemons whose entries have changed, and starts new ones for new entries.
      </p></dd></dl></div></div><div class="sect2 " id="sec.autofs.debugging.problems"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.debugging.problems"><span class="number">31.3.2 </span><span class="name">Debugging the Automounter Problems</span> <a title="Permalink" class="permalink" href="#sec.autofs.debugging.problems">#</a></h3></div></div></div><p>
    If you experience problems when mounting directories with
    <code class="systemitem">autofs</code>, it is useful to run the
    <code class="command">automount</code> daemon manually and watch its output messages:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Stop <code class="systemitem">autofs</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl stop autofs</pre></div></li><li class="step "><p>
      From one terminal, run <code class="command">automount</code> manually in the
      foreground, producing verbose output.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> automount -f -v</pre></div></li><li class="step "><p>
      From another terminal, try to mount the auto-mounting file systems by
      accessing the mount points (for example by <code class="command">cd</code> or
      <code class="command">ls</code>).
     </p></li><li class="step "><p>
      Check the output of <code class="command">automount</code> from the first terminal
      for more information why the mount failed, or why it was not even
      attempted.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.autofs.nfs"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.nfs"><span class="number">31.4 </span><span class="name">Auto-Mounting an NFS Share</span> <a title="Permalink" class="permalink" href="#sec.autofs.nfs">#</a></h2></div></div></div><p>
   The following procedure illustrates how to configure
   <code class="systemitem">autofs</code> to auto-mount an NFS share available on your
   network. It makes use of the information mentioned above, and assumes you
   are familiar with NFS exports. For more information on NFS, see
   <a class="xref" href="#cha.nfs" title="Chapter 29. Sharing File Systems with NFS">Chapter 29, <em>Sharing File Systems with NFS</em></a>.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Edit the master map file <code class="filename">/etc/auto.master</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> vim /etc/auto.master</pre></div><p>
     Add a new entry for the new NFS mount at the end of
     <code class="filename">/etc/auto.master</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/nfs      /etc/auto.nfs      --timeout=10</pre></div><p>
     It tells <code class="systemitem">autofs</code> that the base mount point is
     <code class="filename">/nfs</code>, the NFS shares are specified in the
     <code class="filename">/etc/auto.nfs</code> map, and that all shares in this map
     will be automatically unmounted after 10 seconds of inactivity.
    </p></li><li class="step "><p>
     Create a new map file for NFS shares:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> vim /etc/auto.nfs</pre></div><p>
     <code class="filename">/etc/auto.nfs</code> normally contains a separate line for
     each NFS share. Its format is described in
     <a class="xref" href="#sec.autofs.mapfiles" title="31.2.2. Map Files">Section 31.2.2, “Map Files”</a>. Add the line describing the mount point
     and the NFS share network address:
    </p><div class="verbatim-wrap"><pre class="screen">export      jupiter.com:/home/geeko/doc/export</pre></div><p>
     The above line means that the <code class="filename">/home/geeko/doc/export</code>
     directory on the <code class="literal">jupiter.com</code> host will be auto-mounted
     to the <code class="filename">/nfs/export</code> directory on the local host
     (<code class="filename">/nfs</code> is taken from the
     <code class="filename">auto.master</code> map) when requested. The
     <code class="filename">/nfs/export</code> directory will be created automatically
     by <code class="systemitem">autofs</code>.
    </p></li><li class="step "><p>
     Optionally comment out the related line in <code class="filename">/etc/fstab</code>
     if you previously mounted the same NFS share statically. The line should
     look similar to this:
    </p><div class="verbatim-wrap"><pre class="screen">#jupiter.com:/home/geeko/doc/export /nfs/export nfs defaults 0 0</pre></div></li><li class="step "><p>
     Reload <code class="systemitem">autofs</code> and check if it works:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart autofs</pre></div><div class="verbatim-wrap"><pre class="screen"># ls -l /nfs/export
total 20
drwxr-xr-x  6 1001 users 4096 Oct 25 08:56 ./
drwxr-xr-x  3 root root     0 Apr  1 09:47 ../
drwxr-xr-x  5 1001 users 4096 Jan 14  2013 .images/
drwxr-xr-x 10 1001 users 4096 Aug 16  2013 .profiled/
drwxr-xr-x  3 1001 users 4096 Aug 30  2013 .tmp/
drwxr-xr-x  4 1001 users 4096 Oct 25 08:56 SLE-12-manual/</pre></div><p>
     If you can see the list of files on the remote share, then
     <code class="systemitem">autofs</code> is functioning.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.autofs.advanced"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.advanced"><span class="number">31.5 </span><span class="name">Advanced Topics</span> <a title="Permalink" class="permalink" href="#sec.autofs.advanced">#</a></h2></div></div></div><p>
   This section describes topics that are beyond the basic introduction to
   <code class="systemitem">autofs</code>—auto-mounting of NFS shares that are
   available on your network, using wild cards in map files, and information
   specific to the CIFS file system.
  </p><div class="sect2 " id="sec.autofs.advanced.net"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.advanced.net"><span class="number">31.5.1 </span><span class="name"><code class="filename">/net</code> Mount Point</span> <a title="Permalink" class="permalink" href="#sec.autofs.advanced.net">#</a></h3></div></div></div><p>
    This helper mount point is useful if you use a lot of NFS shares.
    <code class="filename">/net</code> auto-mounts all NFS shares on your local network
    on demand. The entry is already present in the
    <code class="filename">auto.master</code> file, so all you need to do is uncomment
    it and restart <code class="systemitem">autofs</code>:
   </p><div class="verbatim-wrap"><pre class="screen">/net      -hosts</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart autofs</pre></div><p>
    For example, if you have a server named <code class="literal">jupiter</code> with an
    NFS share called <code class="filename">/export</code>, you can mount it by typing
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cd /net/jupiter/export</pre></div><p>
    on the command line.
   </p></div><div class="sect2 " id="sec.autofs.advanced.wildcards"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.advanced.wildcards"><span class="number">31.5.2 </span><span class="name">Using Wild Cards to Auto-Mount Subdirectories</span> <a title="Permalink" class="permalink" href="#sec.autofs.advanced.wildcards">#</a></h3></div></div></div><p>
    If you have a directory with subdirectories that you need to auto-mount
    individually—the typical case is the <code class="filename">/home</code>
    directory with individual users' home directories inside—
    <code class="systemitem">autofs</code> offers a clever solution for that.
   </p><p>
    In case of home directories, add the following line in
    <code class="filename">auto.master</code>:
   </p><div class="verbatim-wrap"><pre class="screen">/home      /etc/auto.home</pre></div><p>
    Now you need to add the correct mapping to the
    <code class="filename">/etc/auto.home</code> file, so that the users' home
    directories are mounted automatically. One solution is to create separate
    entries for each directory:
   </p><div class="verbatim-wrap"><pre class="screen">wilber      jupiter.com:/home/wilber
penguin      jupiter.com:/home/penguin
tux      jupiter.com:/home/tux
[...]</pre></div><p>
    This is very awkward as you need to manage the list of users inside
    <code class="filename">auto.home</code>. You can use the asterisk '*' instead of the
    mount point, and the ampersand '&amp;' instead of the directory to be
    mounted:
   </p><div class="verbatim-wrap"><pre class="screen">*      jupiter:/home/&amp;</pre></div></div><div class="sect2 " id="sec.autofs.advanced.cifs"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.advanced.cifs"><span class="number">31.5.3 </span><span class="name">Auto-Mounting CIFS File System</span> <a title="Permalink" class="permalink" href="#sec.autofs.advanced.cifs">#</a></h3></div></div></div><p>
    If you want to auto-mount an SMB/CIFS share (see
    <a class="xref" href="#cha.samba" title="Chapter 30. Samba">Chapter 30, <em>Samba</em></a> for more information on the SMB/CIFS protocol),
    you need to modify the syntax of the map file. Add
    <code class="option">-fstype=cifs</code> in the option field, and prefix the share
    location with a colon ':'.
   </p><div class="verbatim-wrap"><pre class="screen">mount point      -fstype=cifs      ://jupiter.com/export</pre></div></div></div></div></div><div class="part" id="part.trouble"><div class="titlepage"><div><div><h1 class="title"><span class="number">Part V </span><span class="name">Troubleshooting </span><a title="Permalink" class="permalink" href="#part.trouble">#</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.adminhelp"><span class="number">32 </span><span class="name">Help and Documentation</span></a></span></dt><dd class="toc-abstract"><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> comes with various sources of information and documentation,
  many of which are already integrated into your installed system.
 </p></dd><dt><span class="chapter"><a href="#cha.adm.support"><span class="number">33 </span><span class="name">Gathering System Information for Support</span></a></span></dt><dd class="toc-abstract"><p>
    For a quick overview of all relevant system information of a machine,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> offers the
    <code class="systemitem">hostinfo</code> package. It also helps
    system administrators to check for tainted kernels (that are not supported)
    or any third-party packages installed on a machine.
   </p><p>
    In case of problems, a detailed system report may be created with either
    the <code class="command">supportconfig</code> command line tool or the YaST
    <span class="guimenu">Support</span> module. Both will collect information about the
    system such as: current kernel version, hardware, installed packages,
    partition setup, and much more. The result is a TAR archive of files. After
    opening a Service Request (SR), you can upload the TAR archive to Global
    Technical Support. It will help to locate the issue you reported and to
    assist you in solving the problem.
   </p><p>
    Additionally, you can analyze the <code class="command">supportconfig</code> output
    for known issues to help resolve problems faster. For this purpose,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> provides both an appliance and a command line tool for
    <code class="literal">Supportconfig Analysis</code> (SCA).
   </p></dd><dt><span class="chapter"><a href="#cha.trouble"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span></a></span></dt><dd class="toc-abstract"><p>
  This chapter describes a range of potential problems and their solutions.
  Even if your situation is not precisely listed here, there may be one similar
  enough to offer hints to the solution of your problem.
 </p></dd></dl></div><div class="chapter " id="cha.adminhelp"><div class="titlepage"><div><div><h2 class="title"><span class="number">32 </span><span class="name">Help and Documentation</span> <a title="Permalink" class="permalink" href="#cha.adminhelp">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>help_admin.xml</li><li><span class="ds-label">ID: </span>cha.adminhelp</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.help.onboard.docdir"><span class="number">32.1 </span><span class="name">Documentation Directory</span></a></span></dt><dt><span class="sect1"><a href="#sec.help.onboard.manpages"><span class="number">32.2 </span><span class="name">Man Pages</span></a></span></dt><dt><span class="sect1"><a href="#sec.help.onboard.infopages"><span class="number">32.3 </span><span class="name">Info Pages</span></a></span></dt><dt><span class="sect1"><a href="#sec.help.online"><span class="number">32.4 </span><span class="name">Online Resources</span></a></span></dt></dl></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> comes with various sources of information and documentation,
  many of which are already integrated into your installed system.
 </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746294688"><span class="term ">Documentation in <code class="filename">/usr/share/doc</code></span></dt><dd><p>
     This traditional help directory holds various documentation files and
     release notes for your system. It contains also information of installed
     packages in the subdirectory <code class="filename">packages</code>. Find more
     detailed information in <a class="xref" href="#sec.help.onboard.docdir" title="32.1. Documentation Directory">Section 32.1, “Documentation Directory”</a>.
    </p></dd><dt id="idm139698746291392"><span class="term ">Man Pages and Info Pages for Shell Commands</span></dt><dd><p>
     When working with the shell, you do not need to know the options of the
     commands by heart. Traditionally, the shell provides integrated help by
     means of man pages and info pages. Read more in
     <a class="xref" href="#sec.help.onboard.manpages" title="32.2. Man Pages">Section 32.2, “Man Pages”</a> and
     <a class="xref" href="#sec.help.onboard.infopages" title="32.3. Info Pages">Section 32.3, “Info Pages”</a>.
    </p></dd><dt id="idm139698746288224"><span class="term ">Desktop Help Center</span></dt><dd><p>
     The help center of the GNOME desktop (Help) provides central access to
     the most important documentation resources on your system in searchable
     form. These resources include online help for installed applications, man
     pages, info pages, and the SUSE manuals delivered with your product.
    </p></dd><dt id="idm139698746286144"><span class="term ">Separate Help Packages for Some Applications</span></dt><dd><p>
     When installing new software with YaST, the software documentation is
     usually installed automatically and appears in the help center of your
     desktop. However, some applications, such as GIMP, may have different
     online help packages that can be installed separately with YaST and do
     not integrate into the help centers.
    </p></dd></dl></div><div class="sect1 " id="sec.help.onboard.docdir"><div class="titlepage"><div><div><h2 class="title" id="sec.help.onboard.docdir"><span class="number">32.1 </span><span class="name">Documentation Directory</span> <a title="Permalink" class="permalink" href="#sec.help.onboard.docdir">#</a></h2></div></div></div><p>
    The traditional directory to find documentation on your
   installed Linux system is <code class="filename">/usr/share/doc</code>. Usually, the
   directory contains information about the packages installed on your system,
   plus release notes, manuals, and more.
  </p><div id="idm139698746281552" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Contents Depends on Installed Packages</h6><p>
    In the Linux world, many manuals and other kinds of documentation are
    available in the form of packages, like software. How much and which
    information you find in <code class="filename">/usr/share/docs</code> also depends
    on the (documentation) packages installed. If you cannot find the
    subdirectories mentioned here, check if the respective packages are
    installed on your system and add them with YaST, if needed.
   </p></div><div class="sect2 " id="sec.help.onboard.docdir.manual"><div class="titlepage"><div><div><h3 class="title" id="sec.help.onboard.docdir.manual"><span class="number">32.1.1 </span><span class="name">SUSE Manuals</span> <a title="Permalink" class="permalink" href="#sec.help.onboard.docdir.manual">#</a></h3></div></div></div><p>
    We provide HTML and PDF versions of our books in different
    languages. In the <code class="filename">manual</code> subdirectory, find HTML
    versions of most of the SUSE manuals available for your product. For an
    overview of all documentation available for your product refer to the
    preface of the manuals.
   </p><p>
    If more than one language is installed,
    <code class="filename">/usr/share/doc/manual</code> may contain different language
    versions of the manuals. The HTML versions of the SUSE manuals are also
    available in the help center of both desktops. For information on where to
    find the PDF and HTML versions of the books on your installation media,
    refer to the <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> Release Notes. They are available on your
    installed system under <code class="filename">/usr/share/doc/release-notes/</code>
    or online at your product-specific Web page at <a class="link" href="https://www.suse.com/releasenotes//" target="_blank">https://www.suse.com/releasenotes//</a>.
   </p></div><div class="sect2 " id="sec.help.onboard.docdir.pkg"><div class="titlepage"><div><div><h3 class="title" id="sec.help.onboard.docdir.pkg"><span class="number">32.1.2 </span><span class="name">Package Documentation</span> <a title="Permalink" class="permalink" href="#sec.help.onboard.docdir.pkg">#</a></h3></div></div></div><p>
    Under <code class="filename">packages</code>, find the documentation
    that is included in the software packages installed on your system. For
    every package, a subdirectory
    <code class="filename">/usr/share/doc/packages/<em class="replaceable ">PACKAGENAME</em></code>
    is created. It often contains README files for the package and sometimes
    examples, configuration files, or additional scripts. The following list
    introduces typical files to be found under
    <code class="filename">/usr/share/doc/packages</code>. None of these entries are
    mandatory and many packages might only include a few of them.
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746269152"><span class="term "><code class="filename">AUTHORS</code>
     </span></dt><dd><p>
       List of the main developers.
      </p></dd><dt id="idm139698746267040"><span class="term "><code class="filename">BUGS</code>
     </span></dt><dd><p>
       Known bugs or malfunctions. Might also contain a link to a Bugzilla Web
       page where you can search all bugs.
      </p></dd><dt id="idm139698746264848"><span class="term "><code class="filename">CHANGES</code>
     , </span><span class="term "><code class="filename">ChangeLog</code>
     </span></dt><dd><p>
       Summary of changes from version to version. Usually interesting for
       developers, because it is very detailed.
      </p></dd><dt id="idm139698746261920"><span class="term "><code class="filename">COPYING</code>
     , </span><span class="term "><code class="filename">LICENSE</code>
     </span></dt><dd><p>
       Licensing information.
      </p></dd><dt id="idm139698746259088"><span class="term "><code class="filename">FAQ</code>
     </span></dt><dd><p>
       Question and answers collected from mailing lists or newsgroups.
      </p></dd><dt id="idm139698746256944"><span class="term "><code class="filename">INSTALL</code>
     </span></dt><dd><p>
       How to install this package on your system. As the package is already
       installed by the time you get to read this file, you can safely ignore
       the contents of this file.
      </p></dd><dt id="idm139698746254688"><span class="term "><code class="filename">README</code>, <code class="filename">README.*</code>
     </span></dt><dd><p>
       General information on the software. For example, for what purpose and
       how to use it.
      </p></dd><dt id="idm139698746252064"><span class="term "><code class="filename">TODO</code>
     </span></dt><dd><p>
       Things that are not implemented yet, but probably will be in the future.
      </p></dd><dt id="idm139698746249920"><span class="term "><code class="filename">MANIFEST</code>
     </span></dt><dd><p>
       List of files with a brief summary.
      </p></dd><dt id="idm139698746247808"><span class="term "><code class="filename">NEWS</code>
     </span></dt><dd><p>
       Description of what is new in this version.
      </p></dd></dl></div></div></div><div class="sect1 " id="sec.help.onboard.manpages"><div class="titlepage"><div><div><h2 class="title" id="sec.help.onboard.manpages"><span class="number">32.2 </span><span class="name">Man Pages</span> <a title="Permalink" class="permalink" href="#sec.help.onboard.manpages">#</a></h2></div></div></div><p>
   Man pages are an essential part of any Linux system. They explain the usage
   of a command and all available options and parameters. Man pages can be
   accessed with <code class="command">man</code> followed by the name of the command,
   for example, <code class="command">man ls</code>.
  </p><p>
   Man pages are displayed directly in the shell. To navigate them, move up and
   down with <span class="keycap">Page ↑</span> and <span class="keycap">Page ↓</span>.
   Move between the beginning and the end of a document with
   <span class="keycap">Home</span> and <span class="keycap">End</span>. End this viewing
   mode by pressing <span class="keycap">Q</span>. Learn more about the
   <code class="command">man</code> command itself with <code class="command">man man</code>. Man
   pages are sorted in categories as shown in
   <a class="xref" href="#tab.help.mancategory" title="Man Pages—Categories and Descriptions">Table 32.1, “Man Pages—Categories and Descriptions”</a> (taken from the man page for man
   itself).
  </p><div class="table" id="tab.help.mancategory"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 32.1: </span><span class="name">Man Pages—Categories and Descriptions </span><a title="Permalink" class="permalink" href="#tab.help.mancategory">#</a></h6></div><div class="table-contents"><table summary="Man Pages—Categories and Descriptions" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
       <p>
        Number
       </p>
      </th><th>
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td>
       <p>
        1
       </p>
      </td><td>
       <p>
        Executable programs or shell commands
       </p>
      </td></tr><tr><td>
       <p>
        2
       </p>
      </td><td>
       <p>
        System calls (functions provided by the kernel)
       </p>
      </td></tr><tr><td>
       <p>
        3
       </p>
      </td><td>
       <p>
        Library calls (functions within program libraries)
       </p>
      </td></tr><tr><td>
       <p>
        4
       </p>
      </td><td>
       <p>
        Special files (usually found in <code class="filename">/dev</code>)
       </p>
      </td></tr><tr><td>
       <p>
        5
       </p>
      </td><td>
       <p>
        File formats and conventions (<code class="filename">/etc/fstab</code>)
       </p>
      </td></tr><tr><td>
       <p>
        6
       </p>
      </td><td>
       <p>
        Games
       </p>
      </td></tr><tr><td>
       <p>
        7
       </p>
      </td><td>
       <p>
        Miscellaneous (including macro packages and conventions), for example,
        man(7), groff(7)
       </p>
      </td></tr><tr><td>
       <p>
        8
       </p>
      </td><td>
       <p>
        System administration commands (usually only for <code class="systemitem">root</code>)
       </p>
      </td></tr><tr><td>
       <p>
        9
       </p>
      </td><td>
       <p>
        Kernel routines (nonstandard)
       </p>
      </td></tr></tbody></table></div></div><p>
   Each man page consists of several parts labeled <em class="citetitle ">NAME</em>
   , <em class="citetitle ">SYNOPSIS</em> , <em class="citetitle ">DESCRIPTION</em> ,
   <em class="citetitle ">SEE ALSO</em> , <em class="citetitle ">LICENSING</em> , and
   <em class="citetitle ">AUTHOR</em> . There may be additional sections available
   depending on the type of command.
  </p></div><div class="sect1 " id="sec.help.onboard.infopages"><div class="titlepage"><div><div><h2 class="title" id="sec.help.onboard.infopages"><span class="number">32.3 </span><span class="name">Info Pages</span> <a title="Permalink" class="permalink" href="#sec.help.onboard.infopages">#</a></h2></div></div></div><p>
   Info pages are another important source of information on your system.
   Usually, they are more detailed than man pages. They consist of more than
   command line options and contain sometimes whole tutorials or reference
   documentation. To view the info page for a certain command, enter
   <code class="command">info</code> followed by the name of the command, for example,
   <code class="command">info ls</code>. You can browse an info page with a viewer
   directly in the shell and display the different sections, called
   <span class="quote">“<span class="quote">nodes</span>”</span>. Use <span class="keycap">Space</span> to move forward and
   <span class="keycap">&lt;—</span> to move backward. Within a node, you can also
   browse with <span class="keycap">Page ↑</span> and <span class="keycap">Page ↓</span>
   but only <span class="keycap">Space</span> and <span class="keycap">&lt;—</span> will
   take you also to the previous or subsequent node. Press <span class="keycap">Q</span>
   to end the viewing mode. Not every command comes with an info page and vice
   versa.
  </p></div><div class="sect1 " id="sec.help.online"><div class="titlepage"><div><div><h2 class="title" id="sec.help.online"><span class="number">32.4 </span><span class="name">Online Resources</span> <a title="Permalink" class="permalink" href="#sec.help.online">#</a></h2></div></div></div><p>
   In addition to the online versions of the SUSE manuals installed under
   <code class="filename">/usr/share/doc</code>, you can also access the
   product-specific manuals and documentation on the Web. For an overview of
   all documentation available for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> check out your
   product-specific documentation Web page at
   <span class="phrase"><a class="link" href="http://www.suse.com/doc/" target="_blank">http://www.suse.com/doc/</a></span>.
  </p><p>
   If you are searching for additional product-related information, you can
   also refer to the following Web sites:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746194144"><span class="term ">SUSE Technical Support</span></dt><dd><p>
      The SUSE Technical Support can be found at
      <a class="link" href="http://www.suse.com/support/" target="_blank">http://www.suse.com/support/</a> if you have questions
      or need solutions for technical problems.
     </p></dd><dt id="idm139698746191392"><span class="term ">SUSE Forums</span></dt><dd><p>
      There are several forums where you can dive in on discussions about
      SUSE products. See <span class="phrase"><a class="link" href="http://forums.suse.com/" target="_blank">http://forums.suse.com/</a></span>  for a
      list.
     </p></dd><dt id="idm139698746188544"><span class="term ">SUSE Conversations</span></dt><dd><p>
      An online community, which offers articles, tips, Q and A, and free tools
      to download:
      <a class="link" href="http://www.suse.com/communities/conversations/" target="_blank">http://www.suse.com/communities/conversations/</a>
     </p></dd><dt id="idm139698746185792"><span class="term ">GNOME Documentation</span></dt><dd><p>
      Documentation for GNOME users, administrators and developers is
      available at <a class="link" href="http://library.gnome.org/" target="_blank">http://library.gnome.org/</a>.
     </p></dd><dt id="idm139698746183344"><span class="term ">The Linux Documentation Project</span></dt><dd><p>
      The Linux Documentation Project (TLDP) is run by a team of volunteers who
      write Linux-related documentation (see
      <a class="link" href="http://www.tldp.org" target="_blank">http://www.tldp.org</a>). It is probably the most
      comprehensive documentation resource for Linux. The set of documents
      contains tutorials for beginners, but is mainly focused on experienced
      users and professional system administrators. TLDP publishes HOWTOs,
      FAQs, and guides (handbooks) under a free license. Parts of the
      documentation from TLDP are also available on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>.
     </p></dd></dl></div><p>
   You can also try general-purpose search engines. For example, use the search
   terms <code class="literal">Linux CD-RW help</code> or <code class="literal">OpenOffice file
   conversion problem</code> if you have trouble with burning CDs or LibreOffice
   file conversion.
  </p></div></div><div class="chapter " id="cha.adm.support"><div class="titlepage"><div><div><h2 class="title"><span class="number">33 </span><span class="name">Gathering System Information for Support</span> <a title="Permalink" class="permalink" href="#cha.adm.support">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>adm_support.xml</li><li><span class="ds-label">ID: </span>cha.adm.support</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="#idm139698746174688">#</a></h6></div><p>
    For a quick overview of all relevant system information of a machine,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> offers the
    <code class="systemitem">hostinfo</code> package. It also helps
    system administrators to check for tainted kernels (that are not supported)
    or any third-party packages installed on a machine.
   </p><p>
    In case of problems, a detailed system report may be created with either
    the <code class="command">supportconfig</code> command line tool or the YaST
    <span class="guimenu">Support</span> module. Both will collect information about the
    system such as: current kernel version, hardware, installed packages,
    partition setup, and much more. The result is a TAR archive of files. After
    opening a Service Request (SR), you can upload the TAR archive to Global
    Technical Support. It will help to locate the issue you reported and to
    assist you in solving the problem.
   </p><p>
    Additionally, you can analyze the <code class="command">supportconfig</code> output
    for known issues to help resolve problems faster. For this purpose,
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> provides both an appliance and a command line tool for
    <code class="literal">Supportconfig Analysis</code> (SCA).
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.admsupport.hostinfo"><span class="number">33.1 </span><span class="name">Displaying Current System Information</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.supportconfig"><span class="number">33.2 </span><span class="name">Collecting System Information with Supportconfig</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.submit"><span class="number">33.3 </span><span class="name">Submitting Information to Global Technical Support</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.sca"><span class="number">33.4 </span><span class="name">Analyzing System Information</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.install"><span class="number">33.5 </span><span class="name">Gathering Information during the Installation</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.kernel"><span class="number">33.6 </span><span class="name">Support of Kernel Modules</span></a></span></dt><dt><span class="sect1"><a href="#sec.admsupport.moreinfo"><span class="number">33.7 </span><span class="name">For More Information</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.admsupport.hostinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.hostinfo"><span class="number">33.1 </span><span class="name">Displaying Current System Information</span> <a title="Permalink" class="permalink" href="#sec.admsupport.hostinfo">#</a></h2></div></div></div><p>
   For a quick and easy overview of all relevant system information when
   logging in to a server, use the package
   <code class="systemitem">hostinfo</code>. After it has been
   installed on a machine, the console displays the following information to
   any <code class="systemitem">root</code> user that logs in to this machine:
  </p><div class="example" id="ex.support.hostinfo"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 33.1: </span><span class="name">Output of <code class="command">hostinfo</code> When Logging In as <code class="systemitem">root</code> </span><a title="Permalink" class="permalink" href="#ex.support.hostinfo">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">Hostname:                 earth
Current As Of:            Wed 12 Mar 2014 03:57:05 PM CET
Distribution:             SUSE Linux Enterprise Server 12
 -Service Pack:           0
Architecture:             x86_64
Kernel Version:           3.12.12-3-default
 -Installed:              Mon 10 Mar 2014 03:15:05 PM CET
 -Status:                 Not Tainted
Last Updated Package:     Wed 12 Mar 2014 03:56:43 PM CET
 -Patches Needed:         0
 -Security:               0
 -3rd Party Packages:     0
IPv4 Address:             ens3 192.168.1.1
Total/Free/+Cache Memory: 983/95/383 MB (38% Free)
Hard Disk:                /dev/sda 10 GB</pre></div></div></div><p>
   In case the output shows a <code class="literal">tainted</code> kernel status, see
   <a class="xref" href="#sec.admsupport.kernel" title="33.6. Support of Kernel Modules">Section 33.6, “Support of Kernel Modules”</a> for more details.
  </p></div><div class="sect1 " id="sec.admsupport.supportconfig"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.supportconfig"><span class="number">33.2 </span><span class="name">Collecting System Information with Supportconfig</span> <a title="Permalink" class="permalink" href="#sec.admsupport.supportconfig">#</a></h2></div></div></div><p>
   To create a TAR archive with detailed system information that you can hand
   over to Global Technical Support, use either the
   <code class="command">supportconfig</code> command line tool directly or the YaST
   <span class="guimenu">Support</span> module. The command line tool is provided by the
   package <code class="systemitem">supportutils</code> which is installed by default.
   The YaST <span class="guimenu">Support</span> module is also based on the command
   line tool.
  </p><div class="sect2 " id="sec.admsupport.supportconfig.sr"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.supportconfig.sr"><span class="number">33.2.1 </span><span class="name">Creating a Service Request Number</span> <a title="Permalink" class="permalink" href="#sec.admsupport.supportconfig.sr">#</a></h3></div></div></div><p>
    Supportconfig archives can be generated at any time. However, for
    handing over the supportconfig data to Global Technical Support, you need
    to generate a service request number first. You will need it to upload the
    archive to support.
   </p><p>
    To create a service request, go to
    <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a> and follow the
    instructions on the screen. Write down your 12-digit service request
    number.
   </p><div id="idm139698746150784" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Privacy Statement</h6><p>
     SUSE and Micro Focus treat system reports as confidential data. For
     details about our privacy commitment, see <a class="link" href="https://www.suse.com/company/policies/privacy/" target="_blank">https://www.suse.com/company/policies/privacy/</a>.
    </p></div></div><div class="sect2 " id="sec.admsupport.supportconfig.upload"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.supportconfig.upload"><span class="number">33.2.2 </span><span class="name">Upload Targets</span> <a title="Permalink" class="permalink" href="#sec.admsupport.supportconfig.upload">#</a></h3></div></div></div><p>
    After having created a service request number, you can upload your
    supportconfig archives to Global Technical Support as described in
    <a class="xref" href="#pro.admsupport.submit.yast" title="Submitting Information to Support with YaST">Procedure 33.1, “Submitting Information to Support with YaST”</a> or
    <a class="xref" href="#pro.admsupport.submit.cli" title="Submitting Information to Support from Command Line">Procedure 33.2, “Submitting Information to Support from Command Line”</a>. Use one of the following
    upload targets:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      US customers: <a class="link" href="ftp://ftp.novell.com/incoming" target="_blank">ftp://ftp.novell.com/incoming</a>
     </p></li><li class="listitem "><p>
      EMEA, Europe, the Middle East, and Africa:
      <a class="link" href="ftp://support-ftp.suse.com/in" target="_blank">ftp://support-ftp.suse.com/in</a>
     </p></li></ul></div><p>
    Alternatively, you can manually attach the TAR archive to your service
    request using the service request URL:
    <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>.
   </p></div><div class="sect2 " id="sec.admsupport.yast"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.yast"><span class="number">33.2.3 </span><span class="name">Creating a Supportconfig Archive with YaST</span> <a title="Permalink" class="permalink" href="#sec.admsupport.yast">#</a></h3></div></div></div><p>
    To use YaST to gather your system information, proceed as follows:
    
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start YaST and open the <span class="guimenu">Support</span> module.
     </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/yast2-support-main.png"><img src="images/yast2-support-main.png" width="" /></a></div></div></li><li class="step "><p>
      Click <span class="guimenu">Create report tarball</span>.
     </p></li><li class="step "><p>
      In the next window, select one of the supportconfig options from the
      radio button list. <span class="guimenu">Use Custom (Expert) Settings</span> is
      preselected by default. If you want to test the report function first,
      use <span class="guimenu">Only gather a minimum amount of info</span>. For some
      background information on the other options, refer to the
      <code class="command">supportconfig</code> man page.
     </p><p>
      Proceed with <span class="guimenu">Next</span>.
     </p></li><li class="step " id="step.supportconfig.contact"><p>
      Enter your contact information. It will be written to a file called
      <code class="filename">basic-environment.txt</code> and included in the archive to
      be created.
     </p></li><li class="step " id="step.supportconfig.upload.target"><p>
      If you want to submit the archive to Global Technical Support at the end
      of the information collection process, <span class="guimenu">Upload
      Information</span> is required. YaST automatically proposes an
      upload server. If you want to modify it, refer to
      <a class="xref" href="#sec.admsupport.supportconfig.upload" title="33.2.2. Upload Targets">Section 33.2.2, “Upload Targets”</a> for details of
      which upload servers are available.
     </p><p>
      If you want to submit the archive later on, you can leave the
      <span class="guimenu">Upload Information</span> empty for now.
     </p></li><li class="step "><p>
      Proceed with <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      The information gathering begins.
     </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/yast2-support-conf.png"><img src="images/yast2-support-conf.png" width="" /></a></div></div><p>
      After the process is finished, continue with <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      Review the data collection: Select the <span class="guimenu">File Name</span> of a
      log file to view its contents in YaST. To remove any files you want
      excluded from the TAR archive before submitting it to support, use
      <span class="guimenu">Remove from Data</span>. Continue with
      <span class="guimenu">Next</span>.
     </p></li><li class="step "><p>
      Save the TAR archive. If you started the YaST module as <code class="systemitem">root</code>
      user, by default YaST proposes to save the archive to
      <code class="filename">/var/log</code> (otherwise, to your home directory). The
      file name format is
      <code class="filename">nts_<em class="replaceable ">HOST</em>_<em class="replaceable ">DATE</em>_<em class="replaceable ">TIME</em>.tbz</code>.
     </p></li><li class="step "><p>
      If you want to upload the archive to support directly, make sure
      <span class="guimenu">Upload log files tarball to URL</span> is activated. The
      <span class="guimenu">Upload Target</span> shown here is the one that YaST
      proposes in <a class="xref" href="#step.supportconfig.upload.target" title="Step 5">Step 5</a>. If you
      want to modify the upload target, find detailed information of which
      upload servers are available in
      <a class="xref" href="#sec.admsupport.supportconfig.upload" title="33.2.2. Upload Targets">Section 33.2.2, “Upload Targets”</a>.
     </p></li><li class="step "><p>
      If you want to skip the upload, deactivate <span class="guimenu">Upload log files
      tarball to URL</span>.
     </p></li><li class="step "><p>
      Confirm your changes to close the YaST module.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.admsupport.cli"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.cli"><span class="number">33.2.4 </span><span class="name">Creating a Supportconfig Archive from Command Line</span> <a title="Permalink" class="permalink" href="#sec.admsupport.cli">#</a></h3></div></div></div><p>
    The following procedure shows how to create a supportconfig archive, but
    without submitting it to support directly. For uploading it, you need to
    run the command with certain options as described in
    <a class="xref" href="#pro.admsupport.submit.cli" title="Submitting Information to Support from Command Line">Procedure 33.2, “Submitting Information to Support from Command Line”</a>.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open a shell and become <code class="systemitem">root</code>.
     </p></li><li class="step "><p>
      Run <code class="command">supportconfig</code> without any options. This gathers
      the default system information.
     </p></li><li class="step "><p>
      Wait for the tool to complete the operation.
     </p></li><li class="step "><p>
      The default archive location is <code class="filename">/var/log</code>, with the
      file name format being
      <code class="filename">nts_<em class="replaceable ">HOST</em>_<em class="replaceable ">DATE</em>_<em class="replaceable ">TIME</em>.tbz</code>
     </p></li></ol></div></div></div><div class="sect2 " id="sec.admsupport.options"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.options"><span class="number">33.2.5 </span><span class="name">Common Supportconfig Options</span> <a title="Permalink" class="permalink" href="#sec.admsupport.options">#</a></h3></div></div></div><p>
    The <code class="command">supportconfig</code> utility is usually called without any
    options. Display a list of all options with
    <code class="command">supportconfig</code> <code class="option">-h</code> or refer to the man
    page. The following list gives a brief overview of some common use cases:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746087776"><span class="term ">Reducing the Size of the Information Being Gathered</span></dt><dd><p>
       Use the minimal option (<code class="option">-m</code>):
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -m</pre></div></dd><dt id="idm139698746084464"><span class="term ">Limiting the Information to a Specific Topic</span></dt><dd><p>
       If you have already localized a problem with the default
       <code class="command">supportconfig</code> output and have found that it relates
       to a specific area or feature set only, you should limit the collected
       information to the specific area for the next
       <code class="command">supportconfig</code> run. For example, if you detected
       problems with LVM and want to test a recent change that you did to the
       LVM configuration, it makes sense to gather the minimum supportconfig
       information around LVM only:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -i LVM</pre></div><p>
       For a complete list of feature keywords that you can use for limiting
       the collected information to a specific area, run
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -F</pre></div></dd><dt id="idm139698746078672"><span class="term ">Including Additional Contact Information in the Output:</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -E tux@example.org -N "Tux Penguin" -O "Penguin Inc." ...</pre></div><p>
       (all in one line)
      </p></dd><dt id="idm139698746075744"><span class="term ">Collecting Already Rotated Log Files</span></dt><dd><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -l</pre></div><p>
       This is especially useful in high logging environments or after a kernel
       crash when syslog rotates the log files after a reboot.
      </p></dd></dl></div></div></div><div class="sect1 " id="sec.admsupport.submit"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.submit"><span class="number">33.3 </span><span class="name">Submitting Information to Global Technical Support</span> <a title="Permalink" class="permalink" href="#sec.admsupport.submit">#</a></h2></div></div></div><p>
   Use the YaST <span class="guimenu">Support</span> module or the
   <code class="command">supportconfig</code> command line utility to submit system
   information to the Global Technical Support. When you experience a server
   issue and want the support's assistance, you will need to open a service
   request first. For details, see
   <a class="xref" href="#sec.admsupport.supportconfig.sr" title="33.2.1. Creating a Service Request Number">Section 33.2.1, “Creating a Service Request Number”</a>.
  </p><p>
   The following examples use <em class="replaceable ">12345678901</em> as a
   placeholder for your service request number. Replace
   <em class="replaceable ">12345678901</em> with the service request number you
   created in <a class="xref" href="#sec.admsupport.supportconfig.sr" title="33.2.1. Creating a Service Request Number">Section 33.2.1, “Creating a Service Request Number”</a>.
  </p><div class="procedure " id="pro.admsupport.submit.yast"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.1: </span><span class="name">Submitting Information to Support with YaST </span><a title="Permalink" class="permalink" href="#pro.admsupport.submit.yast">#</a></h6></div><div class="procedure-contents"><p>
    The following procedure assumes that you have already created a
    supportconfig archive, but have not uploaded it yet. Make sure to have
    included your contact information in the archive as described in
    <a class="xref" href="#sec.admsupport.yast" title="33.2.3. Creating a Supportconfig Archive with YaST">Section 33.2.3, “Creating a Supportconfig Archive with YaST”</a>,
    <a class="xref" href="#step.supportconfig.contact" title="Step 4">Step 4</a>.
    For instructions on how to generate and submit a supportconfig archive in
    one go, see <a class="xref" href="#sec.admsupport.yast" title="33.2.3. Creating a Supportconfig Archive with YaST">Section 33.2.3, “Creating a Supportconfig Archive with YaST”</a>.
   </p><ol class="procedure" type="1"><li class="step "><p>
     Start YaST and open the <span class="guimenu">Support</span> module.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Upload</span>.
    </p></li><li class="step "><p>
     In <span class="guimenu">Package with log files</span> specify the path to the
     existing supportconfig archive or <span class="guimenu">Browse</span> for it.
    </p></li><li class="step " id="step.supportcfg.submit.upltarget"><p>
     YaST automatically proposes an upload server. If you want to modify it,
     refer to <a class="xref" href="#sec.admsupport.supportconfig.upload" title="33.2.2. Upload Targets">Section 33.2.2, “Upload Targets”</a> for details
     of which upload servers are available.
    </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/yast2-support-conf-upload.png"><img src="images/yast2-support-conf-upload.png" width="" /></a></div></div><p>
     
     Proceed with <span class="guimenu">Next</span>.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Finish</span>.
    </p></li></ol></div></div><div class="procedure " id="pro.admsupport.submit.cli"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.2: </span><span class="name">Submitting Information to Support from Command Line </span><a title="Permalink" class="permalink" href="#pro.admsupport.submit.cli">#</a></h6></div><div class="procedure-contents"><p>
    The following procedure assumes that you have already created a
    supportconfig archive, but have not uploaded it yet. For instructions on
    how to generate and submit a supportconfig archive in one go, see
    <a class="xref" href="#sec.admsupport.yast" title="33.2.3. Creating a Supportconfig Archive with YaST">Section 33.2.3, “Creating a Supportconfig Archive with YaST”</a>.
   </p><ol class="procedure" type="1"><li class="step "><p>
     Servers with Internet connectivity:
    </p><ol type="a" class="substeps "><li class="step "><p>
       To use the default upload target, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -ur <em class="replaceable ">12345678901</em></pre></div></li><li class="step "><p>
       For the secure upload target, use the following:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -ar <em class="replaceable ">12345678901</em></pre></div></li></ol></li><li class="step "><p>
     Servers <span class="emphasis"><em>without</em></span> Internet connectivity
    </p><ol type="a" class="substeps "><li class="step "><p>
       Run the following:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -r <em class="replaceable ">12345678901</em></pre></div></li><li class="step "><p>
       Manually upload the
       <code class="filename">/var/log/nts_<em class="replaceable ">SR12345678901</em>*tbz</code>
       archive to one of our FTP servers. Which one to use depends on your
       location in the world. For an overview, see
       <a class="xref" href="#sec.admsupport.supportconfig.upload" title="33.2.2. Upload Targets">Section 33.2.2, “Upload Targets”</a>.
      </p></li></ol></li><li class="step "><p>
     After the TAR archive arrives in the incoming directory of our FTP server,
     it becomes automatically attached to your service request.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.admsupport.sca"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.sca"><span class="number">33.4 </span><span class="name">Analyzing System Information</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca">#</a></h2></div></div></div><p>
   System reports created with <code class="command">supportconfig</code> can be analyzed
   for known issues to help resolve problems faster. For this purpose,
   <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> provides both an appliance and a command line tool for
   <code class="literal">Supportconfig Analysis</code> (SCA). The SCA appliance is a
   server-side tool which is non-interactive. The SCA tool
   (<code class="command">scatool</code>) runs on the client-side and is executed from
   command line. Both tools analyze supportconfig archives from affected
   servers. The initial server analysis takes place on the SCA appliance or the
   workstation on which scatool is running. No analysis cycles happen on the
   production server.
  </p><p>
   Both the appliance and the command line tool additionally need
   product-specific patterns that enable them to analyze the supportconfig
   output for the associated products. Each pattern is a script that parses and
   evaluates a supportconfig archive for one known issue. The patterns are
   available as RPM packages.
  </p><p>
   For example, if you want to analyze supportconfig archives that have been
   generated on a SUSE Linux Enterprise 11 machine, you need to install the package
   <code class="systemitem">sca-patterns-sle11</code> together with
   the SCA tool (or on the machine that you want to use as the SCA appliance
   server). To analyze supportconfig archives generated on a SUSE Linux Enterprise 10 machine,
   you need the package
   <code class="systemitem">sca-patterns-sle10</code>.
  </p><p>
   You can also develop your own patterns as briefly described in
   <a class="xref" href="#sec.admsupport.sca.patterns" title="33.4.3. Developing Custom Analysis Patterns">Section 33.4.3, “Developing Custom Analysis Patterns”</a>.
  </p><div class="sect2 " id="sec.admsupport.sca.tool"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.sca.tool"><span class="number">33.4.1 </span><span class="name">SCA Command Line Tool</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.tool">#</a></h3></div></div></div><p>
    The SCA command line tool lets you analyze a local machine using both
    <code class="command">supportconfig</code> and the analysis patterns for the specific
    product that is installed on the local machine. The tool creates an HTML
    report showing its analysis results. For an example, see
    <a class="xref" href="#fig.scatool.html" title="HTML Report Generated by SCA Tool">Figure 33.1, “HTML Report Generated by SCA Tool”</a>.
   </p><div class="figure" id="fig.scatool.html"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/sca_tool_report_html.png"><img src="images/sca_tool_report_html.png" width="" alt="HTML Report Generated by SCA Tool" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 33.1: </span><span class="name">HTML Report Generated by SCA Tool </span><a title="Permalink" class="permalink" href="#fig.scatool.html">#</a></h6></div></div><p>
    The <code class="command">scatool</code> command is provided by the
    <code class="systemitem">sca-server-report</code> package. It is
    not installed by default. Additionally, you need the
    <code class="systemitem">sca-patterns-base</code> package and any
    of the product-specific
    <code class="systemitem">sca-patterns-*</code> packages that
    matches the product installed on the machine where you want to run the
    <code class="command">scatool</code> command.
   </p><p>
    Execute the <code class="command">scatool</code> command either as <code class="systemitem">root</code> user or
    with <code class="command">sudo</code>. When calling the SCA tool, you can either
    analyze an existing <code class="command">supportconfig</code> TAR archive or you can
    let it generate and analyze a new archive in one go. The tool also provides
    an interactive console (with tab completion) and the possibility to run
    <code class="command">supportconfig</code> on an external machine and to execute the
    subsequent analysis on the local machine.
   </p><p>
    Find some example commands below:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698746007696"><span class="term "><code class="command">sudo scatool</code><code class="option">-s</code>
     </span></dt><dd><p>
       Calls <code class="command">supportconfig</code> and generates a new supportconfig
       archive on the local machine. Analyzes the archive for known issues by
       applying the SCA analysis patterns that match the installed product.
       Displays the path to the HTML report that is generated from the results
       of the analysis. It is usually written to the same directory where the
       supportconfig archive can be found.
      </p></dd><dt id="idm139698746004496"><span class="term "><code class="command">sudo scatool </code><code class="option">-s</code> <code class="option">-o</code> <em class="replaceable ">/opt/sca/reports/</em> 
     </span></dt><dd><p>
       Same as <code class="command">sudo scatool</code> <code class="option">-s</code>, only that
       the HTML report is written to the path specified with
       <code class="option">-o</code>.
      </p></dd><dt id="idm139698745999824"><span class="term "><code class="command">sudo scatool </code><code class="option">-a</code> <em class="replaceable ">PATH_TO_TARBALL_OR_DIR</em> 
     </span></dt><dd><p>
       Analyzes the specified supportconfig archive file (or the specified
       directory to where the supportconfig archive has been extracted). The
       generated HTML report is saved in the same location as the supportconfig
       archive or directory.
      </p></dd><dt id="idm139698745996752"><span class="term "><code class="command">sudo scatool </code><code class="option">-a</code> <em class="replaceable ">SLES_SERVER.COMPANY.COM</em> 
     </span></dt><dd><p>
       Establishes an SSH connection to an external server
       <em class="replaceable ">SLES_SERVER.COMPANY.COM</em> and runs
       <code class="command">supportconfig</code> on the server. The supportconfig
       archive is then copied back to the local machine and is analyzed there.
       The generated HTML report is saved to the default
       <code class="filename">/var/log</code> directory. (Only the supportconfig archive
       is created on <em class="replaceable ">SLES_SERVER.COMPANY.COM</em>).
      </p></dd><dt id="idm139698745991888"><span class="term "><code class="command">sudo scatool</code><code class="option">-c</code>
     </span></dt><dd><p>
       Starts the interactive console for <code class="command">scatool</code>. Press
       <span class="keycap">→|</span> twice to see the available commands.
      </p></dd></dl></div><p>
    For further options and information, run <code class="command">sudo scatool -h</code>
    or see the <code class="command">scatool</code> man page.
   </p></div><div class="sect2 " id="sec.admsupport.sca.appliance"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.sca.appliance"><span class="number">33.4.2 </span><span class="name">SCA Appliance</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance">#</a></h3></div></div></div><p>
    If you decide to use the SCA appliance for analyzing the supportconfig
    archives, you need to configure a dedicated server (or virtual machine) as
    the SCA appliance server. The SCA appliance server can then be used to
    analyze supportconfig archives from all machines in your enterprise running
    SUSE Linux Enterprise Server or SUSE Linux Enterprise Desktop. You can simply upload supportconfig archives to the
    appliance server for analysis. Interaction is not required. In a MariaDB
    database, the SCA appliance keeps track of all supportconfig archives that
    have been analyzed . You can read the SCA reports directly from the
    appliance Web interface. Alternatively, you can have the appliance send the
    HTML report to any administrative user via e-mail. For details, see
    <a class="xref" href="#sec.admsupport.sca.appliance.config.mail" title="33.4.2.5.4. Sending SCA Reports via E-Mail">Section 33.4.2.5.4, “Sending SCA Reports via E-Mail”</a>.
   </p><div class="sect3 " id="sec.admsupport.sca.appliance.installquick"><div class="titlepage"><div><div><h4 class="title" id="sec.admsupport.sca.appliance.installquick"><span class="number">33.4.2.1 </span><span class="name">Installation Quick Start</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.installquick">#</a></h4></div></div></div><p>
     To install and set up the SCA appliance in a very fast way from the
     command line, follow the instructions here. The procedure is intended for
     experts and focuses on the bare installation and setup commands. For more
     information, refer to the more detailed description in
     <a class="xref" href="#sec.admsupport.sca.appliance.pre" title="33.4.2.2. Prerequisites">Section 33.4.2.2, “Prerequisites”</a> to
     <a class="xref" href="#sec.admsupport.sca.appliance.install" title="33.4.2.3. Installation and Basic Setup">Section 33.4.2.3, “Installation and Basic Setup”</a>.
    </p><div class="itemizedlist "><div class="itemizedlist-title-wrap"><h6 class="itemizedlist-title"><span class="name">Prerequisites </span><a title="Permalink" class="permalink" href="#idm139698745980576">#</a></h6></div><ul class="itemizedlist"><li class="listitem "><p>
       Web and LAMP Pattern
      </p></li><li class="listitem "><p>
       Web and Scripting Module (you must register the machine to be able to
       select this module).
      </p></li></ul></div><div id="idm139698745977232" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: <code class="systemitem">root</code> Privileges Required</h6><p>
      All commands in the following procedure must be run as <code class="systemitem">root</code>.
     </p></div><div class="procedure " id="idm139698745974560"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.3: </span><span class="name">Installation Using Anonymous FTP for Upload </span><a title="Permalink" class="permalink" href="#idm139698745974560">#</a></h6></div><div class="procedure-contents"><p>
      After the appliance is set up and running, no more manual interaction is
      required. This way of setting up the appliance is therefore ideal for
      using cron jobs to create and upload supportconfig archives.
     </p><ol class="procedure" type="1"><li class="step "><p>
       On the machine on which to install the appliance, log in to a console
       and execute the following commands:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install sca-appliance-* sca-patterns-* vsftpd
systemctl enable apache2
systemctl start apache2
systemctl enable vsftpd
systemctl start vsftpd
yast ftp-server</pre></div></li><li class="step "><p>
       In YaST FTP Server, select <span class="guimenu">Authentication</span> › <span class="guimenu">Enable Upload</span> › <span class="guimenu">Anonymous Can Upload</span> › <span class="guimenu">Finish</span> › <span class="guimenu">Yes</span> to <span class="guimenu">Create
       /srv/ftp/upload</span>.
      </p></li><li class="step "><p>
       Execute the following commands:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl enable mysql
systemctl start mysql
mysql_secure_installation
setup-sca -f</pre></div><p>
       The mysql_secure_installation will create a MariaDB <code class="systemitem">root</code> password.
      </p></li></ol></div></div><div class="procedure " id="idm139698745963568"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.4: </span><span class="name">Installation Using SCP/tmp for Upload </span><a title="Permalink" class="permalink" href="#idm139698745963568">#</a></h6></div><div class="procedure-contents"><p>
      This way of setting up the appliance requires manual interaction when
      typing the SSH password.
     </p><ol class="procedure" type="1"><li class="step "><p>
       On the machine on which to install the appliance, log in to a console.
      </p></li><li class="step "><p>
       Execute the following commands:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install sca-appliance-* sca-patterns-*
systemctl enable apache2
systemctl start apache2
sudo systemctl enable mysql
systemctl start mysql
mysql_secure_installation
setup-sca</pre></div></li></ol></div></div></div><div class="sect3 " id="sec.admsupport.sca.appliance.pre"><div class="titlepage"><div><div><h4 class="title" id="sec.admsupport.sca.appliance.pre"><span class="number">33.4.2.2 </span><span class="name">Prerequisites</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.pre">#</a></h4></div></div></div><p>
     To run an SCA appliance server, you need the following prerequisites:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       All <code class="systemitem">sca-appliance-*</code> packages.
      </p></li><li class="listitem "><p>
       The <code class="systemitem">sca-patterns-base</code> package.
       Additionally, any of the product-specific
       <code class="systemitem">sca-patterns-*</code> for the type of
       supportconfig archives that you want to analyze with the appliance.
      </p></li><li class="listitem "><p>
       Apache
      </p></li><li class="listitem "><p>
       PHP
      </p></li><li class="listitem "><p>
       MariaDB
      </p></li><li class="listitem "><p>
       anonymous FTP server (optional)
      </p></li></ul></div></div><div class="sect3 " id="sec.admsupport.sca.appliance.install"><div class="titlepage"><div><div><h4 class="title" id="sec.admsupport.sca.appliance.install"><span class="number">33.4.2.3 </span><span class="name">Installation and Basic Setup</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.install">#</a></h4></div></div></div><p>
     As listed in <a class="xref" href="#sec.admsupport.sca.appliance.pre" title="33.4.2.2. Prerequisites">Section 33.4.2.2, “Prerequisites”</a>, the SCA
     appliance has several dependencies on other packages. Therefore you need
     do so some preparations before installing and setting up the SCA appliance
     server:
    </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       For Apache and MariaDB, install the <code class="systemitem">Web</code> and
       <code class="systemitem">LAMP</code> installation patterns.
      </p></li><li class="step "><p>
       Set up Apache, MariaDB, and optionally an anonymous FTP server.
       
      </p></li><li class="step "><p>
       Configure Apache and MariaDB to start at boot time:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl enable apache2 mysql</pre></div></li><li class="step "><p>
       Start both services:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl start apache2 mysql</pre></div></li></ol></div></div><p>
     Now you can install the SCA appliance and set it up as described in
     <a class="xref" href="#pro.sca.appl.install" title="Installing and Configuring the SCA Appliance">Procedure 33.5, “Installing and Configuring the SCA Appliance”</a>.
    </p><div class="procedure " id="pro.sca.appl.install"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.5: </span><span class="name">Installing and Configuring the SCA Appliance </span><a title="Permalink" class="permalink" href="#pro.sca.appl.install">#</a></h6></div><div class="procedure-contents"><p>
      After installing the packages, use the <code class="command">setup-sca</code>
      script for the basic configuration of the MariaDB administration and
      report database that is used by the SCA appliance.
     </p><p>
      It can be used to configure the following options you have for uploading
      the supportconfig archives from your machines to the SCA appliance:
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        <code class="command">scp</code>
       </p></li><li class="listitem "><p>
        anonymous FTP server
       </p></li></ul></div><ol class="procedure" type="1"><li class="step "><p>
       Install the appliance and the SCA base-pattern library:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install sca-appliance-* sca-patterns-base</pre></div></li><li class="step "><p>
       Additionally, install the pattern packages for the types of
       supportconfig archives you want to analyze. For example, if you have
       SUSE Linux Enterprise Server 11 and SUSE Linux Enterprise Server 12 servers in your environment, install both the
       <code class="systemitem">sca-patterns-sle11</code> and
       <code class="systemitem">sca-patterns-sle12</code> packages.
      </p><p>
       To install all available patterns:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper install sca-patterns-*</pre></div></li><li class="step "><p>
       For basic setup of the SCA appliance, use the
       <code class="command">setup-sca</code> script. How to call it depends on how you
       want to upload the supportconfig archives to the SCA appliance server:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         If you have configured an anonymous FTP server that uses the
         <code class="filename">/srv/ftp/upload</code> directory, execute the setup
         script with the <code class="option">-f</code> option and follow the instructions
         on the screen:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> setup-sca -f</pre></div><div id="idm139698745921264" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: FTP Server Using Another Directory</h6><p>
          If your FTP server uses another directory than
          <code class="filename">/srv/ftp/upload</code>, adjust the following
          configuration files first to make them point to the correct
          directory: <code class="filename">/etc/sca/sdagent.conf</code> and
          <code class="filename">/etc/sca/sdbroker.conf</code> .
         </p></div></li><li class="listitem "><p>
         If you want to upload supportconfig files to the
         <code class="filename">/tmp</code> directory of the SCA appliance server via
         <code class="command">scp</code>, call the setup script without any parameters
         and follow the instructions on the screen:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> setup-sca</pre></div></li></ul></div><p>
       The setup script runs a few checks regarding its requirements and
       configures the needed components. It will prompt you for two passwords:
       the MySQL <code class="systemitem">root</code> password of the MariaDB that you have set up, and a
       Web user password with which to log in to the Web interface of the SCA
       appliance.
      </p></li><li class="step "><p>
       Enter the existing MariaDB <code class="systemitem">root</code> password. It will allow the SCA
       appliance to connect to the MariaDB.
      </p></li><li class="step "><p>
       Define a password for the Web user. It will be written to
       <code class="filename">/srv/www/htdocs/sca/web-config.php</code> and will be set
       as the password for the user
       <code class="systemitem">scdiag</code>. Both user name and
       password can be changed at any time later, see
       <a class="xref" href="#sec.admsupport.sca.appliance.config.passwd" title="33.4.2.5.1. Password for the Web Interface">Section 33.4.2.5.1, “Password for the Web Interface”</a>.
      </p></li></ol></div></div><p>
     After successful installation and setup, the SCA appliance is ready for
     use, see <a class="xref" href="#sec.admsupport.sca.appliance.use" title="33.4.2.4. Using the SCA Appliance">Section 33.4.2.4, “Using the SCA Appliance”</a>. However, you
     should modify some options such as changing the password for the Web
     interface, changing the source for the SCA pattern updates, enabling
     archiving mode or configuring e-mail notifications. For details on that,
     see <a class="xref" href="#sec.admsupport.sca.appliance.config" title="33.4.2.5. Customizing the SCA Appliance">Section 33.4.2.5, “Customizing the SCA Appliance”</a>.
    </p><div id="idm139698745906848" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Data Protection</h6><p>
      As the reports on the SCA appliance server contain security-relevant
      information of the machines whose supportconfig archives have been
      analyzed, make sure to protect the data on the SCA appliance server
      against unauthorized access.
     </p></div></div><div class="sect3 " id="sec.admsupport.sca.appliance.use"><div class="titlepage"><div><div><h4 class="title" id="sec.admsupport.sca.appliance.use"><span class="number">33.4.2.4 </span><span class="name">Using the SCA Appliance</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.use">#</a></h4></div></div></div><p>
     You can upload existing supportconfig archives to the SCA appliance
     manually or create new supportconfig archives and upload them to the SCA
     appliance in one step. Uploading can be done via FTP or SCP. For both, you
     need to know the URL where the SCA appliance can be reached. For upload
     via FTP, an FTP server needs to be configured for the SCA appliance, see
     <a class="xref" href="#pro.sca.appl.install" title="Installing and Configuring the SCA Appliance">Procedure 33.5, “Installing and Configuring the SCA Appliance”</a>.
    </p><div class="sect4 " id="sec.admsupport.sca.appliance.use.upload"><div class="titlepage"><div><div><h5 class="title" id="sec.admsupport.sca.appliance.use.upload"><span class="number">33.4.2.4.1 </span><span class="name">Uploading Supportconfig Archives to the SCA Appliance</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.use.upload">#</a></h5></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
        For creating a supportconfig archive and uploading it via (anonymous)
        FTP:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -U “ftp://<em class="replaceable ">SCA-APPLIANCE.COMPANY.COM</em>/upload”</pre></div></li><li class="listitem "><p>
        For creating a supportconfig archive and uploading it via SCP:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> supportconfig -U “scp://<em class="replaceable ">SCA-APPLIANCE.COMPANY.COM</em>/tmp”</pre></div><p>
        You will be prompted for the <code class="systemitem">root</code> user password of the server
        running the SCA appliance.
       </p></li><li class="listitem "><p>
        If you want to manually upload one or multiple archives, copy the
        existing archive files (usually located
        at<code class="filename">/var/log/nts_*.tbz</code>) to the SCA appliance. As
        target, use either the appliance server's <code class="filename">/tmp</code>
        directory or the <code class="filename">/srv/ftp/upload</code> directory (if FTP
        is configured for the SCA appliance server).
       </p></li></ul></div></div><div class="sect4 " id="sec.admsupport.sca.appliance.use.view"><div class="titlepage"><div><div><h5 class="title" id="sec.admsupport.sca.appliance.use.view"><span class="number">33.4.2.4.2 </span><span class="name">Viewing SCA Reports</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.use.view">#</a></h5></div></div></div><p>
      SCA reports can be viewed from any machine that has a browser installed
      and can access the report index page of the SCA appliance.
     </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Start a Web browser and make sure that JavaScript and cookies are
        enabled.
       </p></li><li class="step "><p>
        As a URL, enter the report index page of the SCA appliance.
       </p><div class="verbatim-wrap"><pre class="screen">https://sca-appliance.company.com/sca</pre></div><p>
        If in doubt, ask your system administrator.
       </p></li><li class="step "><p>
        You will be prompted for a user name and a password to log in.
       </p><div class="figure" id="fig.sca.appl.html"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/sca_appl_report_html.png"><img src="images/sca_appl_report_html.png" width="" alt="HTML Report Generated by SCA Appliance" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 33.2: </span><span class="name">HTML Report Generated by SCA Appliance </span><a title="Permalink" class="permalink" href="#fig.sca.appl.html">#</a></h6></div></div></li><li class="step "><p>
        After logging in, click the date of the report you want to read.
       </p></li><li class="step "><p>
        Click the <span class="guimenu">Basic Health</span> category first to expand it.
       </p></li><li class="step "><p>
        In the <span class="guimenu">Message</span> column, click an individual entry.

        This opens the corresponding article in the SUSE Knowledgebase. Read
        the proposed solution and follow the instructions.
       </p></li><li class="step "><p>
        If the <span class="guimenu">Solutions</span> column of the
        <span class="guimenu">Supportconfig Analysis Report</span> shows any additional
        entries, click them. Read the proposed solution and follow the
        instructions.
       </p></li><li class="step "><p>
        Check the SUSE Knowledgebase
        (<a class="link" href="http://www.suse.com/support/kb/" target="_blank">http://www.suse.com/support/kb/</a>) for results that
        directly relate to the problem identified by SCA. Work at resolving
        them.
       </p></li><li class="step "><p>
        Check for results that can be addressed proactively to avoid future
        problems.
       </p></li></ol></div></div></div></div><div class="sect3 " id="sec.admsupport.sca.appliance.config"><div class="titlepage"><div><div><h4 class="title" id="sec.admsupport.sca.appliance.config"><span class="number">33.4.2.5 </span><span class="name">Customizing the SCA Appliance</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.config">#</a></h4></div></div></div><p>
     The following sections show how to change the password for the Web
     interface, how to change the source for the SCA pattern updates, how to
     enable archiving mode, and how to configure e-mail notifications.
    </p><div class="sect4 " id="sec.admsupport.sca.appliance.config.passwd"><div class="titlepage"><div><div><h5 class="title" id="sec.admsupport.sca.appliance.config.passwd"><span class="number">33.4.2.5.1 </span><span class="name">Password for the Web Interface</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.config.passwd">#</a></h5></div></div></div><p>
      The SCA Appliance Web interface requires a user name and password for
      logging in. The default user name is <code class="literal">scdiag</code> and the
      default password is <code class="literal">linux</code> (if not specified otherwise,
      see <a class="xref" href="#pro.sca.appl.install" title="Installing and Configuring the SCA Appliance">Procedure 33.5, “Installing and Configuring the SCA Appliance”</a>). Change the default password
      to a secure password at the earliest possibility. You can also modify the
      user name.
     </p><div class="procedure " id="pro.sca.passwd.change"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.6: </span><span class="name">Changing User Name or Password for the Web Interface </span><a title="Permalink" class="permalink" href="#pro.sca.passwd.change">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step "><p>
        Open <code class="filename">/srv/www/htdocs/sca/web-config.php</code> in an
        editor.
       </p></li><li class="step "><p>
        Change the values of <code class="literal">$username</code> and
        <code class="literal">$password</code> as desired.
       </p></li><li class="step "><p>
        Save the file and exit.
       </p></li></ol></div></div></div><div class="sect4 " id="sec.admsupport.sca.appliance.config.upd"><div class="titlepage"><div><div><h5 class="title" id="sec.admsupport.sca.appliance.config.upd"><span class="number">33.4.2.5.2 </span><span class="name">Updates of SCA Patterns</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.config.upd">#</a></h5></div></div></div><p>
      By default, all <code class="systemitem">sca-patterns-*</code>
      packages are updated regularly by a <code class="systemitem">root</code> cron job that executes the
      <code class="filename">sdagent-patterns</code> script nightly, which in turn runs
      <code class="command">zypper update sca-patterns-*</code>. A regular system update
      will update all SCA appliance and pattern packages. To update the SCA
      appliance and patterns manually, run:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper update sca-*</pre></div><p>
      The updates are installed from the SUSE Linux Enterprise <span class="productnumber"><span class="phrase">15</span></span> update
      repository by default. You can change the source for the updates to an
      SMT server, if desired. When <code class="filename">sdagent-patterns</code> runs
      <code class="command">zypper update sca-patterns-*</code>, it gets the updates from
      the currently configured update channel. If that channel is located on an
      SMT server, the packages will be pulled from there.
     </p><div class="procedure " id="idm139698745850880"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.7: </span><span class="name">Disabling Automatic Updates of SCA Patterns </span><a title="Permalink" class="permalink" href="#idm139698745850880">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step "><p>

        Open <code class="filename">/etc/sca/sdagent-patterns.conf</code> in an editor.
       </p></li><li class="step "><p>
        Change the entry
       </p><div class="verbatim-wrap"><pre class="screen">UPDATE_FROM_PATTERN_REPO=1</pre></div><p>
        to
       </p><div class="verbatim-wrap"><pre class="screen">UPDATE_FROM_PATTERN_REPO=0</pre></div></li><li class="step "><p>
        Save the file and exit. The machine does not require any restart to
        apply the change.
       </p></li></ol></div></div></div><div class="sect4 " id="sec.admsupport.sca.appliance.config.archive"><div class="titlepage"><div><div><h5 class="title" id="sec.admsupport.sca.appliance.config.archive"><span class="number">33.4.2.5.3 </span><span class="name">Archiving Mode</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.config.archive">#</a></h5></div></div></div><p>
      All supportconfig archives are deleted from the SCA appliance after they
      have been analyzed and their results have been stored in the MariaDB
      database. However, for troubleshooting purposes it can be useful to keep
      copies of supportconfig archives from a machine. By default, archiving
      mode is disabled.
     </p><div class="procedure " id="idm139698745841408"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.8: </span><span class="name">Enabling Archiving Mode in the SCA Appliance </span><a title="Permalink" class="permalink" href="#idm139698745841408">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step "><p>
        Open <code class="filename">/etc/sca/sdagent.conf</code> in an editor.
       </p></li><li class="step "><p>
        Change the entry
       </p><div class="verbatim-wrap"><pre class="screen">ARCHIVE_MODE=0</pre></div><p>
        to
       </p><div class="verbatim-wrap"><pre class="screen">ARCHIVE_MODE=1</pre></div></li><li class="step "><p>
        Save the file and exit. The machine does not require any restart to
        apply the change.
       </p></li></ol></div></div><p>
      After having enabled archive mode, the SCA appliance will save the
      supportconfig files to the <code class="filename">/var/log/archives/saved</code>
      directory, instead of deleting them.
     </p></div><div class="sect4 " id="sec.admsupport.sca.appliance.config.mail"><div class="titlepage"><div><div><h5 class="title" id="sec.admsupport.sca.appliance.config.mail"><span class="number">33.4.2.5.4 </span><span class="name">Sending SCA Reports via E-Mail</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.config.mail">#</a></h5></div></div></div><p>
      The SCA appliance can e-mail a report HTML file for each supportconfig
      analyzed. This feature is disabled by default. When enabling it, you can
      define a list of e-mail addresses to which the reports should be sent,
      and define a level of status messages that trigger the sending of reports
      (<code class="literal">STATUS_NOTIFY_LEVEL</code>).
     </p><div class="variablelist " id="vl.sca.mails.notify.level"><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Possible Values for <code class="literal">STATUS_NOTIFY_LEVEL</code> </span><a title="Permalink" class="permalink" href="#vl.sca.mails.notify.level">#</a></h6></div><dl class="variablelist"><dt id="idm139698745829104"><span class="term ">$STATUS_OFF</span></dt><dd><p>
         Deactivate sending of HTML reports.
        </p></dd><dt id="idm139698745827280"><span class="term ">$STATUS_CRITICAL</span></dt><dd><p>
         Send only SCA reports that include a CRITICAL.
        </p></dd><dt id="idm139698745825440"><span class="term ">$STATUS_WARNING </span></dt><dd><p>
         Send only SCA reports that include a WARNING or CRITICAL.
        </p></dd><dt id="idm139698745823584"><span class="term ">$STATUS_RECOMMEND</span></dt><dd><p>
         Send only SCA reports that include a RECOMMEND, WARNING or CRITICAL.
        </p></dd><dt id="idm139698745821728"><span class="term ">$STATUS_SUCCESS</span></dt><dd><p>
         Send SCA reports that include a SUCCESS, RECOMMEND, WARNING or
         CRITICAL.
        </p></dd></dl></div><div class="procedure " id="idm139698745819696"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.9: </span><span class="name">Configuring E-Mail Notifications for SCA Reports </span><a title="Permalink" class="permalink" href="#idm139698745819696">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
        Log in as <code class="systemitem">root</code> user at the system console of the SCA appliance
        server.
       </p></li><li class="step "><p>
        Open <code class="filename">/etc/sca/sdagent.conf</code> in an editor.
       </p></li><li class="step "><p>
        Search for the entry <code class="systemitem">STATUS_NOTIFY_LEVEL</code>. By
        default, it is set to <code class="literal">$STATUS_OFF</code> (e-mail
        notifications are disabled).
       </p></li><li class="step "><p>
        To enable e-mail notifications, change <code class="literal">$STATUS_OFF</code>
        to the level of status messages that you want to have e-mail reports
        for, for example:
       </p><div class="verbatim-wrap"><pre class="screen">STATUS_NOTIFY_LEVEL=$STATUS_SUCCESS</pre></div><p>
        For details, see <a class="xref" href="#vl.sca.mails.notify.level" title="Possible Values for STATUS_NOTIFY_LEVEL">Possible Values for <code class="literal">STATUS_NOTIFY_LEVEL</code></a>.
       </p></li><li class="step "><p>
        To define the list of recipients to which the reports should be sent:
       </p><ol type="a" class="substeps "><li class="step "><p>
          Search for the entry <code class="literal">EMAIL_REPORT='root'</code>.
         </p></li><li class="step "><p>
          Replace <code class="literal">root</code> with a list of e-mail addresses to
          which SCA reports should be sent. The e-mail addresses must be
          separated by spaces. For example:
         </p><div class="verbatim-wrap"><pre class="screen">EMAIL_REPORT='tux@my.company.com wilber@your.company.com'</pre></div></li></ol></li><li class="step "><p>
        Save the file and exit. The machine does not require any restart to
        apply the changes. All future SCA reports will be e-mailed to the
        specified addresses.
       </p></li></ol></div></div></div></div><div class="sect3 " id="sec.admsupport.sca.appliance.backup"><div class="titlepage"><div><div><h4 class="title" id="sec.admsupport.sca.appliance.backup"><span class="number">33.4.2.6 </span><span class="name">Backing Up and Restoring the Database</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.appliance.backup">#</a></h4></div></div></div><p>
     To back up and restore the MariaDB database that stores the SCA reports,
     use the <code class="command">scadb</code> command as described below.
    </p><div class="procedure " id="idm139698745802336"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.10: </span><span class="name">Backing Up the Database </span><a title="Permalink" class="permalink" href="#idm139698745802336">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
       Log in as <code class="systemitem">root</code> user at the system console of the server running
       the SCA appliance.
      </p></li><li class="step "><p>
       Put the appliance into maintenance mode by executing:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>scadb maint</pre></div></li><li class="step "><p>
       Start the backup with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>scadb backup</pre></div><p>
       The data is saved to a TAR archive:
       <code class="filename">sca-backup-*sql.gz</code>.
      </p></li><li class="step "><p>
       If you are using the pattern creation database to develop your own
       patterns (see <a class="xref" href="#sec.admsupport.sca.patterns" title="33.4.3. Developing Custom Analysis Patterns">Section 33.4.3, “Developing Custom Analysis Patterns”</a>), back up
       this data, too:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>sdpdb backup</pre></div><p>
       The data is saved to a TAR archive:
       <code class="filename">sdp-backup-*sql.gz</code>.
      </p></li><li class="step "><p>
       Copy the following data to another machine or an external storage
       medium:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
         <code class="filename">sca-backup-*sql.gz</code>
        </p></li><li class="listitem "><p>
         <code class="filename">sdp-backup-*sql.gz</code>
        </p></li><li class="listitem "><p>
         <code class="filename">/usr/lib/sca/patterns/local</code> (only needed if you
         have created custom patterns)
        </p></li></ul></div></li><li class="step "><p>
       Reactivate the SCA appliance with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>scadb reset agents</pre></div></li></ol></div></div><div class="procedure " id="idm139698745783440"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 33.11: </span><span class="name">Restoring the Database </span><a title="Permalink" class="permalink" href="#idm139698745783440">#</a></h6></div><div class="procedure-contents"><p>
      To restore the database from your backup, proceed as follows:
     </p><ol class="procedure" type="1"><li class="step "><p>
       Log in as <code class="systemitem">root</code> user at the system console of the server running
       the SCA appliance.
      </p></li><li class="step "><p>
       Copy the newest <code class="filename">sca-backup-*sql.gz</code> and
       <code class="filename">sdp-backup-*sql.gz</code> TAR archives to the SCA
       appliance server.
      </p></li><li class="step "><p>
       To decompress the files, run:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>gzip -d *-backup-*sql.gz</pre></div></li><li class="step "><p>
       To import the data into the database, execute:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>scadb import sca-backup-*sql</pre></div></li><li class="step "><p>
       If you are using the pattern creation database to create your own
       patterns, also import the following data with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>sdpdb import sdp-backup-*sql</pre></div></li><li class="step "><p>
       If you are using custom patterns, also restore
       <code class="filename">/usr/lib/sca/patterns/local</code> from your backup data.
      </p></li><li class="step "><p>
       Reactivate the SCA appliance with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>scadb reset agents</pre></div></li><li class="step "><p>
       Update the pattern modules in the database with:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>sdagent-patterns -u</pre></div></li></ol></div></div></div></div><div class="sect2 " id="sec.admsupport.sca.patterns"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.sca.patterns"><span class="number">33.4.3 </span><span class="name">Developing Custom Analysis Patterns</span> <a title="Permalink" class="permalink" href="#sec.admsupport.sca.patterns">#</a></h3></div></div></div><p>
    The SCA appliance comes with a complete pattern development environment
    (the SCA Pattern Database) that enables you to develop your own, custom
    patterns. Patterns can be written in any programming language. To make them
    available for the supportconfig analysis process, they need to be saved to
    <code class="filename">/usr/lib/sca/patterns/local</code> and to be made executable.
    Both the SCA appliance and the SCA tool will then run the custom patterns
    against new supportconfig archives as part of the analysis report. For
    detailed instructions on how to create (and test) your own patterns, see
    <a class="link" href="http://www.suse.com/communities/conversations/sca-pattern-development/" target="_blank">http://www.suse.com/communities/conversations/sca-pattern-development/</a>.
   </p></div></div><div class="sect1 " id="sec.admsupport.install"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.install"><span class="number">33.5 </span><span class="name">Gathering Information during the Installation</span> <a title="Permalink" class="permalink" href="#sec.admsupport.install">#</a></h2></div></div></div><p>
   During the installation, <code class="command">supportconfig</code> is not available.
   However, you can collect log files from YaST by using
   <code class="command">save_y2logs</code>. This command will create a
   <code class="filename">.tar.xz</code> archive in the directory
   <code class="filename">/tmp</code>.
  </p><p>
   If issues appear very early during installation, you may be able to gather
   information from the log file created by
   <code class="command">linuxrc</code>. <code class="command">linuxrc</code> is a small command
   that runs before YaST starts. This log file is available at
   <code class="filename">/var/log/linuxrc.log</code>.
  </p><div id="idm139698745757792" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Installation Log Files Not Available in the Installed System</h6><p>
    The log files available during the installation are not available in the
    installed system anymore. Properly save the installation log files while
    the installer is still running.
   </p></div></div><div class="sect1 " id="sec.admsupport.kernel"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.kernel"><span class="number">33.6 </span><span class="name">Support of Kernel Modules</span> <a title="Permalink" class="permalink" href="#sec.admsupport.kernel">#</a></h2></div></div></div><p>
   An important requirement for every enterprise operating system is the level
   of support you receive for your environment. Kernel modules are the most
   relevant connector between hardware (<span class="quote">“<span class="quote">controllers</span>”</span>) and the
   operating system. Every kernel module in SUSE Linux Enterprise has a
   <code class="literal">supported</code> flag that can take three possible values:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <span class="quote">“<span class="quote">yes</span>”</span>, thus <code class="literal">supported</code>
    </p></li><li class="listitem "><p>
     <span class="quote">“<span class="quote">external</span>”</span>, thus <code class="literal">supported</code>
    </p></li><li class="listitem "><p>
     <span class="quote">“<span class="quote"></span>”</span> (empty, not set), thus <code class="literal">unsupported</code>
    </p></li></ul></div><p>
   The following rules apply:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     All modules of a self-recompiled kernel are by default marked as
     unsupported.
    </p></li><li class="listitem "><p>
     Kernel modules supported by SUSE partners and delivered using
     <code class="literal">SUSE SolidDriver Program</code> are marked
     <span class="quote">“<span class="quote">external</span>”</span>.
    </p></li><li class="listitem "><p>
     If the <code class="literal">supported</code> flag is not set, loading this module
     will taint the kernel. Tainted kernels are not supported. Unsupported
     Kernel modules are included in an extra RPM package
     (<code class="systemitem">kernel-<em class="replaceable ">FLAVOR</em>-extra</code>)
     that is only available for SUSE Linux Enterprise Desktop and the SUSE Linux Enterprise Workstation Extension.
     Those kernels will not be loaded by default
     (<em class="replaceable ">FLAVOR</em>=<code class="literal">default</code>|<code class="literal">xen</code>|...).
     In addition, these unsupported modules are not available in the installer,
     and the
     <code class="systemitem">kernel-<em class="replaceable ">FLAVOR</em>-extra</code>
     package is not part of the SUSE Linux Enterprise media.
    </p></li><li class="listitem "><p>
     Kernel modules not provided under a license compatible to the license of
     the Linux kernel will also taint the kernel. For details, see
     <code class="filename">/usr/src/linux/Documentation/sysctl/kernel.txt</code> and
     the state of <code class="filename">/proc/sys/kernel/tainted</code>.
    </p></li></ul></div><div class="sect2 " id="sec.admsupport.kernel.background"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.kernel.background"><span class="number">33.6.1 </span><span class="name">Technical Background</span> <a title="Permalink" class="permalink" href="#sec.admsupport.kernel.background">#</a></h3></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Linux kernel: The value of
      <code class="filename">/proc/sys/kernel/unsupported</code> defaults to
      <code class="literal">2</code> on SUSE Linux Enterprise <span class="productnumber"><span class="phrase">15</span></span> (<code class="literal">do not warn in
      syslog when loading unsupported modules</code>). This default is used
      in the installer and in the installed system. See
      <code class="filename">/usr/src/linux/Documentation/sysctl/kernel.txt</code> for
      more information.
     </p></li><li class="listitem "><p>
      <code class="command">modprobe</code>: The <code class="command">modprobe</code> utility for
      checking module dependencies and loading modules appropriately checks for
      the value of the <code class="literal">supported</code> flag. If the value is
      <span class="quote">“<span class="quote">yes</span>”</span> or <span class="quote">“<span class="quote">external</span>”</span> the module will be loaded,
      otherwise it will not. For information on how to override this behavior,
      see <a class="xref" href="#sec.admsupport.kernel.unsupported" title="33.6.2. Working with Unsupported Modules">Section 33.6.2, “Working with Unsupported Modules”</a>.
     </p><div id="idm139698745725440" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Support</h6><p>
       SUSE does not generally support the removal of storage modules via
       <code class="command">modprobe -r</code>.
      </p></div></li></ul></div></div><div class="sect2 " id="sec.admsupport.kernel.unsupported"><div class="titlepage"><div><div><h3 class="title" id="sec.admsupport.kernel.unsupported"><span class="number">33.6.2 </span><span class="name">Working with Unsupported Modules</span> <a title="Permalink" class="permalink" href="#sec.admsupport.kernel.unsupported">#</a></h3></div></div></div><p>
    While general supportability is important, situations can occur where
    loading an unsupported module is required (for example, for testing or
    debugging purposes, or if your hardware vendor provides a hotfix).
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      To override the default, edit
      <code class="filename">/etc/modprobe.d/10-unsupported-modules.conf</code> and
      change the value of the variable
      <code class="varname">allow_unsupported_modules</code> to <code class="literal">1</code>. If
      an unsupported module is needed in the initrd, do not forget to run
      <code class="command">dracut</code> <code class="option">-f</code> to update the initrd.
     </p><p>
      If you only want to try loading a module once, you can use the
      <code class="option">--allow-unsupported-modules</code> option with
      <code class="command">modprobe</code>. For more information, see the
      <code class="command">modprobe</code> man page.
     </p></li><li class="listitem "><p>
      During installation, unsupported modules may be added through driver
      update disks, and they will be loaded. To enforce loading of unsupported
      modules during boot and afterward, use the kernel command line option
      <code class="option">oem-modules</code>. While installing and initializing the
      <code class="systemitem">suse-module-tools</code> package, the
      kernel flag <code class="literal">TAINT_NO_SUPPORT</code>
      (<code class="filename">/proc/sys/kernel/tainted</code>) will be evaluated. If the
      kernel is already tainted, <code class="literal">allow_unsupported_modules</code>
      will be enabled. This will prevent unsupported modules from failing in
      the system being installed. If no unsupported modules are present during
      installation and the other special kernel command line option
      (<code class="option">oem-modules=1</code>) is not used, the default still is to
      disallow unsupported modules.
     </p></li></ul></div><p>
    Remember that loading and running unsupported modules will make the kernel
    and the whole system unsupported by SUSE.
   </p></div></div><div class="sect1 " id="sec.admsupport.moreinfo"><div class="titlepage"><div><div><h2 class="title" id="sec.admsupport.moreinfo"><span class="number">33.7 </span><span class="name">For More Information</span> <a title="Permalink" class="permalink" href="#sec.admsupport.moreinfo">#</a></h2></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <code class="command">man supportconfig</code>—The
     <code class="command">supportconfig</code> man page.
    </p></li><li class="listitem "><p>
     <code class="command">man supportconfig.conf</code>—The man page of the
     supportconfig configuration file.
    </p></li><li class="listitem "><p>
     <code class="command">man scatool</code>—The <code class="command">scatool</code> man
     page.
    </p></li><li class="listitem "><p>
     <code class="command">man scadb</code>—The <code class="command">scadb</code> man page.
    </p></li><li class="listitem "><p>
     <code class="command">man setup-sca</code>—The <code class="command">setup-sca</code>
     man page.
    </p></li><li class="listitem "><p>
     <a class="link" href="https://mariadb.com/kb/en/" target="_blank">https://mariadb.com/kb/en/</a>—The MariaDB
     documentation.
    </p></li><li class="listitem "><p>
     <a class="link" href="http://www.suse.com/communities/conversations/sca-pattern-development/" target="_blank">http://www.suse.com/communities/conversations/sca-pattern-development/</a>—Instructions
     on how to create (and test) your own SCA patterns.
    </p></li><li class="listitem "><p>
     <a class="link" href="http://www.suse.com/communities/conversations/basic-server-health-check-supportconfig/" target="_blank">http://www.suse.com/communities/conversations/basic-server-health-check-supportconfig/</a>—A
     Basic Server Health Check with Supportconfig.
    </p></li><li class="listitem "><p>
     <a class="link" href="https://www.novell.com/communities/coolsolutions/cool_tools/create-your-own-supportconfig-plugin/" target="_blank">https://www.novell.com/communities/coolsolutions/cool_tools/create-your-own-supportconfig-plugin/</a>—Create
     Your Own Supportconfig Plugin.
    </p></li><li class="listitem "><p>
     <a class="link" href="http://www.suse.com/communities/conversations/creating-a-central-supportconfig-repository/" target="_blank">http://www.suse.com/communities/conversations/creating-a-central-supportconfig-repository/</a>—Creating
     a Central Supportconfig Repository.
    </p><p>
     
    </p></li></ul></div></div></div><div class="chapter " id="cha.trouble"><div class="titlepage"><div><div><h2 class="title"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span> <a title="Permalink" class="permalink" href="#cha.trouble">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>troubleshooting.xml</li><li><span class="ds-label">ID: </span>cha.trouble</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.trouble.info"><span class="number">34.1 </span><span class="name">Finding and Gathering Information</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.boot"><span class="number">34.2 </span><span class="name">Boot Problems</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.login"><span class="number">34.3 </span><span class="name">Login Problems</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.netconfig"><span class="number">34.4 </span><span class="name">Network Problems</span></a></span></dt><dt><span class="sect1"><a href="#sec.trouble.data"><span class="number">34.5 </span><span class="name">Data Problems</span></a></span></dt></dl></div></div><p>
  This chapter describes a range of potential problems and their solutions.
  Even if your situation is not precisely listed here, there may be one similar
  enough to offer hints to the solution of your problem.
 </p><div class="sect1 " id="sec.trouble.info"><div class="titlepage"><div><div><h2 class="title" id="sec.trouble.info"><span class="number">34.1 </span><span class="name">Finding and Gathering Information</span> <a title="Permalink" class="permalink" href="#sec.trouble.info">#</a></h2></div></div></div><p>
   Linux reports things in a very detailed way. There are several places to
   look when you encounter problems with your system, most of which are
   standard to Linux systems in general, and some are relevant to <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>
   systems. Most log files can be viewed with YaST (<span class="guimenu">Miscellaneous</span> › <span class="guimenu">Start-Up Log</span>).
  </p><p>
   YaST offers the possibility to collect all system information
   needed by the support team. Use <span class="guimenu">Other</span> › <span class="guimenu">Support</span> and select
   the problem category. When all information is gathered, attach it to your
   support request.
  </p><p>
   A list of the most frequently checked log files follows with the description
   of their typical purpose. Paths containing <code class="filename">~</code> refer to
   the current user's home directory.
  </p><div class="table" id="tab.trouble.info"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 34.1: </span><span class="name">Log Files </span><a title="Permalink" class="permalink" href="#tab.trouble.info">#</a></h6></div><div class="table-contents"><table summary="Log Files" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
       <p>
        Log File
       </p>
      </th><th>
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td>
       <p>
        <code class="filename">~/.xsession-errors</code>
       </p>
      </td><td>
       <p>
        Messages from the desktop applications currently running.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/apparmor/</code>
       </p>
      </td><td>
       <p>
        Log files from AppArmor, see <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”</span> for
        detailed information.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/audit/audit.log</code>
       </p>
      </td><td>
       <p>
        Log file from Audit to track any access to files, directories, or
        resources of your system, and trace system calls. See
        <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”</span> for detailed information.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/mail.*</code>
       </p>
      </td><td>
       <p>
        Messages from the mail system.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/NetworkManager</code>
       </p>
      </td><td>
       <p>
        Log file from NetworkManager to collect problems with network connectivity
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/samba/</code>
       </p>
      </td><td>
       <p>
        Directory containing Samba server and client log messages.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/warn</code>
       </p>
      </td><td>
       <p>
        All messages from the kernel and system log daemon with the
        <span class="quote">“<span class="quote">warning</span>”</span> level or higher.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/wtmp</code>
       </p>
      </td><td>
       <p>
        Binary file containing user login records for the current machine
        session. View it with <code class="command">last</code>.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/Xorg.*.log</code>
       </p>
      </td><td>
       <p>
        Various start-up and runtime log files from the X Window System. It is
        useful for debugging failed X start-ups.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/YaST2/</code>
       </p>
      </td><td>
       <p>
        Directory containing YaST's actions and their results.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/var/log/zypper.log</code>
       </p>
      </td><td>
       <p>
        Log file of Zypper.
       </p>
      </td></tr></tbody></table></div></div><p>
   Apart from log files, your machine also supplies you with information about
   the running system. See
   <a class="xref" href="#tab.trouble.system" title="System Information With the /proc File System">Table 34.2: System Information With the <code class="filename">/proc</code> File System</a>
  </p><div class="table" id="tab.trouble.system"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 34.2: </span><span class="name">System Information With the <code class="filename">/proc</code> File System </span><a title="Permalink" class="permalink" href="#tab.trouble.system">#</a></h6></div><div class="table-contents"><table summary="System Information With the /proc File System" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
       <p>
        File
       </p>
      </th><th>
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td>
       <p>
        <code class="filename">/proc/cpuinfo</code>
       </p>
      </td><td>
       <p>
        Contains processor information, including its type, make, model, and
        performance.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/dma</code>
       </p>
      </td><td>
       <p>
        Shows which DMA channels are currently being used.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/interrupts</code>
       </p>
      </td><td>
       <p>
        Shows which interrupts are in use, and how many of each have been in
        use.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/iomem</code>
       </p>
      </td><td>
       <p>
        Displays the status of I/O (input/output) memory.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/ioports</code>
       </p>
      </td><td>
       <p>
        Shows which I/O ports are in use at the moment.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/meminfo</code>
       </p>
      </td><td>
       <p>
        Displays memory status.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/modules</code>
       </p>
      </td><td>
       <p>
        Displays the individual modules.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/mounts</code>
       </p>
      </td><td>
       <p>
        Displays devices currently mounted.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/partitions</code>
       </p>
      </td><td>
       <p>
        Shows the partitioning of all hard disks.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/proc/version</code>
       </p>
      </td><td>
       <p>
        Displays the current version of Linux.
       </p>
      </td></tr></tbody></table></div></div><p>
   Apart from the <code class="filename">/proc</code> file system, the Linux kernel
   exports information with the <code class="literal">sysfs</code> module, an in-memory
   file system. This module represents kernel objects, their attributes and
   relationships. For more information about <code class="literal">sysfs</code>, see the
   context of udev in <a class="xref" href="#cha.udev" title="Chapter 23. Dynamic Kernel Device Management with udev">Chapter 23, <em>Dynamic Kernel Device Management with <code class="systemitem">udev</code></em></a>.
   <a class="xref" href="#tab.trouble.sysfs" title="System Information With the /sys File System">Table 34.3</a> contains
   an overview of the most common directories under <code class="filename">/sys</code>.
  </p><div class="table" id="tab.trouble.sysfs"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 34.3: </span><span class="name">System Information With the <code class="filename">/sys</code> File System </span><a title="Permalink" class="permalink" href="#tab.trouble.sysfs">#</a></h6></div><div class="table-contents"><table summary="System Information With the /sys File System" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
       <p>
        File
       </p>
      </th><th>
       <p>
        Description
       </p>
      </th></tr></thead><tbody><tr><td>
       <p>
        <code class="filename">/sys/block</code>
       </p>
      </td><td>
       <p>
        Contains subdirectories for each block device discovered in the system.
        Generally, these are mostly disk type devices.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/sys/bus</code>
       </p>
      </td><td>
       <p>
        Contains subdirectories for each physical bus type.
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/sys/class</code>
       </p>
      </td><td>
       <p>
        Contains subdirectories grouped together as a functional types of
        devices (like graphics, net, printer, etc.)
       </p>
      </td></tr><tr><td>
       <p>
        <code class="filename">/sys/device</code>
       </p>
      </td><td>
       <p>
        Contains the global device hierarchy.
       </p>
      </td></tr></tbody></table></div></div><p>
   Linux comes with several tools for system analysis and monitoring. See
   <span class="intraxref">Book “<em class="citetitle ">System Analysis and Tuning Guide</em>”, Chapter 2 “System Monitoring Utilities”</span> for a selection of the most important ones used
   in system diagnostics.
  </p><p>
   Each of the following scenarios begins with a header describing the problem
   followed by a paragraph or two offering suggested solutions, available
   references for more detailed solutions, and cross-references to other
   scenarios that are related.
  </p></div><div class="sect1 " id="sec.trouble.boot"><div class="titlepage"><div><div><h2 class="title" id="sec.trouble.boot"><span class="number">34.2 </span><span class="name">Boot Problems</span> <a title="Permalink" class="permalink" href="#sec.trouble.boot">#</a></h2></div></div></div><p>
   Boot problems are situations when your system does not boot properly (does
   not boot to the expected target and login screen).
  </p><div class="sect2 " id="sec.trouble.boot.nogrub"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.boot.nogrub"><span class="number">34.2.1 </span><span class="name">The GRUB 2 Boot Loader Fails to Load</span> <a title="Permalink" class="permalink" href="#sec.trouble.boot.nogrub">#</a></h3></div></div></div><p>
    If the hardware is functioning properly, it is possible that the boot
    loader is corrupted and Linux cannot start on the machine. In this case, it
    is necessary to repair the boot loader. To do so, you need to start the
    Rescue System as described in
    <a class="xref" href="#sec.trouble.data.recover.rescue" title="34.5.2. Using the Rescue System">Section 34.5.2, “Using the Rescue System”</a> and follow the
    instructions in <a class="xref" href="#sec.trouble.data.recover.rescue.grub" title="34.5.2.4. Modifying and Re-installing the Boot Loader">Section 34.5.2.4, “Modifying and Re-installing the Boot Loader”</a>.
   </p><p>
    Alternatively, you can use the Rescue System to fix the boot loader as
    follows. Boot your machine from the installation media. In the boot screen,
    choose <span class="guimenu">More</span> › <span class="guimenu">Boot Linux
    System</span>. Select the disk containing the installed
    system and kernel with the default kernel options.
   </p><p>
    When the system is booted, start YaST and switch to
    <span class="guimenu">System</span> › <span class="guimenu">Boot
    Loader</span>. Make sure that the <span class="guimenu">Write generic
    Boot Code to MRB</span> option is enabled, and press
    <span class="guimenu">OK</span>. This fixes the corrupted boot loader by overwriting
    it, or installs the boot loader if it is missing.
   </p><p>
    Other reasons for the machine not booting may be BIOS-related:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698745573056"><span class="term ">BIOS Settings</span></dt><dd><p>
       Check your BIOS for references to your hard disk. GRUB 2 may simply not
       be started if the hard disk itself cannot be found with the current BIOS
       settings.
      </p></dd><dt id="idm139698745571088"><span class="term ">BIOS Boot Order</span></dt><dd><p>
       Check whether your system's boot order includes the hard disk. If the
       hard disk option was not enabled, your system may install properly, but
       fails to boot when access to the hard disk is required.
      </p></dd></dl></div></div><div class="sect2 " id="sec.trouble.boot.hang"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.boot.hang"><span class="number">34.2.2 </span><span class="name">No Login or Prompt Appears</span> <a title="Permalink" class="permalink" href="#sec.trouble.boot.hang">#</a></h3></div></div></div><p>
    This behavior typically occurs after a failed kernel upgrade and it is
    known as a <span class="emphasis"><em>kernel panic</em></span> because of the type of error
    on the system console that sometimes can be seen at the final stage of the
    process. If, in fact, the machine has just been rebooted following a
    software update, the immediate goal is to reboot it using the old, proven
    version of the Linux kernel and associated files. This can be done in the
    GRUB 2 boot loader screen during the boot process as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Reboot the computer using the reset button, or switch it off and on
      again.
     </p></li><li class="step "><p>
      When the GRUB 2 boot screen becomes visible, select the <span class="guimenu">Advanced
      Options</span> entry and choose the previous kernel from the menu. The
      machine will boot using the prior version of the kernel and its
      associated files.
     </p></li><li class="step " id="st.trouble.boot.hang.modify_grub"><p>
      After the boot process has completed, remove the newly installed kernel
      and, if necessary, set the default boot entry to the old kernel using the
      YaST <span class="guimenu">Boot Loader</span> module. For more information refer
      to <a class="xref" href="#sec.grub2.yast2.config" title="13.3. Configuring the Boot Loader with YaST">Section 13.3, “Configuring the Boot Loader with YaST”</a>. However, doing this is
      probably not necessary because automated update tools normally modify it
      for you during the rollback process.
     </p></li><li class="step "><p>
      Reboot.
     </p></li></ol></div></div><p>
    If this does not fix the problem, boot the computer using the installation
    media. After the machine has booted, continue with
    <a class="xref" href="#st.trouble.boot.hang.modify_grub" title="Step 3">Step 3</a>.
   </p></div><div class="sect2 " id="sec.trouble.boot.prompt"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.boot.prompt"><span class="number">34.2.3 </span><span class="name">No Graphical Login</span> <a title="Permalink" class="permalink" href="#sec.trouble.boot.prompt">#</a></h3></div></div></div><p>
    If the machine starts, but does not boot into the graphical login
    manager, anticipate problems either with the choice of the default systemd
    target or the configuration of the X Window System. To check the current
    systemd default target run the command <code class="command">sudo systemctl
    get-default</code>. If the value returned is <span class="emphasis"><em>not</em></span>
    <code class="literal">graphical.target</code>, run the command <code class="command">sudo
    systemctl isolate graphical.target</code>. If the graphical login screen
    starts, log in and start <span class="guimenu">YaST</span> › <span class="guimenu">System</span> › <span class="guimenu">Services Manager</span>
    and set the <span class="guimenu">Default System Target</span> to <span class="guimenu">Graphical
    Interface</span>. From now on the system should boot into the graphical
    login screen.
   </p><p>
    If the graphical login screen does not start even if having booted or
    switched to the graphical target, your desktop or X Window software is
    probably misconfigured or corrupted. Examine the log files at
    <code class="filename">/var/log/Xorg.*.log</code> for detailed messages from the X
    server as it attempted to start. If the desktop fails during start, it may
    log error messages to the system journal that can be queried with the
    command <code class="command">journalctl</code> (see <a class="xref" href="#cha.journalctl" title="Chapter 16. journalctl: Query the systemd Journal">Chapter 16, <em><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</em></a>
    for more information). If these error messages hint at a configuration
    problem in the X server, try to fix these issues. If the graphical system
    still does not come up, consider reinstalling the graphical desktop.
   </p></div><div class="sect2 " id="sec.trouble.boot.btrfs"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.boot.btrfs"><span class="number">34.2.4 </span><span class="name">Root Btrfs Partition Cannot Be Mounted</span> <a title="Permalink" class="permalink" href="#sec.trouble.boot.btrfs">#</a></h3></div></div></div><p>
    If a <code class="systemitem">btrfs</code> root partition
    becomes corrupted, try the following options:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      Mount the partition with the <code class="option">-o recovery</code> option.
     </p></li><li class="listitem "><p>
      If that fails, run <code class="command">btrfs-zero-log</code> on your root
      partition.
     </p></li></ul></div></div><div class="sect2 " id="sec.trouble.boot.forcecheck"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.boot.forcecheck"><span class="number">34.2.5 </span><span class="name">Force Checking Root Partitions</span> <a title="Permalink" class="permalink" href="#sec.trouble.boot.forcecheck">#</a></h3></div></div></div><p>
    If the root partition becomes corrupted, use the parameter
    <em class="parameter ">forcefsck</em> on the boot prompt. This passes the option
    <code class="option">-f</code> (force) to the <code class="command">fsck</code> command.
   </p></div></div><div class="sect1 " id="sec.trouble.login"><div class="titlepage"><div><div><h2 class="title" id="sec.trouble.login"><span class="number">34.3 </span><span class="name">Login Problems</span> <a title="Permalink" class="permalink" href="#sec.trouble.login">#</a></h2></div></div></div><p>
   Login problems occur when your machine does boot to the
   expected welcome screen or login prompt, but refuses to accept the user name
   and password, or accepts them but then does not behave properly (fails to
   start the graphic desktop, produces errors, drops to a command line, etc.).
  </p><div class="sect2 " id="sec.trouble.login.no"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.login.no"><span class="number">34.3.1 </span><span class="name">Valid User Name and Password Combinations Fail</span> <a title="Permalink" class="permalink" href="#sec.trouble.login.no">#</a></h3></div></div></div><p>
    This usually occurs when the system is configured to use network
    authentication or directory services and, for some reason, cannot retrieve
    results from its configured servers. The
    <code class="systemitem">root</code> user, as the only local
    user, is the only user that can still log in to these machines. The
    following are some common reasons a machine appears functional but cannot
    process logins correctly:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      The network is not working. For further directions on this, turn to
      <a class="xref" href="#sec.trouble.netconfig" title="34.4. Network Problems">Section 34.4, “Network Problems”</a>.
     </p></li><li class="listitem "><p>
      DNS is not working at the moment (which prevents GNOME from working and
      the system from making validated requests to secure servers). One
      indication that this is the case is that the machine takes an extremely
      long time to respond to any action. Find more information about this
      topic in <a class="xref" href="#sec.trouble.netconfig" title="34.4. Network Problems">Section 34.4, “Network Problems”</a>.
     </p></li><li class="listitem "><p>
      If the system is configured to use Kerberos, the system's local time may
      have drifted past the accepted variance with the Kerberos server time
      (this is typically 300 seconds). If NTP (network time protocol) is not
      working properly or local NTP servers are not working, Kerberos
      authentication ceases to function because it depends on common clock
      synchronization across the network.
     </p></li><li class="listitem "><p>
      The system's authentication configuration is misconfigured. Check the PAM
      configuration files involved for any typographical errors or misordering
      of directives. For additional background information about PAM and the
      syntax of the configuration files involved, refer to
      <span class="intraxref">Book “<em class="citetitle ">Security Guide</em>”, Chapter 2 “Authentication with PAM”</span>.
     </p></li><li class="listitem "><p>
      The home partition is encrypted. Find more information about this topic
      in <a class="xref" href="#sec.trouble.login.encrypted" title="34.3.3. Login to Encrypted Home Partition Fails">Section 34.3.3, “Login to Encrypted Home Partition Fails”</a>.
     </p></li></ul></div><p>
    In all cases that do not involve external network problems, the solution is
    to reboot the system into single-user mode and repair the configuration
    before booting again into operating mode and attempting to log in again. To
    boot into single-user mode:
   </p><div class="procedure " id="proc.trouble.login.no"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Reboot the system. The boot screen appears, offering a prompt.
     </p></li><li class="step "><p>
      Press <span class="keycap">Esc</span> to exit the splash screen and get to
      the GRUB 2 text-based menu.
     </p></li><li class="step "><p>
      Press <span class="keycap">B</span> to enter the GRUB 2 editor.
     </p></li><li class="step "><p>
      Add the following parameter to the line containing the kernel parameters:
     </p><div class="verbatim-wrap"><pre class="screen">systemd.unit=rescue.target</pre></div></li><li class="step "><p>
      Press <span class="keycap">F10</span>.
     </p></li><li class="step "><p>
      Enter the user name and password for
      <code class="systemitem">root</code>.
     </p></li><li class="step "><p>
      Make all the necessary changes.
     </p></li><li class="step "><p>
      Boot into the full multiuser and network mode by entering
      <code class="command">systemctl isolate graphical.target</code> at the command
      line.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.trouble.login.pw"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.login.pw"><span class="number">34.3.2 </span><span class="name">Valid User Name and Password Not Accepted</span> <a title="Permalink" class="permalink" href="#sec.trouble.login.pw">#</a></h3></div></div></div><p>
    This is by far the most common problem users encounter, because there are
    many reasons this can occur. Depending on whether you use local user
    management and authentication or network authentication, login failures
    occur for different reasons.
   </p><p>
    Local user management can fail for the following reasons:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      The user may have entered the wrong password.
     </p></li><li class="listitem "><p>
      The user's home directory containing the desktop configuration files is
      corrupted or write protected.
     </p></li><li class="listitem "><p>
      There may be problems with the X Window System authenticating this
      particular user, especially if the user's home directory has been used
      with another Linux distribution prior to installing the current one.
     </p></li></ul></div><p>
    To locate the reason for a local login failure, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Check whether the user remembered his password correctly before you start
      debugging the whole authentication mechanism. If the user may not
      remember his password correctly, use the YaST User Management module to
      change the user's password. Pay attention to the <span class="keycap">Caps
      Lock</span> key and unlock it, if necessary.
     </p></li><li class="step "><p>
      Log in as <code class="systemitem">root</code> and check the
      system journal with <code class="command">journalctl -e</code> for error messages
      of the login process and of PAM.
     </p></li><li class="step "><p>
      Try to log in from a console (using <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>). If this is successful, the blame cannot be put on PAM,
      because it is possible to authenticate this user on this machine. Try to
      locate any problems with the X Window System or the GNOME desktop. For
      more information, refer to <a class="xref" href="#sec.trouble.login.dk" title="34.3.4. Login Successful but GNOME Desktop Fails">Section 34.3.4, “Login Successful but GNOME Desktop Fails”</a>.
     </p></li><li class="step "><p>
      If the user's home directory has been used with another Linux
      distribution, remove the <code class="filename">Xauthority</code> file in the
      user's home. Use a console login via <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> and run <code class="command">rm .Xauthority</code> as this user. This
      should eliminate X authentication problems for this user. Try graphical
      login again.
     </p></li><li class="step "><p>
      If the desktop could not start because of corrupt configuration files,
      proceed with <a class="xref" href="#sec.trouble.login.dk" title="34.3.4. Login Successful but GNOME Desktop Fails">Section 34.3.4, “Login Successful but GNOME Desktop Fails”</a>.
     </p></li></ol></div></div><p>
    In the following, common reasons a network authentication for a particular
    user may fail on a specific machine are listed:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
      The user may have entered the wrong password.
     </p></li><li class="listitem "><p>
      The user name exists in the machine's local authentication files and is
      also provided by a network authentication system, causing conflicts.
     </p></li><li class="listitem "><p>
      The home directory exists but is corrupt or unavailable. Perhaps it is
      write protected or is on a server that is inaccessible at the moment.
     </p></li><li class="listitem "><p>
      The user does not have permission to log in to that particular host in
      the authentication system.
     </p></li><li class="listitem "><p>
      The machine has changed host names, for whatever reason, and the user
      does not have permission to log in to that host.
     </p></li><li class="listitem "><p>
      The machine cannot reach the authentication server or directory server
      that contains that user's information.
     </p></li><li class="listitem "><p>
      There may be problems with the X Window System authenticating this
      particular user, especially if the user's home has been used with another
      Linux distribution prior to installing the current one.
     </p></li></ul></div><p>
    To locate the cause of the login failures with network authentication,
    proceed as follows:
   </p><div class="procedure " id="proc.trouble.login.pw"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Check whether the user remembered their password correctly before you
      start debugging the whole authentication mechanism.
     </p></li><li class="step "><p>
      Determine the directory server which the machine relies on for
      authentication and make sure that it is up and running and properly
      communicating with the other machines.
     </p></li><li class="step "><p>
      Determine that the user's user name and password work on other machines
      to make sure that his authentication data exists and is properly
      distributed.
     </p></li><li class="step "><p>
      See if another user can log in to the misbehaving machine. If another
      user can log in without difficulty or if
      <code class="systemitem">root</code> can log in, log in and
      examine the system journal with <code class="command">journalctl -e</code>&gt;
      file. Locate the time stamps that correspond to the login attempts and
      determine if PAM has produced any error messages.
     </p></li><li class="step "><p>
      Try to log in from a console (using <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>). If this is successful, the problem is not with PAM or the
      directory server on which the user's home is hosted, because it is
      possible to authenticate this user on this machine. Try to locate any
      problems with the X Window System or the GNOME desktop. For more
      information, refer to <a class="xref" href="#sec.trouble.login.dk" title="34.3.4. Login Successful but GNOME Desktop Fails">Section 34.3.4, “Login Successful but GNOME Desktop Fails”</a>.
     </p></li><li class="step "><p>
      If the user's home directory has been used with another Linux
      distribution, remove the <code class="filename">Xauthority</code> file in the
      user's home. Use a console login via <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> and run <code class="command">rm .Xauthority</code> as this user. This
      should eliminate X authentication problems for this user. Try graphical
      login again.
     </p></li><li class="step "><p>
      If the desktop could not start because of corrupt configuration files,
      proceed with <a class="xref" href="#sec.trouble.login.dk" title="34.3.4. Login Successful but GNOME Desktop Fails">Section 34.3.4, “Login Successful but GNOME Desktop Fails”</a>.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.trouble.login.encrypted"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.login.encrypted"><span class="number">34.3.3 </span><span class="name">Login to Encrypted Home Partition Fails</span> <a title="Permalink" class="permalink" href="#sec.trouble.login.encrypted">#</a></h3></div></div></div><p>
    It is recommended to use an encrypted home partition for laptops. If you
    cannot log in to your laptop, the reason is usually simple: your partition
    could not be unlocked.
   </p><p>
    During the boot time, you need to enter the passphrase to unlock your
    encrypted partition. If you do not enter it, the boot process continues,
    leaving the partition locked.
   </p><p>
    To unlock your encrypted partition, proceed as follows:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Switch to the text console with <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>.
     </p></li><li class="step "><p>
      Become <code class="systemitem">root</code>.
     </p></li><li class="step "><p>
      Restart the unlocking process again with:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>systemctl restart home.mount</pre></div></li><li class="step "><p>
      Enter your passphrase to unlock your encrypted partition.
     </p></li><li class="step "><p>
      Exit the text console and switch back to the login screen with <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F7</span>.
     </p></li><li class="step "><p>
      Log in as usual.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.trouble.login.dk"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.login.dk"><span class="number">34.3.4 </span><span class="name">Login Successful but GNOME Desktop Fails</span> <a title="Permalink" class="permalink" href="#sec.trouble.login.dk">#</a></h3></div></div></div><p>
    If this is the case, it is likely that your GNOME configuration files
    have become corrupted. Some symptoms may include the keyboard failing to
    work, the screen geometry becoming distorted, or even the screen coming up
    as a bare gray field. The important distinction is that if another user
    logs in, the machine works normally. It is then likely that the problem can
    be fixed relatively quickly by simply moving the user's GNOME
    configuration directory to a new location, which causes GNOME to
    initialize a new one. Although the user is forced to reconfigure GNOME,
    no data is lost.
   </p><div class="procedure " id="proc.trouble.login.dk"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Switch to a text console by pressing <span class="keycap">Ctrl</span><span class="key-connector">–</span><span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span>.
     </p></li><li class="step "><p>
      Log in with your user name.
     </p></li><li class="step "><p>
      Move the user's GNOME configuration directories to a temporary
      location:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mv .gconf  .gconf-ORIG-RECOVER
<code class="prompt user">tux &gt; </code>mv .gnome2 .gnome2-ORIG-RECOVER</pre></div></li><li class="step "><p>
      Log out.
     </p></li><li class="step "><p>
      Log in again, but do not run any applications.
     </p></li><li class="step "><p>
      Recover your individual application configuration data (including the
      Evolution e-mail client data) by copying the
      <code class="filename">~/.gconf-ORIG-RECOVER/apps/</code> directory back into the
      new <code class="filename">~/.gconf </code> directory as follows:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>cp -a .gconf-ORIG-RECOVER/apps .gconf/</pre></div><p>
      If this causes the login problems, attempt to recover only the critical
      application data and reconfigure the remainder of the applications.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.trouble.netconfig"><div class="titlepage"><div><div><h2 class="title" id="sec.trouble.netconfig"><span class="number">34.4 </span><span class="name">Network Problems</span> <a title="Permalink" class="permalink" href="#sec.trouble.netconfig">#</a></h2></div></div></div><p>
   Many problems of your system may be network-related, even though they do not
   seem to be at first. For example, the reason for a system not allowing users
   to log in may be a network problem of some kind. This section introduces a
   simple checklist you can apply to identify the cause of any network problem
   encountered.
  </p><div class="procedure " id="proc.trouble.config.net"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 34.1: </span><span class="name">How to Identify Network Problems </span><a title="Permalink" class="permalink" href="#proc.trouble.config.net">#</a></h6></div><div class="procedure-contents"><p>
    When checking the network connection of your machine, proceed as follows:
   </p><ol class="procedure" type="1"><li class="step "><p>
     If you use an Ethernet connection, check the hardware first. Make sure
     that your network cable is properly plugged into your computer and router
     (or hub, etc.). The control lights next to your Ethernet connector are
     normally both be active.
    </p><p>
     If the connection fails, check whether your network cable works with
     another machine. If it does, your network card causes the failure. If hubs
     or switches are included in your network setup, they may be faulty, as
     well.
    </p></li><li class="step "><p>
     If using a wireless connection, check whether the wireless link can be
     established by other machines. If not, contact the wireless network's
     administrator.
    </p></li><li class="step "><p>
     Once you have checked your basic network connectivity, try to find out
     which service is not responding. Gather the address information of all
     network servers needed in your setup. Either look them up in the
     appropriate YaST module or ask your system administrator. The following
     list gives some typical network servers involved in a setup together with
     the symptoms of an outage.
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698745431872"><span class="term ">DNS (Name Service)</span></dt><dd><p>
        A broken or malfunctioning name service affects the network's
        functionality in many ways. If the local machine relies on any network
        servers for authentication and these servers cannot be found because of
        name resolution issues, users would not even be able to log in.
        Machines in the network managed by a broken name server would not be
        able to <span class="quote">“<span class="quote">see</span>”</span> each other and communicate.
       </p></dd><dt id="idm139698745429232"><span class="term ">NTP (Time Service)</span></dt><dd><p>
        A malfunctioning or completely broken NTP service could affect Kerberos
        authentication and X server functionality.
       </p></dd><dt id="idm139698745427312"><span class="term ">NFS (File Service)</span></dt><dd><p>
        If any application needs data stored in an NFS mounted directory, it
        cannot start or function properly if this service was down or
        misconfigured. In the worst case scenario, a user's personal desktop
        configuration would not come up if their home directory containing the
        <code class="filename">.gconf</code> subdirectory could not be found because of
        a faulty NFS server.
       </p></dd><dt id="idm139698745424704"><span class="term ">Samba (File Service)</span></dt><dd><p>
        If any application needs data stored in a directory on a faulty Samba
        server, it cannot start or function properly.
       </p></dd><dt id="idm139698745422784"><span class="term ">NIS (User Management)</span></dt><dd><p>
        If your <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> system relies on a faulty NIS server to provide
        the user data, users cannot log in to this machine.
       </p></dd><dt id="idm139698745419760"><span class="term ">LDAP (User Management)</span></dt><dd><p>
        If your <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> system relies on a faulty LDAP server to provide
        the user data, users cannot log in to this machine.
       </p></dd><dt id="idm139698745416736"><span class="term ">Kerberos (Authentication)</span></dt><dd><p>
        Authentication will not work and login to any machine fails.
       </p></dd><dt id="idm139698745414864"><span class="term ">CUPS (Network Printing)</span></dt><dd><p>
        Users cannot print.
       </p></dd></dl></div></li><li class="step "><p>
     Check whether the network servers are running and whether your network
     setup allows you to establish a connection:
    </p><div id="idm139698745411888" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Limitations</h6><p>
      The debugging procedure described below only applies to a simple network
      server/client setup that does not involve any internal routing. It
      assumes both server and client are members of the same subnet without the
      need for additional routing.
     </p></div><ol type="a" class="substeps "><li class="step "><p>
       Use <code class="command">ping</code>
       <em class="replaceable ">IP_ADDRESS/HOSTNAME</em>
       (replace with the host name or IP address of the server) to check whether
       each one of them is up and responding to the network. If this command is
       successful, it tells you that the host you were looking for is up and
       running and that the name service for your network is configured
       correctly.
      </p><p>
       If ping fails with <code class="literal">destination host unreachable</code>,
       either your system or the desired server is not properly configured or
       down. Check whether your system is reachable by running
       <code class="command">ping</code> <em class="replaceable ">IP address</em> or
       <em class="replaceable ">YOUR_HOSTNAME</em> from another machine. If you
       can reach your machine from another machine, it is the server that is
       not running or not configured correctly.
      </p><p>
       If ping fails with <code class="literal">unknown host</code>, the name service is
       not configured correctly or the host name used was incorrect. For
       further checks on this matter, refer to
       <a class="xref" href="#st.trouble.config.net.host" title="Step 4.b">Step 4.b</a>. If
       ping still fails, either your network card is not configured correctly
       or your network hardware is faulty.
      </p></li><li class="step " id="st.trouble.config.net.host"><p>
       Use <code class="command">host</code> <em class="replaceable ">HOSTNAME</em> to
       check whether the host name of the server you are trying to connect to
       is properly translated into an IP address and vice versa. If this
       command returns the IP address of this host, the name service is up and
       running. If the <code class="command">host</code> command fails, check all network
       configuration files relating to name and address resolution on your
       host:
      </p><div class="variablelist "><dl class="variablelist"><dt id="idm139698745399840"><span class="term "><code class="filename">/etc/resolv.conf</code>
        </span></dt><dd><p>
          This file is used to keep track of the name server and domain you are
          currently using. It can be modified manually or automatically
          adjusted by YaST or DHCP. Automatic adjustment is preferable.
          However, make sure that this file has the following structure and all
          network addresses and domain names are correct:
         </p><div class="verbatim-wrap"><pre class="screen">search <em class="replaceable ">FULLY_QUALIFIED_DOMAIN_NAME</em>
nameserver <em class="replaceable ">IPADDRESS_OF_NAMESERVER</em></pre></div><p>
          This file can contain more than one name server address, but at least
          one of them must be correct to provide name resolution to your host.
          If needed, adjust this file using the YaST Network Settings module
          (Hostname/DNS tab).
         </p><p>
          If your network connection is handled via DHCP, enable DHCP to change
          host name and name service information by selecting <span class="guimenu">Set
          Hostname via DHCP</span> (can be set globally for any interface or
          per interface) and <span class="guimenu">Update Name Servers and Search List via DHCP</span>
          in the YaST Network Settings module (Hostname/DNS tab).
         </p></dd><dt id="idm139698745393904"><span class="term "><code class="filename">/etc/nsswitch.conf</code>
        </span></dt><dd><p>
          This file tells Linux where to look for name service information. It
          should look like this:
         </p><div class="verbatim-wrap"><pre class="screen"> ...
hosts: files dns
networks: files dns
...</pre></div><p>
          The <code class="option">dns</code> entry is vital. It tells Linux to use an
          external name server. Normally, these entries are automatically
          managed by YaST, but it would be prudent to check.
         </p><p>
          If all the relevant entries on the host are correct, let your system
          administrator check the DNS server configuration for the correct zone
          information.  If you have made
          sure that the DNS configuration of your host and the DNS server are
          correct, proceed with checking the configuration of your network and
          network device.
         </p></dd></dl></div></li><li class="step "><p>
       If your system cannot establish a connection to a network server and you
       have excluded name service problems from the list of possible culprits,
       check the configuration of your network card.
      </p><p>
       Use the command <code class="command">ip addr show</code>
       <em class="replaceable ">NETWORK_DEVICE</em> to check whether this device
       was properly configured. Make sure that the <code class="option">inet
       address</code> with the netmask
       (<code class="literal">/<em class="replaceable ">MASK</em></code>) is configured
       correctly. An error in the IP address or a missing bit in your network
       mask would render your network configuration unusable. If necessary,
       perform this check on the server as well.
      </p></li><li class="step "><p>
       If the name service and network hardware are properly configured and
       running, but some external network connections still get long time-outs
       or fail entirely, use <code class="command">traceroute</code>
       <em class="replaceable ">FULLY_QUALIFIED_DOMAIN_NAME</em> (executed as
       <code class="systemitem">root</code>) to track the network
       route these requests are taking. This command lists any gateway (hop)
       that a request from your machine passes on its way to its destination.
       It lists the response time of each hop and whether this hop is
       reachable. Use a combination of traceroute and ping to track down the
       culprit and let the administrators know.
      </p></li></ol></li></ol></div></div><p>
   Once you have identified the cause of your network trouble, you can resolve
   it yourself (if the problem is located on your machine) or let the system
   administrators of your network know about your findings so they can
   reconfigure the services or repair the necessary systems.
  </p><div class="sect2 " id="sec.trouble.networkmanager"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.networkmanager"><span class="number">34.4.1 </span><span class="name">NetworkManager Problems</span> <a title="Permalink" class="permalink" href="#sec.trouble.networkmanager">#</a></h3></div></div></div><p>
    If you have a problem with network connectivity, narrow it down as
    described in <a class="xref" href="#proc.trouble.config.net" title="How to Identify Network Problems">Procedure 34.1, “How to Identify Network Problems”</a>. If NetworkManager seems to be
    the culprit, proceed as follows to get logs providing hints on why NetworkManager
    fails:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Open a shell and log in as
      <code class="systemitem">root</code>.
     </p></li><li class="step "><p>
      Restart the NetworkManager:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart NetworkManager</pre></div></li><li class="step "><p>
      Open a Web page, for example,
      <a class="link" href="http://www.opensuse.org" target="_blank">http://www.opensuse.org</a> as normal user to see, if
      you can connect.
     </p></li><li class="step "><p>
      Collect any information about the state of NetworkManager in
      <code class="filename">/var/log/NetworkManager</code>.
     </p></li></ol></div></div><p>
    For more information about NetworkManager, refer to
    <a class="xref" href="#cha.nm" title="Chapter 26. Using NetworkManager">Chapter 26, <em>Using NetworkManager</em></a>.
   </p></div></div><div class="sect1 " id="sec.trouble.data"><div class="titlepage"><div><div><h2 class="title" id="sec.trouble.data"><span class="number">34.5 </span><span class="name">Data Problems</span> <a title="Permalink" class="permalink" href="#sec.trouble.data">#</a></h2></div></div></div><p>
   Data problems are when the machine may or may not boot properly but, in
   either case, it is clear that there is data corruption on the system and
   that the system needs to be recovered. These situations call for a backup of
   your critical data, enabling you to recover the system state from before
   your system failed.
  </p><div class="sect2 " id="sec.trouble.data.partitions"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.data.partitions"><span class="number">34.5.1 </span><span class="name">Managing Partition Images</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.partitions">#</a></h3></div></div></div><p>
    Sometimes you need to perform a backup from an entire partition or even
    hard disk. Linux comes with the <code class="command">dd</code> tool which can create
    an exact copy of your disk. Combined with <code class="command">gzip</code> you save
    some space.
   </p><div class="procedure " id="idm139698745364912"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 34.2: </span><span class="name">Backing up and Restoring Hard Disks </span><a title="Permalink" class="permalink" href="#idm139698745364912">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Start a Shell as user <code class="systemitem">root</code>.
     </p></li><li class="step "><p>
      Select your source device. Typically this is something like
      <code class="filename">/dev/sda</code> (labeled as
      <em class="replaceable ">SOURCE</em>).
     </p></li><li class="step "><p>
      Decide where you want to store your image (labeled as
      <em class="replaceable ">BACKUP_PATH</em>). It must be different from your
      source device. In other words: if you make a backup from
      <code class="filename">/dev/sda</code>, your image file must not to be stored
      under <code class="filename">/dev/sda</code>.
     </p></li><li class="step "><p>
      Run the commands to create a compressed image file:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>dd if=/dev/<em class="replaceable ">SOURCE</em> | gzip &gt; /<em class="replaceable ">BACKUP_PATH</em>/image.gz</pre></div></li><li class="step "><p>
      Restore the hard disk with the following commands:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code>gzip -dc /<em class="replaceable ">BACKUP_PATH</em>/image.gz | dd of=/dev/<em class="replaceable ">SOURCE</em></pre></div></li></ol></div></div><p>
    If you only need to back up a partition, replace the
    <em class="replaceable ">SOURCE</em> placeholder with your respective
    partition. In this case, your image file can lie on the same hard disk, but
    on a different partition.
   </p></div><div class="sect2 " id="sec.trouble.data.recover.rescue"><div class="titlepage"><div><div><h3 class="title" id="sec.trouble.data.recover.rescue"><span class="number">34.5.2 </span><span class="name">Using the Rescue System</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.recover.rescue">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>system_repair.xml</li><li><span class="ds-label">ID: </span>sec.trouble.data.recover.rescue</li></ul></div></div></div></div><p>
  There are several reasons a system could fail to come up and run properly. A
  corrupted file system following a system crash, corrupted configuration
  files, or a corrupted boot loader configuration are the most common ones.
 </p><p>
  To help you to resolve these situations, <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> contains a rescue
  system that you can boot. The rescue system is a small Linux system that can
  be loaded into a RAM disk and mounted as root file system, allowing you to
  access your Linux partitions from the outside. Using the rescue system, you
  can recover or modify any important aspect of your system.
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Manipulate any type of configuration file.
   </p></li><li class="listitem "><p>
    Check the file system for defects and start automatic repair processes.
   </p></li><li class="listitem "><p>
    Access the installed system in a <span class="quote">“<span class="quote">change root</span>”</span> environment.
   </p></li><li class="listitem "><p>
    Check, modify, and re-install the boot loader configuration.
   </p></li><li class="listitem "><p>
    Recover from a badly installed device driver or unusable kernel.
   </p></li><li class="listitem "><p>
    Resize partitions using the parted command. Find more information about
    this tool at the GNU Parted Web site
    <a class="link" href="http://www.gnu.org/software/parted/parted.html" target="_blank">http://www.gnu.org/software/parted/parted.html</a>.
   </p></li></ul></div><p>
  The rescue system can be loaded from various sources and locations. The
  simplest option is to boot the rescue system from the original installation
  medium.
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Insert the installation medium into your DVD drive.
   </p></li><li class="step "><p>
    Reboot the system.
   </p></li><li class="step "><p>
    At the boot screen, press <span class="keycap">F4</span> and choose
    <span class="guimenu">DVD-ROM</span>. Then choose <span class="guimenu">Rescue System</span>
    from the main menu.
   </p></li><li class="step "><p>
    Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
    password is not required.
   </p></li></ol></div></div><div class="procedure " id="proc.trouble.data.recover.rescue.network"><div class="procedure-contents"><p>
   If your hardware setup does not include a DVD drive, you can boot the rescue
   system from a network source. The following example applies to a remote boot
   scenario—if using another boot medium, such as a DVD, modify the
   <code class="filename">info</code> file accordingly and boot as you would for a
   normal installation.
  </p><ol class="procedure" type="1"><li class="step "><p>
    Enter the configuration of your PXE boot setup and add the lines
    <code class="literal">install=<em class="replaceable ">PROTOCOL</em>://<em class="replaceable ">INSTSOURCE</em></code>
    and <code class="literal">rescue=1</code>. If you need to start the repair system,
    use <code class="literal">repair=1</code> instead. As with a normal installation,
    <em class="replaceable ">PROTOCOL</em> stands for any of the supported network
    protocols (NFS, HTTP, FTP, etc.) and <em class="replaceable ">INSTSOURCE</em>
    for the path to your network installation source.
   </p></li><li class="step "><p>
    Boot the system using <span class="quote">“<span class="quote">Wake on LAN</span>”</span><span class="phrase">, as
    described in <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 9 “Preparing Network Boot Environment”, Section 9.6 “Wake on LAN”</span></span>.
   </p></li><li class="step "><p>
    Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
    password is not required.
   </p></li></ol></div></div><p>
  Once you have entered the rescue system, you can use the virtual consoles
  that can be reached with
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to
  <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>.
 </p><p>
  A shell and other useful utilities, such as the mount program, are
  available in the <code class="filename">/bin</code> directory. The
  <code class="filename">/sbin</code> directory contains important file and network
  utilities for reviewing and repairing the file system. This directory also
  contains the most important binaries for system maintenance, such as
  <code class="command">fdisk</code>, <code class="command">mkfs</code>, <code class="command">mkswap</code>,
  <code class="command">mount</code>, and <code class="command">shutdown</code>,
  <code class="command">ip</code> and <code class="command">ss</code> for maintaining the network.
  The directory <code class="filename">/usr/bin</code> contains the vi editor, find,
  less, and SSH.
 </p><p>
  To see the system messages, either use the command <code class="command">dmesg</code>
  or view the system log with <code class="command">journalctl</code>.
 </p><div class="sect3 " id="sec.trouble.data.recover.rescue.file"><div class="titlepage"><div><div><h4 class="title" id="sec.trouble.data.recover.rescue.file"><span class="number">34.5.2.1 </span><span class="name">Checking and Manipulating Configuration Files</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.recover.rescue.file">#</a></h4></div></div></div><p>
   As an example for a configuration that might be fixed using the rescue
   system, imagine you have a broken configuration file that prevents the
   system from booting properly. You can fix this using the rescue system.
  </p><div class="procedure "><div class="procedure-contents"><p>
    To manipulate a configuration file, proceed as follows:
   </p><ol class="procedure" type="1"><li class="step "><p>
     Start the rescue system using one of the methods described above.
    </p></li><li class="step "><p>
     To mount a root file system located under <code class="filename">/dev/sda6</code>
     to the rescue system, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount /dev/sda6 /mnt</pre></div><p>
     All directories of the system are now located under
     <code class="filename">/mnt</code>
    </p></li><li class="step "><p>
     Change the directory to the mounted root file system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cd /mnt</pre></div></li><li class="step "><p>
     Open the problematic configuration file in the vi editor. Adjust and save
     the configuration.
    </p></li><li class="step "><p>
     Unmount the root file system from the rescue system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> umount /mnt</pre></div></li><li class="step "><p>
     Reboot the machine.
    </p></li></ol></div></div></div><div class="sect3 " id="sec.trouble.data.recover.rescue.filesystem"><div class="titlepage"><div><div><h4 class="title" id="sec.trouble.data.recover.rescue.filesystem"><span class="number">34.5.2.2 </span><span class="name">Repairing and Checking File Systems</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.recover.rescue.filesystem">#</a></h4></div></div></div><p>
   Generally, file systems cannot be repaired on a running system. If you
   encounter serious problems, you may not even be able to mount your root file
   system and the system boot may end with a <span class="quote">“<span class="quote">kernel panic</span>”</span>. In
   this case, the only way is to repair the system from the outside. The system
   contains the utilities to check and repair the <code class="literal">btrfs</code>,
   <code class="literal">ext2</code>, <code class="literal">ext3</code>, <code class="literal">ext4</code>,
   <code class="literal">xfs</code>, <code class="literal">dosfs</code>, and <code class="literal">vfat</code>
   file systems. Look for the command
   <code class="command">fsck.<em class="replaceable ">FILESYSTEM</em></code>.
   For example, if you need a file system
   check for <code class="literal">btrfs</code>, use <code class="command">fsck.btrfs</code>.
  </p></div><div class="sect3 " id="sec.trouble.data.recover.rescue.access"><div class="titlepage"><div><div><h4 class="title" id="sec.trouble.data.recover.rescue.access"><span class="number">34.5.2.3 </span><span class="name">Accessing the Installed System</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.recover.rescue.access">#</a></h4></div></div></div><p>
   If you need to access the installed system from the rescue system, you need
   to do this in a <span class="emphasis"><em>change root</em></span> environment. For example,
   to modify the boot loader configuration, or to execute a hardware
   configuration utility.
  </p><p>
   To set up a change root environment based on the installed system, proceed
   as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><div id="idm139698745286400" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Import LVM Volume Groups</h6><p>
      If you are using a LVM setup (refer to <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 11 “Advanced Disk Setup”, Section 11.2 “LVM Configuration”</span> for more
      general details), import all existing volume groups in order to be able to
      find and mount the device(s):
     </p><div class="verbatim-wrap"><pre class="screen"><code class="systemitem">root</code>vgimport -a</pre></div></div><p>
     Run <code class="command">lsblk</code> to check which node corresponds to the root
     partition. It is <code class="filename">/dev/sda2</code> in our example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>lsblk
NAME        MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT
sda           8:0    0 149,1G  0 disk
├─sda1        8:1    0     2G  0 part  [SWAP]
├─sda2        8:2    0    20G  0 part  /
└─sda3        8:3    0   127G  0 part
  └─cr_home 254:0    0   127G  0 crypt /home</pre></div></li><li class="step "><p>
     Mount the root partition from the installed system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount /dev/sda2 /mnt</pre></div></li><li class="step "><p>
     Mount <code class="filename">/proc</code>, <code class="filename">/dev</code>, and
     <code class="filename">/sys</code> partitions:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount -t proc none /mnt/proc
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount --rbind /dev /mnt/dev
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount --rbind /sys /mnt/sys</pre></div></li><li class="step "><p>
     Now you can <span class="quote">“<span class="quote">change root</span>”</span> into the new environment, keeping
     the <code class="systemitem">bash</code> shell:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>chroot /mnt /bin/bash</pre></div></li><li class="step "><p>
     Finally, mount the remaining partitions from the installed system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>mount -a</pre></div></li><li class="step "><p>
     Now you have access to the installed system. Before rebooting the system,
     unmount the partitions with <code class="command">umount</code> <code class="option">-a</code>
     and leave the <span class="quote">“<span class="quote">change root</span>”</span> environment with
     <code class="command">exit</code>.
    </p></li></ol></div></div><div id="idm139698745266560" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: Limitations</h6><p>
    Although you have full access to the files and applications of the
    installed system, there are some limitations. The kernel that is running is
    the one that was booted with the rescue system, not with the change root
    environment. It only supports essential hardware and it is not possible to
    add kernel modules from the installed system unless the kernel versions are
    identical. Always check the version of the currently running (rescue)
    kernel with <code class="command">uname -r</code> and then find out if a matching
    subdirectory exists in the <code class="filename">/lib/modules</code> directory in
    the change root environment. If yes, you can use the installed modules,
    otherwise you need to supply their correct versions on other media, such as
    a flash disk. Most often the rescue kernel version differs from the
    installed one — then you cannot simply access a sound card, for
    example. It is also not possible to start a graphical user interface.
   </p><p>
    Also note that you leave the <span class="quote">“<span class="quote">change root</span>”</span> environment when
    you switch the console with
    <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F1</span> to
    <span class="keycap">Alt</span><span class="key-connector">–</span><span class="keycap">F6</span>.
   </p></div></div><div class="sect3 " id="sec.trouble.data.recover.rescue.grub"><div class="titlepage"><div><div><h4 class="title" id="sec.trouble.data.recover.rescue.grub"><span class="number">34.5.2.4 </span><span class="name">Modifying and Re-installing the Boot Loader</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.recover.rescue.grub">#</a></h4></div></div></div><p>
   Sometimes a system cannot boot because the boot loader configuration is
   corrupted. The start-up routines cannot, for example, translate physical
   drives to the actual locations in the Linux file system without a working
   boot loader.
  </p><p>
   To check the boot loader configuration and re-install the boot loader,
   proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Perform the necessary steps to access the installed system as described in
     <a class="xref" href="#sec.trouble.data.recover.rescue.access" title="34.5.2.3. Accessing the Installed System">Section 34.5.2.3, “Accessing the Installed System”</a>.
    </p></li><li class="step "><p>
     Check that the GRUB 2 boot loader is installed on the system. If not,
     install the package <code class="systemitem">grub2</code> and run
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> grub2-install /dev/sda</pre></div></li><li class="step "><p>
     Check whether the following files are correctly configured according to
     the GRUB 2 configuration principles outlined in
     <a class="xref" href="#cha.grub2" title="Chapter 13. The Boot Loader GRUB 2">Chapter 13, <em>The Boot Loader GRUB 2</em></a> and apply fixes if necessary.
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
       <code class="filename">/etc/default/grub</code>
      </p></li><li class="listitem "><p>
       <code class="filename">/boot/grub2/device.map</code> (optional file, only present
       if created manually)
      </p></li><li class="listitem "><p>
       <code class="filename">/boot/grub2/grub.cfg</code> (this file is generated, do
       not edit)
      </p></li><li class="listitem "><p>
       <code class="filename">/etc/sysconfig/bootloader</code>
      </p></li></ul></div></li><li class="step "><p>
     Re-install the boot loader using the following command sequence:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li><li class="step "><p>
     Unmount the partitions, log out from the <span class="quote">“<span class="quote">change root</span>”</span>
     environment, and reboot the system:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>umount -a
exit
reboot</pre></div></li></ol></div></div></div><div class="sect3 " id="sec.trouble.data.recover.rescue.dud"><div class="titlepage"><div><div><h4 class="title" id="sec.trouble.data.recover.rescue.dud"><span class="number">34.5.2.5 </span><span class="name">Fixing Kernel Installation</span> <a title="Permalink" class="permalink" href="#sec.trouble.data.recover.rescue.dud">#</a></h4></div></div></div><p>
   A kernel update may introduce a new bug which can impact the operation of
   your system. For example a driver for a piece of hardware in your system may
   be faulty, which prevents you from accessing and using it. In this case,
   revert to the last working kernel (if available on the system) or install
   the original kernel from the installation media.
  </p><div id="idm139698745239136" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: How to Keep Last Kernels after Update</h6><p>
    To prevent failures to boot after a faulty kernel update, use the kernel
    multiversion feature and tell <code class="systemitem">libzypp</code> which
    kernels you want to keep after the update.
   </p><p>
    For example to always keep the last two kernels and the currently running
    one, add
   </p><div class="verbatim-wrap"><pre class="screen">multiversion.kernels = latest,latest-1,running</pre></div><p>
    to the <code class="filename">/etc/zypp/zypp.conf</code> file. See
    <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 14 “Installing Multiple Kernel Versions”</span> for more information.
   </p></div><p>
   A similar case is when you need to re-install or update a broken driver for
   a device not supported by <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>. For example when a hardware vendor
   uses a specific device, such as a hardware RAID controller, which needs a
   binary driver to be recognized by the operating system. The vendor typically
   releases a Driver Update Disk (DUD) with the fixed or updated version of the
   required driver.
  </p><p>
   In both cases you need to access the installed system in the rescue mode and
   fix the kernel related problem, otherwise the system may fail to boot
   correctly:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Boot from the <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> installation media.
    </p></li><li class="step "><p>
     If you are recovering after a faulty kernel update, skip this step. If you
     need to use a driver update disk (DUD), press <span class="keycap">F6</span> to load
     the driver update after the boot menu appears, and choose the path or URL
     to the driver update and confirm with <span class="guimenu">Yes</span>.
    </p></li><li class="step "><p>
     Choose <span class="guimenu">Rescue System</span> from the boot menu and press
     <span class="keycap">Enter</span>. If you chose to use DUD, you will be asked to
     specify where the driver update is stored.
    </p></li><li class="step "><p>
     Enter <code class="literal">root</code> at the <code class="literal">Rescue:</code> prompt. A
     password is not required.
    </p></li><li class="step "><p>
     Manually mount the target system and <span class="quote">“<span class="quote">change root</span>”</span> into the
     new environment. For more information, see
     <a class="xref" href="#sec.trouble.data.recover.rescue.access" title="34.5.2.3. Accessing the Installed System">Section 34.5.2.3, “Accessing the Installed System”</a>.
    </p></li><li class="step "><p>
     If using DUD, install/re-install/update the faulty device driver package.
     Always make sure the installed kernel version exactly matches the version
     of the driver you are installing.
    </p><p>
     If fixing faulty kernel update installation, you can install the original
     kernel from the installation media with the following procedure.
    </p><ol type="a" class="substeps "><li class="step "><p>
       Identify your DVD device with <code class="command">hwinfo --cdrom</code> and
       mount it with <code class="command">mount /dev/sr0 /mnt</code>.
      </p></li><li class="step "><p>
       Navigate to the directory where your kernel files are stored on the DVD,
       for example <code class="command">cd /mnt/suse/x86_64/</code>.
      </p></li><li class="step "><p>
       Install required <code class="systemitem">kernel-*</code>,
       <code class="systemitem">kernel-*-base</code>, and
       <code class="systemitem">kernel-*-extra</code> packages of your flavor with the
       <code class="command">rpm -i</code> command.
      </p></li></ol></li><li class="step "><p>
     Update configuration files and reinitialize the boot loader if needed. For
     more information, see
     <a class="xref" href="#sec.trouble.data.recover.rescue.grub" title="34.5.2.4. Modifying and Re-installing the Boot Loader">Section 34.5.2.4, “Modifying and Re-installing the Boot Loader”</a>.
    </p></li><li class="step "><p>
     Remove any bootable media from the system drive and reboot.
    </p></li></ol></div></div></div></div></div></div></div><div class="appendix " id="app.nwscheme"><div class="titlepage"><div><div><h1 class="title"><span class="number">A </span><span class="name">An Example Network</span> <a title="Permalink" class="permalink" href="#app.nwscheme">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>network_scheme.xml</li><li><span class="ds-label">ID: </span>app.nwscheme</li></ul></div></div></div></div><div class="line"></div><p>
  This example network is used across all network-related chapters of the
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> documentation.
 </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/network_schema.png"><img src="images/network_schema.png" width="" /></a></div></div></div><div class="legal-section"><div class="appendix " id="idm139698745195120"><div class="titlepage"><div><div><h1 class="title"><span class="number">B </span><span class="name">GNU Licenses</span> <a title="Permalink" class="permalink" href="#idm139698745195120">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_legal.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#idm139698745190480"><span class="number">B.1 </span><span class="name">GNU Free Documentation License</span></a></span></dt></dl></div></div><p>
  This appendix contains the GNU Free Documentation License version 1.2.
 </p><div class="sect1 " id="idm139698745190480"><div class="titlepage"><div><div><h2 class="title legal" id="idm139698745190480"><span class="name">GNU Free Documentation License</span> <a title="Permalink" class="permalink" href="#idm139698745190480">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>common_gfdl1.2_i.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St,
  Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and
  distribute verbatim copies of this license document, but changing it is not
  allowed.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745186960"><span class="name">
    0. PREAMBLE
  </span><a title="Permalink" class="permalink" href="#idm139698745186960">#</a></h5></div><p>
  The purpose of this License is to make a manual, textbook, or other
  functional and useful document "free" in the sense of freedom: to assure
  everyone the effective freedom to copy and redistribute it, with or without
  modifying it, either commercially or non-commercially. Secondarily, this
  License preserves for the author and publisher a way to get credit for their
  work, while not being considered responsible for modifications made by
  others.
 </p><p>
  This License is a kind of "copyleft", which means that derivative works of
  the document must themselves be free in the same sense. It complements the
  GNU General Public License, which is a copyleft license designed for free
  software.
 </p><p>
  We have designed this License to use it for manuals for free software,
  because free software needs free documentation: a free program should come
  with manuals providing the same freedoms that the software does. But this
  License is not limited to software manuals; it can be used for any textual
  work, regardless of subject matter or whether it is published as a printed
  book. We recommend this License principally for works whose purpose is
  instruction or reference.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745183760"><span class="name">
    1. APPLICABILITY AND DEFINITIONS
  </span><a title="Permalink" class="permalink" href="#idm139698745183760">#</a></h5></div><p>
  This License applies to any manual or other work, in any medium, that
  contains a notice placed by the copyright holder saying it can be distributed
  under the terms of this License. Such a notice grants a world-wide,
  royalty-free license, unlimited in duration, to use that work under the
  conditions stated herein. The "Document", below, refers to any such manual or
  work. Any member of the public is a licensee, and is addressed as "you". You
  accept the license if you copy, modify or distribute the work in a way
  requiring permission under copyright law.
 </p><p>
  A "Modified Version" of the Document means any work containing the Document
  or a portion of it, either copied verbatim, or with modifications and/or
  translated into another language.
 </p><p>
  A "Secondary Section" is a named appendix or a front-matter section of the
  Document that deals exclusively with the relationship of the publishers or
  authors of the Document to the Document's overall subject (or to related
  matters) and contains nothing that could fall directly within that overall
  subject. (Thus, if the Document is in part a textbook of mathematics, a
  Secondary Section may not explain any mathematics.) The relationship could be
  a matter of historical connection with the subject or with related matters,
  or of legal, commercial, philosophical, ethical or political position
  regarding them.
 </p><p>
  The "Invariant Sections" are certain Secondary Sections whose titles are
  designated, as being those of Invariant Sections, in the notice that says
  that the Document is released under this License. If a section does not fit
  the above definition of Secondary then it is not allowed to be designated as
  Invariant. The Document may contain zero Invariant Sections. If the Document
  does not identify any Invariant Sections then there are none.
 </p><p>
  The "Cover Texts" are certain short passages of text that are listed, as
  Front-Cover Texts or Back-Cover Texts, in the notice that says that the
  Document is released under this License. A Front-Cover Text may be at most 5
  words, and a Back-Cover Text may be at most 25 words.
 </p><p>
  A "Transparent" copy of the Document means a machine-readable copy,
  represented in a format whose specification is available to the general
  public, that is suitable for revising the document straightforwardly with
  generic text editors or (for images composed of pixels) generic paint
  programs or (for drawings) some widely available drawing editor, and that is
  suitable for input to text formatters or for automatic translation to a
  variety of formats suitable for input to text formatters. A copy made in an
  otherwise Transparent file format whose markup, or absence of markup, has
  been arranged to thwart or discourage subsequent modification by readers is
  not Transparent. An image format is not Transparent if used for any
  substantial amount of text. A copy that is not "Transparent" is called
  "Opaque".
 </p><p>
  Examples of suitable formats for Transparent copies include plain ASCII
  without markup, Texinfo input format, LaTeX input format, SGML or XML using a
  publicly available DTD, and standard-conforming simple HTML, PostScript or
  PDF designed for human modification. Examples of transparent image formats
  include PNG, XCF and JPG. Opaque formats include proprietary formats that can
  be read and edited only by proprietary word processors, SGML or XML for which
  the DTD and/or processing tools are not generally available, and the
  machine-generated HTML, PostScript or PDF produced by some word processors
  for output purposes only.
 </p><p>
  The "Title Page" means, for a printed book, the title page itself, plus such
  following pages as are needed to hold, legibly, the material this License
  requires to appear in the title page. For works in formats which do not have
  any title page as such, "Title Page" means the text near the most prominent
  appearance of the work's title, preceding the beginning of the body of the
  text.
 </p><p>
  A section "Entitled XYZ" means a named subunit of the Document whose title
  either is precisely XYZ or contains XYZ in parentheses following text that
  translates XYZ in another language. (Here XYZ stands for a specific section
  name mentioned below, such as "Acknowledgements", "Dedications",
  "Endorsements", or "History".) To "Preserve the Title" of such a section when
  you modify the Document means that it remains a section "Entitled XYZ"
  according to this definition.
 </p><p>
  The Document may include Warranty Disclaimers next to the notice which states
  that this License applies to the Document. These Warranty Disclaimers are
  considered to be included by reference in this License, but only as regards
  disclaiming warranties: any other implication that these Warranty Disclaimers
  may have is void and has no effect on the meaning of this License.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745173824"><span class="name">
    2. VERBATIM COPYING
  </span><a title="Permalink" class="permalink" href="#idm139698745173824">#</a></h5></div><p>
  You may copy and distribute the Document in any medium, either commercially
  or non-commercially, provided that this License, the copyright notices, and
  the license notice saying this License applies to the Document are reproduced
  in all copies, and that you add no other conditions whatsoever to those of
  this License. You may not use technical measures to obstruct or control the
  reading or further copying of the copies you make or distribute. However, you
  may accept compensation in exchange for copies. If you distribute a large
  enough number of copies you must also follow the conditions in section 3.
 </p><p>
  You may also lend copies, under the same conditions stated above, and you may
  publicly display copies.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745171488"><span class="name">
    3. COPYING IN QUANTITY
  </span><a title="Permalink" class="permalink" href="#idm139698745171488">#</a></h5></div><p>
  If you publish printed copies (or copies in media that commonly have printed
  covers) of the Document, numbering more than 100, and the Document's license
  notice requires Cover Texts, you must enclose the copies in covers that
  carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the
  front cover, and Back-Cover Texts on the back cover. Both covers must also
  clearly and legibly identify you as the publisher of these copies. The front
  cover must present the full title with all words of the title equally
  prominent and visible. You may add other material on the covers in addition.
  Copying with changes limited to the covers, as long as they preserve the
  title of the Document and satisfy these conditions, can be treated as
  verbatim copying in other respects.
 </p><p>
  If the required texts for either cover are too voluminous to fit legibly, you
  should put the first ones listed (as many as fit reasonably) on the actual
  cover, and continue the rest onto adjacent pages.
 </p><p>
  If you publish or distribute Opaque copies of the Document numbering more
  than 100, you must either include a machine-readable Transparent copy along
  with each Opaque copy, or state in or with each Opaque copy a
  computer-network location from which the general network-using public has
  access to download using public-standard network protocols a complete
  Transparent copy of the Document, free of added material. If you use the
  latter option, you must take reasonably prudent steps, when you begin
  distribution of Opaque copies in quantity, to ensure that this Transparent
  copy will remain thus accessible at the stated location until at least one
  year after the last time you distribute an Opaque copy (directly or through
  your agents or retailers) of that edition to the public.
 </p><p>
  It is requested, but not required, that you contact the authors of the
  Document well before redistributing any large number of copies, to give them
  a chance to provide you with an updated version of the Document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745166992"><span class="name">
    4. MODIFICATIONS
  </span><a title="Permalink" class="permalink" href="#idm139698745166992">#</a></h5></div><p>
  You may copy and distribute a Modified Version of the Document under the
  conditions of sections 2 and 3 above, provided that you release the Modified
  Version under precisely this License, with the Modified Version filling the
  role of the Document, thus licensing distribution and modification of the
  Modified Version to whoever possesses a copy of it. In addition, you must do
  these things in the Modified Version:
 </p><div class="orderedlist "><ol class="orderedlist" type="A"><li class="listitem "><p>
    Use in the Title Page (and on the covers, if any) a title distinct from
    that of the Document, and from those of previous versions (which should, if
    there were any, be listed in the History section of the Document). You may
    use the same title as a previous version if the original publisher of that
    version gives permission.
   </p></li><li class="listitem "><p>
    List on the Title Page, as authors, one or more persons or entities
    responsible for authorship of the modifications in the Modified Version,
    together with at least five of the principal authors of the Document (all
    of its principal authors, if it has fewer than five), unless they release
    you from this requirement.
   </p></li><li class="listitem "><p>
    State on the Title page the name of the publisher of the Modified Version,
    as the publisher.
   </p></li><li class="listitem "><p>
    Preserve all the copyright notices of the Document.
   </p></li><li class="listitem "><p>
    Add an appropriate copyright notice for your modifications adjacent to the
    other copyright notices.
   </p></li><li class="listitem "><p>
    Include, immediately after the copyright notices, a license notice giving
    the public permission to use the Modified Version under the terms of this
    License, in the form shown in the Addendum below.
   </p></li><li class="listitem "><p>
    Preserve in that license notice the full lists of Invariant Sections and
    required Cover Texts given in the Document's license notice.
   </p></li><li class="listitem "><p>
    Include an unaltered copy of this License.
   </p></li><li class="listitem "><p>
    Preserve the section Entitled "History", Preserve its Title, and add to it
    an item stating at least the title, year, new authors, and publisher of the
    Modified Version as given on the Title Page. If there is no section
    Entitled "History" in the Document, create one stating the title, year,
    authors, and publisher of the Document as given on its Title Page, then add
    an item describing the Modified Version as stated in the previous sentence.
   </p></li><li class="listitem "><p>
    Preserve the network location, if any, given in the Document for public
    access to a Transparent copy of the Document, and likewise the network
    locations given in the Document for previous versions it was based on.
    These may be placed in the "History" section. You may omit a network
    location for a work that was published at least four years before the
    Document itself, or if the original publisher of the version it refers to
    gives permission.
   </p></li><li class="listitem "><p>
    For any section Entitled "Acknowledgements" or "Dedications", Preserve the
    Title of the section, and preserve in the section all the substance and
    tone of each of the contributor acknowledgements and/or dedications given
    therein.
   </p></li><li class="listitem "><p>
    Preserve all the Invariant Sections of the Document, unaltered in their
    text and in their titles. Section numbers or the equivalent are not
    considered part of the section titles.
   </p></li><li class="listitem "><p>
    Delete any section Entitled "Endorsements". Such a section may not be
    included in the Modified Version.
   </p></li><li class="listitem "><p>
    Do not retitle any existing section to be Entitled "Endorsements" or to
    conflict in title with any Invariant Section.
   </p></li><li class="listitem "><p>
    Preserve any Warranty Disclaimers.
   </p></li></ol></div><p>
  If the Modified Version includes new front-matter sections or appendices that
  qualify as Secondary Sections and contain no material copied from the
  Document, you may at your option designate some or all of these sections as
  invariant. To do this, add their titles to the list of Invariant Sections in
  the Modified Version's license notice. These titles must be distinct from any
  other section titles.
 </p><p>
  You may add a section Entitled "Endorsements", provided it contains nothing
  but endorsements of your Modified Version by various parties--for example,
  statements of peer review or that the text has been approved by an
  organization as the authoritative definition of a standard.
 </p><p>
  You may add a passage of up to five words as a Front-Cover Text, and a
  passage of up to 25 words as a Back-Cover Text, to the end of the list of
  Cover Texts in the Modified Version. Only one passage of Front-Cover Text and
  one of Back-Cover Text may be added by (or through arrangements made by) any
  one entity. If the Document already includes a cover text for the same cover,
  previously added by you or by arrangement made by the same entity you are
  acting on behalf of, you may not add another; but you may replace the old
  one, on explicit permission from the previous publisher that added the old
  one.
 </p><p>
  The author(s) and publisher(s) of the Document do not by this License give
  permission to use their names for publicity for or to assert or imply
  endorsement of any Modified Version.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745144896"><span class="name">
    5. COMBINING DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#idm139698745144896">#</a></h5></div><p>
  You may combine the Document with other documents released under this
  License, under the terms defined in section 4 above for modified versions,
  provided that you include in the combination all of the Invariant Sections of
  all of the original documents, unmodified, and list them all as Invariant
  Sections of your combined work in its license notice, and that you preserve
  all their Warranty Disclaimers.
 </p><p>
  The combined work need only contain one copy of this License, and multiple
  identical Invariant Sections may be replaced with a single copy. If there are
  multiple Invariant Sections with the same name but different contents, make
  the title of each such section unique by adding at the end of it, in
  parentheses, the name of the original author or publisher of that section if
  known, or else a unique number. Make the same adjustment to the section
  titles in the list of Invariant Sections in the license notice of the
  combined work.
 </p><p>
  In the combination, you must combine any sections Entitled "History" in the
  various original documents, forming one section Entitled "History"; likewise
  combine any sections Entitled "Acknowledgements", and any sections Entitled
  "Dedications". You must delete all sections Entitled "Endorsements".
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745141600"><span class="name">
    6. COLLECTIONS OF DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#idm139698745141600">#</a></h5></div><p>
  You may make a collection consisting of the Document and other documents
  released under this License, and replace the individual copies of this
  License in the various documents with a single copy that is included in the
  collection, provided that you follow the rules of this License for verbatim
  copying of each of the documents in all other respects.
 </p><p>
  You may extract a single document from such a collection, and distribute it
  individually under this License, provided you insert a copy of this License
  into the extracted document, and follow this License in all other respects
  regarding verbatim copying of that document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745139344"><span class="name">
    7. AGGREGATION WITH INDEPENDENT WORKS
  </span><a title="Permalink" class="permalink" href="#idm139698745139344">#</a></h5></div><p>
  A compilation of the Document or its derivatives with other separate and
  independent documents or works, in or on a volume of a storage or
  distribution medium, is called an "aggregate" if the copyright resulting from
  the compilation is not used to limit the legal rights of the compilation's
  users beyond what the individual works permit. When the Document is included
  in an aggregate, this License does not apply to the other works in the
  aggregate which are not themselves derivative works of the Document.
 </p><p>
  If the Cover Text requirement of section 3 is applicable to these copies of
  the Document, then if the Document is less than one half of the entire
  aggregate, the Document's Cover Texts may be placed on covers that bracket
  the Document within the aggregate, or the electronic equivalent of covers if
  the Document is in electronic form. Otherwise they must appear on printed
  covers that bracket the whole aggregate.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745136768"><span class="name">
    8. TRANSLATION
  </span><a title="Permalink" class="permalink" href="#idm139698745136768">#</a></h5></div><p>
  Translation is considered a kind of modification, so you may distribute
  translations of the Document under the terms of section 4. Replacing
  Invariant Sections with translations requires special permission from their
  copyright holders, but you may include translations of some or all Invariant
  Sections in addition to the original versions of these Invariant Sections.
  You may include a translation of this License, and all the license notices in
  the Document, and any Warranty Disclaimers, provided that you also include
  the original English version of this License and the original versions of
  those notices and disclaimers. In case of a disagreement between the
  translation and the original version of this License or a notice or
  disclaimer, the original version will prevail.
 </p><p>
  If a section in the Document is Entitled "Acknowledgements", "Dedications",
  or "History", the requirement (section 4) to Preserve its Title (section 1)
  will typically require changing the actual title.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745134176"><span class="name">
    9. TERMINATION
  </span><a title="Permalink" class="permalink" href="#idm139698745134176">#</a></h5></div><p>
  You may not copy, modify, sublicense, or distribute the Document except as
  expressly provided for under this License. Any other attempt to copy, modify,
  sublicense or distribute the Document is void, and will automatically
  terminate your rights under this License. However, parties who have received
  copies, or rights, from you under this License will not have their licenses
  terminated so long as such parties remain in full compliance.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745132576"><span class="name">
    10. FUTURE REVISIONS OF THIS LICENSE
  </span><a title="Permalink" class="permalink" href="#idm139698745132576">#</a></h5></div><p>
  The Free Software Foundation may publish new, revised versions of the GNU
  Free Documentation License from time to time. Such new versions will be
  similar in spirit to the present version, but may differ in detail to address
  new problems or concerns. See
  <a class="link" href="http://www.gnu.org/copyleft/" target="_blank">http://www.gnu.org/copyleft/</a>.
 </p><p>
  Each version of the License is given a distinguishing version number. If the
  Document specifies that a particular numbered version of this License "or any
  later version" applies to it, you have the option of following the terms and
  conditions either of that specified version or of any later version that has
  been published (not as a draft) by the Free Software Foundation. If the
  Document does not specify a version number of this License, you may choose
  any version ever published (not as a draft) by the Free Software Foundation.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="idm139698745129392"><span class="name">
    ADDENDUM: How to use this License for your documents
  </span><a title="Permalink" class="permalink" href="#idm139698745129392">#</a></h5></div><div class="verbatim-wrap"><pre class="screen">Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</pre></div><p>
  If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
  replace the “with...Texts.” line with this:
 </p><div class="verbatim-wrap"><pre class="screen">with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</pre></div><p>
  If you have Invariant Sections without Cover Texts, or some other combination
  of the three, merge those two alternatives to suit the situation.
 </p><p>
  If your document contains nontrivial examples of program code, we recommend
  releasing these examples in parallel under your choice of free software
  license, such as the GNU General Public License, to permit their use in free
  software.
 </p></div></div></div></div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>