<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Virtualization: Configuration Options and Settings | Virtualization Guide | SUSE Linux Enterprise Server 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="15" /><meta name="book-title" content="Virtualization Guide" /><meta name="chapter-title" content="Chapter 22. Virtualization: Configuration Options and Settings" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Server 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="part.virt.xen.html" title="Part IV. Managing Virtual Machines with Xen" /><link rel="prev" href="cha.xen.vbd.html" title="Chapter 21. Block Devices in Xen" /><link rel="next" href="cha.xen.admin.html" title="Chapter 23. Administrative Tasks" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.virt.html">Virtualization Guide</a><span> › </span><a class="crumb" href="part.virt.xen.html">Managing Virtual Machines with Xen</a><span> › </span><a class="crumb" href="cha.xen.config.html">Virtualization: Configuration Options and Settings</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Virtualization Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="cha.kvm.html"><span class="number"> </span><span class="name">About This Manual</span></a></li><li class="inactive"><a href="part.virt.intro.html"><span class="number">I </span><span class="name">Introduction</span></a><ol><li class="inactive"><a href="chap.virtualization.introduction.html"><span class="number">1 </span><span class="name">Virtualization Technology</span></a></li><li class="inactive"><a href="cha.xen.basics.html"><span class="number">2 </span><span class="name">Introduction to Xen Virtualization</span></a></li><li class="inactive"><a href="cha.kvm.intro.html"><span class="number">3 </span><span class="name">Introduction to KVM Virtualization</span></a></li><li class="inactive"><a href="cha.containers.intro.html"><span class="number">4 </span><span class="name">Introduction to Linux Containers</span></a></li><li class="inactive"><a href="cha.tools.intro.html"><span class="number">5 </span><span class="name">Virtualization Tools</span></a></li><li class="inactive"><a href="cha.vt.installation.html"><span class="number">6 </span><span class="name">Installation of Virtualization Components</span></a></li><li class="inactive"><a href="cha.virt.support.html"><span class="number">7 </span><span class="name">Supported Guests, Hosts and Features</span></a></li></ol></li><li class="inactive"><a href="part.virt.libvirt.html"><span class="number">II </span><span class="name">Managing Virtual Machines with <code class="systemitem">libvirt</code></span></a><ol><li class="inactive"><a href="cha.libvirt.overview.html"><span class="number">8 </span><span class="name">Starting and Stopping <code class="systemitem">libvirtd</code></span></a></li><li class="inactive"><a href="cha.kvm.inst.html"><span class="number">9 </span><span class="name">Guest Installation</span></a></li><li class="inactive"><a href="cha.libvirt.managing.html"><span class="number">10 </span><span class="name">Basic VM Guest Management</span></a></li><li class="inactive"><a href="cha.libvirt.connect.html"><span class="number">11 </span><span class="name">Connecting and Authorizing</span></a></li><li class="inactive"><a href="cha.libvirt.storage.html"><span class="number">12 </span><span class="name">Managing Storage</span></a></li><li class="inactive"><a href="cha.libvirt.networks.html"><span class="number">13 </span><span class="name">Managing Networks</span></a></li><li class="inactive"><a href="cha.libvirt.config.html"><span class="number">14 </span><span class="name">Configuring Virtual Machines</span></a></li></ol></li><li class="inactive"><a href="part.virt.common.html"><span class="number">III </span><span class="name">Hypervisor-Independent Features</span></a><ol><li class="inactive"><a href="cha.cachemodes.html"><span class="number">15 </span><span class="name">Disk Cache Modes</span></a></li><li class="inactive"><a href="sec.kvm.managing.clock.html"><span class="number">16 </span><span class="name">VM Guest Clock Settings</span></a></li><li class="inactive"><a href="chap.guestfs.html"><span class="number">17 </span><span class="name">libguestfs</span></a></li></ol></li><li class="inactive"><a href="part.virt.xen.html"><span class="number">IV </span><span class="name">Managing Virtual Machines with Xen</span></a><ol><li class="inactive"><a href="cha.xen.vhost.html"><span class="number">18 </span><span class="name">Setting Up a Virtual Machine Host</span></a></li><li class="inactive"><a href="cha.xen.network.html"><span class="number">19 </span><span class="name">Virtual Networking</span></a></li><li class="inactive"><a href="cha.xen.manage.html"><span class="number">20 </span><span class="name">Managing a Virtualization Environment</span></a></li><li class="inactive"><a href="cha.xen.vbd.html"><span class="number">21 </span><span class="name">Block Devices in Xen</span></a></li><li class="inactive"><a href="cha.xen.config.html"><span class="number">22 </span><span class="name">Virtualization: Configuration Options and Settings</span></a></li><li class="inactive"><a href="cha.xen.admin.html"><span class="number">23 </span><span class="name">Administrative Tasks</span></a></li><li class="inactive"><a href="cha.xen.xenstore.html"><span class="number">24 </span><span class="name">XenStore: Configuration Database Shared between Domains</span></a></li><li class="inactive"><a href="cha.xen.ha.html"><span class="number">25 </span><span class="name">Xen as a High-Availability Virtualization Host</span></a></li></ol></li><li class="inactive"><a href="part.virt.qemu.html"><span class="number">V </span><span class="name">Managing Virtual Machines with QEMU</span></a><ol><li class="inactive"><a href="cha.qemu.overview.html"><span class="number">26 </span><span class="name">QEMU Overview</span></a></li><li class="inactive"><a href="cha.qemu.host.html"><span class="number">27 </span><span class="name">Setting Up a KVM VM Host Server</span></a></li><li class="inactive"><a href="cha.qemu.guest_inst.html"><span class="number">28 </span><span class="name">Guest Installation</span></a></li><li class="inactive"><a href="cha.qemu.running.html"><span class="number">29 </span><span class="name">Running Virtual Machines with qemu-system-ARCH</span></a></li><li class="inactive"><a href="cha.qemu.monitor.html"><span class="number">30 </span><span class="name">Virtual Machine Administration Using QEMU Monitor</span></a></li></ol></li><li class="inactive"><a href="part.virt.lxc.html"><span class="number">VI </span><span class="name">Managing Virtual Machines with LXC</span></a><ol><li class="inactive"><a href="cha.lxc.html"><span class="number">31 </span><span class="name">Linux Containers</span></a></li><li class="inactive"><a href="cha.lxc2libvirt.html"><span class="number">32 </span><span class="name">Migration from LXC to <code class="systemitem">libvirt-lxc</code></span></a></li></ol></li><li class="inactive"><a href="gloss.vt.glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="app.vmdp.driver.html"><span class="number">A </span><span class="name">Virtual Machine Drivers</span></a></li><li class="inactive"><a href="app.kvm.html"><span class="number">B </span><span class="name">Appendix</span></a></li><li class="inactive"><a href="cha.xmtoxl.html"><span class="number">C </span><span class="name">XM, XL Toolstacks and Libvirt framework</span></a></li><li class="inactive"><a href="bk11apd.html"><span class="number">D </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 21. Block Devices in Xen" href="cha.xen.vbd.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 23. Administrative Tasks" href="cha.xen.admin.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.virt.html">Virtualization Guide</a><span> › </span><a class="crumb" href="part.virt.xen.html">Managing Virtual Machines with Xen</a><span> › </span><a class="crumb" href="cha.xen.config.html">Virtualization: Configuration Options and Settings</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 21. Block Devices in Xen" href="cha.xen.vbd.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 23. Administrative Tasks" href="cha.xen.admin.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.xen.config"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">22 </span><span class="name">Virtualization: Configuration Options and Settings</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>xen_config_options.xml</li><li><span class="ds-label">ID: </span>cha.xen.config</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.xen.config.html#sec.xen.config.vcd"><span class="number">22.1 </span><span class="name">Virtual CD Readers</span></a></span></dt><dt><span class="sect1"><a href="cha.xen.config.html#sec.xen.config.remote.access"><span class="number">22.2 </span><span class="name">Remote Access Methods</span></a></span></dt><dt><span class="sect1"><a href="cha.xen.config.html#sec.xen.config.vnc"><span class="number">22.3 </span><span class="name">VNC Viewer</span></a></span></dt><dt><span class="sect1"><a href="cha.xen.config.html#sec.xen.config.keyboard"><span class="number">22.4 </span><span class="name">Virtual Keyboards</span></a></span></dt><dt><span class="sect1"><a href="cha.xen.config.html#xen.config.cpupinning"><span class="number">22.5 </span><span class="name">Dedicating CPU Resources</span></a></span></dt><dt><span class="sect1"><a href="cha.xen.config.html#sec.xen.config.hvm"><span class="number">22.6 </span><span class="name">HVM Features</span></a></span></dt></dl></div></div><p>
  The documentation in this section, describes advanced management tasks and
  configuration options that might help technology innovators implement
  leading-edge virtualization solutions. It is provided as a courtesy and
  does not imply that all documented options and tasks are supported by
  Novell, Inc.
 </p><div class="sect1 " id="sec.xen.config.vcd"><div class="titlepage"><div><div><h2 class="title" id="sec.xen.config.vcd"><span class="number">22.1 </span><span class="name">Virtual CD Readers</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vcd">#</a></h2></div></div></div><p>
   Virtual CD readers can be set up when a virtual machine is created or
   added to an existing virtual machine. A virtual CD reader can be based on
   a physical CD/DVD, or based on an ISO image. Virtual CD readers work
   differently depending on whether they are paravirtual or fully virtual.
  </p><div class="sect2 " id="sec.xen.config.vcd.para"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.vcd.para"><span class="number">22.1.1 </span><span class="name">Virtual CD Readers on Paravirtual Machines</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vcd.para">#</a></h3></div></div></div><p>
    A paravirtual machine can have up to 100 block devices composed of
    virtual CD readers and virtual disks. On paravirtual machines, virtual
    CD readers present the CD as a virtual disk with read-only access.
    Virtual CD readers cannot be used to write data to a CD.
   </p><p>
    After you have finished accessing a CD on a paravirtual machine, it is
    recommended that you remove the virtual CD reader from the virtual
    machine.
   </p><p>
    Paravirtualized guests can use the device type
    <code class="literal">devtype=cdrom</code>. This partly emulates the behavior of a
    real CD reader, and allows CDs to be changed. It is even possible to use
    the eject command to open the tray of the CD reader.
   </p></div><div class="sect2 " id="sec.xen.config.vcd.full"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.vcd.full"><span class="number">22.1.2 </span><span class="name">Virtual CD Readers on Fully Virtual Machines</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vcd.full">#</a></h3></div></div></div><p>
    A fully virtual machine can have up to four block devices composed of
    virtual CD readers and virtual disks. A virtual CD reader on a fully
    virtual machine interacts with an inserted CD in the way you would
    expect a physical CD reader to interact.
   </p><p>
    When a CD is inserted in the physical CD reader on the host computer,
    all virtual machines with virtual CD readers based on the physical CD
    reader, such as <code class="filename">/dev/cdrom/</code>, can read the
    inserted CD. Assuming the operating system has automount functionality,
    the CD should automatically appear in the file system. Virtual CD
    readers cannot be used to write data to a CD. They are configured as
    read-only devices.
   </p></div><div class="sect2 " id="sec.xen.config.vcd.add"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.vcd.add"><span class="number">22.1.3 </span><span class="name">Adding Virtual CD Readers</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vcd.add">#</a></h3></div></div></div><p>
    Virtual CD readers can be based on a CD inserted into the CD reader or
    on an ISO image file.
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Make sure that the virtual machine is running and the operating system
      has finished booting.
     </p></li><li class="step "><p>
      Insert the desired CD into the physical CD reader or copy the desired
      ISO image to a location available to Dom0.
     </p></li><li class="step "><p>
      Select a new, unused block device in your VM Guest, such as
      <code class="filename">/dev/xvdb</code>.
     </p></li><li class="step "><p>
      Choose the CD reader or ISO image that you want to assign to the
      guest.
     </p></li><li class="step "><p>
      When using a real CD reader, use the following command to assign the
      CD reader to your VM Guest. In this example, the name of the guest
      is alice:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl block-attach alice target=/dev/sr0,vdev=xvdb,access=ro</pre></div></li><li class="step "><p>
      When assigning an image file, use the following command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl block-attach alice target=/path/to/file.iso,vdev=xvdb,access=ro</pre></div></li><li class="step "><p>
      A new block device, such as <code class="filename">/dev/xvdb</code>, is added
      to the virtual machine.
     </p></li><li class="step "><p>
      If the virtual machine is running Linux, complete the following:
     </p><ol type="a" class="substeps "><li class="step "><p>
        Open a terminal in the virtual machine and enter <code class="command">fdisk
        -l</code> to verify that the device was properly added. You can
        also enter <code class="command">ls /sys/block</code> to see all disks
        available to the virtual machine.
       </p><p>
        The CD is recognized by the virtual machine as a virtual disk with a
        drive designation, for example:
       </p><div class="verbatim-wrap"><pre class="screen">/dev/xvdb</pre></div></li><li class="step "><p>
        Enter the command to mount the CD or ISO image using its drive
        designation. For example,
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> mount -o ro /dev/xvdb /mnt</pre></div><p>
        mounts the CD to a mount point named <code class="command">/mnt</code>.
       </p><p>
        The CD or ISO image file should be available to the virtual machine
        at the specified mount point.
       </p></li></ol></li><li class="step "><p>
      If the virtual machine is running Windows, reboot the virtual machine.
     </p><p>
      Verify that the virtual CD reader appears in its <code class="literal">My
      Computer</code> section.
     </p></li></ol></div></div></div><div class="sect2 " id="sec.xen.config.vcd.remove"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.vcd.remove"><span class="number">22.1.4 </span><span class="name">Removing Virtual CD Readers</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vcd.remove">#</a></h3></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Make sure that the virtual machine is running and the operating system
      has finished booting.
     </p></li><li class="step "><p>
      If the virtual CD reader is mounted, unmount it from within the
      virtual machine.
     </p></li><li class="step "><p>
      Enter <code class="command">xl block-list alice</code> on the host view of the
      guest block devices.
     </p></li><li class="step "><p>
      Enter <code class="command">xl block-detach alice</code>
      <em class="replaceable ">BLOCK_DEV_ID</em> to remove the virtual device
      from the guest. If that fails, try to add <code class="option">-f</code> to force
      the removal.
     </p></li><li class="step "><p>
      Press the hardware eject button to eject the CD.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.xen.config.remote.access"><div class="titlepage"><div><div><h2 class="title" id="sec.xen.config.remote.access"><span class="number">22.2 </span><span class="name">Remote Access Methods</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.remote.access">#</a></h2></div></div></div><p>
   Some configurations, such as those that include rack-mounted servers,
   require a computer to run without a video monitor, keyboard, or mouse.
   This type of configuration is often called <code class="literal">headless</code> and
   requires the use of remote administration technologies.
  </p><p>
   Typical configuration scenarios and technologies include:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140017029835536"><span class="term ">Graphical Desktop with X Window Server</span></dt><dd><p>
      If a graphical desktop, such as GNOME, is installed on the virtual
      machine host, you can use a remote viewer, such as a VNC viewer. On a
      remote computer, log in and manage the remote guest environment by
      using graphical tools, such as <code class="command">tigervnc</code> or
      <code class="command">virt-viewer</code>.
     </p></dd><dt id="idm140017029832640"><span class="term ">Text Only</span></dt><dd><p>
      You can use the <code class="command">ssh</code> command from a remote computer
      to log in to a virtual machine host and access its text-based console.
      You can then use the <code class="command">xl</code> command to manage virtual
      machines, and the <code class="command">virt-install</code> command to create new virtual machines.
     </p></dd></dl></div></div><div class="sect1 " id="sec.xen.config.vnc"><div class="titlepage"><div><div><h2 class="title" id="sec.xen.config.vnc"><span class="number">22.3 </span><span class="name">VNC Viewer</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vnc">#</a></h2></div></div></div><p>
   VNC viewer is used to view the environment of the running guest system in
   a graphical way. You can use it from Dom0 (known as local access or
   on-box access), or from a remote computer.
  </p><p>
   You can use the IP address of a VM Host Server and a VNC viewer to view the
   display of this VM Guest. When a virtual machine is running, the VNC
   server on the host assigns the virtual machine a port number to be used
   for VNC viewer connections. The assigned port number is the lowest port
   number available when the virtual machine starts. The number is only
   available for the virtual machine while it is running. After shutting
   down, the port number might be assigned to other virtual machines.
  </p><p>
   For example, if ports 1 and 2 and 4 and 5 are assigned to the running
   virtual machines, the VNC viewer assigns the lowest available port
   number, 3. If port number 3 is still in use the next time the virtual
   machine starts, the VNC server assigns a different port number to the
   virtual machine.
  </p><p>
   To use the VNC viewer from a remote computer, the firewall must permit
   access to as many ports as VM Guest systems run from. This means from
   port 5900 and up. For example, to run 10 VM Guest
   systems, you need to open the TCP ports 5900:5910.
  </p><p>
   To access the virtual machine from the local console running a VNC viewer
   client, enter one of the following commands:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <code class="command">vncviewer ::590#</code>
    </p></li><li class="listitem "><p>
     <code class="command">vncviewer :#</code>
    </p></li></ul></div><p>
   <em class="replaceable ">#</em> is the VNC viewer port number assigned to
   the virtual machine.
  </p><p>
   When accessing the VM Guest from a machine other than Dom0, use
   the following syntax:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>vncviewer 192.168.1.20::590#</pre></div><p>
   In this case, the IP address of Dom0 is 192.168.1.20.
  </p><div class="sect2 " id="sec.xen.config.vnc.portnumbers"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.vnc.portnumbers"><span class="number">22.3.1 </span><span class="name">Assigning VNC Viewer Port Numbers to Virtual Machines</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vnc.portnumbers">#</a></h3></div></div></div><p>
    Although the default behavior of VNC viewer is to assign the first
    available port number, you should assign a specific VNC viewer
    port number to a specific virtual machine.
   </p><p>
    To assign a specific port number on a VM Guest, edit the xl setting
    of the virtual machine and change the <code class="literal">vnclisten</code> to
    the desired value. Note that for example for port number 5902, specify 2
    only, as 5900 is added automatically:
   </p><div class="verbatim-wrap"><pre class="screen">vfb = [ 'vnc=1,vnclisten="localhost:2"' ]</pre></div><p>
    For more information regarding editing the xl settings of a guest
    domain, see <a class="xref" href="cha.xen.manage.html#sec.xen.manage.xl" title="20.1. XL—Xen Management Tool">Section 20.1, “XL—Xen Management Tool”</a>.
   </p><div id="idm140017029813136" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6><p>
     Assign higher port numbers to avoid conflict with port numbers assigned
     by the VNC viewer, which uses the lowest available port number.
    </p></div></div><div class="sect2 " id="sec.xen.config.vnc.sdl"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.vnc.sdl"><span class="number">22.3.2 </span><span class="name">Using SDL instead of a VNC Viewer</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.vnc.sdl">#</a></h3></div></div></div><p>
    If you access a virtual machine's display from the virtual machine host
    console (known as local or on-box access), you should use SDL
    instead of VNC viewer. VNC viewer is faster for viewing desktops over a
    network, but SDL is faster for viewing desktops from the same computer.
   </p><p>
    To set the default to use SDL instead of VNC, change the virtual
    machine's configuration information to the following. For instructions,
    see <a class="xref" href="cha.xen.manage.html#sec.xen.manage.xl" title="20.1. XL—Xen Management Tool">Section 20.1, “XL—Xen Management Tool”</a>.
   </p><div class="verbatim-wrap"><pre class="screen">vfb = [ 'sdl=1' ]</pre></div><p>
    Remember that, unlike a VNC viewer window, closing an SDL window
    terminates the virtual machine.
   </p></div></div><div class="sect1 " id="sec.xen.config.keyboard"><div class="titlepage"><div><div><h2 class="title" id="sec.xen.config.keyboard"><span class="number">22.4 </span><span class="name">Virtual Keyboards</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.keyboard">#</a></h2></div></div></div><p>
   When a virtual machine is started, the host creates a virtual keyboard
   that matches the <code class="command">keymap</code> entry according to the virtual
   machine's settings. If there is no <code class="command">keymap</code> entry
   specified, the virtual machine's keyboard defaults to English (US).
  </p><p>
   To view a virtual machine's current <code class="command">keymap</code> entry,
   enter the following command on the Dom0:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>xl list -l <em class="replaceable ">VM_NAME</em> | grep keymap</pre></div><p>
   To configure a virtual keyboard for a guest, use the following snippet:
  </p><div class="verbatim-wrap"><pre class="screen">vfb = [ 'keymap="de"' ]</pre></div><p>
   For a complete list of supported keyboard layouts, see the
   <code class="literal">Keymaps</code> section of the <code class="command">xl.cfg</code>
   manual page <code class="command">man 5 xl.cfg</code>.
  </p></div><div class="sect1 " id="xen.config.cpupinning"><div class="titlepage"><div><div><h2 class="title" id="xen.config.cpupinning"><span class="number">22.5 </span><span class="name">Dedicating CPU Resources</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#xen.config.cpupinning">#</a></h2></div></div></div><p>
   In Xen it is possible to specify how many and which CPU cores the
   Dom0 or VM Guest should use to retain its performance. The
   performance of Dom0 is important for the overall system, as the disk
   and network drivers are running on it. Also I/O intensive guests'
   workloads may consume lots of Dom0s' CPU cycles. On the other hand,
   the performance of VM Guests is also important, to be able to
   accomplish the task they were set up for.
  </p><div class="sect2 " id="config.cpupinning.dom0"><div class="titlepage"><div><div><h3 class="title" id="config.cpupinning.dom0"><span class="number">22.5.1 </span><span class="name">Dom0</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#config.cpupinning.dom0">#</a></h3></div></div></div><p>
    Dedicating CPU resources to Dom0 results in a better overall
    performance of the virtualized environment because Dom0 has free
    CPU time to process I/O requests from VM Guests. Failing to dedicate
    exclusive CPU resources to Dom0 usually results in a poor
    performance and can cause the VM Guests to function incorrectly.
   </p><p>
    Dedicating CPU resources involves three basic steps: modifying Xen
    boot line, binding Dom0's VCPUs to a physical processor, and
    configuring CPU-related options on VM Guests:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      First you need to append the <code class="literal">dom0_max_vcpus=X</code> to
      the Xen boot line. Do so by adding the following line to
      <code class="filename">/etc/default/grub</code>:
     </p><div class="verbatim-wrap"><pre class="screen">GRUB_CMDLINE_XEN="dom0_max_vcpus=X"</pre></div><p>
      If <code class="filename">/etc/default/grub</code> already contains a line
      setting <code class="envar">GRUB_CMDLINE_XEN</code>, rather append
      <code class="literal">dom0_max_vcpus=X</code> to this line.
     </p><p>
      <code class="literal">X</code> needs to be replaced by the number of VCPUs
      dedicated to Dom0.
     </p></li><li class="step "><p>
      Update the GRUB 2 configuration file by running the following
      command:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> grub2-mkconfig -o /boot/grub2/grub.cfg</pre></div></li><li class="step "><p>
      Reboot for the change to take effect.
     </p></li><li class="step "><p>
      The next step is to bind (or <span class="quote">“<span class="quote">pin</span>”</span>) each Dom0's VCPU
      to a physical processor.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl vcpu-pin Domain-0 0 0
xl vcpu-pin Domain-0 1 1</pre></div><p>
      The first line binds Dom0's VCPU number 0 to the physical
      processor number 0, while the second line binds Dom0's VCPU
      number 1 to the physical processor number 1.
     </p></li><li class="step "><p>
      Lastly, you need to make sure no VM Guest uses the physical
      processors dedicated to VCPUs of Dom0. Assuming you are running
      an 8-CPU system, you need to add
     </p><div class="verbatim-wrap"><pre class="screen">cpus="2-8"</pre></div><p>
      to the configuration file of the relevant VM Guest.
     </p></li></ol></div></div></div><div class="sect2 " id="config.cpupinning.domU"><div class="titlepage"><div><div><h3 class="title" id="config.cpupinning.domU"><span class="number">22.5.2 </span><span class="name">VM Guests</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#config.cpupinning.domU">#</a></h3></div></div></div><p>
    It is often necessary to dedicate specific CPU resources to a virtual
    machine. By default, a virtual machine uses any available CPU core. Its
    performance can be improved by assigning a reasonable number of physical
    processors to it as other VM Guests are not allowed to use
    them after that. Assuming a machine with 8 CPU cores while a virtual
    machine needs to use 2 of them, change its configuration file as
    follows:
   </p><div class="verbatim-wrap"><pre class="screen">vcpus=2
cpus="2,3"</pre></div><p>
    The above example dedicates <code class="literal">2</code> processors to the
    VM Guest, and these being the 3rd and 4th one, (<code class="literal">2</code>
    and <code class="literal">3</code> counted from zero). If you need to assign more
    physical processors, use the <code class="literal">cpus="2-8"</code> syntax.
   </p><p>
    If you need to change the CPU assignment for a guest named
    <span class="quote">“<span class="quote">alice</span>”</span> in a hotplug manner, do the following on the
    related Dom0:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl vcpu-set alice 2
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl vcpu-pin alice 0 2
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl vcpu-pin alice 1 3</pre></div><p>
    The example will dedicate 2 physical processors to the guest, and bind
    its VCPU 0 to physical processor 2 and VCPU 1 to physical processor 3.
    Now check the assignment:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> xl vcpu-list alice
Name                              ID VCPUs   CPU State   Time(s) CPU Affinity
alice                             4     0     2   -b-       1.9 2-3
alice                             4     1     3   -b-       2.8 2-3</pre></div></div></div><div class="sect1 " id="sec.xen.config.hvm"><div class="titlepage"><div><div><h2 class="title" id="sec.xen.config.hvm"><span class="number">22.6 </span><span class="name">HVM Features</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.hvm">#</a></h2></div></div></div><p>
   In Xen some features are only available for fully virtualized
   domains. They are not very often used, but still may be interesting in
   some environments.
  </p><div class="sect2 " id="sec.xen.config.bootdevice"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.bootdevice"><span class="number">22.6.1 </span><span class="name">Specify Boot Device on Boot</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.bootdevice">#</a></h3></div></div></div><p>
    Just as with physical hardware, it is sometimes desirable to boot a
    VM Guest from a different device than its own boot device. For fully
    virtual machines, it is possible to select a boot device with the
    <code class="literal">boot</code> parameter in a domain xl configuration file:
   </p><div class="verbatim-wrap"><pre class="screen">boot = <em class="replaceable ">BOOT_DEVICE</em></pre></div><p>
    <em class="replaceable ">BOOT_DEVICE</em> can be one of
    <code class="literal">c</code> for hard disk, <code class="literal">d</code> for CD-ROM, or
    <code class="literal">n</code> for Network/PXE. You can specify multiple options,
    and they will be attempted in the given order. For example,
   </p><div class="verbatim-wrap"><pre class="screen">boot = dc</pre></div><p>
    boots from CD-ROM, and falls back to the hard disk if CD-ROM is not
    bootable.
   </p></div><div class="sect2 " id="sec.xen.config.cpuid"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.cpuid"><span class="number">22.6.2 </span><span class="name">Changing CPUIDs for Guests</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.cpuid">#</a></h3></div></div></div><p>
    To be able to migrate a VM Guest from one VM Host Server to a different
    VM Host Server, the VM Guest system may only use CPU
    features that are available on both VM Host Server systems. If the actual CPUs
    are different on both hosts, it may be necessary to hide some features
    before the VM Guest is started. This maintains the possibility to
    migrate the VM Guest between both hosts. For fully virtualized guests,
    this can be achieved by configuring the <code class="literal">cpuid</code> that is
    available to the guest.
   </p><p>
    To gain an overview of the current CPU, have a look at
    <code class="filename">/proc/cpuinfo</code>. This contains all the important
    information that defines the current CPU.
   </p><p>
    To redefine a CPU, first have a look at the respective cpuid definitions
    of the CPU vendor. These are available from:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140017029758144"><span class="term ">Intel</span></dt><dd><p>
       <a class="link" href="http://www.intel.com/Assets/PDF/appnote/241618.pdf" target="_blank">http://www.intel.com/Assets/PDF/appnote/241618.pdf</a>
      </p></dd></dl></div><div class="verbatim-wrap"><pre class="screen">cpuid = "host,tm=0,sse3=0"</pre></div><p>
    The syntax is a comma-separated list of key=value pairs, preceded by the
    word "host". A few keys take a numerical value, while all others take a
    single character which describes what to do with the feature bit. See
    <code class="command">man 5 xl.cfg</code> for a complete list of cpuid keys. The
    respective bits may be changed by using the following values:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm140017029753632"><span class="term ">1</span></dt><dd><p>
       Force the corresponding bit to <code class="literal">1</code>
      </p></dd><dt id="idm140017029751376"><span class="term ">0</span></dt><dd><p>
       Force the corresponding bit to <code class="literal">0</code>
      </p></dd><dt id="idm140017029749120"><span class="term ">x</span></dt><dd><p>
       Use the values of the default policy
      </p></dd><dt id="idm140017029747296"><span class="term ">k</span></dt><dd><p>
       Use the values defined by the host
      </p></dd><dt id="idm140017029745472"><span class="term ">s</span></dt><dd><p>
       Like <code class="literal">k</code>, but preserve the value over migrations
      </p></dd></dl></div><p>
    Note that counting bits is done from right to left, starting with bit
    <code class="literal">0</code>.
   </p></div><div class="sect2 " id="sec.xen.config.pirqs"><div class="titlepage"><div><div><h3 class="title" id="sec.xen.config.pirqs"><span class="number">22.6.3 </span><span class="name">Increasing the Number of PCI-IRQs</span> <a title="Permalink" class="permalink" href="cha.xen.config.html#sec.xen.config.pirqs">#</a></h3></div></div></div><p>
    In case you need to increase the default number of PCI-IRQs available to
    Dom0 and/or VM Guest, you can do so by modifying the Xen
    kernel command line. Use the command
    <code class="command">extra_guest_irqs=</code>
    <em class="replaceable ">DOMU_IRGS,DOM0_IRGS</em>. The optional first
    number <em class="replaceable ">DOMU_IRGS</em> is common for all
    VM Guests, while the optional second number
    <em class="replaceable ">DOM0_IRGS</em> (preceded by a comma) is for
    Dom0. Changing the setting for VM Guest has no impact on
    Dom0 and vice versa. For example to change Dom0 without
    changing VM Guest, use
   </p><div class="verbatim-wrap"><pre class="screen">extra_guest_irqs=,512</pre></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.xen.admin.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 23 </span>Administrative Tasks</span></a><a class="nav-link" href="cha.xen.vbd.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 21 </span>Block Devices in Xen</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>