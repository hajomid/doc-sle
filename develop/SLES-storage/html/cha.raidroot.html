<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring Software RAID for the Root Partition | Storage Administration Guide | SUSE Linux Enterprise Server 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="15" /><meta name="book-title" content="Storage Administration Guide" /><meta name="chapter-title" content="Chapter 8. Configuring Software RAID for the Root Partition" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Server 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="part.software_raid.html" title="Part III. Software RAID" /><link rel="prev" href="cha.raid.html" title="Chapter 7. Software RAID Configuration" /><link rel="next" href="cha.raid10.html" title="Chapter 9. Creating Software RAID 10 Devices" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="stor_admin.html">Storage Administration Guide</a><span> › </span><a class="crumb" href="part.software_raid.html">Software RAID</a><span> › </span><a class="crumb" href="cha.raidroot.html">Configuring Software RAID for the Root Partition</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Storage Administration Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="storage.preface.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="part.filesystems.html"><span class="number">I </span><span class="name">File Systems and Mounting</span></a><ol><li class="inactive"><a href="cha.filesystems.html"><span class="number">1 </span><span class="name">Overview of File Systems in Linux</span></a></li><li class="inactive"><a href="cha.resize_fs.html"><span class="number">2 </span><span class="name">Resizing File Systems</span></a></li><li class="inactive"><a href="cha.uuid.html"><span class="number">3 </span><span class="name">Using UUIDs to Mount Devices</span></a></li><li class="inactive"><a href="cha.multitiercache.html"><span class="number">4 </span><span class="name">Multi-tier Caching for Block Device Operations</span></a></li></ol></li><li class="inactive"><a href="part.lvm.html"><span class="number">II </span><span class="name">Logical Volumes (LVM)</span></a><ol><li class="inactive"><a href="cha.lvm.html"><span class="number">5 </span><span class="name">LVM Configuration</span></a></li><li class="inactive"><a href="cha.lvm_snapshots.html"><span class="number">6 </span><span class="name">LVM Volume Snapshots</span></a></li></ol></li><li class="inactive"><a href="part.software_raid.html"><span class="number">III </span><span class="name">Software RAID</span></a><ol><li class="inactive"><a href="cha.raid.html"><span class="number">7 </span><span class="name">Software RAID Configuration</span></a></li><li class="inactive"><a href="cha.raidroot.html"><span class="number">8 </span><span class="name">Configuring Software RAID for the Root Partition</span></a></li><li class="inactive"><a href="cha.raid10.html"><span class="number">9 </span><span class="name">Creating Software RAID 10 Devices</span></a></li><li class="inactive"><a href="cha.raid_degraded.html"><span class="number">10 </span><span class="name">Creating a Degraded RAID Array</span></a></li><li class="inactive"><a href="cha.raid_resize.html"><span class="number">11 </span><span class="name">Resizing Software RAID Arrays with mdadm</span></a></li><li class="inactive"><a href="cha.raid_leds.html"><span class="number">12 </span><span class="name">Storage Enclosure LED Utilities for MD Software RAIDs</span></a></li></ol></li><li class="inactive"><a href="part.net_storage.html"><span class="number">IV </span><span class="name">Network Storage</span></a><ol><li class="inactive"><a href="cha.isns.html"><span class="number">13 </span><span class="name">iSNS for Linux</span></a></li><li class="inactive"><a href="cha.iscsi.html"><span class="number">14 </span><span class="name">Mass Storage over IP Networks: iSCSI</span></a></li><li class="inactive"><a href="cha.fcoe.html"><span class="number">15 </span><span class="name">Fibre Channel Storage over Ethernet Networks: FCoE</span></a></li><li class="inactive"><a href="cha.multipath.html"><span class="number">16 </span><span class="name">Managing Multipath I/O for Devices</span></a></li><li class="inactive"><a href="cha.nfs4_acls.html"><span class="number">17 </span><span class="name">Managing Access Control Lists over NFSv4</span></a></li></ol></li><li class="inactive"><a href="bk09apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 7. Software RAID Configuration" href="cha.raid.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 9. Creating Software RAID 10 Devices" href="cha.raid10.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="stor_admin.html">Storage Administration Guide</a><span> › </span><a class="crumb" href="part.software_raid.html">Software RAID</a><span> › </span><a class="crumb" href="cha.raidroot.html">Configuring Software RAID for the Root Partition</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 7. Software RAID Configuration" href="cha.raid.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 9. Creating Software RAID 10 Devices" href="cha.raid10.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div xml:lang="en" class="chapter " id="cha.raidroot" lang="en"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">8 </span><span class="name">Configuring Software RAID for the Root Partition</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>storage_raidroot.xml</li><li><span class="ds-label">ID: </span>cha.raidroot</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.raidroot.html#sec.raidroot.require"><span class="number">8.1 </span><span class="name">
   Prerequisites for Using a Software RAID Device for the Root Partition
  </span></a></span></dt><dt><span class="sect1"><a href="cha.raidroot.html#sec.raidroot.setup"><span class="number">8.2 </span><span class="name">
   Setting Up the System with a Software RAID Device for the Root
   (<code class="filename">/</code>) Partition
  </span></a></span></dt></dl></div></div><p>
  In <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span>, the Device Mapper RAID tool has been integrated into the
  YaST Partitioner. You can use the partitioner at install time to create a
  software RAID for the system device that contains your root
  (<code class="filename">/</code>) partition. The <code class="filename">/boot</code> partition
  cannot be stored on a RAID partition unless it is RAID 1.
 </p><div class="sect1 " id="sec.raidroot.require"><div class="titlepage"><div><div><h2 class="title" id="sec.raidroot.require"><span class="number">8.1 </span><span class="name">
   Prerequisites for Using a Software RAID Device for the Root Partition
  </span> <a title="Permalink" class="permalink" href="cha.raidroot.html#sec.raidroot.require">#</a></h2></div></div></div><p>
   Ensure that your configuration meets the following requirements:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     You need two hard disks to create the RAID 1 mirror device. The hard
     disks should be similarly sized. The RAID assumes the size of the smaller
     drive. The block storage devices can be any combination of local (in or
     directly attached to the machine), Fibre Channel storage subsystems, or
     iSCSI storage subsystems.
    </p></li><li class="listitem "><p>
     A separate partition for <code class="filename">/boot</code> is not required if you
     install the boot loader in the MBR. If installing the boot loader in the
     MBR is not an option, <code class="filename">/boot</code> needs to reside on a
     separate partition.
    </p></li><li class="listitem "><p>
     For UEFI machines, you need to set up a dedicated
     <code class="filename">/boot/efi</code> partition. It needs to be VFAT-formatted,
     and may reside on the RAID 1 device to prevent booting problems in case
     the physical disk with <code class="filename">/boot/efi</code> fails.
    </p></li><li class="listitem "><p>
     If you are using hardware RAID devices, do not attempt to run software
     RAIDs on top of it.
    </p></li><li class="listitem "><p>
     If you are using iSCSI target devices, you need to enable the iSCSI
     initiator support before you create the RAID device.
    </p></li><li class="listitem "><p>
     If your storage subsystem provides multiple I/O paths between the server
     and its directly attached local devices, Fibre Channel devices, or iSCSI
     devices that you want to use in the software RAID, you need to enable the
     multipath support before you create the RAID device.
    </p></li></ul></div></div><div class="sect1 " id="sec.raidroot.setup"><div class="titlepage"><div><div><h2 class="title" id="sec.raidroot.setup"><span class="number">8.2 </span><span class="name">
   Setting Up the System with a Software RAID Device for the Root
   (<code class="filename">/</code>) Partition
  </span> <a title="Permalink" class="permalink" href="cha.raidroot.html#sec.raidroot.setup">#</a></h2></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start the installation with YaST and proceed as described in
     <span class="intraxref">Book “<em class="citetitle ">Deployment Guide</em>”, Chapter 8 “Installation Steps”</span> until you reach the <span class="guimenu">Suggested
     Partitioning</span> step.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Expert Partitioner</span> to open the custom
     partitioning tool.
    </p></li><li class="step "><p>
     (Optional) If there are iSCSI target devices that you want to use, you
     need to enable the iSCSI Initiator software by choosing <span class="guimenu">Configure</span> › <span class="guimenu">Configure iSCSI</span> from the lower right section of the screen. Refer to
     <a class="xref" href="cha.iscsi.html" title="Chapter 14. Mass Storage over IP Networks: iSCSI">Chapter 14, <em>Mass Storage over IP Networks: iSCSI</em></a> for further details.
    </p></li><li class="step "><p>
     (Optional) If there are multiple I/O paths to the devices that you want to
     use you need to enable multipath support by choosing <span class="guimenu">Configure</span> › <span class="guimenu">Configure Multipath</span> › <span class="guimenu">Yes</span> from the lower right section of the
     screen.
    </p></li><li class="step "><p>
     (Optional) In case you have neither configured iSCSI or Multipath, the
     default proposal settings are shown. Click <span class="guimenu">Rescan
     Devices</span> to delete them.
    </p></li><li class="step "><p>
     Set up the <span class="guimenu">0xFD Linux RAID</span> format for each of the
     devices you want to use for the software RAID. You should use RAID for
     <code class="filename">/</code>, <code class="filename">/boot/efi</code>, or swap
     partitions.
    </p><ol type="a" class="substeps "><li class="step "><p>
       In the left panel, select <span class="guimenu">Hard Disks</span> and select the
       device you want to use, then click <span class="guimenu">Add Partition</span>.
      </p></li><li class="step "><p>
       Under <span class="guimenu">New Partition Type</span>, select <span class="guimenu">Primary
       Partition</span>, then click <span class="guimenu">Next</span>.
      </p></li><li class="step "><p>
       Under <span class="guimenu">New Partition Size</span>, specify the size to use,
       then click <span class="guimenu">Next</span>.
      </p></li><li class="step "><p>
       Under <span class="guimenu">Role</span>, choose <span class="guimenu">Raw Volume
       (unformatted)</span>.
      </p></li><li class="step "><p>
       Select <span class="guimenu">Do not format</span> and set the <span class="guimenu">File
       SystemID</span> to <span class="guimenu">0xFD Linux RAID</span>.
      </p></li><li class="step "><p>
       Click <span class="guimenu">Finish</span> and repeat these instructions for the
       second partition.
      </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/raid_yast_install2_a.png"><img src="images/raid_yast_install2_a.png" width="" /></a></div></div></li></ol></li><li class="step "><p>
     Create the RAID device for the <code class="filename">/</code> partition.
    </p><ol type="a" class="substeps "><li class="step "><p>
       In the left panel, select <span class="guimenu">RAID</span> and then <span class="guimenu">Add
       RAID</span>.
      </p></li><li class="step "><p>
       Set the desired <span class="guimenu">RAID Type</span> for the
       <code class="filename">/</code> partition and the <span class="guimenu">RAID name</span> to
       <code class="literal">system</code>.
      </p></li><li class="step "><p>
       Select the two RAID devices you prepared in the previous step from the
       <span class="guimenu">Available Devices</span> section and <span class="guimenu">Add</span>
       them.
      </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/raid_yast_install3_a.png"><img src="images/raid_yast_install3_a.png" width="" /></a></div></div><p>
       Proceed with <span class="guimenu">Next</span>.
      </p></li><li class="step "><p>
       Under <span class="guimenu">RAID Options</span>, select the chunk size from the
       drop-down box. Sticking with the default is a safe choice.
      </p></li><li class="step "><p>
       Under <span class="guimenu">Role</span>, select <span class="guimenu">Operating
       System</span> and proceed with <span class="guimenu">Finish</span>.
      </p></li><li class="step "><p>
       Select the <span class="guimenu">File System</span> and set the mount point to
       <code class="filename">/</code>. Leave the dialog with
       <code class="filename">Finish</code>.
      </p></li></ol></li><li class="step "><p>
     The software RAID device is managed by Device Mapper, and creates a device
     under the <code class="filename">/dev/md/system</code> path.
    </p></li><li class="step "><p>
     Optionally for UEFI machines, use similar steps to create the
     <code class="filename">/boot/efi</code> mounted partition. Remember that only RAID
     1 is supported for <code class="filename">/boot/efi</code>, and the partition needs
     to be formatted with the FAT file system.
    </p><div class="figure" id="idm140370657733856"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/raid_yast_install3_b.png"><img src="images/raid_yast_install3_b.png" width="" alt="/, /boot/efi, and swap on RAIDs" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 8.1: </span><span class="name"><span class="guimenu">/</span>, <span class="guimenu">/boot/efi</span>, and swap on RAIDs </span><a title="Permalink" class="permalink" href="cha.raidroot.html#idm140370657733856">#</a></h6></div></div></li><li class="step "><p>
     Click <span class="guimenu">Accept</span> to leave the partitioner.
    </p><p>
     The new proposal appears on the <span class="guimenu">Suggested Partitioning</span>
     page.
    </p></li><li class="step "><p>
     Continue with the installation. For UEFI machines with a separate
     <code class="filename">/boot/efi</code> partition, click <span class="guimenu">Booting</span>
     on the <span class="guimenu">Installation Settings</span> screen and set
     <span class="guimenu">GRUB2 for EFI</span> as the <span class="guimenu">Boot Loader</span>.
     Check that the <span class="guimenu">Enable Secure Boot Support</span> option is
     activated.
    </p><p>
     Whenever you reboot your server, Device Mapper is started at boot time so
     that the software RAID is automatically recognized, and the operating
     system on the root (/) partition can be started.
    </p></li></ol></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.raid10.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 9 </span>Creating Software RAID 10 Devices</span></a><a class="nav-link" href="cha.raid.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 7 </span>Software RAID Configuration</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>