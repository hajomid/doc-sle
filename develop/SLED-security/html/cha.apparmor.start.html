<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Getting Started | Security Guide | SUSE Linux Enterprise Desktop 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Desktop" /><meta name="product-number" content="15" /><meta name="book-title" content="Security Guide" /><meta name="chapter-title" content="Chapter 19. Getting Started" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Desktop 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Desktop Documentation" /><link rel="up" href="part.apparmor.html" title="Part IV. Confining Privileges with AppArmor" /><link rel="prev" href="cha.apparmor.intro.html" title="Chapter 18. Introducing AppArmor" /><link rel="next" href="cha.apparmor.concept.html" title="Chapter 20. Immunizing Programs" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.security.html">Security Guide</a><span> › </span><a class="crumb" href="part.apparmor.html">Confining Privileges with AppArmor</a><span> › </span><a class="crumb" href="cha.apparmor.start.html">Getting Started</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Security Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface.security.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="cha.security.html"><span class="number">1 </span><span class="name">Security and Confidentiality</span></a></li><li class="inactive"><a href="part.auth.html"><span class="number">I </span><span class="name">Authentication</span></a><ol><li class="inactive"><a href="cha.pam.html"><span class="number">2 </span><span class="name">Authentication with PAM</span></a></li><li class="inactive"><a href="cha.nis.html"><span class="number">3 </span><span class="name">Using NIS</span></a></li><li class="inactive"><a href="cha.security.auth.html"><span class="number">4 </span><span class="name">Setting Up Authentication Servers and Clients Using YaST</span></a></li><li class="inactive"><a href="cha.security.ldap.html"><span class="number">5 </span><span class="name">LDAP—A Directory Service</span></a></li><li class="inactive"><a href="cha.security.kerberos.html"><span class="number">6 </span><span class="name">Network Authentication with Kerberos</span></a></li><li class="inactive"><a href="cha.security.ad.html"><span class="number">7 </span><span class="name">Active Directory Support</span></a></li></ol></li><li class="inactive"><a href="part.local_security.html"><span class="number">II </span><span class="name">Local Security</span></a><ol><li class="inactive"><a href="cha.security.yast_security.html"><span class="number">8 </span><span class="name">Configuring Security Settings with YaST</span></a></li><li class="inactive"><a href="cha.security.policykit.html"><span class="number">9 </span><span class="name">Authorization with PolKit</span></a></li><li class="inactive"><a href="cha.security.acls.html"><span class="number">10 </span><span class="name">Access Control Lists in Linux</span></a></li><li class="inactive"><a href="cha.security.cryptofs.html"><span class="number">11 </span><span class="name">Encrypting Partitions and Files</span></a></li><li class="inactive"><a href="cha.certstore.html"><span class="number">12 </span><span class="name">Certificate Store</span></a></li><li class="inactive"><a href="cha.aide.html"><span class="number">13 </span><span class="name">Intrusion Detection with AIDE</span></a></li></ol></li><li class="inactive"><a href="part.network_security.html"><span class="number">III </span><span class="name">Network Security</span></a><ol><li class="inactive"><a href="cha.ssh.html"><span class="number">14 </span><span class="name">SSH: Secure Network Operations</span></a></li><li class="inactive"><a href="cha.security.firewall.html"><span class="number">15 </span><span class="name">Masquerading and Firewalls</span></a></li><li class="inactive"><a href="cha.security.vpnserver.html"><span class="number">16 </span><span class="name">Configuring a VPN Server</span></a></li><li class="inactive"><a href="cha.security.yast_ca.html"><span class="number">17 </span><span class="name">Managing X.509 Certification</span></a></li></ol></li><li class="inactive"><a href="part.apparmor.html"><span class="number">IV </span><span class="name">Confining Privileges with <span class="phrase">AppArmor</span></span></a><ol><li class="inactive"><a href="cha.apparmor.intro.html"><span class="number">18 </span><span class="name">Introducing <span class="phrase">AppArmor</span></span></a></li><li class="inactive"><a href="cha.apparmor.start.html"><span class="number">19 </span><span class="name">Getting Started</span></a></li><li class="inactive"><a href="cha.apparmor.concept.html"><span class="number">20 </span><span class="name">Immunizing Programs</span></a></li><li class="inactive"><a href="cha.apparmor.profiles.html"><span class="number">21 </span><span class="name">Profile Components and Syntax</span></a></li><li class="inactive"><a href="cha.apparmor.repos.html"><span class="number">22 </span><span class="name"><span class="phrase">AppArmor</span> Profile Repositories</span></a></li><li class="inactive"><a href="cha.apparmor.yast.html"><span class="number">23 </span><span class="name">Building and Managing Profiles with YaST</span></a></li><li class="inactive"><a href="cha.apparmor.commandline.html"><span class="number">24 </span><span class="name">Building Profiles from the Command Line</span></a></li><li class="inactive"><a href="cha.apparmor.hat.html"><span class="number">25 </span><span class="name">Profiling Your Web Applications Using ChangeHat</span></a></li><li class="inactive"><a href="cha.apparmor.pam.html"><span class="number">26 </span><span class="name">Confining Users with <code class="systemitem">pam_apparmor</code></span></a></li><li class="inactive"><a href="cha.apparmor.managing.html"><span class="number">27 </span><span class="name">Managing Profiled Applications</span></a></li><li class="inactive"><a href="cha.apparmor.support.html"><span class="number">28 </span><span class="name">Support</span></a></li><li class="inactive"><a href="cha.apparmor.glossary.html"><span class="number">29 </span><span class="name"><span class="phrase">AppArmor</span> Glossary</span></a></li></ol></li><li class="inactive"><a href="part.audit.html"><span class="number">V </span><span class="name"><em class="citetitle ">The Linux Audit Framework</em></span></a><ol><li class="inactive"><a href="cha.audit.comp.html"><span class="number">30 </span><span class="name">Understanding Linux Audit</span></a></li><li class="inactive"><a href="cha.audit.setup.html"><span class="number">31 </span><span class="name">Setting Up the Linux Audit Framework</span></a></li><li class="inactive"><a href="cha.audit.scenarios.html"><span class="number">32 </span><span class="name">Introducing an Audit Rule Set</span></a></li><li class="inactive"><a href="cha.audit.moreinfo.html"><span class="number">33 </span><span class="name">Useful Resources</span></a></li></ol></li><li class="inactive"><a href="bk05apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 18. Introducing AppArmor" href="cha.apparmor.intro.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 20. Immunizing Programs" href="cha.apparmor.concept.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.security.html">Security Guide</a><span> › </span><a class="crumb" href="part.apparmor.html">Confining Privileges with AppArmor</a><span> › </span><a class="crumb" href="cha.apparmor.start.html">Getting Started</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 18. Introducing AppArmor" href="cha.apparmor.intro.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 20. Immunizing Programs" href="cha.apparmor.concept.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.apparmor.start"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">19 </span><span class="name">Getting Started</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>apparmor_start.xml</li><li><span class="ds-label">ID: </span>cha.apparmor.start</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.apparmor.start.html#sec.apparmor.start.install"><span class="number">19.1 </span><span class="name">Installing <span class="phrase">AppArmor</span></span></a></span></dt><dt><span class="sect1"><a href="cha.apparmor.start.html#sec.apparmor.start.enable"><span class="number">19.2 </span><span class="name">Enabling and Disabling <span class="phrase">AppArmor</span></span></a></span></dt><dt><span class="sect1"><a href="cha.apparmor.start.html#sec.apparmor.start.choose"><span class="number">19.3 </span><span class="name">Choosing Applications to Profile</span></a></span></dt><dt><span class="sect1"><a href="cha.apparmor.start.html#sec.apparmor.start.build"><span class="number">19.4 </span><span class="name">Building and Modifying Profiles</span></a></span></dt><dt><span class="sect1"><a href="cha.apparmor.start.html#sec.apparmor.start.update"><span class="number">19.5 </span><span class="name">Updating Your Profiles</span></a></span></dt></dl></div></div><p>
  Prepare a successful deployment of <span class="phrase">AppArmor</span> on your system by carefully
  considering the following items:
 </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
    Determine the applications to profile. Read more on this in
    <a class="xref" href="cha.apparmor.start.html#sec.apparmor.start.choose" title="19.3. Choosing Applications to Profile">Section 19.3, “Choosing Applications to Profile”</a>.
   </p></li><li class="step "><p>
    Build the needed profiles as roughly outlined in
    <a class="xref" href="cha.apparmor.start.html#sec.apparmor.start.build" title="19.4. Building and Modifying Profiles">Section 19.4, “Building and Modifying Profiles”</a>. Check the results and adjust
    the profiles when necessary.
   </p></li><li class="step "><p>
    Update your profiles whenever your environment changes or you need to
    react to security events logged by the reporting tool of <span class="phrase">AppArmor</span>. Refer
    to <a class="xref" href="cha.apparmor.start.html#sec.apparmor.start.update" title="19.5. Updating Your Profiles">Section 19.5, “Updating Your Profiles”</a>.
   </p></li></ol></div></div><div class="sect1 " id="sec.apparmor.start.install"><div class="titlepage"><div><div><h2 class="title" id="sec.apparmor.start.install"><span class="number">19.1 </span><span class="name">Installing <span class="phrase">AppArmor</span></span> <a title="Permalink" class="permalink" href="cha.apparmor.start.html#sec.apparmor.start.install">#</a></h2></div></div></div><p>
   <span class="phrase">AppArmor</span> is installed and running on any installation of
   <span class="productname"><span class="phrase">SUSE® Linux Enterprise Desktop</span></span> by default, regardless of what patterns are
   installed. The packages listed below are needed for a fully-functional
   instance of <span class="phrase">AppArmor</span>:
  </p><div class="itemizedlist "><ul class="itemizedlist compact"><li class="listitem "><p>
     <code class="systemitem">apparmor-docs</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">apparmor-parser</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">apparmor-profiles</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">apparmor-utils</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">audit</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">libapparmor1</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">perl-libapparmor</code>
    </p></li><li class="listitem "><p>
     <code class="systemitem">yast2-apparmor</code>
    </p></li></ul></div><div id="idm139769469596960" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6><p>
    If <span class="phrase">AppArmor</span> is not installed on your system, install the pattern
    <code class="systemitem">apparmor</code> for a complete
    <span class="phrase">AppArmor</span> installation. Either use the YaST Software Management
    module for installation, or use Zypper on the command line:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> zypper in -t pattern apparmor</pre></div></div></div><div class="sect1 " id="sec.apparmor.start.enable"><div class="titlepage"><div><div><h2 class="title" id="sec.apparmor.start.enable"><span class="number">19.2 </span><span class="name">Enabling and Disabling <span class="phrase">AppArmor</span></span> <a title="Permalink" class="permalink" href="cha.apparmor.start.html#sec.apparmor.start.enable">#</a></h2></div></div></div><p>
   <span class="phrase">AppArmor</span> is configured to run by default on any fresh installation of

   <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>. There are two ways of toggling the status of <span class="phrase">AppArmor</span>:
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm139769469588752"><span class="term ">Using YaST Services Manager</span></dt><dd><p>
      Disable or enable <span class="phrase">AppArmor</span> by removing or adding its boot script to the
      sequence of scripts executed on system boot. Status changes are
      applied on reboot.
     </p></dd><dt id="idm139769469586352"><span class="term ">Using <span class="phrase">AppArmor</span> Configuration Window</span></dt><dd><p>
      Toggle the status of <span class="phrase">AppArmor</span> in a running system by switching it off
      or on using the YaST <span class="phrase">AppArmor</span> Control Panel. Changes made here are
      applied instantaneously. The Control Panel triggers a stop or start
      event for <span class="phrase">AppArmor</span> and removes or adds its boot script in the system's
      boot sequence.
     </p></dd></dl></div><p>
   To disable <span class="phrase">AppArmor</span> permanently (by removing it from the sequence of
   scripts executed on system boot) proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST.
    </p></li><li class="step "><p>
     Select <span class="guimenu">System</span> › <span class="guimenu">Services
     Manager</span>.
    </p></li><li class="step "><p>
     Mark <code class="literal">apparmor</code> by clicking its row in the list of
     services, then click <span class="guimenu">Enable/Disable</span> in the lower
     part of the window. Check that <span class="guimenu">Enabled</span> changed to
     <span class="guimenu">Disabled</span> in the <code class="literal">apparmor</code> row.
    </p></li><li class="step "><p>
     Confirm with <span class="guimenu">OK</span>.
    </p></li></ol></div></div><p>
   <span class="phrase">AppArmor</span> will not be initialized on reboot, and stays inactive until you
   re-enable it. Re-enabling a service using the YaST
   <span class="guimenu">Services Manager</span> tool is similar to disabling it.
  </p><p>
   Toggle the status of <span class="phrase">AppArmor</span> in a running system by using the <span class="phrase">AppArmor</span>
   Configuration window. These changes take effect when you apply them
   and survive a reboot of the system. To toggle the status of <span class="phrase">AppArmor</span>,
   proceed as follows:
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Start YaST, select <span class="guimenu"><span class="phrase">AppArmor</span> Configuration</span>, and
     click <span class="guimenu">Settings</span> in the main window.
    </p></li><li class="step "><p>
     Enable <span class="phrase">AppArmor</span> by checking <span class="guimenu">Enable <span class="phrase">AppArmor</span></span> or disable
     <span class="phrase">AppArmor</span> by deselecting it.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Done</span> in the <span class="guimenu"><span class="phrase">AppArmor</span>
     Configuration</span> window.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.apparmor.start.choose"><div class="titlepage"><div><div><h2 class="title" id="sec.apparmor.start.choose"><span class="number">19.3 </span><span class="name">Choosing Applications to Profile</span> <a title="Permalink" class="permalink" href="cha.apparmor.start.html#sec.apparmor.start.choose">#</a></h2></div></div></div><p>
   You only need to protect the programs that are exposed to attacks in your
   particular setup, so only use profiles for those applications you
   actually run. Use the following list to determine the most likely
   candidates:
  </p><table border="0" summary="Simple list" class="simplelist "><tr><td>Network Agents</td></tr><tr><td>Web Applications</td></tr><tr><td>Cron Jobs</td></tr></table><p>
   To find out which processes are currently running with open network ports
   and might need a profile to confine them, run
   <code class="command">aa-unconfined</code> as <code class="systemitem">root</code>.
  </p><div class="example" id="ex.unconfined"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 19.1: </span><span class="name">Output of <code class="command">aa-unconfined</code> </span><a title="Permalink" class="permalink" href="cha.apparmor.start.html#ex.unconfined">#</a></h6></div><div class="example-contents"><div class="verbatim-wrap"><pre class="screen">19848 /usr/sbin/cupsd not confined
19887 /usr/sbin/sshd not confined
19947 /usr/lib/postfix/master not confined
1328 /usr/sbin/smbd confined by '/usr/sbin/smbd (enforce)'</pre></div></div></div><p>
   Each of the processes in the above example labeled <code class="literal">not
   confined</code> might need a custom profile to confine it. Those
   labeled <code class="literal">confined by</code> are already protected by <span class="phrase">AppArmor</span>.
  </p><div id="idm139769469553072" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: For More Information</h6><p>
    For more information about choosing the right applications to profile,
    refer to <a class="xref" href="cha.apparmor.concept.html#sec.apparmor.concept.determine" title="20.2. Determining Programs to Immunize">Section 20.2, “Determining Programs to Immunize”</a>.
   </p></div></div><div class="sect1 " id="sec.apparmor.start.build"><div class="titlepage"><div><div><h2 class="title" id="sec.apparmor.start.build"><span class="number">19.4 </span><span class="name">Building and Modifying Profiles</span> <a title="Permalink" class="permalink" href="cha.apparmor.start.html#sec.apparmor.start.build">#</a></h2></div></div></div><p>
   <span class="phrase">AppArmor</span> on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> ships with a preconfigured set of profiles
   for the most important applications. In addition, you can use <span class="phrase">AppArmor</span> to
   create your own profiles for any application you want.
  </p><p>
   There are two ways of managing profiles. One is to use the graphical
   front-end provided by the YaST <span class="phrase">AppArmor</span> modules and the other is to
   use the command line tools provided by the <span class="phrase">AppArmor</span> suite itself. The main
   difference is that YaST supports only basic functionality for
   <span class="phrase">AppArmor</span> profiles, while the command line tools let you update/tune the
   profiles in a more fine-grained way.
  </p><p>
   For each application, perform the following steps to create a profile:
  </p><div class="procedure " id="proc.genprof"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step " id="st.genprof1"><p>
     As <code class="systemitem">root</code>, let <span class="phrase">AppArmor</span> create a rough outline of the
     application's profile by running <code class="command">aa-genprof</code>
     <em class="replaceable ">PROGRAM_NAME</em>.
    </p><p>
     <span class="emphasis"><em>or</em></span>
    </p><p>

     Outline the basic profile by running <span class="guimenu">YaST</span> › <span class="guimenu">Security and Users</span> › <span class="guimenu"><span class="phrase">AppArmor</span> Configuration</span> › <span class="guimenu">Manually Add
     Profile</span> and specifying the complete path to the
     application you want to profile.
    </p><p>
     A new basic profile is outlined and put into learning mode, which means
     that it logs any activity of the program you are executing, but does
     not yet restrict it.
    </p></li><li class="step " id="st.genprof2"><p>
     Run the full range of the application's actions to let <span class="phrase">AppArmor</span> get a
     very specific picture of its activities.
    </p></li><li class="step " id="st.genprof3"><p>
     Let <span class="phrase">AppArmor</span> analyze the log files generated in
     <a class="xref" href="cha.apparmor.start.html#st.genprof2" title="Step 2">Step 2</a> by typing <span class="keycap">S</span> in
     aa-genprof.
    </p><p>
     <span class="phrase">AppArmor</span> scans the logs it recorded during the application's run and
     asks you to set the access rights for each event that was logged.
     Either set them for each file or use globbing.
    </p></li><li class="step "><p>
     Depending on the complexity of your application, it might be necessary
     to repeat <a class="xref" href="cha.apparmor.start.html#st.genprof2" title="Step 2">Step 2</a> and
     <a class="xref" href="cha.apparmor.start.html#st.genprof3" title="Step 3">Step 3</a>. Confine the application, exercise it
     under the confined conditions, and process any new log events. To
     properly confine the full range of an application's capabilities, you
     might be required to repeat this procedure often.
    </p></li><li class="step " id="st.genprof4"><p>
     When you finish <code class="command">aa-genprof</code>, your profile is set to
     enforce mode. The profile is applied and <span class="phrase">AppArmor</span> restricts the
     application according to it.
    </p><p>
     If you started <code class="command">aa-genprof</code> on an application that had
     an existing profile that was in complain mode, this profile remains in
     learning mode upon exit of this learning cycle. For more information
     about changing the mode of a profile, refer to
     <a class="xref" href="cha.apparmor.commandline.html#sec.apparmor.commandline.profiling.summary.complain" title="24.7.3.2. aa-complain—Entering Complain or Learning Mode">Section 24.7.3.2, “aa-complain—Entering Complain or Learning Mode”</a>
     and
     <a class="xref" href="cha.apparmor.commandline.html#sec.apparmor.commandline.profiling.summary.enforce" title="24.7.3.6. aa-enforce—Entering Enforce Mode">Section 24.7.3.6, “aa-enforce—Entering Enforce Mode”</a>.
    </p></li></ol></div></div><p>
   Test your profile settings by performing every task you need with the
   application you confined. Normally, the confined program runs smoothly
   and you do not notice <span class="phrase">AppArmor</span> activities. However, if you notice
   certain misbehavior with your application, check the system logs and see
   if <span class="phrase">AppArmor</span> is too tightly confining your application. Depending on the
   log mechanism used on your system, there are several places to look for
   <span class="phrase">AppArmor</span> log entries:
  </p><table border="0" summary="Simple list" class="simplelist "><tr><td><code class="filename">/var/log/audit/audit.log</code>
   </td></tr><tr><td>The command <code class="command">journalctl | grep -i apparmor</code>
   </td></tr><tr><td>The command <code class="command">dmesg -T</code>
   </td></tr></table><p>
   To adjust the profile, analyze the log messages relating to this
   application again as described in
   <a class="xref" href="cha.apparmor.commandline.html#sec.apparmor.commandline.profiling.summary.logprof" title="24.7.3.9. aa-logprof—Scanning the System Log">Section 24.7.3.9, “aa-logprof—Scanning the System Log”</a>.
   Determine the access rights or restrictions when prompted.
  </p><div id="idm139769469516512" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: For More Information</h6><p>
    For more information about profile building and modification, refer to
    <a class="xref" href="cha.apparmor.profiles.html" title="Chapter 21. Profile Components and Syntax">Chapter 21, <em>Profile Components and Syntax</em></a>,
    <a class="xref" href="cha.apparmor.yast.html" title="Chapter 23. Building and Managing Profiles with YaST">Chapter 23, <em>Building and Managing Profiles with YaST</em></a>, and
    <a class="xref" href="cha.apparmor.commandline.html" title="Chapter 24. Building Profiles from the Command Line">Chapter 24, <em>Building Profiles from the Command Line</em></a>.
   </p></div></div><div class="sect1 " id="sec.apparmor.start.update"><div class="titlepage"><div><div><h2 class="title" id="sec.apparmor.start.update"><span class="number">19.5 </span><span class="name">Updating Your Profiles</span> <a title="Permalink" class="permalink" href="cha.apparmor.start.html#sec.apparmor.start.update">#</a></h2></div></div></div><p>
   Software and system configurations change over time. As a result, your
   profile setup for <span class="phrase">AppArmor</span> might need some fine-tuning from time to time.
   <span class="phrase">AppArmor</span> checks your system log for policy violations or other <span class="phrase">AppArmor</span>
   events and lets you adjust your profile set accordingly. Any application
   behavior that is outside of any profile definition can be addressed by
   <code class="command">aa-logprof</code>. For more information, see
   <a class="xref" href="cha.apparmor.commandline.html#sec.apparmor.commandline.profiling.summary.logprof" title="24.7.3.9. aa-logprof—Scanning the System Log">Section 24.7.3.9, “aa-logprof—Scanning the System Log”</a>.
  </p></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.apparmor.concept.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 20 </span>Immunizing Programs</span></a><a class="nav-link" href="cha.apparmor.intro.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 18 </span>Introducing <span class="phrase">AppArmor</span></span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>