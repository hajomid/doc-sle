<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>On-Demand Mounting with Autofs | Administration Guide | SUSE Linux Enterprise Desktop 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="product-name" content="SUSE Linux Enterprise Desktop" /><meta name="product-number" content="15" /><meta name="book-title" content="Administration Guide" /><meta name="chapter-title" content="Chapter 31. On-Demand Mounting with Autofs" /><meta name="description" content="autofs is a program that automatically mounts specified directories on an on-demand basis. It is based on a kernel module for high efficiency, and can manage both local directories and network shares. These automatic mount points are mounted only when they are accessed, and unmounted after a certain period of inactivity. This on-demand behavior saves bandwidth and results in better performance than static mounts managed by /etc/fstab. While autofs is a control script, automount is the command (daemon) that does the actual auto-mounting." /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE Linux Enterprise Desktop 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Desktop Documentation" /><link rel="up" href="part.services.html" title="Part IV. Services" /><link rel="prev" href="cha.samba.html" title="Chapter 30. Samba" /><link rel="next" href="part.trouble.html" title="Part V. Troubleshooting" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.sle.admin.html">Administration Guide</a><span> › </span><a class="crumb" href="part.services.html">Services</a><span> › </span><a class="crumb" href="cha.autofs.html">On-Demand Mounting with Autofs</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Administration Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pre.sle.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="part.administration.html"><span class="number">I </span><span class="name">Common Tasks</span></a><ol><li class="inactive"><a href="cha.adm.shell.html"><span class="number">1 </span><span class="name">Bash and Bash Scripts</span></a></li><li class="inactive"><a href="cha.adm.sudo.html"><span class="number">2 </span><span class="name">sudo
</span></a></li><li class="inactive"><a href="cha.onlineupdate.you.html"><span class="number">3 </span><span class="name">YaST Online Update</span></a></li><li class="inactive"><a href="cha.yast.gui.html"><span class="number">4 </span><span class="name">YaST</span></a></li><li class="inactive"><a href="cha.yast.text.html"><span class="number">5 </span><span class="name">YaST in Text Mode</span></a></li><li class="inactive"><a href="cha.sw_cl.html"><span class="number">6 </span><span class="name">Managing Software with Command Line Tools</span></a></li><li class="inactive"><a href="cha.snapper.html"><span class="number">7 </span><span class="name">System Recovery and Snapshot Management with Snapper</span></a></li><li class="inactive"><a href="cha.vnc.html"><span class="number">8 </span><span class="name">Remote Access with VNC</span></a></li><li class="inactive"><a href="cha.net.rsync.html"><span class="number">9 </span><span class="name">File Copying with RSync</span></a></li><li class="inactive"><a href="cha.gnome.gconf.html"><span class="number">10 </span><span class="name">GNOME Configuration for Administrators</span></a></li></ol></li><li class="inactive"><a href="part.boot.html"><span class="number">II </span><span class="name">Booting a Linux System</span></a><ol><li class="inactive"><a href="cha.boot.html"><span class="number">11 </span><span class="name">Introduction to the Booting Process</span></a></li><li class="inactive"><a href="cha.uefi.html"><span class="number">12 </span><span class="name">UEFI (Unified Extensible Firmware Interface)</span></a></li><li class="inactive"><a href="cha.grub2.html"><span class="number">13 </span><span class="name">The Boot Loader GRUB 2</span></a></li><li class="inactive"><a href="cha.systemd.html"><span class="number">14 </span><span class="name">The <code class="systemitem">systemd</code> Daemon</span></a></li></ol></li><li class="inactive"><a href="part.system.html"><span class="number">III </span><span class="name">System</span></a><ol><li class="inactive"><a href="cha.64bit.html"><span class="number">15 </span><span class="name">32-Bit and 64-Bit Applications in a 64-Bit System Environment</span></a></li><li class="inactive"><a href="cha.journalctl.html"><span class="number">16 </span><span class="name"><code class="command">journalctl</code>: Query the <code class="systemitem">systemd</code> Journal</span></a></li><li class="inactive"><a href="cha.update-alternative.html"><span class="number">17 </span><span class="name"><code class="command">update-alternatives</code>: Managing Multiple Versions of Commands and Files</span></a></li><li class="inactive"><a href="cha.network.html"><span class="number">18 </span><span class="name">Basic Networking</span></a></li><li class="inactive"><a href="cha.print.html"><span class="number">19 </span><span class="name">Printer Operation</span></a></li><li class="inactive"><a href="cha.x11.html"><span class="number">20 </span><span class="name">The X Window System</span></a></li><li class="inactive"><a href="cha.fuse.html"><span class="number">21 </span><span class="name">Accessing File Systems with FUSE</span></a></li><li class="inactive"><a href="cha.mod.html"><span class="number">22 </span><span class="name">Managing Kernel Modules</span></a></li><li class="inactive"><a href="cha.udev.html"><span class="number">23 </span><span class="name">Dynamic Kernel Device Management with <code class="systemitem">udev</code></span></a></li><li class="inactive"><a href="cha.kgraft.html"><span class="number">24 </span><span class="name">Live Patching the Linux Kernel Using kGraft</span></a></li><li class="inactive"><a href="cha.suse.html"><span class="number">25 </span><span class="name">Special System Features</span></a></li><li class="inactive"><a href="cha.nm.html"><span class="number">26 </span><span class="name">Using NetworkManager</span></a></li><li class="inactive"><a href="cha.power-mgmt.html"><span class="number">27 </span><span class="name">Power Management</span></a></li></ol></li><li class="inactive"><a href="part.services.html"><span class="number">IV </span><span class="name">Services</span></a><ol><li class="inactive"><a href="cha.ntp.html"><span class="number">28 </span><span class="name">Time Synchronization with NTP</span></a></li><li class="inactive"><a href="cha.nfs.html"><span class="number">29 </span><span class="name">Sharing File Systems with NFS</span></a></li><li class="inactive"><a href="cha.samba.html"><span class="number">30 </span><span class="name">Samba</span></a></li><li class="inactive"><a href="cha.autofs.html"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span></a></li></ol></li><li class="inactive"><a href="part.trouble.html"><span class="number">V </span><span class="name">Troubleshooting</span></a><ol><li class="inactive"><a href="cha.adminhelp.html"><span class="number">32 </span><span class="name">Help and Documentation</span></a></li><li class="inactive"><a href="cha.adm.support.html"><span class="number">33 </span><span class="name">Gathering System Information for Support</span></a></li><li class="inactive"><a href="cha.trouble.html"><span class="number">34 </span><span class="name">Common Problems and Their Solutions</span></a></li></ol></li><li class="inactive"><a href="app.nwscheme.html"><span class="number">A </span><span class="name">An Example Network</span></a></li><li class="inactive"><a href="bk01apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 30. Samba" href="cha.samba.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part V. Troubleshooting" href="part.trouble.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Desktop Documentation"><span class="book-icon">SUSE Linux Enterprise Desktop Documentation</span></a><span> › </span><a class="crumb" href="book.sle.admin.html">Administration Guide</a><span> › </span><a class="crumb" href="part.services.html">Services</a><span> › </span><a class="crumb" href="cha.autofs.html">On-Demand Mounting with Autofs</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 30. Samba" href="cha.samba.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part V. Troubleshooting" href="part.trouble.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.autofs"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">31 </span><span class="name">On-Demand Mounting with Autofs</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>autofs.xml</li><li><span class="ds-label">ID: </span>cha.autofs</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="cha.autofs.html#idm139679202560720">#</a></h6></div><p>
    <code class="systemitem">autofs</code> is a program that automatically mounts
    specified directories on an on-demand basis. It is based on a kernel module
    for high efficiency, and can manage both local directories and network
    shares. These automatic mount points are mounted only when they are
    accessed, and unmounted after a certain period of inactivity. This
    on-demand behavior saves bandwidth and results in better performance than
    static mounts managed by <code class="filename">/etc/fstab</code>. While
    <code class="systemitem">autofs</code> is a control script,
    <code class="command">automount</code> is the command (daemon) that does the actual
    auto-mounting.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.autofs.html#sec.autofs.installation"><span class="number">31.1 </span><span class="name">Installation</span></a></span></dt><dt><span class="sect1"><a href="cha.autofs.html#sec.autofs.configuration"><span class="number">31.2 </span><span class="name">Configuration</span></a></span></dt><dt><span class="sect1"><a href="cha.autofs.html#sec.autofs.debugging"><span class="number">31.3 </span><span class="name">Operation and Debugging</span></a></span></dt><dt><span class="sect1"><a href="cha.autofs.html#sec.autofs.nfs"><span class="number">31.4 </span><span class="name">Auto-Mounting an NFS Share</span></a></span></dt><dt><span class="sect1"><a href="cha.autofs.html#sec.autofs.advanced"><span class="number">31.5 </span><span class="name">Advanced Topics</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.autofs.installation"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.installation"><span class="number">31.1 </span><span class="name">Installation</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.installation">#</a></h2></div></div></div><p>
   <code class="systemitem">autofs</code> is not installed on <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span> by
   default. To use its auto-mounting capabilities, first install it with
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> sudo zypper install autofs</pre></div></div><div class="sect1 " id="sec.autofs.configuration"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.configuration"><span class="number">31.2 </span><span class="name">Configuration</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.configuration">#</a></h2></div></div></div><p>
   You need to configure <code class="systemitem">autofs</code> manually by editing
   its configuration files with a text editor, such as <code class="command">vim</code>.
   There are two basic steps to configure
   <code class="systemitem">autofs</code>—the <span class="emphasis"><em>master</em></span> map
   file, and specific map files.
  </p><div class="sect2 " id="sec.autofs.configuration.master_map"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.configuration.master_map"><span class="number">31.2.1 </span><span class="name">The Master Map File</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.configuration.master_map">#</a></h3></div></div></div><p>
    The default master configuration file for <code class="systemitem">autofs</code>
    is <code class="filename">/etc/auto.master</code>. You can change its location by
    changing the value of the <code class="option">DEFAULT_MASTER_MAP_NAME</code> option
    in <code class="filename">/etc/sysconfig/autofs</code>. Here is the content of the
    default one for <span class="productname"><span class="phrase">SUSE Linux Enterprise Desktop</span></span>:
   </p><div class="verbatim-wrap"><pre class="screen">#
# Sample auto.master file
# This is an automounter map and it has the following format
# key [ -mount-options-separated-by-comma ] location
# For details of the format look at autofs(5).<span id="co.autofs.manpage"></span><span class="callout">1</span>
#
#/misc  /etc/auto.misc<span id="co.autofs.map"></span><span class="callout">2</span>
#/net -hosts
#
# Include /etc/auto.master.d/*.autofs<span id="co.autofs.include"></span><span class="callout">3</span>
#
#+dir:/etc/auto.master.d
#
# Include central master map if it can be found using
# nsswitch sources.
#
# Note that if there are entries for /net or /misc (as
# above) in the included master map any keys that are the
# same will not be seen as the first read key seen takes
# precedence.
#
+auto.master<span id="co.autofs.plus"></span><span class="callout">4</span></pre></div><div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.manpage"><span class="callout">1</span></a> </p></td><td valign="top" align="left"><p>
      The <code class="systemitem">autofs</code> manual page (<code class="command">man 5
      autofs</code>) offers a lot of valuable information on the format of
      the automounter maps.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.map"><span class="callout">2</span></a> </p></td><td valign="top" align="left"><p>
      Although commented out (#) by default, this is an example of a simple
      automounter mapping syntax.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.include"><span class="callout">3</span></a> </p></td><td valign="top" align="left"><p>
      In case you need to split the master map into several files, uncomment
      the line, and put the mappings (suffixed with <code class="literal">.autofs</code>)
      in the <code class="filename">/etc/auto.master.d/</code> directory.
     </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.autofs.plus"><span class="callout">4</span></a> </p></td><td valign="top" align="left"><p>
      <code class="literal">+auto.master</code> ensures that those using NIS
       will still find their master map.
     </p></td></tr></table></div><p>
    Entries in <code class="filename">auto.master</code> have three fields with the
    following syntax:
   </p><div class="verbatim-wrap"><pre class="screen">mount point      map name      options</pre></div><div class="variablelist "><dl class="variablelist"><dt id="idm139679202531552"><span class="term ">mount point</span></dt><dd><p>
       The base location where to mount the <code class="systemitem">autofs</code>
       file system, such as <code class="literal">/home</code>.
      </p></dd><dt id="idm139679202528816"><span class="term ">map name</span></dt><dd><p>
       The name of a map source to use for mounting. For the syntax of the maps
       files, see <a class="xref" href="cha.autofs.html#sec.autofs.mapfiles" title="31.2.2. Map Files">Section 31.2.2, “Map Files”</a>.
      </p></dd><dt id="idm139679202526384"><span class="term ">options</span></dt><dd><p>
       These options (if specified) will apply as defaults to all entries in
       the given map.
      </p></dd></dl></div><div id="idm139679202524336" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: For More Information</h6><p>
     For more detailed information on the specific values of the optional
     <code class="literal">map-type</code>, <code class="literal">format</code>, and
     <code class="literal">options</code>, see the <span class="guimenu">auto.master</span> manual
     page (<code class="command">man 5 auto.master</code>).
    </p></div><p>
    The following entry in <code class="filename">auto.master</code> tells
    <code class="systemitem">autofs</code> to look in
    <code class="filename">/etc/auto.smb</code>, and create mount points in the
    <code class="filename">/smb</code> directory.
   </p><div class="verbatim-wrap"><pre class="screen">/smb   /etc/auto.smb</pre></div><div class="sect3 " id="sec.autofs.directmount"><div class="titlepage"><div><div><h4 class="title" id="sec.autofs.directmount"><span class="number">31.2.1.1 </span><span class="name">Direct Mounts</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.directmount">#</a></h4></div></div></div><p>
     Direct mounts create a mount point at the path specified inside the
     relevant map file. Instead of specifying the mount point in
     <code class="filename">auto.master</code>, replace the mount point field with
     <code class="literal">/-</code>. For example, the following line tells
     <code class="systemitem">autofs</code> to create a mount point at the place
     specified in <code class="filename">auto.smb</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/-        /etc/auto.smb</pre></div><div id="idm139679202513872" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip: Maps without Full Path</h6><p>
      If the map file is not specified with its full local or network path, it
      is located using the Name Service Switch (NSS) configuration:
     </p><div class="verbatim-wrap"><pre class="screen">/-        auto.smb</pre></div></div></div></div><div class="sect2 " id="sec.autofs.mapfiles"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.mapfiles"><span class="number">31.2.2 </span><span class="name">Map Files</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.mapfiles">#</a></h3></div></div></div><div id="idm139679202510448" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Other Types of Maps</h6><p>
     Although <span class="emphasis"><em>files</em></span> are the most common types of maps for
     auto-mounting with <code class="systemitem">autofs</code>, there are other types
     as well. A map specification can be the output of a command, or a result
     of a query in LDAP or database. For more detailed information on map
     types, see the manual page <code class="command">man 5 auto.master</code>.
    </p></div><p>
    Map files specify the (local or network) source location, and the mount
    point where to mount the source locally. The general format of maps is
    similar to the master map. The difference is that the
    <span class="emphasis"><em>options</em></span> appear between the mount point and the
    location instead of at the end of the entry:
   </p><div class="verbatim-wrap"><pre class="screen">mount point      options      location</pre></div><div class="variablelist "><dl class="variablelist"><dt id="idm139679202505600"><span class="term ">mount point</span></dt><dd><p>
       Specifies where to mount the source location. This can be either a
       single directory name (so-called <span class="emphasis"><em>indirect</em></span> mount) to
       be added to the base mount point specified in
       <code class="filename">auto.master</code>, or the full path of the mount point
       (direct mount, see <a class="xref" href="cha.autofs.html#sec.autofs.directmount" title="31.2.1.1. Direct Mounts">Section 31.2.1.1, “Direct Mounts”</a>).
      </p></dd><dt id="idm139679202502160"><span class="term ">options</span></dt><dd><p>
       Specifies optional comma-separated list of mount options for the
       relevant entries. If <code class="filename">auto.master</code> contains options
       for this map file as well, theses are appended.
      </p></dd><dt id="idm139679202499776"><span class="term ">location</span></dt><dd><p>
       Specifies from where the file system is to be mounted. It is usually an
       NFS or SMB volume in the usual notation
       <code class="literal">host_name:path_name</code>. If the file system to be mounted
       begins with a '/' (such as local <code class="filename">/dev</code> entries or
       smbfs shares), a colon symbol ':' needs to be prefixed, such as
       <code class="literal">:/dev/sda1</code>.
      </p></dd></dl></div></div></div><div class="sect1 " id="sec.autofs.debugging"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.debugging"><span class="number">31.3 </span><span class="name">Operation and Debugging</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.debugging">#</a></h2></div></div></div><p>
   This section introduces information on how to control the
   <code class="systemitem">autofs</code> service operation, and how to view more
   debugging information when tuning the automounter operation.
  </p><div class="sect2 " id="sec.autofs.debugging.service"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.debugging.service"><span class="number">31.3.1 </span><span class="name">Controlling the <code class="systemitem">autofs</code> Service</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.debugging.service">#</a></h3></div></div></div><p>
    The operation of the <code class="systemitem">autofs</code> service is controlled
    by <code class="systemitem">systemd</code>. The general syntax of the <code class="command">systemctl</code>
    command for <code class="systemitem">autofs</code> is
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl <em class="replaceable ">SUB_COMMAND</em> autofs</pre></div><p>
    where <em class="replaceable ">SUB_COMMAND</em> is one of:
   </p><div class="variablelist "><dl class="variablelist"><dt id="idm139679202486832"><span class="term ">enable</span></dt><dd><p>
       Starts the automounter daemon at boot.
      </p></dd><dt id="idm139679202485008"><span class="term ">start</span></dt><dd><p>
       Starts the automounter daemon.
      </p></dd><dt id="idm139679202483184"><span class="term ">stop</span></dt><dd><p>
       Stops the automounter daemon. Automatic mount points are not accessible.
      </p></dd><dt id="idm139679202481328"><span class="term ">status</span></dt><dd><p>
       Prints the current status of the <code class="systemitem">autofs</code> service
       together with a part of a relevant log file.
      </p></dd><dt id="idm139679202479008"><span class="term ">restart</span></dt><dd><p>
       Stops and starts the automounter, terminating all running daemons and
       starting new ones.
      </p></dd><dt id="idm139679202477120"><span class="term ">reload</span></dt><dd><p>
       Checks the current <code class="filename">auto.master</code> map, restarts those
       daemons whose entries have changed, and starts new ones for new entries.
      </p></dd></dl></div></div><div class="sect2 " id="sec.autofs.debugging.problems"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.debugging.problems"><span class="number">31.3.2 </span><span class="name">Debugging the Automounter Problems</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.debugging.problems">#</a></h3></div></div></div><p>
    If you experience problems when mounting directories with
    <code class="systemitem">autofs</code>, it is useful to run the
    <code class="command">automount</code> daemon manually and watch its output messages:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Stop <code class="systemitem">autofs</code>.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl stop autofs</pre></div></li><li class="step "><p>
      From one terminal, run <code class="command">automount</code> manually in the
      foreground, producing verbose output.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> automount -f -v</pre></div></li><li class="step "><p>
      From another terminal, try to mount the auto-mounting file systems by
      accessing the mount points (for example by <code class="command">cd</code> or
      <code class="command">ls</code>).
     </p></li><li class="step "><p>
      Check the output of <code class="command">automount</code> from the first terminal
      for more information why the mount failed, or why it was not even
      attempted.
     </p></li></ol></div></div></div></div><div class="sect1 " id="sec.autofs.nfs"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.nfs"><span class="number">31.4 </span><span class="name">Auto-Mounting an NFS Share</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.nfs">#</a></h2></div></div></div><p>
   The following procedure illustrates how to configure
   <code class="systemitem">autofs</code> to auto-mount an NFS share available on your
   network. It makes use of the information mentioned above, and assumes you
   are familiar with NFS exports. For more information on NFS, see
   <a class="xref" href="cha.nfs.html" title="Chapter 29. Sharing File Systems with NFS">Chapter 29, <em>Sharing File Systems with NFS</em></a>.
  </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Edit the master map file <code class="filename">/etc/auto.master</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> vim /etc/auto.master</pre></div><p>
     Add a new entry for the new NFS mount at the end of
     <code class="filename">/etc/auto.master</code>:
    </p><div class="verbatim-wrap"><pre class="screen">/nfs      /etc/auto.nfs      --timeout=10</pre></div><p>
     It tells <code class="systemitem">autofs</code> that the base mount point is
     <code class="filename">/nfs</code>, the NFS shares are specified in the
     <code class="filename">/etc/auto.nfs</code> map, and that all shares in this map
     will be automatically unmounted after 10 seconds of inactivity.
    </p></li><li class="step "><p>
     Create a new map file for NFS shares:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> vim /etc/auto.nfs</pre></div><p>
     <code class="filename">/etc/auto.nfs</code> normally contains a separate line for
     each NFS share. Its format is described in
     <a class="xref" href="cha.autofs.html#sec.autofs.mapfiles" title="31.2.2. Map Files">Section 31.2.2, “Map Files”</a>. Add the line describing the mount point
     and the NFS share network address:
    </p><div class="verbatim-wrap"><pre class="screen">export      jupiter.com:/home/geeko/doc/export</pre></div><p>
     The above line means that the <code class="filename">/home/geeko/doc/export</code>
     directory on the <code class="literal">jupiter.com</code> host will be auto-mounted
     to the <code class="filename">/nfs/export</code> directory on the local host
     (<code class="filename">/nfs</code> is taken from the
     <code class="filename">auto.master</code> map) when requested. The
     <code class="filename">/nfs/export</code> directory will be created automatically
     by <code class="systemitem">autofs</code>.
    </p></li><li class="step "><p>
     Optionally comment out the related line in <code class="filename">/etc/fstab</code>
     if you previously mounted the same NFS share statically. The line should
     look similar to this:
    </p><div class="verbatim-wrap"><pre class="screen">#jupiter.com:/home/geeko/doc/export /nfs/export nfs defaults 0 0</pre></div></li><li class="step "><p>
     Reload <code class="systemitem">autofs</code> and check if it works:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart autofs</pre></div><div class="verbatim-wrap"><pre class="screen"># ls -l /nfs/export
total 20
drwxr-xr-x  6 1001 users 4096 Oct 25 08:56 ./
drwxr-xr-x  3 root root     0 Apr  1 09:47 ../
drwxr-xr-x  5 1001 users 4096 Jan 14  2013 .images/
drwxr-xr-x 10 1001 users 4096 Aug 16  2013 .profiled/
drwxr-xr-x  3 1001 users 4096 Aug 30  2013 .tmp/
drwxr-xr-x  4 1001 users 4096 Oct 25 08:56 SLE-12-manual/</pre></div><p>
     If you can see the list of files on the remote share, then
     <code class="systemitem">autofs</code> is functioning.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.autofs.advanced"><div class="titlepage"><div><div><h2 class="title" id="sec.autofs.advanced"><span class="number">31.5 </span><span class="name">Advanced Topics</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.advanced">#</a></h2></div></div></div><p>
   This section describes topics that are beyond the basic introduction to
   <code class="systemitem">autofs</code>—auto-mounting of NFS shares that are
   available on your network, using wild cards in map files, and information
   specific to the CIFS file system.
  </p><div class="sect2 " id="sec.autofs.advanced.net"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.advanced.net"><span class="number">31.5.1 </span><span class="name"><code class="filename">/net</code> Mount Point</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.advanced.net">#</a></h3></div></div></div><p>
    This helper mount point is useful if you use a lot of NFS shares.
    <code class="filename">/net</code> auto-mounts all NFS shares on your local network
    on demand. The entry is already present in the
    <code class="filename">auto.master</code> file, so all you need to do is uncomment
    it and restart <code class="systemitem">autofs</code>:
   </p><div class="verbatim-wrap"><pre class="screen">/net      -hosts</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> systemctl restart autofs</pre></div><p>
    For example, if you have a server named <code class="literal">jupiter</code> with an
    NFS share called <code class="filename">/export</code>, you can mount it by typing
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> cd /net/jupiter/export</pre></div><p>
    on the command line.
   </p></div><div class="sect2 " id="sec.autofs.advanced.wildcards"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.advanced.wildcards"><span class="number">31.5.2 </span><span class="name">Using Wild Cards to Auto-Mount Subdirectories</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.advanced.wildcards">#</a></h3></div></div></div><p>
    If you have a directory with subdirectories that you need to auto-mount
    individually—the typical case is the <code class="filename">/home</code>
    directory with individual users' home directories inside—
    <code class="systemitem">autofs</code> offers a clever solution for that.
   </p><p>
    In case of home directories, add the following line in
    <code class="filename">auto.master</code>:
   </p><div class="verbatim-wrap"><pre class="screen">/home      /etc/auto.home</pre></div><p>
    Now you need to add the correct mapping to the
    <code class="filename">/etc/auto.home</code> file, so that the users' home
    directories are mounted automatically. One solution is to create separate
    entries for each directory:
   </p><div class="verbatim-wrap"><pre class="screen">wilber      jupiter.com:/home/wilber
penguin      jupiter.com:/home/penguin
tux      jupiter.com:/home/tux
[...]</pre></div><p>
    This is very awkward as you need to manage the list of users inside
    <code class="filename">auto.home</code>. You can use the asterisk '*' instead of the
    mount point, and the ampersand '&amp;' instead of the directory to be
    mounted:
   </p><div class="verbatim-wrap"><pre class="screen">*      jupiter:/home/&amp;</pre></div></div><div class="sect2 " id="sec.autofs.advanced.cifs"><div class="titlepage"><div><div><h3 class="title" id="sec.autofs.advanced.cifs"><span class="number">31.5.3 </span><span class="name">Auto-Mounting CIFS File System</span> <a title="Permalink" class="permalink" href="cha.autofs.html#sec.autofs.advanced.cifs">#</a></h3></div></div></div><p>
    If you want to auto-mount an SMB/CIFS share (see
    <a class="xref" href="cha.samba.html" title="Chapter 30. Samba">Chapter 30, <em>Samba</em></a> for more information on the SMB/CIFS protocol),
    you need to modify the syntax of the map file. Add
    <code class="option">-fstype=cifs</code> in the option field, and prefix the share
    location with a colon ':'.
   </p><div class="verbatim-wrap"><pre class="screen">mount point      -fstype=cifs      ://jupiter.com/export</pre></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="part.trouble.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Part V </span>Troubleshooting</span></a><a class="nav-link" href="cha.samba.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 30 </span>Samba</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>