<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Preparing Network Boot Environment | Deployment Guide | SUSE Linux Enterprise Server 15</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="SUSE Linux Enterprise Server" /><meta name="product-number" content="15" /><meta name="book-title" content="Deployment Guide" /><meta name="chapter-title" content="Chapter 14. Preparing Network Boot Environment" /><meta name="description" content="This chapter describes how to configure a DHCP and a TFTP server that provide the required infrastructure for booting with PXE." /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="fs@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="Beta SUSE Linux Enterprise Server 15" /><link rel="home" href="index.html" title="SUSE Linux Enterprise Server Documentation" /><link rel="up" href="part.installserver.html" title="Part III. Setting Up an Installation Server" /><link rel="prev" href="cha.deployment.instserver.html" title="Chapter 13. Setting Up a Network Installation Source" /><link rel="next" href="part.sysconfig.html" title="Part IV. Initial System Configuration" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.sle.deployment.html">Deployment Guide</a><span> › </span><a class="crumb" href="part.installserver.html">Setting Up an Installation Server</a><span> › </span><a class="crumb" href="cha.deployment.prep_pxe.html">Preparing Network Boot Environment</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Deployment Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="preface.deployment.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="part.prep.html"><span class="number">I </span><span class="name">Installation Preparation</span></a><ol><li class="inactive"><a href="cha.planning.html"><span class="number">1 </span><span class="name">Planning for <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span></a></li><li class="inactive"><a href="cha.x86.html"><span class="number">2 </span><span class="name">Installation on AMD64 and Intel 64</span></a></li><li class="inactive"><a href="cha.aarch64.html"><span class="number">3 </span><span class="name">Installation on ARM AArch64</span></a></li><li class="inactive"><a href="cha.power.html"><span class="number">4 </span><span class="name">Installation on IBM POWER</span></a></li><li class="inactive"><a href="cha.zseries.html"><span class="number">5 </span><span class="name">Installation on IBM Z</span></a></li><li class="inactive"><a href="cha.kiso.html"><span class="number">6 </span><span class="name">Installation on Hardware Not Supported at Release</span></a></li></ol></li><li class="inactive"><a href="part.deployment.html"><span class="number">II </span><span class="name">Installation Procedure</span></a><ol><li class="inactive"><a href="cha.boot_parameters.html"><span class="number">7 </span><span class="name">Boot Parameters</span></a></li><li class="inactive"><a href="cha.install.html"><span class="number">8 </span><span class="name">Installation Steps</span></a></li><li class="inactive"><a href="cha.expert_partitioner.html"><span class="number">9 </span><span class="name">Expert Partitioner</span></a></li><li class="inactive"><a href="cha.remote_installation.html"><span class="number">10 </span><span class="name">Remote Installation</span></a></li><li class="inactive"><a href="cha.deployment.clone_image.html"><span class="number">11 </span><span class="name">Cloning Disk Images</span></a></li><li class="inactive"><a href="cha.installation_troubleshooting.html"><span class="number">12 </span><span class="name">Troubleshooting</span></a></li></ol></li><li class="inactive"><a href="part.installserver.html"><span class="number">III </span><span class="name">Setting Up an Installation Server</span></a><ol><li class="inactive"><a href="cha.deployment.instserver.html"><span class="number">13 </span><span class="name">Setting Up a Network Installation Source</span></a></li><li class="inactive"><a href="cha.deployment.prep_pxe.html"><span class="number">14 </span><span class="name">Preparing Network Boot Environment</span></a></li></ol></li><li class="inactive"><a href="part.sysconfig.html"><span class="number">IV </span><span class="name">Initial System Configuration</span></a><ol><li class="inactive"><a href="cha.yast.hw.html"><span class="number">15 </span><span class="name">Setting Up Hardware Components with YaST</span></a></li><li class="inactive"><a href="cha.yast-software.html"><span class="number">16 </span><span class="name">Installing or Removing Software</span></a></li><li class="inactive"><a href="cha.add-ons.html"><span class="number">17 </span><span class="name">Installing Modules, Extensions, and Third Party Add-On Products</span></a></li><li class="inactive"><a href="cha.tuning.multikernel.html"><span class="number">18 </span><span class="name">Installing Multiple Kernel Versions</span></a></li><li class="inactive"><a href="cha.yast.userman.html"><span class="number">19 </span><span class="name">Managing Users with YaST</span></a></li><li class="inactive"><a href="cha.yast.lang.html"><span class="number">20 </span><span class="name">Changing Language and Country Settings with YaST</span></a></li></ol></li><li class="inactive"><a href="app.create-os-image.html"><span class="number">A </span><span class="name">Imaging and Creating Products</span></a></li><li class="inactive"><a href="bk02apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 13. Setting Up a Network Installation Source" href="cha.deployment.instserver.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part IV. Initial System Configuration" href="part.sysconfig.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE Linux Enterprise Server Documentation"><span class="book-icon">SUSE Linux Enterprise Server Documentation</span></a><span> › </span><a class="crumb" href="book.sle.deployment.html">Deployment Guide</a><span> › </span><a class="crumb" href="part.installserver.html">Setting Up an Installation Server</a><span> › </span><a class="crumb" href="cha.deployment.prep_pxe.html">Preparing Network Boot Environment</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 13. Setting Up a Network Installation Source" href="cha.deployment.instserver.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Part IV. Initial System Configuration" href="part.sysconfig.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha.deployment.prep_pxe"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span></span> <span class="productnumber"><span class="productnumber"><span class="phrase">15</span></span></span></div><div><h2 class="title"><span class="number">14 </span><span class="name">Preparing Network Boot Environment</span> </h2><div class="doc-status"><ul><li><span class="ds-label">Filename: </span>deployment_pxe.xml</li><li><span class="ds-label">ID: </span>cha.deployment.prep_pxe</li></ul></div></div><div><div class="abstract"><div class="abstract-title-wrap"><h6 class="abstract-title">Abstract<a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#idm140302639318064">#</a></h6></div><p>
    This chapter describes how to configure a DHCP and a TFTP server
    that provide the required infrastructure for booting with PXE.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.dhcp_server"><span class="number">14.1 </span><span class="name">Setting Up a DHCP Server</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server"><span class="number">14.2 </span><span class="name">Setting Up a TFTP Server</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.pxeopts"><span class="number">14.3 </span><span class="name">PXELINUX Configuration Options</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.pxeprep"><span class="number">14.4 </span><span class="name">Preparing the Target System for PXE Boot</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.wolprep"><span class="number">14.5 </span><span class="name">Preparing the Target System for Wake on LAN</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.wol"><span class="number">14.6 </span><span class="name">Wake on LAN</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.wolyast"><span class="number">14.7 </span><span class="name">Wake on LAN with YaST</span></a></span></dt><dt><span class="sect1"><a href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.mksusecd"><span class="number">14.8 </span><span class="name">Booting from CD or USB Drive Instead of PXE</span></a></span></dt></dl></div></div><p>
  <span class="productname"><span class="phrase">SUSE® Linux Enterprise Server</span></span> can be installed via a Preboot Execution Environment
  (PXE). The client hardware needs to support booting via PXE. The
  network needs to provide a DHCP server and a TFTP server providing the
  required data to the clients. This chapter guides you through setting
  up the required servers.
 </p><p>
  PXE only boots a kernel and initrd. This can be used to boot into an
  installation environment or into live systems. To setup the
  installation sources, see <a class="xref" href="cha.deployment.instserver.html" title="Chapter 13. Setting Up a Network Installation Source">Chapter 13, <em>Setting Up a Network Installation Source</em></a>.
 </p><p>
  This section covers the configuration tasks needed in complex boot
  scenarios. It contains ready-to-apply configuration examples for
  DHCP, PXE boot, TFTP, and Wake on LAN.
 </p><p>
  The examples assume that the DHCP, TFTP and NFS server reside on the
  same machine with the IP <code class="literal">192.168.1.1</code>. All services
  can reside on different machines without any problems. Make sure to
  change the IP addresses as required.
 </p><div class="sect1 " id="sec.deployment.dhcp_server"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.dhcp_server"><span class="number">14.1 </span><span class="name">Setting Up a DHCP Server</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.dhcp_server">#</a></h2></div></div></div><p>
   In addition to providing automatic address allocation to your
   network clients, the DHCP server announces the IP address of the
   TFTP server and the paths to the Kernel and Initrd files. Which file
   needs to be loaded depends on the architecture of the target machine
   and whether legacy BIOS or UEFI boot is used. The clients transmit
   their architecture type in the DHCP request. On this information,
   the DHCP server can decide which files the client must download for
   booting.
  </p><div class="procedure " id="pro.deployment.dhcp_server"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Log in as <code class="systemitem">root</code> to the machine hosting the DHCP server.
    </p></li><li class="step "><p>
     Enable the DHCP server by executing <code class="command">systemctl enable
     dhcpd</code>.
    </p></li><li class="step "><p>
     Append the following lines to a subnet configuration of your DHCP
     server's configuration file located under
     <code class="filename">/etc/dhcpd.conf</code>:
    </p><div class="verbatim-wrap"><pre class="screen"># The following lines are optional
option domain-name "my.lab";
option domain-name-servers 192.168.1.1;
option routers 192.168.1.1;
option ntp-servers 192.168.1.1;
ddns-update-style none;
default-lease-time 3600;

# The following lines are required
option arch code 93 = unsigned integer 16; # RFC4578
subnet 192.168.1.0 netmask 255.255.255.0 {
 next-server 192.168.1.1;
 range 192.168.1.100 192.168.1.199;
 default-lease-time 3600;
 max-lease-time 3600;
 if option arch = 00:07 or option arch = 00:09 {
   filename "/EFI/x86/grub.efi";
 }
 else if option arch = 00:0b {
   filename "/EFI/aarch64/bootaa64.efi";
 }
 else  {
   filename "/BIOS/x86/pxelinux.0";
 }
}</pre></div><p>
     This configuration example uses the subnet <code class="literal">192.168.1.0/24</code> with the
     DHCP, DNS and gateway on the server with the IP <code class="literal">192.168.1.1</code>. Make sure
     that all used IP addresses are changed according to your network layout.
     For more information about the options available in <code class="filename">dhcpd.conf</code>,
     refer to the <code class="systemitem">dhcpd.conf</code> manual page.
    </p></li><li class="step "><p>
     Restart the DHCP server by executing <code class="command">systemctl restart
     dhcpd</code>.
    </p></li></ol></div></div><p>
   If you plan to use SSH for the remote control of a PXE and Wake on LAN
   installation, specify the IP address DHCP should provide to the
   installation target. To achieve this, modify the above mentioned DHCP
   configuration according to the following example:
  </p><div class="verbatim-wrap"><pre class="screen">group {
 host test {
   hardware ethernet <em class="replaceable ">MAC_ADDRESS</em>;
   fixed-address <em class="replaceable ">IP_ADDRESS</em>;
   }
}</pre></div><p>
   The host statement introduces the host name of the installation target. To
   bind the host name and IP address to a specific host, you must know and
   specify the system's hardware (MAC) address. Replace all the variables used
   in this example with the actual values that match your environment.
  </p><p>
   After restarting the DHCP server, it provides a static IP to the host
   specified, enabling you to connect to the system via SSH.
  </p></div><div class="sect1 " id="sec.deployment.tftp_server"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.tftp_server"><span class="number">14.2 </span><span class="name">Setting Up a TFTP Server</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server">#</a></h2></div></div></div><p>
   The following procedures describe how to prepare the server for target
   machines with UEFI and BIOS on x86 architectures with 32 and 64 bits.
   The prepared structure also already provides for AArch64 systems.
  </p><div class="sect2 " id="sec.deployment.tftp_server.install"><div class="titlepage"><div><div><h3 class="title" id="sec.deployment.tftp_server.install"><span class="number">14.2.1 </span><span class="name">Installing TFTP Server</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server.install">#</a></h3></div></div></div><p>
    To install a TFTP server, use the following procedure:
   </p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
      Install the <code class="systemitem">tftp</code> package.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">zypper in tftp</code></pre></div></li><li class="step "><p>
      Review the <code class="systemitem">tftpd</code> configuration in
      <code class="filename">/etc/sysconfig/tftp</code> and add or change options as
      required. Refer to <code class="command">man 8 tftpd</code> for more details.
      The TFTP daemon works without changing the configuration. The default root
      directory for the files is <code class="filename">/srv/tftpboot</code>.
     </p></li><li class="step "><p>
      Ensure that <code class="systemitem">tftpd</code> is started at
      boot time, and restart it to read the new configuration.
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">systemctl enable tftp.socket</code>
<code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">systemctl restart tftp.socket</code></pre></div></li></ol></div></div></div><div class="sect2 " id="sec.deployment.tftp_server.grub_package"><div class="titlepage"><div><div><h3 class="title" id="sec.deployment.tftp_server.grub_package"><span class="number">14.2.2 </span><span class="name">Installing PXE Files from Package</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server.grub_package">#</a></h3></div></div></div><p>
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> provides the required files for booting via a PXE on BIOS or
    UEFI machines in an RPM. Install the files on the machine running the TFTP server:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">sudo</code> <code class="command">zypper in tftpboot-installation-SLES-<em class="replaceable ">OS_VERSION</em>-<em class="replaceable ">ARCHITECTURE</em></code></pre></div><p>
    Replace <em class="replaceable ">OS_VERSION</em> with the version of your
    <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> installation, for example <code class="literal">15</code> and
    <em class="replaceable ">ARCHITECTURE</em> with the architecture of your
    system, for example <code class="literal">x86_64</code>. You can use
    <code class="command">zypper se tftpboot</code> to search for all available
    versions and architectures.
   </p><p>
    The files will be installed in
    <code class="filename">/srv/tftpboot/SLES-<em class="replaceable ">OS_VERSION</em>-<em class="replaceable ">ARCHITECTURE</em></code>.
    You can also copy the files for other versions and
    architectures of <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> to the
    <code class="filename">/srv/tftpboot</code> directory.
   </p></div><div class="sect2 " id="sec.deployment.tftp_server.pxelinux"><div class="titlepage"><div><div><h3 class="title" id="sec.deployment.tftp_server.pxelinux"><span class="number">14.2.3 </span><span class="name">Configuring PXELINUX</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server.pxelinux">#</a></h3></div></div></div><p>
    Open the file
    <code class="filename">/srv/tftpboot/SLES-<em class="replaceable ">OS_VERSION</em>-<em class="replaceable ">ARCHITECTURE</em>/net/pxelinux.cfg/default</code>
    in an editor. Replace the path for the <code class="literal">install</code>
    parameter according to your setup as described in <a class="xref" href="cha.deployment.instserver.html" title="Chapter 13. Setting Up a Network Installation Source">Chapter 13, <em>Setting Up a Network Installation Source</em></a>. Also replace
    <em class="replaceable ">TFTP_SERVER</em> with the IP address of the
    TFTP server. For an overview of the PXELINUX configuration options,
    see <a class="xref" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.pxeopts" title="14.3. PXELINUX Configuration Options">Section 14.3, “PXELINUX Configuration Options”</a>.
   </p><div class="verbatim-wrap"><pre class="screen">default linux

# install
label linux
  ipappend 2
  kernel boot/<em class="replaceable ">ARCHITECTURE</em>/loader/linux
  append initrd=boot/x86_64/<em class="replaceable ">ARCHITECTURE</em>/initrd instsys=tftp://<em class="replaceable ">TFTP_SERVER</em>/SLES-<em class="replaceable ">OS_VERSION</em>-<em class="replaceable ">ARCHITECTURE</em>/boot/<em class="replaceable ">ARCHITECTURE</em>/root install=<em class="replaceable ">PROTOCOL</em>://<em class="replaceable ">SERVER_IP</em>:/<em class="replaceable ">PATH</em>

display  message
implicit 1
prompt  1
timeout  50</pre></div><p>
    For details about the boot parameters that are used in the <code class="literal">append</code> line,
    see <a class="xref" href="cha.boot_parameters.html#sec.boot_parameters.list" title="7.3. List of Important Boot Parameters">Section 7.3, “List of Important Boot Parameters”</a>.
   </p><p>
    If required, edit the
    <code class="filename">/srv/tftpboot/SLES-<em class="replaceable ">OS_VERSION</em>-<em class="replaceable ">ARCHITECTURE</em>/net/pxelinux.cfg/message</code>
    to display a message in the boot menu.
   </p></div><div class="sect2 " id="sec.deployment.tftp_server.efilinux_x86"><div class="titlepage"><div><div><h3 class="title" id="sec.deployment.tftp_server.efilinux_x86"><span class="number">14.2.4 </span><span class="name">Preparing PXE Boot for EFI with GRUB2</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server.efilinux_x86">#</a></h3></div></div></div><p>
    There is no need to change the GRUB2 configuration files. However,
    in the default settings no network source for the installation system
    is provided. If you want to fully install <span class="productname"><span class="phrase">SUSE Linux Enterprise Server</span></span> via the
    network, add the <code class="option">install</code> parameter to the
    <code class="option">linuxefi</code> lines in the file
    <code class="filename">/srv/tftpboot/SLES-<em class="replaceable ">OS_VERSION</em>-<em class="replaceable ">ARCHITECTURE</em>/EFI/BOOT/grub.cfg</code>.
    Set the <code class="literal">install</code>
    parameter according to your setup as described in
    <a class="xref" href="cha.deployment.instserver.html" title="Chapter 13. Setting Up a Network Installation Source">Chapter 13, <em>Setting Up a Network Installation Source</em></a>. For details about other
    boot parameters that are used in the <code class="literal">efilinux</code>
    lines, see <a class="xref" href="cha.boot_parameters.html#sec.boot_parameters.list" title="7.3. List of Important Boot Parameters">Section 7.3, “List of Important Boot Parameters”</a>.
   </p></div></div><div class="sect1 " id="sec.deployment.prep_boot.pxeopts"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.prep_boot.pxeopts"><span class="number">14.3 </span><span class="name">PXELINUX Configuration Options</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.pxeopts">#</a></h2></div></div></div><p>
   The options listed here are a subset of all the options available for the
   PXELINUX configuration file.
  </p><div class="variablelist "><dl class="variablelist"><dt id="idm140302639245312"><span class="term "><code class="option">APPEND <em class="replaceable ">OPTIONS</em></code>
    </span></dt><dd><p>
      Add one or more options to the kernel command line. These are added for
      both automatic and manual boots. The options are added at the very
      beginning of the kernel command line, usually permitting explicitly
      entered kernel options to override them.
     </p></dd><dt id="idm140302639242688"><span class="term "><code class="option">APPEND -</code>
    </span></dt><dd><p>
      Append nothing. <code class="option">APPEND</code> with a single hyphen as argument
      in a <code class="option">LABEL</code> section can be used to override a global
      <code class="option">APPEND</code>.
     </p></dd><dt id="idm140302639239200"><span class="term "><code class="option">DEFAULT <em class="replaceable ">KERNEL_OPTIONS</em>...</code>
    </span></dt><dd><p>
      Sets the default kernel command line. If PXELINUX boots automatically, it
      acts as if the entries after DEFAULT had been typed in at the boot
      prompt, except the auto option is automatically added, indicating an
      automatic boot.
     </p><p>
      If no configuration file exists or no DEFAULT entry is defined in the
      configuration file, the default is the kernel name <span class="quote">“<span class="quote">linux</span>”</span>
      with no options.
     </p></dd><dt id="idm140302639235408"><span class="term "><code class="option">IFAPPEND <em class="replaceable ">FLAG</em></code>
    </span></dt><dd><p>
      Adds a specific option to the kernel command line depending on the
      <em class="replaceable ">FLAG</em> value. The <code class="option">IFAPPEND</code>
      option is available only on PXELINUX. <em class="replaceable ">FLAG</em>
      expects a value, described in
      <a class="xref" href="cha.deployment.prep_pxe.html#tab.deployment.boot.pxeopts.ifappend" title="Generated and Added Kernel Command Line Options from IFAPPEND">Table 14.1, “Generated and Added Kernel Command Line Options from <code class="option">IFAPPEND</code>”</a>:
     </p><div class="table" id="tab.deployment.boot.pxeopts.ifappend"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.1: </span><span class="name">Generated and Added Kernel Command Line Options from <code class="option">IFAPPEND</code> </span><a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#tab.deployment.boot.pxeopts.ifappend">#</a></h6></div><div class="table-contents"><table summary="Generated and Added Kernel Command Line Options from IFAPPEND" border="1"><colgroup><col /><col /></colgroup><thead><tr><th valign="middle">
          <p>
           Argument
          </p>
         </th><th>
          <p>
           Generated Kernel Command Line / Description
          </p>
         </th></tr></thead><tbody><tr><td>
          <p>
           <code class="option">1</code>
          </p>
         </td><td>
<div class="verbatim-wrap"><pre class="screen">ip=<em class="replaceable ">CLIENT_IP</em>:<em class="replaceable ">BOOT_SERVER_IP</em>:<em class="replaceable ">GW_IP</em>:<em class="replaceable ">NETMASK</em></pre></div>
          <p>
           The placeholders are replaced based on the input from the DHCP/BOOTP
           or PXE boot server.
          </p>
          <p>
           Note, this option is not a substitute for running a DHCP client in
           the booted system. Without regular renewals, the lease acquired by
           the PXE BIOS will expire, making the IP address available for reuse
           by the DHCP server.
          </p>
         </td></tr><tr><td>
          <p>
           <code class="option">2</code>
          </p>
         </td><td>
<div class="verbatim-wrap"><pre class="screen">BOOTIF=<em class="replaceable ">MAC_ADDRESS_OF_BOOT_INTERFACE</em></pre></div>
          <p>
           This option is useful to avoid timeouts when the
           installation server probes one LAN interface after the other until
           it gets a reply from a DHCP server. This option allows an
           initrd program to determine from which interface the system has been
           booted. linuxrc reads this option and uses this network interface.
          </p>
         </td></tr><tr><td>
          <p>
           <code class="option">4</code>
          </p>
         </td><td>
<div class="verbatim-wrap"><pre class="screen">SYSUUID=<em class="replaceable ">SYSTEM_UUID</em></pre></div>
          <p>
           Adds UUIDs in lowercase hexadecimals, see
           <code class="filename">/usr/share/doc/packages/syslinux/pxelinux.txt</code>
          </p>
         </td></tr></tbody></table></div></div></dd><dt id="idm140302639210656"><span class="term "><code class="option">LABEL <em class="replaceable ">LABEL</em> KERNEL <em class="replaceable ">IMAGE</em>
       APPEND <em class="replaceable ">OPTIONS</em>...</code>
    </span></dt><dd><p>
      Indicates that if <em class="replaceable ">LABEL</em> is entered as the
      kernel to boot, PXELINUX should instead boot
      <em class="replaceable ">IMAGE</em> and the specified
      <code class="option">APPEND</code> options should be used. They replace the ones
      specified in the global section of the file, before the first
      <code class="option">LABEL</code> command. The default for
      <em class="replaceable ">IMAGE</em> is the same as
      <em class="replaceable ">LABEL</em> and, if no <code class="option">APPEND</code> is
      given, the default is to use the global entry (if any). Up to 128
      <code class="option">LABEL</code> entries are permitted.
     </p><p>
      PXELINUX uses the following syntax:
     </p><div class="verbatim-wrap"><pre class="screen">label <em class="replaceable ">MYLABEL</em>
  kernel <em class="replaceable ">MYKERNEL</em>
  append <em class="replaceable ">MYOPTIONS</em></pre></div><p>
      Labels are mangled as if they were file names and they must be unique
      after mangling. For example, the two labels <span class="quote">“<span class="quote">v2.6.30</span>”</span> and
      <span class="quote">“<span class="quote">v2.6.31</span>”</span> would not be distinguishable under PXELINUX
      because both mangle to the same DOS file name.
     </p><p>
      The kernel does not need to be a Linux kernel. It can also be a boot
      sector or a COMBOOT file.
     </p></dd><dt id="idm140302639199152"><span class="term "><code class="option">LOCALBOOT <em class="replaceable ">TYPE</em></code>
    </span></dt><dd><p>
      On PXELINUX, specifying <code class="option">LOCALBOOT 0</code> instead of a
      <code class="option">KERNEL</code> option means invoking this particular label and
      causes a local disk boot instead of a kernel boot.
     </p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>
          <p>
           Argument
          </p>
         </th><th>
          <p>
           Description
          </p>
         </th></tr></thead><tbody><tr><td>
          <p>
           <code class="literal">0</code>
          </p>
         </td><td>
          <p>
           Perform a normal boot
          </p>
         </td></tr><tr><td>
          <p>
           <code class="literal">4</code>
          </p>
         </td><td>
          <p>
           Perform a local boot with the Universal Network Driver Interface
           (UNDI) driver still resident in memory
          </p>
         </td></tr><tr><td>
          <p>
           <code class="literal">5</code>
          </p>
         </td><td>
          <p>
           Perform a local boot with the entire PXE stack, including the UNDI
           driver, still resident in memory
          </p>
         </td></tr></tbody></table></div><p>
      All other values are undefined. If you do not know what the UNDI or PXE
      stacks are, specify <code class="literal">0</code>.
     </p></dd><dt id="idm140302639181568"><span class="term "><code class="option">TIMEOUT <em class="replaceable ">TIME-OUT</em></code>
    </span></dt><dd><p>
      Indicates how long to wait at the boot prompt until booting
      automatically, in units of 1/10 second. The time-out is canceled when the
      user types anything on the keyboard, assuming the user will complete the
      command begun. A time-out of zero disables the time-out completely (this
      is also the default). The maximum possible time-out value is 35996 (just
      less than one hour).
     </p></dd><dt id="idm140302639178800"><span class="term "><code class="option">PROMPT<em class="replaceable "> flag_val</em></code>
    </span></dt><dd><p>
      If <code class="option">flag_val</code> is 0, displays the boot prompt only if
      <span class="keycap">Shift</span> or <span class="keycap">Alt</span> is pressed or
      <span class="keycap">Caps Lock</span> or <span class="keycap">Scroll Lock</span> is set (this
      is the default). If <code class="option">flag_val</code> is 1, always displays the
      boot prompt.
     </p><div class="verbatim-wrap"><pre class="screen">F2  <em class="replaceable ">FILENAME</em>
F1  <em class="replaceable ">FILENAME</em>
..etc...
F9  <em class="replaceable ">FILENAME</em>
F10 <em class="replaceable ">FILENAME</em></pre></div><p>
      Displays the indicated file on the screen when a function key is pressed
      at the boot prompt. This can be used to implement preboot online help
      (presumably for the kernel command line options). For backward
      compatibility with earlier releases, <span class="keycap">F10</span> can be also
      entered as <code class="literal">F0</code>. Note that there is currently no way to
      bind file names to <span class="keycap">F11</span> and <span class="keycap">F12</span>.
     </p></dd></dl></div></div><div class="sect1 " id="sec.deployment.prep_boot.pxeprep"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.prep_boot.pxeprep"><span class="number">14.4 </span><span class="name">Preparing the Target System for PXE Boot</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.pxeprep">#</a></h2></div></div></div><p>
   Prepare the system's BIOS for PXE boot by including the PXE option in the
   BIOS boot order.
  </p><div id="idm140302639166720" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning: BIOS Boot Order</h6><p>
    Do not place the PXE option ahead of the hard disk boot parameter in the BIOS.
    Otherwise this system would try to re-install itself every time you boot
    it.
   </p></div></div><div class="sect1 " id="sec.deployment.prep_boot.wolprep"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.prep_boot.wolprep"><span class="number">14.5 </span><span class="name">Preparing the Target System for Wake on LAN</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.wolprep">#</a></h2></div></div></div><p>
   Wake on LAN (WOL) requires the appropriate BIOS option to be enabled prior
   to the installation. Also, note down the MAC address of the target system.
   This data is needed to initiate Wake on LAN.
  </p></div><div class="sect1 " id="sec.deployment.prep_boot.wol"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.prep_boot.wol"><span class="number">14.6 </span><span class="name">Wake on LAN</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.wol">#</a></h2></div></div></div><p>
   Wake on LAN allows a machine to be turned on by a special network packet
   containing the machine's MAC address. Because every machine in the world has
   a unique MAC identifier, you do not need to worry about accidentally turning
   on the wrong machine.
  </p><div id="idm140302639161184" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Wake on LAN across Different Network Segments</h6><p>
    If the controlling machine is not located on the same network segment as
    the target of the WOL command, you have 2 options. Either configure the WOL
    requests to be sent as multicasts, or remotely control a machine on that
    network segment to act as the sender of these requests.
   </p></div><p>
   Users of SUSE Linux Enterprise Server can use a YaST module called WOL to easily configure Wake
   on LAN. Users of other versions of SUSE Linux-based operating systems can
   use a command line tool.
  </p></div><div class="sect1 " id="sec.deployment.prep_boot.wolyast"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.prep_boot.wolyast"><span class="number">14.7 </span><span class="name">Wake on LAN with YaST</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.wolyast">#</a></h2></div></div></div><p>
   Use this procedure to configure Wake on LAN with YaST.
  </p><div class="procedure " id="pro.deployment.prep_boot.wolyast"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>
     Log in as <code class="systemitem">root</code>.
    </p></li><li class="step "><p>
     Start <span class="guimenu">YaST</span> › <span class="guimenu">Network
     Services</span> › <span class="guimenu">WOL</span>.
    </p></li><li class="step "><p>
     Click <span class="guimenu">Add</span> and enter the host name and MAC address of
     the target system.
    </p></li><li class="step "><p>
     To turn on this machine, select the appropriate entry and click
     <span class="guimenu">Wake up</span>.
    </p></li></ol></div></div></div><div class="sect1 " id="sec.deployment.prep_boot.mksusecd"><div class="titlepage"><div><div><h2 class="title" id="sec.deployment.prep_boot.mksusecd"><span class="number">14.8 </span><span class="name">Booting from CD or USB Drive Instead of PXE</span> <a title="Permalink" class="permalink" href="cha.deployment.prep_pxe.html#sec.deployment.prep_boot.mksusecd">#</a></h2></div></div></div><p>
   You can also use a CD, DVD or USB drive with a small system image instead of
   booting via PXE. The necessary files will be fetched via NFS when the
   kernel and initrd are loaded. A bootable image can be created with
   <code class="command">mksusecd</code>. This can be useful if the target machine does
   not support PXE boot.
  </p><p>
   Install it with <code class="command">sudo zypper in mksusecd</code>.
   Use the following command to create a bootable ISO image:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">mksusecd</code> --create image.iso \
--net=nfs://192.168.1.1:/srv/install/<em class="replaceable ">ARCH</em>/<em class="replaceable ">OS_VERSION</em>/<em class="replaceable ">SP_VERSION</em>/cd1  \
/srv/tftpboot/EFI/<em class="replaceable ">ARCH</em>/boot</pre></div><p>
   Replace <em class="replaceable ">ARCH</em> with the directory corresponding
   to the target system architecture. Also replace <em class="replaceable ">OS_version</em>
   and <em class="replaceable ">SP_version</em> according to your paths in
   <a class="xref" href="cha.deployment.prep_pxe.html#sec.deployment.tftp_server" title="14.2. Setting Up a TFTP Server">Section 14.2, “Setting Up a TFTP Server”</a>.
  </p><p>
   Instead of using an NFS server for the <code class="option">--net</code> option,
   it is also possible to use an HTTP repository, for example the openSUSE
   repository:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">mksusecd</code> --create image.iso \
--net=http://download.opensuse.org/tumbleweed/repo/oss/suse \
/srv/tftpboot/EFI/<em class="replaceable ">ARCH</em>/boot</pre></div><p>
   The <code class="filename">image.iso</code> can be written to a DVD or CD, or using <code class="command">dd</code> to a USB stick:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">dd</code> if=image.iso of=/dev/<em class="replaceable ">USB_DEVICE</em></pre></div><p>
   Replace <em class="replaceable ">USB_DEVICE</em> with the device name of your
   USB stick. Check the device name thoroughly to ensure that you are not
   accidentally destroying data on another drive.
  </p></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="part.sysconfig.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Part IV </span>Initial System Configuration</span></a><a class="nav-link" href="cha.deployment.instserver.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 13 </span>Setting Up a Network Installation Source</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>